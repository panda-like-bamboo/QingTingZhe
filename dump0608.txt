--- Directory Tree ---
QingtingzheDemoProject/
├── pic
│   └── ear_foreground.png
├── psychology-admin-frontend
│   ├── dist-admin
│   │   ├── assets
│   │   │   ├── index-C__84Kn4.js
│   │   │   ├── index-DBInCQLk.css
│   │   │   └── police_emblem-Dmb8xxjE.png
│   │   └── index.html
│   ├── dist-admin-fixed
│   │   ├── assets
│   │   │   ├── index-CmmWk_uV.js
│   │   │   ├── index-Cvl7QbF7.css
│   │   │   └── police_emblem-Dmb8xxjE.png
│   │   └── index.html
│   ├── dist-admin-new
│   │   ├── assets
│   │   │   ├── index-DBInCQLk.css
│   │   │   ├── index-Du69prlt.js
│   │   │   └── police_emblem-Dmb8xxjE.png
│   │   └── index.html
│   ├── public
│   │   └── index.html
│   ├── src
│   │   ├── api
│   │   │   └── index.js
│   │   ├── assets
│   │   │   ├── main.css
│   │   │   └── police_emblem.png
│   │   ├── components
│   │   │   ├── AppLayout.vue
│   │   │   ├── GuidanceForm.vue
│   │   │   ├── LoadingTip.vue
│   │   │   └── SideBar.vue
│   │   ├── data
│   │   │   └── laws.js
│   │   ├── router
│   │   │   └── index.js
│   │   ├── store
│   │   │   └── index.js
│   │   ├── styles
│   │   ├── utils
│   │   ├── views
│   │   │   ├── AssessmentSearchView.vue
│   │   │   ├── DashboardView.vue
│   │   │   ├── GuidanceGeneratorView.vue
│   │   │   ├── InterrogationEditView.vue
│   │   │   ├── InterrogationInputView.vue
│   │   │   ├── InterrogationListView.vue
│   │   │   ├── JuvenileCounselingView.vue
│   │   │   ├── LawQueryView.vue
│   │   │   ├── LoginView.vue
│   │   │   ├── PetitionerGuidanceView.vue
│   │   │   ├── PoliceAdjustmentView.vue
│   │   │   ├── ReportDetailView.vue
│   │   │   └── UserManagementView.vue
│   │   ├── App.vue
│   │   └── main.js
│   ├── .gitignore
│   ├── dist.zip
│   ├── index.html
│   ├── package-lock.json
│   ├── package.json
│   ├── README.md
│   └── vite.config.js
├── psychology-app-new
│   ├── dist-app
│   │   ├── assets
│   │   │   ├── index-CGTHoD7k.css
│   │   │   ├── index-CTufck70.js
│   │   │   └── police_emblem-Dmb8xxjE.png
│   │   ├── index.html
│   │   └── vite.svg
│   ├── public
│   │   ├── index.html
│   │   └── vite.svg
│   ├── src
│   │   ├── api
│   │   │   └── index.js
│   │   ├── assets
│   │   │   ├── logo.svg
│   │   │   ├── main.css
│   │   │   ├── police_emblem.png
│   │   │   └── sci-fi-theme.css
│   │   ├── components
│   │   │   ├── LoadingTip.vue
│   │   │   ├── NavBar.vue
│   │   │   ├── QuestionItem.vue
│   │   │   └── ScaleSelector.vue
│   │   ├── plugins
│   │   ├── router
│   │   │   └── index.js
│   │   ├── store
│   │   │   └── index.js
│   │   ├── utils
│   │   │   └── index.js
│   │   ├── views
│   │   │   ├── LoadingView.vue
│   │   │   ├── LoginView.vue
│   │   │   ├── QuestionnaireView.vue
│   │   │   ├── RegisterView.vue
│   │   │   ├── ReportView.vue
│   │   │   └── UserInfoView.vue
│   │   ├── App.vue
│   │   └── main.js
│   ├── .gitignore
│   ├── Combiner.py
│   ├── index.html
│   ├── package-lock.json
│   ├── package.json
│   ├── project_content_aggregator_output.txt
│   ├── project_text.txt
│   ├── README.md
│   └── vite.config.js
├── PsychologyAnalysis
│   ├── alembic
│   │   ├── versions
│   │   │   ├── 269625ee49fe_add_status_column_to_assessment_table.py
│   │   │   ├── 5976b03ee0fc_create_interrogation_records_table.py
│   │   │   ├── 72143d5034d8_create_users_table.py
│   │   │   └── a43553c2237e_add_attributes_and_assessment_.py
│   │   ├── env.py
│   │   ├── README
│   │   └── script.py.mako
│   ├── app
│   │   ├── core
│   │   │   ├── __init__.py
│   │   │   ├── celery_app.py
│   │   │   ├── config.py
│   │   │   ├── deps.py
│   │   │   ├── redis_client.py
│   │   │   └── security.py
│   │   ├── crud
│   │   │   ├── __init__.py
│   │   │   ├── assessment.py
│   │   │   ├── attribute.py
│   │   │   ├── interrogation.py
│   │   │   ├── stats.py
│   │   │   └── user.py
│   │   ├── db
│   │   │   ├── __init__.py
│   │   │   ├── base_class.py
│   │   │   ├── init_db.py
│   │   │   └── session.py
│   │   ├── models
│   │   │   ├── __init__.py
│   │   │   ├── assessment.py
│   │   │   ├── association_tables.py
│   │   │   ├── attribute.py
│   │   │   ├── interrogation.py
│   │   │   └── user.py
│   │   ├── routers
│   │   │   ├── __init__.py
│   │   │   ├── admin.py
│   │   │   ├── assessments.py
│   │   │   ├── auth.py
│   │   │   ├── encyclopedia.py
│   │   │   ├── reports.py
│   │   │   ├── scales.py
│   │   │   └── sse.py
│   │   ├── schemas
│   │   │   ├── __init__.py
│   │   │   ├── assessment.py
│   │   │   ├── attribute.py
│   │   │   ├── encyclopedia.py
│   │   │   ├── guidance.py
│   │   │   ├── interrogation.py
│   │   │   ├── report.py
│   │   │   ├── scale.py
│   │   │   ├── stats.py
│   │   │   ├── token.py
│   │   │   └── user.py
│   │   ├── tasks
│   │   │   ├── __init__.py
│   │   │   └── analysis.py
│   │   ├── __init__.py
│   │   └── main.py
│   ├── config
│   │   ├── config.yaml
│   │   └── psychology_encyclopedia.json
│   ├── input
│   │   ├── images
│   │   │   ├── dog_and_girl.jpeg
│   │   │   ├── image1.jpg
│   │   │   ├── TestPic.jpg
│   │   │   ├── testpic1.jpg
│   │   │   └── v2-b7ebd7f0a95bb411884521c43f19c846_xld.jpg
│   │   └── questionnaires
│   │       ├── 1测你性格最真实的一面.json
│   │       ├── 2亲子关系问卷量表.json
│   │       ├── 3焦虑症自评量表 (SAS).json
│   │       ├── 4标准量表：抑郁症自测量表 (SDS).json
│   │       ├── 5人际关系综合诊断量表.json
│   │       ├── 6情绪稳定性测验量表.json
│   │       ├── 7汉密尔顿抑郁量表HAMD24.json
│   │       ├── 8艾森克人格问卷EPQ85成人版.json
│   │       └── 9开心测试.json
│   ├── logs
│   │   └── app.log
│   ├── output
│   │   ├── descriptions
│   │   │   └── testpic1_desc.txt
│   │   └── reports
│   │       └── testpic1_report.txt
│   ├── src
│   │   ├── ai_utils.py
│   │   ├── api_tester.py
│   │   ├── data_entry.py
│   │   ├── data_handler.py
│   │   ├── guidance_generator.py
│   │   ├── image_processor.py
│   │   ├── import_questions.py
│   │   ├── interrogation_ai.py
│   │   ├── report_generator.py
│   │   └── utils.py
│   ├── uploads
│   │   ├── 10000000000000_20250416201304_testpic1.jpg
│   │   ├── 10000000000000_20250416204749_testpic1.jpg
│   │   ├── 10000000000000_20250416210311_testpic1.jpg
│   │   ├── 10000000000000_20250416213454_testpic1.jpg
│   │   ├── 1111111111111111111111_20250424130717_neu_logo2.png
│   │   ├── 1111111111111111111111_20250424130719_neu_logo2.png
│   │   ├── 1111111111111111111111_20250424130724_neu_logo2.png
│   │   ├── 1111111111111111111111_20250424130725_neu_logo2.png
│   │   ├── 1111111111111111111111_20250424130733_neu_logo2.png
│   │   ├── 1111111111111111111111_20250424132106_testpic1.jpg
│   │   ├── 1111111111111111111111_20250424153455_neu_logo2.png
│   │   ├── 111111111111111111120_20250425001629_testpic1.jpg
│   │   ├── 111111111111111111121_20250425002213_testpic1.jpg
│   │   ├── 111111111111111111_20250426163131_testpic1.jpg
│   │   ├── 111111111111111112_20250426163306_testpic1.jpg
│   │   ├── 111111111111111114_20250426002453_testpic1.jpg
│   │   ├── 111111111111111115_20250426163917_testpic1.jpg
│   │   ├── 111111111111111118_20250426164308_testpic1.jpg
│   │   ├── 111111111111111119_20250426164652_testpic1.jpg
│   │   ├── 111111111111111120_20250426165549_testpic1.jpg
│   │   ├── 1223123123123123_20250417140740_bc3ca98535f261d084345205d7ed53b.jpg
│   │   ├── 211401200000000000_20250416173352_testpic1.jpg
│   │   ├── 211401200000000001_20250416173600_testpic1.jpg
│   │   ├── 211401200000000001_20250416174140_testpic1.jpg
│   │   ├── 211401200000000001_20250416174244_testpic1.jpg
│   │   ├── 211401200000000001_20250416174317_testpic1.jpg
│   │   ├── 211401200000000001_20250416174651_testpic1.jpg
│   │   ├── 211401200000000001_20250416175232_testpic1.jpg
│   │   ├── 211401200000000001_20250416180044_testpic1.jpg
│   │   ├── 211401200000000008_20250416200605_testpic1.jpg
│   │   ├── 211401200000000008_20250416222213_testpic1.jpg
│   │   ├── 211401200001010001_20250425201116_testpic1.jpg
│   │   ├── 211401200001010002_20250425202345_testpic1.jpg
│   │   ├── 211401200001010003_20250425205400_testpic1.jpg
│   │   ├── 211401200001010004_20250425222951_testpic1.jpg
│   │   ├── 211401200001010005_20250425224806_testpic1.jpg
│   │   ├── 211401200001010006_20250425225357_testpic1.jpg
│   │   ├── 211401200001010007_20250425231129_testpic1.jpg
│   │   ├── 211401200001010008_20250425232215_testpic1.jpg
│   │   ├── 211401200001010009_20250425233352_testpic1.jpg
│   │   ├── 211401200001010010_20250426223700_testpic1.jpg
│   │   ├── 211401200001010055_20250426224255_testpic1.jpg
│   │   ├── 211402200000000058_20250606162553_testpic1.jpg
│   │   ├── 211402200000009998_20250606163617_testpic1.jpg
│   │   ├── 211402200000009999_20250606162833_testpic1.jpg
│   │   ├── 211402200801011000_20250606204519_mmexport1749213745438.jpg
│   │   ├── _20250426002802_testpic1.jpg
│   │   ├── _20250426003334_testpic1.jpg
│   │   ├── _20250426004050_testpic1.jpg
│   │   ├── _20250426004708_testpic1.jpg
│   │   ├── _20250426145725_testpic1.jpg
│   │   ├── _20250426151101_testpic1.jpg
│   │   ├── _20250426151421_testpic1.jpg
│   │   ├── _20250426151844_testpic1.jpg
│   │   ├── _20250426152017_testpic1.jpg
│   │   ├── _20250426153346_testpic1.jpg
│   │   ├── _20250426153449_testpic1.jpg
│   │   ├── _20250426154346_testpic1.jpg
│   │   ├── _20250426155032_testpic1.jpg
│   │   ├── _20250426155702_testpic1.jpg
│   │   ├── _20250426160837_testpic1.jpg
│   │   ├── _20250426162610_testpic1.jpg
│   │   ├── _20250426173648_APP_.png
│   │   ├── string_20250417112455_bc3ca98535f261d084345205d7ed53b.jpg
│   │   ├── string_20250417142126_bc3ca98535f261d084345205d7ed53b.jpg
│   │   └── string_20250417142942_bc3ca98535f261d084345205d7ed53b.jpg
│   ├── 文档部分
│   │   ├── finding_work.xlsx
│   │   ├── 倾听者 心理学项目需求分析 (2).md
│   │   ├── 倾听者 心理学项目需求分析.md
│   │   ├── 倾听者 心理学项目需求分析.pdf
│   │   ├── 倾听者_任务需求分析与技术选型.pdf
│   │   ├── 倾听者项目详细流程表_V2.1.xlsx
│   │   └── 绘画分析AI智能解析(4)(1).xlsx
│   ├── .env
│   ├── .gitignore
│   ├── alembic.ini
│   ├── code2txt.py
│   ├── Combiner.py
│   ├── create_initial_user.py
│   ├── create_structure.bat
│   ├── find _token.py
│   ├── main.py
│   ├── project_documentation.txt
│   ├── project_text.txt
│   ├── psychology_analysis.db
│   ├── README.md
│   ├── requirements.txt
│   └── run_celery_worker.py
├── PsychologyAndroid
│   ├── my-release-key.jks
│   └── README.txt
├── qingtingzhe_prototype_backend
│   ├── data
│   │   ├── guidance_plan.txt
│   │   ├── interrogation_template.json
│   │   └── interrogation_template.txt
│   ├── static
│   │   ├── css
│   │   │   └── style.css
│   │   └── js
│   │       └── charts.js
│   ├── templates
│   │   ├── base.html
│   │   ├── dashboard.html
│   │   ├── data_analysis.html
│   │   ├── interrogation_edit.html
│   │   ├── interrogation_input.html
│   │   ├── interrogation_output.html
│   │   ├── login.html
│   │   ├── report_guidance_viewer.html
│   │   └── user_management.html
│   ├── app.py
│   ├── Combiner.py
│   ├── requirements.txt
│   └── 后台展示原型.txt
├── code2txt.py
├── collected_project_code_with_tree.txt
├── dump0608.txt
├── project_text1.txt
├── temp.txt
└── .gitignore

================================================================================

--- File: code2txt.py ---
# -*- coding: utf-8 -*-
import os
import datetime

# --- 配置区域 ---
# 请根据您的需求修改以下配置

# 1. 目标文件扩展名列表 (请明确写出希望包含的扩展名，例如：['.py', '.vue', '.js', '.html', '.css', '.md'])
TARGET_EXTENSIONS = ['.py', '.vue', '.html', '.css','.js']

# 2. 输出文件名
OUTPUT_FILENAME = "collected_project_code_with_tree.txt"

# 3. 是否递归扫描子目录 (True 表示递归, False 表示仅当前目录)
RECURSIVE_SCAN = True

# 4. 要排除的目录名称列表 (这些目录及其内容将被完全忽略)
# 常见排除项：'.git', 'node_modules', '__pycache__', '.vscode', '.idea', 'dist', 'build'
EXCLUDE_DIRS = ['.git', 'node_modules', '__pycache__', '.venv', 'venv', 'env', '.DS_Store']

# 5. 要排除的特定文件名列表 (这些文件将被忽略，即使扩展名匹配)
# 脚本自身和输出文件会自动加入排除列表
EXCLUDE_FILES = []

# 6. 是否在输出文件中包含目录树
INCLUDE_DIRECTORY_TREE = True

# 7. 目录树显示的最大深度 (设置为 None 则不限制深度)
# 对于非常大的项目，建议设置一个合理的深度，例如 3 或 5
MAX_TREE_DEPTH = 5

# 8. 目录树中是否显示文件大小 (True/False)
SHOW_FILE_SIZE_IN_TREE = True

# --- 脚本核心逻辑 ---

def get_file_size_str(size_bytes):
    """将文件大小（字节）转换为可读的字符串格式"""
    if size_bytes < 1024:
        return f"{size_bytes} B"
    elif size_bytes < 1024**2:
        return f"{size_bytes/1024:.1f} KB"
    elif size_bytes < 1024**3:
        return f"{size_bytes/1024**2:.1f} MB"
    else:
        return f"{size_bytes/1024**3:.1f} GB"

def generate_directory_tree(start_path, prefix="", level=0, current_max_depth=MAX_TREE_DEPTH, exclude_dirs=None, exclude_files=None, target_extensions=None):
    """
    生成目录结构树。
    """
    if exclude_dirs is None:
        exclude_dirs = []
    if exclude_files is None:
        exclude_files = []
    if target_extensions is None:
        target_extensions = []

    tree_output = []
    # 获取规范化的绝对路径
    abs_start_path = os.path.abspath(start_path)
    
    # 获取当前目录下的条目，并排序（文件夹在前，文件在后，然后按名称排序）
    try:
        entries = sorted(os.listdir(abs_start_path), key=lambda x: (os.path.isfile(os.path.join(abs_start_path, x)), x.lower()))
    except OSError as e:
        tree_output.append(f"{prefix}错误：无法访问目录 {abs_start_path}: {e}\n")
        return "".join(tree_output)

    pointers = ['├── '] * (len(entries) -1) + ['└── '] if entries else []

    for i, entry_name in enumerate(entries):
        entry_path = os.path.join(abs_start_path, entry_name)
        
        # 检查是否应排除此条目
        if entry_name in exclude_dirs or entry_name in exclude_files:
            continue
        # 如果是脚本文件自身或输出文件，也跳过
        if os.path.abspath(entry_path) == os.path.abspath(__file__) or entry_name == OUTPUT_FILENAME:
            continue

        size_info = ""
        if os.path.isfile(entry_path) and SHOW_FILE_SIZE_IN_TREE:
            try:
                size_bytes = os.path.getsize(entry_path)
                size_info = f" ({get_file_size_str(size_bytes)})"
            except OSError:
                size_info = " (大小未知)"


        if os.path.isdir(entry_path):
            # 如果是目录，则添加到树中并递归（如果未达到最大深度）
            tree_output.append(f"{prefix}{pointers[i]}{entry_name}/\n")
            if current_max_depth is None or level < current_max_depth -1:
                extension = '│   ' if pointers[i] == '├── ' else '    '
                tree_output.append(generate_directory_tree(entry_path, prefix + extension, level + 1, current_max_depth, exclude_dirs, exclude_files, target_extensions))
        else:
            # 如果是文件，检查其扩展名是否在目标列表中
            _, file_ext = os.path.splitext(entry_name)
            is_target_file = file_ext.lower() in [ext.lower() for ext in target_extensions]
            
            # 仅当文件是目标文件时，才在目录树中突出显示或特殊标记（可选）
            # 这里我们简单地列出所有非排除文件
            if is_target_file:
                tree_output.append(f"{prefix}{pointers[i]}{entry_name}{size_info}  <-- [目标文件]\n")
            else:
                tree_output.append(f"{prefix}{pointers[i]}{entry_name}{size_info}\n")
                
    return "".join(tree_output)


def collect_code_and_generate_report():
    """
    主函数：收集代码文件内容并生成报告。
    """
    script_name = os.path.basename(__file__)
    # 自动将脚本自身和输出文件加入排除列表
    effective_exclude_files = EXCLUDE_FILES + [script_name, OUTPUT_FILENAME]

    current_directory = os.getcwd()
    print(f"信息：脚本 '{script_name}' 开始执行。")
    print(f"信息：扫描目录: '{current_directory}'")
    print(f"信息：目标文件扩展名: {', '.join(TARGET_EXTENSIONS)}")
    print(f"信息：输出文件: '{OUTPUT_FILENAME}'")
    print(f"信息：递归扫描: {'是' if RECURSIVE_SCAN else '否'}")
    print(f"信息：排除目录: {', '.join(EXCLUDE_DIRS) if EXCLUDE_DIRS else '无'}")
    print(f"信息：排除文件: {', '.join(effective_exclude_files) if effective_exclude_files else '无'}")
    print(f"信息：包含目录树: {'是' if INCLUDE_DIRECTORY_TREE else '否'}")
    if INCLUDE_DIRECTORY_TREE:
        print(f"信息：目录树最大深度: {MAX_TREE_DEPTH if MAX_TREE_DEPTH is not None else '无限制'}")

    collected_files_paths = []

    if RECURSIVE_SCAN:
        for root, dirs, files in os.walk(current_directory, topdown=True):
            # 排除指定的目录
            dirs[:] = [d for d in dirs if d not in EXCLUDE_DIRS]
            
            for filename in files:
                # 排除指定的文件
                if filename in effective_exclude_files:
                    continue
                
                _, file_extension = os.path.splitext(filename)
                if file_extension.lower() in [ext.lower() for ext in TARGET_EXTENSIONS]:
                    file_path = os.path.join(root, filename)
                    collected_files_paths.append(file_path)
                    print(f"信息：发现目标文件 (递归): {os.path.relpath(file_path, current_directory)}")
    else:
        for item in os.listdir(current_directory):
            item_full_path = os.path.join(current_directory, item)
            if os.path.isfile(item_full_path):
                if item in effective_exclude_files:
                    continue
                _, file_extension = os.path.splitext(item)
                if file_extension.lower() in [ext.lower() for ext in TARGET_EXTENSIONS]:
                    collected_files_paths.append(item_full_path)
                    print(f"信息：发现目标文件 (当前目录): {item}")

    if not collected_files_paths:
        print(f"警告：在指定范围内未找到任何目标文件。输出文件 '{OUTPUT_FILENAME}' 将只包含头部信息。")
    else:
        print(f"\n信息：共找到 {len(collected_files_paths)} 个目标文件。开始写入到 '{OUTPUT_FILENAME}'...")

    # 按路径排序，确保输出顺序一致
    collected_files_paths.sort()

    try:
        with open(OUTPUT_FILENAME, 'w', encoding='utf-8') as outfile:
            # 写入报告头部信息
            outfile.write("=" * 80 + "\n")
            outfile.write(f"代码汇总报告\n")
            outfile.write(f"生成时间: {datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n")
            outfile.write(f"扫描根目录: {current_directory}\n")
            outfile.write(f"目标文件类型: {', '.join(TARGET_EXTENSIONS)}\n")
            outfile.write(f"递归扫描: {'是' if RECURSIVE_SCAN else '否'}\n")
            outfile.write(f"排除目录: {', '.join(EXCLUDE_DIRS) if EXCLUDE_DIRS else '无'}\n")
            outfile.write(f"排除文件 (含自动): {', '.join(effective_exclude_files) if effective_exclude_files else '无'}\n")
            outfile.write("=" * 80 + "\n\n")

            # 写入目录树 (如果启用)
            if INCLUDE_DIRECTORY_TREE:
                outfile.write("项目目录结构树 (仅显示相关文件和目录):\n")
                outfile.write("-" * 40 + "\n")
                # 注意：这里的 generate_directory_tree 的 exclude_dirs 和 exclude_files 应该与主逻辑一致
                # 为了简化，我们直接使用全局配置的 EXCLUDE_DIRS 和 effective_exclude_files
                # 传递 target_extensions 以便在树中标记目标文件
                tree_str = generate_directory_tree(
                    current_directory, 
                    exclude_dirs=EXCLUDE_DIRS, 
                    exclude_files=effective_exclude_files, 
                    target_extensions=TARGET_EXTENSIONS,
                    current_max_depth=MAX_TREE_DEPTH
                )
                outfile.write(tree_str)
                outfile.write("-" * 40 + "\n\n")
            
            outfile.write("=" * 80 + "\n")
            outfile.write("汇总文件内容\n")
            outfile.write("=" * 80 + "\n\n")

            for file_path in collected_files_paths:
                relative_file_path = os.path.relpath(file_path, current_directory)
                outfile.write(f"--- 文件开始: {relative_file_path} ---\n\n")
                try:
                    with open(file_path, 'r', encoding='utf-8') as infile:
                        content = infile.read()
                        outfile.write(content)
                    # 确保文件末尾有换行，且与下一个文件标记之间有足够间隔
                    if not content.endswith('\n'):
                        outfile.write("\n")
                    outfile.write(f"\n\n--- 文件结束: {relative_file_path} ---\n")
                    outfile.write("=" * 60 + "\n\n") # 更明显的分隔符
                    print(f"信息：已成功处理并添加文件: {relative_file_path}")
                except UnicodeDecodeError:
                    error_msg = f"错误：无法以UTF-8编码读取文件 {relative_file_path}。文件可能使用了其他编码或为二进制文件。\n"
                    outfile.write(error_msg)
                    outfile.write(f"--- 文件结束 (读取错误): {relative_file_path} ---\n")
                    outfile.write("=" * 60 + "\n\n")
                    print(f"错误：读取文件 {relative_file_path} 时发生编码错误。已跳过其内容。")
                except Exception as e:
                    error_msg = f"错误：读取文件 {relative_file_path} 时发生未知错误: {e}\n"
                    outfile.write(error_msg)
                    outfile.write(f"--- 文件结束 (读取错误): {relative_file_path} ---\n")
                    outfile.write("=" * 60 + "\n\n")
                    print(f"错误：处理文件 {relative_file_path} 时发生错误: {e}")
            
            outfile.write("=" * 80 + "\n")
            outfile.write("代码汇总结束。\n")
            outfile.write("=" * 80 + "\n")

        print(f"\n成功：所有目标文件内容已汇总到 '{OUTPUT_FILENAME}'")

    except IOError as e:
        print(f"严重错误：无法写入输出文件 '{OUTPUT_FILENAME}'。请检查权限或磁盘空间。错误详情: {e}")
    except Exception as e:
        print(f"严重错误：在写入汇总文件过程中发生未知错误: {e}")

if __name__ == "__main__":
    # 运行主函数
    collect_code_and_generate_report()
    
    # 提示用户按键退出，以便在从命令行独立运行时查看输出
    # 在某些IDE中运行可能不需要这个
    try:
        input("\n脚本执行完毕。按 Enter 键退出...")
    except EOFError: # 如果在没有tty的环境下运行（如某些CI/CD），input会失败
        pass

================================================================================

--- File: psychology-admin-frontend\README.md ---


================================================================================

--- File: psychology-admin-frontend\index.html ---
<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>倾听者 - 管理后台</title>
    <!-- 引入 Font Awesome 图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>
  <body>
    <div id="app"></div>
    <!-- 确保 src 指向 /src/main.js -->
    <script type="module" src="/src/main.js"></script>
  </body>
</html>

================================================================================

--- File: psychology-admin-frontend\package-lock.json ---
{
  "name": "psychology-admin-frontend",
  "version": "0.1.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "psychology-admin-frontend",
      "version": "0.1.0",
      "dependencies": {
        "axios": "^1.7.2",
        "chart.js": "^4.4.9",
        "marked": "^15.0.12",
        "vue": "^3.4.21",
        "vue-chartjs": "^5.3.2",
        "vue-router": "^4.3.0",
        "vuex": "^4.1.0"
      },
      "devDependencies": {
        "@vitejs/plugin-vue": "^5.0.4",
        "vite": "^5.2.8"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.27.1.tgz",
      "integrity": "sha512-D2hP9eA+Sqx1kBZgzxZh0y1trbuU+JoDkiEwqhQ36nodYqJwyEIhPSdMNd7lOm/4io72luTPWH20Yda0xOuUow==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.27.5",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.27.5.tgz",
      "integrity": "sha512-OsQd175SxWkGlzbny8J3K8TnnDD0N3lrIUtB92xwyRpzaenGZhxDvxN/JgU00U3CDZNj9tPuDJ5H0WS4Nt3vKg==",
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.27.3"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.27.6",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.27.6.tgz",
      "integrity": "sha512-ETyHEk2VHHvl9b9jZP5IHPavHYk57EhanlRRuae9XCpb/j5bDCbPPMOBfCWhnl/7EDJz0jEMCi/RhccCE8r1+Q==",
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@esbuild/aix-ppc64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.21.5.tgz",
      "integrity": "sha512-1SDgH6ZSPTlggy1yI6+Dbkiz8xzpHJEVAlF/AM1tHPLsf5STom9rwtjE4hKAF20FfXXNTFqEYXyJNWh1GiZedQ==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "aix"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.21.5.tgz",
      "integrity": "sha512-vCPvzSjpPHEi1siZdlvAlsPxXl7WbOVUBBAowWug4rJHb68Ox8KualB+1ocNvT5fjv6wpkX6o/iEpbDrf68zcg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.21.5.tgz",
      "integrity": "sha512-c0uX9VAUBQ7dTDCjq+wdyGLowMdtR/GoC2U5IYk/7D1H1JYC0qseD7+11iMP2mRLN9RcCMRcjC4YMclCzGwS/A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.21.5.tgz",
      "integrity": "sha512-D7aPRUUNHRBwHxzxRvp856rjUHRFW1SdQATKXH2hqA0kAZb1hKmi02OpYRacl0TxIGz/ZmXWlbZgjwWYaCakTA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.21.5.tgz",
      "integrity": "sha512-DwqXqZyuk5AiWWf3UfLiRDJ5EDd49zg6O9wclZ7kUMv2WRFr4HKjXp/5t8JZ11QbQfUS6/cRCKGwYhtNAY88kQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.21.5.tgz",
      "integrity": "sha512-se/JjF8NlmKVG4kNIuyWMV/22ZaerB+qaSi5MdrXtd6R08kvs2qCN4C09miupktDitvh8jRFflwGFBQcxZRjbw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.21.5.tgz",
      "integrity": "sha512-5JcRxxRDUJLX8JXp/wcBCy3pENnCgBR9bN6JsY4OmhfUtIHe3ZW0mawA7+RDAcMLrMIZaf03NlQiX9DGyB8h4g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.21.5.tgz",
      "integrity": "sha512-J95kNBj1zkbMXtHVH29bBriQygMXqoVQOQYA+ISs0/2l3T9/kj42ow2mpqerRBxDJnmkUDCaQT/dfNXWX/ZZCQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.21.5.tgz",
      "integrity": "sha512-bPb5AHZtbeNGjCKVZ9UGqGwo8EUu4cLq68E95A53KlxAPRmUyYv2D6F0uUI65XisGOL1hBP5mTronbgo+0bFcA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.21.5.tgz",
      "integrity": "sha512-ibKvmyYzKsBeX8d8I7MH/TMfWDXBF3db4qM6sy+7re0YXya+K1cem3on9XgdT2EQGMu4hQyZhan7TeQ8XkGp4Q==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.21.5.tgz",
      "integrity": "sha512-YvjXDqLRqPDl2dvRODYmmhz4rPeVKYvppfGYKSNGdyZkA01046pLWyRKKI3ax8fbJoK5QbxblURkwK/MWY18Tg==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.21.5.tgz",
      "integrity": "sha512-uHf1BmMG8qEvzdrzAqg2SIG/02+4/DHB6a9Kbya0XDvwDEKCoC8ZRWI5JJvNdUjtciBGFQ5PuBlpEOXQj+JQSg==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.21.5.tgz",
      "integrity": "sha512-IajOmO+KJK23bj52dFSNCMsz1QP1DqM6cwLUv3W1QwyxkyIWecfafnI555fvSGqEKwjMXVLokcV5ygHW5b3Jbg==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.21.5.tgz",
      "integrity": "sha512-1hHV/Z4OEfMwpLO8rp7CvlhBDnjsC3CttJXIhBi+5Aj5r+MBvy4egg7wCbe//hSsT+RvDAG7s81tAvpL2XAE4w==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.21.5.tgz",
      "integrity": "sha512-2HdXDMd9GMgTGrPWnJzP2ALSokE/0O5HhTUvWIbD3YdjME8JwvSCnNGBnTThKGEB91OZhzrJ4qIIxk/SBmyDDA==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.21.5.tgz",
      "integrity": "sha512-zus5sxzqBJD3eXxwvjN1yQkRepANgxE9lgOW2qLnmr8ikMTphkjgXu1HR01K4FJg8h1kEEDAqDcZQtbrRnB41A==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.21.5.tgz",
      "integrity": "sha512-1rYdTpyv03iycF1+BhzrzQJCdOuAOtaqHTWJZCWvijKD2N5Xu0TtVC8/+1faWqcP9iBCWOmjmhoH94dH82BxPQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.21.5.tgz",
      "integrity": "sha512-Woi2MXzXjMULccIwMnLciyZH4nCIMpWQAs049KEeMvOcNADVxo0UBIQPfSmxB3CWKedngg7sWZdLvLczpe0tLg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.21.5.tgz",
      "integrity": "sha512-HLNNw99xsvx12lFBUwoT8EVCsSvRNDVxNpjZ7bPn947b8gJPzeHWyNVhFsaerc0n3TsbOINvRP2byTZ5LKezow==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.21.5.tgz",
      "integrity": "sha512-6+gjmFpfy0BHU5Tpptkuh8+uw3mnrvgs+dSPQXQOv3ekbordwnzTVEb4qnIvQcYXq6gzkyTnoZ9dZG+D4garKg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.21.5.tgz",
      "integrity": "sha512-Z0gOTd75VvXqyq7nsl93zwahcTROgqvuAcYDUr+vOv8uHhNSKROyU961kgtCD1e95IqPKSQKH7tBTslnS3tA8A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.21.5.tgz",
      "integrity": "sha512-SWXFF1CL2RVNMaVs+BBClwtfZSvDgtL//G/smwAc5oVK/UPu2Gu9tIaRgFmYFFKrmg3SyAjSrElf0TiJ1v8fYA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.21.5.tgz",
      "integrity": "sha512-tQd/1efJuzPC6rCFwEvLtci/xNFcTZknmXs98FYDfGE4wP9ClFV98nyKrzJKVPMhdDnjzLhdUyMX4PsQAPjwIw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.0.tgz",
      "integrity": "sha512-gv3ZRaISU3fjPAgNsriBRqGWQL6quFx04YMPW/zD8XMLsU32mhCCbfbO6KZFLjvYpCZ8zyDEgqsgf+PwPaM7GQ==",
      "license": "MIT"
    },
    "node_modules/@kurkle/color": {
      "version": "0.3.4",
      "resolved": "https://registry.npmjs.org/@kurkle/color/-/color-0.3.4.tgz",
      "integrity": "sha512-M5UknZPHRu3DEDWoipU6sE8PdkZ6Z/S+v4dD+Ke8IaNlpdSQah50lz1KtcFBa2vsdOnwbbnxJwVM4wty6udA5w==",
      "license": "MIT"
    },
    "node_modules/@rollup/rollup-android-arm-eabi": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.41.2.tgz",
      "integrity": "sha512-YvIQXGGDzbOpkLuFcjGs+aiAi38D8FCyJanIdlcV2m9DWMJpHTSY8L9piO93VHBLRoe8O9C/FiycjnJ8+aP1tg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-android-arm64": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.41.2.tgz",
      "integrity": "sha512-8AVWhLnN9FteevGP+9pj/Y79vqE9TdziZTe5XkN5Z9+9QY7TEBbr4iz2te8/vXbLSLEdmaQx+o2GWXrLXDKGPg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-darwin-arm64": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.41.2.tgz",
      "integrity": "sha512-w/idsvFiipvVGDcXKu1pdiIEnh9V63NPjpo5E48BbbrhUzEQthVXylKjYKj9lgX+89Ao36BxArkKPxxs7aXn3g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-darwin-x64": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.41.2.tgz",
      "integrity": "sha512-oNUD4Kywoild1lsuUu1jydg3+IdQbyg4JNZb1+3Voh/revkYxMqMl4a/sZw5z+BSgFbXK6rR0RGutnHO8QS53g==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-arm64": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.41.2.tgz",
      "integrity": "sha512-yKXgW9UF2f78/PaSAFgDJbrLB/aETxH98jJFIpqESLyhyRmEqZl1dqAoy0IigJJZdwP+ZJdLw2isKiwb1wAqcA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-x64": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.41.2.tgz",
      "integrity": "sha512-ye4rQ80/fAIcUyIil7S/IzGpHvlPUoZvUQSq0OmU+LXb/I9E5Brh7PKJ/K0plsLCQx9Hx01526Uf4Iy8RqmLJw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.41.2.tgz",
      "integrity": "sha512-q2aqiDKNKNj9jG/6JIHakx1hmj6A8bxc3U6rpZjL8znx3O4OGpPJcyEiJSxmFd8olpjfRezh7PONU+3RTQmj0A==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.41.2.tgz",
      "integrity": "sha512-qDtvGRNcj2SCY+XFV24s6/vOV46fktFa3/AtedKLVJZdO/WGyOtDDq2zF7nNGhzJa0Tx7bvJ92z9PjjF7nKbBg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-gnu": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.41.2.tgz",
      "integrity": "sha512-Cg1ywrBHMMCj4Il0QdcVamt5UK9HQ1ntNUXzhAw4yZ2rTJGFkjnkYyEPEpunb1L9orm+g0kvtZUydShTtLUNkA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-musl": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.41.2.tgz",
      "integrity": "sha512-FxPrm21SE2/p+L/Qy2P6zPPWtbKRunZ71ChHXuZu6b//zOeDYCF7kbXiGdE7ZJgUvboLx8lQtov4jsz04zdmiw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loongarch64-gnu": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loongarch64-gnu/-/rollup-linux-loongarch64-gnu-4.41.2.tgz",
      "integrity": "sha512-Bp2BYb+QWgefn2e8DblGUzejLEyhtG0DnIcSMzAzFtBK33ITvzLM9B8maTHPoy7Cx7XdxEb7l0iNKQAXBZ1NOw==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-powerpc64le-gnu": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-powerpc64le-gnu/-/rollup-linux-powerpc64le-gnu-4.41.2.tgz",
      "integrity": "sha512-1DmJwH0PPRPjVwUGHINP1YiH7fO25mhpf2B5N8ubBQdOjEVTRI0x69m8eJGoUSLISoW0kgPX2zTAiHc4zllQ/g==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.41.2.tgz",
      "integrity": "sha512-/9TBJIyoervs137gteTbzOSsIc/Io6xnXvjXYTEEqDRi3a9OokdBwfllN8AmPFGcU+WzoAiTc6n9SJiPohJ3CQ==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-musl": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.41.2.tgz",
      "integrity": "sha512-qqwpXqu6mV6Vm+EsU2NQk/xLiQfCv+NYmYNCYF8FFIf7kzlHvDoqiNaqqOw0hAr8O5nRBQO+H6X4qEw4Y/0b8w==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-s390x-gnu": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.41.2.tgz",
      "integrity": "sha512-j5oHqcj58pDqN3+CeJdTB3NfHipxIxVIH24VkRlVVhs9jJXks1ovtO4Tf6YxlBzf44ZTx9D2uhO9DZttC/wgUA==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-gnu": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.41.2.tgz",
      "integrity": "sha512-F3fxs7ajUNny4z1TsprdWB9gg8QRwSNSSILVfTmG8rXdeUFWuHEf3Uf5ltrdii8CkzZS3kD/VFPdNVdH3BOpIA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-musl": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.41.2.tgz",
      "integrity": "sha512-2S74RTJ1lJeiX+HSCxlLD/6Z6ndu9/+Huf8kYrI2XTCztFosOWsjPt+aD4cxBG1JTWjoiRYtutc8HABruppFQQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-win32-arm64-msvc": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.41.2.tgz",
      "integrity": "sha512-LOXSg8GprvL36erslsrNEUirlxy28JcuyTH5PYSBj8wwa0gDQlR8sZricFRbZGCzLhFixvmW2ozj7Mi+j023sg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-ia32-msvc": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.41.2.tgz",
      "integrity": "sha512-PFhMLaWu0lFziS+buQIJ+YGaifkABS2TGtmeuPRrPO8JKcG17sDSNj358otAP45gIzRWd4o9QM8R+DurDWJgTA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-msvc": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.41.2.tgz",
      "integrity": "sha512-AQ5GvrrLYw6dfkfT/bgYg1NU54exCKDrO9JKOE87zy2mdf2CyI6Vayy41r8Vo+kNDpqacaVQppwvYl30YGJu/Q==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@types/estree": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.7.tgz",
      "integrity": "sha512-w28IoSUCJpidD/TGviZwwMJckNESJZXFu7NBZ5YJ4mEUnNraUn9Pm8HSZm/jDF1pDWYKspWE7oVphigUPRakIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@vitejs/plugin-vue": {
      "version": "5.2.4",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-vue/-/plugin-vue-5.2.4.tgz",
      "integrity": "sha512-7Yx/SXSOcQq5HiiV3orevHUFn+pmMB4cgbEkDYgnkUWb0WfeQ/wa2yFv6D5ICiCQOVpjA7vYDXrC7AGO8yjDHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.0.0 || >=20.0.0"
      },
      "peerDependencies": {
        "vite": "^5.0.0 || ^6.0.0",
        "vue": "^3.2.25"
      }
    },
    "node_modules/@vue/compiler-core": {
      "version": "3.5.16",
      "resolved": "https://registry.npmjs.org/@vue/compiler-core/-/compiler-core-3.5.16.tgz",
      "integrity": "sha512-AOQS2eaQOaaZQoL1u+2rCJIKDruNXVBZSiUD3chnUrsoX5ZTQMaCvXlWNIfxBJuU15r1o7+mpo5223KVtIhAgQ==",
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.27.2",
        "@vue/shared": "3.5.16",
        "entities": "^4.5.0",
        "estree-walker": "^2.0.2",
        "source-map-js": "^1.2.1"
      }
    },
    "node_modules/@vue/compiler-dom": {
      "version": "3.5.16",
      "resolved": "https://registry.npmjs.org/@vue/compiler-dom/-/compiler-dom-3.5.16.tgz",
      "integrity": "sha512-SSJIhBr/teipXiXjmWOVWLnxjNGo65Oj/8wTEQz0nqwQeP75jWZ0n4sF24Zxoht1cuJoWopwj0J0exYwCJ0dCQ==",
      "license": "MIT",
      "dependencies": {
        "@vue/compiler-core": "3.5.16",
        "@vue/shared": "3.5.16"
      }
    },
    "node_modules/@vue/compiler-sfc": {
      "version": "3.5.16",
      "resolved": "https://registry.npmjs.org/@vue/compiler-sfc/-/compiler-sfc-3.5.16.tgz",
      "integrity": "sha512-rQR6VSFNpiinDy/DVUE0vHoIDUF++6p910cgcZoaAUm3POxgNOOdS/xgoll3rNdKYTYPnnbARDCZOyZ+QSe6Pw==",
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.27.2",
        "@vue/compiler-core": "3.5.16",
        "@vue/compiler-dom": "3.5.16",
        "@vue/compiler-ssr": "3.5.16",
        "@vue/shared": "3.5.16",
        "estree-walker": "^2.0.2",
        "magic-string": "^0.30.17",
        "postcss": "^8.5.3",
        "source-map-js": "^1.2.1"
      }
    },
    "node_modules/@vue/compiler-ssr": {
      "version": "3.5.16",
      "resolved": "https://registry.npmjs.org/@vue/compiler-ssr/-/compiler-ssr-3.5.16.tgz",
      "integrity": "sha512-d2V7kfxbdsjrDSGlJE7my1ZzCXViEcqN6w14DOsDrUCHEA6vbnVCpRFfrc4ryCP/lCKzX2eS1YtnLE/BuC9f/A==",
      "license": "MIT",
      "dependencies": {
        "@vue/compiler-dom": "3.5.16",
        "@vue/shared": "3.5.16"
      }
    },
    "node_modules/@vue/devtools-api": {
      "version": "6.6.4",
      "resolved": "https://registry.npmjs.org/@vue/devtools-api/-/devtools-api-6.6.4.tgz",
      "integrity": "sha512-sGhTPMuXqZ1rVOk32RylztWkfXTRhuS7vgAKv0zjqk8gbsHkJ7xfFf+jbySxt7tWObEJwyKaHMikV/WGDiQm8g==",
      "license": "MIT"
    },
    "node_modules/@vue/reactivity": {
      "version": "3.5.16",
      "resolved": "https://registry.npmjs.org/@vue/reactivity/-/reactivity-3.5.16.tgz",
      "integrity": "sha512-FG5Q5ee/kxhIm1p2bykPpPwqiUBV3kFySsHEQha5BJvjXdZTUfmya7wP7zC39dFuZAcf/PD5S4Lni55vGLMhvA==",
      "license": "MIT",
      "dependencies": {
        "@vue/shared": "3.5.16"
      }
    },
    "node_modules/@vue/runtime-core": {
      "version": "3.5.16",
      "resolved": "https://registry.npmjs.org/@vue/runtime-core/-/runtime-core-3.5.16.tgz",
      "integrity": "sha512-bw5Ykq6+JFHYxrQa7Tjr+VSzw7Dj4ldR/udyBZbq73fCdJmyy5MPIFR9IX/M5Qs+TtTjuyUTCnmK3lWWwpAcFQ==",
      "license": "MIT",
      "dependencies": {
        "@vue/reactivity": "3.5.16",
        "@vue/shared": "3.5.16"
      }
    },
    "node_modules/@vue/runtime-dom": {
      "version": "3.5.16",
      "resolved": "https://registry.npmjs.org/@vue/runtime-dom/-/runtime-dom-3.5.16.tgz",
      "integrity": "sha512-T1qqYJsG2xMGhImRUV9y/RseB9d0eCYZQ4CWca9ztCuiPj/XWNNN+lkNBuzVbia5z4/cgxdL28NoQCvC0Xcfww==",
      "license": "MIT",
      "dependencies": {
        "@vue/reactivity": "3.5.16",
        "@vue/runtime-core": "3.5.16",
        "@vue/shared": "3.5.16",
        "csstype": "^3.1.3"
      }
    },
    "node_modules/@vue/server-renderer": {
      "version": "3.5.16",
      "resolved": "https://registry.npmjs.org/@vue/server-renderer/-/server-renderer-3.5.16.tgz",
      "integrity": "sha512-BrX0qLiv/WugguGsnQUJiYOE0Fe5mZTwi6b7X/ybGB0vfrPH9z0gD/Y6WOR1sGCgX4gc25L1RYS5eYQKDMoNIg==",
      "license": "MIT",
      "dependencies": {
        "@vue/compiler-ssr": "3.5.16",
        "@vue/shared": "3.5.16"
      },
      "peerDependencies": {
        "vue": "3.5.16"
      }
    },
    "node_modules/@vue/shared": {
      "version": "3.5.16",
      "resolved": "https://registry.npmjs.org/@vue/shared/-/shared-3.5.16.tgz",
      "integrity": "sha512-c/0fWy3Jw6Z8L9FmTyYfkpM5zklnqqa9+a6dz3DvONRKW2NEbh46BP0FHuLFSWi2TnQEtp91Z6zOWNrU6QiyPg==",
      "license": "MIT"
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT"
    },
    "node_modules/axios": {
      "version": "1.9.0",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.9.0.tgz",
      "integrity": "sha512-re4CqKTJaURpzbLHtIi6XpDv20/CnpXOtjRY5/CU32L8gU8ek9UIivcfvSWvmKEngmVbrUtPpdDwWDWL7DNHvg==",
      "license": "MIT",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.0",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/chart.js": {
      "version": "4.4.9",
      "resolved": "https://registry.npmjs.org/chart.js/-/chart.js-4.4.9.tgz",
      "integrity": "sha512-EyZ9wWKgpAU0fLJ43YAEIF8sr5F2W3LqbS40ZJyHIner2lY14ufqv2VMp69MAiZ2rpwxEUxEhIH/0U3xyRynxg==",
      "license": "MIT",
      "dependencies": {
        "@kurkle/color": "^0.3.0"
      },
      "engines": {
        "pnpm": ">=8"
      }
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/csstype": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.1.3.tgz",
      "integrity": "sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==",
      "license": "MIT"
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/entities": {
      "version": "4.5.0",
      "resolved": "https://registry.npmjs.org/entities/-/entities-4.5.0.tgz",
      "integrity": "sha512-V0hjH4dGPh9Ao5p0MoRY6BVqtwCjhz6vI5LT8AJ55H+4g9/4vbHx1I54fS0XuclLhDHArPQCiMjDxjaL8fPxhw==",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.12"
      },
      "funding": {
        "url": "https://github.com/fb55/entities?sponsor=1"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/esbuild": {
      "version": "0.21.5",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.21.5.tgz",
      "integrity": "sha512-mg3OPMV4hXywwpoDxu3Qda5xCKQi+vCTZq8S9J/EpkhB2HzKXq4SNFZE3+NK93JYxc8VMSep+lOUSC/RVKaBqw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=12"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.21.5",
        "@esbuild/android-arm": "0.21.5",
        "@esbuild/android-arm64": "0.21.5",
        "@esbuild/android-x64": "0.21.5",
        "@esbuild/darwin-arm64": "0.21.5",
        "@esbuild/darwin-x64": "0.21.5",
        "@esbuild/freebsd-arm64": "0.21.5",
        "@esbuild/freebsd-x64": "0.21.5",
        "@esbuild/linux-arm": "0.21.5",
        "@esbuild/linux-arm64": "0.21.5",
        "@esbuild/linux-ia32": "0.21.5",
        "@esbuild/linux-loong64": "0.21.5",
        "@esbuild/linux-mips64el": "0.21.5",
        "@esbuild/linux-ppc64": "0.21.5",
        "@esbuild/linux-riscv64": "0.21.5",
        "@esbuild/linux-s390x": "0.21.5",
        "@esbuild/linux-x64": "0.21.5",
        "@esbuild/netbsd-x64": "0.21.5",
        "@esbuild/openbsd-x64": "0.21.5",
        "@esbuild/sunos-x64": "0.21.5",
        "@esbuild/win32-arm64": "0.21.5",
        "@esbuild/win32-ia32": "0.21.5",
        "@esbuild/win32-x64": "0.21.5"
      }
    },
    "node_modules/estree-walker": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/estree-walker/-/estree-walker-2.0.2.tgz",
      "integrity": "sha512-Rfkk/Mp/DL7JVje3u18FxFujQlTNR2q6QfMSMB7AvCBx91NGj/ba3kCfza0f6dVDbw7YlRf/nDrn7pQrCCyQ/w==",
      "license": "MIT"
    },
    "node_modules/follow-redirects": {
      "version": "1.15.9",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.9.tgz",
      "integrity": "sha512-gew4GsXizNgdoRyqmyfMHyAmXsZDk6mHkSxZFCzW9gwlbtOW44CDtYavM+y+72qD/Vq2l550kMF52DT8fOLJqQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/form-data": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.3.tgz",
      "integrity": "sha512-qsITQPfmvMOSAdeyZ+12I1c+CKSstAFAwu+97zrnWAbIr5u8wfsExUzCesVLC8NgHuRUqNN4Zy6UPWUTRGslcA==",
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/magic-string": {
      "version": "0.30.17",
      "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.30.17.tgz",
      "integrity": "sha512-sNPKHvyjVf7gyjwS4xGTaW/mCnF8wnjtifKBEhxfZ7E/S8tQ0rssrwGNn6q8JH/ohItJfSQp9mBtQYuTlH5QnA==",
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0"
      }
    },
    "node_modules/marked": {
      "version": "15.0.12",
      "resolved": "https://registry.npmjs.org/marked/-/marked-15.0.12.tgz",
      "integrity": "sha512-8dD6FusOQSrpv9Z1rdNMdlSgQOIP880DHqnohobOmYLElGEqAL/JvxvuxZO16r4HtjTlfPRDC1hbvxC9dPN2nA==",
      "license": "MIT",
      "bin": {
        "marked": "bin/marked.js"
      },
      "engines": {
        "node": ">= 18"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "license": "ISC"
    },
    "node_modules/postcss": {
      "version": "8.5.4",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.4.tgz",
      "integrity": "sha512-QSa9EBe+uwlGTFmHsPKokv3B/oEMQZxfqW0QqNCyhpa6mB1afzulwn8hihglqAb2pOw+BJgNlmXQ8la2VeHB7w==",
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "license": "MIT"
    },
    "node_modules/rollup": {
      "version": "4.41.2",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.41.2.tgz",
      "integrity": "sha512-6VwIRjxJPRGfwtHnBWrApOrFposYNARbBUnBzWSBYutdukosTadkxSB1prmEd95jhiJ1uWtZOD3sDx7qfVwu4A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "1.0.7"
      },
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "@rollup/rollup-android-arm-eabi": "4.41.2",
        "@rollup/rollup-android-arm64": "4.41.2",
        "@rollup/rollup-darwin-arm64": "4.41.2",
        "@rollup/rollup-darwin-x64": "4.41.2",
        "@rollup/rollup-freebsd-arm64": "4.41.2",
        "@rollup/rollup-freebsd-x64": "4.41.2",
        "@rollup/rollup-linux-arm-gnueabihf": "4.41.2",
        "@rollup/rollup-linux-arm-musleabihf": "4.41.2",
        "@rollup/rollup-linux-arm64-gnu": "4.41.2",
        "@rollup/rollup-linux-arm64-musl": "4.41.2",
        "@rollup/rollup-linux-loongarch64-gnu": "4.41.2",
        "@rollup/rollup-linux-powerpc64le-gnu": "4.41.2",
        "@rollup/rollup-linux-riscv64-gnu": "4.41.2",
        "@rollup/rollup-linux-riscv64-musl": "4.41.2",
        "@rollup/rollup-linux-s390x-gnu": "4.41.2",
        "@rollup/rollup-linux-x64-gnu": "4.41.2",
        "@rollup/rollup-linux-x64-musl": "4.41.2",
        "@rollup/rollup-win32-arm64-msvc": "4.41.2",
        "@rollup/rollup-win32-ia32-msvc": "4.41.2",
        "@rollup/rollup-win32-x64-msvc": "4.41.2",
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/vite": {
      "version": "5.4.19",
      "resolved": "https://registry.npmjs.org/vite/-/vite-5.4.19.tgz",
      "integrity": "sha512-qO3aKv3HoQC8QKiNSTuUM1l9o/XX3+c+VTgLHbJWHZGeTPVAg2XwazI9UWzoxjIJCGCV2zU60uqMzjeLZuULqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "esbuild": "^0.21.3",
        "postcss": "^8.4.43",
        "rollup": "^4.20.0"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^18.0.0 || >=20.0.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^18.0.0 || >=20.0.0",
        "less": "*",
        "lightningcss": "^1.21.0",
        "sass": "*",
        "sass-embedded": "*",
        "stylus": "*",
        "sugarss": "*",
        "terser": "^5.4.0"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        }
      }
    },
    "node_modules/vue": {
      "version": "3.5.16",
      "resolved": "https://registry.npmjs.org/vue/-/vue-3.5.16.tgz",
      "integrity": "sha512-rjOV2ecxMd5SiAmof2xzh2WxntRcigkX/He4YFJ6WdRvVUrbt6DxC1Iujh10XLl8xCDRDtGKMeO3D+pRQ1PP9w==",
      "license": "MIT",
      "dependencies": {
        "@vue/compiler-dom": "3.5.16",
        "@vue/compiler-sfc": "3.5.16",
        "@vue/runtime-dom": "3.5.16",
        "@vue/server-renderer": "3.5.16",
        "@vue/shared": "3.5.16"
      },
      "peerDependencies": {
        "typescript": "*"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/vue-chartjs": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/vue-chartjs/-/vue-chartjs-5.3.2.tgz",
      "integrity": "sha512-NrkbRRoYshbXbWqJkTN6InoDVwVb90C0R7eAVgMWcB9dPikbruaOoTFjFYHE/+tNPdIe6qdLCDjfjPHQ0fw4jw==",
      "license": "MIT",
      "peerDependencies": {
        "chart.js": "^4.1.1",
        "vue": "^3.0.0-0 || ^2.7.0"
      }
    },
    "node_modules/vue-router": {
      "version": "4.5.1",
      "resolved": "https://registry.npmjs.org/vue-router/-/vue-router-4.5.1.tgz",
      "integrity": "sha512-ogAF3P97NPm8fJsE4by9dwSYtDwXIY1nFY9T6DyQnGHd1E2Da94w9JIolpe42LJGIl0DwOHBi8TcRPlPGwbTtw==",
      "license": "MIT",
      "dependencies": {
        "@vue/devtools-api": "^6.6.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/posva"
      },
      "peerDependencies": {
        "vue": "^3.2.0"
      }
    },
    "node_modules/vuex": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/vuex/-/vuex-4.1.0.tgz",
      "integrity": "sha512-hmV6UerDrPcgbSy9ORAtNXDr9M4wlNP4pEFKye4ujJF8oqgFFuxDCdOLS3eNoRTtq5O3hoBDh9Doj1bQMYHRbQ==",
      "license": "MIT",
      "dependencies": {
        "@vue/devtools-api": "^6.0.0-beta.11"
      },
      "peerDependencies": {
        "vue": "^3.2.0"
      }
    }
  }
}


================================================================================

--- File: psychology-admin-frontend\package.json ---
{
  "name": "psychology-admin-frontend",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "axios": "^1.7.2",
    "chart.js": "^4.4.9",
    "marked": "^15.0.12",
    "vue": "^3.4.21",
    "vue-chartjs": "^5.3.2",
    "vue-router": "^4.3.0",
    "vuex": "^4.1.0"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^5.0.4",
    "vite": "^5.2.8"
  }
}


================================================================================

--- File: psychology-admin-frontend\vite.config.js ---
// 文件路径: psychology-admin-frontend/vite.config.js (最终修复版)
import { defineConfig } from 'vite';
import vue from '@vitejs/plugin-vue';
import path from 'path';

export default defineConfig({
  // [+] 新增: base 配置项
  // 这个选项告诉 Vite，应用最终会被部署在服务器的 /admin/ 子目录下。
  // 所有静态资源的引用路径都会自动加上这个前缀。
  base: '/admin/', 

  plugins: [vue()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src')
    }
  },
  server: {
    host: '0.0.0.0', // 允许局域网访问
    port: 8081, // 后台前端的开发端口
    proxy: {
      // 将前端所有以 /api 开头的请求，代理到后端服务器
      // 例如，前端请求 /api/v1/users/me -> 后端 http://localhost:8000/api/v1/users/me
      '/api': {
        target: 'http://localhost:8000', // 您的 FastAPI 后端地址
        changeOrigin: true, // 必须设置为 true，用于支持虚拟主机
        // 不需要 rewrite，因为前端请求的路径和后端 API 路径的前半部分是匹配的
      }
    }
  }
});

================================================================================

--- File: psychology-admin-frontend\dist-admin\index.html ---
<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>倾听者 - 管理后台</title>
    <!-- 引入 Font Awesome 图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script type="module" crossorigin src="/assets/index-C__84Kn4.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-DBInCQLk.css">
  </head>
  <body>
    <div id="app"></div>
    <!-- 确保 src 指向 /src/main.js -->

  </body>
</html>

================================================================================

--- File: psychology-admin-frontend\dist-admin\assets\index-C__84Kn4.js ---
var fp=Object.defineProperty;var hp=(e,t,n)=>t in e?fp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var W=(e,t,n)=>hp(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ta(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const wt={},ls=[],Ke=()=>{},dp=()=>!1,Fr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ca=e=>e.startsWith("onUpdate:"),zt=Object.assign,Oa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},pp=Object.prototype.hasOwnProperty,gt=(e,t)=>pp.call(e,t),Q=Array.isArray,cs=e=>ki(e)==="[object Map]",ys=e=>ki(e)==="[object Set]",Tl=e=>ki(e)==="[object Date]",it=e=>typeof e=="function",Pt=e=>typeof e=="string",Ge=e=>typeof e=="symbol",St=e=>e!==null&&typeof e=="object",ef=e=>(St(e)||it(e))&&it(e.then)&&it(e.catch),nf=Object.prototype.toString,ki=e=>nf.call(e),gp=e=>ki(e).slice(8,-1),sf=e=>ki(e)==="[object Object]",Pa=e=>Pt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qs=Ta(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Br=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},mp=/-(\w)/g,Ae=Br(e=>e.replace(mp,(t,n)=>n?n.toUpperCase():"")),bp=/\B([A-Z])/g,Xn=Br(e=>e.replace(bp,"-$1").toLowerCase()),zr=Br(e=>e.charAt(0).toUpperCase()+e.slice(1)),_o=Br(e=>e?`on${zr(e)}`:""),Sn=(e,t)=>!Object.is(e,t),er=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},rf=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},fr=e=>{const t=parseFloat(e);return isNaN(t)?e:t},_p=e=>{const t=Pt(e)?Number(e):NaN;return isNaN(t)?e:t};let Cl;const Hr=()=>Cl||(Cl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jr(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=Pt(s)?wp(s):jr(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(Pt(e)||St(e))return e}const yp=/;(?![^(]*\))/g,xp=/:([^]+)/,vp=/\/\*[^]*?\*\//g;function wp(e){const t={};return e.replace(vp,"").split(yp).forEach(n=>{if(n){const s=n.split(xp);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ce(e){let t="";if(Pt(e))t=e;else if(Q(e))for(let n=0;n<e.length;n++){const s=Ce(e[n]);s&&(t+=s+" ")}else if(St(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Sp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",kp=Ta(Sp);function of(e){return!!e||e===""}function Rp(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=Ri(e[s],t[s]);return n}function Ri(e,t){if(e===t)return!0;let n=Tl(e),s=Tl(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Ge(e),s=Ge(t),n||s)return e===t;if(n=Q(e),s=Q(t),n||s)return n&&s?Rp(e,t):!1;if(n=St(e),s=St(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Ri(e[o],t[o]))return!1}}return String(e)===String(t)}function Ma(e,t){return e.findIndex(n=>Ri(n,t))}const af=e=>!!(e&&e.__v_isRef===!0),G=e=>Pt(e)?e:e==null?"":Q(e)||St(e)&&(e.toString===nf||!it(e.toString))?af(e)?G(e.value):JSON.stringify(e,lf,2):String(e),lf=(e,t)=>af(t)?lf(e,t.value):cs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[yo(s,r)+" =>"]=i,n),{})}:ys(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>yo(n))}:Ge(t)?yo(t):St(t)&&!Q(t)&&!sf(t)?String(t):t,yo=(e,t="")=>{var n;return Ge(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let le;class cf{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=le,!t&&le&&(this.index=(le.scopes||(le.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=le;try{return le=this,t()}finally{le=n}}}on(){++this._on===1&&(this.prevScope=le,le=this)}off(){this._on>0&&--this._on===0&&(le=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Ep(e){return new cf(e)}function Ap(){return le}let Et;const xo=new WeakSet;class uf{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,le&&le.active&&le.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xo.has(this)&&(xo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||hf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ol(this),df(this);const t=Et,n=Oe;Et=this,Oe=!0;try{return this.fn()}finally{pf(this),Et=t,Oe=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Da(t);this.deps=this.depsTail=void 0,Ol(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ko(this)&&this.run()}get dirty(){return Ko(this)}}let ff=0,Ks,Gs;function hf(e,t=!1){if(e.flags|=8,t){e.next=Gs,Gs=e;return}e.next=Ks,Ks=e}function Ia(){ff++}function La(){if(--ff>0)return;if(Gs){let t=Gs;for(Gs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ks;){let t=Ks;for(Ks=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function df(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function pf(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Da(s),Tp(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function Ko(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(gf(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function gf(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===oi)||(e.globalVersion=oi,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ko(e))))return;e.flags|=2;const t=e.dep,n=Et,s=Oe;Et=e,Oe=!0;try{df(e);const i=e.fn(e._value);(t.version===0||Sn(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Et=n,Oe=s,pf(e),e.flags&=-3}}function Da(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Da(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Tp(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Oe=!0;const mf=[];function un(){mf.push(Oe),Oe=!1}function fn(){const e=mf.pop();Oe=e===void 0?!0:e}function Ol(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Et;Et=void 0;try{t()}finally{Et=n}}}let oi=0;class Cp{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $a{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Et||!Oe||Et===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Et)n=this.activeLink=new Cp(Et,this),Et.deps?(n.prevDep=Et.depsTail,Et.depsTail.nextDep=n,Et.depsTail=n):Et.deps=Et.depsTail=n,bf(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Et.depsTail,n.nextDep=void 0,Et.depsTail.nextDep=n,Et.depsTail=n,Et.deps===n&&(Et.deps=s)}return n}trigger(t){this.version++,oi++,this.notify(t)}notify(t){Ia();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{La()}}}function bf(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)bf(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Go=new WeakMap,Vn=Symbol(""),Yo=Symbol(""),ai=Symbol("");function Kt(e,t,n){if(Oe&&Et){let s=Go.get(e);s||Go.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new $a),i.map=s,i.key=n),i.track()}}function rn(e,t,n,s,i,r){const o=Go.get(e);if(!o){oi++;return}const a=l=>{l&&l.trigger()};if(Ia(),t==="clear")o.forEach(a);else{const l=Q(e),c=l&&Pa(n);if(l&&n==="length"){const u=Number(s);o.forEach((f,h)=>{(h==="length"||h===ai||!Ge(h)&&h>=u)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(ai)),t){case"add":l?c&&a(o.get("length")):(a(o.get(Vn)),cs(e)&&a(o.get(Yo)));break;case"delete":l||(a(o.get(Vn)),cs(e)&&a(o.get(Yo)));break;case"set":cs(e)&&a(o.get(Vn));break}}La()}function Zn(e){const t=ct(e);return t===e?t:(Kt(t,"iterate",ai),Re(e)?t:t.map(Ht))}function Vr(e){return Kt(e=ct(e),"iterate",ai),e}const Op={__proto__:null,[Symbol.iterator](){return vo(this,Symbol.iterator,Ht)},concat(...e){return Zn(this).concat(...e.map(t=>Q(t)?Zn(t):t))},entries(){return vo(this,"entries",e=>(e[1]=Ht(e[1]),e))},every(e,t){return Ye(this,"every",e,t,void 0,arguments)},filter(e,t){return Ye(this,"filter",e,t,n=>n.map(Ht),arguments)},find(e,t){return Ye(this,"find",e,t,Ht,arguments)},findIndex(e,t){return Ye(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ye(this,"findLast",e,t,Ht,arguments)},findLastIndex(e,t){return Ye(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ye(this,"forEach",e,t,void 0,arguments)},includes(...e){return wo(this,"includes",e)},indexOf(...e){return wo(this,"indexOf",e)},join(e){return Zn(this).join(e)},lastIndexOf(...e){return wo(this,"lastIndexOf",e)},map(e,t){return Ye(this,"map",e,t,void 0,arguments)},pop(){return Ts(this,"pop")},push(...e){return Ts(this,"push",e)},reduce(e,...t){return Pl(this,"reduce",e,t)},reduceRight(e,...t){return Pl(this,"reduceRight",e,t)},shift(){return Ts(this,"shift")},some(e,t){return Ye(this,"some",e,t,void 0,arguments)},splice(...e){return Ts(this,"splice",e)},toReversed(){return Zn(this).toReversed()},toSorted(e){return Zn(this).toSorted(e)},toSpliced(...e){return Zn(this).toSpliced(...e)},unshift(...e){return Ts(this,"unshift",e)},values(){return vo(this,"values",Ht)}};function vo(e,t,n){const s=Vr(e),i=s[t]();return s!==e&&!Re(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const Pp=Array.prototype;function Ye(e,t,n,s,i,r){const o=Vr(e),a=o!==e&&!Re(e),l=o[t];if(l!==Pp[t]){const f=l.apply(e,r);return a?Ht(f):f}let c=n;o!==e&&(a?c=function(f,h){return n.call(this,Ht(f),h,e)}:n.length>2&&(c=function(f,h){return n.call(this,f,h,e)}));const u=l.call(o,c,s);return a&&i?i(u):u}function Pl(e,t,n,s){const i=Vr(e);let r=n;return i!==e&&(Re(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,Ht(a),l,e)}),i[t](r,...s)}function wo(e,t,n){const s=ct(e);Kt(s,"iterate",ai);const i=s[t](...n);return(i===-1||i===!1)&&Ai(n[0])?(n[0]=ct(n[0]),s[t](...n)):i}function Ts(e,t,n=[]){un(),Ia();const s=ct(e)[t].apply(e,n);return La(),fn(),s}const Mp=Ta("__proto__,__v_isRef,__isVue"),_f=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ge));function Ip(e){Ge(e)||(e=String(e));const t=ct(this);return Kt(t,"has",e),t.hasOwnProperty(e)}class yf{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?Vp:Sf:r?wf:vf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=Q(t);if(!i){let l;if(o&&(l=Op[n]))return l;if(n==="hasOwnProperty")return Ip}const a=Reflect.get(t,n,Xt(t)?t:s);return(Ge(n)?_f.has(n):Mp(n))||(i||Kt(t,"get",n),r)?a:Xt(a)?o&&Pa(n)?a:a.value:St(a)?i?Rf(a):Ei(a):a}}class xf extends yf{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const l=An(r);if(!Re(s)&&!An(s)&&(r=ct(r),s=ct(s)),!Q(t)&&Xt(r)&&!Xt(s))return l?!1:(r.value=s,!0)}const o=Q(t)&&Pa(n)?Number(n)<t.length:gt(t,n),a=Reflect.set(t,n,s,Xt(t)?t:i);return t===ct(i)&&(o?Sn(s,r)&&rn(t,"set",n,s):rn(t,"add",n,s)),a}deleteProperty(t,n){const s=gt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&rn(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!Ge(n)||!_f.has(n))&&Kt(t,"has",n),s}ownKeys(t){return Kt(t,"iterate",Q(t)?"length":Vn),Reflect.ownKeys(t)}}class Lp extends yf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Dp=new xf,$p=new Lp,Np=new xf(!0);const Xo=e=>e,$i=e=>Reflect.getPrototypeOf(e);function Fp(e,t,n){return function(...s){const i=this.__v_raw,r=ct(i),o=cs(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...s),u=n?Xo:t?hr:Ht;return!t&&Kt(r,"iterate",l?Yo:Vn),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Ni(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Bp(e,t){const n={get(i){const r=this.__v_raw,o=ct(r),a=ct(i);e||(Sn(i,a)&&Kt(o,"get",i),Kt(o,"get",a));const{has:l}=$i(o),c=t?Xo:e?hr:Ht;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Kt(ct(i),"iterate",Vn),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=ct(r),a=ct(i);return e||(Sn(i,a)&&Kt(o,"has",i),Kt(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=ct(a),c=t?Xo:e?hr:Ht;return!e&&Kt(l,"iterate",Vn),a.forEach((u,f)=>i.call(r,c(u),c(f),o))}};return zt(n,e?{add:Ni("add"),set:Ni("set"),delete:Ni("delete"),clear:Ni("clear")}:{add(i){!t&&!Re(i)&&!An(i)&&(i=ct(i));const r=ct(this);return $i(r).has.call(r,i)||(r.add(i),rn(r,"add",i,i)),this},set(i,r){!t&&!Re(r)&&!An(r)&&(r=ct(r));const o=ct(this),{has:a,get:l}=$i(o);let c=a.call(o,i);c||(i=ct(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?Sn(r,u)&&rn(o,"set",i,r):rn(o,"add",i,r),this},delete(i){const r=ct(this),{has:o,get:a}=$i(r);let l=o.call(r,i);l||(i=ct(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&rn(r,"delete",i,void 0),c},clear(){const i=ct(this),r=i.size!==0,o=i.clear();return r&&rn(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Fp(i,e,t)}),n}function Na(e,t){const n=Bp(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(gt(n,i)&&i in s?n:s,i,r)}const zp={get:Na(!1,!1)},Hp={get:Na(!1,!0)},jp={get:Na(!0,!1)};const vf=new WeakMap,wf=new WeakMap,Sf=new WeakMap,Vp=new WeakMap;function Up(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Wp(e){return e.__v_skip||!Object.isExtensible(e)?0:Up(gp(e))}function Ei(e){return An(e)?e:Fa(e,!1,Dp,zp,vf)}function kf(e){return Fa(e,!1,Np,Hp,wf)}function Rf(e){return Fa(e,!0,$p,jp,Sf)}function Fa(e,t,n,s,i){if(!St(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Wp(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?s:n);return i.set(e,a),a}function us(e){return An(e)?us(e.__v_raw):!!(e&&e.__v_isReactive)}function An(e){return!!(e&&e.__v_isReadonly)}function Re(e){return!!(e&&e.__v_isShallow)}function Ai(e){return e?!!e.__v_raw:!1}function ct(e){const t=e&&e.__v_raw;return t?ct(t):e}function qp(e){return!gt(e,"__v_skip")&&Object.isExtensible(e)&&rf(e,"__v_skip",!0),e}const Ht=e=>St(e)?Ei(e):e,hr=e=>St(e)?Rf(e):e;function Xt(e){return e?e.__v_isRef===!0:!1}function vt(e){return Ef(e,!1)}function Ba(e){return Ef(e,!0)}function Ef(e,t){return Xt(e)?e:new Kp(e,t)}class Kp{constructor(t,n){this.dep=new $a,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ct(t),this._value=n?t:Ht(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||Re(t)||An(t);t=s?t:ct(t),Sn(t,n)&&(this._rawValue=t,this._value=s?t:Ht(t),this.dep.trigger())}}function kn(e){return Xt(e)?e.value:e}const Gp={get:(e,t,n)=>t==="__v_raw"?e:kn(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return Xt(i)&&!Xt(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function Af(e){return us(e)?e:new Proxy(e,Gp)}class Yp{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new $a(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=oi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Et!==this)return hf(this,!0),!0}get value(){const t=this.dep.track();return gf(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Xp(e,t,n=!1){let s,i;return it(e)?s=e:(s=e.get,i=e.set),new Yp(s,i,n)}const Fi={},dr=new WeakMap;let Fn;function Qp(e,t=!1,n=Fn){if(n){let s=dr.get(n);s||dr.set(n,s=[]),s.push(e)}}function Jp(e,t,n=wt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,c=k=>i?k:Re(k)||i===!1||i===0?on(k,1):on(k);let u,f,h,d,g=!1,m=!1;if(Xt(e)?(f=()=>e.value,g=Re(e)):us(e)?(f=()=>c(e),g=!0):Q(e)?(m=!0,g=e.some(k=>us(k)||Re(k)),f=()=>e.map(k=>{if(Xt(k))return k.value;if(us(k))return c(k);if(it(k))return l?l(k,2):k()})):it(e)?t?f=l?()=>l(e,2):e:f=()=>{if(h){un();try{h()}finally{fn()}}const k=Fn;Fn=u;try{return l?l(e,3,[d]):e(d)}finally{Fn=k}}:f=Ke,t&&i){const k=f,C=i===!0?1/0:i;f=()=>on(k(),C)}const b=Ap(),x=()=>{u.stop(),b&&b.active&&Oa(b.effects,u)};if(r&&t){const k=t;t=(...C)=>{k(...C),x()}}let v=m?new Array(e.length).fill(Fi):Fi;const S=k=>{if(!(!(u.flags&1)||!u.dirty&&!k))if(t){const C=u.run();if(i||g||(m?C.some(($,P)=>Sn($,v[P])):Sn(C,v))){h&&h();const $=Fn;Fn=u;try{const P=[C,v===Fi?void 0:m&&v[0]===Fi?[]:v,d];v=C,l?l(t,3,P):t(...P)}finally{Fn=$}}}else u.run()};return a&&a(S),u=new uf(f),u.scheduler=o?()=>o(S,!1):S,d=k=>Qp(k,!1,u),h=u.onStop=()=>{const k=dr.get(u);if(k){if(l)l(k,4);else for(const C of k)C();dr.delete(u)}},t?s?S(!0):v=u.run():o?o(S.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function on(e,t=1/0,n){if(t<=0||!St(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Xt(e))on(e.value,t,n);else if(Q(e))for(let s=0;s<e.length;s++)on(e[s],t,n);else if(ys(e)||cs(e))e.forEach(s=>{on(s,t,n)});else if(sf(e)){for(const s in e)on(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&on(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ti(e,t,n,s){try{return s?e(...s):e()}catch(i){Ur(i,t,n)}}function Pe(e,t,n,s){if(it(e)){const i=Ti(e,t,n,s);return i&&ef(i)&&i.catch(r=>{Ur(r,t,n)}),i}if(Q(e)){const i=[];for(let r=0;r<e.length;r++)i.push(Pe(e[r],t,n,s));return i}}function Ur(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||wt;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,l,c)===!1)return}a=a.parent}if(r){un(),Ti(r,null,10,[e,l,c]),fn();return}}Zp(e,n,i,s,o)}function Zp(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const ee=[];let Ue=-1;const fs=[];let bn=null,rs=0;const Tf=Promise.resolve();let pr=null;function Wr(e){const t=pr||Tf;return e?t.then(this?e.bind(this):e):t}function tg(e){let t=Ue+1,n=ee.length;for(;t<n;){const s=t+n>>>1,i=ee[s],r=li(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function za(e){if(!(e.flags&1)){const t=li(e),n=ee[ee.length-1];!n||!(e.flags&2)&&t>=li(n)?ee.push(e):ee.splice(tg(t),0,e),e.flags|=1,Cf()}}function Cf(){pr||(pr=Tf.then(Pf))}function eg(e){Q(e)?fs.push(...e):bn&&e.id===-1?bn.splice(rs+1,0,e):e.flags&1||(fs.push(e),e.flags|=1),Cf()}function Ml(e,t,n=Ue+1){for(;n<ee.length;n++){const s=ee[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;ee.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Of(e){if(fs.length){const t=[...new Set(fs)].sort((n,s)=>li(n)-li(s));if(fs.length=0,bn){bn.push(...t);return}for(bn=t,rs=0;rs<bn.length;rs++){const n=bn[rs];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}bn=null,rs=0}}const li=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Pf(e){try{for(Ue=0;Ue<ee.length;Ue++){const t=ee[Ue];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ti(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ue<ee.length;Ue++){const t=ee[Ue];t&&(t.flags&=-2)}Ue=-1,ee.length=0,Of(),pr=null,(ee.length||fs.length)&&Pf()}}let ue=null,Mf=null;function gr(e){const t=ue;return ue=e,Mf=e&&e.type.__scopeId||null,t}function be(e,t=ue,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&Vl(-1);const r=gr(t);let o;try{o=e(...i)}finally{gr(r),s._d&&Vl(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ft(e,t){if(ue===null)return e;const n=Qr(ue),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=wt]=t[i];r&&(it(r)&&(r={mounted:r,updated:r}),r.deep&&on(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function On(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(un(),Pe(l,n,8,[e.el,a,e,t]),fn())}}const ng=Symbol("_vte"),If=e=>e.__isTeleport,_n=Symbol("_leaveCb"),Bi=Symbol("_enterCb");function sg(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xs(()=>{e.isMounted=!0}),Hf(()=>{e.isUnmounting=!0}),e}const ve=[Function,Array],Lf={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ve,onEnter:ve,onAfterEnter:ve,onEnterCancelled:ve,onBeforeLeave:ve,onLeave:ve,onAfterLeave:ve,onLeaveCancelled:ve,onBeforeAppear:ve,onAppear:ve,onAfterAppear:ve,onAppearCancelled:ve},Df=e=>{const t=e.subTree;return t.component?Df(t.component):t},ig={name:"BaseTransition",props:Lf,setup(e,{slots:t}){const n=Jg(),s=sg();return()=>{const i=t.default&&Ff(t.default(),!0);if(!i||!i.length)return;const r=$f(i),o=ct(e),{mode:a}=o;if(s.isLeaving)return So(r);const l=Il(r);if(!l)return So(r);let c=Qo(l,o,s,n,f=>c=f);l.type!==ne&&ci(l,c);let u=n.subTree&&Il(n.subTree);if(u&&u.type!==ne&&!zn(l,u)&&Df(n).type!==ne){let f=Qo(u,o,s,n);if(ci(u,f),a==="out-in"&&l.type!==ne)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,u=void 0},So(r);a==="in-out"&&l.type!==ne?f.delayLeave=(h,d,g)=>{const m=Nf(s,u);m[String(u.key)]=u,h[_n]=()=>{d(),h[_n]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function $f(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==ne){t=n;break}}return t}const rg=ig;function Nf(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function Qo(e,t,n,s,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:d,onAfterLeave:g,onLeaveCancelled:m,onBeforeAppear:b,onAppear:x,onAfterAppear:v,onAppearCancelled:S}=t,k=String(e.key),C=Nf(n,e),$=(N,H)=>{N&&Pe(N,s,9,H)},P=(N,H)=>{const K=H[1];$(N,H),Q(N)?N.every(M=>M.length<=1)&&K():N.length<=1&&K()},D={mode:o,persisted:a,beforeEnter(N){let H=l;if(!n.isMounted)if(r)H=b||l;else return;N[_n]&&N[_n](!0);const K=C[k];K&&zn(e,K)&&K.el[_n]&&K.el[_n](),$(H,[N])},enter(N){let H=c,K=u,M=f;if(!n.isMounted)if(r)H=x||c,K=v||u,M=S||f;else return;let tt=!1;const ft=N[Bi]=rt=>{tt||(tt=!0,rt?$(M,[N]):$(K,[N]),D.delayedLeave&&D.delayedLeave(),N[Bi]=void 0)};H?P(H,[N,ft]):ft()},leave(N,H){const K=String(e.key);if(N[Bi]&&N[Bi](!0),n.isUnmounting)return H();$(h,[N]);let M=!1;const tt=N[_n]=ft=>{M||(M=!0,H(),ft?$(m,[N]):$(g,[N]),N[_n]=void 0,C[K]===e&&delete C[K])};C[K]=e,d?P(d,[N,tt]):tt()},clone(N){const H=Qo(N,t,n,s,i);return i&&i(H),H}};return D}function So(e){if(Kr(e))return e=Tn(e),e.children=null,e}function Il(e){if(!Kr(e))return If(e.type)&&e.children?$f(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&it(n.default))return n.default()}}function ci(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ci(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ff(e,t=!1,n){let s=[],i=0;for(let r=0;r<e.length;r++){let o=e[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===jt?(o.patchFlag&128&&i++,s=s.concat(Ff(o.children,t,a))):(t||o.type!==ne)&&s.push(a!=null?Tn(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function qr(e,t){return it(e)?zt({name:e.name},t,{setup:e}):e}function Bf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function mr(e,t,n,s,i=!1){if(Q(e)){e.forEach((g,m)=>mr(g,t&&(Q(t)?t[m]:t),n,s,i));return}if(Ys(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&mr(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?Qr(s.component):s.el,o=i?null:r,{i:a,r:l}=e,c=t&&t.r,u=a.refs===wt?a.refs={}:a.refs,f=a.setupState,h=ct(f),d=f===wt?()=>!1:g=>gt(h,g);if(c!=null&&c!==l&&(Pt(c)?(u[c]=null,d(c)&&(f[c]=null)):Xt(c)&&(c.value=null)),it(l))Ti(l,a,12,[o,u]);else{const g=Pt(l),m=Xt(l);if(g||m){const b=()=>{if(e.f){const x=g?d(l)?f[l]:u[l]:l.value;i?Q(x)&&Oa(x,r):Q(x)?x.includes(r)||x.push(r):g?(u[l]=[r],d(l)&&(f[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else g?(u[l]=o,d(l)&&(f[l]=o)):m&&(l.value=o,e.k&&(u[e.k]=o))};o?(b.id=-1,me(b,n)):b()}}}Hr().requestIdleCallback;Hr().cancelIdleCallback;const Ys=e=>!!e.type.__asyncLoader,Kr=e=>e.type.__isKeepAlive;function og(e,t){zf(e,"a",t)}function ag(e,t){zf(e,"da",t)}function zf(e,t,n=Vt){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Gr(t,s,n),n){let i=n.parent;for(;i&&i.parent;)Kr(i.parent.vnode)&&lg(s,t,n,i),i=i.parent}}function lg(e,t,n,s){const i=Gr(t,e,s,!0);Ha(()=>{Oa(s[t],i)},n)}function Gr(e,t,n=Vt,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{un();const a=Ci(n),l=Pe(t,n,e,o);return a(),fn(),l});return s?i.unshift(r):i.push(r),r}}const dn=e=>(t,n=Vt)=>{(!hi||e==="sp")&&Gr(e,(...s)=>t(...s),n)},cg=dn("bm"),xs=dn("m"),ug=dn("bu"),fg=dn("u"),Hf=dn("bum"),Ha=dn("um"),hg=dn("sp"),dg=dn("rtg"),pg=dn("rtc");function gg(e,t=Vt){Gr("ec",e,t)}const jf="components";function ja(e,t){return Uf(jf,e,!0,t)||e}const Vf=Symbol.for("v-ndc");function mg(e){return Pt(e)?Uf(jf,e,!1)||e:e||Vf}function Uf(e,t,n=!0,s=!1){const i=ue||Vt;if(i){const r=i.type;{const a=sm(r,!1);if(a&&(a===t||a===Ae(t)||a===zr(Ae(t))))return r}const o=Ll(i[e]||r[e],t)||Ll(i.appContext[e],t);return!o&&s?r:o}}function Ll(e,t){return e&&(e[t]||e[Ae(t)]||e[zr(Ae(t))])}function qn(e,t,n,s){let i;const r=n,o=Q(e);if(o||Pt(e)){const a=o&&us(e);let l=!1,c=!1;a&&(l=!Re(e),c=An(e),e=Vr(e)),i=new Array(e.length);for(let u=0,f=e.length;u<f;u++)i[u]=t(l?c?hr(Ht(e[u])):Ht(e[u]):e[u],u,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r)}else if(St(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(e[u],u,l,r)}}else i=[];return i}const Jo=e=>e?uh(e)?Qr(e):Jo(e.parent):null,Xs=zt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Jo(e.parent),$root:e=>Jo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>qf(e),$forceUpdate:e=>e.f||(e.f=()=>{za(e.update)}),$nextTick:e=>e.n||(e.n=Wr.bind(e.proxy)),$watch:e=>Ng.bind(e)}),ko=(e,t)=>e!==wt&&!e.__isScriptSetup&&gt(e,t),bg={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(ko(s,t))return o[t]=1,s[t];if(i!==wt&&gt(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&gt(c,t))return o[t]=3,r[t];if(n!==wt&&gt(n,t))return o[t]=4,n[t];Zo&&(o[t]=0)}}const u=Xs[t];let f,h;if(u)return t==="$attrs"&&Kt(e.attrs,"get",""),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==wt&&gt(n,t))return o[t]=4,n[t];if(h=l.config.globalProperties,gt(h,t))return h[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return ko(i,t)?(i[t]=n,!0):s!==wt&&gt(s,t)?(s[t]=n,!0):gt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||e!==wt&&gt(e,o)||ko(t,o)||(a=r[0])&&gt(a,o)||gt(s,o)||gt(Xs,o)||gt(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:gt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Dl(e){return Q(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Zo=!0;function _g(e){const t=qf(e),n=e.proxy,s=e.ctx;Zo=!1,t.beforeCreate&&$l(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:m,deactivated:b,beforeDestroy:x,beforeUnmount:v,destroyed:S,unmounted:k,render:C,renderTracked:$,renderTriggered:P,errorCaptured:D,serverPrefetch:N,expose:H,inheritAttrs:K,components:M,directives:tt,filters:ft}=t;if(c&&yg(c,s,null),o)for(const Z in o){const ot=o[Z];it(ot)&&(s[Z]=ot.bind(n))}if(i){const Z=i.call(n,n);St(Z)&&(e.data=Ei(Z))}if(Zo=!0,r)for(const Z in r){const ot=r[Z],kt=it(ot)?ot.bind(n,n):it(ot.get)?ot.get.bind(n,n):Ke,Qt=!it(ot)&&it(ot.set)?ot.set.bind(n):Ke,Jt=Ct({get:kt,set:Qt});Object.defineProperty(s,Z,{enumerable:!0,configurable:!0,get:()=>Jt.value,set:Mt=>Jt.value=Mt})}if(a)for(const Z in a)Wf(a[Z],s,n,Z);if(l){const Z=it(l)?l.call(n):l;Reflect.ownKeys(Z).forEach(ot=>{nr(ot,Z[ot])})}u&&$l(u,e,"c");function et(Z,ot){Q(ot)?ot.forEach(kt=>Z(kt.bind(n))):ot&&Z(ot.bind(n))}if(et(cg,f),et(xs,h),et(ug,d),et(fg,g),et(og,m),et(ag,b),et(gg,D),et(pg,$),et(dg,P),et(Hf,v),et(Ha,k),et(hg,N),Q(H))if(H.length){const Z=e.exposed||(e.exposed={});H.forEach(ot=>{Object.defineProperty(Z,ot,{get:()=>n[ot],set:kt=>n[ot]=kt})})}else e.exposed||(e.exposed={});C&&e.render===Ke&&(e.render=C),K!=null&&(e.inheritAttrs=K),M&&(e.components=M),tt&&(e.directives=tt),N&&Bf(e)}function yg(e,t,n=Ke){Q(e)&&(e=ta(e));for(const s in e){const i=e[s];let r;St(i)?"default"in i?r=Ee(i.from||s,i.default,!0):r=Ee(i.from||s):r=Ee(i),Xt(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function $l(e,t,n){Pe(Q(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Wf(e,t,n,s){let i=s.includes(".")?rh(n,s):()=>n[s];if(Pt(e)){const r=t[e];it(r)&&Rn(i,r)}else if(it(e))Rn(i,e.bind(n));else if(St(e))if(Q(e))e.forEach(r=>Wf(r,t,n,s));else{const r=it(e.handler)?e.handler.bind(n):t[e.handler];it(r)&&Rn(i,r,e)}}function qf(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(c=>br(l,c,o,!0)),br(l,t,o)),St(t)&&r.set(t,l),l}function br(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&br(e,r,n,!0),i&&i.forEach(o=>br(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=xg[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const xg={data:Nl,props:Fl,emits:Fl,methods:zs,computed:zs,beforeCreate:Zt,created:Zt,beforeMount:Zt,mounted:Zt,beforeUpdate:Zt,updated:Zt,beforeDestroy:Zt,beforeUnmount:Zt,destroyed:Zt,unmounted:Zt,activated:Zt,deactivated:Zt,errorCaptured:Zt,serverPrefetch:Zt,components:zs,directives:zs,watch:wg,provide:Nl,inject:vg};function Nl(e,t){return t?e?function(){return zt(it(e)?e.call(this,this):e,it(t)?t.call(this,this):t)}:t:e}function vg(e,t){return zs(ta(e),ta(t))}function ta(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Zt(e,t){return e?[...new Set([].concat(e,t))]:t}function zs(e,t){return e?zt(Object.create(null),e,t):t}function Fl(e,t){return e?Q(e)&&Q(t)?[...new Set([...e,...t])]:zt(Object.create(null),Dl(e),Dl(t??{})):t}function wg(e,t){if(!e)return t;if(!t)return e;const n=zt(Object.create(null),e);for(const s in t)n[s]=Zt(e[s],t[s]);return n}function Kf(){return{app:null,config:{isNativeTag:dp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sg=0;function kg(e,t){return function(s,i=null){it(s)||(s=zt({},s)),i!=null&&!St(i)&&(i=null);const r=Kf(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:Sg++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:hh,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&it(u.install)?(o.add(u),u.install(c,...f)):it(u)&&(o.add(u),u(c,...f))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,f){return f?(r.components[u]=f,c):r.components[u]},directive(u,f){return f?(r.directives[u]=f,c):r.directives[u]},mount(u,f,h){if(!l){const d=c._ceVNode||ut(s,i);return d.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),e(d,u,h),l=!0,c._container=u,u.__vue_app__=c,Qr(d.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Pe(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,f){return r.provides[u]=f,c},runWithContext(u){const f=hs;hs=c;try{return u()}finally{hs=f}}};return c}}let hs=null;function nr(e,t){if(Vt){let n=Vt.provides;const s=Vt.parent&&Vt.parent.provides;s===n&&(n=Vt.provides=Object.create(s)),n[e]=t}}function Ee(e,t,n=!1){const s=Vt||ue;if(s||hs){let i=hs?hs._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&it(t)?t.call(s&&s.proxy):t}}const Gf={},Yf=()=>Object.create(Gf),Xf=e=>Object.getPrototypeOf(e)===Gf;function Rg(e,t,n,s=!1){const i={},r=Yf();e.propsDefaults=Object.create(null),Qf(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:kf(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function Eg(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=ct(i),[l]=e.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Yr(e.emitsOptions,h))continue;const d=t[h];if(l)if(gt(r,h))d!==r[h]&&(r[h]=d,c=!0);else{const g=Ae(h);i[g]=ea(l,a,g,d,e,!1)}else d!==r[h]&&(r[h]=d,c=!0)}}}else{Qf(e,t,i,r)&&(c=!0);let u;for(const f in a)(!t||!gt(t,f)&&((u=Xn(f))===f||!gt(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=ea(l,a,f,void 0,e,!0)):delete i[f]);if(r!==a)for(const f in r)(!t||!gt(t,f))&&(delete r[f],c=!0)}c&&rn(e.attrs,"set","")}function Qf(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(qs(l))continue;const c=t[l];let u;i&&gt(i,u=Ae(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:Yr(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=ct(n),c=a||wt;for(let u=0;u<r.length;u++){const f=r[u];n[f]=ea(i,l,f,c[f],e,!gt(c,f))}}return o}function ea(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=gt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&it(l)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const u=Ci(i);s=c[n]=l.call(null,t),u()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Xn(n))&&(s=!0))}return s}const Ag=new WeakMap;function Jf(e,t,n=!1){const s=n?Ag:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!it(e)){const u=f=>{l=!0;const[h,d]=Jf(f,t,!0);zt(o,h),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return St(e)&&s.set(e,ls),ls;if(Q(r))for(let u=0;u<r.length;u++){const f=Ae(r[u]);Bl(f)&&(o[f]=wt)}else if(r)for(const u in r){const f=Ae(u);if(Bl(f)){const h=r[u],d=o[f]=Q(h)||it(h)?{type:h}:zt({},h),g=d.type;let m=!1,b=!0;if(Q(g))for(let x=0;x<g.length;++x){const v=g[x],S=it(v)&&v.name;if(S==="Boolean"){m=!0;break}else S==="String"&&(b=!1)}else m=it(g)&&g.name==="Boolean";d[0]=m,d[1]=b,(m||gt(d,"default"))&&a.push(f)}}const c=[o,a];return St(e)&&s.set(e,c),c}function Bl(e){return e[0]!=="$"&&!qs(e)}const Va=e=>e[0]==="_"||e==="$stable",Ua=e=>Q(e)?e.map(qe):[qe(e)],Tg=(e,t,n)=>{if(t._n)return t;const s=be((...i)=>Ua(t(...i)),n);return s._c=!1,s},Zf=(e,t,n)=>{const s=e._ctx;for(const i in e){if(Va(i))continue;const r=e[i];if(it(r))t[i]=Tg(i,r,s);else if(r!=null){const o=Ua(r);t[i]=()=>o}}},th=(e,t)=>{const n=Ua(t);e.slots.default=()=>n},eh=(e,t,n)=>{for(const s in t)(n||!Va(s))&&(e[s]=t[s])},Cg=(e,t,n)=>{const s=e.slots=Yf();if(e.vnode.shapeFlag&32){const i=t._;i?(eh(s,t,n),n&&rf(s,"_",i,!0)):Zf(t,s)}else t&&th(e,t)},Og=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=wt;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:eh(i,t,n):(r=!t.$stable,Zf(t,i)),o=t}else t&&(th(e,t),o={default:1});if(r)for(const a in i)!Va(a)&&o[a]==null&&delete i[a]},me=Ug;function Pg(e){return Mg(e)}function Mg(e,t){const n=Hr();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=Ke,insertStaticContent:g}=e,m=(_,y,w,E=null,O=null,T=null,j=void 0,z=null,F=!!y.dynamicChildren)=>{if(_===y)return;_&&!zn(_,y)&&(E=A(_),Mt(_,O,T,!0),_=null),y.patchFlag===-2&&(F=!1,y.dynamicChildren=null);const{type:I,ref:J,shapeFlag:U}=y;switch(I){case Xr:b(_,y,w,E);break;case ne:x(_,y,w,E);break;case Eo:_==null&&v(y,w,E,j);break;case jt:M(_,y,w,E,O,T,j,z,F);break;default:U&1?C(_,y,w,E,O,T,j,z,F):U&6?tt(_,y,w,E,O,T,j,z,F):(U&64||U&128)&&I.process(_,y,w,E,O,T,j,z,F,Y)}J!=null&&O&&mr(J,_&&_.ref,T,y||_,!y)},b=(_,y,w,E)=>{if(_==null)s(y.el=a(y.children),w,E);else{const O=y.el=_.el;y.children!==_.children&&c(O,y.children)}},x=(_,y,w,E)=>{_==null?s(y.el=l(y.children||""),w,E):y.el=_.el},v=(_,y,w,E)=>{[_.el,_.anchor]=g(_.children,y,w,E,_.el,_.anchor)},S=({el:_,anchor:y},w,E)=>{let O;for(;_&&_!==y;)O=h(_),s(_,w,E),_=O;s(y,w,E)},k=({el:_,anchor:y})=>{let w;for(;_&&_!==y;)w=h(_),i(_),_=w;i(y)},C=(_,y,w,E,O,T,j,z,F)=>{y.type==="svg"?j="svg":y.type==="math"&&(j="mathml"),_==null?$(y,w,E,O,T,j,z,F):N(_,y,O,T,j,z,F)},$=(_,y,w,E,O,T,j,z)=>{let F,I;const{props:J,shapeFlag:U,transition:X,dirs:st}=_;if(F=_.el=o(_.type,T,J&&J.is,J),U&8?u(F,_.children):U&16&&D(_.children,F,null,E,O,Ro(_,T),j,z),st&&On(_,null,E,"created"),P(F,_,_.scopeId,j,E),J){for(const Rt in J)Rt!=="value"&&!qs(Rt)&&r(F,Rt,null,J[Rt],T,E);"value"in J&&r(F,"value",null,J.value,T),(I=J.onVnodeBeforeMount)&&Be(I,E,_)}st&&On(_,null,E,"beforeMount");const lt=Ig(O,X);lt&&X.beforeEnter(F),s(F,y,w),((I=J&&J.onVnodeMounted)||lt||st)&&me(()=>{I&&Be(I,E,_),lt&&X.enter(F),st&&On(_,null,E,"mounted")},O)},P=(_,y,w,E,O)=>{if(w&&d(_,w),E)for(let T=0;T<E.length;T++)d(_,E[T]);if(O){let T=O.subTree;if(y===T||ah(T.type)&&(T.ssContent===y||T.ssFallback===y)){const j=O.vnode;P(_,j,j.scopeId,j.slotScopeIds,O.parent)}}},D=(_,y,w,E,O,T,j,z,F=0)=>{for(let I=F;I<_.length;I++){const J=_[I]=z?yn(_[I]):qe(_[I]);m(null,J,y,w,E,O,T,j,z)}},N=(_,y,w,E,O,T,j)=>{const z=y.el=_.el;let{patchFlag:F,dynamicChildren:I,dirs:J}=y;F|=_.patchFlag&16;const U=_.props||wt,X=y.props||wt;let st;if(w&&Pn(w,!1),(st=X.onVnodeBeforeUpdate)&&Be(st,w,y,_),J&&On(y,_,w,"beforeUpdate"),w&&Pn(w,!0),(U.innerHTML&&X.innerHTML==null||U.textContent&&X.textContent==null)&&u(z,""),I?H(_.dynamicChildren,I,z,w,E,Ro(y,O),T):j||ot(_,y,z,null,w,E,Ro(y,O),T,!1),F>0){if(F&16)K(z,U,X,w,O);else if(F&2&&U.class!==X.class&&r(z,"class",null,X.class,O),F&4&&r(z,"style",U.style,X.style,O),F&8){const lt=y.dynamicProps;for(let Rt=0;Rt<lt.length;Rt++){const _t=lt[Rt],pe=U[_t],re=X[_t];(re!==pe||_t==="value")&&r(z,_t,pe,re,O,w)}}F&1&&_.children!==y.children&&u(z,y.children)}else!j&&I==null&&K(z,U,X,w,O);((st=X.onVnodeUpdated)||J)&&me(()=>{st&&Be(st,w,y,_),J&&On(y,_,w,"updated")},E)},H=(_,y,w,E,O,T,j)=>{for(let z=0;z<y.length;z++){const F=_[z],I=y[z],J=F.el&&(F.type===jt||!zn(F,I)||F.shapeFlag&198)?f(F.el):w;m(F,I,J,null,E,O,T,j,!0)}},K=(_,y,w,E,O)=>{if(y!==w){if(y!==wt)for(const T in y)!qs(T)&&!(T in w)&&r(_,T,y[T],null,O,E);for(const T in w){if(qs(T))continue;const j=w[T],z=y[T];j!==z&&T!=="value"&&r(_,T,z,j,O,E)}"value"in w&&r(_,"value",y.value,w.value,O)}},M=(_,y,w,E,O,T,j,z,F)=>{const I=y.el=_?_.el:a(""),J=y.anchor=_?_.anchor:a("");let{patchFlag:U,dynamicChildren:X,slotScopeIds:st}=y;st&&(z=z?z.concat(st):st),_==null?(s(I,w,E),s(J,w,E),D(y.children||[],w,J,O,T,j,z,F)):U>0&&U&64&&X&&_.dynamicChildren?(H(_.dynamicChildren,X,w,O,T,j,z),(y.key!=null||O&&y===O.subTree)&&nh(_,y,!0)):ot(_,y,w,J,O,T,j,z,F)},tt=(_,y,w,E,O,T,j,z,F)=>{y.slotScopeIds=z,_==null?y.shapeFlag&512?O.ctx.activate(y,w,E,j,F):ft(y,w,E,O,T,j,F):rt(_,y,F)},ft=(_,y,w,E,O,T,j)=>{const z=_.component=Qg(_,E,O);if(Kr(_)&&(z.ctx.renderer=Y),Zg(z,!1,j),z.asyncDep){if(O&&O.registerDep(z,et,j),!_.el){const F=z.subTree=ut(ne);x(null,F,y,w)}}else et(z,_,y,w,O,T,j)},rt=(_,y,w)=>{const E=y.component=_.component;if(jg(_,y,w))if(E.asyncDep&&!E.asyncResolved){Z(E,y,w);return}else E.next=y,E.update();else y.el=_.el,E.vnode=y},et=(_,y,w,E,O,T,j)=>{const z=()=>{if(_.isMounted){let{next:U,bu:X,u:st,parent:lt,vnode:Rt}=_;{const Ne=sh(_);if(Ne){U&&(U.el=Rt.el,Z(_,U,j)),Ne.asyncDep.then(()=>{_.isUnmounted||z()});return}}let _t=U,pe;Pn(_,!1),U?(U.el=Rt.el,Z(_,U,j)):U=Rt,X&&er(X),(pe=U.props&&U.props.onVnodeBeforeUpdate)&&Be(pe,lt,U,Rt),Pn(_,!0);const re=Hl(_),$e=_.subTree;_.subTree=re,m($e,re,f($e.el),A($e),_,O,T),U.el=re.el,_t===null&&Vg(_,re.el),st&&me(st,O),(pe=U.props&&U.props.onVnodeUpdated)&&me(()=>Be(pe,lt,U,Rt),O)}else{let U;const{el:X,props:st}=y,{bm:lt,m:Rt,parent:_t,root:pe,type:re}=_,$e=Ys(y);Pn(_,!1),lt&&er(lt),!$e&&(U=st&&st.onVnodeBeforeMount)&&Be(U,_t,y),Pn(_,!0);{pe.ce&&pe.ce._injectChildStyle(re);const Ne=_.subTree=Hl(_);m(null,Ne,w,E,_,O,T),y.el=Ne.el}if(Rt&&me(Rt,O),!$e&&(U=st&&st.onVnodeMounted)){const Ne=y;me(()=>Be(U,_t,Ne),O)}(y.shapeFlag&256||_t&&Ys(_t.vnode)&&_t.vnode.shapeFlag&256)&&_.a&&me(_.a,O),_.isMounted=!0,y=w=E=null}};_.scope.on();const F=_.effect=new uf(z);_.scope.off();const I=_.update=F.run.bind(F),J=_.job=F.runIfDirty.bind(F);J.i=_,J.id=_.uid,F.scheduler=()=>za(J),Pn(_,!0),I()},Z=(_,y,w)=>{y.component=_;const E=_.vnode.props;_.vnode=y,_.next=null,Eg(_,y.props,E,w),Og(_,y.children,w),un(),Ml(_),fn()},ot=(_,y,w,E,O,T,j,z,F=!1)=>{const I=_&&_.children,J=_?_.shapeFlag:0,U=y.children,{patchFlag:X,shapeFlag:st}=y;if(X>0){if(X&128){Qt(I,U,w,E,O,T,j,z,F);return}else if(X&256){kt(I,U,w,E,O,T,j,z,F);return}}st&8?(J&16&&Lt(I,O,T),U!==I&&u(w,U)):J&16?st&16?Qt(I,U,w,E,O,T,j,z,F):Lt(I,O,T,!0):(J&8&&u(w,""),st&16&&D(U,w,E,O,T,j,z,F))},kt=(_,y,w,E,O,T,j,z,F)=>{_=_||ls,y=y||ls;const I=_.length,J=y.length,U=Math.min(I,J);let X;for(X=0;X<U;X++){const st=y[X]=F?yn(y[X]):qe(y[X]);m(_[X],st,w,null,O,T,j,z,F)}I>J?Lt(_,O,T,!0,!1,U):D(y,w,E,O,T,j,z,F,U)},Qt=(_,y,w,E,O,T,j,z,F)=>{let I=0;const J=y.length;let U=_.length-1,X=J-1;for(;I<=U&&I<=X;){const st=_[I],lt=y[I]=F?yn(y[I]):qe(y[I]);if(zn(st,lt))m(st,lt,w,null,O,T,j,z,F);else break;I++}for(;I<=U&&I<=X;){const st=_[U],lt=y[X]=F?yn(y[X]):qe(y[X]);if(zn(st,lt))m(st,lt,w,null,O,T,j,z,F);else break;U--,X--}if(I>U){if(I<=X){const st=X+1,lt=st<J?y[st].el:E;for(;I<=X;)m(null,y[I]=F?yn(y[I]):qe(y[I]),w,lt,O,T,j,z,F),I++}}else if(I>X)for(;I<=U;)Mt(_[I],O,T,!0),I++;else{const st=I,lt=I,Rt=new Map;for(I=lt;I<=X;I++){const ge=y[I]=F?yn(y[I]):qe(y[I]);ge.key!=null&&Rt.set(ge.key,I)}let _t,pe=0;const re=X-lt+1;let $e=!1,Ne=0;const As=new Array(re);for(I=0;I<re;I++)As[I]=0;for(I=st;I<=U;I++){const ge=_[I];if(pe>=re){Mt(ge,O,T,!0);continue}let Fe;if(ge.key!=null)Fe=Rt.get(ge.key);else for(_t=lt;_t<=X;_t++)if(As[_t-lt]===0&&zn(ge,y[_t])){Fe=_t;break}Fe===void 0?Mt(ge,O,T,!0):(As[Fe-lt]=I+1,Fe>=Ne?Ne=Fe:$e=!0,m(ge,y[Fe],w,null,O,T,j,z,F),pe++)}const El=$e?Lg(As):ls;for(_t=El.length-1,I=re-1;I>=0;I--){const ge=lt+I,Fe=y[ge],Al=ge+1<J?y[ge+1].el:E;As[I]===0?m(null,Fe,w,Al,O,T,j,z,F):$e&&(_t<0||I!==El[_t]?Jt(Fe,w,Al,2):_t--)}}},Jt=(_,y,w,E,O=null)=>{const{el:T,type:j,transition:z,children:F,shapeFlag:I}=_;if(I&6){Jt(_.component.subTree,y,w,E);return}if(I&128){_.suspense.move(y,w,E);return}if(I&64){j.move(_,y,w,Y);return}if(j===jt){s(T,y,w);for(let U=0;U<F.length;U++)Jt(F[U],y,w,E);s(_.anchor,y,w);return}if(j===Eo){S(_,y,w);return}if(E!==2&&I&1&&z)if(E===0)z.beforeEnter(T),s(T,y,w),me(()=>z.enter(T),O);else{const{leave:U,delayLeave:X,afterLeave:st}=z,lt=()=>{_.ctx.isUnmounted?i(T):s(T,y,w)},Rt=()=>{U(T,()=>{lt(),st&&st()})};X?X(T,lt,Rt):Rt()}else s(T,y,w)},Mt=(_,y,w,E=!1,O=!1)=>{const{type:T,props:j,ref:z,children:F,dynamicChildren:I,shapeFlag:J,patchFlag:U,dirs:X,cacheIndex:st}=_;if(U===-2&&(O=!1),z!=null&&(un(),mr(z,null,w,_,!0),fn()),st!=null&&(y.renderCache[st]=void 0),J&256){y.ctx.deactivate(_);return}const lt=J&1&&X,Rt=!Ys(_);let _t;if(Rt&&(_t=j&&j.onVnodeBeforeUnmount)&&Be(_t,y,_),J&6)De(_.component,w,E);else{if(J&128){_.suspense.unmount(w,E);return}lt&&On(_,null,y,"beforeUnmount"),J&64?_.type.remove(_,y,w,Y,E):I&&!I.hasOnce&&(T!==jt||U>0&&U&64)?Lt(I,y,w,!1,!0):(T===jt&&U&384||!O&&J&16)&&Lt(F,y,w),E&&xe(_)}(Rt&&(_t=j&&j.onVnodeUnmounted)||lt)&&me(()=>{_t&&Be(_t,y,_),lt&&On(_,null,y,"unmounted")},w)},xe=_=>{const{type:y,el:w,anchor:E,transition:O}=_;if(y===jt){ie(w,E);return}if(y===Eo){k(_);return}const T=()=>{i(w),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(_.shapeFlag&1&&O&&!O.persisted){const{leave:j,delayLeave:z}=O,F=()=>j(w,T);z?z(_.el,T,F):F()}else T()},ie=(_,y)=>{let w;for(;_!==y;)w=h(_),i(_),_=w;i(y)},De=(_,y,w)=>{const{bum:E,scope:O,job:T,subTree:j,um:z,m:F,a:I,parent:J,slots:{__:U}}=_;zl(F),zl(I),E&&er(E),J&&Q(U)&&U.forEach(X=>{J.renderCache[X]=void 0}),O.stop(),T&&(T.flags|=8,Mt(j,_,y,w)),z&&me(z,y),me(()=>{_.isUnmounted=!0},y),y&&y.pendingBranch&&!y.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===y.pendingId&&(y.deps--,y.deps===0&&y.resolve())},Lt=(_,y,w,E=!1,O=!1,T=0)=>{for(let j=T;j<_.length;j++)Mt(_[j],y,w,E,O)},A=_=>{if(_.shapeFlag&6)return A(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const y=h(_.anchor||_.el),w=y&&y[ng];return w?h(w):y};let q=!1;const V=(_,y,w)=>{_==null?y._vnode&&Mt(y._vnode,null,null,!0):m(y._vnode||null,_,y,null,null,null,w),y._vnode=_,q||(q=!0,Ml(),Of(),q=!1)},Y={p:m,um:Mt,m:Jt,r:xe,mt:ft,mc:D,pc:ot,pbc:H,n:A,o:e};return{render:V,hydrate:void 0,createApp:kg(V)}}function Ro({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Pn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ig(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function nh(e,t,n=!1){const s=e.children,i=t.children;if(Q(s)&&Q(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=yn(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&nh(o,a)),a.type===Xr&&(a.el=o.el),a.type===ne&&!a.el&&(a.el=o.el)}}function Lg(e){const t=e.slice(),n=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(i=n[n.length-1],e[i]<c){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<c?r=a+1:o=a;c<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function sh(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:sh(t)}function zl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Dg=Symbol.for("v-scx"),$g=()=>Ee(Dg);function Rn(e,t,n){return ih(e,t,n)}function ih(e,t,n=wt){const{immediate:s,deep:i,flush:r,once:o}=n,a=zt({},n),l=t&&s||!t&&r!=="post";let c;if(hi){if(r==="sync"){const d=$g();c=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=Ke,d.resume=Ke,d.pause=Ke,d}}const u=Vt;a.call=(d,g,m)=>Pe(d,u,g,m);let f=!1;r==="post"?a.scheduler=d=>{me(d,u&&u.suspense)}:r!=="sync"&&(f=!0,a.scheduler=(d,g)=>{g?d():za(d)}),a.augmentJob=d=>{t&&(d.flags|=4),f&&(d.flags|=2,u&&(d.id=u.uid,d.i=u))};const h=Jp(e,t,a);return hi&&(c?c.push(h):l&&h()),h}function Ng(e,t,n){const s=this.proxy,i=Pt(e)?e.includes(".")?rh(s,e):()=>s[e]:e.bind(s,s);let r;it(t)?r=t:(r=t.handler,n=t);const o=Ci(this),a=ih(i,r.bind(s),n);return o(),a}function rh(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const Fg=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ae(t)}Modifiers`]||e[`${Xn(t)}Modifiers`];function Bg(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||wt;let i=n;const r=t.startsWith("update:"),o=r&&Fg(s,t.slice(7));o&&(o.trim&&(i=n.map(u=>Pt(u)?u.trim():u)),o.number&&(i=n.map(fr)));let a,l=s[a=_o(t)]||s[a=_o(Ae(t))];!l&&r&&(l=s[a=_o(Xn(t))]),l&&Pe(l,e,6,i);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Pe(c,e,6,i)}}function oh(e,t,n=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!it(e)){const l=c=>{const u=oh(c,t,!0);u&&(a=!0,zt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(St(e)&&s.set(e,null),null):(Q(r)?r.forEach(l=>o[l]=null):zt(o,r),St(e)&&s.set(e,o),o)}function Yr(e,t){return!e||!Fr(t)?!1:(t=t.slice(2).replace(/Once$/,""),gt(e,t[0].toLowerCase()+t.slice(1))||gt(e,Xn(t))||gt(e,t))}function Hl(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:f,data:h,setupState:d,ctx:g,inheritAttrs:m}=e,b=gr(e);let x,v;try{if(n.shapeFlag&4){const k=i||s,C=k;x=qe(c.call(C,k,u,f,d,h,g)),v=a}else{const k=t;x=qe(k.length>1?k(f,{attrs:a,slots:o,emit:l}):k(f,null)),v=t.props?a:zg(a)}}catch(k){Qs.length=0,Ur(k,e,1),x=ut(ne)}let S=x;if(v&&m!==!1){const k=Object.keys(v),{shapeFlag:C}=S;k.length&&C&7&&(r&&k.some(Ca)&&(v=Hg(v,r)),S=Tn(S,v,!1,!0))}return n.dirs&&(S=Tn(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&ci(S,n.transition),x=S,gr(b),x}const zg=e=>{let t;for(const n in e)(n==="class"||n==="style"||Fr(n))&&((t||(t={}))[n]=e[n]);return t},Hg=(e,t)=>{const n={};for(const s in e)(!Ca(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function jg(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?jl(s,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==s[h]&&!Yr(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?jl(s,o,c):!0:!!o;return!1}function jl(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!Yr(n,r))return!0}return!1}function Vg({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const ah=e=>e.__isSuspense;function Ug(e,t){t&&t.pendingBranch?Q(e)?t.effects.push(...e):t.effects.push(e):eg(e)}const jt=Symbol.for("v-fgt"),Xr=Symbol.for("v-txt"),ne=Symbol.for("v-cmt"),Eo=Symbol.for("v-stc"),Qs=[];let _e=null;function L(e=!1){Qs.push(_e=e?null:[])}function Wg(){Qs.pop(),_e=Qs[Qs.length-1]||null}let ui=1;function Vl(e,t=!1){ui+=e,e<0&&_e&&t&&(_e.hasOnce=!0)}function lh(e){return e.dynamicChildren=ui>0?_e||ls:null,Wg(),ui>0&&_e&&_e.push(e),e}function B(e,t,n,s,i,r){return lh(p(e,t,n,s,i,r,!0))}function fi(e,t,n,s,i){return lh(ut(e,t,n,s,i,!0))}function _r(e){return e?e.__v_isVNode===!0:!1}function zn(e,t){return e.type===t.type&&e.key===t.key}const ch=({key:e})=>e??null,sr=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Pt(e)||Xt(e)||it(e)?{i:ue,r:e,k:t,f:!!n}:e:null);function p(e,t=null,n=null,s=0,i=null,r=e===jt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ch(t),ref:t&&sr(t),scopeId:Mf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ue};return a?(Wa(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=Pt(n)?8:16),ui>0&&!o&&_e&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&_e.push(l),l}const ut=qg;function qg(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===Vf)&&(e=ne),_r(e)){const a=Tn(e,t,!0);return n&&Wa(a,n),ui>0&&!r&&_e&&(a.shapeFlag&6?_e[_e.indexOf(e)]=a:_e.push(a)),a.patchFlag=-2,a}if(im(e)&&(e=e.__vccOpts),t){t=Kg(t);let{class:a,style:l}=t;a&&!Pt(a)&&(t.class=Ce(a)),St(l)&&(Ai(l)&&!Q(l)&&(l=zt({},l)),t.style=jr(l))}const o=Pt(e)?1:ah(e)?128:If(e)?64:St(e)?4:it(e)?2:0;return p(e,t,n,s,i,o,r,!0)}function Kg(e){return e?Ai(e)||Xf(e)?zt({},e):e:null}function Tn(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?Gg(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&ch(c),ref:t&&t.ref?n&&r?Q(r)?r.concat(sr(t)):[r,sr(t)]:sr(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==jt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Tn(e.ssContent),ssFallback:e.ssFallback&&Tn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&ci(u,l.clone(u)),u}function nt(e=" ",t=0){return ut(Xr,null,e,t)}function Tt(e="",t=!1){return t?(L(),fi(ne,null,e)):ut(ne,null,e)}function qe(e){return e==null||typeof e=="boolean"?ut(ne):Q(e)?ut(jt,null,e.slice()):_r(e)?yn(e):ut(Xr,null,String(e))}function yn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Tn(e)}function Wa(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Q(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Wa(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!Xf(t)?t._ctx=ue:i===3&&ue&&(ue.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else it(t)?(t={default:t,_ctx:ue},n=32):(t=String(t),s&64?(n=16,t=[nt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Gg(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=Ce([t.class,s.class]));else if(i==="style")t.style=jr([t.style,s.style]);else if(Fr(i)){const r=t[i],o=s[i];o&&r!==o&&!(Q(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function Be(e,t,n,s=null){Pe(e,t,7,[n,s])}const Yg=Kf();let Xg=0;function Qg(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||Yg,r={uid:Xg++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Jf(s,i),emitsOptions:oh(s,i),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:s.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Bg.bind(null,r),e.ce&&e.ce(r),r}let Vt=null;const Jg=()=>Vt||ue;let yr,na;{const e=Hr(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};yr=t("__VUE_INSTANCE_SETTERS__",n=>Vt=n),na=t("__VUE_SSR_SETTERS__",n=>hi=n)}const Ci=e=>{const t=Vt;return yr(e),e.scope.on(),()=>{e.scope.off(),yr(t)}},Ul=()=>{Vt&&Vt.scope.off(),yr(null)};function uh(e){return e.vnode.shapeFlag&4}let hi=!1;function Zg(e,t=!1,n=!1){t&&na(t);const{props:s,children:i}=e.vnode,r=uh(e);Rg(e,s,r,t),Cg(e,i,n||t);const o=r?tm(e,t):void 0;return t&&na(!1),o}function tm(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,bg);const{setup:s}=n;if(s){un();const i=e.setupContext=s.length>1?nm(e):null,r=Ci(e),o=Ti(s,e,0,[e.props,i]),a=ef(o);if(fn(),r(),(a||e.sp)&&!Ys(e)&&Bf(e),a){if(o.then(Ul,Ul),t)return o.then(l=>{Wl(e,l)}).catch(l=>{Ur(l,e,0)});e.asyncDep=o}else Wl(e,o)}else fh(e)}function Wl(e,t,n){it(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:St(t)&&(e.setupState=Af(t)),fh(e)}function fh(e,t,n){const s=e.type;e.render||(e.render=s.render||Ke);{const i=Ci(e);un();try{_g(e)}finally{fn(),i()}}}const em={get(e,t){return Kt(e,"get",""),e[t]}};function nm(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,em),slots:e.slots,emit:e.emit,expose:t}}function Qr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Af(qp(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Xs)return Xs[n](e)},has(t,n){return n in t||n in Xs}})):e.proxy}function sm(e,t=!0){return it(e)?e.displayName||e.name:e.name||t&&e.__name}function im(e){return it(e)&&"__vccOpts"in e}const Ct=(e,t)=>Xp(e,t,hi);function ps(e,t,n){const s=arguments.length;return s===2?St(t)&&!Q(t)?_r(t)?ut(e,null,[t]):ut(e,t):ut(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&_r(n)&&(n=[n]),ut(e,t,n))}const hh="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sa;const ql=typeof window<"u"&&window.trustedTypes;if(ql)try{sa=ql.createPolicy("vue",{createHTML:e=>e})}catch{}const dh=sa?e=>sa.createHTML(e):e=>e,rm="http://www.w3.org/2000/svg",om="http://www.w3.org/1998/Math/MathML",nn=typeof document<"u"?document:null,Kl=nn&&nn.createElement("template"),am={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?nn.createElementNS(rm,e):t==="mathml"?nn.createElementNS(om,e):n?nn.createElement(e,{is:n}):nn.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>nn.createTextNode(e),createComment:e=>nn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>nn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Kl.innerHTML=dh(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Kl.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},pn="transition",Cs="animation",di=Symbol("_vtc"),ph={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lm=zt({},Lf,ph),cm=e=>(e.displayName="Transition",e.props=lm,e),gh=cm((e,{slots:t})=>ps(rg,um(e),t)),Mn=(e,t=[])=>{Q(e)?e.forEach(n=>n(...t)):e&&e(...t)},Gl=e=>e?Q(e)?e.some(t=>t.length>1):e.length>1:!1;function um(e){const t={};for(const M in e)M in ph||(t[M]=e[M]);if(e.css===!1)return t;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=e,g=fm(i),m=g&&g[0],b=g&&g[1],{onBeforeEnter:x,onEnter:v,onEnterCancelled:S,onLeave:k,onLeaveCancelled:C,onBeforeAppear:$=x,onAppear:P=v,onAppearCancelled:D=S}=t,N=(M,tt,ft,rt)=>{M._enterCancelled=rt,In(M,tt?u:a),In(M,tt?c:o),ft&&ft()},H=(M,tt)=>{M._isLeaving=!1,In(M,f),In(M,d),In(M,h),tt&&tt()},K=M=>(tt,ft)=>{const rt=M?P:v,et=()=>N(tt,M,ft);Mn(rt,[tt,et]),Yl(()=>{In(tt,M?l:r),Xe(tt,M?u:a),Gl(rt)||Xl(tt,s,m,et)})};return zt(t,{onBeforeEnter(M){Mn(x,[M]),Xe(M,r),Xe(M,o)},onBeforeAppear(M){Mn($,[M]),Xe(M,l),Xe(M,c)},onEnter:K(!1),onAppear:K(!0),onLeave(M,tt){M._isLeaving=!0;const ft=()=>H(M,tt);Xe(M,f),M._enterCancelled?(Xe(M,h),Zl()):(Zl(),Xe(M,h)),Yl(()=>{M._isLeaving&&(In(M,f),Xe(M,d),Gl(k)||Xl(M,s,b,ft))}),Mn(k,[M,ft])},onEnterCancelled(M){N(M,!1,void 0,!0),Mn(S,[M])},onAppearCancelled(M){N(M,!0,void 0,!0),Mn(D,[M])},onLeaveCancelled(M){H(M),Mn(C,[M])}})}function fm(e){if(e==null)return null;if(St(e))return[Ao(e.enter),Ao(e.leave)];{const t=Ao(e);return[t,t]}}function Ao(e){return _p(e)}function Xe(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[di]||(e[di]=new Set)).add(t)}function In(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[di];n&&(n.delete(t),n.size||(e[di]=void 0))}function Yl(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let hm=0;function Xl(e,t,n,s){const i=e._endId=++hm,r=()=>{i===e._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=dm(e,t);if(!o)return s();const c=o+"end";let u=0;const f=()=>{e.removeEventListener(c,h),r()},h=d=>{d.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),e.addEventListener(c,h)}function dm(e,t){const n=window.getComputedStyle(e),s=g=>(n[g]||"").split(", "),i=s(`${pn}Delay`),r=s(`${pn}Duration`),o=Ql(i,r),a=s(`${Cs}Delay`),l=s(`${Cs}Duration`),c=Ql(a,l);let u=null,f=0,h=0;t===pn?o>0&&(u=pn,f=o,h=r.length):t===Cs?c>0&&(u=Cs,f=c,h=l.length):(f=Math.max(o,c),u=f>0?o>c?pn:Cs:null,h=u?u===pn?r.length:l.length:0);const d=u===pn&&/\b(transform|all)(,|$)/.test(s(`${pn}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:d}}function Ql(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Jl(n)+Jl(e[s])))}function Jl(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Zl(){return document.body.offsetHeight}function pm(e,t,n){const s=e[di];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const xr=Symbol("_vod"),mh=Symbol("_vsh"),gm={beforeMount(e,{value:t},{transition:n}){e[xr]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Os(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Os(e,!0),s.enter(e)):s.leave(e,()=>{Os(e,!1)}):Os(e,t))},beforeUnmount(e,{value:t}){Os(e,t)}};function Os(e,t){e.style.display=t?e[xr]:"none",e[mh]=!t}const mm=Symbol(""),bm=/(^|;)\s*display\s*:/;function _m(e,t,n){const s=e.style,i=Pt(n);let r=!1;if(n&&!i){if(t)if(Pt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ir(s,a,"")}else for(const o in t)n[o]==null&&ir(s,o,"");for(const o in n)o==="display"&&(r=!0),ir(s,o,n[o])}else if(i){if(t!==n){const o=s[mm];o&&(n+=";"+o),s.cssText=n,r=bm.test(n)}}else t&&e.removeAttribute("style");xr in e&&(e[xr]=r?s.display:"",e[mh]&&(s.display="none"))}const tc=/\s*!important$/;function ir(e,t,n){if(Q(n))n.forEach(s=>ir(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=ym(e,t);tc.test(n)?e.setProperty(Xn(s),n.replace(tc,""),"important"):e[s]=n}}const ec=["Webkit","Moz","ms"],To={};function ym(e,t){const n=To[t];if(n)return n;let s=Ae(t);if(s!=="filter"&&s in e)return To[t]=s;s=zr(s);for(let i=0;i<ec.length;i++){const r=ec[i]+s;if(r in e)return To[t]=r}return t}const nc="http://www.w3.org/1999/xlink";function sc(e,t,n,s,i,r=kp(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(nc,t.slice(6,t.length)):e.setAttributeNS(nc,t,n):n==null||r&&!of(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Ge(n)?String(n):n)}function ic(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?dh(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=of(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function vn(e,t,n,s){e.addEventListener(t,n,s)}function xm(e,t,n,s){e.removeEventListener(t,n,s)}const rc=Symbol("_vei");function vm(e,t,n,s,i=null){const r=e[rc]||(e[rc]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=wm(t);if(s){const c=r[t]=Rm(s,i);vn(e,a,c,l)}else o&&(xm(e,a,o,l),r[t]=void 0)}}const oc=/(?:Once|Passive|Capture)$/;function wm(e){let t;if(oc.test(e)){t={};let s;for(;s=e.match(oc);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xn(e.slice(2)),t]}let Co=0;const Sm=Promise.resolve(),km=()=>Co||(Sm.then(()=>Co=0),Co=Date.now());function Rm(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Pe(Em(s,n.value),t,5,[s])};return n.value=e,n.attached=km(),n}function Em(e,t){if(Q(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const ac=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Am=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?pm(e,s,o):t==="style"?_m(e,n,s):Fr(t)?Ca(t)||vm(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Tm(e,t,s,o))?(ic(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&sc(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Pt(s))?ic(e,Ae(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),sc(e,t,s,o))};function Tm(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&ac(t)&&it(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return ac(t)&&Pt(n)?!1:t in e}const gs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Q(t)?n=>er(t,n):t};function Cm(e){e.target.composing=!0}function lc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const cn=Symbol("_assign"),te={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[cn]=gs(i);const r=s||i.props&&i.props.type==="number";vn(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=fr(a)),e[cn](a)}),n&&vn(e,"change",()=>{e.value=e.value.trim()}),t||(vn(e,"compositionstart",Cm),vn(e,"compositionend",lc),vn(e,"change",lc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[cn]=gs(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?fr(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},Om={deep:!0,created(e,t,n){e[cn]=gs(n),vn(e,"change",()=>{const s=e._modelValue,i=pi(e),r=e.checked,o=e[cn];if(Q(s)){const a=Ma(s,i),l=a!==-1;if(r&&!l)o(s.concat(i));else if(!r&&l){const c=[...s];c.splice(a,1),o(c)}}else if(ys(s)){const a=new Set(s);r?a.add(i):a.delete(i),o(a)}else o(bh(e,r))})},mounted:cc,beforeUpdate(e,t,n){e[cn]=gs(n),cc(e,t,n)}};function cc(e,{value:t,oldValue:n},s){e._modelValue=t;let i;if(Q(t))i=Ma(t,s.props.value)>-1;else if(ys(t))i=t.has(s.props.value);else{if(t===n)return;i=Ri(t,bh(e,!0))}e.checked!==i&&(e.checked=i)}const Pm={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=ys(t);vn(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?fr(pi(o)):pi(o));e[cn](e.multiple?i?new Set(r):r:r[0]),e._assigning=!0,Wr(()=>{e._assigning=!1})}),e[cn]=gs(s)},mounted(e,{value:t}){uc(e,t)},beforeUpdate(e,t,n){e[cn]=gs(n)},updated(e,{value:t}){e._assigning||uc(e,t)}};function uc(e,t){const n=e.multiple,s=Q(t);if(!(n&&!s&&!ys(t))){for(let i=0,r=e.options.length;i<r;i++){const o=e.options[i],a=pi(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(c=>String(c)===String(a)):o.selected=Ma(t,a)>-1}else o.selected=t.has(a);else if(Ri(pi(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function pi(e){return"_value"in e?e._value:e.value}function bh(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Mm=["ctrl","shift","alt","meta"],Im={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Mm.some(n=>e[`${n}Key`]&&!t.includes(n))},Oi=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=Im[t[o]];if(a&&a(i,t))return}return e(i,...r)})},Lm=zt({patchProp:Am},am);let fc;function Dm(){return fc||(fc=Pg(Lm))}const $m=(...e)=>{const t=Dm().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=Fm(s);if(!i)return;const r=t._component;!it(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Nm(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function Nm(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Fm(e){return Pt(e)?document.querySelector(e):e}const Wt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},Bm={name:"App"};function zm(e,t,n,s,i,r){const o=ja("router-view");return L(),fi(o)}const Hm=Wt(Bm,[["render",zm]]);function jm(){return _h().__VUE_DEVTOOLS_GLOBAL_HOOK__}function _h(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const Vm=typeof Proxy=="function",Um="devtools-plugin:setup",Wm="plugin:settings:set";let ts,ia;function qm(){var e;return ts!==void 0||(typeof window<"u"&&window.performance?(ts=!0,ia=window.performance):typeof globalThis<"u"&&(!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance)?(ts=!0,ia=globalThis.perf_hooks.performance):ts=!1),ts}function Km(){return qm()?ia.now():Date.now()}class Gm{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const s={};if(t.settings)for(const o in t.settings){const a=t.settings[o];s[o]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let r=Object.assign({},s);try{const o=localStorage.getItem(i),a=JSON.parse(o);Object.assign(r,a)}catch{}this.fallbacks={getSettings(){return r},setSettings(o){try{localStorage.setItem(i,JSON.stringify(o))}catch{}r=o},now(){return Km()}},n&&n.on(Wm,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function Ym(e,t){const n=e,s=_h(),i=jm(),r=Vm&&n.enableEarlyProxy;if(i&&(s.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!r))i.emit(Um,e,t);else{const o=r?new Gm(n,i):null;(s.__VUE_DEVTOOLS_PLUGINS__=s.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const os=typeof document<"u";function yh(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Xm(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&yh(e.default)}const pt=Object.assign;function Oo(e,t){const n={};for(const s in t){const i=t[s];n[s]=Me(i)?i.map(e):e(i)}return n}const Js=()=>{},Me=Array.isArray,xh=/#/g,Qm=/&/g,Jm=/\//g,Zm=/=/g,tb=/\?/g,vh=/\+/g,eb=/%5B/g,nb=/%5D/g,wh=/%5E/g,sb=/%60/g,Sh=/%7B/g,ib=/%7C/g,kh=/%7D/g,rb=/%20/g;function qa(e){return encodeURI(""+e).replace(ib,"|").replace(eb,"[").replace(nb,"]")}function ob(e){return qa(e).replace(Sh,"{").replace(kh,"}").replace(wh,"^")}function ra(e){return qa(e).replace(vh,"%2B").replace(rb,"+").replace(xh,"%23").replace(Qm,"%26").replace(sb,"`").replace(Sh,"{").replace(kh,"}").replace(wh,"^")}function ab(e){return ra(e).replace(Zm,"%3D")}function lb(e){return qa(e).replace(xh,"%23").replace(tb,"%3F")}function cb(e){return e==null?"":lb(e).replace(Jm,"%2F")}function gi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const ub=/\/$/,fb=e=>e.replace(ub,"");function Po(e,t,n="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),i=e(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=gb(s??t,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:gi(o)}}function hb(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function hc(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function db(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&ms(t.matched[s],n.matched[i])&&Rh(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function ms(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Rh(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!pb(e[n],t[n]))return!1;return!0}function pb(e,t){return Me(e)?dc(e,t):Me(t)?dc(t,e):e===t}function dc(e,t){return Me(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function gb(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const gn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var mi;(function(e){e.pop="pop",e.push="push"})(mi||(mi={}));var Zs;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Zs||(Zs={}));function mb(e){if(!e)if(os){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),fb(e)}const bb=/^[^#]+#/;function _b(e,t){return e.replace(bb,"#")+t}function yb(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Jr=()=>({left:window.scrollX,top:window.scrollY});function xb(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=yb(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function pc(e,t){return(history.state?history.state.position-t:-1)+e}const oa=new Map;function vb(e,t){oa.set(e,t)}function wb(e){const t=oa.get(e);return oa.delete(e),t}let Sb=()=>location.protocol+"//"+location.host;function Eh(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let a=i.includes(e.slice(r))?e.slice(r).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),hc(l,"")}return hc(n,e)+s+i}function kb(e,t,n,s){let i=[],r=[],o=null;const a=({state:h})=>{const d=Eh(e,location),g=n.value,m=t.value;let b=0;if(h){if(n.value=d,t.value=h,o&&o===g){o=null;return}b=m?h.position-m.position:0}else s(d);i.forEach(x=>{x(n.value,g,{delta:b,type:mi.pop,direction:b?b>0?Zs.forward:Zs.back:Zs.unknown})})};function l(){o=n.value}function c(h){i.push(h);const d=()=>{const g=i.indexOf(h);g>-1&&i.splice(g,1)};return r.push(d),d}function u(){const{history:h}=window;h.state&&h.replaceState(pt({},h.state,{scroll:Jr()}),"")}function f(){for(const h of r)h();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function gc(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?Jr():null}}function Rb(e){const{history:t,location:n}=window,s={value:Eh(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:Sb()+e+l;try{t[u?"replaceState":"pushState"](c,"",h),i.value=c}catch(d){console.error(d),n[u?"replace":"assign"](h)}}function o(l,c){const u=pt({},t.state,gc(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});r(l,u,!0),s.value=l}function a(l,c){const u=pt({},i.value,t.state,{forward:l,scroll:Jr()});r(u.current,u,!0);const f=pt({},gc(s.value,l,null),{position:u.position+1},c);r(l,f,!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function Eb(e){e=mb(e);const t=Rb(e),n=kb(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=pt({location:"",base:e,go:s,createHref:_b.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Ab(e){return typeof e=="string"||e&&typeof e=="object"}function Ah(e){return typeof e=="string"||typeof e=="symbol"}const Th=Symbol("");var mc;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(mc||(mc={}));function bs(e,t){return pt(new Error,{type:e,[Th]:!0},t)}function Qe(e,t){return e instanceof Error&&Th in e&&(t==null||!!(e.type&t))}const bc="[^/]+?",Tb={sensitive:!1,strict:!1,start:!0,end:!0},Cb=/[.+*?^${}()[\]/\\]/g;function Ob(e,t){const n=pt({},Tb,t),s=[];let i=n.start?"^":"";const r=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let f=0;f<c.length;f++){const h=c[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(Cb,"\\$&"),d+=40;else if(h.type===1){const{value:g,repeatable:m,optional:b,regexp:x}=h;r.push({name:g,repeatable:m,optional:b});const v=x||bc;if(v!==bc){d+=10;try{new RegExp(`(${v})`)}catch(k){throw new Error(`Invalid custom RegExp for param "${g}" (${v}): `+k.message)}}let S=m?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;f||(S=b&&c.length<2?`(?:/${S})`:"/"+S),b&&(S+="?"),i+=S,d+=20,b&&(d+=-8),m&&(d+=-20),v===".*"&&(d+=-50)}u.push(d)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const d=u[h]||"",g=r[h-1];f[g.name]=d&&g.repeatable?d.split("/"):d}return f}function l(c){let u="",f=!1;for(const h of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const d of h)if(d.type===0)u+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:b}=d,x=g in c?c[g]:"";if(Me(x)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const v=Me(x)?x.join("/"):x;if(!v)if(b)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=v}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function Pb(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Ch(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=Pb(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(_c(s))return 1;if(_c(i))return-1}return i.length-s.length}function _c(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Mb={type:0,value:""},Ib=/[a-zA-Z0-9_]/;function Lb(e){if(!e)return[[]];if(e==="/")return[[Mb]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function f(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):h();break;case 4:h(),n=s;break;case 1:l==="("?n=2:Ib.test(l)?h():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),o(),i}function Db(e,t,n){const s=Ob(Lb(e.path),n),i=pt(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function $b(e,t){const n=[],s=new Map;t=wc({strict:!1,end:!0,sensitive:!1},t);function i(f){return s.get(f)}function r(f,h,d){const g=!d,m=xc(f);m.aliasOf=d&&d.record;const b=wc(t,f),x=[m];if("alias"in f){const k=typeof f.alias=="string"?[f.alias]:f.alias;for(const C of k)x.push(xc(pt({},m,{components:d?d.record.components:m.components,path:C,aliasOf:d?d.record:m})))}let v,S;for(const k of x){const{path:C}=k;if(h&&C[0]!=="/"){const $=h.record.path,P=$[$.length-1]==="/"?"":"/";k.path=h.record.path+(C&&P+C)}if(v=Db(k,h,b),d?d.alias.push(v):(S=S||v,S!==v&&S.alias.push(v),g&&f.name&&!vc(v)&&o(f.name)),Oh(v)&&l(v),m.children){const $=m.children;for(let P=0;P<$.length;P++)r($[P],v,d&&d.children[P])}d=d||v}return S?()=>{o(S)}:Js}function o(f){if(Ah(f)){const h=s.get(f);h&&(s.delete(f),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(f);h>-1&&(n.splice(h,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const h=Bb(f,n);n.splice(h,0,f),f.record.name&&!vc(f)&&s.set(f.record.name,f)}function c(f,h){let d,g={},m,b;if("name"in f&&f.name){if(d=s.get(f.name),!d)throw bs(1,{location:f});b=d.record.name,g=pt(yc(h.params,d.keys.filter(S=>!S.optional).concat(d.parent?d.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),f.params&&yc(f.params,d.keys.map(S=>S.name))),m=d.stringify(g)}else if(f.path!=null)m=f.path,d=n.find(S=>S.re.test(m)),d&&(g=d.parse(m),b=d.record.name);else{if(d=h.name?s.get(h.name):n.find(S=>S.re.test(h.path)),!d)throw bs(1,{location:f,currentLocation:h});b=d.record.name,g=pt({},h.params,f.params),m=d.stringify(g)}const x=[];let v=d;for(;v;)x.unshift(v.record),v=v.parent;return{name:b,path:m,params:g,matched:x,meta:Fb(x)}}e.forEach(f=>r(f));function u(){n.length=0,s.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function yc(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function xc(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Nb(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Nb(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function vc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Fb(e){return e.reduce((t,n)=>pt(t,n.meta),{})}function wc(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function Bb(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;Ch(e,t[r])<0?s=r:n=r+1}const i=zb(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function zb(e){let t=e;for(;t=t.parent;)if(Oh(t)&&Ch(e,t)===0)return t}function Oh({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Hb(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(vh," "),o=r.indexOf("="),a=gi(o<0?r:r.slice(0,o)),l=o<0?null:gi(r.slice(o+1));if(a in t){let c=t[a];Me(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Sc(e){let t="";for(let n in e){const s=e[n];if(n=ab(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Me(s)?s.map(r=>r&&ra(r)):[s&&ra(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function jb(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Me(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const Vb=Symbol(""),kc=Symbol(""),Zr=Symbol(""),Ka=Symbol(""),aa=Symbol("");function Ps(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function xn(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(bs(4,{from:n,to:t})):h instanceof Error?l(h):Ab(h)?l(bs(2,{from:t,to:h})):(o&&s.enterCallbacks[i]===o&&typeof h=="function"&&o.push(h),a())},u=r(()=>e.call(s&&s.instances[i],t,n,c));let f=Promise.resolve(u);e.length<3&&(f=f.then(c)),f.catch(h=>l(h))})}function Mo(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(yh(l)){const u=(l.__vccOpts||l)[t];u&&r.push(xn(u,n,s,o,a,i))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=Xm(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const d=(f.__vccOpts||f)[t];return d&&xn(d,n,s,o,a,i)()}))}}return r}function Rc(e){const t=Ee(Zr),n=Ee(Ka),s=Ct(()=>{const l=kn(e.to);return t.resolve(l)}),i=Ct(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const h=f.findIndex(ms.bind(null,u));if(h>-1)return h;const d=Ec(l[c-2]);return c>1&&Ec(u)===d&&f[f.length-1].path!==d?f.findIndex(ms.bind(null,l[c-2])):h}),r=Ct(()=>i.value>-1&&Gb(n.params,s.value.params)),o=Ct(()=>i.value>-1&&i.value===n.matched.length-1&&Rh(n.params,s.value.params));function a(l={}){if(Kb(l)){const c=t[kn(e.replace)?"replace":"push"](kn(e.to)).catch(Js);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:Ct(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function Ub(e){return e.length===1?e[0]:e}const Wb=qr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Rc,setup(e,{slots:t}){const n=Ei(Rc(e)),{options:s}=Ee(Zr),i=Ct(()=>({[Ac(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Ac(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&Ub(t.default(n));return e.custom?r:ps("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),qb=Wb;function Kb(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Gb(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!Me(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function Ec(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ac=(e,t,n)=>e??t??n,Yb=qr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Ee(aa),i=Ct(()=>e.route||s.value),r=Ee(kc,0),o=Ct(()=>{let c=kn(r);const{matched:u}=i.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=Ct(()=>i.value.matched[o.value]);nr(kc,Ct(()=>o.value+1)),nr(Vb,a),nr(aa,i);const l=vt();return Rn(()=>[l.value,a.value,e.name],([c,u,f],[h,d,g])=>{u&&(u.instances[f]=c,d&&d!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!ms(u,d)||!h)&&(u.enterCallbacks[f]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,u=e.name,f=a.value,h=f&&f.components[u];if(!h)return Tc(n.default,{Component:h,route:c});const d=f.props[u],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,b=ps(h,pt({},g,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return Tc(n.default,{Component:b,route:c})||b}}});function Tc(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Xb=Yb;function Qb(e){const t=$b(e.routes,e),n=e.parseQuery||Hb,s=e.stringifyQuery||Sc,i=e.history,r=Ps(),o=Ps(),a=Ps(),l=Ba(gn);let c=gn;os&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Oo.bind(null,A=>""+A),f=Oo.bind(null,cb),h=Oo.bind(null,gi);function d(A,q){let V,Y;return Ah(A)?(V=t.getRecordMatcher(A),Y=q):Y=A,t.addRoute(Y,V)}function g(A){const q=t.getRecordMatcher(A);q&&t.removeRoute(q)}function m(){return t.getRoutes().map(A=>A.record)}function b(A){return!!t.getRecordMatcher(A)}function x(A,q){if(q=pt({},q||l.value),typeof A=="string"){const w=Po(n,A,q.path),E=t.resolve({path:w.path},q),O=i.createHref(w.fullPath);return pt(w,E,{params:h(E.params),hash:gi(w.hash),redirectedFrom:void 0,href:O})}let V;if(A.path!=null)V=pt({},A,{path:Po(n,A.path,q.path).path});else{const w=pt({},A.params);for(const E in w)w[E]==null&&delete w[E];V=pt({},A,{params:f(w)}),q.params=f(q.params)}const Y=t.resolve(V,q),xt=A.hash||"";Y.params=u(h(Y.params));const _=hb(s,pt({},A,{hash:ob(xt),path:Y.path})),y=i.createHref(_);return pt({fullPath:_,hash:xt,query:s===Sc?jb(A.query):A.query||{}},Y,{redirectedFrom:void 0,href:y})}function v(A){return typeof A=="string"?Po(n,A,l.value.path):pt({},A)}function S(A,q){if(c!==A)return bs(8,{from:q,to:A})}function k(A){return P(A)}function C(A){return k(pt(v(A),{replace:!0}))}function $(A){const q=A.matched[A.matched.length-1];if(q&&q.redirect){const{redirect:V}=q;let Y=typeof V=="function"?V(A):V;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=v(Y):{path:Y},Y.params={}),pt({query:A.query,hash:A.hash,params:Y.path!=null?{}:A.params},Y)}}function P(A,q){const V=c=x(A),Y=l.value,xt=A.state,_=A.force,y=A.replace===!0,w=$(V);if(w)return P(pt(v(w),{state:typeof w=="object"?pt({},xt,w.state):xt,force:_,replace:y}),q||V);const E=V;E.redirectedFrom=q;let O;return!_&&db(s,Y,V)&&(O=bs(16,{to:E,from:Y}),Jt(Y,Y,!0,!1)),(O?Promise.resolve(O):H(E,Y)).catch(T=>Qe(T)?Qe(T,2)?T:Qt(T):ot(T,E,Y)).then(T=>{if(T){if(Qe(T,2))return P(pt({replace:y},v(T.to),{state:typeof T.to=="object"?pt({},xt,T.to.state):xt,force:_}),q||E)}else T=M(E,Y,!0,y,xt);return K(E,Y,T),T})}function D(A,q){const V=S(A,q);return V?Promise.reject(V):Promise.resolve()}function N(A){const q=ie.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(A):A()}function H(A,q){let V;const[Y,xt,_]=Jb(A,q);V=Mo(Y.reverse(),"beforeRouteLeave",A,q);for(const w of Y)w.leaveGuards.forEach(E=>{V.push(xn(E,A,q))});const y=D.bind(null,A,q);return V.push(y),Lt(V).then(()=>{V=[];for(const w of r.list())V.push(xn(w,A,q));return V.push(y),Lt(V)}).then(()=>{V=Mo(xt,"beforeRouteUpdate",A,q);for(const w of xt)w.updateGuards.forEach(E=>{V.push(xn(E,A,q))});return V.push(y),Lt(V)}).then(()=>{V=[];for(const w of _)if(w.beforeEnter)if(Me(w.beforeEnter))for(const E of w.beforeEnter)V.push(xn(E,A,q));else V.push(xn(w.beforeEnter,A,q));return V.push(y),Lt(V)}).then(()=>(A.matched.forEach(w=>w.enterCallbacks={}),V=Mo(_,"beforeRouteEnter",A,q,N),V.push(y),Lt(V))).then(()=>{V=[];for(const w of o.list())V.push(xn(w,A,q));return V.push(y),Lt(V)}).catch(w=>Qe(w,8)?w:Promise.reject(w))}function K(A,q,V){a.list().forEach(Y=>N(()=>Y(A,q,V)))}function M(A,q,V,Y,xt){const _=S(A,q);if(_)return _;const y=q===gn,w=os?history.state:{};V&&(Y||y?i.replace(A.fullPath,pt({scroll:y&&w&&w.scroll},xt)):i.push(A.fullPath,xt)),l.value=A,Jt(A,q,V,y),Qt()}let tt;function ft(){tt||(tt=i.listen((A,q,V)=>{if(!De.listening)return;const Y=x(A),xt=$(Y);if(xt){P(pt(xt,{replace:!0,force:!0}),Y).catch(Js);return}c=Y;const _=l.value;os&&vb(pc(_.fullPath,V.delta),Jr()),H(Y,_).catch(y=>Qe(y,12)?y:Qe(y,2)?(P(pt(v(y.to),{force:!0}),Y).then(w=>{Qe(w,20)&&!V.delta&&V.type===mi.pop&&i.go(-1,!1)}).catch(Js),Promise.reject()):(V.delta&&i.go(-V.delta,!1),ot(y,Y,_))).then(y=>{y=y||M(Y,_,!1),y&&(V.delta&&!Qe(y,8)?i.go(-V.delta,!1):V.type===mi.pop&&Qe(y,20)&&i.go(-1,!1)),K(Y,_,y)}).catch(Js)}))}let rt=Ps(),et=Ps(),Z;function ot(A,q,V){Qt(A);const Y=et.list();return Y.length?Y.forEach(xt=>xt(A,q,V)):console.error(A),Promise.reject(A)}function kt(){return Z&&l.value!==gn?Promise.resolve():new Promise((A,q)=>{rt.add([A,q])})}function Qt(A){return Z||(Z=!A,ft(),rt.list().forEach(([q,V])=>A?V(A):q()),rt.reset()),A}function Jt(A,q,V,Y){const{scrollBehavior:xt}=e;if(!os||!xt)return Promise.resolve();const _=!V&&wb(pc(A.fullPath,0))||(Y||!V)&&history.state&&history.state.scroll||null;return Wr().then(()=>xt(A,q,_)).then(y=>y&&xb(y)).catch(y=>ot(y,A,q))}const Mt=A=>i.go(A);let xe;const ie=new Set,De={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:m,resolve:x,options:e,push:k,replace:C,go:Mt,back:()=>Mt(-1),forward:()=>Mt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:et.add,isReady:kt,install(A){const q=this;A.component("RouterLink",qb),A.component("RouterView",Xb),A.config.globalProperties.$router=q,Object.defineProperty(A.config.globalProperties,"$route",{enumerable:!0,get:()=>kn(l)}),os&&!xe&&l.value===gn&&(xe=!0,k(i.location).catch(xt=>{}));const V={};for(const xt in gn)Object.defineProperty(V,xt,{get:()=>l.value[xt],enumerable:!0});A.provide(Zr,q),A.provide(Ka,kf(V)),A.provide(aa,l);const Y=A.unmount;ie.add(A),A.unmount=function(){ie.delete(A),ie.size<1&&(c=gn,tt&&tt(),tt=null,l.value=gn,xe=!1,Z=!1),Y()}}};function Lt(A){return A.reduce((q,V)=>q.then(()=>N(V)),Promise.resolve())}return De}function Jb(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(c=>ms(c,a))?s.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>ms(c,l))||i.push(l))}return[n,s,i]}function to(){return Ee(Zr)}function Ph(e){return Ee(Ka)}/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var Mh="store";function vs(e){return e===void 0&&(e=null),Ee(e!==null?e:Mh)}function ws(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function Ih(e){return e!==null&&typeof e=="object"}function Zb(e){return e&&typeof e.then=="function"}function t_(e,t){return function(){return e(t)}}function Lh(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var s=t.indexOf(e);s>-1&&t.splice(s,1)}}function Dh(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;eo(e,n,[],e._modules.root,!0),Ga(e,n,t)}function Ga(e,t,n){var s=e._state,i=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,o={},a={},l=Ep(!0);l.run(function(){ws(r,function(c,u){o[u]=t_(c,e),a[u]=Ct(function(){return o[u]()}),Object.defineProperty(e.getters,u,{get:function(){return a[u].value},enumerable:!0})})}),e._state=Ei({data:t}),e._scope=l,e.strict&&r_(e),s&&n&&e._withCommit(function(){s.data=null}),i&&i.stop()}function eo(e,t,n,s,i){var r=!n.length,o=e._modules.getNamespace(n);if(s.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=s),!r&&!i){var a=Ya(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit(function(){a[l]=s.state})}var c=s.context=e_(e,o,n);s.forEachMutation(function(u,f){var h=o+f;n_(e,h,u,c)}),s.forEachAction(function(u,f){var h=u.root?f:o+f,d=u.handler||u;s_(e,h,d,c)}),s.forEachGetter(function(u,f){var h=o+f;i_(e,h,u,c)}),s.forEachChild(function(u,f){eo(e,t,n.concat(f),u,i)})}function e_(e,t,n){var s=t==="",i={dispatch:s?e.dispatch:function(r,o,a){var l=vr(r,o,a),c=l.payload,u=l.options,f=l.type;return(!u||!u.root)&&(f=t+f),e.dispatch(f,c)},commit:s?e.commit:function(r,o,a){var l=vr(r,o,a),c=l.payload,u=l.options,f=l.type;(!u||!u.root)&&(f=t+f),e.commit(f,c,u)}};return Object.defineProperties(i,{getters:{get:s?function(){return e.getters}:function(){return $h(e,t)}},state:{get:function(){return Ya(e.state,n)}}}),i}function $h(e,t){if(!e._makeLocalGettersCache[t]){var n={},s=t.length;Object.keys(e.getters).forEach(function(i){if(i.slice(0,s)===t){var r=i.slice(s);Object.defineProperty(n,r,{get:function(){return e.getters[i]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function n_(e,t,n,s){var i=e._mutations[t]||(e._mutations[t]=[]);i.push(function(o){n.call(e,s.state,o)})}function s_(e,t,n,s){var i=e._actions[t]||(e._actions[t]=[]);i.push(function(o){var a=n.call(e,{dispatch:s.dispatch,commit:s.commit,getters:s.getters,state:s.state,rootGetters:e.getters,rootState:e.state},o);return Zb(a)||(a=Promise.resolve(a)),e._devtoolHook?a.catch(function(l){throw e._devtoolHook.emit("vuex:error",l),l}):a})}function i_(e,t,n,s){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(r){return n(s.state,s.getters,r.state,r.getters)})}function r_(e){Rn(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function Ya(e,t){return t.reduce(function(n,s){return n[s]},e)}function vr(e,t,n){return Ih(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var o_="vuex bindings",Cc="vuex:mutations",Io="vuex:actions",es="vuex",a_=0;function l_(e,t){Ym({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[o_]},function(n){n.addTimelineLayer({id:Cc,label:"Vuex Mutations",color:Oc}),n.addTimelineLayer({id:Io,label:"Vuex Actions",color:Oc}),n.addInspector({id:es,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(s){if(s.app===e&&s.inspectorId===es)if(s.filter){var i=[];zh(i,t._modules.root,s.filter,""),s.rootNodes=i}else s.rootNodes=[Bh(t._modules.root,"")]}),n.on.getInspectorState(function(s){if(s.app===e&&s.inspectorId===es){var i=s.nodeId;$h(t,i),s.state=f_(d_(t._modules,i),i==="root"?t.getters:t._makeLocalGettersCache,i)}}),n.on.editInspectorState(function(s){if(s.app===e&&s.inspectorId===es){var i=s.nodeId,r=s.path;i!=="root"&&(r=i.split("/").filter(Boolean).concat(r)),t._withCommit(function(){s.set(t._state.data,r,s.state.value)})}}),t.subscribe(function(s,i){var r={};s.payload&&(r.payload=s.payload),r.state=i,n.notifyComponentUpdate(),n.sendInspectorTree(es),n.sendInspectorState(es),n.addTimelineEvent({layerId:Cc,event:{time:Date.now(),title:s.type,data:r}})}),t.subscribeAction({before:function(s,i){var r={};s.payload&&(r.payload=s.payload),s._id=a_++,s._time=Date.now(),r.state=i,n.addTimelineEvent({layerId:Io,event:{time:s._time,title:s.type,groupId:s._id,subtitle:"start",data:r}})},after:function(s,i){var r={},o=Date.now()-s._time;r.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},s.payload&&(r.payload=s.payload),r.state=i,n.addTimelineEvent({layerId:Io,event:{time:Date.now(),title:s.type,groupId:s._id,subtitle:"end",data:r}})}})})}var Oc=8702998,c_=6710886,u_=16777215,Nh={label:"namespaced",textColor:u_,backgroundColor:c_};function Fh(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function Bh(e,t){return{id:t||"root",label:Fh(t),tags:e.namespaced?[Nh]:[],children:Object.keys(e._children).map(function(n){return Bh(e._children[n],t+n+"/")})}}function zh(e,t,n,s){s.includes(n)&&e.push({id:s||"root",label:s.endsWith("/")?s.slice(0,s.length-1):s||"Root",tags:t.namespaced?[Nh]:[]}),Object.keys(t._children).forEach(function(i){zh(e,t._children[i],n,s+i+"/")})}function f_(e,t,n){t=n==="root"?t:t[n];var s=Object.keys(t),i={state:Object.keys(e.state).map(function(o){return{key:o,editable:!0,value:e.state[o]}})};if(s.length){var r=h_(t);i.getters=Object.keys(r).map(function(o){return{key:o.endsWith("/")?Fh(o):o,editable:!1,value:la(function(){return r[o]})}})}return i}function h_(e){var t={};return Object.keys(e).forEach(function(n){var s=n.split("/");if(s.length>1){var i=t,r=s.pop();s.forEach(function(o){i[o]||(i[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),i=i[o]._custom.value}),i[r]=la(function(){return e[n]})}else t[n]=la(function(){return e[n]})}),t}function d_(e,t){var n=t.split("/").filter(function(s){return s});return n.reduce(function(s,i,r){var o=s[i];if(!o)throw new Error('Missing module "'+i+'" for path "'+t+'".');return r===n.length-1?o:o._children},t==="root"?e:e.root._children)}function la(e){try{return e()}catch(t){return t}}var Ie=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var s=t.state;this.state=(typeof s=="function"?s():s)||{}},Hh={namespaced:{configurable:!0}};Hh.namespaced.get=function(){return!!this._rawModule.namespaced};Ie.prototype.addChild=function(t,n){this._children[t]=n};Ie.prototype.removeChild=function(t){delete this._children[t]};Ie.prototype.getChild=function(t){return this._children[t]};Ie.prototype.hasChild=function(t){return t in this._children};Ie.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};Ie.prototype.forEachChild=function(t){ws(this._children,t)};Ie.prototype.forEachGetter=function(t){this._rawModule.getters&&ws(this._rawModule.getters,t)};Ie.prototype.forEachAction=function(t){this._rawModule.actions&&ws(this._rawModule.actions,t)};Ie.prototype.forEachMutation=function(t){this._rawModule.mutations&&ws(this._rawModule.mutations,t)};Object.defineProperties(Ie.prototype,Hh);var Qn=function(t){this.register([],t,!1)};Qn.prototype.get=function(t){return t.reduce(function(n,s){return n.getChild(s)},this.root)};Qn.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(s,i){return n=n.getChild(i),s+(n.namespaced?i+"/":"")},"")};Qn.prototype.update=function(t){jh([],this.root,t)};Qn.prototype.register=function(t,n,s){var i=this;s===void 0&&(s=!0);var r=new Ie(n,s);if(t.length===0)this.root=r;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],r)}n.modules&&ws(n.modules,function(a,l){i.register(t.concat(l),a,s)})};Qn.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),s=t[t.length-1],i=n.getChild(s);i&&i.runtime&&n.removeChild(s)};Qn.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),s=t[t.length-1];return n?n.hasChild(s):!1};function jh(e,t,n){if(t.update(n),n.modules)for(var s in n.modules){if(!t.getChild(s))return;jh(e.concat(s),t.getChild(s),n.modules[s])}}function p_(e){return new de(e)}var de=function(t){var n=this;t===void 0&&(t={});var s=t.plugins;s===void 0&&(s=[]);var i=t.strict;i===void 0&&(i=!1);var r=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Qn(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=r;var o=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(h,d){return l.call(o,h,d)},this.commit=function(h,d,g){return c.call(o,h,d,g)},this.strict=i;var u=this._modules.root.state;eo(this,u,[],this._modules.root),Ga(this,u),s.forEach(function(f){return f(n)})},Xa={state:{configurable:!0}};de.prototype.install=function(t,n){t.provide(n||Mh,this),t.config.globalProperties.$store=this;var s=this._devtools!==void 0?this._devtools:!1;s&&l_(t,this)};Xa.state.get=function(){return this._state.data};Xa.state.set=function(e){};de.prototype.commit=function(t,n,s){var i=this,r=vr(t,n,s),o=r.type,a=r.payload,l={type:o,payload:a},c=this._mutations[o];c&&(this._withCommit(function(){c.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(u){return u(l,i.state)}))};de.prototype.dispatch=function(t,n){var s=this,i=vr(t,n),r=i.type,o=i.payload,a={type:r,payload:o},l=this._actions[r];if(l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(a,s.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(o)})):l[0](o);return new Promise(function(u,f){c.then(function(h){try{s._actionSubscribers.filter(function(d){return d.after}).forEach(function(d){return d.after(a,s.state)})}catch{}u(h)},function(h){try{s._actionSubscribers.filter(function(d){return d.error}).forEach(function(d){return d.error(a,s.state,h)})}catch{}f(h)})})}};de.prototype.subscribe=function(t,n){return Lh(t,this._subscribers,n)};de.prototype.subscribeAction=function(t,n){var s=typeof t=="function"?{before:t}:t;return Lh(s,this._actionSubscribers,n)};de.prototype.watch=function(t,n,s){var i=this;return Rn(function(){return t(i.state,i.getters)},n,Object.assign({},s))};de.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};de.prototype.registerModule=function(t,n,s){s===void 0&&(s={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),eo(this,this.state,t,this._modules.get(t),s.preserveState),Ga(this,this.state)};de.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var s=Ya(n.state,t.slice(0,-1));delete s[t[t.length-1]]}),Dh(this)};de.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};de.prototype.hotUpdate=function(t){this._modules.update(t),Dh(this,!0)};de.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(de.prototype,Xa);var no=Uh(function(e,t){var n={};return Vh(t).forEach(function(s){var i=s.key,r=s.val;n[i]=function(){var a=this.$store.state,l=this.$store.getters;if(e){var c=Wh(this.$store,"mapState",e);if(!c)return;a=c.context.state,l=c.context.getters}return typeof r=="function"?r.call(this,a,l):a[r]},n[i].vuex=!0}),n}),so=Uh(function(e,t){var n={};return Vh(t).forEach(function(s){var i=s.key,r=s.val;n[i]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=this.$store.dispatch;if(e){var u=Wh(this.$store,"mapActions",e);if(!u)return;c=u.context.dispatch}return typeof r=="function"?r.apply(this,[c].concat(a)):c.apply(this.$store,[r].concat(a))}}),n});function Vh(e){return g_(e)?Array.isArray(e)?e.map(function(t){return{key:t,val:t}}):Object.keys(e).map(function(t){return{key:t,val:e[t]}}):[]}function g_(e){return Array.isArray(e)||Ih(e)}function Uh(e){return function(t,n){return typeof t!="string"?(n=t,t=""):t.charAt(t.length-1)!=="/"&&(t+="/"),e(t,n)}}function Wh(e,t,n){var s=e._modulesNamespaceMap[n];return s}function qh(e,t){return function(){return e.apply(t,arguments)}}const{toString:m_}=Object.prototype,{getPrototypeOf:Qa}=Object,{iterator:io,toStringTag:Kh}=Symbol,ro=(e=>t=>{const n=m_.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Le=e=>(e=e.toLowerCase(),t=>ro(t)===e),oo=e=>t=>typeof t===e,{isArray:Ss}=Array,bi=oo("undefined");function b_(e){return e!==null&&!bi(e)&&e.constructor!==null&&!bi(e.constructor)&&fe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Gh=Le("ArrayBuffer");function __(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Gh(e.buffer),t}const y_=oo("string"),fe=oo("function"),Yh=oo("number"),ao=e=>e!==null&&typeof e=="object",x_=e=>e===!0||e===!1,rr=e=>{if(ro(e)!=="object")return!1;const t=Qa(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Kh in e)&&!(io in e)},v_=Le("Date"),w_=Le("File"),S_=Le("Blob"),k_=Le("FileList"),R_=e=>ao(e)&&fe(e.pipe),E_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||fe(e.append)&&((t=ro(e))==="formdata"||t==="object"&&fe(e.toString)&&e.toString()==="[object FormData]"))},A_=Le("URLSearchParams"),[T_,C_,O_,P_]=["ReadableStream","Request","Response","Headers"].map(Le),M_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Pi(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,i;if(typeof e!="object"&&(e=[e]),Ss(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(s=0;s<o;s++)a=r[s],t.call(null,e[a],a,e)}}function Xh(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,i;for(;s-- >0;)if(i=n[s],t===i.toLowerCase())return i;return null}const Hn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Qh=e=>!bi(e)&&e!==Hn;function ca(){const{caseless:e}=Qh(this)&&this||{},t={},n=(s,i)=>{const r=e&&Xh(t,i)||i;rr(t[r])&&rr(s)?t[r]=ca(t[r],s):rr(s)?t[r]=ca({},s):Ss(s)?t[r]=s.slice():t[r]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Pi(arguments[s],n);return t}const I_=(e,t,n,{allOwnKeys:s}={})=>(Pi(t,(i,r)=>{n&&fe(i)?e[r]=qh(i,n):e[r]=i},{allOwnKeys:s}),e),L_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),D_=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},$_=(e,t,n,s)=>{let i,r,o;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)o=i[r],(!s||s(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&Qa(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},N_=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},F_=e=>{if(!e)return null;if(Ss(e))return e;let t=e.length;if(!Yh(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},B_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Qa(Uint8Array)),z_=(e,t)=>{const s=(e&&e[io]).call(e);let i;for(;(i=s.next())&&!i.done;){const r=i.value;t.call(e,r[0],r[1])}},H_=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},j_=Le("HTMLFormElement"),V_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),Pc=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),U_=Le("RegExp"),Jh=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Pi(n,(i,r)=>{let o;(o=t(i,r,e))!==!1&&(s[r]=o||i)}),Object.defineProperties(e,s)},W_=e=>{Jh(e,(t,n)=>{if(fe(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(fe(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},q_=(e,t)=>{const n={},s=i=>{i.forEach(r=>{n[r]=!0})};return Ss(e)?s(e):s(String(e).split(t)),n},K_=()=>{},G_=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Y_(e){return!!(e&&fe(e.append)&&e[Kh]==="FormData"&&e[io])}const X_=e=>{const t=new Array(10),n=(s,i)=>{if(ao(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[i]=s;const r=Ss(s)?[]:{};return Pi(s,(o,a)=>{const l=n(o,i+1);!bi(l)&&(r[a]=l)}),t[i]=void 0,r}}return s};return n(e,0)},Q_=Le("AsyncFunction"),J_=e=>e&&(ao(e)||fe(e))&&fe(e.then)&&fe(e.catch),Zh=((e,t)=>e?setImmediate:t?((n,s)=>(Hn.addEventListener("message",({source:i,data:r})=>{i===Hn&&r===n&&s.length&&s.shift()()},!1),i=>{s.push(i),Hn.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",fe(Hn.postMessage)),Z_=typeof queueMicrotask<"u"?queueMicrotask.bind(Hn):typeof process<"u"&&process.nextTick||Zh,ty=e=>e!=null&&fe(e[io]),R={isArray:Ss,isArrayBuffer:Gh,isBuffer:b_,isFormData:E_,isArrayBufferView:__,isString:y_,isNumber:Yh,isBoolean:x_,isObject:ao,isPlainObject:rr,isReadableStream:T_,isRequest:C_,isResponse:O_,isHeaders:P_,isUndefined:bi,isDate:v_,isFile:w_,isBlob:S_,isRegExp:U_,isFunction:fe,isStream:R_,isURLSearchParams:A_,isTypedArray:B_,isFileList:k_,forEach:Pi,merge:ca,extend:I_,trim:M_,stripBOM:L_,inherits:D_,toFlatObject:$_,kindOf:ro,kindOfTest:Le,endsWith:N_,toArray:F_,forEachEntry:z_,matchAll:H_,isHTMLForm:j_,hasOwnProperty:Pc,hasOwnProp:Pc,reduceDescriptors:Jh,freezeMethods:W_,toObjectSet:q_,toCamelCase:V_,noop:K_,toFiniteNumber:G_,findKey:Xh,global:Hn,isContextDefined:Qh,isSpecCompliantForm:Y_,toJSONObject:X_,isAsyncFn:Q_,isThenable:J_,setImmediate:Zh,asap:Z_,isIterable:ty};function at(e,t,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}R.inherits(at,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.status}}});const td=at.prototype,ed={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ed[e]={value:e}});Object.defineProperties(at,ed);Object.defineProperty(td,"isAxiosError",{value:!0});at.from=(e,t,n,s,i,r)=>{const o=Object.create(td);return R.toFlatObject(e,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),at.call(o,e.message,t,n,s,i),o.cause=e,o.name=e.name,r&&Object.assign(o,r),o};const ey=null;function ua(e){return R.isPlainObject(e)||R.isArray(e)}function nd(e){return R.endsWith(e,"[]")?e.slice(0,-2):e}function Mc(e,t,n){return e?e.concat(t).map(function(i,r){return i=nd(i),!n&&r?"["+i+"]":i}).join(n?".":""):t}function ny(e){return R.isArray(e)&&!e.some(ua)}const sy=R.toFlatObject(R,{},null,function(t){return/^is[A-Z]/.test(t)});function lo(e,t,n){if(!R.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=R.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,b){return!R.isUndefined(b[m])});const s=n.metaTokens,i=n.visitor||u,r=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(t);if(!R.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(R.isDate(g))return g.toISOString();if(!l&&R.isBlob(g))throw new at("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(g)||R.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,m,b){let x=g;if(g&&!b&&typeof g=="object"){if(R.endsWith(m,"{}"))m=s?m:m.slice(0,-2),g=JSON.stringify(g);else if(R.isArray(g)&&ny(g)||(R.isFileList(g)||R.endsWith(m,"[]"))&&(x=R.toArray(g)))return m=nd(m),x.forEach(function(S,k){!(R.isUndefined(S)||S===null)&&t.append(o===!0?Mc([m],k,r):o===null?m:m+"[]",c(S))}),!1}return ua(g)?!0:(t.append(Mc(b,m,r),c(g)),!1)}const f=[],h=Object.assign(sy,{defaultVisitor:u,convertValue:c,isVisitable:ua});function d(g,m){if(!R.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(g),R.forEach(g,function(x,v){(!(R.isUndefined(x)||x===null)&&i.call(t,x,R.isString(v)?v.trim():v,m,h))===!0&&d(x,m?m.concat(v):[v])}),f.pop()}}if(!R.isObject(e))throw new TypeError("data must be an object");return d(e),t}function Ic(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Ja(e,t){this._pairs=[],e&&lo(e,this,t)}const sd=Ja.prototype;sd.append=function(t,n){this._pairs.push([t,n])};sd.toString=function(t){const n=t?function(s){return t.call(this,s,Ic)}:Ic;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function iy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function id(e,t,n){if(!t)return e;const s=n&&n.encode||iy;R.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let r;if(i?r=i(t,n):r=R.isURLSearchParams(t)?t.toString():new Ja(t,n).toString(s),r){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class Lc{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){R.forEach(this.handlers,function(s){s!==null&&t(s)})}}const rd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ry=typeof URLSearchParams<"u"?URLSearchParams:Ja,oy=typeof FormData<"u"?FormData:null,ay=typeof Blob<"u"?Blob:null,ly={isBrowser:!0,classes:{URLSearchParams:ry,FormData:oy,Blob:ay},protocols:["http","https","file","blob","url","data"]},Za=typeof window<"u"&&typeof document<"u",fa=typeof navigator=="object"&&navigator||void 0,cy=Za&&(!fa||["ReactNative","NativeScript","NS"].indexOf(fa.product)<0),uy=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fy=Za&&window.location.href||"http://localhost",hy=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Za,hasStandardBrowserEnv:cy,hasStandardBrowserWebWorkerEnv:uy,navigator:fa,origin:fy},Symbol.toStringTag,{value:"Module"})),Gt={...hy,...ly};function dy(e,t){return lo(e,new Gt.classes.URLSearchParams,Object.assign({visitor:function(n,s,i,r){return Gt.isNode&&R.isBuffer(n)?(this.append(s,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function py(e){return R.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function gy(e){const t={},n=Object.keys(e);let s;const i=n.length;let r;for(s=0;s<i;s++)r=n[s],t[r]=e[r];return t}function od(e){function t(n,s,i,r){let o=n[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=n.length;return o=!o&&R.isArray(i)?i.length:o,l?(R.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!a):((!i[o]||!R.isObject(i[o]))&&(i[o]=[]),t(n,s,i[o],r)&&R.isArray(i[o])&&(i[o]=gy(i[o])),!a)}if(R.isFormData(e)&&R.isFunction(e.entries)){const n={};return R.forEachEntry(e,(s,i)=>{t(py(s),i,n,0)}),n}return null}function my(e,t,n){if(R.isString(e))try{return(t||JSON.parse)(e),R.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Mi={transitional:rd,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,r=R.isObject(t);if(r&&R.isHTMLForm(t)&&(t=new FormData(t)),R.isFormData(t))return i?JSON.stringify(od(t)):t;if(R.isArrayBuffer(t)||R.isBuffer(t)||R.isStream(t)||R.isFile(t)||R.isBlob(t)||R.isReadableStream(t))return t;if(R.isArrayBufferView(t))return t.buffer;if(R.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return dy(t,this.formSerializer).toString();if((a=R.isFileList(t))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return lo(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return r||i?(n.setContentType("application/json",!1),my(t)):t}],transformResponse:[function(t){const n=this.transitional||Mi.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(R.isResponse(t)||R.isReadableStream(t))return t;if(t&&R.isString(t)&&(s&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?at.from(a,at.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],e=>{Mi.headers[e]={}});const by=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_y=e=>{const t={};let n,s,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!n||t[n]&&by[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},Dc=Symbol("internals");function Ms(e){return e&&String(e).trim().toLowerCase()}function or(e){return e===!1||e==null?e:R.isArray(e)?e.map(or):String(e)}function yy(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const xy=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Lo(e,t,n,s,i){if(R.isFunction(s))return s.call(this,t,n);if(i&&(t=n),!!R.isString(t)){if(R.isString(s))return t.indexOf(s)!==-1;if(R.isRegExp(s))return s.test(t)}}function vy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function wy(e,t){const n=R.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(i,r,o){return this[s].call(this,t,i,r,o)},configurable:!0})})}let he=class{constructor(t){t&&this.set(t)}set(t,n,s){const i=this;function r(a,l,c){const u=Ms(l);if(!u)throw new Error("header name must be a non-empty string");const f=R.findKey(i,u);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=or(a))}const o=(a,l)=>R.forEach(a,(c,u)=>r(c,u,l));if(R.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(R.isString(t)&&(t=t.trim())&&!xy(t))o(_y(t),n);else if(R.isObject(t)&&R.isIterable(t)){let a={},l,c;for(const u of t){if(!R.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?R.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,n)}else t!=null&&r(n,t,s);return this}get(t,n){if(t=Ms(t),t){const s=R.findKey(this,t);if(s){const i=this[s];if(!n)return i;if(n===!0)return yy(i);if(R.isFunction(n))return n.call(this,i,s);if(R.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ms(t),t){const s=R.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||Lo(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let i=!1;function r(o){if(o=Ms(o),o){const a=R.findKey(s,o);a&&(!n||Lo(s,s[a],a,n))&&(delete s[a],i=!0)}}return R.isArray(t)?t.forEach(r):r(t),i}clear(t){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const r=n[s];(!t||Lo(this,this[r],r,t,!0))&&(delete this[r],i=!0)}return i}normalize(t){const n=this,s={};return R.forEach(this,(i,r)=>{const o=R.findKey(s,r);if(o){n[o]=or(i),delete n[r];return}const a=t?vy(r):String(r).trim();a!==r&&delete n[r],n[a]=or(i),s[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return R.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=t&&R.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(i=>s.set(i)),s}static accessor(t){const s=(this[Dc]=this[Dc]={accessors:{}}).accessors,i=this.prototype;function r(o){const a=Ms(o);s[a]||(wy(i,o),s[a]=!0)}return R.isArray(t)?t.forEach(r):r(t),this}};he.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(he.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});R.freezeMethods(he);function Do(e,t){const n=this||Mi,s=t||n,i=he.from(s.headers);let r=s.data;return R.forEach(e,function(a){r=a.call(n,r,i.normalize(),t?t.status:void 0)}),i.normalize(),r}function ad(e){return!!(e&&e.__CANCEL__)}function ks(e,t,n){at.call(this,e??"canceled",at.ERR_CANCELED,t,n),this.name="CanceledError"}R.inherits(ks,at,{__CANCEL__:!0});function ld(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new at("Request failed with status code "+n.status,[at.ERR_BAD_REQUEST,at.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Sy(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ky(e,t){e=e||10;const n=new Array(e),s=new Array(e);let i=0,r=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=s[r];o||(o=c),n[i]=l,s[i]=c;let f=r,h=0;for(;f!==i;)h+=n[f++],f=f%e;if(i=(i+1)%e,i===r&&(r=(r+1)%e),c-o<t)return;const d=u&&c-u;return d?Math.round(h*1e3/d):void 0}}function Ry(e,t){let n=0,s=1e3/t,i,r;const o=(c,u=Date.now())=>{n=u,i=null,r&&(clearTimeout(r),r=null),e.apply(null,c)};return[(...c)=>{const u=Date.now(),f=u-n;f>=s?o(c,u):(i=c,r||(r=setTimeout(()=>{r=null,o(i)},s-f)))},()=>i&&o(i)]}const wr=(e,t,n=3)=>{let s=0;const i=ky(50,250);return Ry(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-s,c=i(l),u=o<=a;s=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},n)},$c=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},Nc=e=>(...t)=>R.asap(()=>e(...t)),Ey=Gt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Gt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,Ay=Gt.hasStandardBrowserEnv?{write(e,t,n,s,i,r){const o=[e+"="+encodeURIComponent(t)];R.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),R.isString(s)&&o.push("path="+s),R.isString(i)&&o.push("domain="+i),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ty(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Cy(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function cd(e,t,n){let s=!Ty(t);return e&&(s||n==!1)?Cy(e,t):t}const Fc=e=>e instanceof he?{...e}:e;function Kn(e,t){t=t||{};const n={};function s(c,u,f,h){return R.isPlainObject(c)&&R.isPlainObject(u)?R.merge.call({caseless:h},c,u):R.isPlainObject(u)?R.merge({},u):R.isArray(u)?u.slice():u}function i(c,u,f,h){if(R.isUndefined(u)){if(!R.isUndefined(c))return s(void 0,c,f,h)}else return s(c,u,f,h)}function r(c,u){if(!R.isUndefined(u))return s(void 0,u)}function o(c,u){if(R.isUndefined(u)){if(!R.isUndefined(c))return s(void 0,c)}else return s(void 0,u)}function a(c,u,f){if(f in t)return s(c,u);if(f in e)return s(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,f)=>i(Fc(c),Fc(u),f,!0)};return R.forEach(Object.keys(Object.assign({},e,t)),function(u){const f=l[u]||i,h=f(e[u],t[u],u);R.isUndefined(h)&&f!==a||(n[u]=h)}),n}const ud=e=>{const t=Kn({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:a}=t;t.headers=o=he.from(o),t.url=id(cd(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(R.isFormData(n)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Gt.hasStandardBrowserEnv&&(s&&R.isFunction(s)&&(s=s(t)),s||s!==!1&&Ey(t.url))){const c=i&&r&&Ay.read(r);c&&o.set(i,c)}return t},Oy=typeof XMLHttpRequest<"u",Py=Oy&&function(e){return new Promise(function(n,s){const i=ud(e);let r=i.data;const o=he.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,f,h,d,g;function m(){d&&d(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function x(){if(!b)return;const S=he.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),C={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:S,config:e,request:b};ld(function(P){n(P),m()},function(P){s(P),m()},C),b=null}"onloadend"in b?b.onloadend=x:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(x)},b.onabort=function(){b&&(s(new at("Request aborted",at.ECONNABORTED,e,b)),b=null)},b.onerror=function(){s(new at("Network Error",at.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let k=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const C=i.transitional||rd;i.timeoutErrorMessage&&(k=i.timeoutErrorMessage),s(new at(k,C.clarifyTimeoutError?at.ETIMEDOUT:at.ECONNABORTED,e,b)),b=null},r===void 0&&o.setContentType(null),"setRequestHeader"in b&&R.forEach(o.toJSON(),function(k,C){b.setRequestHeader(C,k)}),R.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),a&&a!=="json"&&(b.responseType=i.responseType),c&&([h,g]=wr(c,!0),b.addEventListener("progress",h)),l&&b.upload&&([f,d]=wr(l),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",d)),(i.cancelToken||i.signal)&&(u=S=>{b&&(s(!S||S.type?new ks(null,e,b):S),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const v=Sy(i.url);if(v&&Gt.protocols.indexOf(v)===-1){s(new at("Unsupported protocol "+v+":",at.ERR_BAD_REQUEST,e));return}b.send(r||null)})},My=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,i;const r=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;s.abort(u instanceof at?u:new ks(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,r(new at(`timeout ${t} of ms exceeded`,at.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),e=null)};e.forEach(c=>c.addEventListener("abort",r));const{signal:l}=s;return l.unsubscribe=()=>R.asap(a),l}},Iy=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,i;for(;s<n;)i=s+t,yield e.slice(s,i),s=i},Ly=async function*(e,t){for await(const n of Dy(e))yield*Iy(n,t)},Dy=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},Bc=(e,t,n,s)=>{const i=Ly(e,t);let r=0,o,a=l=>{o||(o=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let f=u.byteLength;if(n){let h=r+=f;n(h)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},co=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fd=co&&typeof ReadableStream=="function",$y=co&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),hd=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Ny=fd&&hd(()=>{let e=!1;const t=new Request(Gt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),zc=64*1024,ha=fd&&hd(()=>R.isReadableStream(new Response("").body)),Sr={stream:ha&&(e=>e.body)};co&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Sr[t]&&(Sr[t]=R.isFunction(e[t])?n=>n[t]():(n,s)=>{throw new at(`Response type '${t}' is not supported`,at.ERR_NOT_SUPPORT,s)})})})(new Response);const Fy=async e=>{if(e==null)return 0;if(R.isBlob(e))return e.size;if(R.isSpecCompliantForm(e))return(await new Request(Gt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(R.isArrayBufferView(e)||R.isArrayBuffer(e))return e.byteLength;if(R.isURLSearchParams(e)&&(e=e+""),R.isString(e))return(await $y(e)).byteLength},By=async(e,t)=>{const n=R.toFiniteNumber(e.getContentLength());return n??Fy(t)},zy=co&&(async e=>{let{url:t,method:n,data:s,signal:i,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:f="same-origin",fetchOptions:h}=ud(e);c=c?(c+"").toLowerCase():"text";let d=My([i,r&&r.toAbortSignal()],o),g;const m=d&&d.unsubscribe&&(()=>{d.unsubscribe()});let b;try{if(l&&Ny&&n!=="get"&&n!=="head"&&(b=await By(u,s))!==0){let C=new Request(t,{method:"POST",body:s,duplex:"half"}),$;if(R.isFormData(s)&&($=C.headers.get("content-type"))&&u.setContentType($),C.body){const[P,D]=$c(b,wr(Nc(l)));s=Bc(C.body,zc,P,D)}}R.isString(f)||(f=f?"include":"omit");const x="credentials"in Request.prototype;g=new Request(t,{...h,signal:d,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:x?f:void 0});let v=await fetch(g);const S=ha&&(c==="stream"||c==="response");if(ha&&(a||S&&m)){const C={};["status","statusText","headers"].forEach(N=>{C[N]=v[N]});const $=R.toFiniteNumber(v.headers.get("content-length")),[P,D]=a&&$c($,wr(Nc(a),!0))||[];v=new Response(Bc(v.body,zc,P,()=>{D&&D(),m&&m()}),C)}c=c||"text";let k=await Sr[R.findKey(Sr,c)||"text"](v,e);return!S&&m&&m(),await new Promise((C,$)=>{ld(C,$,{data:k,headers:he.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:g})})}catch(x){throw m&&m(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new at("Network Error",at.ERR_NETWORK,e,g),{cause:x.cause||x}):at.from(x,x&&x.code,e,g)}}),da={http:ey,xhr:Py,fetch:zy};R.forEach(da,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Hc=e=>`- ${e}`,Hy=e=>R.isFunction(e)||e===null||e===!1,dd={getAdapter:e=>{e=R.isArray(e)?e:[e];const{length:t}=e;let n,s;const i={};for(let r=0;r<t;r++){n=e[r];let o;if(s=n,!Hy(n)&&(s=da[(o=String(n)).toLowerCase()],s===void 0))throw new at(`Unknown adapter '${o}'`);if(s)break;i[o||"#"+r]=s}if(!s){const r=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?r.length>1?`since :
`+r.map(Hc).join(`
`):" "+Hc(r[0]):"as no adapter specified";throw new at("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:da};function $o(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ks(null,e)}function jc(e){return $o(e),e.headers=he.from(e.headers),e.data=Do.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),dd.getAdapter(e.adapter||Mi.adapter)(e).then(function(s){return $o(e),s.data=Do.call(e,e.transformResponse,s),s.headers=he.from(s.headers),s},function(s){return ad(s)||($o(e),s&&s.response&&(s.response.data=Do.call(e,e.transformResponse,s.response),s.response.headers=he.from(s.response.headers))),Promise.reject(s)})}const pd="1.9.0",uo={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{uo[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Vc={};uo.transitional=function(t,n,s){function i(r,o){return"[Axios v"+pd+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,a)=>{if(t===!1)throw new at(i(o," has been removed"+(n?" in "+n:"")),at.ERR_DEPRECATED);return n&&!Vc[o]&&(Vc[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,o,a):!0}};uo.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function jy(e,t,n){if(typeof e!="object")throw new at("options must be an object",at.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const r=s[i],o=t[r];if(o){const a=e[r],l=a===void 0||o(a,r,e);if(l!==!0)throw new at("option "+r+" must be "+l,at.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new at("Unknown option "+r,at.ERR_BAD_OPTION)}}const ar={assertOptions:jy,validators:uo},ze=ar.validators;let Un=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Lc,response:new Lc}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Kn(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:r}=n;s!==void 0&&ar.assertOptions(s,{silentJSONParsing:ze.transitional(ze.boolean),forcedJSONParsing:ze.transitional(ze.boolean),clarifyTimeoutError:ze.transitional(ze.boolean)},!1),i!=null&&(R.isFunction(i)?n.paramsSerializer={serialize:i}:ar.assertOptions(i,{encode:ze.function,serialize:ze.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ar.assertOptions(n,{baseUrl:ze.spelling("baseURL"),withXsrfToken:ze.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=r&&R.merge(r.common,r[n.method]);r&&R.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),n.headers=he.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,f=0,h;if(!l){const g=[jc.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),h=g.length,u=Promise.resolve(n);f<h;)u=u.then(g[f++],g[f++]);return u}h=a.length;let d=n;for(f=0;f<h;){const g=a[f++],m=a[f++];try{d=g(d)}catch(b){m.call(this,b);break}}try{u=jc.call(this,d)}catch(g){return Promise.reject(g)}for(f=0,h=c.length;f<h;)u=u.then(c[f++],c[f++]);return u}getUri(t){t=Kn(this.defaults,t);const n=cd(t.baseURL,t.url,t.allowAbsoluteUrls);return id(n,t.params,t.paramsSerializer)}};R.forEach(["delete","get","head","options"],function(t){Un.prototype[t]=function(n,s){return this.request(Kn(s||{},{method:t,url:n,data:(s||{}).data}))}});R.forEach(["post","put","patch"],function(t){function n(s){return function(r,o,a){return this.request(Kn(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Un.prototype[t]=n(),Un.prototype[t+"Form"]=n(!0)});let Vy=class gd{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(a=>{s.subscribe(a),r=a}).then(i);return o.cancel=function(){s.unsubscribe(r)},o},t(function(r,o,a){s.reason||(s.reason=new ks(r,o,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new gd(function(i){t=i}),cancel:t}}};function Uy(e){return function(n){return e.apply(null,n)}}function Wy(e){return R.isObject(e)&&e.isAxiosError===!0}const pa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pa).forEach(([e,t])=>{pa[t]=e});function md(e){const t=new Un(e),n=qh(Un.prototype.request,t);return R.extend(n,Un.prototype,t,{allOwnKeys:!0}),R.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return md(Kn(e,i))},n}const Ot=md(Mi);Ot.Axios=Un;Ot.CanceledError=ks;Ot.CancelToken=Vy;Ot.isCancel=ad;Ot.VERSION=pd;Ot.toFormData=lo;Ot.AxiosError=at;Ot.Cancel=Ot.CanceledError;Ot.all=function(t){return Promise.all(t)};Ot.spread=Uy;Ot.isAxiosError=Wy;Ot.mergeConfig=Kn;Ot.AxiosHeaders=he;Ot.formToJSON=e=>od(R.isHTMLForm(e)?new FormData(e):e);Ot.getAdapter=dd.getAdapter;Ot.HttpStatusCode=pa;Ot.default=Ot;const{Axios:$R,AxiosError:NR,CanceledError:FR,isCancel:BR,CancelToken:zR,VERSION:HR,all:jR,Cancel:VR,isAxiosError:UR,spread:WR,toFormData:qR,AxiosHeaders:KR,HttpStatusCode:GR,formToJSON:YR,getAdapter:XR,mergeConfig:QR}=Ot,ga=Ot.create({baseURL:"/",timeout:12e4});ga.interceptors.request.use(e=>{const t=localStorage.getItem("admin_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));const Se=Ot.create({baseURL:"/api/v1/admin",timeout:12e4});Se.interceptors.request.use(e=>{const t=localStorage.getItem("admin_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));const ae={auth:{login(e,t){const n=new URLSearchParams;return n.append("username",e),n.append("password",t),Ot.post("/api/v1/auth/token",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getCurrentUser(){return ga.get("/api/v1/users/me")}},users:{getUsers(e=0,t=100){return Se.get("/users",{params:{skip:e,limit:t}})},updateUser(e,t){return Se.patch(`/users/${e}`,t)}},stats:{getDemographicsStats(){return Se.get("/stats/demographics")},getAIAnalysis(e){return Se.post("/stats/ai-analysis",{demographics:e})}},assessments:{search(e=null){const t={};return e&&(t.id_card=e),Se.get("/assessments/search",{params:t})},getById(e){return ga.get(`/api/v1/reports/${e}`)}},guidance:{getGuidance(e,t){return Se.get(`/guidance/${e}`,{params:{id_card:t}})}},interrogation:{getList({skip:e=0,limit:t=10}){return Se.get("/interrogations",{params:{skip:e,limit:t}})},getById(e){return Se.get(`/interrogations/${e}`)},start(e){return Se.post("/interrogation/start",e)},suggestQuestion(e,t){const n=t.map(s=>({q:s.q,a:s.a}));return Se.post(`/interrogation/${e}/suggest`,n)},save(e,t){return Se.put(`/interrogation/${e}`,t)}}},bd=p_({state:{token:localStorage.getItem("admin_token")||null,user:null,users:[],totalUsers:0,assessments:[],stats:null,currentGuidance:null,currentReport:null,interrogationRecord:null,interrogationList:{records:[],total:0},loading:!1,error:null},getters:{isAuthenticated:e=>!!e.token,currentUser:e=>e.user},mutations:{SET_TOKEN(e,t){e.token=t,t?localStorage.setItem("admin_token",t):localStorage.removeItem("admin_token")},SET_USER(e,t){e.user=t},SET_USERS(e,{users:t,total:n}){e.users=t,e.totalUsers=n},SET_ASSESSMENTS(e,t){e.assessments=t},SET_STATS(e,t){e.stats=t},SET_CURRENT_GUIDANCE(e,t){e.currentGuidance=t},SET_CURRENT_REPORT(e,t){e.currentReport=t},SET_INTERROGATION_RECORD(e,t){e.interrogationRecord=t},SET_INTERROGATION_LIST(e,{records:t,total:n}){e.interrogationList.records=t,e.interrogationList.total=n},UPDATE_INTERROGATION_QA(e,t){e.interrogationRecord&&(e.interrogationRecord.qas=t)},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},CLEAR_ERROR(e){e.error=null}},actions:{async login({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:i}=await ae.auth.login(t.username,t.password);e("SET_TOKEN",i.access_token);const r=await ae.auth.getCurrentUser();if(!r.data.is_superuser)throw new Error("您不是管理员，无法登录后台系统。");e("SET_USER",r.data),Nr.push({name:"Dashboard"})}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||i.message||"登录失败";throw e("SET_ERROR",r),e("SET_TOKEN",null),e("SET_USER",null),i}finally{e("SET_LOADING",!1)}},logout({commit:e}){e("SET_TOKEN",null),e("SET_USER",null),Nr.push({name:"Login"})},async fetchUsers({commit:e},{skip:t,limit:n}){e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:s}=await ae.users.getUsers(t,n);e("SET_USERS",{users:s.users,total:s.total})}catch{e("SET_ERROR","获取用户列表失败")}finally{e("SET_LOADING",!1)}},async updateUserStatus({commit:e},{userId:t,isActive:n}){var s,i;try{await ae.users.updateUser(t,{is_active:n})}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"更新用户状态失败";throw e("SET_ERROR",o),new Error(o)}},async fetchStats({commit:e}){e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:t}=await ae.stats.getDemographicsStats();e("SET_STATS",t)}catch{e("SET_ERROR","获取统计数据失败")}finally{e("SET_LOADING",!1)}},async searchAssessments({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR"),e("SET_ASSESSMENTS",[]);try{const{data:i}=await ae.assessments.search(t);e("SET_ASSESSMENTS",i)}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||"搜索评估记录失败";e("SET_ERROR",r)}finally{e("SET_LOADING",!1)}},async fetchGuidance({commit:e},{scenario:t,idCard:n}){var s,i;e("SET_LOADING",!0),e("CLEAR_ERROR"),e("SET_CURRENT_GUIDANCE",null);try{const{data:r}=await ae.guidance.getGuidance(t,n);e("SET_CURRENT_GUIDANCE",r)}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"获取指导方案失败";throw e("SET_ERROR",o),new Error(o)}finally{e("SET_LOADING",!1)}},async fetchReportById({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR"),e("SET_CURRENT_REPORT",null);try{const{data:i}=await ae.assessments.getById(t);if(i&&i.report)e("SET_CURRENT_REPORT",i.report);else throw i&&i.message?new Error(i.message):new Error("获取报告时返回了无效的数据格式")}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||i.message||"获取报告详情失败";e("SET_ERROR",r)}finally{e("SET_LOADING",!1)}},async startInterrogation({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:i}=await ae.interrogation.start(t);return e("SET_INTERROGATION_RECORD",i),i}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||"开始新的审讯失败";throw e("SET_ERROR",r),new Error(r)}finally{e("SET_LOADING",!1)}},async suggestQuestion({commit:e},{recordId:t,currentQAs:n}){var s,i;try{const{data:r}=await ae.interrogation.suggestQuestion(t,n);return r}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"获取AI建议失败";throw e("SET_ERROR",o),new Error(o)}},async saveInterrogation({commit:e},{recordId:t,updateData:n}){var s,i;if(!t)throw new Error("没有可保存的审讯记录ID");e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:r}=await ae.interrogation.save(t,n);return e("SET_INTERROGATION_RECORD",r),r}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"保存审讯笔录失败";throw e("SET_ERROR",o),new Error(o)}finally{e("SET_LOADING",!1)}},async fetchInterrogationRecordById({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR"),e("SET_INTERROGATION_RECORD",null);try{const{data:i}=await ae.interrogation.getById(t);return e("SET_INTERROGATION_RECORD",i),i}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||`获取审讯记录(ID: ${t})失败`;throw e("SET_ERROR",r),new Error(r)}finally{e("SET_LOADING",!1)}},async fetchInterrogationList({commit:e},{skip:t,limit:n}){var s,i;e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:r}=await ae.interrogation.getList({skip:t,limit:n});e("SET_INTERROGATION_LIST",{records:r.records,total:r.total})}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"获取审讯记录列表失败";e("SET_ERROR",o),e("SET_INTERROGATION_LIST",{records:[],total:0})}finally{e("SET_LOADING",!1)}}}}),qy={class:"sidebar",style:{width:"250px"}},Ky={class:"sidebar-nav"},Gy={class:"submenu"},Yy={__name:"SideBar",setup(e){const t=vs();to();const n=Ph(),s=vt(!1),i=()=>{s.value=!s.value};Rn(n,o=>{o.path.startsWith("/interrogation")&&(s.value=!0)},{immediate:!0});const r=()=>{t.dispatch("logout")};return(o,a)=>{const l=ja("router-link");return L(),B("aside",qy,[a[11]||(a[11]=p("div",{class:"sidebar-header"},[p("i",{class:"fas fa-brain logo-icon"}),p("h1",null,"倾听者后台")],-1)),p("nav",Ky,[p("ul",null,[p("li",null,[ut(l,{to:"/","exact-active-class":"active"},{default:be(()=>a[0]||(a[0]=[p("i",{class:"fas fa-chart-pie"},null,-1),p("span",null,"数据分析",-1)])),_:1,__:[0]})]),p("li",null,[ut(l,{to:"/assessment-search","active-class":"active"},{default:be(()=>a[1]||(a[1]=[p("i",{class:"fas fa-search"},null,-1),p("span",null,"评估查询",-1)])),_:1,__:[1]})]),p("li",null,[ut(l,{to:"/user-management","active-class":"active"},{default:be(()=>a[2]||(a[2]=[p("i",{class:"fas fa-users"},null,-1),p("span",null,"用户管理",-1)])),_:1,__:[2]})]),p("li",null,[ut(l,{to:"/petitioner-guidance","active-class":"active"},{default:be(()=>a[3]||(a[3]=[p("i",{class:"fas fa-hand-holding-heart"},null,-1),p("span",null,"上访户情绪疏导",-1)])),_:1,__:[3]})]),p("li",null,[ut(l,{to:"/juvenile-counseling","active-class":"active"},{default:be(()=>a[4]||(a[4]=[p("i",{class:"fas fa-child"},null,-1),p("span",null,"未成年人心理辅导",-1)])),_:1,__:[4]})]),p("li",null,[ut(l,{to:"/police-adjustment","active-class":"active"},{default:be(()=>a[5]||(a[5]=[p("i",{class:"fas fa-shield-alt"},null,-1),p("span",null,"民辅警心理调适",-1)])),_:1,__:[5]})]),p("li",null,[ut(l,{to:"/law-query","active-class":"active"},{default:be(()=>a[6]||(a[6]=[p("i",{class:"fas fa-balance-scale"},null,-1),p("span",null,"法规查询",-1)])),_:1,__:[6]})]),p("li",{class:Ce(["nav-item-dropdown",{open:s.value}])},[p("a",{onClick:Oi(i,["prevent"])},a[7]||(a[7]=[p("i",{class:"fas fa-gavel"},null,-1),p("span",null,"智能审讯",-1),p("i",{class:"fas fa-chevron-down dropdown-arrow"},null,-1)])),Ft(p("ul",Gy,[p("li",null,[ut(l,{to:"/interrogation/new","active-class":"active"},{default:be(()=>a[8]||(a[8]=[p("i",{class:"fas fa-plus-circle"},null,-1),p("span",null,"新建审讯",-1)])),_:1,__:[8]})]),p("li",null,[ut(l,{to:"/interrogation/list","active-class":"active"},{default:be(()=>a[9]||(a[9]=[p("i",{class:"fas fa-list-alt"},null,-1),p("span",null,"查看记录",-1)])),_:1,__:[9]})])],512),[[gm,s.value]])],2)])]),p("div",{class:"sidebar-footer"},[p("button",{onClick:r,class:"logout-btn"},a[10]||(a[10]=[p("i",{class:"fas fa-sign-out-alt"},null,-1),p("span",null,"退出登录",-1)]))])])}}},Xy=Wt(Yy,[["__scopeId","data-v-a00d75fa"]]),Qy={class:"app-layout"},Jy={__name:"AppLayout",setup(e){const t=vt(250);return(n,s)=>{const i=ja("router-view");return L(),B("div",Qy,[ut(Xy),p("main",{class:"main-content",style:jr({marginLeft:t.value+"px"})},[ut(i,null,{default:be(({Component:r})=>[ut(gh,{name:"fade",mode:"out-in"},{default:be(()=>[(L(),fi(mg(r)))]),_:2},1024)]),_:1})],4)])}}},Zy=Wt(Jy,[["__scopeId","data-v-fb2e6263"]]),t0="/assets/police_emblem-Dmb8xxjE.png",e0={class:"login-container"},n0={class:"login-box"},s0={class:"form-group"},i0={class:"input-wrapper"},r0={class:"form-group"},o0={class:"input-wrapper"},a0={key:0,class:"alert alert-danger"},l0=["disabled"],c0={key:0},u0={key:1},f0={__name:"LoginView",setup(e){const t=vt(""),n=vt(""),s=vs();to();const i=Ct(()=>s.state.loading),r=Ct(()=>s.state.error),o=async()=>{s.commit("CLEAR_ERROR");try{await s.dispatch("login",{username:t.value,password:n.value})}catch(a){console.error("Login failed:",a)}};return(a,l)=>(L(),B("div",e0,[p("div",n0,[l[7]||(l[7]=p("img",{src:t0,alt:"警徽",class:"emblem-image"},null,-1)),l[8]||(l[8]=p("h1",{class:"system-title"},[nt(" “倾听者” "),p("span",{class:"subtitle"},"AI智能警务分析评估应用系统")],-1)),l[9]||(l[9]=p("p",{class:"login-prompt"},"请使用您的凭据登录",-1)),p("form",{onSubmit:Oi(o,["prevent"])},[p("div",s0,[l[3]||(l[3]=p("label",{for:"username"},"用户名",-1)),p("div",i0,[l[2]||(l[2]=p("i",{class:"fas fa-user"},null,-1)),Ft(p("input",{type:"text",id:"username","onUpdate:modelValue":l[0]||(l[0]=c=>t.value=c),required:"",placeholder:"请输入用户名"},null,512),[[te,t.value]])])]),p("div",r0,[l[5]||(l[5]=p("label",{for:"password"},"密码",-1)),p("div",o0,[l[4]||(l[4]=p("i",{class:"fas fa-lock"},null,-1)),Ft(p("input",{type:"password",id:"password","onUpdate:modelValue":l[1]||(l[1]=c=>n.value=c),required:"",placeholder:"请输入密码"},null,512),[[te,n.value]])])]),r.value?(L(),B("div",a0,G(r.value),1)):Tt("",!0),p("button",{type:"submit",class:"btn btn-primary btn-block",disabled:i.value},[i.value?(L(),B("span",c0,l[6]||(l[6]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 登录中...")]))):(L(),B("span",u0,"登 录"))],8,l0)],32)]),l[10]||(l[10]=p("footer",{class:"login-footer"}," 技术支持：倾听者项目组 ",-1))]))}},h0=Wt(f0,[["__scopeId","data-v-47365eb3"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ii(e){return e+.5|0}const wn=(e,t,n)=>Math.max(Math.min(e,n),t);function Hs(e){return wn(Ii(e*2.55),0,255)}function En(e){return wn(Ii(e*255),0,255)}function sn(e){return wn(Ii(e/2.55)/100,0,1)}function Uc(e){return wn(Ii(e*100),0,100)}const we={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ma=[..."0123456789ABCDEF"],d0=e=>ma[e&15],p0=e=>ma[(e&240)>>4]+ma[e&15],zi=e=>(e&240)>>4===(e&15),g0=e=>zi(e.r)&&zi(e.g)&&zi(e.b)&&zi(e.a);function m0(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&we[e[1]]*17,g:255&we[e[2]]*17,b:255&we[e[3]]*17,a:t===5?we[e[4]]*17:255}:(t===7||t===9)&&(n={r:we[e[1]]<<4|we[e[2]],g:we[e[3]]<<4|we[e[4]],b:we[e[5]]<<4|we[e[6]],a:t===9?we[e[7]]<<4|we[e[8]]:255})),n}const b0=(e,t)=>e<255?t(e):"";function _0(e){var t=g0(e)?d0:p0;return e?"#"+t(e.r)+t(e.g)+t(e.b)+b0(e.a,t):void 0}const y0=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _d(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function x0(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function v0(e,t,n){const s=_d(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function w0(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function tl(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=w0(n,s,i,u,r),l=l*60+.5),[l|0,c||0,a]}function el(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(En)}function nl(e,t,n){return el(_d,e,t,n)}function S0(e,t,n){return el(v0,e,t,n)}function k0(e,t,n){return el(x0,e,t,n)}function yd(e){return(e%360+360)%360}function R0(e){const t=y0.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?Hs(+t[5]):En(+t[5]));const i=yd(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=S0(i,r,o):t[1]==="hsv"?s=k0(i,r,o):s=nl(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function E0(e,t){var n=tl(e);n[0]=yd(n[0]+t),n=nl(n),e.r=n[0],e.g=n[1],e.b=n[2]}function A0(e){if(!e)return;const t=tl(e),n=t[0],s=Uc(t[1]),i=Uc(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${sn(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const Wc={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},qc={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function T0(){const e={},t=Object.keys(qc),n=Object.keys(Wc);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,Wc[r]);r=parseInt(qc[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Hi;function C0(e){Hi||(Hi=T0(),Hi.transparent=[0,0,0,0]);const t=Hi[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const O0=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function P0(e){const t=O0.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?Hs(o):wn(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?Hs(s):wn(s,0,255)),i=255&(t[4]?Hs(i):wn(i,0,255)),r=255&(t[6]?Hs(r):wn(r,0,255)),{r:s,g:i,b:r,a:n}}}function M0(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${sn(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const No=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,ns=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function I0(e,t,n){const s=ns(sn(e.r)),i=ns(sn(e.g)),r=ns(sn(e.b));return{r:En(No(s+n*(ns(sn(t.r))-s))),g:En(No(i+n*(ns(sn(t.g))-i))),b:En(No(r+n*(ns(sn(t.b))-r))),a:e.a+n*(t.a-e.a)}}function ji(e,t,n){if(e){let s=tl(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=nl(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function xd(e,t){return e&&Object.assign(t||{},e)}function Kc(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=En(e[3]))):(t=xd(e,{r:0,g:0,b:0,a:1}),t.a=En(t.a)),t}function L0(e){return e.charAt(0)==="r"?P0(e):R0(e)}class _i{constructor(t){if(t instanceof _i)return t;const n=typeof t;let s;n==="object"?s=Kc(t):n==="string"&&(s=m0(t)||C0(t)||L0(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=xd(this._rgb);return t&&(t.a=sn(t.a)),t}set rgb(t){this._rgb=Kc(t)}rgbString(){return this._valid?M0(this._rgb):void 0}hexString(){return this._valid?_0(this._rgb):void 0}hslString(){return this._valid?A0(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=I0(this._rgb,t._rgb,n)),this}clone(){return new _i(this.rgb)}alpha(t){return this._rgb.a=En(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Ii(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return ji(this._rgb,2,t),this}darken(t){return ji(this._rgb,2,-t),this}saturate(t){return ji(this._rgb,1,t),this}desaturate(t){return ji(this._rgb,1,-t),this}rotate(t){return E0(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Je(){}const D0=(()=>{let e=0;return()=>e++})();function Ut(e){return e==null}function Bt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ht(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function hn(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function He(e,t){return hn(e)?e:t}function mt(e,t){return typeof e>"u"?t:e}const $0=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,vd=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function At(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function yt(e,t,n,s){let i,r,o;if(Bt(e))for(r=e.length,i=0;i<r;i++)t.call(n,e[i],i);else if(ht(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function kr(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Rr(e){if(Bt(e))return e.map(Rr);if(ht(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=Rr(e[n[i]]);return t}return e}function wd(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function N0(e,t,n,s){if(!wd(e))return;const i=t[e],r=n[e];ht(i)&&ht(r)?yi(i,r,s):t[e]=Rr(r)}function yi(e,t,n){const s=Bt(t)?t:[t],i=s.length;if(!ht(e))return e;n=n||{};const r=n.merger||N0;let o;for(let a=0;a<i;++a){if(o=s[a],!ht(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],e,o,n)}return e}function ti(e,t){return yi(e,t,{merger:F0})}function F0(e,t,n){if(!wd(e))return;const s=t[e],i=n[e];ht(s)&&ht(i)?ti(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Rr(i))}const Gc={"":e=>e,x:e=>e.x,y:e=>e.y};function B0(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function z0(e){const t=B0(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function xi(e,t){return(Gc[t]||(Gc[t]=z0(t)))(e)}function sl(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Er=e=>typeof e<"u",Cn=e=>typeof e=="function",Yc=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function H0(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const $t=Math.PI,Dt=2*$t,Ar=Number.POSITIVE_INFINITY,j0=$t/180,Nt=$t/2,Ln=$t/4,Xc=$t*2/3,Qc=Math.sign;function V0(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function U0(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Tr(e){return!U0(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function jn(e){return e*($t/180)}function W0(e){return e*(180/$t)}function Sd(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*$t&&(r+=Dt),{angle:r,distance:i}}function q0(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Dn(e){return(e%Dt+Dt)%Dt}function Cr(e,t,n,s){const i=Dn(e),r=Dn(t),o=Dn(n),a=Dn(r-i),l=Dn(o-i),c=Dn(i-r),u=Dn(i-o);return i===r||i===o||s&&r===o||a>l&&c<u}function ye(e,t,n){return Math.max(t,Math.min(n,e))}function K0(e){return ye(e,-32768,32767)}function js(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function il(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const ba=(e,t,n,s)=>il(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),G0=(e,t,n)=>il(e,n,s=>e[s][t]>=n);function Y0(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const kd=["push","pop","shift","splice","unshift"];function X0(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),kd.forEach(n=>{const s="_onData"+sl(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function Jc(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(kd.forEach(r=>{delete e[r]}),delete e._chartjs)}function Q0(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Rd=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Ed(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,Rd.call(window,()=>{s=!1,e.apply(t,n)}))}}function J0(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const rl=e=>e==="start"?"left":e==="end"?"right":"center",qt=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,Z0=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t,Vi=e=>e===0||e===1,Zc=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Dt/n)),tu=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Dt/n)+1,ei={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Nt)+1,easeOutSine:e=>Math.sin(e*Nt),easeInOutSine:e=>-.5*(Math.cos($t*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Vi(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Vi(e)?e:Zc(e,.075,.3),easeOutElastic:e=>Vi(e)?e:tu(e,.075,.3),easeInOutElastic(e){return Vi(e)?e:e<.5?.5*Zc(e*2,.1125,.45):.5+.5*tu(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-ei.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?ei.easeInBounce(e*2)*.5:ei.easeOutBounce(e*2-1)*.5+.5};function Ad(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function eu(e){return Ad(e)?e:new _i(e)}function Fo(e){return Ad(e)?e:new _i(e).saturate(.5).darken(.1).hexString()}const tx=["x","y","borderWidth","radius","tension"],ex=["color","borderColor","backgroundColor"];function nx(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:ex},numbers:{type:"number",properties:tx}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function sx(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const nu=new Map;function ix(e,t){t=t||{};const n=e+JSON.stringify(t);let s=nu.get(n);return s||(s=new Intl.NumberFormat(e,t),nu.set(n,s)),s}function rx(e,t,n){return ix(t,n).format(e)}const ox={values(e){return Bt(e)?e:""+e}};var ax={formatters:ox};function lx(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ax.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Gn=Object.create(null),_a=Object.create(null);function ni(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function Bo(e,t,n){return typeof t=="string"?yi(ni(e,t),n):yi(ni(e,""),t)}class cx{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Fo(i.backgroundColor),this.hoverBorderColor=(s,i)=>Fo(i.borderColor),this.hoverColor=(s,i)=>Fo(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Bo(this,t,n)}get(t){return ni(this,t)}describe(t,n){return Bo(_a,t,n)}override(t,n){return Bo(Gn,t,n)}route(t,n,s,i){const r=ni(this,t),o=ni(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return ht(l)?Object.assign({},c,l):mt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var It=new cx({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[nx,sx,lx]);function ux(e){return!e||Ut(e.size)||Ut(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function su(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function $n(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function iu(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function ru(e,t,n,s){Td(e,t,n,s,null)}function Td(e,t,n,s,i){let r,o,a,l,c,u,f,h;const d=t.pointStyle,g=t.rotation,m=t.radius;let b=(g||0)*j0;if(d&&typeof d=="object"&&(r=d.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(b),e.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),e.restore();return}if(!(isNaN(m)||m<=0)){switch(e.beginPath(),d){default:i?e.ellipse(n,s,i/2,m,0,0,Dt):e.arc(n,s,m,0,Dt),e.closePath();break;case"triangle":u=i?i/2:m,e.moveTo(n+Math.sin(b)*u,s-Math.cos(b)*m),b+=Xc,e.lineTo(n+Math.sin(b)*u,s-Math.cos(b)*m),b+=Xc,e.lineTo(n+Math.sin(b)*u,s-Math.cos(b)*m),e.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(b+Ln)*l,f=Math.cos(b+Ln)*(i?i/2-c:l),a=Math.sin(b+Ln)*l,h=Math.sin(b+Ln)*(i?i/2-c:l),e.arc(n-f,s-a,c,b-$t,b-Nt),e.arc(n+h,s-o,c,b-Nt,b),e.arc(n+f,s+a,c,b,b+Nt),e.arc(n-h,s+o,c,b+Nt,b+$t),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,u=i?i/2:l,e.rect(n-u,s-l,2*u,2*l);break}b+=Ln;case"rectRot":f=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,h=Math.sin(b)*(i?i/2:m),e.moveTo(n-f,s-a),e.lineTo(n+h,s-o),e.lineTo(n+f,s+a),e.lineTo(n-h,s+o),e.closePath();break;case"crossRot":b+=Ln;case"cross":f=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,h=Math.sin(b)*(i?i/2:m),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+h,s-o),e.lineTo(n-h,s+o);break;case"star":f=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,h=Math.sin(b)*(i?i/2:m),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+h,s-o),e.lineTo(n-h,s+o),b+=Ln,f=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,h=Math.sin(b)*(i?i/2:m),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+h,s-o),e.lineTo(n-h,s+o);break;case"line":o=i?i/2:Math.cos(b)*m,a=Math.sin(b)*m,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(b)*(i?i/2:m),s+Math.sin(b)*m);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Cd(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function ol(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function al(e){e.restore()}function fx(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ut(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function hx(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function dx(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function vi(e,t,n,s,i,r={}){const o=Bt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,fx(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&dx(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),Ut(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,n,s,r.maxWidth)),e.fillText(c,n,s,r.maxWidth),hx(e,n,s,c,r),s+=Number(i.lineHeight);e.restore()}function ya(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*$t,$t,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,$t,Nt,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,Nt,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-Nt,!0),e.lineTo(n+o.topLeft,s)}const px=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,gx=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function mx(e,t){const n=(""+e).match(px);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const bx=e=>+e||0;function ll(e,t){const n={},s=ht(t),i=s?Object.keys(t):t,r=ht(e)?s?o=>mt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=bx(r(o));return n}function _x(e){return ll(e,{top:"y",right:"x",bottom:"y",left:"x"})}function si(e){return ll(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Te(e){const t=_x(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Yt(e,t){e=e||{},t=t||It.font;let n=mt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=mt(e.style,t.style);s&&!(""+s).match(gx)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:mt(e.family,t.family),lineHeight:mx(mt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:mt(e.weight,t.weight),string:""};return i.string=ux(i),i}function Ui(e,t,n,s){let i,r,o;for(i=0,r=e.length;i<r;++i)if(o=e[i],o!==void 0&&o!==void 0)return o}function yx(e,t,n){const{min:s,max:i}=e,r=vd(t,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function Rs(e,t){return Object.assign(Object.create(e),t)}function cl(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=Id("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>cl([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return Pd(a,l,()=>Ax(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return au(a).includes(l)},ownKeys(a){return au(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function _s(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Od(e,s),setContext:r=>_s(e,r,n,s),override:r=>_s(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return Pd(r,o,()=>vx(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function Od(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:Cn(n)?n:()=>n,isIndexable:Cn(s)?s:()=>s}}const xx=(e,t)=>e?e+sl(t):t,ul=(e,t)=>ht(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Pd(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function vx(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return Cn(a)&&o.isScriptable(t)&&(a=wx(t,a,e,n)),Bt(a)&&a.length&&(a=Sx(t,a,e,o.isIndexable)),ul(t,a)&&(a=_s(a,i,r&&r[t],o)),a}function wx(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),ul(e,l)&&(l=fl(i._scopes,i,e,l)),l}function Sx(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(ht(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const f=fl(c,i,e,u);t.push(_s(f,r,o&&o[e],a))}}return t}function Md(e,t,n){return Cn(e)?e(t,n):e}const kx=(e,t)=>e===!0?t:typeof e=="string"?xi(t,e):void 0;function Rx(e,t,n,s,i){for(const r of t){const o=kx(n,r);if(o){e.add(o);const a=Md(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function fl(e,t,n,s){const i=t._rootScopes,r=Md(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let l=ou(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=ou(a,o,r,l,s),l===null)?!1:cl(Array.from(a),[""],i,r,()=>Ex(t,n,s))}function ou(e,t,n,s,i){for(;n;)n=Rx(e,t,n,s,i);return n}function Ex(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return Bt(i)&&ht(n)?n:i||{}}function Ax(e,t,n,s){let i;for(const r of t)if(i=Id(xx(r,e),n),typeof i<"u")return ul(e,i)?fl(n,s,e,i):i}function Id(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function au(e){let t=e._keys;return t||(t=e._keys=Tx(e._scopes)),t}function Tx(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function hl(){return typeof window<"u"&&typeof document<"u"}function dl(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Or(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const fo=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Cx(e,t){return fo(e).getPropertyValue(t)}const Ox=["top","right","bottom","left"];function Wn(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=Ox[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Px=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function Mx(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(Px(i,r,e.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Bn(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=fo(n),r=i.boxSizing==="border-box",o=Wn(i,"padding"),a=Wn(i,"border","width"),{x:l,y:c,box:u}=Mx(e,n),f=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:d,height:g}=t;return r&&(d-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-f)/d*n.width/s),y:Math.round((c-h)/g*n.height/s)}}function Ix(e,t,n){let s,i;if(t===void 0||n===void 0){const r=e&&dl(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=fo(r),l=Wn(a,"border","width"),c=Wn(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Or(a.maxWidth,r,"clientWidth"),i=Or(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||Ar,maxHeight:i||Ar}}const Wi=e=>Math.round(e*10)/10;function Lx(e,t,n,s){const i=fo(e),r=Wn(i,"margin"),o=Or(i.maxWidth,e,"clientWidth")||Ar,a=Or(i.maxHeight,e,"clientHeight")||Ar,l=Ix(e,t,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const h=Wn(i,"border","width"),d=Wn(i,"padding");c-=d.width+h.width,u-=d.height+h.height}return c=Math.max(0,c-r.width),u=Math.max(0,s?c/s:u-r.height),c=Wi(Math.min(c,o,l.maxWidth)),u=Wi(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Wi(c/2)),(t!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=Wi(Math.floor(u*s))),{width:c,height:u}}function lu(e,t,n){const s=t||1,i=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const Dx=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};hl()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function cu(e,t){const n=Cx(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const $x=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},Nx=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ds(e,t,n){return e?$x(t,n):Nx()}function Ld(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function Dd(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function qi(e,t,n){return e.options.clip?e[n]:t[n]}function Fx(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:qi(n,t,"left"),right:qi(n,t,"right"),top:qi(s,t,"top"),bottom:qi(s,t,"bottom")}:t}function Bx(e,t){const n=t._clip;if(n.disabled)return!1;const s=Fx(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class zx{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Rd.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var tn=new zx;const uu="transparent",Hx={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=eu(e||uu),i=s.valid&&eu(t||uu);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class jx{constructor(t,n,s,i){const r=n[s];i=Ui([t.to,i,r,t.from]);const o=Ui([t.from,r,i]);this._active=!0,this._fn=t.fn||Hx[t.type||typeof o],this._easing=ei[t.easing]||ei.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Ui([t.to,n,i,t.from]),this._from=Ui([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class $d{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!ht(t))return;const n=Object.keys(It.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!ht(r))return;const o={};for(const a of n)o[a]=r[a];(Bt(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=Ux(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&Vx(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,n));continue}const u=n[c];let f=r[c];const h=s.get(c);if(f)if(h&&f.active()){f.update(h,u,a);continue}else f.cancel();if(!h||!h.duration){t[c]=u;continue}r[c]=f=new jx(h,t,c,u),i.push(f)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return tn.add(this._chart,s),!0}}function Vx(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function Ux(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function fu(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function Wx(e,t,n){if(n===!1)return!1;const s=fu(e,n),i=fu(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function qx(e){let t,n,s,i;return ht(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function Nd(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function hu(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,s.all)continue;break}c=e.values[l],hn(c)&&(r||t===0||Qc(t)===Qc(c))&&(t+=c)}return!u&&!s.all?0:t}function Kx(e,t){const{iScale:n,vScale:s}=t,i=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[r]:e[u]};return a}function zo(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function Gx(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function Yx(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function Xx(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function du(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function pu(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,u=Gx(r,o,s),f=t.length;let h;for(let d=0;d<f;++d){const g=t[d],{[l]:m,[c]:b}=g,x=g._stacks||(g._stacks={});h=x[c]=Xx(i,u,m),h[a]=b,h._top=du(h,o,!0,s.type),h._bottom=du(h,o,!1,s.type);const v=h._visualValues||(h._visualValues={});v[a]=b}}function Ho(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function Qx(e,t){return Rs(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Jx(e,t,n){return Rs(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Is(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const jo=e=>e==="reset"||e==="none",gu=(e,t)=>t?e:Object.assign({},e),Zx=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Nd(n,!0),values:null};class ii{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=zo(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Is(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(f,h,d,g)=>f==="x"?h:f==="r"?g:d,r=n.xAxisID=mt(s.xAxisID,Ho(t,"x")),o=n.yAxisID=mt(s.yAxisID,Ho(t,"y")),a=n.rAxisID=mt(s.rAxisID,Ho(t,"r")),l=n.indexAxis,c=n.iAxisID=i(l,r,o,a),u=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Jc(this._data,this),t._stacked&&Is(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(ht(n)){const i=this._cachedMeta;this._data=Kx(n,i)}else if(s!==n){if(s){Jc(s,this);const i=this._cachedMeta;Is(i),i._parsed=[]}n&&Object.isExtensible(n)&&X0(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=zo(n.vScale,n),n.stack!==s.stack&&(i=!0,Is(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&(pu(this,n._parsed),n._stacked=zo(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&n===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],u,f,h;if(this._parsing===!1)s._parsed=i,s._sorted=!0,h=i;else{Bt(i[t])?h=this.parseArrayData(s,i,t,n):ht(i[t])?h=this.parseObjectData(s,i,t,n):h=this.parsePrimitiveData(s,i,t,n);const d=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)s._parsed[u+t]=f=h[u],l&&(d()&&(l=!1),c=f);s._sorted=l}o&&pu(this,h)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,f=new Array(i);let h,d,g;for(h=0,d=i;h<d;++h)g=h+s,f[h]={[a]:u||r.parse(c[g],g),[l]:o.parse(n[g],g)};return f}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,u,f;for(l=0,c=i;l<c;++l)u=l+s,f=n[u],a[l]={x:r.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,f,h,d;for(u=0,f=i;u<f;++u)h=u+s,d=n[h],c[u]={x:r.parse(xi(d,a),h),y:o.parse(xi(d,l),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:Nd(i,!0),values:n._stacks[t.axis]._visualValues};return hu(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=hu(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=Zx(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=Yx(a);let h,d;function g(){d=i[h];const m=d[a.axis];return!hn(d[t.axis])||u>m||f<m}for(h=0;h<o&&!(!g()&&(this.updateRangeFromParsed(c,t,d,l),r));++h);if(r){for(h=o-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,t,d,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],hn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=qx(mt(this.options.clip,Wx(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,r,a,l),u=a;u<a+l;++u){const f=i[u];f.hidden||(f.active&&c?o.push(f):f.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=Jx(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=Qx(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&Er(s);if(a)return gu(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),f=i?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),u),d=Object.keys(It.elements[t]),g=()=>this.getContext(s,i,n),m=c.resolveNamedOptions(h,d,g,f);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(gu(m,l))),m}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(h,this.getContext(t,s,n))}const c=new $d(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||jo(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){jo(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!jo(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&Is(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}W(ii,"defaults",{}),W(ii,"datasetElementType",null),W(ii,"dataElementType",null);function tv(e,t,n){let s=1,i=1,r=0,o=0;if(t<Dt){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),h=Math.sin(l),d=(S,k,C)=>Cr(S,a,l,!0)?1:Math.max(k,k*n,C,C*n),g=(S,k,C)=>Cr(S,a,l,!0)?-1:Math.min(k,k*n,C,C*n),m=d(0,c,f),b=d(Nt,u,h),x=g($t,c,f),v=g($t+Nt,u,h);s=(m-x)/2,i=(b-v)/2,r=-(m+x)/2,o=-(b+v)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class as extends ii{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=l=>+s[l];if(ht(s[t])){const{key:l="value"}=this._parsing;r=c=>+xi(s[c],l)}let o,a;for(o=t,a=t+n;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return jn(this.options.rotation-90)}_getCircumference(){return jn(this.options.circumference)}_getRotationExtents(){let t=Dt,n=-Dt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),n=Math.max(n,r+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min($0(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:h,ratioY:d,offsetX:g,offsetY:m}=tv(f,u,l),b=(s.width-o)/h,x=(s.height-o)/d,v=Math.max(Math.min(b,x)/2,0),S=vd(this.options.radius,v),k=Math.max(S*l,0),C=(S-k)/this._getVisibleDatasetWeightTotal();this.offsetX=g*S,this.offsetY=m*S,i.total=this.calculateTotal(),this.outerRadius=S-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/Dt)}updateElements(t,n,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,h=r&&c.animateScale,d=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:m,includeOptions:b}=this._getSharedOptions(n,i);let x=this._getRotation(),v;for(v=0;v<n;++v)x+=this._circumference(v,r);for(v=n;v<n+s;++v){const S=this._circumference(v,r),k=t[v],C={x:u+this.offsetX,y:f+this.offsetY,startAngle:x,endAngle:x+S,circumference:S,outerRadius:g,innerRadius:d};b&&(C.options=m||this.resolveDataElementOptions(v,k.active?"active":i)),x+=S,this.updateElement(k,v,C,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,i;for(i=0;i<n.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Dt*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=rx(n._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const s=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(mt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}W(as,"id","doughnut"),W(as,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),W(as,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),W(as,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return n.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class xa extends as{}W(xa,"id","pie"),W(xa,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Nn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pl{constructor(t){W(this,"options");this.options=t||{}}static override(t){Object.assign(pl.prototype,t)}init(){}formats(){return Nn()}parse(){return Nn()}format(){return Nn()}add(){return Nn()}diff(){return Nn()}startOf(){return Nn()}endOf(){return Nn()}}var ev={_date:pl};function nv(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?G0:ba;if(s){if(i._sharedOptions){const u=r[0],f=typeof u.getRange=="function"&&u.getRange(t);if(f){const h=c(r,t,n-f),d=c(r,t,n+f);return{lo:h.lo,hi:d.hi}}}}else{const u=c(r,t,n);if(l){const{vScale:f}=i._cachedMeta,{_parsed:h}=e,d=h.slice(0,u.lo+1).reverse().findIndex(m=>!Ut(m[f.axis]));u.lo-=Math.max(0,d);const g=h.slice(u.hi).findIndex(m=>!Ut(m[f.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:r.length-1}}function ho(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:f,hi:h}=nv(r[a],t,o,i);for(let d=f;d<=h;++d){const g=u[d];g.skip||s(g,c,d)}}}function sv(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Vo(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||ho(e,n,t,function(a,l,c){!i&&!Cd(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function iv(e,t,n,s){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:f}=Sd(o,{x:t.x,y:t.y});Cr(f,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return ho(e,n,t,r),i}function rv(e,t,n,s,i,r){let o=[];const a=sv(n);let l=Number.POSITIVE_INFINITY;function c(u,f,h){const d=u.inRange(t.x,t.y,i);if(s&&!d)return;const g=u.getCenterPoint(i);if(!(!!r||e.isPointInArea(g))&&!d)return;const b=a(t,g);b<l?(o=[{element:u,datasetIndex:f,index:h}],l=b):b===l&&o.push({element:u,datasetIndex:f,index:h})}return ho(e,n,t,c),o}function Uo(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?iv(e,t,n,i):rv(e,t,n,s,i,r)}function mu(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ho(e,n,t,(l,c,u)=>{l[o]&&l[o](t[n],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var ov={modes:{index(e,t,n,s){const i=Bn(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Vo(e,i,r,s,o):Uo(e,i,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,n,s){const i=Bn(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Vo(e,i,r,s,o):Uo(e,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,n,s){const i=Bn(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Vo(e,i,r,s,o)},nearest(e,t,n,s){const i=Bn(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Uo(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=Bn(t,e);return mu(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=Bn(t,e);return mu(e,i,"y",n.intersect,s)}}};const Fd=["left","top","right","bottom"];function Ls(e,t){return e.filter(n=>n.pos===t)}function bu(e,t){return e.filter(n=>Fd.indexOf(n.pos)===-1&&n.box.axis===t)}function Ds(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function av(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function lv(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!Fd.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function cv(e,t){const n=lv(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=u?u*i:l&&t.availableHeight)}return n}function uv(e){const t=av(e),n=Ds(t.filter(c=>c.box.fullSize),!0),s=Ds(Ls(t,"left"),!0),i=Ds(Ls(t,"right")),r=Ds(Ls(t,"top"),!0),o=Ds(Ls(t,"bottom")),a=bu(t,"x"),l=bu(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Ls(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function _u(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function Bd(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function fv(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!ht(i)){n.size&&(e[i]-=n.size);const f=s[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?r.height:r.width),n.size=f.size/f.count,e[i]+=n.size}r.getPadding&&Bd(o,r.getPadding());const a=Math.max(0,t.outerWidth-_u(o,e,"left","right")),l=Math.max(0,t.outerHeight-_u(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function hv(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function dv(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function Vs(e,t,n,s){const i=[];let r,o,a,l,c,u;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,dv(a.horizontal,t));const{same:f,other:h}=fv(t,n,a,s);c|=f&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Vs(i,t,n,s)||u}function Ki(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function yu(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=t.w*u,h=c.size||l.height;Er(c.start)&&(o=c.start),l.fullSize?Ki(l,i.left,o,n.outerWidth-i.right-i.left,h):Ki(l,t.left+c.placed,o,f,h),c.start=o,c.placed+=f,o=l.bottom}else{const f=t.h*u,h=c.size||l.width;Er(c.start)&&(r=c.start),l.fullSize?Ki(l,r,i.top,h,n.outerHeight-i.bottom-i.top):Ki(l,r,t.top+c.placed,h,f),c.start=r,c.placed+=f,r=l.right}}t.x=r,t.y=o}var ke={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=Te(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=uv(e.boxes),l=a.vertical,c=a.horizontal;yt(e.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,b)=>b.box.options&&b.box.options.display===!1?m:m+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);Bd(h,Te(s));const d=Object.assign({maxPadding:h,w:r,h:o,x:i.left,y:i.top},i),g=cv(l.concat(c),f);Vs(a.fullSize,d,f,g),Vs(l,d,f,g),Vs(c,d,f,g)&&Vs(l,d,f,g),hv(d),yu(a.leftAndTop,d,f,g),d.x+=d.w,d.y+=d.h,yu(a.rightAndBottom,d,f,g),e.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},yt(a.chartArea,m=>{const b=m.box;Object.assign(b,e.chartArea),b.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class zd{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class pv extends zd{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const lr="$chartjs",gv={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xu=e=>e===null||e==="";function mv(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[lr]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",xu(i)){const r=cu(e,"width");r!==void 0&&(e.width=r)}if(xu(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=cu(e,"height");r!==void 0&&(e.height=r)}return e}const Hd=Dx?{passive:!0}:!1;function bv(e,t,n){e&&e.addEventListener(t,n,Hd)}function _v(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Hd)}function yv(e,t){const n=gv[e.type]||e.type,{x:s,y:i}=Bn(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Pr(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function xv(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Pr(a.addedNodes,s),o=o&&!Pr(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function vv(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Pr(a.removedNodes,s),o=o&&!Pr(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const wi=new Map;let vu=0;function jd(){const e=window.devicePixelRatio;e!==vu&&(vu=e,wi.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function wv(e,t){wi.size||window.addEventListener("resize",jd),wi.set(e,t)}function Sv(e){wi.delete(e),wi.size||window.removeEventListener("resize",jd)}function kv(e,t,n){const s=e.canvas,i=s&&dl(s);if(!i)return;const r=Ed((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),wv(e,r),o}function Wo(e,t,n){n&&n.disconnect(),t==="resize"&&Sv(e)}function Rv(e,t,n){const s=e.canvas,i=Ed(r=>{e.ctx!==null&&n(yv(r,e))},e);return bv(s,t,i),i}class Ev extends zd{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(mv(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[lr])return!1;const s=n[lr].initial;["height","width"].forEach(r=>{const o=s[r];Ut(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[lr],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:xv,detach:vv,resize:kv}[n]||Rv;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:Wo,detach:Wo,resize:Wo}[n]||_v)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return Lx(t,n,s,i)}isAttached(t){const n=t&&dl(t);return!!(n&&n.isConnected)}}function Av(e){return!hl()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?pv:Ev}var tr;let Es=(tr=class{constructor(){W(this,"x");W(this,"y");W(this,"active",!1);W(this,"options");W(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return Tr(this.x)&&Tr(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}},W(tr,"defaults",{}),W(tr,"defaultRoutes"),tr);function Tv(e,t){const n=e.options.ticks,s=Cv(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?Pv(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return Mv(t,c,r,o/i),c;const u=Ov(r,t,i);if(o>0){let f,h;const d=o>1?Math.round((l-a)/(o-1)):null;for(Gi(t,c,u,Ut(d)?0:a-d,a),f=0,h=o-1;f<h;f++)Gi(t,c,u,r[f],r[f+1]);return Gi(t,c,u,l,Ut(d)?t.length:l+d),c}return Gi(t,c,u),c}function Cv(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function Ov(e,t,n){const s=Iv(e),i=t.length/n;if(!s)return Math.max(i,1);const r=V0(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function Pv(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function Mv(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function Gi(e,t,n,s,i){const r=mt(s,0),o=Math.min(mt(i,e.length),e.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(r+a*n))}function Iv(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const Lv=e=>e==="left"?"right":e==="right"?"left":e,wu=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,Su=(e,t)=>Math.min(t||e,e);function ku(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function Dv(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(n&&(s===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function $v(e,t){yt(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function $s(e){return e.drawTicks?e.tickLength:0}function Ru(e,t){if(!e.display)return 0;const n=Yt(e.font,t),s=Te(e.padding);return(Bt(e.text)?e.text.length:1)*n.lineHeight+s.height}function Nv(e,t){return Rs(e,{scale:t,type:"scale"})}function Fv(e,t,n){return Rs(e,{tick:n,index:t,type:"tick"})}function Bv(e,t,n){let s=rl(e);return(n&&t!=="right"||!n&&t==="right")&&(s=Lv(s)),s}function zv(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let f=0,h,d,g;const m=o-i,b=a-r;if(e.isHorizontal()){if(d=qt(s,r,a),ht(n)){const x=Object.keys(n)[0],v=n[x];g=u[x].getPixelForValue(v)+m-t}else n==="center"?g=(c.bottom+c.top)/2+m-t:g=wu(e,n,t);h=a-r}else{if(ht(n)){const x=Object.keys(n)[0],v=n[x];d=u[x].getPixelForValue(v)-b+t}else n==="center"?d=(c.left+c.right)/2-b+t:d=wu(e,n,t);g=qt(s,o,i),f=n==="left"?-Nt:Nt}return{titleX:d,titleY:g,maxWidth:h,rotation:f}}class Li extends Es{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=He(t,Number.POSITIVE_INFINITY),n=He(n,Number.NEGATIVE_INFINITY),s=He(s,Number.POSITIVE_INFINITY),i=He(i,Number.NEGATIVE_INFINITY),{min:He(t,s),max:He(n,i),minDefined:hn(t),maxDefined:hn(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:He(n,He(s,n)),max:He(s,He(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){At(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=yx(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?ku(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Tv(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){At(this.options.afterUpdate,[this])}beforeSetDimensions(){At(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){At(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),At(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){At(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=At(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){At(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){At(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=Su(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),f=u.widest.width,h=u.highest.height,d=ye(this.chart.width-f,0,this.maxWidth);a=t.offset?this.maxWidth/s:d/(s-1),f+6>a&&(a=d/(s-(t.offset?.5:1)),l=this.maxHeight-$s(t.grid)-n.padding-Ru(t.title,this.chart.options.font),c=Math.sqrt(f*f+h*h),o=W0(Math.min(Math.asin(ye((u.highest.height+6)/a,-1,1)),Math.asin(ye(l/c,-1,1))-Math.asin(ye(h/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){At(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){At(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ru(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=$s(r)+l):(t.height=this.maxHeight,t.width=$s(r)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:h}=this._getLabelSizes(),d=s.padding*2,g=jn(this.labelRotation),m=Math.cos(g),b=Math.sin(g);if(a){const x=s.mirror?0:b*f.width+m*h.height;t.height=Math.min(this.maxHeight,t.height+x+d)}else{const x=s.mirror?0:m*f.width+b*h.height;t.width=Math.min(this.maxWidth,t.width+x+d)}this._calculatePadding(c,u,b,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,d=0;l?c?(h=i*t.width,d=s*n.height):(h=s*t.height,d=i*n.width):r==="start"?d=n.width:r==="end"?h=t.width:r!=="inner"&&(h=t.width/2,d=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((d-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=t.height/2;r==="start"?(u=0,f=t.height):r==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){At(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)Ut(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=ku(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/Su(n,s));let c=0,u=0,f,h,d,g,m,b,x,v,S,k,C;for(f=0;f<n;f+=l){if(g=t[f].label,m=this._resolveTickFontOptions(f),i.font=b=m.string,x=r[b]=r[b]||{data:{},gc:[]},v=m.lineHeight,S=k=0,!Ut(g)&&!Bt(g))S=su(i,x.data,x.gc,S,g),k=v;else if(Bt(g))for(h=0,d=g.length;h<d;++h)C=g[h],!Ut(C)&&!Bt(C)&&(S=su(i,x.data,x.gc,S,C),k+=v);o.push(S),a.push(k),c=Math.max(S,c),u=Math.max(k,u)}$v(r,n);const $=o.indexOf(c),P=a.indexOf(u),D=N=>({width:o[N]||0,height:a[N]||0});return{first:D(0),last:D(n-1),widest:D($),highest:D(P),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return K0(this._alignToPixels?$n(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=Fv(this.getContext(),t,s))}return this.$context||(this.$context=Nv(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=jn(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),h=$s(r),d=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,b=m/2,x=function(et){return $n(s,et,m)};let v,S,k,C,$,P,D,N,H,K,M,tt;if(o==="top")v=x(this.bottom),P=this.bottom-h,N=v-b,K=x(t.top)+b,tt=t.bottom;else if(o==="bottom")v=x(this.top),K=t.top,tt=x(t.bottom)-b,P=v+b,N=this.top+h;else if(o==="left")v=x(this.right),$=this.right-h,D=v-b,H=x(t.left)+b,M=t.right;else if(o==="right")v=x(this.left),H=t.left,M=x(t.right)-b,$=v+b,D=this.left+h;else if(n==="x"){if(o==="center")v=x((t.top+t.bottom)/2+.5);else if(ht(o)){const et=Object.keys(o)[0],Z=o[et];v=x(this.chart.scales[et].getPixelForValue(Z))}K=t.top,tt=t.bottom,P=v+b,N=P+h}else if(n==="y"){if(o==="center")v=x((t.left+t.right)/2);else if(ht(o)){const et=Object.keys(o)[0],Z=o[et];v=x(this.chart.scales[et].getPixelForValue(Z))}$=v-b,D=$-h,H=t.left,M=t.right}const ft=mt(i.ticks.maxTicksLimit,f),rt=Math.max(1,Math.ceil(f/ft));for(S=0;S<f;S+=rt){const et=this.getContext(S),Z=r.setContext(et),ot=a.setContext(et),kt=Z.lineWidth,Qt=Z.color,Jt=ot.dash||[],Mt=ot.dashOffset,xe=Z.tickWidth,ie=Z.tickColor,De=Z.tickBorderDash||[],Lt=Z.tickBorderDashOffset;k=Dv(this,S,l),k!==void 0&&(C=$n(s,k,kt),c?$=D=H=M=C:P=N=K=tt=C,d.push({tx1:$,ty1:P,tx2:D,ty2:N,x1:H,y1:K,x2:M,y2:tt,width:kt,color:Qt,borderDash:Jt,borderDashOffset:Mt,tickWidth:xe,tickColor:ie,tickBorderDash:De,tickBorderDashOffset:Lt}))}return this._ticksLength=f,this._borderValue=v,d}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=r,h=$s(s.grid),d=h+u,g=f?-u:d,m=-jn(this.labelRotation),b=[];let x,v,S,k,C,$,P,D,N,H,K,M,tt="middle";if(i==="top")$=this.bottom-g,P=this._getXAxisLabelAlignment();else if(i==="bottom")$=this.top+g,P=this._getXAxisLabelAlignment();else if(i==="left"){const rt=this._getYAxisLabelAlignment(h);P=rt.textAlign,C=rt.x}else if(i==="right"){const rt=this._getYAxisLabelAlignment(h);P=rt.textAlign,C=rt.x}else if(n==="x"){if(i==="center")$=(t.top+t.bottom)/2+d;else if(ht(i)){const rt=Object.keys(i)[0],et=i[rt];$=this.chart.scales[rt].getPixelForValue(et)+d}P=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")C=(t.left+t.right)/2-d;else if(ht(i)){const rt=Object.keys(i)[0],et=i[rt];C=this.chart.scales[rt].getPixelForValue(et)}P=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?tt="top":l==="end"&&(tt="bottom"));const ft=this._getLabelSizes();for(x=0,v=a.length;x<v;++x){S=a[x],k=S.label;const rt=r.setContext(this.getContext(x));D=this.getPixelForTick(x)+r.labelOffset,N=this._resolveTickFontOptions(x),H=N.lineHeight,K=Bt(k)?k.length:1;const et=K/2,Z=rt.color,ot=rt.textStrokeColor,kt=rt.textStrokeWidth;let Qt=P;o?(C=D,P==="inner"&&(x===v-1?Qt=this.options.reverse?"left":"right":x===0?Qt=this.options.reverse?"right":"left":Qt="center"),i==="top"?c==="near"||m!==0?M=-K*H+H/2:c==="center"?M=-ft.highest.height/2-et*H+H:M=-ft.highest.height+H/2:c==="near"||m!==0?M=H/2:c==="center"?M=ft.highest.height/2-et*H:M=ft.highest.height-K*H,f&&(M*=-1),m!==0&&!rt.showLabelBackdrop&&(C+=H/2*Math.sin(m))):($=D,M=(1-K)*H/2);let Jt;if(rt.showLabelBackdrop){const Mt=Te(rt.backdropPadding),xe=ft.heights[x],ie=ft.widths[x];let De=M-Mt.top,Lt=0-Mt.left;switch(tt){case"middle":De-=xe/2;break;case"bottom":De-=xe;break}switch(P){case"center":Lt-=ie/2;break;case"right":Lt-=ie;break;case"inner":x===v-1?Lt-=ie:x>0&&(Lt-=ie/2);break}Jt={left:Lt,top:De,width:ie+Mt.width,height:xe+Mt.height,color:rt.backdropColor}}b.push({label:k,font:N,textOffset:M,options:{rotation:m,color:Z,strokeColor:ot,strokeWidth:kt,textAlign:Qt,textBaseline:tt,translation:[C,$],backdrop:Jt}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-jn(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+r,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+r,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,h;this.isHorizontal()?(c=$n(t,this.left,o)-o/2,u=$n(t,this.right,a)+a/2,f=h=l):(f=$n(t,this.top,o)-o/2,h=$n(t,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&ol(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;vi(s,c,0,u,l,a)}i&&al(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=Yt(s.font),o=Te(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||ht(n)?(l+=o.bottom,Bt(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:h}=zv(this,l,n,a);vi(t,s.text,0,0,r,{color:s.color,maxWidth:f,rotation:h,textAlign:Bv(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=mt(t.grid&&t.grid.z,-1),i=mt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Li.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Yt(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Yi{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;Vv(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,Hv(t,o,s),this.override&&It.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in It[i]&&(delete It[i][s],this.override&&delete Gn[s])}}function Hv(e,t,n){const s=yi(Object.create(null),[n?It.get(n):{},It.get(t),e.defaults]);It.set(t,s),e.defaultRoutes&&jv(t,e.defaultRoutes),e.descriptors&&It.describe(t,e.descriptors)}function jv(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");It.route(r,i,l,a)})}function Vv(e){return"id"in e&&"defaults"in e}class Uv{constructor(){this.controllers=new Yi(ii,"datasets",!0),this.elements=new Yi(Es,"elements"),this.plugins=new Yi(Object,"plugins"),this.scales=new Yi(Li,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):yt(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=sl(t);At(s["before"+i],[],s),n[t](s),At(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var We=new Uv;class Wv{constructor(){this._init=[]}notify(t,n,s,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[n,i,r.options];if(At(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Ut(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=mt(s.options&&s.options.plugins,{}),r=qv(s);return i===!1&&!n?[]:Gv(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function qv(e){const t={},n=[],s=Object.keys(We.plugins.items);for(let r=0;r<s.length;r++)n.push(We.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function Kv(e,t){return!t&&e===!1?null:e===!0?{}:e}function Gv(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=Kv(s[l],i);c!==null&&r.push({plugin:a,options:Yv(e.config,{plugin:a,local:n[l]},c,o)})}return r}function Yv(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function va(e,t){const n=It.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Xv(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function Qv(e,t){return e===t?"_index_":"_value_"}function Eu(e){if(e==="x"||e==="y"||e==="r")return e}function Jv(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function wa(e,...t){if(Eu(e))return e;for(const n of t){const s=n.axis||Jv(n.position)||e.length>1&&Eu(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Au(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Zv(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return Au(e,"x",n[0])||Au(e,"y",n[0])}return{}}function tw(e,t){const n=Gn[e.type]||{scales:{}},s=t.scales||{},i=va(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!ht(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=wa(o,a,Zv(o,e),It.scales[a.type]),c=Qv(l,i),u=n.scales||{};r[o]=ti(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||va(a,t),u=(Gn[a]||{}).scales||{};Object.keys(u).forEach(f=>{const h=Xv(f,l),d=o[h+"AxisID"]||h;r[d]=r[d]||Object.create(null),ti(r[d],[{axis:h},s[d],u[f]])})}),Object.keys(r).forEach(o=>{const a=r[o];ti(a,[It.scales[a.type],It.scale])}),r}function Vd(e){const t=e.options||(e.options={});t.plugins=mt(t.plugins,{}),t.scales=tw(e,t)}function Ud(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function ew(e){return e=e||{},e.data=Ud(e.data),Vd(e),e}const Tu=new Map,Wd=new Set;function Xi(e,t){let n=Tu.get(e);return n||(n=t(),Tu.set(e,n),Wd.add(n)),n}const Ns=(e,t,n)=>{const s=xi(t,n);s!==void 0&&e.add(s)};class nw{constructor(t){this._config=ew(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ud(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Vd(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Xi(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Xi(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Xi(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Xi(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{t&&(l.add(t),u.forEach(f=>Ns(l,t,f))),u.forEach(f=>Ns(l,i,f)),u.forEach(f=>Ns(l,Gn[r]||{},f)),u.forEach(f=>Ns(l,It,f)),u.forEach(f=>Ns(l,_a,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Wd.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,Gn[n]||{},It.datasets[n]||{},{type:n},It,_a]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Cu(this._resolverCache,t,i);let l=o;if(iw(o,n)){r.$shared=!1,s=Cn(s)?s():s;const c=this.createResolver(t,s,a);l=_s(o,s,c)}for(const c of n)r[c]=l[c];return r}createResolver(t,n,s=[""],i){const{resolver:r}=Cu(this._resolverCache,t,s);return ht(n)?_s(r,n,void 0,i):r}}function Cu(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:cl(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const sw=e=>ht(e)&&Object.getOwnPropertyNames(e).some(t=>Cn(e[t]));function iw(e,t){const{isScriptable:n,isIndexable:s}=Od(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(Cn(a)||sw(a))||o&&Bt(a))return!0}return!1}var rw="4.4.9";const ow=["top","bottom","left","right","chartArea"];function Ou(e,t){return e==="top"||e==="bottom"||ow.indexOf(e)===-1&&t==="x"}function Pu(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function Mu(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),At(n&&n.onComplete,[e],t)}function aw(e){const t=e.chart,n=t.options.animation;At(n&&n.onProgress,[e],t)}function qd(e){return hl()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const cr={},Iu=e=>{const t=qd(e);return Object.values(cr).filter(n=>n.canvas===t).pop()};function lw(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function cw(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var mn;let po=(mn=class{static register(...t){We.add(...t),Lu()}static unregister(...t){We.remove(...t),Lu()}constructor(t,n){const s=this.config=new nw(n),i=qd(t),r=Iu(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Av(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=D0(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Wv,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=J0(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],cr[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}tn.listen(this,"complete",Mu),tn.listen(this,"progress",aw),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return Ut(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return We}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():lu(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return iu(this.canvas,this.ctx),this}stop(){return tn.stop(this),this}resize(t,n){tn.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,lu(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),At(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};yt(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=wa(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),yt(r,o=>{const a=o.options,l=a.id,c=wa(l,a),u=mt(a.type,o.dtype);(a.position===void 0||Ou(a.position,c)!==Ou(o.dposition))&&(a.position=o.dposition),i[l]=!0;let f=null;if(l in s&&s[l].type===u)f=s[l];else{const h=We.getScale(u);f=new h({id:l,type:u,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(a,t)}),yt(i,(o,a)=>{o||delete s[a]}),yt(s,o=>{ke.configure(this,o,o.options),ke.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(Pu("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||va(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=We.getController(a),{datasetElementType:c,dataElementType:u}=It.datasets[a];Object.assign(l,{dataElementType:We.getElement(u),datasetElementType:c&&We.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){yt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),h=!i&&r.indexOf(f)===-1;f.buildOrUpdateElements(h),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||yt(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Pu("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){yt(this.scales,t=>{ke.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Yc(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;lw(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!Yc(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ke.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],yt(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Cn(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(tn.has(this)?this.attached&&!tn.running(this)&&tn.start(this):(this.draw(),Mu({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=Bx(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&ol(n,i),t.controller.draw(),i&&al(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Cd(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=ov.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Rs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);Er(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),tn.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),iu(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete cr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};yt(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){yt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},yt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!kr(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),l=H0(t),c=cw(t,this._lastEvent,s,l);s&&(this._lastEvent=null,At(r.onHover,[t,a,this],this),l&&At(r.onClick,[t,a,this],this));const u=!kr(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}},W(mn,"defaults",It),W(mn,"instances",cr),W(mn,"overrides",Gn),W(mn,"registry",We),W(mn,"version",rw),W(mn,"getChart",Iu),mn);function Lu(){return yt(po.instances,e=>e._plugins.invalidate())}function uw(e,t,n){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(r,o,a,s-c,n+c),l>i?(c=i/l,e.arc(r,o,l,n+c,s-c,!0)):e.arc(r,o,i,n+Nt,s-Nt),e.closePath(),e.clip()}function fw(e){return ll(e,["outerStart","outerEnd","innerStart","innerEnd"])}function hw(e,t,n,s){const i=fw(e.options.borderRadius),r=(n-t)/2,o=Math.min(r,s*t/2),a=l=>{const c=(n-Math.min(r,l))*s/2;return ye(l,0,Math.min(r,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:ye(i.innerStart,0,o),innerEnd:ye(i.innerEnd,0,o)}}function ss(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function Mr(e,t,n,s,i,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,f=Math.max(t.outerRadius+s+n-c,0),h=u>0?u+s+n+c:0;let d=0;const g=i-l;if(s){const rt=u>0?u-s:0,et=f>0?f-s:0,Z=(rt+et)/2,ot=Z!==0?g*Z/(Z+s):g;d=(g-ot)/2}const m=Math.max(.001,g*f-n/$t)/f,b=(g-m)/2,x=l+b+d,v=i-b-d,{outerStart:S,outerEnd:k,innerStart:C,innerEnd:$}=hw(t,h,f,v-x),P=f-S,D=f-k,N=x+S/P,H=v-k/D,K=h+C,M=h+$,tt=x+C/K,ft=v-$/M;if(e.beginPath(),r){const rt=(N+H)/2;if(e.arc(o,a,f,N,rt),e.arc(o,a,f,rt,H),k>0){const kt=ss(D,H,o,a);e.arc(kt.x,kt.y,k,H,v+Nt)}const et=ss(M,v,o,a);if(e.lineTo(et.x,et.y),$>0){const kt=ss(M,ft,o,a);e.arc(kt.x,kt.y,$,v+Nt,ft+Math.PI)}const Z=(v-$/h+(x+C/h))/2;if(e.arc(o,a,h,v-$/h,Z,!0),e.arc(o,a,h,Z,x+C/h,!0),C>0){const kt=ss(K,tt,o,a);e.arc(kt.x,kt.y,C,tt+Math.PI,x-Nt)}const ot=ss(P,x,o,a);if(e.lineTo(ot.x,ot.y),S>0){const kt=ss(P,N,o,a);e.arc(kt.x,kt.y,S,x-Nt,N)}}else{e.moveTo(o,a);const rt=Math.cos(N)*f+o,et=Math.sin(N)*f+a;e.lineTo(rt,et);const Z=Math.cos(H)*f+o,ot=Math.sin(H)*f+a;e.lineTo(Z,ot)}e.closePath()}function dw(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){Mr(e,t,n,s,l,i);for(let c=0;c<r;++c)e.fill();isNaN(a)||(l=o+(a%Dt||Dt))}return Mr(e,t,n,s,l,i),e.fill(),l}function pw(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:f,borderDashOffset:h}=l,d=l.borderAlign==="inner";if(!c)return;e.setLineDash(f||[]),e.lineDashOffset=h,d?(e.lineWidth=c*2,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let g=t.endAngle;if(r){Mr(e,t,n,s,g,i);for(let m=0;m<r;++m)e.stroke();isNaN(a)||(g=o+(a%Dt||Dt))}d&&uw(e,t,g),r||(Mr(e,t,n,s,g,i),e.stroke())}class Us extends Es{constructor(n){super();W(this,"circumference");W(this,"endAngle");W(this,"fullCircles");W(this,"innerRadius");W(this,"outerRadius");W(this,"pixelMargin");W(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.getProps(["x","y"],i),{angle:o,distance:a}=Sd(r,{x:n,y:s}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:f,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,g=mt(h,c-l),m=Cr(o,l,c)&&l!==c,b=g>=Dt||m,x=js(a,u+d,f+d);return b&&x}getCenterPoint(n){const{x:s,y:i,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,f=(r+o)/2,h=(a+l+u+c)/2;return{x:s+Math.cos(f)*h,y:i+Math.sin(f)*h}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:i}=this,r=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=i>Dt?Math.floor(i/Dt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min($t,i||0)),u=r*c;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,dw(n,this,u,o,a),pw(n,this,u,o,a),n.restore()}}W(Us,"id","arc"),W(Us,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),W(Us,"defaultRoutes",{backgroundColor:"backgroundColor"}),W(Us,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});const Du=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},gw=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class $u extends Es{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=At(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=Yt(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Du(s,r);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let f=t;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-u;return this.legendItems.forEach((g,m)=>{const b=s+n/2+r.measureText(g.text).width;(m===0||c[c.length-1]+b+2*a>o)&&(f+=u,c[c.length-(m>0?0:1)]=0,d+=u,h++),l[m]={left:0,top:d,row:h,width:b,height:i},c[c.length-1]+=b+a}),f}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let f=a,h=0,d=0,g=0,m=0;return this.legendItems.forEach((b,x)=>{const{itemWidth:v,itemHeight:S}=mw(s,n,r,b,i);x>0&&d+S+2*a>u&&(f+=h+a,c.push({width:h,height:d}),g+=h+a,m++,h=d=0),l[x]={left:g,top:d,col:m,width:v,height:S},h=Math.max(h,v),d+=S+a}),f+=h,c.push({width:h,height:d}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=ds(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=qt(s,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=qt(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=qt(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=qt(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;ol(t,this),this._draw(),al(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=It.color,l=ds(t.rtl,this.left,this.width),c=Yt(o.font),{padding:u}=o,f=c.size,h=f/2;let d;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:b}=Du(o,f),x=function($,P,D){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;i.save();const N=mt(D.lineWidth,1);if(i.fillStyle=mt(D.fillStyle,a),i.lineCap=mt(D.lineCap,"butt"),i.lineDashOffset=mt(D.lineDashOffset,0),i.lineJoin=mt(D.lineJoin,"miter"),i.lineWidth=N,i.strokeStyle=mt(D.strokeStyle,a),i.setLineDash(mt(D.lineDash,[])),o.usePointStyle){const H={radius:m*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:N},K=l.xPlus($,g/2),M=P+h;Td(i,H,K,M,o.pointStyleWidth&&g)}else{const H=P+Math.max((f-m)/2,0),K=l.leftForLtr($,g),M=si(D.borderRadius);i.beginPath(),Object.values(M).some(tt=>tt!==0)?ya(i,{x:K,y:H,w:g,h:m,radius:M}):i.rect(K,H,g,m),i.fill(),N!==0&&i.stroke()}i.restore()},v=function($,P,D){vi(i,D.text,$,P+b/2,c,{strikethrough:D.hidden,textAlign:l.textAlign(D.textAlign)})},S=this.isHorizontal(),k=this._computeTitleHeight();S?d={x:qt(r,this.left+u,this.right-s[0]),y:this.top+u+k,line:0}:d={x:this.left+u,y:qt(r,this.top+k+u,this.bottom-n[0].height),line:0},Ld(this.ctx,t.textDirection);const C=b+u;this.legendItems.forEach(($,P)=>{i.strokeStyle=$.fontColor,i.fillStyle=$.fontColor;const D=i.measureText($.text).width,N=l.textAlign($.textAlign||($.textAlign=o.textAlign)),H=g+h+D;let K=d.x,M=d.y;l.setWidth(this.width),S?P>0&&K+H+u>this.right&&(M=d.y+=C,d.line++,K=d.x=qt(r,this.left+u,this.right-s[d.line])):P>0&&M+C>this.bottom&&(K=d.x=K+n[d.line].width+u,d.line++,M=d.y=qt(r,this.top+k+u,this.bottom-n[d.line].height));const tt=l.x(K);if(x(tt,M,$),K=Z0(N,K+g+h,S?K+H:this.right,t.rtl),v(l.x(K),M,$),S)d.x+=H+u;else if(typeof $.text!="string"){const ft=c.lineHeight;d.y+=Kd($,ft)+u}else d.y+=C}),Dd(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Yt(n.font),i=Te(n.padding);if(!n.display)return;const r=ds(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=i.top+l;let u,f=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,f=qt(t.align,f,this.right-h);else{const g=this.columnSizes.reduce((m,b)=>Math.max(m,b.height),0);u=c+qt(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const d=qt(a,f,f+h);o.textAlign=r.textAlign(rl(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,vi(o,n.text,d,u,s)}_computeTitleHeight(){const t=this.options.title,n=Yt(t.font),s=Te(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(js(t,this.left,this.right)&&js(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],js(t,i.left,i.left+i.width)&&js(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!yw(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=gw(i,s);i&&!r&&At(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&At(n.onHover,[t,s,this],this)}else s&&At(n.onClick,[t,s,this],this)}}function mw(e,t,n,s,i){const r=bw(s,e,t,n),o=_w(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function bw(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function _w(e,t,n){let s=e;return typeof t.text!="string"&&(s=Kd(t,n)),s}function Kd(e,t){const n=e.text?e.text.length:0;return t*n}function yw(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var xw={id:"legend",_element:$u,start(e,t,n){const s=e.legend=new $u({ctx:e.ctx,options:n,chart:e});ke.configure(e,s,n),ke.addBox(e,s)},stop(e){ke.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;ke.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Te(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Gd extends Es{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=Bt(s.text)?s.text.length:1;this._padding=Te(s.padding);const r=i*Yt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=qt(a,s,r),f=n+t,c=r-s):(o.position==="left"?(u=s+t,f=qt(a,i,n),l=$t*-.5):(u=r-t,f=qt(a,n,i),l=$t*.5),c=i-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Yt(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);vi(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:rl(n.align),textBaseline:"middle",translation:[o,a]})}}function vw(e,t){const n=new Gd({ctx:e.ctx,options:t,chart:e});ke.configure(e,n,t),ke.addBox(e,n),e.titleBlock=n}var ww={id:"title",_element:Gd,start(e,t,n){vw(e,n)},stop(e){const t=e.titleBlock;ke.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;ke.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ws={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=q0(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function je(e,t){return t&&(Bt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function en(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Sw(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function Nu(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Yt(t.bodyFont),c=Yt(t.titleFont),u=Yt(t.footerFont),f=r.length,h=i.length,d=s.length,g=Te(t.padding);let m=g.height,b=0,x=s.reduce((k,C)=>k+C.before.length+C.lines.length+C.after.length,0);if(x+=e.beforeBody.length+e.afterBody.length,f&&(m+=f*c.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),x){const k=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=d*k+(x-d)*l.lineHeight+(x-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let v=0;const S=function(k){b=Math.max(b,n.measureText(k).width+v)};return n.save(),n.font=c.string,yt(e.title,S),n.font=l.string,yt(e.beforeBody.concat(e.afterBody),S),v=t.displayColors?o+2+t.boxPadding:0,yt(s,k=>{yt(k.before,S),yt(k.lines,S),yt(k.after,S)}),v=0,n.font=u.string,yt(e.footer,S),n.restore(),b+=g.width,{width:b,height:m}}function kw(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function Rw(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function Ew(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),Rw(c,e,t,n)&&(c="center"),c}function Fu(e,t,n){const s=n.yAlign||t.yAlign||kw(e,n);return{xAlign:n.xAlign||t.xAlign||Ew(e,t,n,s),yAlign:s}}function Aw(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function Tw(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function Bu(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+r,{topLeft:u,topRight:f,bottomLeft:h,bottomRight:d}=si(o);let g=Aw(t,a);const m=Tw(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+i:a==="right"&&(g+=Math.max(f,d)+i),{x:ye(g,0,s.width-t.width),y:ye(m,0,s.height-t.height)}}function Qi(e,t,n){const s=Te(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function zu(e){return je([],en(e))}function Cw(e,t,n){return Rs(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function Hu(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Yd={beforeTitle:Je,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:Je,beforeBody:Je,beforeLabel:Je,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Ut(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Je,afterBody:Je,beforeFooter:Je,footer:Je,afterFooter:Je};function oe(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?Yd[t].call(n,s):i}class Sa extends Es{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new $d(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Cw(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=oe(s,"beforeTitle",this,t),r=oe(s,"title",this,t),o=oe(s,"afterTitle",this,t);let a=[];return a=je(a,en(i)),a=je(a,en(r)),a=je(a,en(o)),a}getBeforeBody(t,n){return zu(oe(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return yt(t,r=>{const o={before:[],lines:[],after:[]},a=Hu(s,r);je(o.before,en(oe(a,"beforeLabel",this,r))),je(o.lines,oe(a,"label",this,r)),je(o.after,en(oe(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return zu(oe(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=oe(s,"beforeFooter",this,t),r=oe(s,"footer",this,t),o=oe(s,"afterFooter",this,t);let a=[];return a=je(a,en(i)),a=je(a,en(r)),a=je(a,en(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Sw(this.chart,n[l]));return t.filter&&(a=a.filter((u,f,h)=>t.filter(u,f,h,s))),t.itemSort&&(a=a.sort((u,f)=>t.itemSort(u,f,s))),yt(a,u=>{const f=Hu(t.callbacks,u);i.push(oe(f,"labelColor",this,u)),r.push(oe(f,"labelPointStyle",this,u)),o.push(oe(f,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Ws[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=Nu(this,s),c=Object.assign({},a,l),u=Fu(this.chart,s,c),f=Bu(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=si(a),{x:h,y:d}=t,{width:g,height:m}=n;let b,x,v,S,k,C;return r==="center"?(k=d+m/2,i==="left"?(b=h,x=b-o,S=k+o,C=k-o):(b=h+g,x=b+o,S=k-o,C=k+o),v=b):(i==="left"?x=h+Math.max(l,u)+o:i==="right"?x=h+g-Math.max(c,f)-o:x=this.caretX,r==="top"?(S=d,k=S-o,b=x-o,v=x+o):(S=d+m,k=S+o,b=x+o,v=x-o),C=S),{x1:b,x2:x,x3:v,y1:S,y2:k,y3:C}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const c=ds(s.rtl,this.x,this.width);for(t.x=Qi(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=Yt(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,u=Yt(r.bodyFont),f=Qi(this,"left",r),h=i.x(f),d=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+d;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(h,c)+c/2,x=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,ru(t,m,b,x),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,ru(t,m,b,x)}else{t.lineWidth=ht(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const m=i.leftForLtr(h,c),b=i.leftForLtr(i.xPlus(h,1),c-2),x=si(o.borderRadius);Object.values(x).some(v=>v!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,ya(t,{x:m,y:g,w:c,h:l,radius:x}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),ya(t,{x:b,y:g+1,w:c-2,h:l-2,radius:x}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,c,l),t.strokeRect(m,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(b,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,f=Yt(s.bodyFont);let h=f.lineHeight,d=0;const g=ds(s.rtl,this.x,this.width),m=function(D){n.fillText(D,g.x(t.x+d),t.y+h/2),t.y+=h+r},b=g.textAlign(o);let x,v,S,k,C,$,P;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,t.x=Qi(this,b,s),n.fillStyle=s.bodyColor,yt(this.beforeBody,m),d=a&&b!=="right"?o==="center"?c/2+u:c+2+u:0,k=0,$=i.length;k<$;++k){for(x=i[k],v=this.labelTextColors[k],n.fillStyle=v,yt(x.before,m),S=x.lines,a&&S.length&&(this._drawColorBox(n,t,k,g,s),h=Math.max(f.lineHeight,l)),C=0,P=S.length;C<P;++C)m(S[C]),h=f.lineHeight;yt(x.after,m)}d=0,h=f.lineHeight,yt(this.afterBody,m),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=ds(s.rtl,this.x,this.width);for(t.x=Qi(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=Yt(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=s,{topLeft:f,topRight:h,bottomLeft:d,bottomRight:g}=si(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+d,l+u),n.quadraticCurveTo(a,l+u,a,l+u-d),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Ws[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Nu(this,t),l=Object.assign({},o,this._size),c=Fu(n,t,l),u=Bu(t,l,c,n);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Te(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),Ld(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),Dd(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!kr(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),l=n||!kr(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=Ws[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}W(Sa,"positioners",Ws);var Ow={id:"tooltip",_element:Sa,positioners:Ws,afterInit(e,t,n){n&&(e.tooltip=new Sa({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Yd},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Pw=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function Mw(e,t,n,s){const i=e.indexOf(t);if(i===-1)return Pw(e,t,n,s);const r=e.lastIndexOf(t);return i!==r?n:i}const Iw=(e,t)=>e===null?null:ye(Math.round(e),0,t);function ju(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ka extends Li{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:r}of n)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Ut(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:Mw(s,t,mt(n,t),this._addedLabels),Iw(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)i.push({value:o});return i}getLabelForValue(t){return ju.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}W(ka,"id","category"),W(ka,"defaults",{ticks:{callback:ju}});const go={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ce=Object.keys(go);function Vu(e,t){return e-t}function Uu(e,t){if(Ut(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),hn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Tr(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function Wu(e,t,n,s){const i=ce.length;for(let r=ce.indexOf(e);r<i-1;++r){const o=go[ce[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return ce[r]}return ce[i-1]}function Lw(e,t,n,s,i){for(let r=ce.length-1;r>=ce.indexOf(n);r--){const o=ce[r];if(go[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return ce[n?ce.indexOf(n):0]}function Dw(e){for(let t=ce.indexOf(e)+1,n=ce.length;t<n;++t)if(go[ce[t]].common)return ce[t]}function qu(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=il(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function $w(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function Ku(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:$w(e,s,i,n)}class Ir extends Li{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new ev._date(t.adapters.date);i.init(n),ti(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Uu(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=hn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=hn(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=Y0(i,r,o);return this._unit=n.unit||(s.autoSkip?Wu(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):Lw(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Dw(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),Ku(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=ye(n,0,o),s=ye(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||Wu(r.minUnit,n,s,this._getLabelCapacity(n)),a=mt(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Tr(l)||l===!0,u={};let f=n,h,d;if(c&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,c?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(h=f,d=0;h<s;h=+t.add(h,a,o),d++)qu(u,h,g);return(h===s||i.bounds==="ticks"||d===1)&&qu(u,h,g),Object.keys(u).sort(Vu).map(m=>+m)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return At(o,[t,n,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],h=s[n],d=c&&f&&h&&h.major;return this._adapter.format(t,i||(d?f:u))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=jn(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,Ku(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(Uu(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Q0(t.sort(Vu))}}W(Ir,"id","time"),W(Ir,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ji(e,t,n){let s=0,i=e.length-1,r,o,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=ba(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=ba(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class Gu extends Ir{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Ji(n,this.min),this._tableRange=Ji(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=s&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Ji(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Ji(this._table,s*this._tableRange+this._minPos,!0)}}W(Gu,"id","timeseries"),W(Gu,"defaults",Ir.defaults);const Xd={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},Nw={ariaLabel:{type:String},ariaDescribedby:{type:String}},Fw={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...Xd,...Nw},Bw=hh[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function is(e){return Ai(e)?ct(e):e}function zw(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return Ai(t)?new Proxy(e,{}):e}function Hw(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function Qd(e,t){e.labels=t}function Jd(e,t,n){const s=[];e.datasets=t.map(i=>{const r=e.datasets.find(o=>o[n]===i[n]);return!r||!i.data||s.includes(r)?{...i}:(s.push(r),Object.assign(r,i),r)})}function jw(e,t){const n={labels:[],datasets:[]};return Qd(n,e.labels),Jd(n,e.datasets,t),n}const Vw=qr({props:Fw,setup(e,t){let{expose:n,slots:s}=t;const i=vt(null),r=Ba(null);n({chart:r});const o=()=>{if(!i.value)return;const{type:c,data:u,options:f,plugins:h,datasetIdKey:d}=e,g=jw(u,d),m=zw(g,u);r.value=new po(i.value,{type:c,data:m,options:{...f},plugins:h})},a=()=>{const c=ct(r.value);c&&(e.destroyDelay>0?setTimeout(()=>{c.destroy(),r.value=null},e.destroyDelay):(c.destroy(),r.value=null))},l=c=>{c.update(e.updateMode)};return xs(o),Ha(a),Rn([()=>e.options,()=>e.data],(c,u)=>{let[f,h]=c,[d,g]=u;const m=ct(r.value);if(!m)return;let b=!1;if(f){const x=is(f),v=is(d);x&&x!==v&&(Hw(m,x),b=!0)}if(h){const x=is(h.labels),v=is(g.labels),S=is(h.datasets),k=is(g.datasets);x!==v&&(Qd(m.config.data,x),b=!0),S&&S!==k&&(Jd(m.config.data,S,e.datasetIdKey),b=!0)}b&&Wr(()=>{l(m)})},{deep:!0}),()=>ps("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:i},[ps("p",{},[s.default?s.default():""])])}});function Zd(e,t){return po.register(t),qr({props:Xd,setup(n,s){let{expose:i}=s;const r=Ba(null),o=a=>{r.value=a==null?void 0:a.chart};return i({chart:r}),()=>ps(Vw,Bw({ref:o},{type:e,...n}))}})}const Uw=Zd("doughnut",as),Ww=Zd("pie",xa),qw={name:"LoadingTip",props:{tip:{type:Object,required:!0,default:()=>({category:"心理小贴士",title:"每日提示",content:"保持积极的心态有助于应对挑战。"})}}},Kw={class:"loading-tip"},Gw={class:"tip-header"},Yw={class:"tip-title-group"},Xw={class:"tip-category"},Qw={class:"tip-title"},Jw={class:"tip-content"};function Zw(e,t,n,s,i,r){return L(),B("div",Kw,[p("div",Gw,[t[0]||(t[0]=p("i",{class:"fas fa-lightbulb tip-icon"},null,-1)),p("div",Yw,[p("div",Xw,G(n.tip.category),1),p("div",Qw,G(n.tip.title),1)])]),p("div",Jw,G(n.tip.content),1)])}const Si=Wt(qw,[["render",Zw],["__scopeId","data-v-916747f7"]]);function gl(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Jn=gl();function tp(e){Jn=e}var ri={exec:()=>null};function bt(e,t=""){let n=typeof e=="string"?e:e.source;const s={replace:(i,r)=>{let o=typeof r=="string"?r:r.source;return o=o.replace(se.caret,"$1"),n=n.replace(i,o),s},getRegex:()=>new RegExp(n,t)};return s}var se={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},t1=/^(?:[ \t]*(?:\n|$))+/,e1=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,n1=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Di=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,s1=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ml=/(?:[*+-]|\d{1,9}[.)])/,ep=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,np=bt(ep).replace(/bull/g,ml).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),i1=bt(ep).replace(/bull/g,ml).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),bl=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,r1=/^[^\n]+/,_l=/(?!\s*\])(?:\\.|[^\[\]\\])+/,o1=bt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",_l).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),a1=bt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ml).getRegex(),mo="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",yl=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,l1=bt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",yl).replace("tag",mo).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),sp=bt(bl).replace("hr",Di).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mo).getRegex(),c1=bt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",sp).getRegex(),xl={blockquote:c1,code:e1,def:o1,fences:n1,heading:s1,hr:Di,html:l1,lheading:np,list:a1,newline:t1,paragraph:sp,table:ri,text:r1},Yu=bt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Di).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mo).getRegex(),u1={...xl,lheading:i1,table:Yu,paragraph:bt(bl).replace("hr",Di).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Yu).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mo).getRegex()},f1={...xl,html:bt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",yl).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ri,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:bt(bl).replace("hr",Di).replace("heading",` *#{1,6} *[^
]`).replace("lheading",np).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},h1=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,d1=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ip=/^( {2,}|\\)\n(?!\s*$)/,p1=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,bo=/[\p{P}\p{S}]/u,vl=/[\s\p{P}\p{S}]/u,rp=/[^\s\p{P}\p{S}]/u,g1=bt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,vl).getRegex(),op=/(?!~)[\p{P}\p{S}]/u,m1=/(?!~)[\s\p{P}\p{S}]/u,b1=/(?:[^\s\p{P}\p{S}]|~)/u,_1=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,ap=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,y1=bt(ap,"u").replace(/punct/g,bo).getRegex(),x1=bt(ap,"u").replace(/punct/g,op).getRegex(),lp="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",v1=bt(lp,"gu").replace(/notPunctSpace/g,rp).replace(/punctSpace/g,vl).replace(/punct/g,bo).getRegex(),w1=bt(lp,"gu").replace(/notPunctSpace/g,b1).replace(/punctSpace/g,m1).replace(/punct/g,op).getRegex(),S1=bt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,rp).replace(/punctSpace/g,vl).replace(/punct/g,bo).getRegex(),k1=bt(/\\(punct)/,"gu").replace(/punct/g,bo).getRegex(),R1=bt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),E1=bt(yl).replace("(?:-->|$)","-->").getRegex(),A1=bt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",E1).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Lr=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,T1=bt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Lr).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),cp=bt(/^!?\[(label)\]\[(ref)\]/).replace("label",Lr).replace("ref",_l).getRegex(),up=bt(/^!?\[(ref)\](?:\[\])?/).replace("ref",_l).getRegex(),C1=bt("reflink|nolink(?!\\()","g").replace("reflink",cp).replace("nolink",up).getRegex(),wl={_backpedal:ri,anyPunctuation:k1,autolink:R1,blockSkip:_1,br:ip,code:d1,del:ri,emStrongLDelim:y1,emStrongRDelimAst:v1,emStrongRDelimUnd:S1,escape:h1,link:T1,nolink:up,punctuation:g1,reflink:cp,reflinkSearch:C1,tag:A1,text:p1,url:ri},O1={...wl,link:bt(/^!?\[(label)\]\((.*?)\)/).replace("label",Lr).getRegex(),reflink:bt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Lr).getRegex()},Ra={...wl,emStrongRDelimAst:w1,emStrongLDelim:x1,url:bt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},P1={...Ra,br:bt(ip).replace("{2,}","*").getRegex(),text:bt(Ra.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Zi={normal:xl,gfm:u1,pedantic:f1},Fs={normal:wl,gfm:Ra,breaks:P1,pedantic:O1},M1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xu=e=>M1[e];function Ve(e,t){if(t){if(se.escapeTest.test(e))return e.replace(se.escapeReplace,Xu)}else if(se.escapeTestNoEncode.test(e))return e.replace(se.escapeReplaceNoEncode,Xu);return e}function Qu(e){try{e=encodeURI(e).replace(se.percentDecode,"%")}catch{return null}return e}function Ju(e,t){var r;const n=e.replace(se.findPipe,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),s=n.split(se.splitPipe);let i=0;if(s[0].trim()||s.shift(),s.length>0&&!((r=s.at(-1))!=null&&r.trim())&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;i<s.length;i++)s[i]=s[i].trim().replace(se.slashPipe,"|");return s}function Bs(e,t,n){const s=e.length;if(s===0)return"";let i=0;for(;i<s&&e.charAt(s-i-1)===t;)i++;return e.slice(0,s-i)}function I1(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let s=0;s<e.length;s++)if(e[s]==="\\")s++;else if(e[s]===t[0])n++;else if(e[s]===t[1]&&(n--,n<0))return s;return n>0?-2:-1}function Zu(e,t,n,s,i){const r=t.href,o=t.title||null,a=e[1].replace(i.other.outputLinkReplace,"$1");s.state.inLink=!0;const l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:r,title:o,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,l}function L1(e,t,n){const s=e.match(n.other.indentCodeCompensation);if(s===null)return t;const i=s[1];return t.split(`
`).map(r=>{const o=r.match(n.other.beginningSpace);if(o===null)return r;const[a]=o;return a.length>=i.length?r.slice(i.length):r}).join(`
`)}var Dr=class{constructor(e){W(this,"options");W(this,"rules");W(this,"lexer");this.options=e||Jn}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Bs(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],s=L1(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){const s=Bs(n,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(n=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Bs(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=Bs(t[0],`
`).split(`
`),s="",i="";const r=[];for(;n.length>0;){let o=!1;const a=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),o=!0;else if(!o)a.push(n[l]);else break;n=n.slice(l);const c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${c}`:c,i=i?`${i}
${u}`:u;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,r,!0),this.lexer.state.top=f,n.length===0)break;const h=r.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){const d=h,g=d.raw+`
`+n.join(`
`),m=this.blockquote(g);r[r.length-1]=m,s=s.substring(0,s.length-d.raw.length)+m.raw,i=i.substring(0,i.length-d.text.length)+m.text;break}else if((h==null?void 0:h.type)==="list"){const d=h,g=d.raw+`
`+n.join(`
`),m=this.list(g);r[r.length-1]=m,s=s.substring(0,s.length-h.raw.length)+m.raw,i=i.substring(0,i.length-d.raw.length)+m.raw,n=g.substring(r.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:r,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,i={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const r=this.rules.other.listItemRegex(n);let o=!1;for(;e;){let l=!1,c="",u="";if(!(t=r.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,x=>" ".repeat(3*x.length)),h=e.split(`
`,1)[0],d=!f.trim(),g=0;if(this.options.pedantic?(g=2,u=f.trimStart()):d?g=t[1].length+1:(g=t[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,u=f.slice(g),g+=t[1].length),d&&this.rules.other.blankLine.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),l=!0),!l){const x=this.rules.other.nextBulletRegex(g),v=this.rules.other.hrRegex(g),S=this.rules.other.fencesBeginRegex(g),k=this.rules.other.headingBeginRegex(g),C=this.rules.other.htmlBeginRegex(g);for(;e;){const $=e.split(`
`,1)[0];let P;if(h=$,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),P=h):P=h.replace(this.rules.other.tabCharGlobal,"    "),S.test(h)||k.test(h)||C.test(h)||x.test(h)||v.test(h))break;if(P.search(this.rules.other.nonSpaceChar)>=g||!h.trim())u+=`
`+P.slice(g);else{if(d||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||S.test(f)||k.test(f)||v.test(f))break;u+=`
`+h}!d&&!h.trim()&&(d=!0),c+=$+`
`,e=e.substring($.length+1),f=P.slice(g)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let m=null,b;this.options.gfm&&(m=this.rules.other.listIsTask.exec(u),m&&(b=m[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!m,checked:b,loose:!1,text:u,tokens:[]}),i.raw+=c}const a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){const c=i.items[l].tokens.filter(f=>f.type==="space"),u=c.length>0&&c.some(f=>this.rules.other.anyLine.test(f.raw));i.loose=u}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:s,title:i}}}table(e){var o;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const n=Ju(t[1]),s=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(o=t[3])!=null&&o.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const a of s)this.rules.other.tableAlignRight.test(a)?r.align.push("right"):this.rules.other.tableAlignCenter.test(a)?r.align.push("center"):this.rules.other.tableAlignLeft.test(a)?r.align.push("left"):r.align.push(null);for(let a=0;a<n.length;a++)r.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:r.align[a]});for(const a of i)r.rows.push(Ju(a,r.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:r.align[c]})));return r}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const r=Bs(n.slice(0,-1),"\\");if((n.length-r.length)%2===0)return}else{const r=I1(t[2],"()");if(r===-2)return;if(r>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let s=t[2],i="";if(this.options.pedantic){const r=this.rules.other.pedanticHrefTitle.exec(s);r&&(s=r[1],i=r[3])}else i=t[3]?t[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?s=s.slice(1):s=s.slice(1,-1)),Zu(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const s=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[s.toLowerCase()];if(!i){const r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return Zu(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(s[1]||s[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const r=[...s[0]].length-1;let o,a,l=r,c=0;const u=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+r);(s=u.exec(t))!=null;){if(o=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!o)continue;if(a=[...o].length,s[3]||s[4]){l+=a;continue}else if((s[5]||s[6])&&r%3&&!((r+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);const f=[...s[0]][0].length,h=e.slice(0,r+s.index+f+a);if(Math.min(r,a)%2){const g=h.slice(1,-1);return{type:"em",raw:h,text:g,tokens:this.lexer.inlineTokens(g)}}const d=h.slice(2,-2);return{type:"strong",raw:h,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," ");const s=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return s&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,s;return t[2]==="@"?(n=t[1],s="mailto:"+n):(n=t[1],s=n),{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let s,i;if(t[2]==="@")s=t[0],i="mailto:"+s;else{let r;do r=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(r!==t[0]);s=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},an=class Ea{constructor(t){W(this,"tokens");W(this,"options");W(this,"state");W(this,"tokenizer");W(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Jn,this.options.tokenizer=this.options.tokenizer||new Dr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:se,block:Zi.normal,inline:Fs.normal};this.options.pedantic?(n.block=Zi.pedantic,n.inline=Fs.pedantic):this.options.gfm&&(n.block=Zi.gfm,this.options.breaks?n.inline=Fs.breaks:n.inline=Fs.gfm),this.tokenizer.rules=n}static get rules(){return{block:Zi,inline:Fs}}static lex(t,n){return new Ea(n).lex(t)}static lexInline(t,n){return new Ea(n).inlineTokens(t)}lex(t){t=t.replace(se.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const s=this.inlineQueue[n];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],s=!1){var i,r,o;for(this.options.pedantic&&(t=t.replace(se.tabCharGlobal,"    ").replace(se.spaceLine,""));t;){let a;if((r=(i=this.options.extensions)==null?void 0:i.block)!=null&&r.some(c=>(a=c.call({lexer:this},t,n))?(t=t.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);const c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),n.push(a);continue}let l=t;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0;const u=t.slice(1);let f;this.options.extensions.startBlock.forEach(h=>{f=h.call({lexer:this},u),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const c=n.at(-1);s&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),s=l.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(t){const c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var a,l,c;let s=t,i=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,i.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let r=!1,o="";for(;t;){r||(o=""),r=!1;let u;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(h=>(u=h.call({lexer:this},t,n))?(t=t.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(u.raw.length);const h=n.at(-1);u.type==="text"&&(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(t,s,o)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(t)){t=t.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(t))){t=t.substring(u.raw.length),n.push(u);continue}let f=t;if((c=this.options.extensions)!=null&&c.startInline){let h=1/0;const d=t.slice(1);let g;this.options.extensions.startInline.forEach(m=>{g=m.call({lexer:this},d),typeof g=="number"&&g>=0&&(h=Math.min(h,g))}),h<1/0&&h>=0&&(f=t.substring(0,h+1))}if(u=this.tokenizer.inlineText(f)){t=t.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),r=!0;const h=n.at(-1);(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):n.push(u);continue}if(t){const h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return n}},$r=class{constructor(e){W(this,"options");W(this,"parser");this.options=e||Jn}space(e){return""}code({text:e,lang:t,escaped:n}){var r;const s=(r=(t||"").match(se.notSpaceStart))==null?void 0:r[0],i=e.replace(se.endingNewline,"")+`
`;return s?'<pre><code class="language-'+Ve(s)+'">'+(n?i:Ve(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Ve(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,n=e.start;let s="";for(let o=0;o<e.items.length;o++){const a=e.items[o];s+=this.listitem(a)}const i=t?"ol":"ul",r=t&&n!==1?' start="'+n+'"':"";return"<"+i+r+`>
`+s+"</"+i+`>
`}listitem(e){var n;let t="";if(e.task){const s=this.checkbox({checked:!!e.checked});e.loose?((n=e.tokens[0])==null?void 0:n.type)==="paragraph"?(e.tokens[0].text=s+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=s+" "+Ve(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):t+=s+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let s="";for(let i=0;i<e.rows.length;i++){const r=e.rows[i];n="";for(let o=0;o<r.length;o++)n+=this.tablecell(r[o]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Ve(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const s=this.parser.parseInline(n),i=Qu(e);if(i===null)return s;e=i;let r='<a href="'+e+'"';return t&&(r+=' title="'+Ve(t)+'"'),r+=">"+s+"</a>",r}image({href:e,title:t,text:n,tokens:s}){s&&(n=this.parser.parseInline(s,this.parser.textRenderer));const i=Qu(e);if(i===null)return Ve(n);e=i;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${Ve(t)}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Ve(e.text)}},Sl=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},ln=class Aa{constructor(t){W(this,"options");W(this,"renderer");W(this,"textRenderer");this.options=t||Jn,this.options.renderer=this.options.renderer||new $r,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Sl}static parse(t,n){return new Aa(n).parse(t)}static parseInline(t,n){return new Aa(n).parseInline(t)}parse(t,n=!0){var i,r;let s="";for(let o=0;o<t.length;o++){const a=t[o];if((r=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&r[a.type]){const c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){s+=u||"";continue}}const l=a;switch(l.type){case"space":{s+=this.renderer.space(l);continue}case"hr":{s+=this.renderer.hr(l);continue}case"heading":{s+=this.renderer.heading(l);continue}case"code":{s+=this.renderer.code(l);continue}case"table":{s+=this.renderer.table(l);continue}case"blockquote":{s+=this.renderer.blockquote(l);continue}case"list":{s+=this.renderer.list(l);continue}case"html":{s+=this.renderer.html(l);continue}case"paragraph":{s+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;o+1<t.length&&t[o+1].type==="text";)c=t[++o],u+=`
`+this.renderer.text(c);n?s+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):s+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return s}parseInline(t,n=this.renderer){var i,r;let s="";for(let o=0;o<t.length;o++){const a=t[o];if((r=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&r[a.type]){const c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){s+=c||"";continue}}const l=a;switch(l.type){case"escape":{s+=n.text(l);break}case"html":{s+=n.html(l);break}case"link":{s+=n.link(l);break}case"image":{s+=n.image(l);break}case"strong":{s+=n.strong(l);break}case"em":{s+=n.em(l);break}case"codespan":{s+=n.codespan(l);break}case"br":{s+=n.br(l);break}case"del":{s+=n.del(l);break}case"text":{s+=n.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return s}},qo,ur=(qo=class{constructor(e){W(this,"options");W(this,"block");this.options=e||Jn}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?an.lex:an.lexInline}provideParser(){return this.block?ln.parse:ln.parseInline}},W(qo,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),qo),D1=class{constructor(...e){W(this,"defaults",gl());W(this,"options",this.setOptions);W(this,"parse",this.parseMarkdown(!0));W(this,"parseInline",this.parseMarkdown(!1));W(this,"Parser",ln);W(this,"Renderer",$r);W(this,"TextRenderer",Sl);W(this,"Lexer",an);W(this,"Tokenizer",Dr);W(this,"Hooks",ur);this.use(...e)}walkTokens(e,t){var s,i;let n=[];for(const r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{const o=r;for(const a of o.header)n=n.concat(this.walkTokens(a.tokens,t));for(const a of o.rows)for(const l of a)n=n.concat(this.walkTokens(l.tokens,t));break}case"list":{const o=r;n=n.concat(this.walkTokens(o.items,t));break}default:{const o=r;(i=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&i[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{const l=o[a].flat(1/0);n=n.concat(this.walkTokens(l,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const s={...n};if(s.async=this.defaults.async||s.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const r=t.renderers[i.name];r?t.renderers[i.name]=function(...o){let a=i.renderer.apply(this,o);return a===!1&&(a=r.apply(this,o)),a}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const r=t[i.level];r?r.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),s.extensions=t),n.renderer){const i=this.defaults.renderer||new $r(this.defaults);for(const r in n.renderer){if(!(r in i))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;const o=r,a=n.renderer[o],l=i[o];i[o]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u||""}}s.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new Dr(this.defaults);for(const r in n.tokenizer){if(!(r in i))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;const o=r,a=n.tokenizer[o],l=i[o];i[o]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}s.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new ur;for(const r in n.hooks){if(!(r in i))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;const o=r,a=n.hooks[o],l=i[o];ur.passThroughHooks.has(r)?i[o]=c=>{if(this.defaults.async)return Promise.resolve(a.call(i,c)).then(f=>l.call(i,f));const u=a.call(i,c);return l.call(i,u)}:i[o]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}s.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,r=n.walkTokens;s.walkTokens=function(o){let a=[];return a.push(r.call(this,o)),i&&(a=a.concat(i.call(this,o))),a}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return an.lex(e,t??this.defaults)}parser(e,t){return ln.parse(e,t??this.defaults)}parseMarkdown(e){return(n,s)=>{const i={...s},r={...this.defaults,...i},o=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));r.hooks&&(r.hooks.options=r,r.hooks.block=e);const a=r.hooks?r.hooks.provideLexer():e?an.lex:an.lexInline,l=r.hooks?r.hooks.provideParser():e?ln.parse:ln.parseInline;if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(n):n).then(c=>a(c,r)).then(c=>r.hooks?r.hooks.processAllTokens(c):c).then(c=>r.walkTokens?Promise.all(this.walkTokens(c,r.walkTokens)).then(()=>c):c).then(c=>l(c,r)).then(c=>r.hooks?r.hooks.postprocess(c):c).catch(o);try{r.hooks&&(n=r.hooks.preprocess(n));let c=a(n,r);r.hooks&&(c=r.hooks.processAllTokens(c)),r.walkTokens&&this.walkTokens(c,r.walkTokens);let u=l(c,r);return r.hooks&&(u=r.hooks.postprocess(u)),u}catch(c){return o(c)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+Ve(n.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(n);throw n}}},Yn=new D1;function dt(e,t){return Yn.parse(e,t)}dt.options=dt.setOptions=function(e){return Yn.setOptions(e),dt.defaults=Yn.defaults,tp(dt.defaults),dt};dt.getDefaults=gl;dt.defaults=Jn;dt.use=function(...e){return Yn.use(...e),dt.defaults=Yn.defaults,tp(dt.defaults),dt};dt.walkTokens=function(e,t){return Yn.walkTokens(e,t)};dt.parseInline=Yn.parseInline;dt.Parser=ln;dt.parser=ln.parse;dt.Renderer=$r;dt.TextRenderer=Sl;dt.Lexer=an;dt.lexer=an.lex;dt.Tokenizer=Dr;dt.Hooks=ur;dt.parse=dt;dt.options;dt.setOptions;dt.use;dt.walkTokens;dt.parseInline;ln.parse;an.lex;const $1={class:"dashboard-container"},N1={key:0,class:"loading-state"},F1={key:1,class:"error-state alert alert-danger"},B1={key:2,class:"content-wrapper"},z1={class:"dashboard-grid"},H1={class:"chart-card card"},j1={class:"chart-wrapper"},V1={class:"chart-card card"},U1={class:"chart-wrapper"},W1={class:"ai-analysis-section card"},q1={class:"ai-header"},K1=["disabled"],G1={key:0},Y1={key:1},X1={class:"ai-content"},Q1={key:0,class:"loading-tip-small"},J1={key:1,class:"alert alert-danger"},Z1=["innerHTML"],tS={key:3,class:"placeholder"},eS={__name:"DashboardView",setup(e){po.register(ww,Ow,xw,Us,ka);const t=vs(),n=Ct(()=>t.state.loading),s=Ct(()=>t.state.error),i=Ct(()=>t.state.stats),r=vt(!1),o=vt(null),a=vt(""),l=async()=>{var h,d;if(i.value){r.value=!0,o.value=null,a.value="";try{const g=await ae.stats.getAIAnalysis(i.value);a.value=g.data.analysis_text}catch(g){o.value=((d=(h=g.response)==null?void 0:h.data)==null?void 0:d.detail)||g.message||"未知错误"}finally{r.value=!1}}},c=h=>dt(h),u=(h,d)=>!h||!h.labels||!h.values?{labels:[],datasets:[]}:{labels:h.labels,datasets:[{label:d,backgroundColor:["#42A5F5","#66BB6A","#FFA726","#26A69A","#AB47BC","#FF7043","#8D6E63","#EC407A","#78909C"],data:h.values}]},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1}}};return xs(()=>{t.dispatch("fetchStats")}),(h,d)=>(L(),B("div",$1,[d[5]||(d[5]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-chart-pie"}),nt(" 数据分析")]),p("p",null,"查看系统关键指标，并获取AI智能分析洞察。")],-1)),n.value?(L(),B("div",N1,[ut(Si,{message:"正在加载统计数据..."})])):Tt("",!0),s.value?(L(),B("div",F1," 加载数据时出错: "+G(s.value),1)):Tt("",!0),i.value&&!n.value?(L(),B("div",B1,[p("div",z1,[p("div",H1,[d[0]||(d[0]=p("h3",null,"用户年龄分布",-1)),p("div",j1,[i.value.ageData?(L(),fi(kn(Ww),{key:0,data:u(i.value.ageData,"年龄分布"),options:f},null,8,["data"])):Tt("",!0)])]),p("div",V1,[d[1]||(d[1]=p("h3",null,"用户性别分布",-1)),p("div",U1,[i.value.genderData?(L(),fi(kn(Uw),{key:0,data:u(i.value.genderData,"性别分布"),options:f},null,8,["data"])):Tt("",!0)])])]),p("div",W1,[p("div",q1,[d[4]||(d[4]=p("h3",null,[p("i",{class:"fas fa-robot"}),nt(" AI 智能分析")],-1)),p("button",{onClick:l,class:"btn btn-primary",disabled:r.value},[r.value?(L(),B("span",G1,d[2]||(d[2]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 分析中...")]))):(L(),B("span",Y1,d[3]||(d[3]=[p("i",{class:"fas fa-play-circle"},null,-1),nt(" 启动 AI 分析")])))],8,K1)]),p("div",X1,[r.value?(L(),B("div",Q1,[ut(Si,{message:"AI 正在深度解读数据，请稍候..."})])):o.value?(L(),B("div",J1," AI 分析失败: "+G(o.value),1)):a.value?(L(),B("div",{key:2,class:"markdown-content",innerHTML:c(a.value)},null,8,Z1)):(L(),B("div",tS," 点击“启动 AI 分析”按钮，获取关于当前数据的智能洞察和建议。 "))])])])):Tt("",!0)]))}},nS=Wt(eS,[["__scopeId","data-v-64f9f4b0"]]),sS={name:"UserManagementView",computed:{...no(["users","totalUsers","loading","error"])},methods:{...so(["fetchUsers"]),async toggleUserStatus(e){if(confirm(`您确定要“${e.is_active?"禁用":"激活"}”用户 ${e.username} 吗？`))try{await this.$store.dispatch("updateUserStatus",{userId:e.id,isActive:!e.is_active}),alert(`用户 ${e.username} 已成功${e.is_active?"禁用":"激活"}！`),this.fetchUsers({skip:0,limit:100})}catch(n){alert(`操作失败: ${n.message}`)}}},created(){this.fetchUsers({skip:0,limit:100})}},iS={class:"user-management-container"},rS={class:"card"},oS={key:0,class:"loading-indicator"},aS={key:1,class:"error-display"},lS={key:2},cS={class:"table-meta"},uS={class:"table-wrapper"},fS=["onClick"];function hS(e,t,n,s,i,r){return L(),B("div",iS,[t[5]||(t[5]=p("header",{class:"page-header"},[p("h1",null,[p("i",{class:"fas fa-users-cog"}),nt(" 用户管理")]),p("p",null,"管理系统中的所有用户账户。")],-1)),p("div",rS,[e.loading?(L(),B("div",oS,t[0]||(t[0]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),p("span",null,"正在加载用户数据...",-1)]))):e.error?(L(),B("div",aS,[t[1]||(t[1]=p("i",{class:"fas fa-exclamation-triangle"},null,-1)),p("span",null,G(e.error),1)])):(L(),B("div",lS,[p("div",cS,[t[2]||(t[2]=nt(" 总计：")),p("strong",null,G(e.totalUsers),1),t[3]||(t[3]=nt(" 位用户 "))]),p("div",uS,[p("table",null,[t[4]||(t[4]=p("thead",null,[p("tr",null,[p("th",null,"ID"),p("th",null,"用户名"),p("th",null,"邮箱"),p("th",null,"全名"),p("th",null,"管理员"),p("th",null,"状态"),p("th",null,"操作")])],-1)),p("tbody",null,[(L(!0),B(jt,null,qn(e.users,o=>(L(),B("tr",{key:o.id},[p("td",null,G(o.id),1),p("td",null,G(o.username),1),p("td",null,G(o.email||"未设置"),1),p("td",null,G(o.full_name||"未设置"),1),p("td",null,[p("span",{class:Ce(["status-tag",o.is_superuser?"status-superuser":""])},G(o.is_superuser?"是":"否"),3)]),p("td",null,[p("span",{class:Ce(["status-tag",o.is_active?"status-active":"status-inactive"])},G(o.is_active?"已激活":"已禁用"),3)]),p("td",null,[p("button",{onClick:a=>r.toggleUserStatus(o),class:Ce(["btn btn-small",o.is_active?"btn-danger":"btn-primary"])},G(o.is_active?"禁用":"激活"),11,fS)])]))),128))])])])]))])])}const dS=Wt(sS,[["render",hS],["__scopeId","data-v-32258da0"]]),pS={name:"AssessmentSearchView",data(){return{searchIdCard:"",searched:!1}},computed:{...no(["assessments","loading","error"])},methods:{...so(["searchAssessments"]),handleSearch(){this.searched=!0,this.searchAssessments(this.searchIdCard.trim()||null)},viewReport(e){this.$router.push({name:"ReportDetail",params:{id:e}})},formatStatus(e){return{pending:"待处理",processing:"处理中",complete:"已完成",failed:"失败"}[e]||e},getStatusClass(e){return`status-${e}`}},created(){this.$store.commit("CLEAR_ERROR"),this.searchAssessments(null)}},gS={class:"assessment-search-container"},mS={class:"card search-card"},bS={class:"form-group"},_S=["disabled"],yS={class:"card result-card"},xS={key:0,class:"loading-indicator"},vS={key:1,class:"error-display"},wS={key:2,class:"empty-state"},SS={key:3,class:"empty-state"},kS={key:4,class:"table-wrapper"},RS=["onClick"];function ES(e,t,n,s,i,r){return L(),B("div",gS,[t[9]||(t[9]=p("header",{class:"page-header"},[p("h1",null,[p("i",{class:"fas fa-search"}),nt(" 评估查询")]),p("p",null,"通过身份证号查询历史评估记录，或查看所有最新记录。")],-1)),p("div",mS,[p("form",{onSubmit:t[1]||(t[1]=Oi((...o)=>r.handleSearch&&r.handleSearch(...o),["prevent"])),class:"search-form"},[p("div",bS,[t[2]||(t[2]=p("label",{for:"idCardSearch"},"身份证号 (可选)",-1)),Ft(p("input",{type:"text",id:"idCardSearch","onUpdate:modelValue":t[0]||(t[0]=o=>i.searchIdCard=o),placeholder:"输入身份证号进行精确查询"},null,512),[[te,i.searchIdCard]])]),p("button",{type:"submit",class:"btn btn-primary",disabled:e.loading},[t[3]||(t[3]=p("i",{class:"fas fa-search"},null,-1)),nt(" "+G(e.loading?"查询中...":"查 询"),1)],8,_S)],32)]),p("div",yS,[e.loading?(L(),B("div",xS,t[4]||(t[4]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),p("span",null,"正在加载数据...",-1)]))):e.error?(L(),B("div",vS,[t[5]||(t[5]=p("i",{class:"fas fa-exclamation-triangle"},null,-1)),p("span",null,G(e.error),1)])):!i.searched&&e.assessments.length===0?(L(),B("div",wS,t[6]||(t[6]=[p("i",{class:"fas fa-info-circle"},null,-1),p("p",null,"默认显示最新评估记录。您也可以输入身份证号进行精确查询。",-1)]))):e.assessments.length===0?(L(),B("div",SS,t[7]||(t[7]=[p("i",{class:"fas fa-file-excel"},null,-1),p("p",null,"未找到与查询条件匹配的评估记录。",-1)]))):(L(),B("div",kS,[p("table",null,[t[8]||(t[8]=p("thead",null,[p("tr",null,[p("th",null,"评估ID"),p("th",null,"被测者姓名"),p("th",null,"量表类型"),p("th",null,"评估状态"),p("th",null,"创建时间"),p("th",null,"操作")])],-1)),p("tbody",null,[(L(!0),B(jt,null,qn(e.assessments,o=>(L(),B("tr",{key:o.id},[p("td",null,G(o.id),1),p("td",null,G(o.subject_name),1),p("td",null,G(o.questionnaire_type||"仅图片"),1),p("td",null,[p("span",{class:Ce(["status-tag",r.getStatusClass(o.status)])},G(r.formatStatus(o.status)),3)]),p("td",null,G(new Date(o.created_at).toLocaleString("zh-CN")),1),p("td",null,[p("button",{class:"btn btn-small",onClick:a=>r.viewReport(o.id)}," 查看报告 ",8,RS)])]))),128))])])]))])])}const AS=Wt(pS,[["render",ES],["__scopeId","data-v-4e6e8926"]]),TS={name:"ReportDetailView",props:{id:{type:[String,Number],required:!0}},computed:{...no({report:e=>e.currentReport,loading:e=>e.loading,error:e=>e.error})},methods:{...so(["fetchReportById"]),renderMarkdown(e){return e?dt(e):"<p>报告内容为空。</p>"}},created(){this.fetchReportById(this.id)},beforeRouteUpdate(e,t,n){this.fetchReportById(e.params.id),n()}},CS={class:"report-detail-container"},OS={class:"page-header"},PS={key:0},MS={key:0,class:"loading-indicator"},IS={key:1,class:"error-display"},LS={key:2,class:"report-layout"},DS={class:"card info-panel"},$S={class:"main-panel"},NS={class:"card report-content-card"},FS=["innerHTML"],BS={class:"card tags-card"},zS={key:0,class:"tags-container"},HS={key:1,class:"no-tags"};function jS(e,t,n,s,i,r){return L(),B("div",CS,[p("header",OS,[t[0]||(t[0]=p("h1",null,[p("i",{class:"fas fa-file-invoice"}),nt(" 评估报告详情")],-1)),e.report?(L(),B("p",PS,"报告 ID: "+G(e.report.id)+" | 被测者: "+G(e.report.subject_name),1)):Tt("",!0)]),e.loading?(L(),B("div",MS,t[1]||(t[1]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),p("span",null,"正在加载报告...",-1)]))):e.error?(L(),B("div",IS,[t[2]||(t[2]=p("i",{class:"fas fa-exclamation-triangle"},null,-1)),p("span",null,G(e.error),1)])):e.report?(L(),B("div",LS,[p("div",DS,[t[11]||(t[11]=p("h3",null,[p("i",{class:"fas fa-user-circle"}),nt(" 基础信息")],-1)),p("ul",null,[p("li",null,[t[3]||(t[3]=p("strong",null,"姓名:",-1)),nt(" "+G(e.report.subject_name),1)]),p("li",null,[t[4]||(t[4]=p("strong",null,"年龄:",-1)),nt(" "+G(e.report.age),1)]),p("li",null,[t[5]||(t[5]=p("strong",null,"性别:",-1)),nt(" "+G(e.report.gender),1)]),p("li",null,[t[6]||(t[6]=p("strong",null,"身份证号:",-1)),nt(" "+G(e.report.id_card||"未提供"),1)]),p("li",null,[t[7]||(t[7]=p("strong",null,"职业:",-1)),nt(" "+G(e.report.occupation||"未提供"),1)]),p("li",null,[t[8]||(t[8]=p("strong",null,"案件名称:",-1)),nt(" "+G(e.report.case_name||"未提供"),1)]),p("li",null,[t[9]||(t[9]=p("strong",null,"量表类型:",-1)),nt(" "+G(e.report.questionnaire_type||"仅图片分析"),1)]),p("li",null,[t[10]||(t[10]=p("strong",null,"提交时间:",-1)),nt(" "+G(new Date(e.report.created_at).toLocaleString("zh-CN")),1)])])]),p("div",$S,[p("div",NS,[t[12]||(t[12]=p("h3",null,[p("i",{class:"fas fa-brain"}),nt(" AI 综合分析报告")],-1)),p("div",{class:"markdown-content",innerHTML:r.renderMarkdown(e.report.report_text)},null,8,FS)]),p("div",BS,[t[13]||(t[13]=p("h3",null,[p("i",{class:"fas fa-tags"}),nt(" 关联属性标签")],-1)),e.report.attributes&&e.report.attributes.length>0?(L(),B("div",zS,[(L(!0),B(jt,null,qn(e.report.attributes,o=>(L(),B("span",{key:o.id,class:"tag"},G(o.name),1))),128))])):(L(),B("p",HS,"暂无关联标签。"))])])])):Tt("",!0)])}const VS=Wt(TS,[["render",jS],["__scopeId","data-v-31cd71dd"]]),US={name:"InterrogationInputView",data(){return{form:{person_name:"",person_gender:"男",person_age:null,is_minor:!1,person_id_type_number:"",person_address:"",person_contact:"",interrogation_location:"",interrogator_count:null,interrogator_ids:""}}},computed:{...no(["loading","error"])},watch:{"form.person_age"(e){e&&e<18&&(this.form.is_minor=!0)}},methods:{...so(["startInterrogation"]),async handleStart(){if(!this.form.person_name||!this.form.person_gender||!this.form.person_age||!this.form.interrogation_location){alert("请填写所有带 * 的必填项");return}try{const e=await this.startInterrogation(this.form);this.$router.push({name:"InterrogationEdit",params:{id:e.id}})}catch{}}},created(){this.$store.commit("CLEAR_ERROR")}},WS={class:"interrogation-input-container wide-page-container"},qS={class:"card wide-card"},KS={class:"form-row"},GS={class:"form-group"},YS={class:"form-group"},XS={class:"form-row"},QS={class:"form-group"},JS={class:"form-group checkbox-group"},ZS={class:"form-group"},tk={class:"form-group"},ek={class:"form-group"},nk={class:"form-group"},sk={class:"form-row"},ik={class:"form-group"},rk={class:"form-group"},ok={key:0,class:"error-display"},ak=["disabled"];function lk(e,t,n,s,i,r){return L(),B("div",WS,[t[25]||(t[25]=p("header",{class:"page-header"},[p("h1",null,[p("i",{class:"fas fa-keyboard"}),nt(" 智能审讯 - 信息录入")]),p("p",null,"请填写审讯相关的基础信息以创建笔录。")],-1)),p("div",qS,[p("form",{onSubmit:t[10]||(t[10]=Oi((...o)=>r.handleStart&&r.handleStart(...o),["prevent"]))},[t[23]||(t[23]=p("h3",{class:"form-section-title"},"被讯问人信息",-1)),p("div",KS,[p("div",GS,[t[11]||(t[11]=p("label",{for:"name"},[nt("姓名 "),p("span",{class:"required"},"*")],-1)),Ft(p("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>i.form.person_name=o),required:""},null,512),[[te,i.form.person_name]])]),p("div",YS,[t[13]||(t[13]=p("label",{for:"gender"},[nt("性别 "),p("span",{class:"required"},"*")],-1)),Ft(p("select",{id:"gender","onUpdate:modelValue":t[1]||(t[1]=o=>i.form.person_gender=o),required:""},t[12]||(t[12]=[p("option",{value:"男"},"男",-1),p("option",{value:"女"},"女",-1)]),512),[[Pm,i.form.person_gender]])])]),p("div",XS,[p("div",QS,[t[14]||(t[14]=p("label",{for:"age"},[nt("年龄 "),p("span",{class:"required"},"*")],-1)),Ft(p("input",{type:"number",id:"age","onUpdate:modelValue":t[2]||(t[2]=o=>i.form.person_age=o),required:"",min:"0"},null,512),[[te,i.form.person_age,void 0,{number:!0}]])]),p("div",JS,[Ft(p("input",{type:"checkbox",id:"is_minor","onUpdate:modelValue":t[3]||(t[3]=o=>i.form.is_minor=o)},null,512),[[Om,i.form.is_minor]]),t[15]||(t[15]=p("label",{for:"is_minor"},"是否未成年",-1))])]),p("div",ZS,[t[16]||(t[16]=p("label",{for:"id_card"},"身份证号",-1)),Ft(p("input",{type:"text",id:"id_card","onUpdate:modelValue":t[4]||(t[4]=o=>i.form.person_id_type_number=o)},null,512),[[te,i.form.person_id_type_number]])]),p("div",tk,[t[17]||(t[17]=p("label",{for:"address"},"家庭住址",-1)),Ft(p("input",{type:"text",id:"address","onUpdate:modelValue":t[5]||(t[5]=o=>i.form.person_address=o)},null,512),[[te,i.form.person_address]])]),p("div",ek,[t[18]||(t[18]=p("label",{for:"contact"},"联系方式",-1)),Ft(p("input",{type:"text",id:"contact","onUpdate:modelValue":t[6]||(t[6]=o=>i.form.person_contact=o)},null,512),[[te,i.form.person_contact]])]),t[24]||(t[24]=p("h3",{class:"form-section-title"},"审讯信息",-1)),p("div",nk,[t[19]||(t[19]=p("label",{for:"location"},[nt("审讯地点 "),p("span",{class:"required"},"*")],-1)),Ft(p("input",{type:"text",id:"location","onUpdate:modelValue":t[7]||(t[7]=o=>i.form.interrogation_location=o),required:""},null,512),[[te,i.form.interrogation_location]])]),p("div",sk,[p("div",ik,[t[20]||(t[20]=p("label",{for:"interrogator_count"},"讯问人员数量",-1)),Ft(p("input",{type:"number",id:"interrogator_count","onUpdate:modelValue":t[8]||(t[8]=o=>i.form.interrogator_count=o),min:"1"},null,512),[[te,i.form.interrogator_count,void 0,{number:!0}]])]),p("div",rk,[t[21]||(t[21]=p("label",{for:"interrogator_ids"},"讯问人员警号",-1)),Ft(p("input",{type:"text",id:"interrogator_ids","onUpdate:modelValue":t[9]||(t[9]=o=>i.form.interrogator_ids=o),placeholder:"多个警号用逗号分隔"},null,512),[[te,i.form.interrogator_ids]])])]),e.error?(L(),B("div",ok,G(e.error),1)):Tt("",!0),p("button",{type:"submit",class:"btn btn-primary",disabled:e.loading},[t[22]||(t[22]=p("i",{class:"fas fa-play-circle"},null,-1)),nt(" "+G(e.loading?"正在创建...":"创建笔录并开始"),1)],8,ak)],32)])])}const ck=Wt(US,[["render",lk],["__scopeId","data-v-0ab77df9"]]),uk={class:"editor-page-container"},fk={class:"page-header"},hk={key:0,class:"subtitle"},dk={key:0,class:"loading-state"},pk={key:1,class:"error-state alert alert-danger"},gk={key:2,class:"editor-main-content"},mk={class:"qa-list-panel"},bk={class:"qa-header"},_k=["onClick"],yk={class:"qa-grid"},xk={class:"form-group"},vk=["for"],wk=["id","onUpdate:modelValue"],Sk={class:"form-group"},kk=["for"],Rk=["id","onUpdate:modelValue"],Ek={class:"sidebar-actions"},Ak={class:"action-card"},Tk=["disabled"],Ck={key:0},Ok={key:1},Pk={class:"suggestions-content-wrapper"},Mk={key:0,class:"loading-tip-small"},Ik={key:1,class:"alert alert-danger"},Lk={key:2,class:"suggestions-list"},Dk=["onClick"],$k={class:"page-footer"},Nk=["disabled"],Fk={key:0},Bk={key:1},zk={__name:"InterrogationEditView",setup(e){const t=vs(),n=Ph(),s=to(),i=vt([]),r=vt(null),o=vt(!0),a=vt(!1),l=vt(null),c=vt([]),u=vt(!1),f=vt(null),h=vt(!1),d=vt(""),g=vt("success"),m=Ct(()=>n.params.id),b=(P,D="success",N=3e3)=>{d.value=P,g.value=D,h.value=!0,setTimeout(()=>{h.value=!1},N)},x=async()=>{o.value=!0,l.value=null;try{let P=t.state.interrogationRecord;if((!P||P.id!=m.value)&&(P=await t.dispatch("fetchInterrogationRecordById",m.value)),P)i.value=JSON.parse(JSON.stringify(P.qas||[])),r.value=JSON.parse(JSON.stringify(P.basic_info||{}));else throw new Error("未能加载到审讯记录数据。")}catch(P){l.value=P.message||"加载审讯记录失败。",console.error(P)}finally{o.value=!1}},v=()=>{i.value.push({q:"",a:"",id:Date.now()})},S=P=>{i.value.splice(P,1)},k=async()=>{u.value=!0,f.value=null,c.value=[];try{const P=await t.dispatch("suggestQuestion",{recordId:m.value,currentQAs:i.value.filter(D=>D.q.trim()!==""||D.a.trim()!=="")});c.value=P}catch(P){f.value=P.message||"获取建议时发生未知错误。",console.error(P)}finally{u.value=!1}},C=P=>{i.value.push({q:P,a:"",id:Date.now()})},$=async()=>{a.value=!0,l.value=null;try{const P={qas:i.value,basic_info:r.value};await t.dispatch("saveInterrogation",{recordId:m.value,updateData:P}),b("审讯笔录已成功保存！","success",2e3),setTimeout(()=>{s.push({name:"InterrogationList"})},2100)}catch(P){const D=P.message||"保存失败，请检查网络或联系管理员。";b(D,"error",4e3),console.error(P)}finally{a.value=!1}};return xs(()=>{x()}),(P,D)=>(L(),B("div",uk,[p("div",fk,[D[0]||(D[0]=p("h2",null,"审讯笔录编辑",-1)),r.value?(L(),B("p",hk," 被讯问人: "+G(r.value.person_name||"未知")+" | 记录ID: "+G(m.value),1)):Tt("",!0)]),o.value?(L(),B("div",dk,[ut(Si,{message:"正在加载审讯记录..."})])):Tt("",!0),l.value?(L(),B("div",pk," 加载记录时出错: "+G(l.value),1)):Tt("",!0),!o.value&&!l.value?(L(),B("div",gk,[p("div",mk,[(L(!0),B(jt,null,qn(i.value,(N,H)=>(L(),B("div",{key:N.id||H,class:"qa-pair"},[p("div",bk,[p("h4",null,"第 "+G(H+1)+" 组问答",1),p("button",{onClick:K=>S(H),class:"btn-remove",title:"删除此问答对"},D[1]||(D[1]=[p("i",{class:"fas fa-times"},null,-1)]),8,_k)]),p("div",yk,[p("div",xk,[p("label",{for:"question-"+H},"问题",8,vk),Ft(p("textarea",{id:"question-"+H,"onUpdate:modelValue":K=>N.q=K,class:"form-control",rows:"5",placeholder:"请输入问题..."},null,8,wk),[[te,N.q]])]),p("div",Sk,[p("label",{for:"answer-"+H},"回答",8,kk),Ft(p("textarea",{id:"answer-"+H,"onUpdate:modelValue":K=>N.a=K,class:"form-control",rows:"5",placeholder:"请输入回答..."},null,8,Rk),[[te,N.a]])])])]))),128)),p("button",{onClick:v,class:"btn btn-add-qa"},D[2]||(D[2]=[p("i",{class:"fas fa-plus"},null,-1),nt(" 添加新问答 ")]))]),p("aside",Ek,[p("div",Ak,[D[6]||(D[6]=p("h3",null,[p("i",{class:"fas fa-lightbulb"}),nt(" AI 智能建议")],-1)),p("button",{onClick:k,disabled:u.value,class:"btn btn-primary btn-block"},[u.value?(L(),B("span",Ck,D[3]||(D[3]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 正在获取...")]))):(L(),B("span",Ok,D[4]||(D[4]=[p("i",{class:"fas fa-magic"},null,-1),nt(" 获取AI建议问题")])))],8,Tk),p("div",Pk,[u.value?(L(),B("div",Mk,[ut(Si,{message:"AI思考中..."})])):f.value?(L(),B("div",Ik,G(f.value),1)):c.value.length>0?(L(),B("div",Lk,[D[5]||(D[5]=p("p",null,"点击建议以快速添加：",-1)),(L(!0),B(jt,null,qn(c.value,(N,H)=>(L(),B("button",{key:H,onClick:K=>C(N),class:"suggestion-item"},G(N),9,Dk))),128))])):Tt("",!0)])])])])):Tt("",!0),p("div",$k,[p("button",{onClick:$,class:"btn btn-primary btn-lg",disabled:a.value},[a.value?(L(),B("span",Fk,D[7]||(D[7]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 正在保存...")]))):(L(),B("span",Bk,D[8]||(D[8]=[p("i",{class:"fas fa-save"},null,-1),nt(" 保存笔录")])))],8,Nk)]),ut(gh,{name:"toast-fade"},{default:be(()=>[h.value?(L(),B("div",{key:0,class:Ce(["notification-toast",g.value])},[p("i",{class:Ce(g.value==="success"?"fas fa-check-circle":"fas fa-exclamation-circle")},null,2),p("span",null,G(d.value),1)],2)):Tt("",!0)]),_:1})]))}},Hk=Wt(zk,[["__scopeId","data-v-ecf0497d"]]),jk={class:"list-container"},Vk={key:0,class:"loading-state"},Uk={key:1,class:"error-state alert alert-danger"},Wk={key:2,class:"card"},qk={class:"record-table"},Kk={key:0},Gk=["onClick"],Yk={key:3,class:"pagination"},Xk=["disabled"],Qk=["disabled"],Jk={__name:"InterrogationListView",setup(e){const t=vs(),n=to(),s=vt(1),i=vt(10),r=Ct(()=>t.state.loading),o=Ct(()=>t.state.error),a=Ct(()=>t.state.interrogationList.records),l=Ct(()=>t.state.interrogationList.total),c=Ct(()=>Math.ceil(l.value/i.value)||1),u=()=>{const b=(s.value-1)*i.value;t.dispatch("fetchInterrogationList",{skip:b,limit:i.value})},f=b=>b?new Date(b).toLocaleString("zh-CN"):"N/A",h=b=>b==="completed"?"status-completed":b==="ongoing"?"status-ongoing":"status-default",d=b=>{n.push({name:"InterrogationEdit",params:{id:b}})},g=()=>{s.value>1&&(s.value--,u())},m=()=>{s.value<c.value&&(s.value++,u())};return xs(()=>{u()}),(b,x)=>(L(),B("div",jk,[x[3]||(x[3]=p("div",{class:"list-header"},[p("h2",null,"审讯记录列表"),p("p",null,"查看、搜索和管理所有已保存的审讯记录。")],-1)),r.value?(L(),B("div",Vk,[ut(Si,{message:"正在加载记录列表..."})])):Tt("",!0),o.value?(L(),B("div",Uk," 加载列表时出错: "+G(o.value),1)):Tt("",!0),!r.value&&!o.value?(L(),B("div",Wk,[p("table",qk,[x[2]||(x[2]=p("thead",null,[p("tr",null,[p("th",null,"记录ID"),p("th",null,"被讯问人"),p("th",null,"案件类型"),p("th",null,"状态"),p("th",null,"创建时间"),p("th",null,"最后更新"),p("th",null,"操作")])],-1)),p("tbody",null,[a.value.length===0?(L(),B("tr",Kk,x[0]||(x[0]=[p("td",{colspan:"7",class:"text-center"},"没有找到任何审讯记录。",-1)]))):Tt("",!0),(L(!0),B(jt,null,qn(a.value,v=>(L(),B("tr",{key:v.id},[p("td",null,G(v.id),1),p("td",null,G(v.person_name||"未命名"),1),p("td",null,G(v.case_type||"未分类"),1),p("td",null,[p("span",{class:Ce(["status-badge",h(v.status)])},G(v.status),3)]),p("td",null,G(f(v.created_at)),1),p("td",null,G(f(v.updated_at)),1),p("td",null,[p("button",{onClick:S=>d(v.id),class:"btn btn-primary btn-small"},x[1]||(x[1]=[p("i",{class:"fas fa-edit"},null,-1),nt(" 编辑 ")]),8,Gk)])]))),128))])])])):Tt("",!0),!r.value&&l.value>0?(L(),B("div",Yk,[p("button",{onClick:g,disabled:s.value===1},"上一页",8,Xk),p("span",null,"第 "+G(s.value)+" 页 / 共 "+G(c.value)+" 页 (总计 "+G(l.value)+" 条)",1),p("button",{onClick:m,disabled:s.value===c.value},"下一页",8,Qk)])):Tt("",!0)]))}},Zk=Wt(Jk,[["__scopeId","data-v-28fe950a"]]),tR="https://flk.npc.gov.cn/search.html";function Ze(e){const t=encodeURIComponent(e);return`${tR}?keyword=${t}&keywordType=1`}const tf=[{id:1,name:"中华人民共和国刑法",description:"规定犯罪、刑事责任和刑罚的法律。",link:Ze("中华人民共和国刑法")},{id:2,name:"中华人民共和国治安管理处罚法",description:"关于维护社会治安秩序，保障公共安全的法律。",link:Ze("中华人民共和国治安管理处罚法")},{id:3,name:"中华人民共和国消防法",description:"预防火灾和减少火灾危害，加强应急救援工作的法律。",link:Ze("中华人民共和国消防法")},{id:4,name:"中华人民共和国禁毒法",description:"预防和惩治毒品违法犯罪行为，保护公民身心健康的法律。",link:Ze("中华人民共和国禁毒法")},{id:5,name:"公安机关办理刑事案件程序规定",description:"公安机关办理刑事案件时应当遵守的具体程序规则。",link:Ze("公安机关办理刑事案件程序规定")},{id:6,name:"公安机关适用继续盘问规定",description:"关于公安机关在执法过程中适用继续盘问措施的规定。",link:Ze("公安机关适用继续盘问规定")},{id:7,name:"中华人民共和国刑事诉讼法",description:"进行刑事诉讼必须遵守的基本法律。",link:Ze("中华人民共和国刑事诉讼法")},{id:8,name:"道路交通事故处理程序规定",description:"公安机关交通管理部门处理道路交通事故的程序规定。",link:Ze("道路交通事故处理程序规定")},{id:9,name:"中华人民共和国人民警察法",description:"关于人民警察的性质、任务、职责、权利和义务的法律。",link:Ze("中华人民共和国人民警察法")}],eR={class:"law-query-container"},nR={class:"search-bar card"},sR={class:"law-list"},iR={class:"law-info"},rR={class:"law-name"},oR={class:"law-description"},aR={class:"law-actions"},lR=["href"],cR={key:0,class:"no-results card"},uR={__name:"LawQueryView",setup(e){const t=vt(""),n=Ct(()=>t.value?tf.filter(s=>s.name.toLowerCase().includes(t.value.toLowerCase())):tf);return(s,i)=>(L(),B("div",eR,[i[4]||(i[4]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-balance-scale"}),nt(" 法律法规查询")]),p("p",null,"快速查找常用法律法规，并链接至国家官方数据库。")],-1)),p("div",nR,[i[1]||(i[1]=p("i",{class:"fas fa-search search-icon"},null,-1)),Ft(p("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=r=>t.value=r),placeholder:"输入法规名称进行筛选...",class:"search-input"},null,512),[[te,t.value]])]),p("div",sR,[(L(!0),B(jt,null,qn(n.value,r=>(L(),B("div",{key:r.id,class:"law-item card"},[p("div",iR,[p("h3",rR,G(r.name),1),p("p",oR,G(r.description),1)]),p("div",aR,[p("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",class:"btn btn-primary"},i[2]||(i[2]=[p("i",{class:"fas fa-external-link-alt"},null,-1),nt(" 查看原文 ")]),8,lR)])]))),128)),n.value.length===0?(L(),B("div",cR,i[3]||(i[3]=[p("p",null,"未找到匹配的法规。",-1)]))):Tt("",!0)])]))}},fR=Wt(uR,[["__scopeId","data-v-0279a1d2"]]),hR={key:0,class:"form-card card"},dR={class:"form-group"},pR={key:0,class:"alert alert-danger"},gR=["disabled"],mR={key:0},bR={key:1},_R={key:1,class:"result-container"},yR={class:"report-section card"},xR={class:"guidance-section card"},vR=["innerHTML"],wR={__name:"GuidanceForm",props:{scenario:{type:String,required:!0}},setup(e){const t=e,n=vs(),s=vt(""),i=vt(null),r=vt(!1),o=vt(null),a=async()=>{r.value=!0,o.value=null,i.value=null;try{const u=await n.dispatch("fetchGuidance",{scenario:t.scenario,idCard:s.value});i.value={report_text:u.report.report_text,guidance:u.guidance}}catch(u){o.value=u.message||"获取指导方案失败。"}finally{r.value=!1}},l=u=>u?dt(u):"",c=()=>{i.value=null,s.value="",o.value=null};return(u,f)=>(L(),B("div",null,[i.value?Tt("",!0):(L(),B("div",hR,[p("form",{onSubmit:Oi(a,["prevent"])},[p("div",dR,[f[1]||(f[1]=p("label",{for:"id_card"},"请输入查询对象的身份证号:",-1)),Ft(p("input",{type:"text",id:"id_card","onUpdate:modelValue":f[0]||(f[0]=h=>s.value=h),placeholder:"输入身份证号进行查询",required:""},null,512),[[te,s.value]])]),o.value?(L(),B("div",pR,G(o.value),1)):Tt("",!0),p("button",{type:"submit",class:"btn btn-primary",disabled:r.value},[r.value?(L(),B("span",mR,f[2]||(f[2]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 查询中...")]))):(L(),B("span",bR,f[3]||(f[3]=[p("i",{class:"fas fa-search"},null,-1),nt(" 查询并生成方案")])))],8,gR)],32)])),i.value?(L(),B("div",_R,[p("div",yR,[f[4]||(f[4]=p("h3",null,[p("i",{class:"fas fa-file-invoice"}),nt(" 关联心理评估报告")],-1)),p("pre",null,G(i.value.report_text),1)]),p("div",xR,[f[5]||(f[5]=p("h3",null,[p("i",{class:"fas fa-lightbulb"}),nt(" AI 生成指导方案")],-1)),p("div",{class:"markdown-content",innerHTML:l(i.value.guidance)},null,8,vR)]),p("button",{onClick:c,class:"btn btn-secondary"},"返回重新查询")])):Tt("",!0)]))}},kl=Wt(wR,[["__scopeId","data-v-3a737590"]]),SR={class:"guidance-container"},kR={__name:"PetitionerGuidanceView",setup(e){return(t,n)=>(L(),B("div",SR,[n[0]||(n[0]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-hand-holding-heart"}),nt(" 上访户情绪疏导")]),p("p",null,"输入上访户信息以查询评估报告，并生成针对性的情绪疏导方案。")],-1)),ut(kl,{scenario:"petitioner"})]))}},RR=Wt(kR,[["__scopeId","data-v-c23f7b56"]]),ER={class:"guidance-container"},AR={__name:"JuvenileCounselingView",setup(e){return(t,n)=>(L(),B("div",ER,[n[0]||(n[0]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-child"}),nt(" 未成年人心理辅导")]),p("p",null,"输入未成年人信息以查询评估报告，并生成定制化的心理辅导方案。")],-1)),ut(kl,{scenario:"juvenile"})]))}},TR=Wt(AR,[["__scopeId","data-v-2a20f843"]]),CR={class:"guidance-container"},OR={__name:"PoliceAdjustmentView",setup(e){return(t,n)=>(L(),B("div",CR,[n[0]||(n[0]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-shield-alt"}),nt(" 民辅警心理调适")]),p("p",null,"输入民辅警信息以查询评估报告，并获取专业的心理调适建议。")],-1)),ut(kl,{scenario:"police"})]))}},PR=Wt(OR,[["__scopeId","data-v-c5a5a863"]]),MR=[{path:"/login",name:"Login",component:h0},{path:"/",component:Zy,meta:{requiresAuth:!0},children:[{path:"",name:"Dashboard",component:nS},{path:"assessment-search",name:"AssessmentSearch",component:AS},{path:"user-management",name:"UserManagement",component:dS},{path:"petitioner-guidance",name:"PetitionerGuidance",component:RR},{path:"juvenile-counseling",name:"JuvenileCounseling",component:TR},{path:"police-adjustment",name:"PoliceAdjustment",component:PR},{path:"report/:id",name:"ReportDetail",component:VS,props:!0},{path:"interrogation/new",name:"InterrogationInput",component:ck},{path:"interrogation/:id/edit",name:"InterrogationEdit",component:Hk,props:!0},{path:"interrogation/list",name:"InterrogationList",component:Zk},{path:"law-query",name:"LawQuery",component:fR}]}],Nr=Qb({history:Eb(),routes:MR});Nr.beforeEach((e,t,n)=>{const s=bd.getters.isAuthenticated;e.meta.requiresAuth&&!s?n({name:"Login"}):e.name==="Login"&&s?n({name:"Dashboard"}):n()});const Rl=$m(Hm);Rl.use(bd);Rl.use(Nr);Rl.mount("#app");


================================================================================

--- File: psychology-admin-frontend\dist-admin\assets\index-DBInCQLk.css ---
.sidebar[data-v-a00d75fa]{width:250px;background-color:var(--sidebar-bg);color:var(--sidebar-text);display:flex;flex-direction:column;height:100vh;position:fixed;left:0;top:0;box-shadow:2px 0 5px #0000001a;transition:width .3s}.sidebar-header[data-v-a00d75fa]{padding:20px;text-align:center;border-bottom:1px solid var(--secondary-color)}.logo-icon[data-v-a00d75fa]{font-size:2em;margin-bottom:10px}.sidebar-header h1[data-v-a00d75fa]{margin:0;font-size:1.5em}.sidebar-nav[data-v-a00d75fa]{flex-grow:1;overflow-y:auto}.sidebar-nav ul[data-v-a00d75fa]{list-style:none;padding:0;margin:20px 0}.sidebar-nav li a[data-v-a00d75fa]{display:flex;align-items:center;padding:15px 20px;color:var(--sidebar-text);text-decoration:none;transition:background-color .3s}.sidebar-nav li a[data-v-a00d75fa]:hover,.sidebar-nav li a.active[data-v-a00d75fa]{background-color:var(--sidebar-active-bg);color:#fff}.sidebar-nav li a i[data-v-a00d75fa]{margin-right:15px;width:20px;text-align:center}.sidebar-footer[data-v-a00d75fa]{padding:20px;border-top:1px solid var(--secondary-color)}.logout-btn[data-v-a00d75fa]{width:100%;padding:10px;background-color:#e74c3c;color:#fff;border:none;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center}.logout-btn[data-v-a00d75fa]:hover{background-color:#c0392b}.logout-btn i[data-v-a00d75fa]{margin-right:8px}.nav-item-dropdown>a[data-v-a00d75fa]{cursor:pointer;position:relative}.dropdown-arrow[data-v-a00d75fa]{margin-left:auto;transition:transform .3s ease}.nav-item-dropdown.open>a .dropdown-arrow[data-v-a00d75fa]{transform:rotate(180deg)}.submenu[data-v-a00d75fa]{list-style:none;padding:0;background-color:var(--secondary-color);margin:0}.submenu li a[data-v-a00d75fa]{padding-left:40px}.submenu li a i[data-v-a00d75fa]{font-size:.8em}.app-layout[data-v-fb2e6263]{display:flex;background-color:var(--background-color);min-height:100vh;overflow-x:hidden}.main-content[data-v-fb2e6263]{width:calc(100vw - 250px);transition:margin-left .3s ease;padding:0;overflow-y:auto;height:100vh}.fade-enter-active[data-v-fb2e6263],.fade-leave-active[data-v-fb2e6263]{transition:opacity .2s ease}.fade-enter-from[data-v-fb2e6263],.fade-leave-to[data-v-fb2e6263]{opacity:0}.login-container[data-v-47365eb3]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;width:100%;background-color:var(--background-gradient-start, #d4e6f1);background-image:linear-gradient(135deg,var(--background-gradient-start, #d4e6f1) 0%,var(--background-gradient-end, #85c1e9) 100%)}.login-box[data-v-47365eb3]{width:100%;max-width:400px;padding:40px;background-color:#fff;border-radius:8px;box-shadow:0 4px 20px #0000001a;text-align:center}.emblem-image[data-v-47365eb3]{width:90px;height:auto;margin-bottom:20px}.system-title[data-v-47365eb3]{font-size:28px;font-weight:700;color:#333;margin:0 0 10px;line-height:1.2}.system-title .subtitle[data-v-47365eb3]{display:block;font-size:16px;font-weight:400;color:#555;margin-top:8px}.login-prompt[data-v-47365eb3]{color:#6c757d;margin-bottom:30px}.form-group[data-v-47365eb3]{margin-bottom:20px;text-align:left}.form-group label[data-v-47365eb3]{display:block;margin-bottom:8px;font-weight:500}.input-wrapper[data-v-47365eb3]{position:relative}.input-wrapper i[data-v-47365eb3]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#adb5bd}.input-wrapper input[data-v-47365eb3]{width:100%;padding:12px 12px 12px 40px;border:1px solid #ced4da;border-radius:6px;font-size:16px;box-sizing:border-box}.alert-danger[data-v-47365eb3]{color:#721c24;background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:6px;padding:10px;margin-bottom:20px}.btn-block[data-v-47365eb3]{width:100%;padding:12px;font-size:16px;font-weight:600;letter-spacing:2px}.login-footer[data-v-47365eb3]{margin-top:40px;font-size:14px;color:#888}.loading-tip[data-v-916747f7]{background-color:#e6f7ff;border-left:4px solid #1890ff;border-radius:4px;padding:16px;margin:24px auto;max-width:600px}.tip-header[data-v-916747f7]{display:flex;align-items:center;margin-bottom:12px}.tip-icon[data-v-916747f7]{font-size:20px;color:#1890ff;margin-right:12px}.tip-title-group[data-v-916747f7]{flex:1}.tip-category[data-v-916747f7]{color:#1890ff;font-size:12px;font-weight:600;text-transform:uppercase}.tip-title[data-v-916747f7]{font-size:16px;font-weight:600;color:var(--primary-color)}.tip-content[data-v-916747f7]{line-height:1.6;font-size:14px;color:var(--text-color)}.dashboard-container[data-v-64f9f4b0]{width:100%;height:100%}.page-header[data-v-64f9f4b0]{margin-bottom:24px}.page-header h2[data-v-64f9f4b0]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-64f9f4b0]{color:#6c757d;margin-top:4px}.loading-state[data-v-64f9f4b0],.error-state[data-v-64f9f4b0]{text-align:center;padding:40px}.content-wrapper[data-v-64f9f4b0]{display:flex;flex-direction:column;gap:24px}.dashboard-grid[data-v-64f9f4b0]{display:grid;grid-template-columns:repeat(2,1fr);gap:24px}.chart-card[data-v-64f9f4b0]{background-color:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000012}.chart-card h3[data-v-64f9f4b0]{font-size:18px;font-weight:600;margin-bottom:16px}.chart-wrapper[data-v-64f9f4b0]{position:relative;height:350px}.ai-analysis-section[data-v-64f9f4b0]{padding:24px}.ai-header[data-v-64f9f4b0]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color);padding-bottom:16px;margin-bottom:20px}.ai-header h3[data-v-64f9f4b0]{font-size:18px;font-weight:600;margin:0;display:flex;align-items:center;gap:10px}.ai-content[data-v-64f9f4b0]{min-height:150px;display:flex;flex-direction:column;justify-content:center}.placeholder[data-v-64f9f4b0]{text-align:center;color:#6c757d;font-style:italic}.markdown-content[data-v-64f9f4b0]{line-height:1.7}[data-v-64f9f4b0] .markdown-content ul{padding-left:20px;margin-top:1em}[data-v-64f9f4b0] .markdown-content li{margin-bottom:.5em}@media (max-width: 1024px){.dashboard-grid[data-v-64f9f4b0]{grid-template-columns:1fr}}.alert-danger[data-v-64f9f4b0]{color:#991b1b;background-color:#fee2e2;border-color:#fecaca;padding:15px;border-radius:6px}.page-header[data-v-32258da0]{margin-bottom:24px}.page-header h1[data-v-32258da0]{font-size:24px;color:var(--primary-color);display:flex;align-items:center}.page-header h1 i[data-v-32258da0]{margin-right:12px}.page-header p[data-v-32258da0]{color:#888}.loading-indicator[data-v-32258da0],.error-display[data-v-32258da0]{text-align:center;padding:40px;color:#888;font-size:16px}.loading-indicator i[data-v-32258da0],.error-display i[data-v-32258da0]{margin-right:8px}.table-meta[data-v-32258da0]{margin-bottom:16px;font-size:14px}.table-wrapper[data-v-32258da0]{overflow-x:auto}.status-tag[data-v-32258da0]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;color:#fff;background-color:#909399}.status-tag.status-active[data-v-32258da0]{background-color:var(--accent-color)}.status-tag.status-inactive[data-v-32258da0]{background-color:#f56c6c}.status-tag.status-superuser[data-v-32258da0]{background-color:#e6a23c}.btn-small[data-v-32258da0]{padding:4px 8px;font-size:12px}.page-header[data-v-4e6e8926]{margin-bottom:24px}.page-header h1[data-v-4e6e8926]{font-size:24px;color:var(--primary-color);display:flex;align-items:center}.page-header h1 i[data-v-4e6e8926]{margin-right:12px}.page-header p[data-v-4e6e8926]{color:#888}.search-card[data-v-4e6e8926]{margin-bottom:24px}.search-form[data-v-4e6e8926]{display:flex;align-items:flex-end;gap:16px}.search-form .form-group[data-v-4e6e8926]{flex-grow:1;margin-bottom:0}.result-card .loading-indicator[data-v-4e6e8926],.result-card .error-display[data-v-4e6e8926],.result-card .empty-state[data-v-4e6e8926]{text-align:center;padding:40px;color:#888;font-size:16px}.result-card .loading-indicator i[data-v-4e6e8926],.result-card .error-display i[data-v-4e6e8926],.result-card .empty-state i[data-v-4e6e8926]{display:block;font-size:32px;margin-bottom:16px}.table-wrapper[data-v-4e6e8926]{overflow-x:auto}.status-tag[data-v-4e6e8926]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;color:#fff}.status-pending[data-v-4e6e8926]{background-color:#909399}.status-processing[data-v-4e6e8926]{background-color:#409eff}.status-complete[data-v-4e6e8926]{background-color:var(--accent-color)}.status-failed[data-v-4e6e8926]{background-color:#f56c6c}.btn-small[data-v-4e6e8926]{padding:4px 8px;font-size:12px}.page-header[data-v-31cd71dd]{margin-bottom:24px}.page-header h1[data-v-31cd71dd]{font-size:24px;color:var(--primary-color);display:flex;align-items:center}.page-header h1 i[data-v-31cd71dd]{margin-right:12px}.page-header p[data-v-31cd71dd]{color:#888}.loading-indicator[data-v-31cd71dd],.error-display[data-v-31cd71dd]{text-align:center;padding:60px 20px}.loading-indicator i[data-v-31cd71dd],.error-display i[data-v-31cd71dd]{display:block;font-size:40px;margin-bottom:16px}.report-layout[data-v-31cd71dd]{display:grid;grid-template-columns:300px 1fr;gap:24px}@media (max-width: 992px){.report-layout[data-v-31cd71dd]{grid-template-columns:1fr}}.card h3[data-v-31cd71dd]{margin-top:0;margin-bottom:16px;color:var(--primary-color);display:flex;align-items:center;border-bottom:1px solid var(--border-color);padding-bottom:10px}.card h3 i[data-v-31cd71dd]{margin-right:10px}.info-panel ul[data-v-31cd71dd]{list-style:none;padding:0}.info-panel li[data-v-31cd71dd]{padding:8px 0;border-bottom:1px solid #f0f0f0}.info-panel li[data-v-31cd71dd]:last-child{border-bottom:none}.info-panel strong[data-v-31cd71dd]{color:var(--secondary-color);margin-right:8px}.markdown-content[data-v-31cd71dd]{line-height:1.7}[data-v-31cd71dd] .markdown-content h1,[data-v-31cd71dd] .markdown-content h2,[data-v-31cd71dd] .markdown-content h3,[data-v-31cd71dd] .markdown-content h4,[data-v-31cd71dd] .markdown-content h5,[data-v-31cd71dd] .markdown-content h6{margin-top:1.2em;margin-bottom:.6em;color:var(--secondary-color);font-weight:600}[data-v-31cd71dd] .markdown-content p{margin-bottom:1em}[data-v-31cd71dd] .markdown-content ul,[data-v-31cd71dd] .markdown-content ol{padding-left:2em;margin-bottom:1em}[data-v-31cd71dd] .markdown-content strong{color:var(--primary-color)}.tags-container[data-v-31cd71dd]{display:flex;flex-wrap:wrap;gap:8px}.tag[data-v-31cd71dd]{background-color:#e6f7ff;border:1px solid #91d5ff;color:#1890ff;padding:4px 10px;border-radius:4px;font-size:14px}.no-tags[data-v-31cd71dd]{color:#888}.wide-page-container .wide-card[data-v-0ab77df9]{max-width:900px;margin-left:auto;margin-right:auto}.page-header[data-v-0ab77df9]{margin-bottom:24px}.page-header h1[data-v-0ab77df9]{font-size:24px;color:var(--primary-color);display:flex;align-items:center}.page-header h1 i[data-v-0ab77df9]{margin-right:12px}.page-header p[data-v-0ab77df9]{color:#888}.form-section-title[data-v-0ab77df9]{font-size:18px;color:var(--primary-color);margin-top:30px;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid var(--border-color)}.form-row[data-v-0ab77df9]{display:flex;gap:20px}.form-row .form-group[data-v-0ab77df9]{flex:1}.checkbox-group[data-v-0ab77df9]{display:flex;align-items:center;padding-top:20px}.checkbox-group input[data-v-0ab77df9]{width:auto;margin-right:10px}.checkbox-group label[data-v-0ab77df9]{margin-bottom:0;font-weight:400}.required[data-v-0ab77df9]{color:#f5222d;margin-left:4px}.error-display[data-v-0ab77df9]{color:#f5222d;margin-top:10px}button i[data-v-0ab77df9]{margin-right:8px}.editor-page-container[data-v-ecf0497d]{display:flex;flex-direction:column;width:100%;height:100%;background-color:#f0f2f5}.page-header[data-v-ecf0497d]{padding:0 24px;flex-shrink:0;border-bottom:1px solid var(--border-color);background-color:#fff}.page-header h2[data-v-ecf0497d]{font-size:22px;font-weight:700;padding:20px 0;margin:0}.subtitle[data-v-ecf0497d]{margin-top:-15px;padding-bottom:15px;color:#6c757d;font-size:14px}.loading-state[data-v-ecf0497d],.error-state[data-v-ecf0497d]{flex-grow:1;display:flex;justify-content:center;align-items:center}.editor-main-content[data-v-ecf0497d]{flex-grow:1;display:grid;grid-template-columns:2fr 1fr;gap:24px;padding:24px;overflow:hidden}.qa-list-panel[data-v-ecf0497d]{background-color:#fff;border-radius:8px;padding:24px;box-shadow:0 1px 3px #0000000d;overflow-y:auto}.qa-pair[data-v-ecf0497d]{border:1px solid #e5e7eb;border-radius:8px;padding:16px;margin-bottom:20px;background-color:#f9fafb}.qa-header[data-v-ecf0497d]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.qa-header h4[data-v-ecf0497d]{margin:0;font-size:16px;font-weight:600}.btn-remove[data-v-ecf0497d]{background:none;border:none;color:#9ca3af;cursor:pointer;font-size:16px}.btn-remove[data-v-ecf0497d]:hover{color:#ef4444}.qa-grid[data-v-ecf0497d]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-group[data-v-ecf0497d]{margin:0}.form-group label[data-v-ecf0497d]{font-weight:500;margin-bottom:8px;display:block}.form-control[data-v-ecf0497d]{width:100%;padding:10px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;resize:vertical;box-sizing:border-box}.form-control[data-v-ecf0497d]:focus{border-color:var(--accent-color);box-shadow:0 0 0 2px #42b98333;outline:none}.btn-add-qa[data-v-ecf0497d]{width:100%;padding:12px;margin-top:10px;border:1px dashed var(--accent-color);background-color:#f0fdf4;color:var(--accent-color);font-weight:600}.btn-add-qa[data-v-ecf0497d]:hover{background-color:#dcfce7}.sidebar-actions[data-v-ecf0497d]{display:flex;flex-direction:column;gap:24px}.action-card[data-v-ecf0497d]{background-color:#fff;border-radius:8px;padding:24px;box-shadow:0 1px 3px #0000000d}.action-card h3[data-v-ecf0497d]{font-size:18px;margin:0 0 16px;font-weight:600}.btn-block[data-v-ecf0497d]{width:100%}.suggestions-content-wrapper[data-v-ecf0497d]{margin-top:16px;min-height:150px;display:flex;flex-direction:column}.loading-tip-small[data-v-ecf0497d]{margin:auto}.suggestions-list[data-v-ecf0497d]{display:flex;flex-direction:column}.suggestions-list p[data-v-ecf0497d]{font-size:14px;color:#6b7280;margin-bottom:8px}.suggestion-item[data-v-ecf0497d]{width:100%;text-align:left;padding:10px;background-color:#f3f4f6;border:1px solid #e5e7eb;border-radius:6px;cursor:pointer;margin-bottom:8px}.suggestion-item[data-v-ecf0497d]:hover{background-color:#e5e7eb}.page-footer[data-v-ecf0497d]{flex-shrink:0;padding:16px 24px;background-color:#fff;border-top:1px solid var(--border-color);text-align:right;box-shadow:0 -2px 5px #0000000d}@media (max-width: 1200px){.editor-main-content[data-v-ecf0497d]{grid-template-columns:1fr}.qa-list-panel[data-v-ecf0497d]{height:auto;max-height:60vh}.sidebar-actions[data-v-ecf0497d]{overflow-y:auto}}@media (max-width: 768px){.qa-grid[data-v-ecf0497d]{grid-template-columns:1fr}.qa-header[data-v-ecf0497d]{position:relative}.btn-remove[data-v-ecf0497d]{position:absolute;top:-8px;right:-8px;background-color:#fff;border-radius:50%;width:24px;height:24px;display:flex;justify-content:center;align-items:center}}.notification-toast[data-v-ecf0497d]{position:fixed;top:80px;left:50%;transform:translate(-50%);padding:12px 20px;border-radius:8px;box-shadow:0 4px 12px #00000026;display:flex;align-items:center;gap:10px;color:#fff;z-index:1000;font-size:16px;font-weight:500}.notification-toast.success[data-v-ecf0497d]{background-color:var(--accent-color)}.notification-toast.error[data-v-ecf0497d]{background-color:#f5222d}.notification-toast i[data-v-ecf0497d]{font-size:20px}.toast-fade-enter-active[data-v-ecf0497d],.toast-fade-leave-active[data-v-ecf0497d]{transition:opacity .5s,transform .5s}.toast-fade-enter-from[data-v-ecf0497d],.toast-fade-leave-to[data-v-ecf0497d]{opacity:0;transform:translate(-50%,-20px)}.alert[data-v-ecf0497d]{padding:15px;border-radius:6px}.alert-danger[data-v-ecf0497d]{color:#991b1b;background-color:#fee2e2;border-color:#fecaca}.list-container[data-v-28fe950a]{padding:24px}.list-header[data-v-28fe950a]{margin-bottom:24px}.list-header h2[data-v-28fe950a]{font-size:24px;font-weight:700}.list-header p[data-v-28fe950a]{color:#6c757d}.card[data-v-28fe950a]{background-color:#fff;border-radius:8px;padding:0;box-shadow:0 2px 8px #0000001a;overflow:hidden}.record-table[data-v-28fe950a]{width:100%;border-collapse:collapse}.record-table th[data-v-28fe950a],.record-table td[data-v-28fe950a]{padding:12px 16px;text-align:left;border-bottom:1px solid #e8e8e8}.record-table th[data-v-28fe950a]{background-color:#fafafa;font-weight:600}.record-table tbody tr[data-v-28fe950a]:hover{background-color:#f5f5f5}.text-center[data-v-28fe950a]{text-align:center;padding:40px;color:#888}.status-badge[data-v-28fe950a]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:600;color:#fff}.status-completed[data-v-28fe950a]{background-color:#28a745}.status-ongoing[data-v-28fe950a]{background-color:#ffc107;color:#333}.status-default[data-v-28fe950a]{background-color:#6c757d}.btn-small[data-v-28fe950a]{padding:4px 10px;font-size:13px}.pagination[data-v-28fe950a]{margin-top:20px;display:flex;justify-content:center;align-items:center;gap:15px}.pagination button[data-v-28fe950a]{padding:8px 16px}.law-query-container[data-v-0279a1d2]{padding:24px}.page-header[data-v-0279a1d2]{margin-bottom:24px}.page-header h2[data-v-0279a1d2]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-0279a1d2]{color:#6c757d;margin-top:4px}.search-bar[data-v-0279a1d2]{display:flex;align-items:center;margin-bottom:24px;padding:8px 16px}.search-icon[data-v-0279a1d2]{color:#9ca3af;margin-right:12px}.search-input[data-v-0279a1d2]{border:none;outline:none;width:100%;font-size:16px}.law-list[data-v-0279a1d2]{display:grid;gap:16px}.law-item[data-v-0279a1d2]{display:flex;justify-content:space-between;align-items:center;padding:20px;transition:box-shadow .3s,transform .3s}.law-item[data-v-0279a1d2]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #0000001a}.law-name[data-v-0279a1d2]{font-size:18px;font-weight:600;margin:0 0 8px;color:var(--primary-color)}.law-description[data-v-0279a1d2]{font-size:14px;color:#4b5563;margin:0}.no-results[data-v-0279a1d2]{text-align:center;padding:40px;color:#6b7280}.form-card[data-v-3a737590]{max-width:600px;padding:24px}.result-container[data-v-3a737590]{display:flex;flex-direction:column;gap:24px}.report-section[data-v-3a737590],.guidance-section[data-v-3a737590]{padding:24px}h3[data-v-3a737590]{font-size:18px;font-weight:600;margin-bottom:16px;display:flex;align-items:center;gap:10px}pre[data-v-3a737590]{white-space:pre-wrap;word-wrap:break-word;background-color:#f8f9fa;padding:16px;border-radius:6px;max-height:400px;overflow-y:auto}.markdown-content[data-v-3a737590]{line-height:1.7}[data-v-3a737590] .markdown-content ul,[data-v-3a737590] .markdown-content ol{padding-left:20px;margin-top:1em}[data-v-3a737590] .markdown-content li{margin-bottom:.5em}.alert-danger[data-v-3a737590]{margin-top:16px}.guidance-container[data-v-c23f7b56]{padding:24px}.page-header[data-v-c23f7b56]{margin-bottom:24px}.page-header h2[data-v-c23f7b56]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-c23f7b56]{color:#6c757d;margin-top:4px}.guidance-container[data-v-2a20f843]{padding:24px}.page-header[data-v-2a20f843]{margin-bottom:24px}.page-header h2[data-v-2a20f843]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-2a20f843]{color:#6c757d;margin-top:4px}.guidance-container[data-v-c5a5a863]{padding:24px}.page-header[data-v-c5a5a863]{margin-bottom:24px}.page-header h2[data-v-c5a5a863]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-c5a5a863]{color:#6c757d;margin-top:4px}:root{--primary-color: #2c3e50;--secondary-color: #34495e;--accent-color: #42b983;--background-gradient-start: #eaf2f8;--background-gradient-end: #85c1e9;--sidebar-bg: #2c3e50;--sidebar-text: #ecf0f1;--sidebar-active-bg: #42b983;--content-bg: #ffffff;--text-color: #333;--border-color: #e8e8e8;--shadow-color: rgba(0, 0, 0, .08)}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";background-color:var(--background-gradient-start);background-image:linear-gradient(135deg,var(--background-gradient-start) 0%,var(--background-gradient-end) 100%);color:var(--text-color);min-height:100vh}#app{display:flex;min-height:100vh}a{color:var(--accent-color);text-decoration:none}a:hover{text-decoration:underline}.card{background-color:var(--content-bg);border-radius:8px;padding:24px;box-shadow:0 4px 15px var(--shadow-color);margin-bottom:24px;border:1px solid rgba(0,0,0,.05)}.btn{display:inline-block;padding:8px 16px;background-color:var(--accent-color);color:#fff;border:none;border-radius:4px;font-size:14px;cursor:pointer;transition:background-color .3s,transform .2s}.btn:hover{background-color:#36a473;transform:translateY(-2px)}.btn-primary{background-color:#1890ff}.btn-primary:hover{background-color:#40a9ff}.btn-danger{background-color:#f5222d}.btn-danger:hover{background-color:#ff4d4f}.form-group{margin-bottom:16px}.form-group label{display:block;margin-bottom:8px;font-weight:500}.form-group input,.form-group select,.form-group textarea{width:100%;padding:10px 14px;border:1px solid #d1d5db;border-radius:6px;box-sizing:border-box;background-color:#f9fafb}.form-group input:focus,.form-group select:focus,.form-group textarea:focus{outline:none;border-color:var(--accent-color);box-shadow:0 0 0 3px #42b98333}table{width:100%;border-collapse:collapse}th,td{padding:12px 16px;border-bottom:1px solid var(--border-color);text-align:left}th{background-color:#f8f9fa;font-weight:600;border-bottom-width:2px}tbody tr:hover{background-color:#f1f5f9}


================================================================================

--- File: psychology-admin-frontend\dist-admin-fixed\index.html ---
<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>倾听者 - 管理后台</title>
    <!-- 引入 Font Awesome 图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script type="module" crossorigin src="/admin/assets/index-CmmWk_uV.js"></script>
    <link rel="stylesheet" crossorigin href="/admin/assets/index-Cvl7QbF7.css">
  </head>
  <body>
    <div id="app"></div>
    <!-- 确保 src 指向 /src/main.js -->

  </body>
</html>

================================================================================

--- File: psychology-admin-frontend\dist-admin-fixed\assets\index-CmmWk_uV.js ---
var up=Object.defineProperty;var fp=(e,t,n)=>t in e?up(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var W=(e,t,n)=>fp(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ta(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const wt={},ls=[],Ke=()=>{},hp=()=>!1,Fr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ca=e=>e.startsWith("onUpdate:"),zt=Object.assign,Oa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},dp=Object.prototype.hasOwnProperty,gt=(e,t)=>dp.call(e,t),Q=Array.isArray,cs=e=>ki(e)==="[object Map]",ys=e=>ki(e)==="[object Set]",Tl=e=>ki(e)==="[object Date]",it=e=>typeof e=="function",Pt=e=>typeof e=="string",Ge=e=>typeof e=="symbol",St=e=>e!==null&&typeof e=="object",ef=e=>(St(e)||it(e))&&it(e.then)&&it(e.catch),nf=Object.prototype.toString,ki=e=>nf.call(e),pp=e=>ki(e).slice(8,-1),sf=e=>ki(e)==="[object Object]",Pa=e=>Pt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qs=Ta(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Br=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},gp=/-(\w)/g,Ae=Br(e=>e.replace(gp,(t,n)=>n?n.toUpperCase():"")),mp=/\B([A-Z])/g,Xn=Br(e=>e.replace(mp,"-$1").toLowerCase()),zr=Br(e=>e.charAt(0).toUpperCase()+e.slice(1)),_o=Br(e=>e?`on${zr(e)}`:""),Sn=(e,t)=>!Object.is(e,t),er=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},rf=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},fr=e=>{const t=parseFloat(e);return isNaN(t)?e:t},bp=e=>{const t=Pt(e)?Number(e):NaN;return isNaN(t)?e:t};let Cl;const Hr=()=>Cl||(Cl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jr(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=Pt(s)?vp(s):jr(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(Pt(e)||St(e))return e}const _p=/;(?![^(]*\))/g,yp=/:([^]+)/,xp=/\/\*[^]*?\*\//g;function vp(e){const t={};return e.replace(xp,"").split(_p).forEach(n=>{if(n){const s=n.split(yp);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ce(e){let t="";if(Pt(e))t=e;else if(Q(e))for(let n=0;n<e.length;n++){const s=Ce(e[n]);s&&(t+=s+" ")}else if(St(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const wp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sp=Ta(wp);function of(e){return!!e||e===""}function kp(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=Ri(e[s],t[s]);return n}function Ri(e,t){if(e===t)return!0;let n=Tl(e),s=Tl(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Ge(e),s=Ge(t),n||s)return e===t;if(n=Q(e),s=Q(t),n||s)return n&&s?kp(e,t):!1;if(n=St(e),s=St(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Ri(e[o],t[o]))return!1}}return String(e)===String(t)}function Ma(e,t){return e.findIndex(n=>Ri(n,t))}const af=e=>!!(e&&e.__v_isRef===!0),G=e=>Pt(e)?e:e==null?"":Q(e)||St(e)&&(e.toString===nf||!it(e.toString))?af(e)?G(e.value):JSON.stringify(e,lf,2):String(e),lf=(e,t)=>af(t)?lf(e,t.value):cs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[yo(s,r)+" =>"]=i,n),{})}:ys(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>yo(n))}:Ge(t)?yo(t):St(t)&&!Q(t)&&!sf(t)?String(t):t,yo=(e,t="")=>{var n;return Ge(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let le;class cf{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=le,!t&&le&&(this.index=(le.scopes||(le.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=le;try{return le=this,t()}finally{le=n}}}on(){++this._on===1&&(this.prevScope=le,le=this)}off(){this._on>0&&--this._on===0&&(le=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Rp(e){return new cf(e)}function Ep(){return le}let Et;const xo=new WeakSet;class uf{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,le&&le.active&&le.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xo.has(this)&&(xo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||hf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ol(this),df(this);const t=Et,n=Oe;Et=this,Oe=!0;try{return this.fn()}finally{pf(this),Et=t,Oe=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Da(t);this.deps=this.depsTail=void 0,Ol(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ko(this)&&this.run()}get dirty(){return Ko(this)}}let ff=0,Ks,Gs;function hf(e,t=!1){if(e.flags|=8,t){e.next=Gs,Gs=e;return}e.next=Ks,Ks=e}function Ia(){ff++}function La(){if(--ff>0)return;if(Gs){let t=Gs;for(Gs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ks;){let t=Ks;for(Ks=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function df(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function pf(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Da(s),Ap(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function Ko(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(gf(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function gf(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===oi)||(e.globalVersion=oi,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ko(e))))return;e.flags|=2;const t=e.dep,n=Et,s=Oe;Et=e,Oe=!0;try{df(e);const i=e.fn(e._value);(t.version===0||Sn(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Et=n,Oe=s,pf(e),e.flags&=-3}}function Da(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Da(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Ap(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Oe=!0;const mf=[];function un(){mf.push(Oe),Oe=!1}function fn(){const e=mf.pop();Oe=e===void 0?!0:e}function Ol(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Et;Et=void 0;try{t()}finally{Et=n}}}let oi=0;class Tp{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $a{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Et||!Oe||Et===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Et)n=this.activeLink=new Tp(Et,this),Et.deps?(n.prevDep=Et.depsTail,Et.depsTail.nextDep=n,Et.depsTail=n):Et.deps=Et.depsTail=n,bf(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Et.depsTail,n.nextDep=void 0,Et.depsTail.nextDep=n,Et.depsTail=n,Et.deps===n&&(Et.deps=s)}return n}trigger(t){this.version++,oi++,this.notify(t)}notify(t){Ia();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{La()}}}function bf(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)bf(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Go=new WeakMap,Vn=Symbol(""),Yo=Symbol(""),ai=Symbol("");function Kt(e,t,n){if(Oe&&Et){let s=Go.get(e);s||Go.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new $a),i.map=s,i.key=n),i.track()}}function rn(e,t,n,s,i,r){const o=Go.get(e);if(!o){oi++;return}const a=l=>{l&&l.trigger()};if(Ia(),t==="clear")o.forEach(a);else{const l=Q(e),c=l&&Pa(n);if(l&&n==="length"){const u=Number(s);o.forEach((f,h)=>{(h==="length"||h===ai||!Ge(h)&&h>=u)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(ai)),t){case"add":l?c&&a(o.get("length")):(a(o.get(Vn)),cs(e)&&a(o.get(Yo)));break;case"delete":l||(a(o.get(Vn)),cs(e)&&a(o.get(Yo)));break;case"set":cs(e)&&a(o.get(Vn));break}}La()}function Zn(e){const t=ct(e);return t===e?t:(Kt(t,"iterate",ai),Re(e)?t:t.map(Ht))}function Vr(e){return Kt(e=ct(e),"iterate",ai),e}const Cp={__proto__:null,[Symbol.iterator](){return vo(this,Symbol.iterator,Ht)},concat(...e){return Zn(this).concat(...e.map(t=>Q(t)?Zn(t):t))},entries(){return vo(this,"entries",e=>(e[1]=Ht(e[1]),e))},every(e,t){return Ye(this,"every",e,t,void 0,arguments)},filter(e,t){return Ye(this,"filter",e,t,n=>n.map(Ht),arguments)},find(e,t){return Ye(this,"find",e,t,Ht,arguments)},findIndex(e,t){return Ye(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ye(this,"findLast",e,t,Ht,arguments)},findLastIndex(e,t){return Ye(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ye(this,"forEach",e,t,void 0,arguments)},includes(...e){return wo(this,"includes",e)},indexOf(...e){return wo(this,"indexOf",e)},join(e){return Zn(this).join(e)},lastIndexOf(...e){return wo(this,"lastIndexOf",e)},map(e,t){return Ye(this,"map",e,t,void 0,arguments)},pop(){return Ts(this,"pop")},push(...e){return Ts(this,"push",e)},reduce(e,...t){return Pl(this,"reduce",e,t)},reduceRight(e,...t){return Pl(this,"reduceRight",e,t)},shift(){return Ts(this,"shift")},some(e,t){return Ye(this,"some",e,t,void 0,arguments)},splice(...e){return Ts(this,"splice",e)},toReversed(){return Zn(this).toReversed()},toSorted(e){return Zn(this).toSorted(e)},toSpliced(...e){return Zn(this).toSpliced(...e)},unshift(...e){return Ts(this,"unshift",e)},values(){return vo(this,"values",Ht)}};function vo(e,t,n){const s=Vr(e),i=s[t]();return s!==e&&!Re(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const Op=Array.prototype;function Ye(e,t,n,s,i,r){const o=Vr(e),a=o!==e&&!Re(e),l=o[t];if(l!==Op[t]){const f=l.apply(e,r);return a?Ht(f):f}let c=n;o!==e&&(a?c=function(f,h){return n.call(this,Ht(f),h,e)}:n.length>2&&(c=function(f,h){return n.call(this,f,h,e)}));const u=l.call(o,c,s);return a&&i?i(u):u}function Pl(e,t,n,s){const i=Vr(e);let r=n;return i!==e&&(Re(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,Ht(a),l,e)}),i[t](r,...s)}function wo(e,t,n){const s=ct(e);Kt(s,"iterate",ai);const i=s[t](...n);return(i===-1||i===!1)&&Ai(n[0])?(n[0]=ct(n[0]),s[t](...n)):i}function Ts(e,t,n=[]){un(),Ia();const s=ct(e)[t].apply(e,n);return La(),fn(),s}const Pp=Ta("__proto__,__v_isRef,__isVue"),_f=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ge));function Mp(e){Ge(e)||(e=String(e));const t=ct(this);return Kt(t,"has",e),t.hasOwnProperty(e)}class yf{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?jp:Sf:r?wf:vf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=Q(t);if(!i){let l;if(o&&(l=Cp[n]))return l;if(n==="hasOwnProperty")return Mp}const a=Reflect.get(t,n,Xt(t)?t:s);return(Ge(n)?_f.has(n):Pp(n))||(i||Kt(t,"get",n),r)?a:Xt(a)?o&&Pa(n)?a:a.value:St(a)?i?Rf(a):Ei(a):a}}class xf extends yf{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const l=An(r);if(!Re(s)&&!An(s)&&(r=ct(r),s=ct(s)),!Q(t)&&Xt(r)&&!Xt(s))return l?!1:(r.value=s,!0)}const o=Q(t)&&Pa(n)?Number(n)<t.length:gt(t,n),a=Reflect.set(t,n,s,Xt(t)?t:i);return t===ct(i)&&(o?Sn(s,r)&&rn(t,"set",n,s):rn(t,"add",n,s)),a}deleteProperty(t,n){const s=gt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&rn(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!Ge(n)||!_f.has(n))&&Kt(t,"has",n),s}ownKeys(t){return Kt(t,"iterate",Q(t)?"length":Vn),Reflect.ownKeys(t)}}class Ip extends yf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Lp=new xf,Dp=new Ip,$p=new xf(!0);const Xo=e=>e,$i=e=>Reflect.getPrototypeOf(e);function Np(e,t,n){return function(...s){const i=this.__v_raw,r=ct(i),o=cs(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...s),u=n?Xo:t?hr:Ht;return!t&&Kt(r,"iterate",l?Yo:Vn),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Ni(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Fp(e,t){const n={get(i){const r=this.__v_raw,o=ct(r),a=ct(i);e||(Sn(i,a)&&Kt(o,"get",i),Kt(o,"get",a));const{has:l}=$i(o),c=t?Xo:e?hr:Ht;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Kt(ct(i),"iterate",Vn),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=ct(r),a=ct(i);return e||(Sn(i,a)&&Kt(o,"has",i),Kt(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=ct(a),c=t?Xo:e?hr:Ht;return!e&&Kt(l,"iterate",Vn),a.forEach((u,f)=>i.call(r,c(u),c(f),o))}};return zt(n,e?{add:Ni("add"),set:Ni("set"),delete:Ni("delete"),clear:Ni("clear")}:{add(i){!t&&!Re(i)&&!An(i)&&(i=ct(i));const r=ct(this);return $i(r).has.call(r,i)||(r.add(i),rn(r,"add",i,i)),this},set(i,r){!t&&!Re(r)&&!An(r)&&(r=ct(r));const o=ct(this),{has:a,get:l}=$i(o);let c=a.call(o,i);c||(i=ct(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?Sn(r,u)&&rn(o,"set",i,r):rn(o,"add",i,r),this},delete(i){const r=ct(this),{has:o,get:a}=$i(r);let l=o.call(r,i);l||(i=ct(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&rn(r,"delete",i,void 0),c},clear(){const i=ct(this),r=i.size!==0,o=i.clear();return r&&rn(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Np(i,e,t)}),n}function Na(e,t){const n=Fp(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(gt(n,i)&&i in s?n:s,i,r)}const Bp={get:Na(!1,!1)},zp={get:Na(!1,!0)},Hp={get:Na(!0,!1)};const vf=new WeakMap,wf=new WeakMap,Sf=new WeakMap,jp=new WeakMap;function Vp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Up(e){return e.__v_skip||!Object.isExtensible(e)?0:Vp(pp(e))}function Ei(e){return An(e)?e:Fa(e,!1,Lp,Bp,vf)}function kf(e){return Fa(e,!1,$p,zp,wf)}function Rf(e){return Fa(e,!0,Dp,Hp,Sf)}function Fa(e,t,n,s,i){if(!St(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Up(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?s:n);return i.set(e,a),a}function us(e){return An(e)?us(e.__v_raw):!!(e&&e.__v_isReactive)}function An(e){return!!(e&&e.__v_isReadonly)}function Re(e){return!!(e&&e.__v_isShallow)}function Ai(e){return e?!!e.__v_raw:!1}function ct(e){const t=e&&e.__v_raw;return t?ct(t):e}function Wp(e){return!gt(e,"__v_skip")&&Object.isExtensible(e)&&rf(e,"__v_skip",!0),e}const Ht=e=>St(e)?Ei(e):e,hr=e=>St(e)?Rf(e):e;function Xt(e){return e?e.__v_isRef===!0:!1}function vt(e){return Ef(e,!1)}function Ba(e){return Ef(e,!0)}function Ef(e,t){return Xt(e)?e:new qp(e,t)}class qp{constructor(t,n){this.dep=new $a,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ct(t),this._value=n?t:Ht(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||Re(t)||An(t);t=s?t:ct(t),Sn(t,n)&&(this._rawValue=t,this._value=s?t:Ht(t),this.dep.trigger())}}function kn(e){return Xt(e)?e.value:e}const Kp={get:(e,t,n)=>t==="__v_raw"?e:kn(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return Xt(i)&&!Xt(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function Af(e){return us(e)?e:new Proxy(e,Kp)}class Gp{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new $a(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=oi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Et!==this)return hf(this,!0),!0}get value(){const t=this.dep.track();return gf(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Yp(e,t,n=!1){let s,i;return it(e)?s=e:(s=e.get,i=e.set),new Gp(s,i,n)}const Fi={},dr=new WeakMap;let Fn;function Xp(e,t=!1,n=Fn){if(n){let s=dr.get(n);s||dr.set(n,s=[]),s.push(e)}}function Qp(e,t,n=wt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,c=k=>i?k:Re(k)||i===!1||i===0?on(k,1):on(k);let u,f,h,d,g=!1,m=!1;if(Xt(e)?(f=()=>e.value,g=Re(e)):us(e)?(f=()=>c(e),g=!0):Q(e)?(m=!0,g=e.some(k=>us(k)||Re(k)),f=()=>e.map(k=>{if(Xt(k))return k.value;if(us(k))return c(k);if(it(k))return l?l(k,2):k()})):it(e)?t?f=l?()=>l(e,2):e:f=()=>{if(h){un();try{h()}finally{fn()}}const k=Fn;Fn=u;try{return l?l(e,3,[d]):e(d)}finally{Fn=k}}:f=Ke,t&&i){const k=f,C=i===!0?1/0:i;f=()=>on(k(),C)}const b=Ep(),x=()=>{u.stop(),b&&b.active&&Oa(b.effects,u)};if(r&&t){const k=t;t=(...C)=>{k(...C),x()}}let v=m?new Array(e.length).fill(Fi):Fi;const S=k=>{if(!(!(u.flags&1)||!u.dirty&&!k))if(t){const C=u.run();if(i||g||(m?C.some(($,P)=>Sn($,v[P])):Sn(C,v))){h&&h();const $=Fn;Fn=u;try{const P=[C,v===Fi?void 0:m&&v[0]===Fi?[]:v,d];v=C,l?l(t,3,P):t(...P)}finally{Fn=$}}}else u.run()};return a&&a(S),u=new uf(f),u.scheduler=o?()=>o(S,!1):S,d=k=>Xp(k,!1,u),h=u.onStop=()=>{const k=dr.get(u);if(k){if(l)l(k,4);else for(const C of k)C();dr.delete(u)}},t?s?S(!0):v=u.run():o?o(S.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function on(e,t=1/0,n){if(t<=0||!St(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Xt(e))on(e.value,t,n);else if(Q(e))for(let s=0;s<e.length;s++)on(e[s],t,n);else if(ys(e)||cs(e))e.forEach(s=>{on(s,t,n)});else if(sf(e)){for(const s in e)on(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&on(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ti(e,t,n,s){try{return s?e(...s):e()}catch(i){Ur(i,t,n)}}function Pe(e,t,n,s){if(it(e)){const i=Ti(e,t,n,s);return i&&ef(i)&&i.catch(r=>{Ur(r,t,n)}),i}if(Q(e)){const i=[];for(let r=0;r<e.length;r++)i.push(Pe(e[r],t,n,s));return i}}function Ur(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||wt;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,l,c)===!1)return}a=a.parent}if(r){un(),Ti(r,null,10,[e,l,c]),fn();return}}Jp(e,n,i,s,o)}function Jp(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const ee=[];let Ue=-1;const fs=[];let bn=null,rs=0;const Tf=Promise.resolve();let pr=null;function Wr(e){const t=pr||Tf;return e?t.then(this?e.bind(this):e):t}function Zp(e){let t=Ue+1,n=ee.length;for(;t<n;){const s=t+n>>>1,i=ee[s],r=li(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function za(e){if(!(e.flags&1)){const t=li(e),n=ee[ee.length-1];!n||!(e.flags&2)&&t>=li(n)?ee.push(e):ee.splice(Zp(t),0,e),e.flags|=1,Cf()}}function Cf(){pr||(pr=Tf.then(Pf))}function tg(e){Q(e)?fs.push(...e):bn&&e.id===-1?bn.splice(rs+1,0,e):e.flags&1||(fs.push(e),e.flags|=1),Cf()}function Ml(e,t,n=Ue+1){for(;n<ee.length;n++){const s=ee[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;ee.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Of(e){if(fs.length){const t=[...new Set(fs)].sort((n,s)=>li(n)-li(s));if(fs.length=0,bn){bn.push(...t);return}for(bn=t,rs=0;rs<bn.length;rs++){const n=bn[rs];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}bn=null,rs=0}}const li=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Pf(e){try{for(Ue=0;Ue<ee.length;Ue++){const t=ee[Ue];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ti(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ue<ee.length;Ue++){const t=ee[Ue];t&&(t.flags&=-2)}Ue=-1,ee.length=0,Of(),pr=null,(ee.length||fs.length)&&Pf()}}let ue=null,Mf=null;function gr(e){const t=ue;return ue=e,Mf=e&&e.type.__scopeId||null,t}function be(e,t=ue,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&Vl(-1);const r=gr(t);let o;try{o=e(...i)}finally{gr(r),s._d&&Vl(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ft(e,t){if(ue===null)return e;const n=Qr(ue),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=wt]=t[i];r&&(it(r)&&(r={mounted:r,updated:r}),r.deep&&on(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function On(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(un(),Pe(l,n,8,[e.el,a,e,t]),fn())}}const eg=Symbol("_vte"),If=e=>e.__isTeleport,_n=Symbol("_leaveCb"),Bi=Symbol("_enterCb");function ng(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xs(()=>{e.isMounted=!0}),Hf(()=>{e.isUnmounting=!0}),e}const ve=[Function,Array],Lf={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ve,onEnter:ve,onAfterEnter:ve,onEnterCancelled:ve,onBeforeLeave:ve,onLeave:ve,onAfterLeave:ve,onLeaveCancelled:ve,onBeforeAppear:ve,onAppear:ve,onAfterAppear:ve,onAppearCancelled:ve},Df=e=>{const t=e.subTree;return t.component?Df(t.component):t},sg={name:"BaseTransition",props:Lf,setup(e,{slots:t}){const n=Qg(),s=ng();return()=>{const i=t.default&&Ff(t.default(),!0);if(!i||!i.length)return;const r=$f(i),o=ct(e),{mode:a}=o;if(s.isLeaving)return So(r);const l=Il(r);if(!l)return So(r);let c=Qo(l,o,s,n,f=>c=f);l.type!==ne&&ci(l,c);let u=n.subTree&&Il(n.subTree);if(u&&u.type!==ne&&!zn(l,u)&&Df(n).type!==ne){let f=Qo(u,o,s,n);if(ci(u,f),a==="out-in"&&l.type!==ne)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,u=void 0},So(r);a==="in-out"&&l.type!==ne?f.delayLeave=(h,d,g)=>{const m=Nf(s,u);m[String(u.key)]=u,h[_n]=()=>{d(),h[_n]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function $f(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==ne){t=n;break}}return t}const ig=sg;function Nf(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function Qo(e,t,n,s,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:d,onAfterLeave:g,onLeaveCancelled:m,onBeforeAppear:b,onAppear:x,onAfterAppear:v,onAppearCancelled:S}=t,k=String(e.key),C=Nf(n,e),$=(N,H)=>{N&&Pe(N,s,9,H)},P=(N,H)=>{const K=H[1];$(N,H),Q(N)?N.every(M=>M.length<=1)&&K():N.length<=1&&K()},D={mode:o,persisted:a,beforeEnter(N){let H=l;if(!n.isMounted)if(r)H=b||l;else return;N[_n]&&N[_n](!0);const K=C[k];K&&zn(e,K)&&K.el[_n]&&K.el[_n](),$(H,[N])},enter(N){let H=c,K=u,M=f;if(!n.isMounted)if(r)H=x||c,K=v||u,M=S||f;else return;let tt=!1;const ft=N[Bi]=rt=>{tt||(tt=!0,rt?$(M,[N]):$(K,[N]),D.delayedLeave&&D.delayedLeave(),N[Bi]=void 0)};H?P(H,[N,ft]):ft()},leave(N,H){const K=String(e.key);if(N[Bi]&&N[Bi](!0),n.isUnmounting)return H();$(h,[N]);let M=!1;const tt=N[_n]=ft=>{M||(M=!0,H(),ft?$(m,[N]):$(g,[N]),N[_n]=void 0,C[K]===e&&delete C[K])};C[K]=e,d?P(d,[N,tt]):tt()},clone(N){const H=Qo(N,t,n,s,i);return i&&i(H),H}};return D}function So(e){if(Kr(e))return e=Tn(e),e.children=null,e}function Il(e){if(!Kr(e))return If(e.type)&&e.children?$f(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&it(n.default))return n.default()}}function ci(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ci(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ff(e,t=!1,n){let s=[],i=0;for(let r=0;r<e.length;r++){let o=e[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===jt?(o.patchFlag&128&&i++,s=s.concat(Ff(o.children,t,a))):(t||o.type!==ne)&&s.push(a!=null?Tn(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function qr(e,t){return it(e)?zt({name:e.name},t,{setup:e}):e}function Bf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function mr(e,t,n,s,i=!1){if(Q(e)){e.forEach((g,m)=>mr(g,t&&(Q(t)?t[m]:t),n,s,i));return}if(Ys(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&mr(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?Qr(s.component):s.el,o=i?null:r,{i:a,r:l}=e,c=t&&t.r,u=a.refs===wt?a.refs={}:a.refs,f=a.setupState,h=ct(f),d=f===wt?()=>!1:g=>gt(h,g);if(c!=null&&c!==l&&(Pt(c)?(u[c]=null,d(c)&&(f[c]=null)):Xt(c)&&(c.value=null)),it(l))Ti(l,a,12,[o,u]);else{const g=Pt(l),m=Xt(l);if(g||m){const b=()=>{if(e.f){const x=g?d(l)?f[l]:u[l]:l.value;i?Q(x)&&Oa(x,r):Q(x)?x.includes(r)||x.push(r):g?(u[l]=[r],d(l)&&(f[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else g?(u[l]=o,d(l)&&(f[l]=o)):m&&(l.value=o,e.k&&(u[e.k]=o))};o?(b.id=-1,me(b,n)):b()}}}Hr().requestIdleCallback;Hr().cancelIdleCallback;const Ys=e=>!!e.type.__asyncLoader,Kr=e=>e.type.__isKeepAlive;function rg(e,t){zf(e,"a",t)}function og(e,t){zf(e,"da",t)}function zf(e,t,n=Vt){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Gr(t,s,n),n){let i=n.parent;for(;i&&i.parent;)Kr(i.parent.vnode)&&ag(s,t,n,i),i=i.parent}}function ag(e,t,n,s){const i=Gr(t,e,s,!0);Ha(()=>{Oa(s[t],i)},n)}function Gr(e,t,n=Vt,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{un();const a=Ci(n),l=Pe(t,n,e,o);return a(),fn(),l});return s?i.unshift(r):i.push(r),r}}const dn=e=>(t,n=Vt)=>{(!hi||e==="sp")&&Gr(e,(...s)=>t(...s),n)},lg=dn("bm"),xs=dn("m"),cg=dn("bu"),ug=dn("u"),Hf=dn("bum"),Ha=dn("um"),fg=dn("sp"),hg=dn("rtg"),dg=dn("rtc");function pg(e,t=Vt){Gr("ec",e,t)}const jf="components";function ja(e,t){return Uf(jf,e,!0,t)||e}const Vf=Symbol.for("v-ndc");function gg(e){return Pt(e)?Uf(jf,e,!1)||e:e||Vf}function Uf(e,t,n=!0,s=!1){const i=ue||Vt;if(i){const r=i.type;{const a=nm(r,!1);if(a&&(a===t||a===Ae(t)||a===zr(Ae(t))))return r}const o=Ll(i[e]||r[e],t)||Ll(i.appContext[e],t);return!o&&s?r:o}}function Ll(e,t){return e&&(e[t]||e[Ae(t)]||e[zr(Ae(t))])}function qn(e,t,n,s){let i;const r=n,o=Q(e);if(o||Pt(e)){const a=o&&us(e);let l=!1,c=!1;a&&(l=!Re(e),c=An(e),e=Vr(e)),i=new Array(e.length);for(let u=0,f=e.length;u<f;u++)i[u]=t(l?c?hr(Ht(e[u])):Ht(e[u]):e[u],u,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r)}else if(St(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(e[u],u,l,r)}}else i=[];return i}const Jo=e=>e?uh(e)?Qr(e):Jo(e.parent):null,Xs=zt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Jo(e.parent),$root:e=>Jo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>qf(e),$forceUpdate:e=>e.f||(e.f=()=>{za(e.update)}),$nextTick:e=>e.n||(e.n=Wr.bind(e.proxy)),$watch:e=>$g.bind(e)}),ko=(e,t)=>e!==wt&&!e.__isScriptSetup&&gt(e,t),mg={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(ko(s,t))return o[t]=1,s[t];if(i!==wt&&gt(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&gt(c,t))return o[t]=3,r[t];if(n!==wt&&gt(n,t))return o[t]=4,n[t];Zo&&(o[t]=0)}}const u=Xs[t];let f,h;if(u)return t==="$attrs"&&Kt(e.attrs,"get",""),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==wt&&gt(n,t))return o[t]=4,n[t];if(h=l.config.globalProperties,gt(h,t))return h[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return ko(i,t)?(i[t]=n,!0):s!==wt&&gt(s,t)?(s[t]=n,!0):gt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||e!==wt&&gt(e,o)||ko(t,o)||(a=r[0])&&gt(a,o)||gt(s,o)||gt(Xs,o)||gt(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:gt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Dl(e){return Q(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Zo=!0;function bg(e){const t=qf(e),n=e.proxy,s=e.ctx;Zo=!1,t.beforeCreate&&$l(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:m,deactivated:b,beforeDestroy:x,beforeUnmount:v,destroyed:S,unmounted:k,render:C,renderTracked:$,renderTriggered:P,errorCaptured:D,serverPrefetch:N,expose:H,inheritAttrs:K,components:M,directives:tt,filters:ft}=t;if(c&&_g(c,s,null),o)for(const Z in o){const ot=o[Z];it(ot)&&(s[Z]=ot.bind(n))}if(i){const Z=i.call(n,n);St(Z)&&(e.data=Ei(Z))}if(Zo=!0,r)for(const Z in r){const ot=r[Z],kt=it(ot)?ot.bind(n,n):it(ot.get)?ot.get.bind(n,n):Ke,Qt=!it(ot)&&it(ot.set)?ot.set.bind(n):Ke,Jt=Ct({get:kt,set:Qt});Object.defineProperty(s,Z,{enumerable:!0,configurable:!0,get:()=>Jt.value,set:Mt=>Jt.value=Mt})}if(a)for(const Z in a)Wf(a[Z],s,n,Z);if(l){const Z=it(l)?l.call(n):l;Reflect.ownKeys(Z).forEach(ot=>{nr(ot,Z[ot])})}u&&$l(u,e,"c");function et(Z,ot){Q(ot)?ot.forEach(kt=>Z(kt.bind(n))):ot&&Z(ot.bind(n))}if(et(lg,f),et(xs,h),et(cg,d),et(ug,g),et(rg,m),et(og,b),et(pg,D),et(dg,$),et(hg,P),et(Hf,v),et(Ha,k),et(fg,N),Q(H))if(H.length){const Z=e.exposed||(e.exposed={});H.forEach(ot=>{Object.defineProperty(Z,ot,{get:()=>n[ot],set:kt=>n[ot]=kt})})}else e.exposed||(e.exposed={});C&&e.render===Ke&&(e.render=C),K!=null&&(e.inheritAttrs=K),M&&(e.components=M),tt&&(e.directives=tt),N&&Bf(e)}function _g(e,t,n=Ke){Q(e)&&(e=ta(e));for(const s in e){const i=e[s];let r;St(i)?"default"in i?r=Ee(i.from||s,i.default,!0):r=Ee(i.from||s):r=Ee(i),Xt(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function $l(e,t,n){Pe(Q(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Wf(e,t,n,s){let i=s.includes(".")?rh(n,s):()=>n[s];if(Pt(e)){const r=t[e];it(r)&&Rn(i,r)}else if(it(e))Rn(i,e.bind(n));else if(St(e))if(Q(e))e.forEach(r=>Wf(r,t,n,s));else{const r=it(e.handler)?e.handler.bind(n):t[e.handler];it(r)&&Rn(i,r,e)}}function qf(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(c=>br(l,c,o,!0)),br(l,t,o)),St(t)&&r.set(t,l),l}function br(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&br(e,r,n,!0),i&&i.forEach(o=>br(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=yg[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const yg={data:Nl,props:Fl,emits:Fl,methods:zs,computed:zs,beforeCreate:Zt,created:Zt,beforeMount:Zt,mounted:Zt,beforeUpdate:Zt,updated:Zt,beforeDestroy:Zt,beforeUnmount:Zt,destroyed:Zt,unmounted:Zt,activated:Zt,deactivated:Zt,errorCaptured:Zt,serverPrefetch:Zt,components:zs,directives:zs,watch:vg,provide:Nl,inject:xg};function Nl(e,t){return t?e?function(){return zt(it(e)?e.call(this,this):e,it(t)?t.call(this,this):t)}:t:e}function xg(e,t){return zs(ta(e),ta(t))}function ta(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Zt(e,t){return e?[...new Set([].concat(e,t))]:t}function zs(e,t){return e?zt(Object.create(null),e,t):t}function Fl(e,t){return e?Q(e)&&Q(t)?[...new Set([...e,...t])]:zt(Object.create(null),Dl(e),Dl(t??{})):t}function vg(e,t){if(!e)return t;if(!t)return e;const n=zt(Object.create(null),e);for(const s in t)n[s]=Zt(e[s],t[s]);return n}function Kf(){return{app:null,config:{isNativeTag:hp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wg=0;function Sg(e,t){return function(s,i=null){it(s)||(s=zt({},s)),i!=null&&!St(i)&&(i=null);const r=Kf(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:wg++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:hh,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&it(u.install)?(o.add(u),u.install(c,...f)):it(u)&&(o.add(u),u(c,...f))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,f){return f?(r.components[u]=f,c):r.components[u]},directive(u,f){return f?(r.directives[u]=f,c):r.directives[u]},mount(u,f,h){if(!l){const d=c._ceVNode||ut(s,i);return d.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),e(d,u,h),l=!0,c._container=u,u.__vue_app__=c,Qr(d.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Pe(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,f){return r.provides[u]=f,c},runWithContext(u){const f=hs;hs=c;try{return u()}finally{hs=f}}};return c}}let hs=null;function nr(e,t){if(Vt){let n=Vt.provides;const s=Vt.parent&&Vt.parent.provides;s===n&&(n=Vt.provides=Object.create(s)),n[e]=t}}function Ee(e,t,n=!1){const s=Vt||ue;if(s||hs){let i=hs?hs._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&it(t)?t.call(s&&s.proxy):t}}const Gf={},Yf=()=>Object.create(Gf),Xf=e=>Object.getPrototypeOf(e)===Gf;function kg(e,t,n,s=!1){const i={},r=Yf();e.propsDefaults=Object.create(null),Qf(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:kf(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function Rg(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=ct(i),[l]=e.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Yr(e.emitsOptions,h))continue;const d=t[h];if(l)if(gt(r,h))d!==r[h]&&(r[h]=d,c=!0);else{const g=Ae(h);i[g]=ea(l,a,g,d,e,!1)}else d!==r[h]&&(r[h]=d,c=!0)}}}else{Qf(e,t,i,r)&&(c=!0);let u;for(const f in a)(!t||!gt(t,f)&&((u=Xn(f))===f||!gt(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=ea(l,a,f,void 0,e,!0)):delete i[f]);if(r!==a)for(const f in r)(!t||!gt(t,f))&&(delete r[f],c=!0)}c&&rn(e.attrs,"set","")}function Qf(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(qs(l))continue;const c=t[l];let u;i&&gt(i,u=Ae(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:Yr(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=ct(n),c=a||wt;for(let u=0;u<r.length;u++){const f=r[u];n[f]=ea(i,l,f,c[f],e,!gt(c,f))}}return o}function ea(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=gt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&it(l)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const u=Ci(i);s=c[n]=l.call(null,t),u()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Xn(n))&&(s=!0))}return s}const Eg=new WeakMap;function Jf(e,t,n=!1){const s=n?Eg:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!it(e)){const u=f=>{l=!0;const[h,d]=Jf(f,t,!0);zt(o,h),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return St(e)&&s.set(e,ls),ls;if(Q(r))for(let u=0;u<r.length;u++){const f=Ae(r[u]);Bl(f)&&(o[f]=wt)}else if(r)for(const u in r){const f=Ae(u);if(Bl(f)){const h=r[u],d=o[f]=Q(h)||it(h)?{type:h}:zt({},h),g=d.type;let m=!1,b=!0;if(Q(g))for(let x=0;x<g.length;++x){const v=g[x],S=it(v)&&v.name;if(S==="Boolean"){m=!0;break}else S==="String"&&(b=!1)}else m=it(g)&&g.name==="Boolean";d[0]=m,d[1]=b,(m||gt(d,"default"))&&a.push(f)}}const c=[o,a];return St(e)&&s.set(e,c),c}function Bl(e){return e[0]!=="$"&&!qs(e)}const Va=e=>e[0]==="_"||e==="$stable",Ua=e=>Q(e)?e.map(qe):[qe(e)],Ag=(e,t,n)=>{if(t._n)return t;const s=be((...i)=>Ua(t(...i)),n);return s._c=!1,s},Zf=(e,t,n)=>{const s=e._ctx;for(const i in e){if(Va(i))continue;const r=e[i];if(it(r))t[i]=Ag(i,r,s);else if(r!=null){const o=Ua(r);t[i]=()=>o}}},th=(e,t)=>{const n=Ua(t);e.slots.default=()=>n},eh=(e,t,n)=>{for(const s in t)(n||!Va(s))&&(e[s]=t[s])},Tg=(e,t,n)=>{const s=e.slots=Yf();if(e.vnode.shapeFlag&32){const i=t._;i?(eh(s,t,n),n&&rf(s,"_",i,!0)):Zf(t,s)}else t&&th(e,t)},Cg=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=wt;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:eh(i,t,n):(r=!t.$stable,Zf(t,i)),o=t}else t&&(th(e,t),o={default:1});if(r)for(const a in i)!Va(a)&&o[a]==null&&delete i[a]},me=Vg;function Og(e){return Pg(e)}function Pg(e,t){const n=Hr();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=Ke,insertStaticContent:g}=e,m=(_,y,w,E=null,O=null,T=null,j=void 0,z=null,F=!!y.dynamicChildren)=>{if(_===y)return;_&&!zn(_,y)&&(E=A(_),Mt(_,O,T,!0),_=null),y.patchFlag===-2&&(F=!1,y.dynamicChildren=null);const{type:I,ref:J,shapeFlag:U}=y;switch(I){case Xr:b(_,y,w,E);break;case ne:x(_,y,w,E);break;case Eo:_==null&&v(y,w,E,j);break;case jt:M(_,y,w,E,O,T,j,z,F);break;default:U&1?C(_,y,w,E,O,T,j,z,F):U&6?tt(_,y,w,E,O,T,j,z,F):(U&64||U&128)&&I.process(_,y,w,E,O,T,j,z,F,Y)}J!=null&&O&&mr(J,_&&_.ref,T,y||_,!y)},b=(_,y,w,E)=>{if(_==null)s(y.el=a(y.children),w,E);else{const O=y.el=_.el;y.children!==_.children&&c(O,y.children)}},x=(_,y,w,E)=>{_==null?s(y.el=l(y.children||""),w,E):y.el=_.el},v=(_,y,w,E)=>{[_.el,_.anchor]=g(_.children,y,w,E,_.el,_.anchor)},S=({el:_,anchor:y},w,E)=>{let O;for(;_&&_!==y;)O=h(_),s(_,w,E),_=O;s(y,w,E)},k=({el:_,anchor:y})=>{let w;for(;_&&_!==y;)w=h(_),i(_),_=w;i(y)},C=(_,y,w,E,O,T,j,z,F)=>{y.type==="svg"?j="svg":y.type==="math"&&(j="mathml"),_==null?$(y,w,E,O,T,j,z,F):N(_,y,O,T,j,z,F)},$=(_,y,w,E,O,T,j,z)=>{let F,I;const{props:J,shapeFlag:U,transition:X,dirs:st}=_;if(F=_.el=o(_.type,T,J&&J.is,J),U&8?u(F,_.children):U&16&&D(_.children,F,null,E,O,Ro(_,T),j,z),st&&On(_,null,E,"created"),P(F,_,_.scopeId,j,E),J){for(const Rt in J)Rt!=="value"&&!qs(Rt)&&r(F,Rt,null,J[Rt],T,E);"value"in J&&r(F,"value",null,J.value,T),(I=J.onVnodeBeforeMount)&&Be(I,E,_)}st&&On(_,null,E,"beforeMount");const lt=Mg(O,X);lt&&X.beforeEnter(F),s(F,y,w),((I=J&&J.onVnodeMounted)||lt||st)&&me(()=>{I&&Be(I,E,_),lt&&X.enter(F),st&&On(_,null,E,"mounted")},O)},P=(_,y,w,E,O)=>{if(w&&d(_,w),E)for(let T=0;T<E.length;T++)d(_,E[T]);if(O){let T=O.subTree;if(y===T||ah(T.type)&&(T.ssContent===y||T.ssFallback===y)){const j=O.vnode;P(_,j,j.scopeId,j.slotScopeIds,O.parent)}}},D=(_,y,w,E,O,T,j,z,F=0)=>{for(let I=F;I<_.length;I++){const J=_[I]=z?yn(_[I]):qe(_[I]);m(null,J,y,w,E,O,T,j,z)}},N=(_,y,w,E,O,T,j)=>{const z=y.el=_.el;let{patchFlag:F,dynamicChildren:I,dirs:J}=y;F|=_.patchFlag&16;const U=_.props||wt,X=y.props||wt;let st;if(w&&Pn(w,!1),(st=X.onVnodeBeforeUpdate)&&Be(st,w,y,_),J&&On(y,_,w,"beforeUpdate"),w&&Pn(w,!0),(U.innerHTML&&X.innerHTML==null||U.textContent&&X.textContent==null)&&u(z,""),I?H(_.dynamicChildren,I,z,w,E,Ro(y,O),T):j||ot(_,y,z,null,w,E,Ro(y,O),T,!1),F>0){if(F&16)K(z,U,X,w,O);else if(F&2&&U.class!==X.class&&r(z,"class",null,X.class,O),F&4&&r(z,"style",U.style,X.style,O),F&8){const lt=y.dynamicProps;for(let Rt=0;Rt<lt.length;Rt++){const _t=lt[Rt],pe=U[_t],re=X[_t];(re!==pe||_t==="value")&&r(z,_t,pe,re,O,w)}}F&1&&_.children!==y.children&&u(z,y.children)}else!j&&I==null&&K(z,U,X,w,O);((st=X.onVnodeUpdated)||J)&&me(()=>{st&&Be(st,w,y,_),J&&On(y,_,w,"updated")},E)},H=(_,y,w,E,O,T,j)=>{for(let z=0;z<y.length;z++){const F=_[z],I=y[z],J=F.el&&(F.type===jt||!zn(F,I)||F.shapeFlag&198)?f(F.el):w;m(F,I,J,null,E,O,T,j,!0)}},K=(_,y,w,E,O)=>{if(y!==w){if(y!==wt)for(const T in y)!qs(T)&&!(T in w)&&r(_,T,y[T],null,O,E);for(const T in w){if(qs(T))continue;const j=w[T],z=y[T];j!==z&&T!=="value"&&r(_,T,z,j,O,E)}"value"in w&&r(_,"value",y.value,w.value,O)}},M=(_,y,w,E,O,T,j,z,F)=>{const I=y.el=_?_.el:a(""),J=y.anchor=_?_.anchor:a("");let{patchFlag:U,dynamicChildren:X,slotScopeIds:st}=y;st&&(z=z?z.concat(st):st),_==null?(s(I,w,E),s(J,w,E),D(y.children||[],w,J,O,T,j,z,F)):U>0&&U&64&&X&&_.dynamicChildren?(H(_.dynamicChildren,X,w,O,T,j,z),(y.key!=null||O&&y===O.subTree)&&nh(_,y,!0)):ot(_,y,w,J,O,T,j,z,F)},tt=(_,y,w,E,O,T,j,z,F)=>{y.slotScopeIds=z,_==null?y.shapeFlag&512?O.ctx.activate(y,w,E,j,F):ft(y,w,E,O,T,j,F):rt(_,y,F)},ft=(_,y,w,E,O,T,j)=>{const z=_.component=Xg(_,E,O);if(Kr(_)&&(z.ctx.renderer=Y),Jg(z,!1,j),z.asyncDep){if(O&&O.registerDep(z,et,j),!_.el){const F=z.subTree=ut(ne);x(null,F,y,w)}}else et(z,_,y,w,O,T,j)},rt=(_,y,w)=>{const E=y.component=_.component;if(Hg(_,y,w))if(E.asyncDep&&!E.asyncResolved){Z(E,y,w);return}else E.next=y,E.update();else y.el=_.el,E.vnode=y},et=(_,y,w,E,O,T,j)=>{const z=()=>{if(_.isMounted){let{next:U,bu:X,u:st,parent:lt,vnode:Rt}=_;{const Ne=sh(_);if(Ne){U&&(U.el=Rt.el,Z(_,U,j)),Ne.asyncDep.then(()=>{_.isUnmounted||z()});return}}let _t=U,pe;Pn(_,!1),U?(U.el=Rt.el,Z(_,U,j)):U=Rt,X&&er(X),(pe=U.props&&U.props.onVnodeBeforeUpdate)&&Be(pe,lt,U,Rt),Pn(_,!0);const re=Hl(_),$e=_.subTree;_.subTree=re,m($e,re,f($e.el),A($e),_,O,T),U.el=re.el,_t===null&&jg(_,re.el),st&&me(st,O),(pe=U.props&&U.props.onVnodeUpdated)&&me(()=>Be(pe,lt,U,Rt),O)}else{let U;const{el:X,props:st}=y,{bm:lt,m:Rt,parent:_t,root:pe,type:re}=_,$e=Ys(y);Pn(_,!1),lt&&er(lt),!$e&&(U=st&&st.onVnodeBeforeMount)&&Be(U,_t,y),Pn(_,!0);{pe.ce&&pe.ce._injectChildStyle(re);const Ne=_.subTree=Hl(_);m(null,Ne,w,E,_,O,T),y.el=Ne.el}if(Rt&&me(Rt,O),!$e&&(U=st&&st.onVnodeMounted)){const Ne=y;me(()=>Be(U,_t,Ne),O)}(y.shapeFlag&256||_t&&Ys(_t.vnode)&&_t.vnode.shapeFlag&256)&&_.a&&me(_.a,O),_.isMounted=!0,y=w=E=null}};_.scope.on();const F=_.effect=new uf(z);_.scope.off();const I=_.update=F.run.bind(F),J=_.job=F.runIfDirty.bind(F);J.i=_,J.id=_.uid,F.scheduler=()=>za(J),Pn(_,!0),I()},Z=(_,y,w)=>{y.component=_;const E=_.vnode.props;_.vnode=y,_.next=null,Rg(_,y.props,E,w),Cg(_,y.children,w),un(),Ml(_),fn()},ot=(_,y,w,E,O,T,j,z,F=!1)=>{const I=_&&_.children,J=_?_.shapeFlag:0,U=y.children,{patchFlag:X,shapeFlag:st}=y;if(X>0){if(X&128){Qt(I,U,w,E,O,T,j,z,F);return}else if(X&256){kt(I,U,w,E,O,T,j,z,F);return}}st&8?(J&16&&Lt(I,O,T),U!==I&&u(w,U)):J&16?st&16?Qt(I,U,w,E,O,T,j,z,F):Lt(I,O,T,!0):(J&8&&u(w,""),st&16&&D(U,w,E,O,T,j,z,F))},kt=(_,y,w,E,O,T,j,z,F)=>{_=_||ls,y=y||ls;const I=_.length,J=y.length,U=Math.min(I,J);let X;for(X=0;X<U;X++){const st=y[X]=F?yn(y[X]):qe(y[X]);m(_[X],st,w,null,O,T,j,z,F)}I>J?Lt(_,O,T,!0,!1,U):D(y,w,E,O,T,j,z,F,U)},Qt=(_,y,w,E,O,T,j,z,F)=>{let I=0;const J=y.length;let U=_.length-1,X=J-1;for(;I<=U&&I<=X;){const st=_[I],lt=y[I]=F?yn(y[I]):qe(y[I]);if(zn(st,lt))m(st,lt,w,null,O,T,j,z,F);else break;I++}for(;I<=U&&I<=X;){const st=_[U],lt=y[X]=F?yn(y[X]):qe(y[X]);if(zn(st,lt))m(st,lt,w,null,O,T,j,z,F);else break;U--,X--}if(I>U){if(I<=X){const st=X+1,lt=st<J?y[st].el:E;for(;I<=X;)m(null,y[I]=F?yn(y[I]):qe(y[I]),w,lt,O,T,j,z,F),I++}}else if(I>X)for(;I<=U;)Mt(_[I],O,T,!0),I++;else{const st=I,lt=I,Rt=new Map;for(I=lt;I<=X;I++){const ge=y[I]=F?yn(y[I]):qe(y[I]);ge.key!=null&&Rt.set(ge.key,I)}let _t,pe=0;const re=X-lt+1;let $e=!1,Ne=0;const As=new Array(re);for(I=0;I<re;I++)As[I]=0;for(I=st;I<=U;I++){const ge=_[I];if(pe>=re){Mt(ge,O,T,!0);continue}let Fe;if(ge.key!=null)Fe=Rt.get(ge.key);else for(_t=lt;_t<=X;_t++)if(As[_t-lt]===0&&zn(ge,y[_t])){Fe=_t;break}Fe===void 0?Mt(ge,O,T,!0):(As[Fe-lt]=I+1,Fe>=Ne?Ne=Fe:$e=!0,m(ge,y[Fe],w,null,O,T,j,z,F),pe++)}const El=$e?Ig(As):ls;for(_t=El.length-1,I=re-1;I>=0;I--){const ge=lt+I,Fe=y[ge],Al=ge+1<J?y[ge+1].el:E;As[I]===0?m(null,Fe,w,Al,O,T,j,z,F):$e&&(_t<0||I!==El[_t]?Jt(Fe,w,Al,2):_t--)}}},Jt=(_,y,w,E,O=null)=>{const{el:T,type:j,transition:z,children:F,shapeFlag:I}=_;if(I&6){Jt(_.component.subTree,y,w,E);return}if(I&128){_.suspense.move(y,w,E);return}if(I&64){j.move(_,y,w,Y);return}if(j===jt){s(T,y,w);for(let U=0;U<F.length;U++)Jt(F[U],y,w,E);s(_.anchor,y,w);return}if(j===Eo){S(_,y,w);return}if(E!==2&&I&1&&z)if(E===0)z.beforeEnter(T),s(T,y,w),me(()=>z.enter(T),O);else{const{leave:U,delayLeave:X,afterLeave:st}=z,lt=()=>{_.ctx.isUnmounted?i(T):s(T,y,w)},Rt=()=>{U(T,()=>{lt(),st&&st()})};X?X(T,lt,Rt):Rt()}else s(T,y,w)},Mt=(_,y,w,E=!1,O=!1)=>{const{type:T,props:j,ref:z,children:F,dynamicChildren:I,shapeFlag:J,patchFlag:U,dirs:X,cacheIndex:st}=_;if(U===-2&&(O=!1),z!=null&&(un(),mr(z,null,w,_,!0),fn()),st!=null&&(y.renderCache[st]=void 0),J&256){y.ctx.deactivate(_);return}const lt=J&1&&X,Rt=!Ys(_);let _t;if(Rt&&(_t=j&&j.onVnodeBeforeUnmount)&&Be(_t,y,_),J&6)De(_.component,w,E);else{if(J&128){_.suspense.unmount(w,E);return}lt&&On(_,null,y,"beforeUnmount"),J&64?_.type.remove(_,y,w,Y,E):I&&!I.hasOnce&&(T!==jt||U>0&&U&64)?Lt(I,y,w,!1,!0):(T===jt&&U&384||!O&&J&16)&&Lt(F,y,w),E&&xe(_)}(Rt&&(_t=j&&j.onVnodeUnmounted)||lt)&&me(()=>{_t&&Be(_t,y,_),lt&&On(_,null,y,"unmounted")},w)},xe=_=>{const{type:y,el:w,anchor:E,transition:O}=_;if(y===jt){ie(w,E);return}if(y===Eo){k(_);return}const T=()=>{i(w),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(_.shapeFlag&1&&O&&!O.persisted){const{leave:j,delayLeave:z}=O,F=()=>j(w,T);z?z(_.el,T,F):F()}else T()},ie=(_,y)=>{let w;for(;_!==y;)w=h(_),i(_),_=w;i(y)},De=(_,y,w)=>{const{bum:E,scope:O,job:T,subTree:j,um:z,m:F,a:I,parent:J,slots:{__:U}}=_;zl(F),zl(I),E&&er(E),J&&Q(U)&&U.forEach(X=>{J.renderCache[X]=void 0}),O.stop(),T&&(T.flags|=8,Mt(j,_,y,w)),z&&me(z,y),me(()=>{_.isUnmounted=!0},y),y&&y.pendingBranch&&!y.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===y.pendingId&&(y.deps--,y.deps===0&&y.resolve())},Lt=(_,y,w,E=!1,O=!1,T=0)=>{for(let j=T;j<_.length;j++)Mt(_[j],y,w,E,O)},A=_=>{if(_.shapeFlag&6)return A(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const y=h(_.anchor||_.el),w=y&&y[eg];return w?h(w):y};let q=!1;const V=(_,y,w)=>{_==null?y._vnode&&Mt(y._vnode,null,null,!0):m(y._vnode||null,_,y,null,null,null,w),y._vnode=_,q||(q=!0,Ml(),Of(),q=!1)},Y={p:m,um:Mt,m:Jt,r:xe,mt:ft,mc:D,pc:ot,pbc:H,n:A,o:e};return{render:V,hydrate:void 0,createApp:Sg(V)}}function Ro({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Pn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Mg(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function nh(e,t,n=!1){const s=e.children,i=t.children;if(Q(s)&&Q(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=yn(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&nh(o,a)),a.type===Xr&&(a.el=o.el),a.type===ne&&!a.el&&(a.el=o.el)}}function Ig(e){const t=e.slice(),n=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(i=n[n.length-1],e[i]<c){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<c?r=a+1:o=a;c<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function sh(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:sh(t)}function zl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Lg=Symbol.for("v-scx"),Dg=()=>Ee(Lg);function Rn(e,t,n){return ih(e,t,n)}function ih(e,t,n=wt){const{immediate:s,deep:i,flush:r,once:o}=n,a=zt({},n),l=t&&s||!t&&r!=="post";let c;if(hi){if(r==="sync"){const d=Dg();c=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=Ke,d.resume=Ke,d.pause=Ke,d}}const u=Vt;a.call=(d,g,m)=>Pe(d,u,g,m);let f=!1;r==="post"?a.scheduler=d=>{me(d,u&&u.suspense)}:r!=="sync"&&(f=!0,a.scheduler=(d,g)=>{g?d():za(d)}),a.augmentJob=d=>{t&&(d.flags|=4),f&&(d.flags|=2,u&&(d.id=u.uid,d.i=u))};const h=Qp(e,t,a);return hi&&(c?c.push(h):l&&h()),h}function $g(e,t,n){const s=this.proxy,i=Pt(e)?e.includes(".")?rh(s,e):()=>s[e]:e.bind(s,s);let r;it(t)?r=t:(r=t.handler,n=t);const o=Ci(this),a=ih(i,r.bind(s),n);return o(),a}function rh(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const Ng=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ae(t)}Modifiers`]||e[`${Xn(t)}Modifiers`];function Fg(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||wt;let i=n;const r=t.startsWith("update:"),o=r&&Ng(s,t.slice(7));o&&(o.trim&&(i=n.map(u=>Pt(u)?u.trim():u)),o.number&&(i=n.map(fr)));let a,l=s[a=_o(t)]||s[a=_o(Ae(t))];!l&&r&&(l=s[a=_o(Xn(t))]),l&&Pe(l,e,6,i);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Pe(c,e,6,i)}}function oh(e,t,n=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!it(e)){const l=c=>{const u=oh(c,t,!0);u&&(a=!0,zt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(St(e)&&s.set(e,null),null):(Q(r)?r.forEach(l=>o[l]=null):zt(o,r),St(e)&&s.set(e,o),o)}function Yr(e,t){return!e||!Fr(t)?!1:(t=t.slice(2).replace(/Once$/,""),gt(e,t[0].toLowerCase()+t.slice(1))||gt(e,Xn(t))||gt(e,t))}function Hl(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:f,data:h,setupState:d,ctx:g,inheritAttrs:m}=e,b=gr(e);let x,v;try{if(n.shapeFlag&4){const k=i||s,C=k;x=qe(c.call(C,k,u,f,d,h,g)),v=a}else{const k=t;x=qe(k.length>1?k(f,{attrs:a,slots:o,emit:l}):k(f,null)),v=t.props?a:Bg(a)}}catch(k){Qs.length=0,Ur(k,e,1),x=ut(ne)}let S=x;if(v&&m!==!1){const k=Object.keys(v),{shapeFlag:C}=S;k.length&&C&7&&(r&&k.some(Ca)&&(v=zg(v,r)),S=Tn(S,v,!1,!0))}return n.dirs&&(S=Tn(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&ci(S,n.transition),x=S,gr(b),x}const Bg=e=>{let t;for(const n in e)(n==="class"||n==="style"||Fr(n))&&((t||(t={}))[n]=e[n]);return t},zg=(e,t)=>{const n={};for(const s in e)(!Ca(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function Hg(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?jl(s,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==s[h]&&!Yr(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?jl(s,o,c):!0:!!o;return!1}function jl(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!Yr(n,r))return!0}return!1}function jg({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const ah=e=>e.__isSuspense;function Vg(e,t){t&&t.pendingBranch?Q(e)?t.effects.push(...e):t.effects.push(e):tg(e)}const jt=Symbol.for("v-fgt"),Xr=Symbol.for("v-txt"),ne=Symbol.for("v-cmt"),Eo=Symbol.for("v-stc"),Qs=[];let _e=null;function L(e=!1){Qs.push(_e=e?null:[])}function Ug(){Qs.pop(),_e=Qs[Qs.length-1]||null}let ui=1;function Vl(e,t=!1){ui+=e,e<0&&_e&&t&&(_e.hasOnce=!0)}function lh(e){return e.dynamicChildren=ui>0?_e||ls:null,Ug(),ui>0&&_e&&_e.push(e),e}function B(e,t,n,s,i,r){return lh(p(e,t,n,s,i,r,!0))}function fi(e,t,n,s,i){return lh(ut(e,t,n,s,i,!0))}function _r(e){return e?e.__v_isVNode===!0:!1}function zn(e,t){return e.type===t.type&&e.key===t.key}const ch=({key:e})=>e??null,sr=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Pt(e)||Xt(e)||it(e)?{i:ue,r:e,k:t,f:!!n}:e:null);function p(e,t=null,n=null,s=0,i=null,r=e===jt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ch(t),ref:t&&sr(t),scopeId:Mf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ue};return a?(Wa(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=Pt(n)?8:16),ui>0&&!o&&_e&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&_e.push(l),l}const ut=Wg;function Wg(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===Vf)&&(e=ne),_r(e)){const a=Tn(e,t,!0);return n&&Wa(a,n),ui>0&&!r&&_e&&(a.shapeFlag&6?_e[_e.indexOf(e)]=a:_e.push(a)),a.patchFlag=-2,a}if(sm(e)&&(e=e.__vccOpts),t){t=qg(t);let{class:a,style:l}=t;a&&!Pt(a)&&(t.class=Ce(a)),St(l)&&(Ai(l)&&!Q(l)&&(l=zt({},l)),t.style=jr(l))}const o=Pt(e)?1:ah(e)?128:If(e)?64:St(e)?4:it(e)?2:0;return p(e,t,n,s,i,o,r,!0)}function qg(e){return e?Ai(e)||Xf(e)?zt({},e):e:null}function Tn(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?Kg(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&ch(c),ref:t&&t.ref?n&&r?Q(r)?r.concat(sr(t)):[r,sr(t)]:sr(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==jt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Tn(e.ssContent),ssFallback:e.ssFallback&&Tn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&ci(u,l.clone(u)),u}function nt(e=" ",t=0){return ut(Xr,null,e,t)}function Tt(e="",t=!1){return t?(L(),fi(ne,null,e)):ut(ne,null,e)}function qe(e){return e==null||typeof e=="boolean"?ut(ne):Q(e)?ut(jt,null,e.slice()):_r(e)?yn(e):ut(Xr,null,String(e))}function yn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Tn(e)}function Wa(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Q(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Wa(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!Xf(t)?t._ctx=ue:i===3&&ue&&(ue.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else it(t)?(t={default:t,_ctx:ue},n=32):(t=String(t),s&64?(n=16,t=[nt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Kg(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=Ce([t.class,s.class]));else if(i==="style")t.style=jr([t.style,s.style]);else if(Fr(i)){const r=t[i],o=s[i];o&&r!==o&&!(Q(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function Be(e,t,n,s=null){Pe(e,t,7,[n,s])}const Gg=Kf();let Yg=0;function Xg(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||Gg,r={uid:Yg++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Jf(s,i),emitsOptions:oh(s,i),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:s.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Fg.bind(null,r),e.ce&&e.ce(r),r}let Vt=null;const Qg=()=>Vt||ue;let yr,na;{const e=Hr(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};yr=t("__VUE_INSTANCE_SETTERS__",n=>Vt=n),na=t("__VUE_SSR_SETTERS__",n=>hi=n)}const Ci=e=>{const t=Vt;return yr(e),e.scope.on(),()=>{e.scope.off(),yr(t)}},Ul=()=>{Vt&&Vt.scope.off(),yr(null)};function uh(e){return e.vnode.shapeFlag&4}let hi=!1;function Jg(e,t=!1,n=!1){t&&na(t);const{props:s,children:i}=e.vnode,r=uh(e);kg(e,s,r,t),Tg(e,i,n||t);const o=r?Zg(e,t):void 0;return t&&na(!1),o}function Zg(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,mg);const{setup:s}=n;if(s){un();const i=e.setupContext=s.length>1?em(e):null,r=Ci(e),o=Ti(s,e,0,[e.props,i]),a=ef(o);if(fn(),r(),(a||e.sp)&&!Ys(e)&&Bf(e),a){if(o.then(Ul,Ul),t)return o.then(l=>{Wl(e,l)}).catch(l=>{Ur(l,e,0)});e.asyncDep=o}else Wl(e,o)}else fh(e)}function Wl(e,t,n){it(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:St(t)&&(e.setupState=Af(t)),fh(e)}function fh(e,t,n){const s=e.type;e.render||(e.render=s.render||Ke);{const i=Ci(e);un();try{bg(e)}finally{fn(),i()}}}const tm={get(e,t){return Kt(e,"get",""),e[t]}};function em(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,tm),slots:e.slots,emit:e.emit,expose:t}}function Qr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Af(Wp(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Xs)return Xs[n](e)},has(t,n){return n in t||n in Xs}})):e.proxy}function nm(e,t=!0){return it(e)?e.displayName||e.name:e.name||t&&e.__name}function sm(e){return it(e)&&"__vccOpts"in e}const Ct=(e,t)=>Yp(e,t,hi);function ps(e,t,n){const s=arguments.length;return s===2?St(t)&&!Q(t)?_r(t)?ut(e,null,[t]):ut(e,t):ut(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&_r(n)&&(n=[n]),ut(e,t,n))}const hh="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sa;const ql=typeof window<"u"&&window.trustedTypes;if(ql)try{sa=ql.createPolicy("vue",{createHTML:e=>e})}catch{}const dh=sa?e=>sa.createHTML(e):e=>e,im="http://www.w3.org/2000/svg",rm="http://www.w3.org/1998/Math/MathML",nn=typeof document<"u"?document:null,Kl=nn&&nn.createElement("template"),om={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?nn.createElementNS(im,e):t==="mathml"?nn.createElementNS(rm,e):n?nn.createElement(e,{is:n}):nn.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>nn.createTextNode(e),createComment:e=>nn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>nn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Kl.innerHTML=dh(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Kl.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},pn="transition",Cs="animation",di=Symbol("_vtc"),ph={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},am=zt({},Lf,ph),lm=e=>(e.displayName="Transition",e.props=am,e),gh=lm((e,{slots:t})=>ps(ig,cm(e),t)),Mn=(e,t=[])=>{Q(e)?e.forEach(n=>n(...t)):e&&e(...t)},Gl=e=>e?Q(e)?e.some(t=>t.length>1):e.length>1:!1;function cm(e){const t={};for(const M in e)M in ph||(t[M]=e[M]);if(e.css===!1)return t;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=e,g=um(i),m=g&&g[0],b=g&&g[1],{onBeforeEnter:x,onEnter:v,onEnterCancelled:S,onLeave:k,onLeaveCancelled:C,onBeforeAppear:$=x,onAppear:P=v,onAppearCancelled:D=S}=t,N=(M,tt,ft,rt)=>{M._enterCancelled=rt,In(M,tt?u:a),In(M,tt?c:o),ft&&ft()},H=(M,tt)=>{M._isLeaving=!1,In(M,f),In(M,d),In(M,h),tt&&tt()},K=M=>(tt,ft)=>{const rt=M?P:v,et=()=>N(tt,M,ft);Mn(rt,[tt,et]),Yl(()=>{In(tt,M?l:r),Xe(tt,M?u:a),Gl(rt)||Xl(tt,s,m,et)})};return zt(t,{onBeforeEnter(M){Mn(x,[M]),Xe(M,r),Xe(M,o)},onBeforeAppear(M){Mn($,[M]),Xe(M,l),Xe(M,c)},onEnter:K(!1),onAppear:K(!0),onLeave(M,tt){M._isLeaving=!0;const ft=()=>H(M,tt);Xe(M,f),M._enterCancelled?(Xe(M,h),Zl()):(Zl(),Xe(M,h)),Yl(()=>{M._isLeaving&&(In(M,f),Xe(M,d),Gl(k)||Xl(M,s,b,ft))}),Mn(k,[M,ft])},onEnterCancelled(M){N(M,!1,void 0,!0),Mn(S,[M])},onAppearCancelled(M){N(M,!0,void 0,!0),Mn(D,[M])},onLeaveCancelled(M){H(M),Mn(C,[M])}})}function um(e){if(e==null)return null;if(St(e))return[Ao(e.enter),Ao(e.leave)];{const t=Ao(e);return[t,t]}}function Ao(e){return bp(e)}function Xe(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[di]||(e[di]=new Set)).add(t)}function In(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[di];n&&(n.delete(t),n.size||(e[di]=void 0))}function Yl(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let fm=0;function Xl(e,t,n,s){const i=e._endId=++fm,r=()=>{i===e._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=hm(e,t);if(!o)return s();const c=o+"end";let u=0;const f=()=>{e.removeEventListener(c,h),r()},h=d=>{d.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),e.addEventListener(c,h)}function hm(e,t){const n=window.getComputedStyle(e),s=g=>(n[g]||"").split(", "),i=s(`${pn}Delay`),r=s(`${pn}Duration`),o=Ql(i,r),a=s(`${Cs}Delay`),l=s(`${Cs}Duration`),c=Ql(a,l);let u=null,f=0,h=0;t===pn?o>0&&(u=pn,f=o,h=r.length):t===Cs?c>0&&(u=Cs,f=c,h=l.length):(f=Math.max(o,c),u=f>0?o>c?pn:Cs:null,h=u?u===pn?r.length:l.length:0);const d=u===pn&&/\b(transform|all)(,|$)/.test(s(`${pn}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:d}}function Ql(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Jl(n)+Jl(e[s])))}function Jl(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Zl(){return document.body.offsetHeight}function dm(e,t,n){const s=e[di];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const xr=Symbol("_vod"),mh=Symbol("_vsh"),pm={beforeMount(e,{value:t},{transition:n}){e[xr]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Os(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Os(e,!0),s.enter(e)):s.leave(e,()=>{Os(e,!1)}):Os(e,t))},beforeUnmount(e,{value:t}){Os(e,t)}};function Os(e,t){e.style.display=t?e[xr]:"none",e[mh]=!t}const gm=Symbol(""),mm=/(^|;)\s*display\s*:/;function bm(e,t,n){const s=e.style,i=Pt(n);let r=!1;if(n&&!i){if(t)if(Pt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ir(s,a,"")}else for(const o in t)n[o]==null&&ir(s,o,"");for(const o in n)o==="display"&&(r=!0),ir(s,o,n[o])}else if(i){if(t!==n){const o=s[gm];o&&(n+=";"+o),s.cssText=n,r=mm.test(n)}}else t&&e.removeAttribute("style");xr in e&&(e[xr]=r?s.display:"",e[mh]&&(s.display="none"))}const tc=/\s*!important$/;function ir(e,t,n){if(Q(n))n.forEach(s=>ir(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=_m(e,t);tc.test(n)?e.setProperty(Xn(s),n.replace(tc,""),"important"):e[s]=n}}const ec=["Webkit","Moz","ms"],To={};function _m(e,t){const n=To[t];if(n)return n;let s=Ae(t);if(s!=="filter"&&s in e)return To[t]=s;s=zr(s);for(let i=0;i<ec.length;i++){const r=ec[i]+s;if(r in e)return To[t]=r}return t}const nc="http://www.w3.org/1999/xlink";function sc(e,t,n,s,i,r=Sp(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(nc,t.slice(6,t.length)):e.setAttributeNS(nc,t,n):n==null||r&&!of(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Ge(n)?String(n):n)}function ic(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?dh(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=of(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function vn(e,t,n,s){e.addEventListener(t,n,s)}function ym(e,t,n,s){e.removeEventListener(t,n,s)}const rc=Symbol("_vei");function xm(e,t,n,s,i=null){const r=e[rc]||(e[rc]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=vm(t);if(s){const c=r[t]=km(s,i);vn(e,a,c,l)}else o&&(ym(e,a,o,l),r[t]=void 0)}}const oc=/(?:Once|Passive|Capture)$/;function vm(e){let t;if(oc.test(e)){t={};let s;for(;s=e.match(oc);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xn(e.slice(2)),t]}let Co=0;const wm=Promise.resolve(),Sm=()=>Co||(wm.then(()=>Co=0),Co=Date.now());function km(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Pe(Rm(s,n.value),t,5,[s])};return n.value=e,n.attached=Sm(),n}function Rm(e,t){if(Q(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const ac=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Em=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?dm(e,s,o):t==="style"?bm(e,n,s):Fr(t)?Ca(t)||xm(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Am(e,t,s,o))?(ic(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&sc(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Pt(s))?ic(e,Ae(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),sc(e,t,s,o))};function Am(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&ac(t)&&it(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return ac(t)&&Pt(n)?!1:t in e}const gs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Q(t)?n=>er(t,n):t};function Tm(e){e.target.composing=!0}function lc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const cn=Symbol("_assign"),te={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[cn]=gs(i);const r=s||i.props&&i.props.type==="number";vn(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=fr(a)),e[cn](a)}),n&&vn(e,"change",()=>{e.value=e.value.trim()}),t||(vn(e,"compositionstart",Tm),vn(e,"compositionend",lc),vn(e,"change",lc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[cn]=gs(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?fr(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},Cm={deep:!0,created(e,t,n){e[cn]=gs(n),vn(e,"change",()=>{const s=e._modelValue,i=pi(e),r=e.checked,o=e[cn];if(Q(s)){const a=Ma(s,i),l=a!==-1;if(r&&!l)o(s.concat(i));else if(!r&&l){const c=[...s];c.splice(a,1),o(c)}}else if(ys(s)){const a=new Set(s);r?a.add(i):a.delete(i),o(a)}else o(bh(e,r))})},mounted:cc,beforeUpdate(e,t,n){e[cn]=gs(n),cc(e,t,n)}};function cc(e,{value:t,oldValue:n},s){e._modelValue=t;let i;if(Q(t))i=Ma(t,s.props.value)>-1;else if(ys(t))i=t.has(s.props.value);else{if(t===n)return;i=Ri(t,bh(e,!0))}e.checked!==i&&(e.checked=i)}const Om={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=ys(t);vn(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?fr(pi(o)):pi(o));e[cn](e.multiple?i?new Set(r):r:r[0]),e._assigning=!0,Wr(()=>{e._assigning=!1})}),e[cn]=gs(s)},mounted(e,{value:t}){uc(e,t)},beforeUpdate(e,t,n){e[cn]=gs(n)},updated(e,{value:t}){e._assigning||uc(e,t)}};function uc(e,t){const n=e.multiple,s=Q(t);if(!(n&&!s&&!ys(t))){for(let i=0,r=e.options.length;i<r;i++){const o=e.options[i],a=pi(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(c=>String(c)===String(a)):o.selected=Ma(t,a)>-1}else o.selected=t.has(a);else if(Ri(pi(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function pi(e){return"_value"in e?e._value:e.value}function bh(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Pm=["ctrl","shift","alt","meta"],Mm={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Pm.some(n=>e[`${n}Key`]&&!t.includes(n))},Oi=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=Mm[t[o]];if(a&&a(i,t))return}return e(i,...r)})},Im=zt({patchProp:Em},om);let fc;function Lm(){return fc||(fc=Og(Im))}const Dm=(...e)=>{const t=Lm().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=Nm(s);if(!i)return;const r=t._component;!it(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,$m(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function $m(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Nm(e){return Pt(e)?document.querySelector(e):e}const Wt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},Fm={name:"App"};function Bm(e,t,n,s,i,r){const o=ja("router-view");return L(),fi(o)}const zm=Wt(Fm,[["render",Bm]]);function Hm(){return _h().__VUE_DEVTOOLS_GLOBAL_HOOK__}function _h(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const jm=typeof Proxy=="function",Vm="devtools-plugin:setup",Um="plugin:settings:set";let ts,ia;function Wm(){var e;return ts!==void 0||(typeof window<"u"&&window.performance?(ts=!0,ia=window.performance):typeof globalThis<"u"&&(!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance)?(ts=!0,ia=globalThis.perf_hooks.performance):ts=!1),ts}function qm(){return Wm()?ia.now():Date.now()}class Km{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const s={};if(t.settings)for(const o in t.settings){const a=t.settings[o];s[o]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let r=Object.assign({},s);try{const o=localStorage.getItem(i),a=JSON.parse(o);Object.assign(r,a)}catch{}this.fallbacks={getSettings(){return r},setSettings(o){try{localStorage.setItem(i,JSON.stringify(o))}catch{}r=o},now(){return qm()}},n&&n.on(Um,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function Gm(e,t){const n=e,s=_h(),i=Hm(),r=jm&&n.enableEarlyProxy;if(i&&(s.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!r))i.emit(Vm,e,t);else{const o=r?new Km(n,i):null;(s.__VUE_DEVTOOLS_PLUGINS__=s.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const os=typeof document<"u";function yh(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ym(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&yh(e.default)}const pt=Object.assign;function Oo(e,t){const n={};for(const s in t){const i=t[s];n[s]=Me(i)?i.map(e):e(i)}return n}const Js=()=>{},Me=Array.isArray,xh=/#/g,Xm=/&/g,Qm=/\//g,Jm=/=/g,Zm=/\?/g,vh=/\+/g,tb=/%5B/g,eb=/%5D/g,wh=/%5E/g,nb=/%60/g,Sh=/%7B/g,sb=/%7C/g,kh=/%7D/g,ib=/%20/g;function qa(e){return encodeURI(""+e).replace(sb,"|").replace(tb,"[").replace(eb,"]")}function rb(e){return qa(e).replace(Sh,"{").replace(kh,"}").replace(wh,"^")}function ra(e){return qa(e).replace(vh,"%2B").replace(ib,"+").replace(xh,"%23").replace(Xm,"%26").replace(nb,"`").replace(Sh,"{").replace(kh,"}").replace(wh,"^")}function ob(e){return ra(e).replace(Jm,"%3D")}function ab(e){return qa(e).replace(xh,"%23").replace(Zm,"%3F")}function lb(e){return e==null?"":ab(e).replace(Qm,"%2F")}function gi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const cb=/\/$/,ub=e=>e.replace(cb,"");function Po(e,t,n="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),i=e(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=pb(s??t,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:gi(o)}}function fb(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function hc(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function hb(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&ms(t.matched[s],n.matched[i])&&Rh(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function ms(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Rh(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!db(e[n],t[n]))return!1;return!0}function db(e,t){return Me(e)?dc(e,t):Me(t)?dc(t,e):e===t}function dc(e,t){return Me(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function pb(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const gn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var mi;(function(e){e.pop="pop",e.push="push"})(mi||(mi={}));var Zs;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Zs||(Zs={}));function gb(e){if(!e)if(os){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ub(e)}const mb=/^[^#]+#/;function bb(e,t){return e.replace(mb,"#")+t}function _b(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Jr=()=>({left:window.scrollX,top:window.scrollY});function yb(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=_b(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function pc(e,t){return(history.state?history.state.position-t:-1)+e}const oa=new Map;function xb(e,t){oa.set(e,t)}function vb(e){const t=oa.get(e);return oa.delete(e),t}let wb=()=>location.protocol+"//"+location.host;function Eh(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let a=i.includes(e.slice(r))?e.slice(r).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),hc(l,"")}return hc(n,e)+s+i}function Sb(e,t,n,s){let i=[],r=[],o=null;const a=({state:h})=>{const d=Eh(e,location),g=n.value,m=t.value;let b=0;if(h){if(n.value=d,t.value=h,o&&o===g){o=null;return}b=m?h.position-m.position:0}else s(d);i.forEach(x=>{x(n.value,g,{delta:b,type:mi.pop,direction:b?b>0?Zs.forward:Zs.back:Zs.unknown})})};function l(){o=n.value}function c(h){i.push(h);const d=()=>{const g=i.indexOf(h);g>-1&&i.splice(g,1)};return r.push(d),d}function u(){const{history:h}=window;h.state&&h.replaceState(pt({},h.state,{scroll:Jr()}),"")}function f(){for(const h of r)h();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function gc(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?Jr():null}}function kb(e){const{history:t,location:n}=window,s={value:Eh(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:wb()+e+l;try{t[u?"replaceState":"pushState"](c,"",h),i.value=c}catch(d){console.error(d),n[u?"replace":"assign"](h)}}function o(l,c){const u=pt({},t.state,gc(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});r(l,u,!0),s.value=l}function a(l,c){const u=pt({},i.value,t.state,{forward:l,scroll:Jr()});r(u.current,u,!0);const f=pt({},gc(s.value,l,null),{position:u.position+1},c);r(l,f,!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function Rb(e){e=gb(e);const t=kb(e),n=Sb(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=pt({location:"",base:e,go:s,createHref:bb.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Eb(e){return typeof e=="string"||e&&typeof e=="object"}function Ah(e){return typeof e=="string"||typeof e=="symbol"}const Th=Symbol("");var mc;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(mc||(mc={}));function bs(e,t){return pt(new Error,{type:e,[Th]:!0},t)}function Qe(e,t){return e instanceof Error&&Th in e&&(t==null||!!(e.type&t))}const bc="[^/]+?",Ab={sensitive:!1,strict:!1,start:!0,end:!0},Tb=/[.+*?^${}()[\]/\\]/g;function Cb(e,t){const n=pt({},Ab,t),s=[];let i=n.start?"^":"";const r=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let f=0;f<c.length;f++){const h=c[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(Tb,"\\$&"),d+=40;else if(h.type===1){const{value:g,repeatable:m,optional:b,regexp:x}=h;r.push({name:g,repeatable:m,optional:b});const v=x||bc;if(v!==bc){d+=10;try{new RegExp(`(${v})`)}catch(k){throw new Error(`Invalid custom RegExp for param "${g}" (${v}): `+k.message)}}let S=m?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;f||(S=b&&c.length<2?`(?:/${S})`:"/"+S),b&&(S+="?"),i+=S,d+=20,b&&(d+=-8),m&&(d+=-20),v===".*"&&(d+=-50)}u.push(d)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const d=u[h]||"",g=r[h-1];f[g.name]=d&&g.repeatable?d.split("/"):d}return f}function l(c){let u="",f=!1;for(const h of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const d of h)if(d.type===0)u+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:b}=d,x=g in c?c[g]:"";if(Me(x)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const v=Me(x)?x.join("/"):x;if(!v)if(b)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=v}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function Ob(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Ch(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=Ob(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(_c(s))return 1;if(_c(i))return-1}return i.length-s.length}function _c(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Pb={type:0,value:""},Mb=/[a-zA-Z0-9_]/;function Ib(e){if(!e)return[[]];if(e==="/")return[[Pb]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function f(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):h();break;case 4:h(),n=s;break;case 1:l==="("?n=2:Mb.test(l)?h():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),o(),i}function Lb(e,t,n){const s=Cb(Ib(e.path),n),i=pt(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Db(e,t){const n=[],s=new Map;t=wc({strict:!1,end:!0,sensitive:!1},t);function i(f){return s.get(f)}function r(f,h,d){const g=!d,m=xc(f);m.aliasOf=d&&d.record;const b=wc(t,f),x=[m];if("alias"in f){const k=typeof f.alias=="string"?[f.alias]:f.alias;for(const C of k)x.push(xc(pt({},m,{components:d?d.record.components:m.components,path:C,aliasOf:d?d.record:m})))}let v,S;for(const k of x){const{path:C}=k;if(h&&C[0]!=="/"){const $=h.record.path,P=$[$.length-1]==="/"?"":"/";k.path=h.record.path+(C&&P+C)}if(v=Lb(k,h,b),d?d.alias.push(v):(S=S||v,S!==v&&S.alias.push(v),g&&f.name&&!vc(v)&&o(f.name)),Oh(v)&&l(v),m.children){const $=m.children;for(let P=0;P<$.length;P++)r($[P],v,d&&d.children[P])}d=d||v}return S?()=>{o(S)}:Js}function o(f){if(Ah(f)){const h=s.get(f);h&&(s.delete(f),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(f);h>-1&&(n.splice(h,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const h=Fb(f,n);n.splice(h,0,f),f.record.name&&!vc(f)&&s.set(f.record.name,f)}function c(f,h){let d,g={},m,b;if("name"in f&&f.name){if(d=s.get(f.name),!d)throw bs(1,{location:f});b=d.record.name,g=pt(yc(h.params,d.keys.filter(S=>!S.optional).concat(d.parent?d.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),f.params&&yc(f.params,d.keys.map(S=>S.name))),m=d.stringify(g)}else if(f.path!=null)m=f.path,d=n.find(S=>S.re.test(m)),d&&(g=d.parse(m),b=d.record.name);else{if(d=h.name?s.get(h.name):n.find(S=>S.re.test(h.path)),!d)throw bs(1,{location:f,currentLocation:h});b=d.record.name,g=pt({},h.params,f.params),m=d.stringify(g)}const x=[];let v=d;for(;v;)x.unshift(v.record),v=v.parent;return{name:b,path:m,params:g,matched:x,meta:Nb(x)}}e.forEach(f=>r(f));function u(){n.length=0,s.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function yc(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function xc(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:$b(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function $b(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function vc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Nb(e){return e.reduce((t,n)=>pt(t,n.meta),{})}function wc(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function Fb(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;Ch(e,t[r])<0?s=r:n=r+1}const i=Bb(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function Bb(e){let t=e;for(;t=t.parent;)if(Oh(t)&&Ch(e,t)===0)return t}function Oh({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function zb(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(vh," "),o=r.indexOf("="),a=gi(o<0?r:r.slice(0,o)),l=o<0?null:gi(r.slice(o+1));if(a in t){let c=t[a];Me(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Sc(e){let t="";for(let n in e){const s=e[n];if(n=ob(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Me(s)?s.map(r=>r&&ra(r)):[s&&ra(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function Hb(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Me(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const jb=Symbol(""),kc=Symbol(""),Zr=Symbol(""),Ka=Symbol(""),aa=Symbol("");function Ps(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function xn(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(bs(4,{from:n,to:t})):h instanceof Error?l(h):Eb(h)?l(bs(2,{from:t,to:h})):(o&&s.enterCallbacks[i]===o&&typeof h=="function"&&o.push(h),a())},u=r(()=>e.call(s&&s.instances[i],t,n,c));let f=Promise.resolve(u);e.length<3&&(f=f.then(c)),f.catch(h=>l(h))})}function Mo(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(yh(l)){const u=(l.__vccOpts||l)[t];u&&r.push(xn(u,n,s,o,a,i))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=Ym(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const d=(f.__vccOpts||f)[t];return d&&xn(d,n,s,o,a,i)()}))}}return r}function Rc(e){const t=Ee(Zr),n=Ee(Ka),s=Ct(()=>{const l=kn(e.to);return t.resolve(l)}),i=Ct(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const h=f.findIndex(ms.bind(null,u));if(h>-1)return h;const d=Ec(l[c-2]);return c>1&&Ec(u)===d&&f[f.length-1].path!==d?f.findIndex(ms.bind(null,l[c-2])):h}),r=Ct(()=>i.value>-1&&Kb(n.params,s.value.params)),o=Ct(()=>i.value>-1&&i.value===n.matched.length-1&&Rh(n.params,s.value.params));function a(l={}){if(qb(l)){const c=t[kn(e.replace)?"replace":"push"](kn(e.to)).catch(Js);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:Ct(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function Vb(e){return e.length===1?e[0]:e}const Ub=qr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Rc,setup(e,{slots:t}){const n=Ei(Rc(e)),{options:s}=Ee(Zr),i=Ct(()=>({[Ac(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Ac(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&Vb(t.default(n));return e.custom?r:ps("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),Wb=Ub;function qb(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Kb(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!Me(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function Ec(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ac=(e,t,n)=>e??t??n,Gb=qr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Ee(aa),i=Ct(()=>e.route||s.value),r=Ee(kc,0),o=Ct(()=>{let c=kn(r);const{matched:u}=i.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=Ct(()=>i.value.matched[o.value]);nr(kc,Ct(()=>o.value+1)),nr(jb,a),nr(aa,i);const l=vt();return Rn(()=>[l.value,a.value,e.name],([c,u,f],[h,d,g])=>{u&&(u.instances[f]=c,d&&d!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!ms(u,d)||!h)&&(u.enterCallbacks[f]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,u=e.name,f=a.value,h=f&&f.components[u];if(!h)return Tc(n.default,{Component:h,route:c});const d=f.props[u],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,b=ps(h,pt({},g,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return Tc(n.default,{Component:b,route:c})||b}}});function Tc(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Yb=Gb;function Xb(e){const t=Db(e.routes,e),n=e.parseQuery||zb,s=e.stringifyQuery||Sc,i=e.history,r=Ps(),o=Ps(),a=Ps(),l=Ba(gn);let c=gn;os&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Oo.bind(null,A=>""+A),f=Oo.bind(null,lb),h=Oo.bind(null,gi);function d(A,q){let V,Y;return Ah(A)?(V=t.getRecordMatcher(A),Y=q):Y=A,t.addRoute(Y,V)}function g(A){const q=t.getRecordMatcher(A);q&&t.removeRoute(q)}function m(){return t.getRoutes().map(A=>A.record)}function b(A){return!!t.getRecordMatcher(A)}function x(A,q){if(q=pt({},q||l.value),typeof A=="string"){const w=Po(n,A,q.path),E=t.resolve({path:w.path},q),O=i.createHref(w.fullPath);return pt(w,E,{params:h(E.params),hash:gi(w.hash),redirectedFrom:void 0,href:O})}let V;if(A.path!=null)V=pt({},A,{path:Po(n,A.path,q.path).path});else{const w=pt({},A.params);for(const E in w)w[E]==null&&delete w[E];V=pt({},A,{params:f(w)}),q.params=f(q.params)}const Y=t.resolve(V,q),xt=A.hash||"";Y.params=u(h(Y.params));const _=fb(s,pt({},A,{hash:rb(xt),path:Y.path})),y=i.createHref(_);return pt({fullPath:_,hash:xt,query:s===Sc?Hb(A.query):A.query||{}},Y,{redirectedFrom:void 0,href:y})}function v(A){return typeof A=="string"?Po(n,A,l.value.path):pt({},A)}function S(A,q){if(c!==A)return bs(8,{from:q,to:A})}function k(A){return P(A)}function C(A){return k(pt(v(A),{replace:!0}))}function $(A){const q=A.matched[A.matched.length-1];if(q&&q.redirect){const{redirect:V}=q;let Y=typeof V=="function"?V(A):V;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=v(Y):{path:Y},Y.params={}),pt({query:A.query,hash:A.hash,params:Y.path!=null?{}:A.params},Y)}}function P(A,q){const V=c=x(A),Y=l.value,xt=A.state,_=A.force,y=A.replace===!0,w=$(V);if(w)return P(pt(v(w),{state:typeof w=="object"?pt({},xt,w.state):xt,force:_,replace:y}),q||V);const E=V;E.redirectedFrom=q;let O;return!_&&hb(s,Y,V)&&(O=bs(16,{to:E,from:Y}),Jt(Y,Y,!0,!1)),(O?Promise.resolve(O):H(E,Y)).catch(T=>Qe(T)?Qe(T,2)?T:Qt(T):ot(T,E,Y)).then(T=>{if(T){if(Qe(T,2))return P(pt({replace:y},v(T.to),{state:typeof T.to=="object"?pt({},xt,T.to.state):xt,force:_}),q||E)}else T=M(E,Y,!0,y,xt);return K(E,Y,T),T})}function D(A,q){const V=S(A,q);return V?Promise.reject(V):Promise.resolve()}function N(A){const q=ie.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(A):A()}function H(A,q){let V;const[Y,xt,_]=Qb(A,q);V=Mo(Y.reverse(),"beforeRouteLeave",A,q);for(const w of Y)w.leaveGuards.forEach(E=>{V.push(xn(E,A,q))});const y=D.bind(null,A,q);return V.push(y),Lt(V).then(()=>{V=[];for(const w of r.list())V.push(xn(w,A,q));return V.push(y),Lt(V)}).then(()=>{V=Mo(xt,"beforeRouteUpdate",A,q);for(const w of xt)w.updateGuards.forEach(E=>{V.push(xn(E,A,q))});return V.push(y),Lt(V)}).then(()=>{V=[];for(const w of _)if(w.beforeEnter)if(Me(w.beforeEnter))for(const E of w.beforeEnter)V.push(xn(E,A,q));else V.push(xn(w.beforeEnter,A,q));return V.push(y),Lt(V)}).then(()=>(A.matched.forEach(w=>w.enterCallbacks={}),V=Mo(_,"beforeRouteEnter",A,q,N),V.push(y),Lt(V))).then(()=>{V=[];for(const w of o.list())V.push(xn(w,A,q));return V.push(y),Lt(V)}).catch(w=>Qe(w,8)?w:Promise.reject(w))}function K(A,q,V){a.list().forEach(Y=>N(()=>Y(A,q,V)))}function M(A,q,V,Y,xt){const _=S(A,q);if(_)return _;const y=q===gn,w=os?history.state:{};V&&(Y||y?i.replace(A.fullPath,pt({scroll:y&&w&&w.scroll},xt)):i.push(A.fullPath,xt)),l.value=A,Jt(A,q,V,y),Qt()}let tt;function ft(){tt||(tt=i.listen((A,q,V)=>{if(!De.listening)return;const Y=x(A),xt=$(Y);if(xt){P(pt(xt,{replace:!0,force:!0}),Y).catch(Js);return}c=Y;const _=l.value;os&&xb(pc(_.fullPath,V.delta),Jr()),H(Y,_).catch(y=>Qe(y,12)?y:Qe(y,2)?(P(pt(v(y.to),{force:!0}),Y).then(w=>{Qe(w,20)&&!V.delta&&V.type===mi.pop&&i.go(-1,!1)}).catch(Js),Promise.reject()):(V.delta&&i.go(-V.delta,!1),ot(y,Y,_))).then(y=>{y=y||M(Y,_,!1),y&&(V.delta&&!Qe(y,8)?i.go(-V.delta,!1):V.type===mi.pop&&Qe(y,20)&&i.go(-1,!1)),K(Y,_,y)}).catch(Js)}))}let rt=Ps(),et=Ps(),Z;function ot(A,q,V){Qt(A);const Y=et.list();return Y.length?Y.forEach(xt=>xt(A,q,V)):console.error(A),Promise.reject(A)}function kt(){return Z&&l.value!==gn?Promise.resolve():new Promise((A,q)=>{rt.add([A,q])})}function Qt(A){return Z||(Z=!A,ft(),rt.list().forEach(([q,V])=>A?V(A):q()),rt.reset()),A}function Jt(A,q,V,Y){const{scrollBehavior:xt}=e;if(!os||!xt)return Promise.resolve();const _=!V&&vb(pc(A.fullPath,0))||(Y||!V)&&history.state&&history.state.scroll||null;return Wr().then(()=>xt(A,q,_)).then(y=>y&&yb(y)).catch(y=>ot(y,A,q))}const Mt=A=>i.go(A);let xe;const ie=new Set,De={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:m,resolve:x,options:e,push:k,replace:C,go:Mt,back:()=>Mt(-1),forward:()=>Mt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:et.add,isReady:kt,install(A){const q=this;A.component("RouterLink",Wb),A.component("RouterView",Yb),A.config.globalProperties.$router=q,Object.defineProperty(A.config.globalProperties,"$route",{enumerable:!0,get:()=>kn(l)}),os&&!xe&&l.value===gn&&(xe=!0,k(i.location).catch(xt=>{}));const V={};for(const xt in gn)Object.defineProperty(V,xt,{get:()=>l.value[xt],enumerable:!0});A.provide(Zr,q),A.provide(Ka,kf(V)),A.provide(aa,l);const Y=A.unmount;ie.add(A),A.unmount=function(){ie.delete(A),ie.size<1&&(c=gn,tt&&tt(),tt=null,l.value=gn,xe=!1,Z=!1),Y()}}};function Lt(A){return A.reduce((q,V)=>q.then(()=>N(V)),Promise.resolve())}return De}function Qb(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(c=>ms(c,a))?s.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>ms(c,l))||i.push(l))}return[n,s,i]}function to(){return Ee(Zr)}function Ph(e){return Ee(Ka)}/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var Mh="store";function vs(e){return e===void 0&&(e=null),Ee(e!==null?e:Mh)}function ws(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function Ih(e){return e!==null&&typeof e=="object"}function Jb(e){return e&&typeof e.then=="function"}function Zb(e,t){return function(){return e(t)}}function Lh(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var s=t.indexOf(e);s>-1&&t.splice(s,1)}}function Dh(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;eo(e,n,[],e._modules.root,!0),Ga(e,n,t)}function Ga(e,t,n){var s=e._state,i=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,o={},a={},l=Rp(!0);l.run(function(){ws(r,function(c,u){o[u]=Zb(c,e),a[u]=Ct(function(){return o[u]()}),Object.defineProperty(e.getters,u,{get:function(){return a[u].value},enumerable:!0})})}),e._state=Ei({data:t}),e._scope=l,e.strict&&i_(e),s&&n&&e._withCommit(function(){s.data=null}),i&&i.stop()}function eo(e,t,n,s,i){var r=!n.length,o=e._modules.getNamespace(n);if(s.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=s),!r&&!i){var a=Ya(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit(function(){a[l]=s.state})}var c=s.context=t_(e,o,n);s.forEachMutation(function(u,f){var h=o+f;e_(e,h,u,c)}),s.forEachAction(function(u,f){var h=u.root?f:o+f,d=u.handler||u;n_(e,h,d,c)}),s.forEachGetter(function(u,f){var h=o+f;s_(e,h,u,c)}),s.forEachChild(function(u,f){eo(e,t,n.concat(f),u,i)})}function t_(e,t,n){var s=t==="",i={dispatch:s?e.dispatch:function(r,o,a){var l=vr(r,o,a),c=l.payload,u=l.options,f=l.type;return(!u||!u.root)&&(f=t+f),e.dispatch(f,c)},commit:s?e.commit:function(r,o,a){var l=vr(r,o,a),c=l.payload,u=l.options,f=l.type;(!u||!u.root)&&(f=t+f),e.commit(f,c,u)}};return Object.defineProperties(i,{getters:{get:s?function(){return e.getters}:function(){return $h(e,t)}},state:{get:function(){return Ya(e.state,n)}}}),i}function $h(e,t){if(!e._makeLocalGettersCache[t]){var n={},s=t.length;Object.keys(e.getters).forEach(function(i){if(i.slice(0,s)===t){var r=i.slice(s);Object.defineProperty(n,r,{get:function(){return e.getters[i]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function e_(e,t,n,s){var i=e._mutations[t]||(e._mutations[t]=[]);i.push(function(o){n.call(e,s.state,o)})}function n_(e,t,n,s){var i=e._actions[t]||(e._actions[t]=[]);i.push(function(o){var a=n.call(e,{dispatch:s.dispatch,commit:s.commit,getters:s.getters,state:s.state,rootGetters:e.getters,rootState:e.state},o);return Jb(a)||(a=Promise.resolve(a)),e._devtoolHook?a.catch(function(l){throw e._devtoolHook.emit("vuex:error",l),l}):a})}function s_(e,t,n,s){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(r){return n(s.state,s.getters,r.state,r.getters)})}function i_(e){Rn(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function Ya(e,t){return t.reduce(function(n,s){return n[s]},e)}function vr(e,t,n){return Ih(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var r_="vuex bindings",Cc="vuex:mutations",Io="vuex:actions",es="vuex",o_=0;function a_(e,t){Gm({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[r_]},function(n){n.addTimelineLayer({id:Cc,label:"Vuex Mutations",color:Oc}),n.addTimelineLayer({id:Io,label:"Vuex Actions",color:Oc}),n.addInspector({id:es,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(s){if(s.app===e&&s.inspectorId===es)if(s.filter){var i=[];zh(i,t._modules.root,s.filter,""),s.rootNodes=i}else s.rootNodes=[Bh(t._modules.root,"")]}),n.on.getInspectorState(function(s){if(s.app===e&&s.inspectorId===es){var i=s.nodeId;$h(t,i),s.state=u_(h_(t._modules,i),i==="root"?t.getters:t._makeLocalGettersCache,i)}}),n.on.editInspectorState(function(s){if(s.app===e&&s.inspectorId===es){var i=s.nodeId,r=s.path;i!=="root"&&(r=i.split("/").filter(Boolean).concat(r)),t._withCommit(function(){s.set(t._state.data,r,s.state.value)})}}),t.subscribe(function(s,i){var r={};s.payload&&(r.payload=s.payload),r.state=i,n.notifyComponentUpdate(),n.sendInspectorTree(es),n.sendInspectorState(es),n.addTimelineEvent({layerId:Cc,event:{time:Date.now(),title:s.type,data:r}})}),t.subscribeAction({before:function(s,i){var r={};s.payload&&(r.payload=s.payload),s._id=o_++,s._time=Date.now(),r.state=i,n.addTimelineEvent({layerId:Io,event:{time:s._time,title:s.type,groupId:s._id,subtitle:"start",data:r}})},after:function(s,i){var r={},o=Date.now()-s._time;r.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},s.payload&&(r.payload=s.payload),r.state=i,n.addTimelineEvent({layerId:Io,event:{time:Date.now(),title:s.type,groupId:s._id,subtitle:"end",data:r}})}})})}var Oc=8702998,l_=6710886,c_=16777215,Nh={label:"namespaced",textColor:c_,backgroundColor:l_};function Fh(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function Bh(e,t){return{id:t||"root",label:Fh(t),tags:e.namespaced?[Nh]:[],children:Object.keys(e._children).map(function(n){return Bh(e._children[n],t+n+"/")})}}function zh(e,t,n,s){s.includes(n)&&e.push({id:s||"root",label:s.endsWith("/")?s.slice(0,s.length-1):s||"Root",tags:t.namespaced?[Nh]:[]}),Object.keys(t._children).forEach(function(i){zh(e,t._children[i],n,s+i+"/")})}function u_(e,t,n){t=n==="root"?t:t[n];var s=Object.keys(t),i={state:Object.keys(e.state).map(function(o){return{key:o,editable:!0,value:e.state[o]}})};if(s.length){var r=f_(t);i.getters=Object.keys(r).map(function(o){return{key:o.endsWith("/")?Fh(o):o,editable:!1,value:la(function(){return r[o]})}})}return i}function f_(e){var t={};return Object.keys(e).forEach(function(n){var s=n.split("/");if(s.length>1){var i=t,r=s.pop();s.forEach(function(o){i[o]||(i[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),i=i[o]._custom.value}),i[r]=la(function(){return e[n]})}else t[n]=la(function(){return e[n]})}),t}function h_(e,t){var n=t.split("/").filter(function(s){return s});return n.reduce(function(s,i,r){var o=s[i];if(!o)throw new Error('Missing module "'+i+'" for path "'+t+'".');return r===n.length-1?o:o._children},t==="root"?e:e.root._children)}function la(e){try{return e()}catch(t){return t}}var Ie=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var s=t.state;this.state=(typeof s=="function"?s():s)||{}},Hh={namespaced:{configurable:!0}};Hh.namespaced.get=function(){return!!this._rawModule.namespaced};Ie.prototype.addChild=function(t,n){this._children[t]=n};Ie.prototype.removeChild=function(t){delete this._children[t]};Ie.prototype.getChild=function(t){return this._children[t]};Ie.prototype.hasChild=function(t){return t in this._children};Ie.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};Ie.prototype.forEachChild=function(t){ws(this._children,t)};Ie.prototype.forEachGetter=function(t){this._rawModule.getters&&ws(this._rawModule.getters,t)};Ie.prototype.forEachAction=function(t){this._rawModule.actions&&ws(this._rawModule.actions,t)};Ie.prototype.forEachMutation=function(t){this._rawModule.mutations&&ws(this._rawModule.mutations,t)};Object.defineProperties(Ie.prototype,Hh);var Qn=function(t){this.register([],t,!1)};Qn.prototype.get=function(t){return t.reduce(function(n,s){return n.getChild(s)},this.root)};Qn.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(s,i){return n=n.getChild(i),s+(n.namespaced?i+"/":"")},"")};Qn.prototype.update=function(t){jh([],this.root,t)};Qn.prototype.register=function(t,n,s){var i=this;s===void 0&&(s=!0);var r=new Ie(n,s);if(t.length===0)this.root=r;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],r)}n.modules&&ws(n.modules,function(a,l){i.register(t.concat(l),a,s)})};Qn.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),s=t[t.length-1],i=n.getChild(s);i&&i.runtime&&n.removeChild(s)};Qn.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),s=t[t.length-1];return n?n.hasChild(s):!1};function jh(e,t,n){if(t.update(n),n.modules)for(var s in n.modules){if(!t.getChild(s))return;jh(e.concat(s),t.getChild(s),n.modules[s])}}function d_(e){return new de(e)}var de=function(t){var n=this;t===void 0&&(t={});var s=t.plugins;s===void 0&&(s=[]);var i=t.strict;i===void 0&&(i=!1);var r=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Qn(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=r;var o=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(h,d){return l.call(o,h,d)},this.commit=function(h,d,g){return c.call(o,h,d,g)},this.strict=i;var u=this._modules.root.state;eo(this,u,[],this._modules.root),Ga(this,u),s.forEach(function(f){return f(n)})},Xa={state:{configurable:!0}};de.prototype.install=function(t,n){t.provide(n||Mh,this),t.config.globalProperties.$store=this;var s=this._devtools!==void 0?this._devtools:!1;s&&a_(t,this)};Xa.state.get=function(){return this._state.data};Xa.state.set=function(e){};de.prototype.commit=function(t,n,s){var i=this,r=vr(t,n,s),o=r.type,a=r.payload,l={type:o,payload:a},c=this._mutations[o];c&&(this._withCommit(function(){c.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(u){return u(l,i.state)}))};de.prototype.dispatch=function(t,n){var s=this,i=vr(t,n),r=i.type,o=i.payload,a={type:r,payload:o},l=this._actions[r];if(l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(a,s.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(o)})):l[0](o);return new Promise(function(u,f){c.then(function(h){try{s._actionSubscribers.filter(function(d){return d.after}).forEach(function(d){return d.after(a,s.state)})}catch{}u(h)},function(h){try{s._actionSubscribers.filter(function(d){return d.error}).forEach(function(d){return d.error(a,s.state,h)})}catch{}f(h)})})}};de.prototype.subscribe=function(t,n){return Lh(t,this._subscribers,n)};de.prototype.subscribeAction=function(t,n){var s=typeof t=="function"?{before:t}:t;return Lh(s,this._actionSubscribers,n)};de.prototype.watch=function(t,n,s){var i=this;return Rn(function(){return t(i.state,i.getters)},n,Object.assign({},s))};de.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};de.prototype.registerModule=function(t,n,s){s===void 0&&(s={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),eo(this,this.state,t,this._modules.get(t),s.preserveState),Ga(this,this.state)};de.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var s=Ya(n.state,t.slice(0,-1));delete s[t[t.length-1]]}),Dh(this)};de.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};de.prototype.hotUpdate=function(t){this._modules.update(t),Dh(this,!0)};de.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(de.prototype,Xa);var no=Uh(function(e,t){var n={};return Vh(t).forEach(function(s){var i=s.key,r=s.val;n[i]=function(){var a=this.$store.state,l=this.$store.getters;if(e){var c=Wh(this.$store,"mapState",e);if(!c)return;a=c.context.state,l=c.context.getters}return typeof r=="function"?r.call(this,a,l):a[r]},n[i].vuex=!0}),n}),so=Uh(function(e,t){var n={};return Vh(t).forEach(function(s){var i=s.key,r=s.val;n[i]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=this.$store.dispatch;if(e){var u=Wh(this.$store,"mapActions",e);if(!u)return;c=u.context.dispatch}return typeof r=="function"?r.apply(this,[c].concat(a)):c.apply(this.$store,[r].concat(a))}}),n});function Vh(e){return p_(e)?Array.isArray(e)?e.map(function(t){return{key:t,val:t}}):Object.keys(e).map(function(t){return{key:t,val:e[t]}}):[]}function p_(e){return Array.isArray(e)||Ih(e)}function Uh(e){return function(t,n){return typeof t!="string"?(n=t,t=""):t.charAt(t.length-1)!=="/"&&(t+="/"),e(t,n)}}function Wh(e,t,n){var s=e._modulesNamespaceMap[n];return s}const g_={class:"sidebar",style:{width:"250px"}},m_={class:"sidebar-nav"},b_={class:"submenu"},__={__name:"SideBar",setup(e){const t=vs();to();const n=Ph(),s=vt(!1),i=()=>{s.value=!s.value};Rn(n,o=>{o.path.startsWith("/interrogation")&&(s.value=!0)},{immediate:!0});const r=()=>{t.dispatch("logout")};return(o,a)=>{const l=ja("router-link");return L(),B("aside",g_,[a[11]||(a[11]=p("div",{class:"sidebar-header"},[p("i",{class:"fas fa-brain logo-icon"}),p("h1",null,"倾听者后台")],-1)),p("nav",m_,[p("ul",null,[p("li",null,[ut(l,{to:"/","exact-active-class":"active"},{default:be(()=>a[0]||(a[0]=[p("i",{class:"fas fa-chart-pie"},null,-1),p("span",null,"数据分析",-1)])),_:1,__:[0]})]),p("li",null,[ut(l,{to:"/assessment-search","active-class":"active"},{default:be(()=>a[1]||(a[1]=[p("i",{class:"fas fa-search"},null,-1),p("span",null,"评估查询",-1)])),_:1,__:[1]})]),p("li",null,[ut(l,{to:"/user-management","active-class":"active"},{default:be(()=>a[2]||(a[2]=[p("i",{class:"fas fa-users"},null,-1),p("span",null,"用户管理",-1)])),_:1,__:[2]})]),p("li",null,[ut(l,{to:"/petitioner-guidance","active-class":"active"},{default:be(()=>a[3]||(a[3]=[p("i",{class:"fas fa-hand-holding-heart"},null,-1),p("span",null,"上访户情绪疏导",-1)])),_:1,__:[3]})]),p("li",null,[ut(l,{to:"/juvenile-counseling","active-class":"active"},{default:be(()=>a[4]||(a[4]=[p("i",{class:"fas fa-child"},null,-1),p("span",null,"未成年人心理辅导",-1)])),_:1,__:[4]})]),p("li",null,[ut(l,{to:"/police-adjustment","active-class":"active"},{default:be(()=>a[5]||(a[5]=[p("i",{class:"fas fa-shield-alt"},null,-1),p("span",null,"民辅警心理调适",-1)])),_:1,__:[5]})]),p("li",null,[ut(l,{to:"/law-query","active-class":"active"},{default:be(()=>a[6]||(a[6]=[p("i",{class:"fas fa-balance-scale"},null,-1),p("span",null,"法规查询",-1)])),_:1,__:[6]})]),p("li",{class:Ce(["nav-item-dropdown",{open:s.value}])},[p("a",{onClick:Oi(i,["prevent"])},a[7]||(a[7]=[p("i",{class:"fas fa-gavel"},null,-1),p("span",null,"智能审讯",-1),p("i",{class:"fas fa-chevron-down dropdown-arrow"},null,-1)])),Ft(p("ul",b_,[p("li",null,[ut(l,{to:"/interrogation/new","active-class":"active"},{default:be(()=>a[8]||(a[8]=[p("i",{class:"fas fa-plus-circle"},null,-1),p("span",null,"新建审讯",-1)])),_:1,__:[8]})]),p("li",null,[ut(l,{to:"/interrogation/list","active-class":"active"},{default:be(()=>a[9]||(a[9]=[p("i",{class:"fas fa-list-alt"},null,-1),p("span",null,"查看记录",-1)])),_:1,__:[9]})])],512),[[pm,s.value]])],2)])]),p("div",{class:"sidebar-footer"},[p("button",{onClick:r,class:"logout-btn"},a[10]||(a[10]=[p("i",{class:"fas fa-sign-out-alt"},null,-1),p("span",null,"退出登录",-1)]))])])}}},y_=Wt(__,[["__scopeId","data-v-a00d75fa"]]),x_={class:"app-layout"},v_={__name:"AppLayout",setup(e){const t=vt(250);return(n,s)=>{const i=ja("router-view");return L(),B("div",x_,[ut(y_),p("main",{class:"main-content",style:jr({marginLeft:t.value+"px"})},[ut(i,null,{default:be(({Component:r})=>[ut(gh,{name:"fade",mode:"out-in"},{default:be(()=>[(L(),fi(gg(r)))]),_:2},1024)]),_:1})],4)])}}},w_=Wt(v_,[["__scopeId","data-v-fb2e6263"]]),S_="/admin/assets/police_emblem-Dmb8xxjE.png",k_={class:"login-container"},R_={class:"login-box"},E_={class:"form-group"},A_={class:"input-wrapper"},T_={class:"form-group"},C_={class:"input-wrapper"},O_={key:0,class:"alert alert-danger"},P_=["disabled"],M_={key:0},I_={key:1},L_={__name:"LoginView",setup(e){const t=vt(""),n=vt(""),s=vs();to();const i=Ct(()=>s.state.loading),r=Ct(()=>s.state.error),o=async()=>{s.commit("CLEAR_ERROR");try{await s.dispatch("login",{username:t.value,password:n.value})}catch(a){console.error("Login failed:",a)}};return(a,l)=>(L(),B("div",k_,[p("div",R_,[l[7]||(l[7]=p("img",{src:S_,alt:"警徽",class:"emblem-image"},null,-1)),l[8]||(l[8]=p("h1",{class:"system-title"},[nt(" “倾听者” "),p("span",{class:"subtitle"},"AI智能警务分析评估应用系统")],-1)),l[9]||(l[9]=p("p",{class:"login-prompt"},"请使用您的凭据登录",-1)),p("form",{onSubmit:Oi(o,["prevent"])},[p("div",E_,[l[3]||(l[3]=p("label",{for:"username"},"用户名",-1)),p("div",A_,[l[2]||(l[2]=p("i",{class:"fas fa-user"},null,-1)),Ft(p("input",{type:"text",id:"username","onUpdate:modelValue":l[0]||(l[0]=c=>t.value=c),required:"",placeholder:"请输入用户名"},null,512),[[te,t.value]])])]),p("div",T_,[l[5]||(l[5]=p("label",{for:"password"},"密码",-1)),p("div",C_,[l[4]||(l[4]=p("i",{class:"fas fa-lock"},null,-1)),Ft(p("input",{type:"password",id:"password","onUpdate:modelValue":l[1]||(l[1]=c=>n.value=c),required:"",placeholder:"请输入密码"},null,512),[[te,n.value]])])]),r.value?(L(),B("div",O_,G(r.value),1)):Tt("",!0),p("button",{type:"submit",class:"btn btn-primary btn-block",disabled:i.value},[i.value?(L(),B("span",M_,l[6]||(l[6]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 登录中...")]))):(L(),B("span",I_,"登 录"))],8,P_)],32)]),l[10]||(l[10]=p("footer",{class:"login-footer"}," 技术支持：倾听者项目组 ",-1))]))}},D_=Wt(L_,[["__scopeId","data-v-47365eb3"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Pi(e){return e+.5|0}const wn=(e,t,n)=>Math.max(Math.min(e,n),t);function Hs(e){return wn(Pi(e*2.55),0,255)}function En(e){return wn(Pi(e*255),0,255)}function sn(e){return wn(Pi(e/2.55)/100,0,1)}function Pc(e){return wn(Pi(e*100),0,100)}const we={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ca=[..."0123456789ABCDEF"],$_=e=>ca[e&15],N_=e=>ca[(e&240)>>4]+ca[e&15],zi=e=>(e&240)>>4===(e&15),F_=e=>zi(e.r)&&zi(e.g)&&zi(e.b)&&zi(e.a);function B_(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&we[e[1]]*17,g:255&we[e[2]]*17,b:255&we[e[3]]*17,a:t===5?we[e[4]]*17:255}:(t===7||t===9)&&(n={r:we[e[1]]<<4|we[e[2]],g:we[e[3]]<<4|we[e[4]],b:we[e[5]]<<4|we[e[6]],a:t===9?we[e[7]]<<4|we[e[8]]:255})),n}const z_=(e,t)=>e<255?t(e):"";function H_(e){var t=F_(e)?$_:N_;return e?"#"+t(e.r)+t(e.g)+t(e.b)+z_(e.a,t):void 0}const j_=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qh(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function V_(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function U_(e,t,n){const s=qh(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function W_(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function Qa(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=W_(n,s,i,u,r),l=l*60+.5),[l|0,c||0,a]}function Ja(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(En)}function Za(e,t,n){return Ja(qh,e,t,n)}function q_(e,t,n){return Ja(U_,e,t,n)}function K_(e,t,n){return Ja(V_,e,t,n)}function Kh(e){return(e%360+360)%360}function G_(e){const t=j_.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?Hs(+t[5]):En(+t[5]));const i=Kh(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=q_(i,r,o):t[1]==="hsv"?s=K_(i,r,o):s=Za(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function Y_(e,t){var n=Qa(e);n[0]=Kh(n[0]+t),n=Za(n),e.r=n[0],e.g=n[1],e.b=n[2]}function X_(e){if(!e)return;const t=Qa(e),n=t[0],s=Pc(t[1]),i=Pc(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${sn(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const Mc={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ic={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Q_(){const e={},t=Object.keys(Ic),n=Object.keys(Mc);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,Mc[r]);r=parseInt(Ic[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Hi;function J_(e){Hi||(Hi=Q_(),Hi.transparent=[0,0,0,0]);const t=Hi[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Z_=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ty(e){const t=Z_.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?Hs(o):wn(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?Hs(s):wn(s,0,255)),i=255&(t[4]?Hs(i):wn(i,0,255)),r=255&(t[6]?Hs(r):wn(r,0,255)),{r:s,g:i,b:r,a:n}}}function ey(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${sn(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Lo=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,ns=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function ny(e,t,n){const s=ns(sn(e.r)),i=ns(sn(e.g)),r=ns(sn(e.b));return{r:En(Lo(s+n*(ns(sn(t.r))-s))),g:En(Lo(i+n*(ns(sn(t.g))-i))),b:En(Lo(r+n*(ns(sn(t.b))-r))),a:e.a+n*(t.a-e.a)}}function ji(e,t,n){if(e){let s=Qa(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=Za(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function Gh(e,t){return e&&Object.assign(t||{},e)}function Lc(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=En(e[3]))):(t=Gh(e,{r:0,g:0,b:0,a:1}),t.a=En(t.a)),t}function sy(e){return e.charAt(0)==="r"?ty(e):G_(e)}class bi{constructor(t){if(t instanceof bi)return t;const n=typeof t;let s;n==="object"?s=Lc(t):n==="string"&&(s=B_(t)||J_(t)||sy(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=Gh(this._rgb);return t&&(t.a=sn(t.a)),t}set rgb(t){this._rgb=Lc(t)}rgbString(){return this._valid?ey(this._rgb):void 0}hexString(){return this._valid?H_(this._rgb):void 0}hslString(){return this._valid?X_(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=ny(this._rgb,t._rgb,n)),this}clone(){return new bi(this.rgb)}alpha(t){return this._rgb.a=En(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Pi(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return ji(this._rgb,2,t),this}darken(t){return ji(this._rgb,2,-t),this}saturate(t){return ji(this._rgb,1,t),this}desaturate(t){return ji(this._rgb,1,-t),this}rotate(t){return Y_(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Je(){}const iy=(()=>{let e=0;return()=>e++})();function Ut(e){return e==null}function Bt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ht(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function hn(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function ze(e,t){return hn(e)?e:t}function mt(e,t){return typeof e>"u"?t:e}const ry=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,Yh=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function At(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function yt(e,t,n,s){let i,r,o;if(Bt(e))for(r=e.length,i=0;i<r;i++)t.call(n,e[i],i);else if(ht(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function wr(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Sr(e){if(Bt(e))return e.map(Sr);if(ht(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=Sr(e[n[i]]);return t}return e}function Xh(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function oy(e,t,n,s){if(!Xh(e))return;const i=t[e],r=n[e];ht(i)&&ht(r)?_i(i,r,s):t[e]=Sr(r)}function _i(e,t,n){const s=Bt(t)?t:[t],i=s.length;if(!ht(e))return e;n=n||{};const r=n.merger||oy;let o;for(let a=0;a<i;++a){if(o=s[a],!ht(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],e,o,n)}return e}function ti(e,t){return _i(e,t,{merger:ay})}function ay(e,t,n){if(!Xh(e))return;const s=t[e],i=n[e];ht(s)&&ht(i)?ti(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Sr(i))}const Dc={"":e=>e,x:e=>e.x,y:e=>e.y};function ly(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function cy(e){const t=ly(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function yi(e,t){return(Dc[t]||(Dc[t]=cy(t)))(e)}function tl(e){return e.charAt(0).toUpperCase()+e.slice(1)}const kr=e=>typeof e<"u",Cn=e=>typeof e=="function",$c=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function uy(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const $t=Math.PI,Dt=2*$t,Rr=Number.POSITIVE_INFINITY,fy=$t/180,Nt=$t/2,Ln=$t/4,Nc=$t*2/3,Fc=Math.sign;function hy(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function dy(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Er(e){return!dy(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Hn(e){return e*($t/180)}function py(e){return e*(180/$t)}function Qh(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*$t&&(r+=Dt),{angle:r,distance:i}}function gy(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Dn(e){return(e%Dt+Dt)%Dt}function Ar(e,t,n,s){const i=Dn(e),r=Dn(t),o=Dn(n),a=Dn(r-i),l=Dn(o-i),c=Dn(i-r),u=Dn(i-o);return i===r||i===o||s&&r===o||a>l&&c<u}function ye(e,t,n){return Math.max(t,Math.min(n,e))}function my(e){return ye(e,-32768,32767)}function js(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function el(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const ua=(e,t,n,s)=>el(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),by=(e,t,n)=>el(e,n,s=>e[s][t]>=n);function _y(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const Jh=["push","pop","shift","splice","unshift"];function yy(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Jh.forEach(n=>{const s="_onData"+tl(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function Bc(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(Jh.forEach(r=>{delete e[r]}),delete e._chartjs)}function xy(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Zh=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function td(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,Zh.call(window,()=>{s=!1,e.apply(t,n)}))}}function vy(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const nl=e=>e==="start"?"left":e==="end"?"right":"center",qt=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,wy=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t,Vi=e=>e===0||e===1,zc=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Dt/n)),Hc=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Dt/n)+1,ei={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Nt)+1,easeOutSine:e=>Math.sin(e*Nt),easeInOutSine:e=>-.5*(Math.cos($t*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Vi(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Vi(e)?e:zc(e,.075,.3),easeOutElastic:e=>Vi(e)?e:Hc(e,.075,.3),easeInOutElastic(e){return Vi(e)?e:e<.5?.5*zc(e*2,.1125,.45):.5+.5*Hc(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-ei.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?ei.easeInBounce(e*2)*.5:ei.easeOutBounce(e*2-1)*.5+.5};function ed(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function jc(e){return ed(e)?e:new bi(e)}function Do(e){return ed(e)?e:new bi(e).saturate(.5).darken(.1).hexString()}const Sy=["x","y","borderWidth","radius","tension"],ky=["color","borderColor","backgroundColor"];function Ry(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:ky},numbers:{type:"number",properties:Sy}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Ey(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Vc=new Map;function Ay(e,t){t=t||{};const n=e+JSON.stringify(t);let s=Vc.get(n);return s||(s=new Intl.NumberFormat(e,t),Vc.set(n,s)),s}function Ty(e,t,n){return Ay(t,n).format(e)}const Cy={values(e){return Bt(e)?e:""+e}};var Oy={formatters:Cy};function Py(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Oy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Kn=Object.create(null),fa=Object.create(null);function ni(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function $o(e,t,n){return typeof t=="string"?_i(ni(e,t),n):_i(ni(e,""),t)}class My{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Do(i.backgroundColor),this.hoverBorderColor=(s,i)=>Do(i.borderColor),this.hoverColor=(s,i)=>Do(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return $o(this,t,n)}get(t){return ni(this,t)}describe(t,n){return $o(fa,t,n)}override(t,n){return $o(Kn,t,n)}route(t,n,s,i){const r=ni(this,t),o=ni(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return ht(l)?Object.assign({},c,l):mt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var It=new My({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ry,Ey,Py]);function Iy(e){return!e||Ut(e.size)||Ut(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Uc(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function $n(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function Wc(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function qc(e,t,n,s){nd(e,t,n,s,null)}function nd(e,t,n,s,i){let r,o,a,l,c,u,f,h;const d=t.pointStyle,g=t.rotation,m=t.radius;let b=(g||0)*fy;if(d&&typeof d=="object"&&(r=d.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(b),e.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),e.restore();return}if(!(isNaN(m)||m<=0)){switch(e.beginPath(),d){default:i?e.ellipse(n,s,i/2,m,0,0,Dt):e.arc(n,s,m,0,Dt),e.closePath();break;case"triangle":u=i?i/2:m,e.moveTo(n+Math.sin(b)*u,s-Math.cos(b)*m),b+=Nc,e.lineTo(n+Math.sin(b)*u,s-Math.cos(b)*m),b+=Nc,e.lineTo(n+Math.sin(b)*u,s-Math.cos(b)*m),e.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(b+Ln)*l,f=Math.cos(b+Ln)*(i?i/2-c:l),a=Math.sin(b+Ln)*l,h=Math.sin(b+Ln)*(i?i/2-c:l),e.arc(n-f,s-a,c,b-$t,b-Nt),e.arc(n+h,s-o,c,b-Nt,b),e.arc(n+f,s+a,c,b,b+Nt),e.arc(n-h,s+o,c,b+Nt,b+$t),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,u=i?i/2:l,e.rect(n-u,s-l,2*u,2*l);break}b+=Ln;case"rectRot":f=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,h=Math.sin(b)*(i?i/2:m),e.moveTo(n-f,s-a),e.lineTo(n+h,s-o),e.lineTo(n+f,s+a),e.lineTo(n-h,s+o),e.closePath();break;case"crossRot":b+=Ln;case"cross":f=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,h=Math.sin(b)*(i?i/2:m),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+h,s-o),e.lineTo(n-h,s+o);break;case"star":f=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,h=Math.sin(b)*(i?i/2:m),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+h,s-o),e.lineTo(n-h,s+o),b+=Ln,f=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,h=Math.sin(b)*(i?i/2:m),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+h,s-o),e.lineTo(n-h,s+o);break;case"line":o=i?i/2:Math.cos(b)*m,a=Math.sin(b)*m,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(b)*(i?i/2:m),s+Math.sin(b)*m);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function sd(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function sl(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function il(e){e.restore()}function Ly(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ut(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Dy(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function $y(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function xi(e,t,n,s,i,r={}){const o=Bt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,Ly(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&$y(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),Ut(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,n,s,r.maxWidth)),e.fillText(c,n,s,r.maxWidth),Dy(e,n,s,c,r),s+=Number(i.lineHeight);e.restore()}function ha(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*$t,$t,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,$t,Nt,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,Nt,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-Nt,!0),e.lineTo(n+o.topLeft,s)}const Ny=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Fy=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function By(e,t){const n=(""+e).match(Ny);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const zy=e=>+e||0;function rl(e,t){const n={},s=ht(t),i=s?Object.keys(t):t,r=ht(e)?s?o=>mt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=zy(r(o));return n}function Hy(e){return rl(e,{top:"y",right:"x",bottom:"y",left:"x"})}function si(e){return rl(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Te(e){const t=Hy(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Yt(e,t){e=e||{},t=t||It.font;let n=mt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=mt(e.style,t.style);s&&!(""+s).match(Fy)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:mt(e.family,t.family),lineHeight:By(mt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:mt(e.weight,t.weight),string:""};return i.string=Iy(i),i}function Ui(e,t,n,s){let i,r,o;for(i=0,r=e.length;i<r;++i)if(o=e[i],o!==void 0&&o!==void 0)return o}function jy(e,t,n){const{min:s,max:i}=e,r=Yh(t,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function Ss(e,t){return Object.assign(Object.create(e),t)}function ol(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=ad("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>ol([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return rd(a,l,()=>Xy(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return Gc(a).includes(l)},ownKeys(a){return Gc(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function _s(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:id(e,s),setContext:r=>_s(e,r,n,s),override:r=>_s(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return rd(r,o,()=>Uy(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function id(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:Cn(n)?n:()=>n,isIndexable:Cn(s)?s:()=>s}}const Vy=(e,t)=>e?e+tl(t):t,al=(e,t)=>ht(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function rd(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function Uy(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return Cn(a)&&o.isScriptable(t)&&(a=Wy(t,a,e,n)),Bt(a)&&a.length&&(a=qy(t,a,e,o.isIndexable)),al(t,a)&&(a=_s(a,i,r&&r[t],o)),a}function Wy(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),al(e,l)&&(l=ll(i._scopes,i,e,l)),l}function qy(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(ht(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const f=ll(c,i,e,u);t.push(_s(f,r,o&&o[e],a))}}return t}function od(e,t,n){return Cn(e)?e(t,n):e}const Ky=(e,t)=>e===!0?t:typeof e=="string"?yi(t,e):void 0;function Gy(e,t,n,s,i){for(const r of t){const o=Ky(n,r);if(o){e.add(o);const a=od(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function ll(e,t,n,s){const i=t._rootScopes,r=od(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let l=Kc(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=Kc(a,o,r,l,s),l===null)?!1:ol(Array.from(a),[""],i,r,()=>Yy(t,n,s))}function Kc(e,t,n,s,i){for(;n;)n=Gy(e,t,n,s,i);return n}function Yy(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return Bt(i)&&ht(n)?n:i||{}}function Xy(e,t,n,s){let i;for(const r of t)if(i=ad(Vy(r,e),n),typeof i<"u")return al(e,i)?ll(n,s,e,i):i}function ad(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function Gc(e){let t=e._keys;return t||(t=e._keys=Qy(e._scopes)),t}function Qy(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function cl(){return typeof window<"u"&&typeof document<"u"}function ul(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Tr(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const io=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Jy(e,t){return io(e).getPropertyValue(t)}const Zy=["top","right","bottom","left"];function Un(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=Zy[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const t0=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function e0(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(t0(i,r,e.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Bn(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=io(n),r=i.boxSizing==="border-box",o=Un(i,"padding"),a=Un(i,"border","width"),{x:l,y:c,box:u}=e0(e,n),f=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:d,height:g}=t;return r&&(d-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-f)/d*n.width/s),y:Math.round((c-h)/g*n.height/s)}}function n0(e,t,n){let s,i;if(t===void 0||n===void 0){const r=e&&ul(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=io(r),l=Un(a,"border","width"),c=Un(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Tr(a.maxWidth,r,"clientWidth"),i=Tr(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||Rr,maxHeight:i||Rr}}const Wi=e=>Math.round(e*10)/10;function s0(e,t,n,s){const i=io(e),r=Un(i,"margin"),o=Tr(i.maxWidth,e,"clientWidth")||Rr,a=Tr(i.maxHeight,e,"clientHeight")||Rr,l=n0(e,t,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const h=Un(i,"border","width"),d=Un(i,"padding");c-=d.width+h.width,u-=d.height+h.height}return c=Math.max(0,c-r.width),u=Math.max(0,s?c/s:u-r.height),c=Wi(Math.min(c,o,l.maxWidth)),u=Wi(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Wi(c/2)),(t!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=Wi(Math.floor(u*s))),{width:c,height:u}}function Yc(e,t,n){const s=t||1,i=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const i0=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};cl()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function Xc(e,t){const n=Jy(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const r0=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},o0=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ds(e,t,n){return e?r0(t,n):o0()}function ld(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function cd(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function qi(e,t,n){return e.options.clip?e[n]:t[n]}function a0(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:qi(n,t,"left"),right:qi(n,t,"right"),top:qi(s,t,"top"),bottom:qi(s,t,"bottom")}:t}function l0(e,t){const n=t._clip;if(n.disabled)return!1;const s=a0(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class c0{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Zh.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var tn=new c0;const Qc="transparent",u0={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=jc(e||Qc),i=s.valid&&jc(t||Qc);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class f0{constructor(t,n,s,i){const r=n[s];i=Ui([t.to,i,r,t.from]);const o=Ui([t.from,r,i]);this._active=!0,this._fn=t.fn||u0[t.type||typeof o],this._easing=ei[t.easing]||ei.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Ui([t.to,n,i,t.from]),this._from=Ui([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class ud{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!ht(t))return;const n=Object.keys(It.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!ht(r))return;const o={};for(const a of n)o[a]=r[a];(Bt(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=d0(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&h0(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,n));continue}const u=n[c];let f=r[c];const h=s.get(c);if(f)if(h&&f.active()){f.update(h,u,a);continue}else f.cancel();if(!h||!h.duration){t[c]=u;continue}r[c]=f=new f0(h,t,c,u),i.push(f)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return tn.add(this._chart,s),!0}}function h0(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function d0(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Jc(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function p0(e,t,n){if(n===!1)return!1;const s=Jc(e,n),i=Jc(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function g0(e){let t,n,s,i;return ht(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function fd(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function Zc(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,s.all)continue;break}c=e.values[l],hn(c)&&(r||t===0||Fc(t)===Fc(c))&&(t+=c)}return!u&&!s.all?0:t}function m0(e,t){const{iScale:n,vScale:s}=t,i=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[r]:e[u]};return a}function No(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function b0(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function _0(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function y0(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function tu(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function eu(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,u=b0(r,o,s),f=t.length;let h;for(let d=0;d<f;++d){const g=t[d],{[l]:m,[c]:b}=g,x=g._stacks||(g._stacks={});h=x[c]=y0(i,u,m),h[a]=b,h._top=tu(h,o,!0,s.type),h._bottom=tu(h,o,!1,s.type);const v=h._visualValues||(h._visualValues={});v[a]=b}}function Fo(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function x0(e,t){return Ss(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function v0(e,t,n){return Ss(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Ms(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const Bo=e=>e==="reset"||e==="none",nu=(e,t)=>t?e:Object.assign({},e),w0=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:fd(n,!0),values:null};class ii{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=No(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ms(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(f,h,d,g)=>f==="x"?h:f==="r"?g:d,r=n.xAxisID=mt(s.xAxisID,Fo(t,"x")),o=n.yAxisID=mt(s.yAxisID,Fo(t,"y")),a=n.rAxisID=mt(s.rAxisID,Fo(t,"r")),l=n.indexAxis,c=n.iAxisID=i(l,r,o,a),u=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Bc(this._data,this),t._stacked&&Ms(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(ht(n)){const i=this._cachedMeta;this._data=m0(n,i)}else if(s!==n){if(s){Bc(s,this);const i=this._cachedMeta;Ms(i),i._parsed=[]}n&&Object.isExtensible(n)&&yy(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=No(n.vScale,n),n.stack!==s.stack&&(i=!0,Ms(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&(eu(this,n._parsed),n._stacked=No(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&n===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],u,f,h;if(this._parsing===!1)s._parsed=i,s._sorted=!0,h=i;else{Bt(i[t])?h=this.parseArrayData(s,i,t,n):ht(i[t])?h=this.parseObjectData(s,i,t,n):h=this.parsePrimitiveData(s,i,t,n);const d=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)s._parsed[u+t]=f=h[u],l&&(d()&&(l=!1),c=f);s._sorted=l}o&&eu(this,h)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,f=new Array(i);let h,d,g;for(h=0,d=i;h<d;++h)g=h+s,f[h]={[a]:u||r.parse(c[g],g),[l]:o.parse(n[g],g)};return f}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,u,f;for(l=0,c=i;l<c;++l)u=l+s,f=n[u],a[l]={x:r.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,f,h,d;for(u=0,f=i;u<f;++u)h=u+s,d=n[h],c[u]={x:r.parse(yi(d,a),h),y:o.parse(yi(d,l),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:fd(i,!0),values:n._stacks[t.axis]._visualValues};return Zc(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=Zc(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=w0(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=_0(a);let h,d;function g(){d=i[h];const m=d[a.axis];return!hn(d[t.axis])||u>m||f<m}for(h=0;h<o&&!(!g()&&(this.updateRangeFromParsed(c,t,d,l),r));++h);if(r){for(h=o-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,t,d,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],hn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=g0(mt(this.options.clip,p0(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,r,a,l),u=a;u<a+l;++u){const f=i[u];f.hidden||(f.active&&c?o.push(f):f.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=v0(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=x0(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&kr(s);if(a)return nu(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),f=i?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),u),d=Object.keys(It.elements[t]),g=()=>this.getContext(s,i,n),m=c.resolveNamedOptions(h,d,g,f);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(nu(m,l))),m}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(h,this.getContext(t,s,n))}const c=new ud(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Bo(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){Bo(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!Bo(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&Ms(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}W(ii,"defaults",{}),W(ii,"datasetElementType",null),W(ii,"dataElementType",null);function S0(e,t,n){let s=1,i=1,r=0,o=0;if(t<Dt){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),h=Math.sin(l),d=(S,k,C)=>Ar(S,a,l,!0)?1:Math.max(k,k*n,C,C*n),g=(S,k,C)=>Ar(S,a,l,!0)?-1:Math.min(k,k*n,C,C*n),m=d(0,c,f),b=d(Nt,u,h),x=g($t,c,f),v=g($t+Nt,u,h);s=(m-x)/2,i=(b-v)/2,r=-(m+x)/2,o=-(b+v)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class as extends ii{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=l=>+s[l];if(ht(s[t])){const{key:l="value"}=this._parsing;r=c=>+yi(s[c],l)}let o,a;for(o=t,a=t+n;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return Hn(this.options.rotation-90)}_getCircumference(){return Hn(this.options.circumference)}_getRotationExtents(){let t=Dt,n=-Dt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),n=Math.max(n,r+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(ry(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:h,ratioY:d,offsetX:g,offsetY:m}=S0(f,u,l),b=(s.width-o)/h,x=(s.height-o)/d,v=Math.max(Math.min(b,x)/2,0),S=Yh(this.options.radius,v),k=Math.max(S*l,0),C=(S-k)/this._getVisibleDatasetWeightTotal();this.offsetX=g*S,this.offsetY=m*S,i.total=this.calculateTotal(),this.outerRadius=S-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/Dt)}updateElements(t,n,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,h=r&&c.animateScale,d=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:m,includeOptions:b}=this._getSharedOptions(n,i);let x=this._getRotation(),v;for(v=0;v<n;++v)x+=this._circumference(v,r);for(v=n;v<n+s;++v){const S=this._circumference(v,r),k=t[v],C={x:u+this.offsetX,y:f+this.offsetY,startAngle:x,endAngle:x+S,circumference:S,outerRadius:g,innerRadius:d};b&&(C.options=m||this.resolveDataElementOptions(v,k.active?"active":i)),x+=S,this.updateElement(k,v,C,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,i;for(i=0;i<n.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Dt*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Ty(n._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const s=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(mt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}W(as,"id","doughnut"),W(as,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),W(as,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),W(as,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return n.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class da extends as{}W(da,"id","pie"),W(da,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Nn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class fl{constructor(t){W(this,"options");this.options=t||{}}static override(t){Object.assign(fl.prototype,t)}init(){}formats(){return Nn()}parse(){return Nn()}format(){return Nn()}add(){return Nn()}diff(){return Nn()}startOf(){return Nn()}endOf(){return Nn()}}var k0={_date:fl};function R0(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?by:ua;if(s){if(i._sharedOptions){const u=r[0],f=typeof u.getRange=="function"&&u.getRange(t);if(f){const h=c(r,t,n-f),d=c(r,t,n+f);return{lo:h.lo,hi:d.hi}}}}else{const u=c(r,t,n);if(l){const{vScale:f}=i._cachedMeta,{_parsed:h}=e,d=h.slice(0,u.lo+1).reverse().findIndex(m=>!Ut(m[f.axis]));u.lo-=Math.max(0,d);const g=h.slice(u.hi).findIndex(m=>!Ut(m[f.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:r.length-1}}function ro(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:f,hi:h}=R0(r[a],t,o,i);for(let d=f;d<=h;++d){const g=u[d];g.skip||s(g,c,d)}}}function E0(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function zo(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||ro(e,n,t,function(a,l,c){!i&&!sd(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function A0(e,t,n,s){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:f}=Qh(o,{x:t.x,y:t.y});Ar(f,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return ro(e,n,t,r),i}function T0(e,t,n,s,i,r){let o=[];const a=E0(n);let l=Number.POSITIVE_INFINITY;function c(u,f,h){const d=u.inRange(t.x,t.y,i);if(s&&!d)return;const g=u.getCenterPoint(i);if(!(!!r||e.isPointInArea(g))&&!d)return;const b=a(t,g);b<l?(o=[{element:u,datasetIndex:f,index:h}],l=b):b===l&&o.push({element:u,datasetIndex:f,index:h})}return ro(e,n,t,c),o}function Ho(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?A0(e,t,n,i):T0(e,t,n,s,i,r)}function su(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ro(e,n,t,(l,c,u)=>{l[o]&&l[o](t[n],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var C0={modes:{index(e,t,n,s){const i=Bn(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?zo(e,i,r,s,o):Ho(e,i,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,n,s){const i=Bn(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?zo(e,i,r,s,o):Ho(e,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,n,s){const i=Bn(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return zo(e,i,r,s,o)},nearest(e,t,n,s){const i=Bn(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Ho(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=Bn(t,e);return su(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=Bn(t,e);return su(e,i,"y",n.intersect,s)}}};const hd=["left","top","right","bottom"];function Is(e,t){return e.filter(n=>n.pos===t)}function iu(e,t){return e.filter(n=>hd.indexOf(n.pos)===-1&&n.box.axis===t)}function Ls(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function O0(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function P0(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!hd.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function M0(e,t){const n=P0(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=u?u*i:l&&t.availableHeight)}return n}function I0(e){const t=O0(e),n=Ls(t.filter(c=>c.box.fullSize),!0),s=Ls(Is(t,"left"),!0),i=Ls(Is(t,"right")),r=Ls(Is(t,"top"),!0),o=Ls(Is(t,"bottom")),a=iu(t,"x"),l=iu(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Is(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function ru(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function dd(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function L0(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!ht(i)){n.size&&(e[i]-=n.size);const f=s[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?r.height:r.width),n.size=f.size/f.count,e[i]+=n.size}r.getPadding&&dd(o,r.getPadding());const a=Math.max(0,t.outerWidth-ru(o,e,"left","right")),l=Math.max(0,t.outerHeight-ru(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function D0(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function $0(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function Vs(e,t,n,s){const i=[];let r,o,a,l,c,u;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,$0(a.horizontal,t));const{same:f,other:h}=L0(t,n,a,s);c|=f&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Vs(i,t,n,s)||u}function Ki(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function ou(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=t.w*u,h=c.size||l.height;kr(c.start)&&(o=c.start),l.fullSize?Ki(l,i.left,o,n.outerWidth-i.right-i.left,h):Ki(l,t.left+c.placed,o,f,h),c.start=o,c.placed+=f,o=l.bottom}else{const f=t.h*u,h=c.size||l.width;kr(c.start)&&(r=c.start),l.fullSize?Ki(l,r,i.top,h,n.outerHeight-i.bottom-i.top):Ki(l,r,t.top+c.placed,h,f),c.start=r,c.placed+=f,r=l.right}}t.x=r,t.y=o}var ke={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=Te(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=I0(e.boxes),l=a.vertical,c=a.horizontal;yt(e.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,b)=>b.box.options&&b.box.options.display===!1?m:m+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);dd(h,Te(s));const d=Object.assign({maxPadding:h,w:r,h:o,x:i.left,y:i.top},i),g=M0(l.concat(c),f);Vs(a.fullSize,d,f,g),Vs(l,d,f,g),Vs(c,d,f,g)&&Vs(l,d,f,g),D0(d),ou(a.leftAndTop,d,f,g),d.x+=d.w,d.y+=d.h,ou(a.rightAndBottom,d,f,g),e.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},yt(a.chartArea,m=>{const b=m.box;Object.assign(b,e.chartArea),b.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class pd{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class N0 extends pd{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const rr="$chartjs",F0={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},au=e=>e===null||e==="";function B0(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[rr]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",au(i)){const r=Xc(e,"width");r!==void 0&&(e.width=r)}if(au(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=Xc(e,"height");r!==void 0&&(e.height=r)}return e}const gd=i0?{passive:!0}:!1;function z0(e,t,n){e&&e.addEventListener(t,n,gd)}function H0(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,gd)}function j0(e,t){const n=F0[e.type]||e.type,{x:s,y:i}=Bn(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Cr(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function V0(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Cr(a.addedNodes,s),o=o&&!Cr(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function U0(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Cr(a.removedNodes,s),o=o&&!Cr(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const vi=new Map;let lu=0;function md(){const e=window.devicePixelRatio;e!==lu&&(lu=e,vi.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function W0(e,t){vi.size||window.addEventListener("resize",md),vi.set(e,t)}function q0(e){vi.delete(e),vi.size||window.removeEventListener("resize",md)}function K0(e,t,n){const s=e.canvas,i=s&&ul(s);if(!i)return;const r=td((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),W0(e,r),o}function jo(e,t,n){n&&n.disconnect(),t==="resize"&&q0(e)}function G0(e,t,n){const s=e.canvas,i=td(r=>{e.ctx!==null&&n(j0(r,e))},e);return z0(s,t,i),i}class Y0 extends pd{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(B0(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[rr])return!1;const s=n[rr].initial;["height","width"].forEach(r=>{const o=s[r];Ut(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[rr],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:V0,detach:U0,resize:K0}[n]||G0;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:jo,detach:jo,resize:jo}[n]||H0)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return s0(t,n,s,i)}isAttached(t){const n=t&&ul(t);return!!(n&&n.isConnected)}}function X0(e){return!cl()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?N0:Y0}var tr;let ks=(tr=class{constructor(){W(this,"x");W(this,"y");W(this,"active",!1);W(this,"options");W(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return Er(this.x)&&Er(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}},W(tr,"defaults",{}),W(tr,"defaultRoutes"),tr);function Q0(e,t){const n=e.options.ticks,s=J0(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?tx(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return ex(t,c,r,o/i),c;const u=Z0(r,t,i);if(o>0){let f,h;const d=o>1?Math.round((l-a)/(o-1)):null;for(Gi(t,c,u,Ut(d)?0:a-d,a),f=0,h=o-1;f<h;f++)Gi(t,c,u,r[f],r[f+1]);return Gi(t,c,u,l,Ut(d)?t.length:l+d),c}return Gi(t,c,u),c}function J0(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function Z0(e,t,n){const s=nx(e),i=t.length/n;if(!s)return Math.max(i,1);const r=hy(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function tx(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function ex(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function Gi(e,t,n,s,i){const r=mt(s,0),o=Math.min(mt(i,e.length),e.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(r+a*n))}function nx(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const sx=e=>e==="left"?"right":e==="right"?"left":e,cu=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,uu=(e,t)=>Math.min(t||e,e);function fu(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function ix(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(n&&(s===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function rx(e,t){yt(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function Ds(e){return e.drawTicks?e.tickLength:0}function hu(e,t){if(!e.display)return 0;const n=Yt(e.font,t),s=Te(e.padding);return(Bt(e.text)?e.text.length:1)*n.lineHeight+s.height}function ox(e,t){return Ss(e,{scale:t,type:"scale"})}function ax(e,t,n){return Ss(e,{tick:n,index:t,type:"tick"})}function lx(e,t,n){let s=nl(e);return(n&&t!=="right"||!n&&t==="right")&&(s=sx(s)),s}function cx(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let f=0,h,d,g;const m=o-i,b=a-r;if(e.isHorizontal()){if(d=qt(s,r,a),ht(n)){const x=Object.keys(n)[0],v=n[x];g=u[x].getPixelForValue(v)+m-t}else n==="center"?g=(c.bottom+c.top)/2+m-t:g=cu(e,n,t);h=a-r}else{if(ht(n)){const x=Object.keys(n)[0],v=n[x];d=u[x].getPixelForValue(v)-b+t}else n==="center"?d=(c.left+c.right)/2-b+t:d=cu(e,n,t);g=qt(s,o,i),f=n==="left"?-Nt:Nt}return{titleX:d,titleY:g,maxWidth:h,rotation:f}}class Mi extends ks{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=ze(t,Number.POSITIVE_INFINITY),n=ze(n,Number.NEGATIVE_INFINITY),s=ze(s,Number.POSITIVE_INFINITY),i=ze(i,Number.NEGATIVE_INFINITY),{min:ze(t,s),max:ze(n,i),minDefined:hn(t),maxDefined:hn(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:ze(n,ze(s,n)),max:ze(s,ze(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){At(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=jy(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?fu(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Q0(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){At(this.options.afterUpdate,[this])}beforeSetDimensions(){At(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){At(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),At(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){At(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=At(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){At(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){At(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=uu(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),f=u.widest.width,h=u.highest.height,d=ye(this.chart.width-f,0,this.maxWidth);a=t.offset?this.maxWidth/s:d/(s-1),f+6>a&&(a=d/(s-(t.offset?.5:1)),l=this.maxHeight-Ds(t.grid)-n.padding-hu(t.title,this.chart.options.font),c=Math.sqrt(f*f+h*h),o=py(Math.min(Math.asin(ye((u.highest.height+6)/a,-1,1)),Math.asin(ye(l/c,-1,1))-Math.asin(ye(h/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){At(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){At(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=hu(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=Ds(r)+l):(t.height=this.maxHeight,t.width=Ds(r)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:h}=this._getLabelSizes(),d=s.padding*2,g=Hn(this.labelRotation),m=Math.cos(g),b=Math.sin(g);if(a){const x=s.mirror?0:b*f.width+m*h.height;t.height=Math.min(this.maxHeight,t.height+x+d)}else{const x=s.mirror?0:m*f.width+b*h.height;t.width=Math.min(this.maxWidth,t.width+x+d)}this._calculatePadding(c,u,b,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,d=0;l?c?(h=i*t.width,d=s*n.height):(h=s*t.height,d=i*n.width):r==="start"?d=n.width:r==="end"?h=t.width:r!=="inner"&&(h=t.width/2,d=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((d-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=t.height/2;r==="start"?(u=0,f=t.height):r==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){At(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)Ut(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=fu(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/uu(n,s));let c=0,u=0,f,h,d,g,m,b,x,v,S,k,C;for(f=0;f<n;f+=l){if(g=t[f].label,m=this._resolveTickFontOptions(f),i.font=b=m.string,x=r[b]=r[b]||{data:{},gc:[]},v=m.lineHeight,S=k=0,!Ut(g)&&!Bt(g))S=Uc(i,x.data,x.gc,S,g),k=v;else if(Bt(g))for(h=0,d=g.length;h<d;++h)C=g[h],!Ut(C)&&!Bt(C)&&(S=Uc(i,x.data,x.gc,S,C),k+=v);o.push(S),a.push(k),c=Math.max(S,c),u=Math.max(k,u)}rx(r,n);const $=o.indexOf(c),P=a.indexOf(u),D=N=>({width:o[N]||0,height:a[N]||0});return{first:D(0),last:D(n-1),widest:D($),highest:D(P),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return my(this._alignToPixels?$n(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=ax(this.getContext(),t,s))}return this.$context||(this.$context=ox(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Hn(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),h=Ds(r),d=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,b=m/2,x=function(et){return $n(s,et,m)};let v,S,k,C,$,P,D,N,H,K,M,tt;if(o==="top")v=x(this.bottom),P=this.bottom-h,N=v-b,K=x(t.top)+b,tt=t.bottom;else if(o==="bottom")v=x(this.top),K=t.top,tt=x(t.bottom)-b,P=v+b,N=this.top+h;else if(o==="left")v=x(this.right),$=this.right-h,D=v-b,H=x(t.left)+b,M=t.right;else if(o==="right")v=x(this.left),H=t.left,M=x(t.right)-b,$=v+b,D=this.left+h;else if(n==="x"){if(o==="center")v=x((t.top+t.bottom)/2+.5);else if(ht(o)){const et=Object.keys(o)[0],Z=o[et];v=x(this.chart.scales[et].getPixelForValue(Z))}K=t.top,tt=t.bottom,P=v+b,N=P+h}else if(n==="y"){if(o==="center")v=x((t.left+t.right)/2);else if(ht(o)){const et=Object.keys(o)[0],Z=o[et];v=x(this.chart.scales[et].getPixelForValue(Z))}$=v-b,D=$-h,H=t.left,M=t.right}const ft=mt(i.ticks.maxTicksLimit,f),rt=Math.max(1,Math.ceil(f/ft));for(S=0;S<f;S+=rt){const et=this.getContext(S),Z=r.setContext(et),ot=a.setContext(et),kt=Z.lineWidth,Qt=Z.color,Jt=ot.dash||[],Mt=ot.dashOffset,xe=Z.tickWidth,ie=Z.tickColor,De=Z.tickBorderDash||[],Lt=Z.tickBorderDashOffset;k=ix(this,S,l),k!==void 0&&(C=$n(s,k,kt),c?$=D=H=M=C:P=N=K=tt=C,d.push({tx1:$,ty1:P,tx2:D,ty2:N,x1:H,y1:K,x2:M,y2:tt,width:kt,color:Qt,borderDash:Jt,borderDashOffset:Mt,tickWidth:xe,tickColor:ie,tickBorderDash:De,tickBorderDashOffset:Lt}))}return this._ticksLength=f,this._borderValue=v,d}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=r,h=Ds(s.grid),d=h+u,g=f?-u:d,m=-Hn(this.labelRotation),b=[];let x,v,S,k,C,$,P,D,N,H,K,M,tt="middle";if(i==="top")$=this.bottom-g,P=this._getXAxisLabelAlignment();else if(i==="bottom")$=this.top+g,P=this._getXAxisLabelAlignment();else if(i==="left"){const rt=this._getYAxisLabelAlignment(h);P=rt.textAlign,C=rt.x}else if(i==="right"){const rt=this._getYAxisLabelAlignment(h);P=rt.textAlign,C=rt.x}else if(n==="x"){if(i==="center")$=(t.top+t.bottom)/2+d;else if(ht(i)){const rt=Object.keys(i)[0],et=i[rt];$=this.chart.scales[rt].getPixelForValue(et)+d}P=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")C=(t.left+t.right)/2-d;else if(ht(i)){const rt=Object.keys(i)[0],et=i[rt];C=this.chart.scales[rt].getPixelForValue(et)}P=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?tt="top":l==="end"&&(tt="bottom"));const ft=this._getLabelSizes();for(x=0,v=a.length;x<v;++x){S=a[x],k=S.label;const rt=r.setContext(this.getContext(x));D=this.getPixelForTick(x)+r.labelOffset,N=this._resolveTickFontOptions(x),H=N.lineHeight,K=Bt(k)?k.length:1;const et=K/2,Z=rt.color,ot=rt.textStrokeColor,kt=rt.textStrokeWidth;let Qt=P;o?(C=D,P==="inner"&&(x===v-1?Qt=this.options.reverse?"left":"right":x===0?Qt=this.options.reverse?"right":"left":Qt="center"),i==="top"?c==="near"||m!==0?M=-K*H+H/2:c==="center"?M=-ft.highest.height/2-et*H+H:M=-ft.highest.height+H/2:c==="near"||m!==0?M=H/2:c==="center"?M=ft.highest.height/2-et*H:M=ft.highest.height-K*H,f&&(M*=-1),m!==0&&!rt.showLabelBackdrop&&(C+=H/2*Math.sin(m))):($=D,M=(1-K)*H/2);let Jt;if(rt.showLabelBackdrop){const Mt=Te(rt.backdropPadding),xe=ft.heights[x],ie=ft.widths[x];let De=M-Mt.top,Lt=0-Mt.left;switch(tt){case"middle":De-=xe/2;break;case"bottom":De-=xe;break}switch(P){case"center":Lt-=ie/2;break;case"right":Lt-=ie;break;case"inner":x===v-1?Lt-=ie:x>0&&(Lt-=ie/2);break}Jt={left:Lt,top:De,width:ie+Mt.width,height:xe+Mt.height,color:rt.backdropColor}}b.push({label:k,font:N,textOffset:M,options:{rotation:m,color:Z,strokeColor:ot,strokeWidth:kt,textAlign:Qt,textBaseline:tt,translation:[C,$],backdrop:Jt}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Hn(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+r,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+r,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,h;this.isHorizontal()?(c=$n(t,this.left,o)-o/2,u=$n(t,this.right,a)+a/2,f=h=l):(f=$n(t,this.top,o)-o/2,h=$n(t,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&sl(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;xi(s,c,0,u,l,a)}i&&il(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=Yt(s.font),o=Te(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||ht(n)?(l+=o.bottom,Bt(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:h}=cx(this,l,n,a);xi(t,s.text,0,0,r,{color:s.color,maxWidth:f,rotation:h,textAlign:lx(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=mt(t.grid&&t.grid.z,-1),i=mt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Mi.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Yt(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Yi{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;hx(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,ux(t,o,s),this.override&&It.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in It[i]&&(delete It[i][s],this.override&&delete Kn[s])}}function ux(e,t,n){const s=_i(Object.create(null),[n?It.get(n):{},It.get(t),e.defaults]);It.set(t,s),e.defaultRoutes&&fx(t,e.defaultRoutes),e.descriptors&&It.describe(t,e.descriptors)}function fx(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");It.route(r,i,l,a)})}function hx(e){return"id"in e&&"defaults"in e}class dx{constructor(){this.controllers=new Yi(ii,"datasets",!0),this.elements=new Yi(ks,"elements"),this.plugins=new Yi(Object,"plugins"),this.scales=new Yi(Mi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):yt(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=tl(t);At(s["before"+i],[],s),n[t](s),At(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var We=new dx;class px{constructor(){this._init=[]}notify(t,n,s,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[n,i,r.options];if(At(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Ut(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=mt(s.options&&s.options.plugins,{}),r=gx(s);return i===!1&&!n?[]:bx(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function gx(e){const t={},n=[],s=Object.keys(We.plugins.items);for(let r=0;r<s.length;r++)n.push(We.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function mx(e,t){return!t&&e===!1?null:e===!0?{}:e}function bx(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=mx(s[l],i);c!==null&&r.push({plugin:a,options:_x(e.config,{plugin:a,local:n[l]},c,o)})}return r}function _x(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function pa(e,t){const n=It.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function yx(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function xx(e,t){return e===t?"_index_":"_value_"}function du(e){if(e==="x"||e==="y"||e==="r")return e}function vx(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function ga(e,...t){if(du(e))return e;for(const n of t){const s=n.axis||vx(n.position)||e.length>1&&du(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function pu(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function wx(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return pu(e,"x",n[0])||pu(e,"y",n[0])}return{}}function Sx(e,t){const n=Kn[e.type]||{scales:{}},s=t.scales||{},i=pa(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!ht(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ga(o,a,wx(o,e),It.scales[a.type]),c=xx(l,i),u=n.scales||{};r[o]=ti(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||pa(a,t),u=(Kn[a]||{}).scales||{};Object.keys(u).forEach(f=>{const h=yx(f,l),d=o[h+"AxisID"]||h;r[d]=r[d]||Object.create(null),ti(r[d],[{axis:h},s[d],u[f]])})}),Object.keys(r).forEach(o=>{const a=r[o];ti(a,[It.scales[a.type],It.scale])}),r}function bd(e){const t=e.options||(e.options={});t.plugins=mt(t.plugins,{}),t.scales=Sx(e,t)}function _d(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function kx(e){return e=e||{},e.data=_d(e.data),bd(e),e}const gu=new Map,yd=new Set;function Xi(e,t){let n=gu.get(e);return n||(n=t(),gu.set(e,n),yd.add(n)),n}const $s=(e,t,n)=>{const s=yi(t,n);s!==void 0&&e.add(s)};class Rx{constructor(t){this._config=kx(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=_d(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),bd(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Xi(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Xi(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Xi(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Xi(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{t&&(l.add(t),u.forEach(f=>$s(l,t,f))),u.forEach(f=>$s(l,i,f)),u.forEach(f=>$s(l,Kn[r]||{},f)),u.forEach(f=>$s(l,It,f)),u.forEach(f=>$s(l,fa,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),yd.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,Kn[n]||{},It.datasets[n]||{},{type:n},It,fa]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=mu(this._resolverCache,t,i);let l=o;if(Ax(o,n)){r.$shared=!1,s=Cn(s)?s():s;const c=this.createResolver(t,s,a);l=_s(o,s,c)}for(const c of n)r[c]=l[c];return r}createResolver(t,n,s=[""],i){const{resolver:r}=mu(this._resolverCache,t,s);return ht(n)?_s(r,n,void 0,i):r}}function mu(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:ol(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const Ex=e=>ht(e)&&Object.getOwnPropertyNames(e).some(t=>Cn(e[t]));function Ax(e,t){const{isScriptable:n,isIndexable:s}=id(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(Cn(a)||Ex(a))||o&&Bt(a))return!0}return!1}var Tx="4.4.9";const Cx=["top","bottom","left","right","chartArea"];function bu(e,t){return e==="top"||e==="bottom"||Cx.indexOf(e)===-1&&t==="x"}function _u(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function yu(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),At(n&&n.onComplete,[e],t)}function Ox(e){const t=e.chart,n=t.options.animation;At(n&&n.onProgress,[e],t)}function xd(e){return cl()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const or={},xu=e=>{const t=xd(e);return Object.values(or).filter(n=>n.canvas===t).pop()};function Px(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function Mx(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var mn;let oo=(mn=class{static register(...t){We.add(...t),vu()}static unregister(...t){We.remove(...t),vu()}constructor(t,n){const s=this.config=new Rx(n),i=xd(t),r=xu(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||X0(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=iy(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new px,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=vy(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],or[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}tn.listen(this,"complete",yu),tn.listen(this,"progress",Ox),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return Ut(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return We}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Yc(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Wc(this.canvas,this.ctx),this}stop(){return tn.stop(this),this}resize(t,n){tn.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Yc(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),At(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};yt(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=ga(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),yt(r,o=>{const a=o.options,l=a.id,c=ga(l,a),u=mt(a.type,o.dtype);(a.position===void 0||bu(a.position,c)!==bu(o.dposition))&&(a.position=o.dposition),i[l]=!0;let f=null;if(l in s&&s[l].type===u)f=s[l];else{const h=We.getScale(u);f=new h({id:l,type:u,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(a,t)}),yt(i,(o,a)=>{o||delete s[a]}),yt(s,o=>{ke.configure(this,o,o.options),ke.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(_u("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||pa(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=We.getController(a),{datasetElementType:c,dataElementType:u}=It.datasets[a];Object.assign(l,{dataElementType:We.getElement(u),datasetElementType:c&&We.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){yt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),h=!i&&r.indexOf(f)===-1;f.buildOrUpdateElements(h),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||yt(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(_u("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){yt(this.scales,t=>{ke.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!$c(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;Px(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!$c(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ke.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],yt(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Cn(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(tn.has(this)?this.attached&&!tn.running(this)&&tn.start(this):(this.draw(),yu({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=l0(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&sl(n,i),t.controller.draw(),i&&il(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return sd(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=C0.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Ss(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);kr(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),tn.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Wc(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete or[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};yt(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){yt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},yt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!wr(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),l=uy(t),c=Mx(t,this._lastEvent,s,l);s&&(this._lastEvent=null,At(r.onHover,[t,a,this],this),l&&At(r.onClick,[t,a,this],this));const u=!wr(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}},W(mn,"defaults",It),W(mn,"instances",or),W(mn,"overrides",Kn),W(mn,"registry",We),W(mn,"version",Tx),W(mn,"getChart",xu),mn);function vu(){return yt(oo.instances,e=>e._plugins.invalidate())}function Ix(e,t,n){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(r,o,a,s-c,n+c),l>i?(c=i/l,e.arc(r,o,l,n+c,s-c,!0)):e.arc(r,o,i,n+Nt,s-Nt),e.closePath(),e.clip()}function Lx(e){return rl(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Dx(e,t,n,s){const i=Lx(e.options.borderRadius),r=(n-t)/2,o=Math.min(r,s*t/2),a=l=>{const c=(n-Math.min(r,l))*s/2;return ye(l,0,Math.min(r,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:ye(i.innerStart,0,o),innerEnd:ye(i.innerEnd,0,o)}}function ss(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function Or(e,t,n,s,i,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,f=Math.max(t.outerRadius+s+n-c,0),h=u>0?u+s+n+c:0;let d=0;const g=i-l;if(s){const rt=u>0?u-s:0,et=f>0?f-s:0,Z=(rt+et)/2,ot=Z!==0?g*Z/(Z+s):g;d=(g-ot)/2}const m=Math.max(.001,g*f-n/$t)/f,b=(g-m)/2,x=l+b+d,v=i-b-d,{outerStart:S,outerEnd:k,innerStart:C,innerEnd:$}=Dx(t,h,f,v-x),P=f-S,D=f-k,N=x+S/P,H=v-k/D,K=h+C,M=h+$,tt=x+C/K,ft=v-$/M;if(e.beginPath(),r){const rt=(N+H)/2;if(e.arc(o,a,f,N,rt),e.arc(o,a,f,rt,H),k>0){const kt=ss(D,H,o,a);e.arc(kt.x,kt.y,k,H,v+Nt)}const et=ss(M,v,o,a);if(e.lineTo(et.x,et.y),$>0){const kt=ss(M,ft,o,a);e.arc(kt.x,kt.y,$,v+Nt,ft+Math.PI)}const Z=(v-$/h+(x+C/h))/2;if(e.arc(o,a,h,v-$/h,Z,!0),e.arc(o,a,h,Z,x+C/h,!0),C>0){const kt=ss(K,tt,o,a);e.arc(kt.x,kt.y,C,tt+Math.PI,x-Nt)}const ot=ss(P,x,o,a);if(e.lineTo(ot.x,ot.y),S>0){const kt=ss(P,N,o,a);e.arc(kt.x,kt.y,S,x-Nt,N)}}else{e.moveTo(o,a);const rt=Math.cos(N)*f+o,et=Math.sin(N)*f+a;e.lineTo(rt,et);const Z=Math.cos(H)*f+o,ot=Math.sin(H)*f+a;e.lineTo(Z,ot)}e.closePath()}function $x(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){Or(e,t,n,s,l,i);for(let c=0;c<r;++c)e.fill();isNaN(a)||(l=o+(a%Dt||Dt))}return Or(e,t,n,s,l,i),e.fill(),l}function Nx(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:f,borderDashOffset:h}=l,d=l.borderAlign==="inner";if(!c)return;e.setLineDash(f||[]),e.lineDashOffset=h,d?(e.lineWidth=c*2,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let g=t.endAngle;if(r){Or(e,t,n,s,g,i);for(let m=0;m<r;++m)e.stroke();isNaN(a)||(g=o+(a%Dt||Dt))}d&&Ix(e,t,g),r||(Or(e,t,n,s,g,i),e.stroke())}class Us extends ks{constructor(n){super();W(this,"circumference");W(this,"endAngle");W(this,"fullCircles");W(this,"innerRadius");W(this,"outerRadius");W(this,"pixelMargin");W(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.getProps(["x","y"],i),{angle:o,distance:a}=Qh(r,{x:n,y:s}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:f,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,g=mt(h,c-l),m=Ar(o,l,c)&&l!==c,b=g>=Dt||m,x=js(a,u+d,f+d);return b&&x}getCenterPoint(n){const{x:s,y:i,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,f=(r+o)/2,h=(a+l+u+c)/2;return{x:s+Math.cos(f)*h,y:i+Math.sin(f)*h}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:i}=this,r=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=i>Dt?Math.floor(i/Dt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min($t,i||0)),u=r*c;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,$x(n,this,u,o,a),Nx(n,this,u,o,a),n.restore()}}W(Us,"id","arc"),W(Us,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),W(Us,"defaultRoutes",{backgroundColor:"backgroundColor"}),W(Us,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});const wu=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},Fx=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Su extends ks{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=At(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=Yt(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=wu(s,r);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let f=t;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-u;return this.legendItems.forEach((g,m)=>{const b=s+n/2+r.measureText(g.text).width;(m===0||c[c.length-1]+b+2*a>o)&&(f+=u,c[c.length-(m>0?0:1)]=0,d+=u,h++),l[m]={left:0,top:d,row:h,width:b,height:i},c[c.length-1]+=b+a}),f}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let f=a,h=0,d=0,g=0,m=0;return this.legendItems.forEach((b,x)=>{const{itemWidth:v,itemHeight:S}=Bx(s,n,r,b,i);x>0&&d+S+2*a>u&&(f+=h+a,c.push({width:h,height:d}),g+=h+a,m++,h=d=0),l[x]={left:g,top:d,col:m,width:v,height:S},h=Math.max(h,v),d+=S+a}),f+=h,c.push({width:h,height:d}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=ds(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=qt(s,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=qt(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=qt(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=qt(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;sl(t,this),this._draw(),il(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=It.color,l=ds(t.rtl,this.left,this.width),c=Yt(o.font),{padding:u}=o,f=c.size,h=f/2;let d;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:b}=wu(o,f),x=function($,P,D){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;i.save();const N=mt(D.lineWidth,1);if(i.fillStyle=mt(D.fillStyle,a),i.lineCap=mt(D.lineCap,"butt"),i.lineDashOffset=mt(D.lineDashOffset,0),i.lineJoin=mt(D.lineJoin,"miter"),i.lineWidth=N,i.strokeStyle=mt(D.strokeStyle,a),i.setLineDash(mt(D.lineDash,[])),o.usePointStyle){const H={radius:m*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:N},K=l.xPlus($,g/2),M=P+h;nd(i,H,K,M,o.pointStyleWidth&&g)}else{const H=P+Math.max((f-m)/2,0),K=l.leftForLtr($,g),M=si(D.borderRadius);i.beginPath(),Object.values(M).some(tt=>tt!==0)?ha(i,{x:K,y:H,w:g,h:m,radius:M}):i.rect(K,H,g,m),i.fill(),N!==0&&i.stroke()}i.restore()},v=function($,P,D){xi(i,D.text,$,P+b/2,c,{strikethrough:D.hidden,textAlign:l.textAlign(D.textAlign)})},S=this.isHorizontal(),k=this._computeTitleHeight();S?d={x:qt(r,this.left+u,this.right-s[0]),y:this.top+u+k,line:0}:d={x:this.left+u,y:qt(r,this.top+k+u,this.bottom-n[0].height),line:0},ld(this.ctx,t.textDirection);const C=b+u;this.legendItems.forEach(($,P)=>{i.strokeStyle=$.fontColor,i.fillStyle=$.fontColor;const D=i.measureText($.text).width,N=l.textAlign($.textAlign||($.textAlign=o.textAlign)),H=g+h+D;let K=d.x,M=d.y;l.setWidth(this.width),S?P>0&&K+H+u>this.right&&(M=d.y+=C,d.line++,K=d.x=qt(r,this.left+u,this.right-s[d.line])):P>0&&M+C>this.bottom&&(K=d.x=K+n[d.line].width+u,d.line++,M=d.y=qt(r,this.top+k+u,this.bottom-n[d.line].height));const tt=l.x(K);if(x(tt,M,$),K=wy(N,K+g+h,S?K+H:this.right,t.rtl),v(l.x(K),M,$),S)d.x+=H+u;else if(typeof $.text!="string"){const ft=c.lineHeight;d.y+=vd($,ft)+u}else d.y+=C}),cd(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Yt(n.font),i=Te(n.padding);if(!n.display)return;const r=ds(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=i.top+l;let u,f=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,f=qt(t.align,f,this.right-h);else{const g=this.columnSizes.reduce((m,b)=>Math.max(m,b.height),0);u=c+qt(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const d=qt(a,f,f+h);o.textAlign=r.textAlign(nl(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,xi(o,n.text,d,u,s)}_computeTitleHeight(){const t=this.options.title,n=Yt(t.font),s=Te(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(js(t,this.left,this.right)&&js(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],js(t,i.left,i.left+i.width)&&js(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!jx(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=Fx(i,s);i&&!r&&At(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&At(n.onHover,[t,s,this],this)}else s&&At(n.onClick,[t,s,this],this)}}function Bx(e,t,n,s,i){const r=zx(s,e,t,n),o=Hx(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function zx(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function Hx(e,t,n){let s=e;return typeof t.text!="string"&&(s=vd(t,n)),s}function vd(e,t){const n=e.text?e.text.length:0;return t*n}function jx(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Vx={id:"legend",_element:Su,start(e,t,n){const s=e.legend=new Su({ctx:e.ctx,options:n,chart:e});ke.configure(e,s,n),ke.addBox(e,s)},stop(e){ke.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;ke.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Te(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class wd extends ks{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=Bt(s.text)?s.text.length:1;this._padding=Te(s.padding);const r=i*Yt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=qt(a,s,r),f=n+t,c=r-s):(o.position==="left"?(u=s+t,f=qt(a,i,n),l=$t*-.5):(u=r-t,f=qt(a,n,i),l=$t*.5),c=i-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Yt(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);xi(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:nl(n.align),textBaseline:"middle",translation:[o,a]})}}function Ux(e,t){const n=new wd({ctx:e.ctx,options:t,chart:e});ke.configure(e,n,t),ke.addBox(e,n),e.titleBlock=n}var Wx={id:"title",_element:wd,start(e,t,n){Ux(e,n)},stop(e){const t=e.titleBlock;ke.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;ke.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ws={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=gy(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function je(e,t){return t&&(Bt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function en(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function qx(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function ku(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Yt(t.bodyFont),c=Yt(t.titleFont),u=Yt(t.footerFont),f=r.length,h=i.length,d=s.length,g=Te(t.padding);let m=g.height,b=0,x=s.reduce((k,C)=>k+C.before.length+C.lines.length+C.after.length,0);if(x+=e.beforeBody.length+e.afterBody.length,f&&(m+=f*c.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),x){const k=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=d*k+(x-d)*l.lineHeight+(x-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let v=0;const S=function(k){b=Math.max(b,n.measureText(k).width+v)};return n.save(),n.font=c.string,yt(e.title,S),n.font=l.string,yt(e.beforeBody.concat(e.afterBody),S),v=t.displayColors?o+2+t.boxPadding:0,yt(s,k=>{yt(k.before,S),yt(k.lines,S),yt(k.after,S)}),v=0,n.font=u.string,yt(e.footer,S),n.restore(),b+=g.width,{width:b,height:m}}function Kx(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function Gx(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function Yx(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),Gx(c,e,t,n)&&(c="center"),c}function Ru(e,t,n){const s=n.yAlign||t.yAlign||Kx(e,n);return{xAlign:n.xAlign||t.xAlign||Yx(e,t,n,s),yAlign:s}}function Xx(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function Qx(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function Eu(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+r,{topLeft:u,topRight:f,bottomLeft:h,bottomRight:d}=si(o);let g=Xx(t,a);const m=Qx(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+i:a==="right"&&(g+=Math.max(f,d)+i),{x:ye(g,0,s.width-t.width),y:ye(m,0,s.height-t.height)}}function Qi(e,t,n){const s=Te(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function Au(e){return je([],en(e))}function Jx(e,t,n){return Ss(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function Tu(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Sd={beforeTitle:Je,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:Je,beforeBody:Je,beforeLabel:Je,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Ut(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Je,afterBody:Je,beforeFooter:Je,footer:Je,afterFooter:Je};function oe(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?Sd[t].call(n,s):i}class ma extends ks{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new ud(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Jx(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=oe(s,"beforeTitle",this,t),r=oe(s,"title",this,t),o=oe(s,"afterTitle",this,t);let a=[];return a=je(a,en(i)),a=je(a,en(r)),a=je(a,en(o)),a}getBeforeBody(t,n){return Au(oe(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return yt(t,r=>{const o={before:[],lines:[],after:[]},a=Tu(s,r);je(o.before,en(oe(a,"beforeLabel",this,r))),je(o.lines,oe(a,"label",this,r)),je(o.after,en(oe(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return Au(oe(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=oe(s,"beforeFooter",this,t),r=oe(s,"footer",this,t),o=oe(s,"afterFooter",this,t);let a=[];return a=je(a,en(i)),a=je(a,en(r)),a=je(a,en(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(qx(this.chart,n[l]));return t.filter&&(a=a.filter((u,f,h)=>t.filter(u,f,h,s))),t.itemSort&&(a=a.sort((u,f)=>t.itemSort(u,f,s))),yt(a,u=>{const f=Tu(t.callbacks,u);i.push(oe(f,"labelColor",this,u)),r.push(oe(f,"labelPointStyle",this,u)),o.push(oe(f,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Ws[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=ku(this,s),c=Object.assign({},a,l),u=Ru(this.chart,s,c),f=Eu(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=si(a),{x:h,y:d}=t,{width:g,height:m}=n;let b,x,v,S,k,C;return r==="center"?(k=d+m/2,i==="left"?(b=h,x=b-o,S=k+o,C=k-o):(b=h+g,x=b+o,S=k-o,C=k+o),v=b):(i==="left"?x=h+Math.max(l,u)+o:i==="right"?x=h+g-Math.max(c,f)-o:x=this.caretX,r==="top"?(S=d,k=S-o,b=x-o,v=x+o):(S=d+m,k=S+o,b=x+o,v=x-o),C=S),{x1:b,x2:x,x3:v,y1:S,y2:k,y3:C}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const c=ds(s.rtl,this.x,this.width);for(t.x=Qi(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=Yt(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,u=Yt(r.bodyFont),f=Qi(this,"left",r),h=i.x(f),d=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+d;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(h,c)+c/2,x=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,qc(t,m,b,x),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,qc(t,m,b,x)}else{t.lineWidth=ht(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const m=i.leftForLtr(h,c),b=i.leftForLtr(i.xPlus(h,1),c-2),x=si(o.borderRadius);Object.values(x).some(v=>v!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,ha(t,{x:m,y:g,w:c,h:l,radius:x}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),ha(t,{x:b,y:g+1,w:c-2,h:l-2,radius:x}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,c,l),t.strokeRect(m,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(b,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,f=Yt(s.bodyFont);let h=f.lineHeight,d=0;const g=ds(s.rtl,this.x,this.width),m=function(D){n.fillText(D,g.x(t.x+d),t.y+h/2),t.y+=h+r},b=g.textAlign(o);let x,v,S,k,C,$,P;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,t.x=Qi(this,b,s),n.fillStyle=s.bodyColor,yt(this.beforeBody,m),d=a&&b!=="right"?o==="center"?c/2+u:c+2+u:0,k=0,$=i.length;k<$;++k){for(x=i[k],v=this.labelTextColors[k],n.fillStyle=v,yt(x.before,m),S=x.lines,a&&S.length&&(this._drawColorBox(n,t,k,g,s),h=Math.max(f.lineHeight,l)),C=0,P=S.length;C<P;++C)m(S[C]),h=f.lineHeight;yt(x.after,m)}d=0,h=f.lineHeight,yt(this.afterBody,m),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=ds(s.rtl,this.x,this.width);for(t.x=Qi(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=Yt(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=s,{topLeft:f,topRight:h,bottomLeft:d,bottomRight:g}=si(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+d,l+u),n.quadraticCurveTo(a,l+u,a,l+u-d),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Ws[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=ku(this,t),l=Object.assign({},o,this._size),c=Ru(n,t,l),u=Eu(t,l,c,n);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Te(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),ld(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),cd(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!wr(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),l=n||!wr(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=Ws[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}W(ma,"positioners",Ws);var Zx={id:"tooltip",_element:ma,positioners:Ws,afterInit(e,t,n){n&&(e.tooltip=new ma({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Sd},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const tv=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function ev(e,t,n,s){const i=e.indexOf(t);if(i===-1)return tv(e,t,n,s);const r=e.lastIndexOf(t);return i!==r?n:i}const nv=(e,t)=>e===null?null:ye(Math.round(e),0,t);function Cu(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ba extends Mi{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:r}of n)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Ut(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:ev(s,t,mt(n,t),this._addedLabels),nv(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)i.push({value:o});return i}getLabelForValue(t){return Cu.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}W(ba,"id","category"),W(ba,"defaults",{ticks:{callback:Cu}});const ao={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ce=Object.keys(ao);function Ou(e,t){return e-t}function Pu(e,t){if(Ut(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),hn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Er(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function Mu(e,t,n,s){const i=ce.length;for(let r=ce.indexOf(e);r<i-1;++r){const o=ao[ce[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return ce[r]}return ce[i-1]}function sv(e,t,n,s,i){for(let r=ce.length-1;r>=ce.indexOf(n);r--){const o=ce[r];if(ao[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return ce[n?ce.indexOf(n):0]}function iv(e){for(let t=ce.indexOf(e)+1,n=ce.length;t<n;++t)if(ao[ce[t]].common)return ce[t]}function Iu(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=el(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function rv(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function Lu(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:rv(e,s,i,n)}class Pr extends Mi{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new k0._date(t.adapters.date);i.init(n),ti(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Pu(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=hn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=hn(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=_y(i,r,o);return this._unit=n.unit||(s.autoSkip?Mu(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):sv(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:iv(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),Lu(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=ye(n,0,o),s=ye(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||Mu(r.minUnit,n,s,this._getLabelCapacity(n)),a=mt(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Er(l)||l===!0,u={};let f=n,h,d;if(c&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,c?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(h=f,d=0;h<s;h=+t.add(h,a,o),d++)Iu(u,h,g);return(h===s||i.bounds==="ticks"||d===1)&&Iu(u,h,g),Object.keys(u).sort(Ou).map(m=>+m)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return At(o,[t,n,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],h=s[n],d=c&&f&&h&&h.major;return this._adapter.format(t,i||(d?f:u))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=Hn(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,Lu(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(Pu(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return xy(t.sort(Ou))}}W(Pr,"id","time"),W(Pr,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ji(e,t,n){let s=0,i=e.length-1,r,o,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=ua(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=ua(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class Du extends Pr{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Ji(n,this.min),this._tableRange=Ji(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=s&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Ji(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Ji(this._table,s*this._tableRange+this._minPos,!0)}}W(Du,"id","timeseries"),W(Du,"defaults",Pr.defaults);const kd={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},ov={ariaLabel:{type:String},ariaDescribedby:{type:String}},av={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...kd,...ov},lv=hh[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function is(e){return Ai(e)?ct(e):e}function cv(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return Ai(t)?new Proxy(e,{}):e}function uv(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function Rd(e,t){e.labels=t}function Ed(e,t,n){const s=[];e.datasets=t.map(i=>{const r=e.datasets.find(o=>o[n]===i[n]);return!r||!i.data||s.includes(r)?{...i}:(s.push(r),Object.assign(r,i),r)})}function fv(e,t){const n={labels:[],datasets:[]};return Rd(n,e.labels),Ed(n,e.datasets,t),n}const hv=qr({props:av,setup(e,t){let{expose:n,slots:s}=t;const i=vt(null),r=Ba(null);n({chart:r});const o=()=>{if(!i.value)return;const{type:c,data:u,options:f,plugins:h,datasetIdKey:d}=e,g=fv(u,d),m=cv(g,u);r.value=new oo(i.value,{type:c,data:m,options:{...f},plugins:h})},a=()=>{const c=ct(r.value);c&&(e.destroyDelay>0?setTimeout(()=>{c.destroy(),r.value=null},e.destroyDelay):(c.destroy(),r.value=null))},l=c=>{c.update(e.updateMode)};return xs(o),Ha(a),Rn([()=>e.options,()=>e.data],(c,u)=>{let[f,h]=c,[d,g]=u;const m=ct(r.value);if(!m)return;let b=!1;if(f){const x=is(f),v=is(d);x&&x!==v&&(uv(m,x),b=!0)}if(h){const x=is(h.labels),v=is(g.labels),S=is(h.datasets),k=is(g.datasets);x!==v&&(Rd(m.config.data,x),b=!0),S&&S!==k&&(Ed(m.config.data,S,e.datasetIdKey),b=!0)}b&&Wr(()=>{l(m)})},{deep:!0}),()=>ps("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:i},[ps("p",{},[s.default?s.default():""])])}});function Ad(e,t){return oo.register(t),qr({props:kd,setup(n,s){let{expose:i}=s;const r=Ba(null),o=a=>{r.value=a==null?void 0:a.chart};return i({chart:r}),()=>ps(hv,lv({ref:o},{type:e,...n}))}})}const dv=Ad("doughnut",as),pv=Ad("pie",da),gv={name:"LoadingTip",props:{tip:{type:Object,required:!0,default:()=>({category:"心理小贴士",title:"每日提示",content:"保持积极的心态有助于应对挑战。"})}}},mv={class:"loading-tip"},bv={class:"tip-header"},_v={class:"tip-title-group"},yv={class:"tip-category"},xv={class:"tip-title"},vv={class:"tip-content"};function wv(e,t,n,s,i,r){return L(),B("div",mv,[p("div",bv,[t[0]||(t[0]=p("i",{class:"fas fa-lightbulb tip-icon"},null,-1)),p("div",_v,[p("div",yv,G(n.tip.category),1),p("div",xv,G(n.tip.title),1)])]),p("div",vv,G(n.tip.content),1)])}const wi=Wt(gv,[["render",wv],["__scopeId","data-v-916747f7"]]);function Td(e,t){return function(){return e.apply(t,arguments)}}const{toString:Sv}=Object.prototype,{getPrototypeOf:hl}=Object,{iterator:lo,toStringTag:Cd}=Symbol,co=(e=>t=>{const n=Sv.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Le=e=>(e=e.toLowerCase(),t=>co(t)===e),uo=e=>t=>typeof t===e,{isArray:Rs}=Array,Si=uo("undefined");function kv(e){return e!==null&&!Si(e)&&e.constructor!==null&&!Si(e.constructor)&&fe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Od=Le("ArrayBuffer");function Rv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Od(e.buffer),t}const Ev=uo("string"),fe=uo("function"),Pd=uo("number"),fo=e=>e!==null&&typeof e=="object",Av=e=>e===!0||e===!1,ar=e=>{if(co(e)!=="object")return!1;const t=hl(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Cd in e)&&!(lo in e)},Tv=Le("Date"),Cv=Le("File"),Ov=Le("Blob"),Pv=Le("FileList"),Mv=e=>fo(e)&&fe(e.pipe),Iv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||fe(e.append)&&((t=co(e))==="formdata"||t==="object"&&fe(e.toString)&&e.toString()==="[object FormData]"))},Lv=Le("URLSearchParams"),[Dv,$v,Nv,Fv]=["ReadableStream","Request","Response","Headers"].map(Le),Bv=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ii(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,i;if(typeof e!="object"&&(e=[e]),Rs(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(s=0;s<o;s++)a=r[s],t.call(null,e[a],a,e)}}function Md(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,i;for(;s-- >0;)if(i=n[s],t===i.toLowerCase())return i;return null}const jn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Id=e=>!Si(e)&&e!==jn;function _a(){const{caseless:e}=Id(this)&&this||{},t={},n=(s,i)=>{const r=e&&Md(t,i)||i;ar(t[r])&&ar(s)?t[r]=_a(t[r],s):ar(s)?t[r]=_a({},s):Rs(s)?t[r]=s.slice():t[r]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Ii(arguments[s],n);return t}const zv=(e,t,n,{allOwnKeys:s}={})=>(Ii(t,(i,r)=>{n&&fe(i)?e[r]=Td(i,n):e[r]=i},{allOwnKeys:s}),e),Hv=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),jv=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Vv=(e,t,n,s)=>{let i,r,o;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)o=i[r],(!s||s(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&hl(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Uv=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},Wv=e=>{if(!e)return null;if(Rs(e))return e;let t=e.length;if(!Pd(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},qv=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&hl(Uint8Array)),Kv=(e,t)=>{const s=(e&&e[lo]).call(e);let i;for(;(i=s.next())&&!i.done;){const r=i.value;t.call(e,r[0],r[1])}},Gv=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},Yv=Le("HTMLFormElement"),Xv=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),$u=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Qv=Le("RegExp"),Ld=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Ii(n,(i,r)=>{let o;(o=t(i,r,e))!==!1&&(s[r]=o||i)}),Object.defineProperties(e,s)},Jv=e=>{Ld(e,(t,n)=>{if(fe(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(fe(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Zv=(e,t)=>{const n={},s=i=>{i.forEach(r=>{n[r]=!0})};return Rs(e)?s(e):s(String(e).split(t)),n},tw=()=>{},ew=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function nw(e){return!!(e&&fe(e.append)&&e[Cd]==="FormData"&&e[lo])}const sw=e=>{const t=new Array(10),n=(s,i)=>{if(fo(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[i]=s;const r=Rs(s)?[]:{};return Ii(s,(o,a)=>{const l=n(o,i+1);!Si(l)&&(r[a]=l)}),t[i]=void 0,r}}return s};return n(e,0)},iw=Le("AsyncFunction"),rw=e=>e&&(fo(e)||fe(e))&&fe(e.then)&&fe(e.catch),Dd=((e,t)=>e?setImmediate:t?((n,s)=>(jn.addEventListener("message",({source:i,data:r})=>{i===jn&&r===n&&s.length&&s.shift()()},!1),i=>{s.push(i),jn.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",fe(jn.postMessage)),ow=typeof queueMicrotask<"u"?queueMicrotask.bind(jn):typeof process<"u"&&process.nextTick||Dd,aw=e=>e!=null&&fe(e[lo]),R={isArray:Rs,isArrayBuffer:Od,isBuffer:kv,isFormData:Iv,isArrayBufferView:Rv,isString:Ev,isNumber:Pd,isBoolean:Av,isObject:fo,isPlainObject:ar,isReadableStream:Dv,isRequest:$v,isResponse:Nv,isHeaders:Fv,isUndefined:Si,isDate:Tv,isFile:Cv,isBlob:Ov,isRegExp:Qv,isFunction:fe,isStream:Mv,isURLSearchParams:Lv,isTypedArray:qv,isFileList:Pv,forEach:Ii,merge:_a,extend:zv,trim:Bv,stripBOM:Hv,inherits:jv,toFlatObject:Vv,kindOf:co,kindOfTest:Le,endsWith:Uv,toArray:Wv,forEachEntry:Kv,matchAll:Gv,isHTMLForm:Yv,hasOwnProperty:$u,hasOwnProp:$u,reduceDescriptors:Ld,freezeMethods:Jv,toObjectSet:Zv,toCamelCase:Xv,noop:tw,toFiniteNumber:ew,findKey:Md,global:jn,isContextDefined:Id,isSpecCompliantForm:nw,toJSONObject:sw,isAsyncFn:iw,isThenable:rw,setImmediate:Dd,asap:ow,isIterable:aw};function at(e,t,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}R.inherits(at,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.status}}});const $d=at.prototype,Nd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Nd[e]={value:e}});Object.defineProperties(at,Nd);Object.defineProperty($d,"isAxiosError",{value:!0});at.from=(e,t,n,s,i,r)=>{const o=Object.create($d);return R.toFlatObject(e,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),at.call(o,e.message,t,n,s,i),o.cause=e,o.name=e.name,r&&Object.assign(o,r),o};const lw=null;function ya(e){return R.isPlainObject(e)||R.isArray(e)}function Fd(e){return R.endsWith(e,"[]")?e.slice(0,-2):e}function Nu(e,t,n){return e?e.concat(t).map(function(i,r){return i=Fd(i),!n&&r?"["+i+"]":i}).join(n?".":""):t}function cw(e){return R.isArray(e)&&!e.some(ya)}const uw=R.toFlatObject(R,{},null,function(t){return/^is[A-Z]/.test(t)});function ho(e,t,n){if(!R.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=R.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,b){return!R.isUndefined(b[m])});const s=n.metaTokens,i=n.visitor||u,r=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(t);if(!R.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(R.isDate(g))return g.toISOString();if(!l&&R.isBlob(g))throw new at("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(g)||R.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,m,b){let x=g;if(g&&!b&&typeof g=="object"){if(R.endsWith(m,"{}"))m=s?m:m.slice(0,-2),g=JSON.stringify(g);else if(R.isArray(g)&&cw(g)||(R.isFileList(g)||R.endsWith(m,"[]"))&&(x=R.toArray(g)))return m=Fd(m),x.forEach(function(S,k){!(R.isUndefined(S)||S===null)&&t.append(o===!0?Nu([m],k,r):o===null?m:m+"[]",c(S))}),!1}return ya(g)?!0:(t.append(Nu(b,m,r),c(g)),!1)}const f=[],h=Object.assign(uw,{defaultVisitor:u,convertValue:c,isVisitable:ya});function d(g,m){if(!R.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(g),R.forEach(g,function(x,v){(!(R.isUndefined(x)||x===null)&&i.call(t,x,R.isString(v)?v.trim():v,m,h))===!0&&d(x,m?m.concat(v):[v])}),f.pop()}}if(!R.isObject(e))throw new TypeError("data must be an object");return d(e),t}function Fu(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function dl(e,t){this._pairs=[],e&&ho(e,this,t)}const Bd=dl.prototype;Bd.append=function(t,n){this._pairs.push([t,n])};Bd.toString=function(t){const n=t?function(s){return t.call(this,s,Fu)}:Fu;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function fw(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zd(e,t,n){if(!t)return e;const s=n&&n.encode||fw;R.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let r;if(i?r=i(t,n):r=R.isURLSearchParams(t)?t.toString():new dl(t,n).toString(s),r){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class Bu{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){R.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Hd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hw=typeof URLSearchParams<"u"?URLSearchParams:dl,dw=typeof FormData<"u"?FormData:null,pw=typeof Blob<"u"?Blob:null,gw={isBrowser:!0,classes:{URLSearchParams:hw,FormData:dw,Blob:pw},protocols:["http","https","file","blob","url","data"]},pl=typeof window<"u"&&typeof document<"u",xa=typeof navigator=="object"&&navigator||void 0,mw=pl&&(!xa||["ReactNative","NativeScript","NS"].indexOf(xa.product)<0),bw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_w=pl&&window.location.href||"http://localhost",yw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:pl,hasStandardBrowserEnv:mw,hasStandardBrowserWebWorkerEnv:bw,navigator:xa,origin:_w},Symbol.toStringTag,{value:"Module"})),Gt={...yw,...gw};function xw(e,t){return ho(e,new Gt.classes.URLSearchParams,Object.assign({visitor:function(n,s,i,r){return Gt.isNode&&R.isBuffer(n)?(this.append(s,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function vw(e){return R.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ww(e){const t={},n=Object.keys(e);let s;const i=n.length;let r;for(s=0;s<i;s++)r=n[s],t[r]=e[r];return t}function jd(e){function t(n,s,i,r){let o=n[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=n.length;return o=!o&&R.isArray(i)?i.length:o,l?(R.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!a):((!i[o]||!R.isObject(i[o]))&&(i[o]=[]),t(n,s,i[o],r)&&R.isArray(i[o])&&(i[o]=ww(i[o])),!a)}if(R.isFormData(e)&&R.isFunction(e.entries)){const n={};return R.forEachEntry(e,(s,i)=>{t(vw(s),i,n,0)}),n}return null}function Sw(e,t,n){if(R.isString(e))try{return(t||JSON.parse)(e),R.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Li={transitional:Hd,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,r=R.isObject(t);if(r&&R.isHTMLForm(t)&&(t=new FormData(t)),R.isFormData(t))return i?JSON.stringify(jd(t)):t;if(R.isArrayBuffer(t)||R.isBuffer(t)||R.isStream(t)||R.isFile(t)||R.isBlob(t)||R.isReadableStream(t))return t;if(R.isArrayBufferView(t))return t.buffer;if(R.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return xw(t,this.formSerializer).toString();if((a=R.isFileList(t))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ho(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return r||i?(n.setContentType("application/json",!1),Sw(t)):t}],transformResponse:[function(t){const n=this.transitional||Li.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(R.isResponse(t)||R.isReadableStream(t))return t;if(t&&R.isString(t)&&(s&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?at.from(a,at.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],e=>{Li.headers[e]={}});const kw=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Rw=e=>{const t={};let n,s,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!n||t[n]&&kw[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},zu=Symbol("internals");function Ns(e){return e&&String(e).trim().toLowerCase()}function lr(e){return e===!1||e==null?e:R.isArray(e)?e.map(lr):String(e)}function Ew(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const Aw=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Vo(e,t,n,s,i){if(R.isFunction(s))return s.call(this,t,n);if(i&&(t=n),!!R.isString(t)){if(R.isString(s))return t.indexOf(s)!==-1;if(R.isRegExp(s))return s.test(t)}}function Tw(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function Cw(e,t){const n=R.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(i,r,o){return this[s].call(this,t,i,r,o)},configurable:!0})})}let he=class{constructor(t){t&&this.set(t)}set(t,n,s){const i=this;function r(a,l,c){const u=Ns(l);if(!u)throw new Error("header name must be a non-empty string");const f=R.findKey(i,u);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=lr(a))}const o=(a,l)=>R.forEach(a,(c,u)=>r(c,u,l));if(R.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(R.isString(t)&&(t=t.trim())&&!Aw(t))o(Rw(t),n);else if(R.isObject(t)&&R.isIterable(t)){let a={},l,c;for(const u of t){if(!R.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?R.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,n)}else t!=null&&r(n,t,s);return this}get(t,n){if(t=Ns(t),t){const s=R.findKey(this,t);if(s){const i=this[s];if(!n)return i;if(n===!0)return Ew(i);if(R.isFunction(n))return n.call(this,i,s);if(R.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ns(t),t){const s=R.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||Vo(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let i=!1;function r(o){if(o=Ns(o),o){const a=R.findKey(s,o);a&&(!n||Vo(s,s[a],a,n))&&(delete s[a],i=!0)}}return R.isArray(t)?t.forEach(r):r(t),i}clear(t){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const r=n[s];(!t||Vo(this,this[r],r,t,!0))&&(delete this[r],i=!0)}return i}normalize(t){const n=this,s={};return R.forEach(this,(i,r)=>{const o=R.findKey(s,r);if(o){n[o]=lr(i),delete n[r];return}const a=t?Tw(r):String(r).trim();a!==r&&delete n[r],n[a]=lr(i),s[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return R.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=t&&R.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(i=>s.set(i)),s}static accessor(t){const s=(this[zu]=this[zu]={accessors:{}}).accessors,i=this.prototype;function r(o){const a=Ns(o);s[a]||(Cw(i,o),s[a]=!0)}return R.isArray(t)?t.forEach(r):r(t),this}};he.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(he.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});R.freezeMethods(he);function Uo(e,t){const n=this||Li,s=t||n,i=he.from(s.headers);let r=s.data;return R.forEach(e,function(a){r=a.call(n,r,i.normalize(),t?t.status:void 0)}),i.normalize(),r}function Vd(e){return!!(e&&e.__CANCEL__)}function Es(e,t,n){at.call(this,e??"canceled",at.ERR_CANCELED,t,n),this.name="CanceledError"}R.inherits(Es,at,{__CANCEL__:!0});function Ud(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new at("Request failed with status code "+n.status,[at.ERR_BAD_REQUEST,at.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Ow(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Pw(e,t){e=e||10;const n=new Array(e),s=new Array(e);let i=0,r=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=s[r];o||(o=c),n[i]=l,s[i]=c;let f=r,h=0;for(;f!==i;)h+=n[f++],f=f%e;if(i=(i+1)%e,i===r&&(r=(r+1)%e),c-o<t)return;const d=u&&c-u;return d?Math.round(h*1e3/d):void 0}}function Mw(e,t){let n=0,s=1e3/t,i,r;const o=(c,u=Date.now())=>{n=u,i=null,r&&(clearTimeout(r),r=null),e.apply(null,c)};return[(...c)=>{const u=Date.now(),f=u-n;f>=s?o(c,u):(i=c,r||(r=setTimeout(()=>{r=null,o(i)},s-f)))},()=>i&&o(i)]}const Mr=(e,t,n=3)=>{let s=0;const i=Pw(50,250);return Mw(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-s,c=i(l),u=o<=a;s=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},n)},Hu=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},ju=e=>(...t)=>R.asap(()=>e(...t)),Iw=Gt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Gt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,Lw=Gt.hasStandardBrowserEnv?{write(e,t,n,s,i,r){const o=[e+"="+encodeURIComponent(t)];R.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),R.isString(s)&&o.push("path="+s),R.isString(i)&&o.push("domain="+i),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Dw(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function $w(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Wd(e,t,n){let s=!Dw(t);return e&&(s||n==!1)?$w(e,t):t}const Vu=e=>e instanceof he?{...e}:e;function Gn(e,t){t=t||{};const n={};function s(c,u,f,h){return R.isPlainObject(c)&&R.isPlainObject(u)?R.merge.call({caseless:h},c,u):R.isPlainObject(u)?R.merge({},u):R.isArray(u)?u.slice():u}function i(c,u,f,h){if(R.isUndefined(u)){if(!R.isUndefined(c))return s(void 0,c,f,h)}else return s(c,u,f,h)}function r(c,u){if(!R.isUndefined(u))return s(void 0,u)}function o(c,u){if(R.isUndefined(u)){if(!R.isUndefined(c))return s(void 0,c)}else return s(void 0,u)}function a(c,u,f){if(f in t)return s(c,u);if(f in e)return s(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,f)=>i(Vu(c),Vu(u),f,!0)};return R.forEach(Object.keys(Object.assign({},e,t)),function(u){const f=l[u]||i,h=f(e[u],t[u],u);R.isUndefined(h)&&f!==a||(n[u]=h)}),n}const qd=e=>{const t=Gn({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:a}=t;t.headers=o=he.from(o),t.url=zd(Wd(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(R.isFormData(n)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Gt.hasStandardBrowserEnv&&(s&&R.isFunction(s)&&(s=s(t)),s||s!==!1&&Iw(t.url))){const c=i&&r&&Lw.read(r);c&&o.set(i,c)}return t},Nw=typeof XMLHttpRequest<"u",Fw=Nw&&function(e){return new Promise(function(n,s){const i=qd(e);let r=i.data;const o=he.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,f,h,d,g;function m(){d&&d(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function x(){if(!b)return;const S=he.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),C={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:S,config:e,request:b};Ud(function(P){n(P),m()},function(P){s(P),m()},C),b=null}"onloadend"in b?b.onloadend=x:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(x)},b.onabort=function(){b&&(s(new at("Request aborted",at.ECONNABORTED,e,b)),b=null)},b.onerror=function(){s(new at("Network Error",at.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let k=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const C=i.transitional||Hd;i.timeoutErrorMessage&&(k=i.timeoutErrorMessage),s(new at(k,C.clarifyTimeoutError?at.ETIMEDOUT:at.ECONNABORTED,e,b)),b=null},r===void 0&&o.setContentType(null),"setRequestHeader"in b&&R.forEach(o.toJSON(),function(k,C){b.setRequestHeader(C,k)}),R.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),a&&a!=="json"&&(b.responseType=i.responseType),c&&([h,g]=Mr(c,!0),b.addEventListener("progress",h)),l&&b.upload&&([f,d]=Mr(l),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",d)),(i.cancelToken||i.signal)&&(u=S=>{b&&(s(!S||S.type?new Es(null,e,b):S),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const v=Ow(i.url);if(v&&Gt.protocols.indexOf(v)===-1){s(new at("Unsupported protocol "+v+":",at.ERR_BAD_REQUEST,e));return}b.send(r||null)})},Bw=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,i;const r=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;s.abort(u instanceof at?u:new Es(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,r(new at(`timeout ${t} of ms exceeded`,at.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),e=null)};e.forEach(c=>c.addEventListener("abort",r));const{signal:l}=s;return l.unsubscribe=()=>R.asap(a),l}},zw=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,i;for(;s<n;)i=s+t,yield e.slice(s,i),s=i},Hw=async function*(e,t){for await(const n of jw(e))yield*zw(n,t)},jw=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},Uu=(e,t,n,s)=>{const i=Hw(e,t);let r=0,o,a=l=>{o||(o=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let f=u.byteLength;if(n){let h=r+=f;n(h)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},po=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Kd=po&&typeof ReadableStream=="function",Vw=po&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Gd=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Uw=Kd&&Gd(()=>{let e=!1;const t=new Request(Gt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Wu=64*1024,va=Kd&&Gd(()=>R.isReadableStream(new Response("").body)),Ir={stream:va&&(e=>e.body)};po&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Ir[t]&&(Ir[t]=R.isFunction(e[t])?n=>n[t]():(n,s)=>{throw new at(`Response type '${t}' is not supported`,at.ERR_NOT_SUPPORT,s)})})})(new Response);const Ww=async e=>{if(e==null)return 0;if(R.isBlob(e))return e.size;if(R.isSpecCompliantForm(e))return(await new Request(Gt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(R.isArrayBufferView(e)||R.isArrayBuffer(e))return e.byteLength;if(R.isURLSearchParams(e)&&(e=e+""),R.isString(e))return(await Vw(e)).byteLength},qw=async(e,t)=>{const n=R.toFiniteNumber(e.getContentLength());return n??Ww(t)},Kw=po&&(async e=>{let{url:t,method:n,data:s,signal:i,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:f="same-origin",fetchOptions:h}=qd(e);c=c?(c+"").toLowerCase():"text";let d=Bw([i,r&&r.toAbortSignal()],o),g;const m=d&&d.unsubscribe&&(()=>{d.unsubscribe()});let b;try{if(l&&Uw&&n!=="get"&&n!=="head"&&(b=await qw(u,s))!==0){let C=new Request(t,{method:"POST",body:s,duplex:"half"}),$;if(R.isFormData(s)&&($=C.headers.get("content-type"))&&u.setContentType($),C.body){const[P,D]=Hu(b,Mr(ju(l)));s=Uu(C.body,Wu,P,D)}}R.isString(f)||(f=f?"include":"omit");const x="credentials"in Request.prototype;g=new Request(t,{...h,signal:d,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:x?f:void 0});let v=await fetch(g);const S=va&&(c==="stream"||c==="response");if(va&&(a||S&&m)){const C={};["status","statusText","headers"].forEach(N=>{C[N]=v[N]});const $=R.toFiniteNumber(v.headers.get("content-length")),[P,D]=a&&Hu($,Mr(ju(a),!0))||[];v=new Response(Uu(v.body,Wu,P,()=>{D&&D(),m&&m()}),C)}c=c||"text";let k=await Ir[R.findKey(Ir,c)||"text"](v,e);return!S&&m&&m(),await new Promise((C,$)=>{Ud(C,$,{data:k,headers:he.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:g})})}catch(x){throw m&&m(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new at("Network Error",at.ERR_NETWORK,e,g),{cause:x.cause||x}):at.from(x,x&&x.code,e,g)}}),wa={http:lw,xhr:Fw,fetch:Kw};R.forEach(wa,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const qu=e=>`- ${e}`,Gw=e=>R.isFunction(e)||e===null||e===!1,Yd={getAdapter:e=>{e=R.isArray(e)?e:[e];const{length:t}=e;let n,s;const i={};for(let r=0;r<t;r++){n=e[r];let o;if(s=n,!Gw(n)&&(s=wa[(o=String(n)).toLowerCase()],s===void 0))throw new at(`Unknown adapter '${o}'`);if(s)break;i[o||"#"+r]=s}if(!s){const r=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?r.length>1?`since :
`+r.map(qu).join(`
`):" "+qu(r[0]):"as no adapter specified";throw new at("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:wa};function Wo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Es(null,e)}function Ku(e){return Wo(e),e.headers=he.from(e.headers),e.data=Uo.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Yd.getAdapter(e.adapter||Li.adapter)(e).then(function(s){return Wo(e),s.data=Uo.call(e,e.transformResponse,s),s.headers=he.from(s.headers),s},function(s){return Vd(s)||(Wo(e),s&&s.response&&(s.response.data=Uo.call(e,e.transformResponse,s.response),s.response.headers=he.from(s.response.headers))),Promise.reject(s)})}const Xd="1.9.0",go={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{go[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Gu={};go.transitional=function(t,n,s){function i(r,o){return"[Axios v"+Xd+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,a)=>{if(t===!1)throw new at(i(o," has been removed"+(n?" in "+n:"")),at.ERR_DEPRECATED);return n&&!Gu[o]&&(Gu[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,o,a):!0}};go.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function Yw(e,t,n){if(typeof e!="object")throw new at("options must be an object",at.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const r=s[i],o=t[r];if(o){const a=e[r],l=a===void 0||o(a,r,e);if(l!==!0)throw new at("option "+r+" must be "+l,at.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new at("Unknown option "+r,at.ERR_BAD_OPTION)}}const cr={assertOptions:Yw,validators:go},He=cr.validators;let Wn=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Bu,response:new Bu}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Gn(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:r}=n;s!==void 0&&cr.assertOptions(s,{silentJSONParsing:He.transitional(He.boolean),forcedJSONParsing:He.transitional(He.boolean),clarifyTimeoutError:He.transitional(He.boolean)},!1),i!=null&&(R.isFunction(i)?n.paramsSerializer={serialize:i}:cr.assertOptions(i,{encode:He.function,serialize:He.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),cr.assertOptions(n,{baseUrl:He.spelling("baseURL"),withXsrfToken:He.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=r&&R.merge(r.common,r[n.method]);r&&R.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),n.headers=he.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,f=0,h;if(!l){const g=[Ku.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),h=g.length,u=Promise.resolve(n);f<h;)u=u.then(g[f++],g[f++]);return u}h=a.length;let d=n;for(f=0;f<h;){const g=a[f++],m=a[f++];try{d=g(d)}catch(b){m.call(this,b);break}}try{u=Ku.call(this,d)}catch(g){return Promise.reject(g)}for(f=0,h=c.length;f<h;)u=u.then(c[f++],c[f++]);return u}getUri(t){t=Gn(this.defaults,t);const n=Wd(t.baseURL,t.url,t.allowAbsoluteUrls);return zd(n,t.params,t.paramsSerializer)}};R.forEach(["delete","get","head","options"],function(t){Wn.prototype[t]=function(n,s){return this.request(Gn(s||{},{method:t,url:n,data:(s||{}).data}))}});R.forEach(["post","put","patch"],function(t){function n(s){return function(r,o,a){return this.request(Gn(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Wn.prototype[t]=n(),Wn.prototype[t+"Form"]=n(!0)});let Xw=class Qd{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(a=>{s.subscribe(a),r=a}).then(i);return o.cancel=function(){s.unsubscribe(r)},o},t(function(r,o,a){s.reason||(s.reason=new Es(r,o,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Qd(function(i){t=i}),cancel:t}}};function Qw(e){return function(n){return e.apply(null,n)}}function Jw(e){return R.isObject(e)&&e.isAxiosError===!0}const Sa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Sa).forEach(([e,t])=>{Sa[t]=e});function Jd(e){const t=new Wn(e),n=Td(Wn.prototype.request,t);return R.extend(n,Wn.prototype,t,{allOwnKeys:!0}),R.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return Jd(Gn(e,i))},n}const Ot=Jd(Li);Ot.Axios=Wn;Ot.CanceledError=Es;Ot.CancelToken=Xw;Ot.isCancel=Vd;Ot.VERSION=Xd;Ot.toFormData=ho;Ot.AxiosError=at;Ot.Cancel=Ot.CanceledError;Ot.all=function(t){return Promise.all(t)};Ot.spread=Qw;Ot.isAxiosError=Jw;Ot.mergeConfig=Gn;Ot.AxiosHeaders=he;Ot.formToJSON=e=>jd(R.isHTMLForm(e)?new FormData(e):e);Ot.getAdapter=Yd.getAdapter;Ot.HttpStatusCode=Sa;Ot.default=Ot;const{Axios:FR,AxiosError:BR,CanceledError:zR,isCancel:HR,CancelToken:jR,VERSION:VR,all:UR,Cancel:WR,isAxiosError:qR,spread:KR,toFormData:GR,AxiosHeaders:YR,HttpStatusCode:XR,formToJSON:QR,getAdapter:JR,mergeConfig:ZR}=Ot,ka=Ot.create({baseURL:"/",timeout:12e4});ka.interceptors.request.use(e=>{const t=localStorage.getItem("admin_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));const Se=Ot.create({baseURL:"/api/v1/admin",timeout:12e4});Se.interceptors.request.use(e=>{const t=localStorage.getItem("admin_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));const ae={auth:{login(e,t){const n=new URLSearchParams;return n.append("username",e),n.append("password",t),Ot.post("/api/v1/auth/token",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getCurrentUser(){return ka.get("/api/v1/users/me")}},users:{getUsers(e=0,t=100){return Se.get("/users",{params:{skip:e,limit:t}})},updateUser(e,t){return Se.patch(`/users/${e}`,t)}},stats:{getDemographicsStats(){return Se.get("/stats/demographics")},getAIAnalysis(e){return Se.post("/stats/ai-analysis",{demographics:e})}},assessments:{search(e=null){const t={};return e&&(t.id_card=e),Se.get("/assessments/search",{params:t})},getById(e){return ka.get(`/api/v1/reports/${e}`)}},guidance:{getGuidance(e,t){return Se.get(`/guidance/${e}`,{params:{id_card:t}})}},interrogation:{getList({skip:e=0,limit:t=10}){return Se.get("/interrogations",{params:{skip:e,limit:t}})},getById(e){return Se.get(`/interrogations/${e}`)},start(e){return Se.post("/interrogation/start",e)},suggestQuestion(e,t){const n=t.map(s=>({q:s.q,a:s.a}));return Se.post(`/interrogation/${e}/suggest`,n)},save(e,t){return Se.put(`/interrogation/${e}`,t)}}};function gl(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Jn=gl();function Zd(e){Jn=e}var ri={exec:()=>null};function bt(e,t=""){let n=typeof e=="string"?e:e.source;const s={replace:(i,r)=>{let o=typeof r=="string"?r:r.source;return o=o.replace(se.caret,"$1"),n=n.replace(i,o),s},getRegex:()=>new RegExp(n,t)};return s}var se={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},Zw=/^(?:[ \t]*(?:\n|$))+/,t1=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,e1=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Di=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,n1=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ml=/(?:[*+-]|\d{1,9}[.)])/,tp=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,ep=bt(tp).replace(/bull/g,ml).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),s1=bt(tp).replace(/bull/g,ml).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),bl=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,i1=/^[^\n]+/,_l=/(?!\s*\])(?:\\.|[^\[\]\\])+/,r1=bt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",_l).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),o1=bt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ml).getRegex(),mo="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",yl=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,a1=bt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",yl).replace("tag",mo).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),np=bt(bl).replace("hr",Di).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mo).getRegex(),l1=bt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",np).getRegex(),xl={blockquote:l1,code:t1,def:r1,fences:e1,heading:n1,hr:Di,html:a1,lheading:ep,list:o1,newline:Zw,paragraph:np,table:ri,text:i1},Yu=bt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Di).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mo).getRegex(),c1={...xl,lheading:s1,table:Yu,paragraph:bt(bl).replace("hr",Di).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Yu).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mo).getRegex()},u1={...xl,html:bt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",yl).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ri,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:bt(bl).replace("hr",Di).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ep).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},f1=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,h1=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,sp=/^( {2,}|\\)\n(?!\s*$)/,d1=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,bo=/[\p{P}\p{S}]/u,vl=/[\s\p{P}\p{S}]/u,ip=/[^\s\p{P}\p{S}]/u,p1=bt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,vl).getRegex(),rp=/(?!~)[\p{P}\p{S}]/u,g1=/(?!~)[\s\p{P}\p{S}]/u,m1=/(?:[^\s\p{P}\p{S}]|~)/u,b1=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,op=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,_1=bt(op,"u").replace(/punct/g,bo).getRegex(),y1=bt(op,"u").replace(/punct/g,rp).getRegex(),ap="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",x1=bt(ap,"gu").replace(/notPunctSpace/g,ip).replace(/punctSpace/g,vl).replace(/punct/g,bo).getRegex(),v1=bt(ap,"gu").replace(/notPunctSpace/g,m1).replace(/punctSpace/g,g1).replace(/punct/g,rp).getRegex(),w1=bt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,ip).replace(/punctSpace/g,vl).replace(/punct/g,bo).getRegex(),S1=bt(/\\(punct)/,"gu").replace(/punct/g,bo).getRegex(),k1=bt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),R1=bt(yl).replace("(?:-->|$)","-->").getRegex(),E1=bt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",R1).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Lr=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,A1=bt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Lr).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),lp=bt(/^!?\[(label)\]\[(ref)\]/).replace("label",Lr).replace("ref",_l).getRegex(),cp=bt(/^!?\[(ref)\](?:\[\])?/).replace("ref",_l).getRegex(),T1=bt("reflink|nolink(?!\\()","g").replace("reflink",lp).replace("nolink",cp).getRegex(),wl={_backpedal:ri,anyPunctuation:S1,autolink:k1,blockSkip:b1,br:sp,code:h1,del:ri,emStrongLDelim:_1,emStrongRDelimAst:x1,emStrongRDelimUnd:w1,escape:f1,link:A1,nolink:cp,punctuation:p1,reflink:lp,reflinkSearch:T1,tag:E1,text:d1,url:ri},C1={...wl,link:bt(/^!?\[(label)\]\((.*?)\)/).replace("label",Lr).getRegex(),reflink:bt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Lr).getRegex()},Ra={...wl,emStrongRDelimAst:v1,emStrongLDelim:y1,url:bt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},O1={...Ra,br:bt(sp).replace("{2,}","*").getRegex(),text:bt(Ra.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Zi={normal:xl,gfm:c1,pedantic:u1},Fs={normal:wl,gfm:Ra,breaks:O1,pedantic:C1},P1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xu=e=>P1[e];function Ve(e,t){if(t){if(se.escapeTest.test(e))return e.replace(se.escapeReplace,Xu)}else if(se.escapeTestNoEncode.test(e))return e.replace(se.escapeReplaceNoEncode,Xu);return e}function Qu(e){try{e=encodeURI(e).replace(se.percentDecode,"%")}catch{return null}return e}function Ju(e,t){var r;const n=e.replace(se.findPipe,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),s=n.split(se.splitPipe);let i=0;if(s[0].trim()||s.shift(),s.length>0&&!((r=s.at(-1))!=null&&r.trim())&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;i<s.length;i++)s[i]=s[i].trim().replace(se.slashPipe,"|");return s}function Bs(e,t,n){const s=e.length;if(s===0)return"";let i=0;for(;i<s&&e.charAt(s-i-1)===t;)i++;return e.slice(0,s-i)}function M1(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let s=0;s<e.length;s++)if(e[s]==="\\")s++;else if(e[s]===t[0])n++;else if(e[s]===t[1]&&(n--,n<0))return s;return n>0?-2:-1}function Zu(e,t,n,s,i){const r=t.href,o=t.title||null,a=e[1].replace(i.other.outputLinkReplace,"$1");s.state.inLink=!0;const l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:r,title:o,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,l}function I1(e,t,n){const s=e.match(n.other.indentCodeCompensation);if(s===null)return t;const i=s[1];return t.split(`
`).map(r=>{const o=r.match(n.other.beginningSpace);if(o===null)return r;const[a]=o;return a.length>=i.length?r.slice(i.length):r}).join(`
`)}var Dr=class{constructor(e){W(this,"options");W(this,"rules");W(this,"lexer");this.options=e||Jn}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Bs(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],s=I1(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){const s=Bs(n,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(n=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Bs(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=Bs(t[0],`
`).split(`
`),s="",i="";const r=[];for(;n.length>0;){let o=!1;const a=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),o=!0;else if(!o)a.push(n[l]);else break;n=n.slice(l);const c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${c}`:c,i=i?`${i}
${u}`:u;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,r,!0),this.lexer.state.top=f,n.length===0)break;const h=r.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){const d=h,g=d.raw+`
`+n.join(`
`),m=this.blockquote(g);r[r.length-1]=m,s=s.substring(0,s.length-d.raw.length)+m.raw,i=i.substring(0,i.length-d.text.length)+m.text;break}else if((h==null?void 0:h.type)==="list"){const d=h,g=d.raw+`
`+n.join(`
`),m=this.list(g);r[r.length-1]=m,s=s.substring(0,s.length-h.raw.length)+m.raw,i=i.substring(0,i.length-d.raw.length)+m.raw,n=g.substring(r.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:r,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,i={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const r=this.rules.other.listItemRegex(n);let o=!1;for(;e;){let l=!1,c="",u="";if(!(t=r.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,x=>" ".repeat(3*x.length)),h=e.split(`
`,1)[0],d=!f.trim(),g=0;if(this.options.pedantic?(g=2,u=f.trimStart()):d?g=t[1].length+1:(g=t[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,u=f.slice(g),g+=t[1].length),d&&this.rules.other.blankLine.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),l=!0),!l){const x=this.rules.other.nextBulletRegex(g),v=this.rules.other.hrRegex(g),S=this.rules.other.fencesBeginRegex(g),k=this.rules.other.headingBeginRegex(g),C=this.rules.other.htmlBeginRegex(g);for(;e;){const $=e.split(`
`,1)[0];let P;if(h=$,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),P=h):P=h.replace(this.rules.other.tabCharGlobal,"    "),S.test(h)||k.test(h)||C.test(h)||x.test(h)||v.test(h))break;if(P.search(this.rules.other.nonSpaceChar)>=g||!h.trim())u+=`
`+P.slice(g);else{if(d||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||S.test(f)||k.test(f)||v.test(f))break;u+=`
`+h}!d&&!h.trim()&&(d=!0),c+=$+`
`,e=e.substring($.length+1),f=P.slice(g)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let m=null,b;this.options.gfm&&(m=this.rules.other.listIsTask.exec(u),m&&(b=m[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!m,checked:b,loose:!1,text:u,tokens:[]}),i.raw+=c}const a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){const c=i.items[l].tokens.filter(f=>f.type==="space"),u=c.length>0&&c.some(f=>this.rules.other.anyLine.test(f.raw));i.loose=u}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:s,title:i}}}table(e){var o;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const n=Ju(t[1]),s=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(o=t[3])!=null&&o.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const a of s)this.rules.other.tableAlignRight.test(a)?r.align.push("right"):this.rules.other.tableAlignCenter.test(a)?r.align.push("center"):this.rules.other.tableAlignLeft.test(a)?r.align.push("left"):r.align.push(null);for(let a=0;a<n.length;a++)r.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:r.align[a]});for(const a of i)r.rows.push(Ju(a,r.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:r.align[c]})));return r}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const r=Bs(n.slice(0,-1),"\\");if((n.length-r.length)%2===0)return}else{const r=M1(t[2],"()");if(r===-2)return;if(r>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let s=t[2],i="";if(this.options.pedantic){const r=this.rules.other.pedanticHrefTitle.exec(s);r&&(s=r[1],i=r[3])}else i=t[3]?t[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?s=s.slice(1):s=s.slice(1,-1)),Zu(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const s=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[s.toLowerCase()];if(!i){const r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return Zu(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(s[1]||s[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const r=[...s[0]].length-1;let o,a,l=r,c=0;const u=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+r);(s=u.exec(t))!=null;){if(o=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!o)continue;if(a=[...o].length,s[3]||s[4]){l+=a;continue}else if((s[5]||s[6])&&r%3&&!((r+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);const f=[...s[0]][0].length,h=e.slice(0,r+s.index+f+a);if(Math.min(r,a)%2){const g=h.slice(1,-1);return{type:"em",raw:h,text:g,tokens:this.lexer.inlineTokens(g)}}const d=h.slice(2,-2);return{type:"strong",raw:h,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," ");const s=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return s&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,s;return t[2]==="@"?(n=t[1],s="mailto:"+n):(n=t[1],s=n),{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let s,i;if(t[2]==="@")s=t[0],i="mailto:"+s;else{let r;do r=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(r!==t[0]);s=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},an=class Ea{constructor(t){W(this,"tokens");W(this,"options");W(this,"state");W(this,"tokenizer");W(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Jn,this.options.tokenizer=this.options.tokenizer||new Dr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:se,block:Zi.normal,inline:Fs.normal};this.options.pedantic?(n.block=Zi.pedantic,n.inline=Fs.pedantic):this.options.gfm&&(n.block=Zi.gfm,this.options.breaks?n.inline=Fs.breaks:n.inline=Fs.gfm),this.tokenizer.rules=n}static get rules(){return{block:Zi,inline:Fs}}static lex(t,n){return new Ea(n).lex(t)}static lexInline(t,n){return new Ea(n).inlineTokens(t)}lex(t){t=t.replace(se.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const s=this.inlineQueue[n];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],s=!1){var i,r,o;for(this.options.pedantic&&(t=t.replace(se.tabCharGlobal,"    ").replace(se.spaceLine,""));t;){let a;if((r=(i=this.options.extensions)==null?void 0:i.block)!=null&&r.some(c=>(a=c.call({lexer:this},t,n))?(t=t.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);const c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),n.push(a);continue}let l=t;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0;const u=t.slice(1);let f;this.options.extensions.startBlock.forEach(h=>{f=h.call({lexer:this},u),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const c=n.at(-1);s&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),s=l.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(t){const c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var a,l,c;let s=t,i=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,i.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let r=!1,o="";for(;t;){r||(o=""),r=!1;let u;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(h=>(u=h.call({lexer:this},t,n))?(t=t.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(u.raw.length);const h=n.at(-1);u.type==="text"&&(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(t,s,o)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(t)){t=t.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(t))){t=t.substring(u.raw.length),n.push(u);continue}let f=t;if((c=this.options.extensions)!=null&&c.startInline){let h=1/0;const d=t.slice(1);let g;this.options.extensions.startInline.forEach(m=>{g=m.call({lexer:this},d),typeof g=="number"&&g>=0&&(h=Math.min(h,g))}),h<1/0&&h>=0&&(f=t.substring(0,h+1))}if(u=this.tokenizer.inlineText(f)){t=t.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),r=!0;const h=n.at(-1);(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):n.push(u);continue}if(t){const h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return n}},$r=class{constructor(e){W(this,"options");W(this,"parser");this.options=e||Jn}space(e){return""}code({text:e,lang:t,escaped:n}){var r;const s=(r=(t||"").match(se.notSpaceStart))==null?void 0:r[0],i=e.replace(se.endingNewline,"")+`
`;return s?'<pre><code class="language-'+Ve(s)+'">'+(n?i:Ve(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Ve(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,n=e.start;let s="";for(let o=0;o<e.items.length;o++){const a=e.items[o];s+=this.listitem(a)}const i=t?"ol":"ul",r=t&&n!==1?' start="'+n+'"':"";return"<"+i+r+`>
`+s+"</"+i+`>
`}listitem(e){var n;let t="";if(e.task){const s=this.checkbox({checked:!!e.checked});e.loose?((n=e.tokens[0])==null?void 0:n.type)==="paragraph"?(e.tokens[0].text=s+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=s+" "+Ve(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):t+=s+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let s="";for(let i=0;i<e.rows.length;i++){const r=e.rows[i];n="";for(let o=0;o<r.length;o++)n+=this.tablecell(r[o]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Ve(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const s=this.parser.parseInline(n),i=Qu(e);if(i===null)return s;e=i;let r='<a href="'+e+'"';return t&&(r+=' title="'+Ve(t)+'"'),r+=">"+s+"</a>",r}image({href:e,title:t,text:n,tokens:s}){s&&(n=this.parser.parseInline(s,this.parser.textRenderer));const i=Qu(e);if(i===null)return Ve(n);e=i;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${Ve(t)}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Ve(e.text)}},Sl=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},ln=class Aa{constructor(t){W(this,"options");W(this,"renderer");W(this,"textRenderer");this.options=t||Jn,this.options.renderer=this.options.renderer||new $r,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Sl}static parse(t,n){return new Aa(n).parse(t)}static parseInline(t,n){return new Aa(n).parseInline(t)}parse(t,n=!0){var i,r;let s="";for(let o=0;o<t.length;o++){const a=t[o];if((r=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&r[a.type]){const c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){s+=u||"";continue}}const l=a;switch(l.type){case"space":{s+=this.renderer.space(l);continue}case"hr":{s+=this.renderer.hr(l);continue}case"heading":{s+=this.renderer.heading(l);continue}case"code":{s+=this.renderer.code(l);continue}case"table":{s+=this.renderer.table(l);continue}case"blockquote":{s+=this.renderer.blockquote(l);continue}case"list":{s+=this.renderer.list(l);continue}case"html":{s+=this.renderer.html(l);continue}case"paragraph":{s+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;o+1<t.length&&t[o+1].type==="text";)c=t[++o],u+=`
`+this.renderer.text(c);n?s+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):s+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return s}parseInline(t,n=this.renderer){var i,r;let s="";for(let o=0;o<t.length;o++){const a=t[o];if((r=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&r[a.type]){const c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){s+=c||"";continue}}const l=a;switch(l.type){case"escape":{s+=n.text(l);break}case"html":{s+=n.html(l);break}case"link":{s+=n.link(l);break}case"image":{s+=n.image(l);break}case"strong":{s+=n.strong(l);break}case"em":{s+=n.em(l);break}case"codespan":{s+=n.codespan(l);break}case"br":{s+=n.br(l);break}case"del":{s+=n.del(l);break}case"text":{s+=n.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return s}},qo,ur=(qo=class{constructor(e){W(this,"options");W(this,"block");this.options=e||Jn}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?an.lex:an.lexInline}provideParser(){return this.block?ln.parse:ln.parseInline}},W(qo,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),qo),L1=class{constructor(...e){W(this,"defaults",gl());W(this,"options",this.setOptions);W(this,"parse",this.parseMarkdown(!0));W(this,"parseInline",this.parseMarkdown(!1));W(this,"Parser",ln);W(this,"Renderer",$r);W(this,"TextRenderer",Sl);W(this,"Lexer",an);W(this,"Tokenizer",Dr);W(this,"Hooks",ur);this.use(...e)}walkTokens(e,t){var s,i;let n=[];for(const r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{const o=r;for(const a of o.header)n=n.concat(this.walkTokens(a.tokens,t));for(const a of o.rows)for(const l of a)n=n.concat(this.walkTokens(l.tokens,t));break}case"list":{const o=r;n=n.concat(this.walkTokens(o.items,t));break}default:{const o=r;(i=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&i[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{const l=o[a].flat(1/0);n=n.concat(this.walkTokens(l,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const s={...n};if(s.async=this.defaults.async||s.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const r=t.renderers[i.name];r?t.renderers[i.name]=function(...o){let a=i.renderer.apply(this,o);return a===!1&&(a=r.apply(this,o)),a}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const r=t[i.level];r?r.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),s.extensions=t),n.renderer){const i=this.defaults.renderer||new $r(this.defaults);for(const r in n.renderer){if(!(r in i))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;const o=r,a=n.renderer[o],l=i[o];i[o]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u||""}}s.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new Dr(this.defaults);for(const r in n.tokenizer){if(!(r in i))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;const o=r,a=n.tokenizer[o],l=i[o];i[o]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}s.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new ur;for(const r in n.hooks){if(!(r in i))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;const o=r,a=n.hooks[o],l=i[o];ur.passThroughHooks.has(r)?i[o]=c=>{if(this.defaults.async)return Promise.resolve(a.call(i,c)).then(f=>l.call(i,f));const u=a.call(i,c);return l.call(i,u)}:i[o]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}s.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,r=n.walkTokens;s.walkTokens=function(o){let a=[];return a.push(r.call(this,o)),i&&(a=a.concat(i.call(this,o))),a}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return an.lex(e,t??this.defaults)}parser(e,t){return ln.parse(e,t??this.defaults)}parseMarkdown(e){return(n,s)=>{const i={...s},r={...this.defaults,...i},o=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));r.hooks&&(r.hooks.options=r,r.hooks.block=e);const a=r.hooks?r.hooks.provideLexer():e?an.lex:an.lexInline,l=r.hooks?r.hooks.provideParser():e?ln.parse:ln.parseInline;if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(n):n).then(c=>a(c,r)).then(c=>r.hooks?r.hooks.processAllTokens(c):c).then(c=>r.walkTokens?Promise.all(this.walkTokens(c,r.walkTokens)).then(()=>c):c).then(c=>l(c,r)).then(c=>r.hooks?r.hooks.postprocess(c):c).catch(o);try{r.hooks&&(n=r.hooks.preprocess(n));let c=a(n,r);r.hooks&&(c=r.hooks.processAllTokens(c)),r.walkTokens&&this.walkTokens(c,r.walkTokens);let u=l(c,r);return r.hooks&&(u=r.hooks.postprocess(u)),u}catch(c){return o(c)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+Ve(n.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(n);throw n}}},Yn=new L1;function dt(e,t){return Yn.parse(e,t)}dt.options=dt.setOptions=function(e){return Yn.setOptions(e),dt.defaults=Yn.defaults,Zd(dt.defaults),dt};dt.getDefaults=gl;dt.defaults=Jn;dt.use=function(...e){return Yn.use(...e),dt.defaults=Yn.defaults,Zd(dt.defaults),dt};dt.walkTokens=function(e,t){return Yn.walkTokens(e,t)};dt.parseInline=Yn.parseInline;dt.Parser=ln;dt.parser=ln.parse;dt.Renderer=$r;dt.TextRenderer=Sl;dt.Lexer=an;dt.lexer=an.lex;dt.Tokenizer=Dr;dt.Hooks=ur;dt.parse=dt;dt.options;dt.setOptions;dt.use;dt.walkTokens;dt.parseInline;ln.parse;an.lex;const D1={class:"dashboard-container"},$1={key:0,class:"loading-state"},N1={key:1,class:"error-state alert alert-danger"},F1={key:2,class:"content-wrapper"},B1={class:"dashboard-grid"},z1={class:"chart-card card"},H1={class:"chart-wrapper"},j1={class:"chart-card card"},V1={class:"chart-wrapper"},U1={class:"ai-analysis-section card"},W1={class:"ai-header"},q1=["disabled"],K1={key:0},G1={key:1},Y1={class:"ai-content"},X1={key:0,class:"loading-tip-small"},Q1={key:1,class:"alert alert-danger"},J1=["innerHTML"],Z1={key:3,class:"placeholder"},tS={__name:"DashboardView",setup(e){oo.register(Wx,Zx,Vx,Us,ba);const t=vs(),n=Ct(()=>t.state.loading),s=Ct(()=>t.state.error),i=Ct(()=>t.state.stats),r=vt(!1),o=vt(null),a=vt(""),l=async()=>{var h,d;if(i.value){r.value=!0,o.value=null,a.value="";try{const g=await ae.stats.getAIAnalysis(i.value);a.value=g.data.analysis_text}catch(g){o.value=((d=(h=g.response)==null?void 0:h.data)==null?void 0:d.detail)||g.message||"未知错误"}finally{r.value=!1}}},c=h=>dt(h),u=(h,d)=>!h||!h.labels||!h.values?{labels:[],datasets:[]}:{labels:h.labels,datasets:[{label:d,backgroundColor:["#42A5F5","#66BB6A","#FFA726","#26A69A","#AB47BC","#FF7043","#8D6E63","#EC407A","#78909C"],data:h.values}]},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1}}};return xs(()=>{t.dispatch("fetchStats")}),(h,d)=>(L(),B("div",D1,[d[5]||(d[5]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-chart-pie"}),nt(" 数据分析")]),p("p",null,"查看系统关键指标，并获取AI智能分析洞察。")],-1)),n.value?(L(),B("div",$1,[ut(wi,{message:"正在加载统计数据..."})])):Tt("",!0),s.value?(L(),B("div",N1," 加载数据时出错: "+G(s.value),1)):Tt("",!0),i.value&&!n.value?(L(),B("div",F1,[p("div",B1,[p("div",z1,[d[0]||(d[0]=p("h3",null,"用户年龄分布",-1)),p("div",H1,[i.value.ageData?(L(),fi(kn(pv),{key:0,data:u(i.value.ageData,"年龄分布"),options:f},null,8,["data"])):Tt("",!0)])]),p("div",j1,[d[1]||(d[1]=p("h3",null,"用户性别分布",-1)),p("div",V1,[i.value.genderData?(L(),fi(kn(dv),{key:0,data:u(i.value.genderData,"性别分布"),options:f},null,8,["data"])):Tt("",!0)])])]),p("div",U1,[p("div",W1,[d[4]||(d[4]=p("h3",null,[p("i",{class:"fas fa-robot"}),nt(" AI 智能分析")],-1)),p("button",{onClick:l,class:"btn btn-primary",disabled:r.value},[r.value?(L(),B("span",K1,d[2]||(d[2]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 分析中...")]))):(L(),B("span",G1,d[3]||(d[3]=[p("i",{class:"fas fa-play-circle"},null,-1),nt(" 启动 AI 分析")])))],8,q1)]),p("div",Y1,[r.value?(L(),B("div",X1,[ut(wi,{message:"AI 正在深度解读数据，请稍候..."})])):o.value?(L(),B("div",Q1," AI 分析失败: "+G(o.value),1)):a.value?(L(),B("div",{key:2,class:"markdown-content",innerHTML:c(a.value)},null,8,J1)):(L(),B("div",Z1," 点击“启动 AI 分析”按钮，获取关于当前数据的智能洞察和建议。 "))])])])):Tt("",!0)]))}},eS=Wt(tS,[["__scopeId","data-v-64f9f4b0"]]),nS={name:"UserManagementView",computed:{...no(["users","totalUsers","loading","error"])},methods:{...so(["fetchUsers"]),async toggleUserStatus(e){if(confirm(`您确定要“${e.is_active?"禁用":"激活"}”用户 ${e.username} 吗？`))try{await this.$store.dispatch("updateUserStatus",{userId:e.id,isActive:!e.is_active}),alert(`用户 ${e.username} 已成功${e.is_active?"禁用":"激活"}！`),this.fetchUsers({skip:0,limit:100})}catch(n){alert(`操作失败: ${n.message}`)}}},created(){this.fetchUsers({skip:0,limit:100})}},sS={class:"user-management-container"},iS={class:"card"},rS={key:0,class:"loading-indicator"},oS={key:1,class:"error-display"},aS={key:2},lS={class:"table-meta"},cS={class:"table-wrapper"},uS=["onClick"];function fS(e,t,n,s,i,r){return L(),B("div",sS,[t[5]||(t[5]=p("header",{class:"page-header"},[p("h1",null,[p("i",{class:"fas fa-users-cog"}),nt(" 用户管理")]),p("p",null,"管理系统中的所有用户账户。")],-1)),p("div",iS,[e.loading?(L(),B("div",rS,t[0]||(t[0]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),p("span",null,"正在加载用户数据...",-1)]))):e.error?(L(),B("div",oS,[t[1]||(t[1]=p("i",{class:"fas fa-exclamation-triangle"},null,-1)),p("span",null,G(e.error),1)])):(L(),B("div",aS,[p("div",lS,[t[2]||(t[2]=nt(" 总计：")),p("strong",null,G(e.totalUsers),1),t[3]||(t[3]=nt(" 位用户 "))]),p("div",cS,[p("table",null,[t[4]||(t[4]=p("thead",null,[p("tr",null,[p("th",null,"ID"),p("th",null,"用户名"),p("th",null,"邮箱"),p("th",null,"全名"),p("th",null,"管理员"),p("th",null,"状态"),p("th",null,"操作")])],-1)),p("tbody",null,[(L(!0),B(jt,null,qn(e.users,o=>(L(),B("tr",{key:o.id},[p("td",null,G(o.id),1),p("td",null,G(o.username),1),p("td",null,G(o.email||"未设置"),1),p("td",null,G(o.full_name||"未设置"),1),p("td",null,[p("span",{class:Ce(["status-tag",o.is_superuser?"status-superuser":""])},G(o.is_superuser?"是":"否"),3)]),p("td",null,[p("span",{class:Ce(["status-tag",o.is_active?"status-active":"status-inactive"])},G(o.is_active?"已激活":"已禁用"),3)]),p("td",null,[p("button",{onClick:a=>r.toggleUserStatus(o),class:Ce(["btn btn-small",o.is_active?"btn-danger":"btn-primary"])},G(o.is_active?"禁用":"激活"),11,uS)])]))),128))])])])]))])])}const hS=Wt(nS,[["render",fS],["__scopeId","data-v-32258da0"]]),dS={name:"AssessmentSearchView",data(){return{searchIdCard:"",searched:!1}},computed:{...no(["assessments","loading","error"])},methods:{...so(["searchAssessments"]),handleSearch(){this.searched=!0,this.searchAssessments(this.searchIdCard.trim()||null)},viewReport(e){this.$router.push({name:"ReportDetail",params:{id:e}})},formatStatus(e){return{pending:"待处理",processing:"处理中",complete:"已完成",failed:"失败"}[e]||e},getStatusClass(e){return`status-${e}`}},created(){this.$store.commit("CLEAR_ERROR"),this.searchAssessments(null)}},pS={class:"assessment-search-container"},gS={class:"card search-card"},mS={class:"form-group"},bS=["disabled"],_S={class:"card result-card"},yS={key:0,class:"loading-indicator"},xS={key:1,class:"error-display"},vS={key:2,class:"empty-state"},wS={key:3,class:"empty-state"},SS={key:4,class:"table-wrapper"},kS=["onClick"];function RS(e,t,n,s,i,r){return L(),B("div",pS,[t[9]||(t[9]=p("header",{class:"page-header"},[p("h1",null,[p("i",{class:"fas fa-search"}),nt(" 评估查询")]),p("p",null,"通过身份证号查询历史评估记录，或查看所有最新记录。")],-1)),p("div",gS,[p("form",{onSubmit:t[1]||(t[1]=Oi((...o)=>r.handleSearch&&r.handleSearch(...o),["prevent"])),class:"search-form"},[p("div",mS,[t[2]||(t[2]=p("label",{for:"idCardSearch"},"身份证号 (可选)",-1)),Ft(p("input",{type:"text",id:"idCardSearch","onUpdate:modelValue":t[0]||(t[0]=o=>i.searchIdCard=o),placeholder:"输入身份证号进行精确查询"},null,512),[[te,i.searchIdCard]])]),p("button",{type:"submit",class:"btn btn-primary",disabled:e.loading},[t[3]||(t[3]=p("i",{class:"fas fa-search"},null,-1)),nt(" "+G(e.loading?"查询中...":"查 询"),1)],8,bS)],32)]),p("div",_S,[e.loading?(L(),B("div",yS,t[4]||(t[4]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),p("span",null,"正在加载数据...",-1)]))):e.error?(L(),B("div",xS,[t[5]||(t[5]=p("i",{class:"fas fa-exclamation-triangle"},null,-1)),p("span",null,G(e.error),1)])):!i.searched&&e.assessments.length===0?(L(),B("div",vS,t[6]||(t[6]=[p("i",{class:"fas fa-info-circle"},null,-1),p("p",null,"默认显示最新评估记录。您也可以输入身份证号进行精确查询。",-1)]))):e.assessments.length===0?(L(),B("div",wS,t[7]||(t[7]=[p("i",{class:"fas fa-file-excel"},null,-1),p("p",null,"未找到与查询条件匹配的评估记录。",-1)]))):(L(),B("div",SS,[p("table",null,[t[8]||(t[8]=p("thead",null,[p("tr",null,[p("th",null,"评估ID"),p("th",null,"被测者姓名"),p("th",null,"量表类型"),p("th",null,"评估状态"),p("th",null,"创建时间"),p("th",null,"操作")])],-1)),p("tbody",null,[(L(!0),B(jt,null,qn(e.assessments,o=>(L(),B("tr",{key:o.id},[p("td",null,G(o.id),1),p("td",null,G(o.subject_name),1),p("td",null,G(o.questionnaire_type||"仅图片"),1),p("td",null,[p("span",{class:Ce(["status-tag",r.getStatusClass(o.status)])},G(r.formatStatus(o.status)),3)]),p("td",null,G(new Date(o.created_at).toLocaleString("zh-CN")),1),p("td",null,[p("button",{class:"btn btn-small",onClick:a=>r.viewReport(o.id)}," 查看报告 ",8,kS)])]))),128))])])]))])])}const ES=Wt(dS,[["render",RS],["__scopeId","data-v-4e6e8926"]]),AS={key:0,class:"form-card card"},TS={class:"form-group"},CS={key:0,class:"alert alert-danger"},OS=["disabled"],PS={key:0},MS={key:1},IS={key:1,class:"result-container"},LS={class:"report-section card"},DS={class:"guidance-section card"},$S=["innerHTML"],NS={__name:"GuidanceForm",props:{scenario:{type:String,required:!0}},setup(e){const t=e,n=vs(),s=vt(""),i=vt(null),r=vt(!1),o=vt(null),a=async()=>{r.value=!0,o.value=null,i.value=null;try{const u=await n.dispatch("fetchGuidance",{scenario:t.scenario,idCard:s.value});i.value={report_text:u.report.report_text,guidance:u.guidance}}catch(u){o.value=u.message||"获取指导方案失败。"}finally{r.value=!1}},l=u=>u?dt(u):"",c=()=>{i.value=null,s.value="",o.value=null};return(u,f)=>(L(),B("div",null,[i.value?Tt("",!0):(L(),B("div",AS,[p("form",{onSubmit:Oi(a,["prevent"])},[p("div",TS,[f[1]||(f[1]=p("label",{for:"id_card"},"请输入查询对象的身份证号:",-1)),Ft(p("input",{type:"text",id:"id_card","onUpdate:modelValue":f[0]||(f[0]=h=>s.value=h),placeholder:"输入身份证号进行查询",required:""},null,512),[[te,s.value]])]),o.value?(L(),B("div",CS,G(o.value),1)):Tt("",!0),p("button",{type:"submit",class:"btn btn-primary",disabled:r.value},[r.value?(L(),B("span",PS,f[2]||(f[2]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 查询中...")]))):(L(),B("span",MS,f[3]||(f[3]=[p("i",{class:"fas fa-search"},null,-1),nt(" 查询并生成方案")])))],8,OS)],32)])),i.value?(L(),B("div",IS,[p("div",LS,[f[4]||(f[4]=p("h3",null,[p("i",{class:"fas fa-file-invoice"}),nt(" 关联心理评估报告")],-1)),p("pre",null,G(i.value.report_text),1)]),p("div",DS,[f[5]||(f[5]=p("h3",null,[p("i",{class:"fas fa-lightbulb"}),nt(" AI 生成指导方案")],-1)),p("div",{class:"markdown-content",innerHTML:l(i.value.guidance)},null,8,$S)]),p("button",{onClick:c,class:"btn btn-secondary"},"返回重新查询")])):Tt("",!0)]))}},kl=Wt(NS,[["__scopeId","data-v-3a737590"]]),FS={class:"guidance-container"},BS={__name:"PetitionerGuidanceView",setup(e){return(t,n)=>(L(),B("div",FS,[n[0]||(n[0]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-hand-holding-heart"}),nt(" 上访户情绪疏导")]),p("p",null,"输入上访户信息以查询评估报告，并生成针对性的情绪疏导方案。")],-1)),ut(kl,{scenario:"petitioner"})]))}},zS=Wt(BS,[["__scopeId","data-v-c23f7b56"]]),HS={class:"guidance-container"},jS={__name:"JuvenileCounselingView",setup(e){return(t,n)=>(L(),B("div",HS,[n[0]||(n[0]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-child"}),nt(" 未成年人心理辅导")]),p("p",null,"输入未成年人信息以查询评估报告，并生成定制化的心理辅导方案。")],-1)),ut(kl,{scenario:"juvenile"})]))}},VS=Wt(jS,[["__scopeId","data-v-2a20f843"]]),US={class:"guidance-container"},WS={__name:"PoliceAdjustmentView",setup(e){return(t,n)=>(L(),B("div",US,[n[0]||(n[0]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-shield-alt"}),nt(" 民辅警心理调适")]),p("p",null,"输入民辅警信息以查询评估报告，并获取专业的心理调适建议。")],-1)),ut(kl,{scenario:"police"})]))}},qS=Wt(WS,[["__scopeId","data-v-c5a5a863"]]),KS={name:"ReportDetailView",props:{id:{type:[String,Number],required:!0}},computed:{...no({report:e=>e.currentReport,loading:e=>e.loading,error:e=>e.error})},methods:{...so(["fetchReportById"]),renderMarkdown(e){return e?dt(e):"<p>报告内容为空。</p>"}},created(){this.fetchReportById(this.id)},beforeRouteUpdate(e,t,n){this.fetchReportById(e.params.id),n()}},GS={class:"report-detail-container"},YS={class:"page-header"},XS={key:0},QS={key:0,class:"loading-indicator"},JS={key:1,class:"error-display"},ZS={key:2,class:"report-layout"},tk={class:"card info-panel"},ek={class:"main-panel"},nk={class:"card report-content-card"},sk=["innerHTML"],ik={class:"card tags-card"},rk={key:0,class:"tags-container"},ok={key:1,class:"no-tags"};function ak(e,t,n,s,i,r){return L(),B("div",GS,[p("header",YS,[t[0]||(t[0]=p("h1",null,[p("i",{class:"fas fa-file-invoice"}),nt(" 评估报告详情")],-1)),e.report?(L(),B("p",XS,"报告 ID: "+G(e.report.id)+" | 被测者: "+G(e.report.subject_name),1)):Tt("",!0)]),e.loading?(L(),B("div",QS,t[1]||(t[1]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),p("span",null,"正在加载报告...",-1)]))):e.error?(L(),B("div",JS,[t[2]||(t[2]=p("i",{class:"fas fa-exclamation-triangle"},null,-1)),p("span",null,G(e.error),1)])):e.report?(L(),B("div",ZS,[p("div",tk,[t[11]||(t[11]=p("h3",null,[p("i",{class:"fas fa-user-circle"}),nt(" 基础信息")],-1)),p("ul",null,[p("li",null,[t[3]||(t[3]=p("strong",null,"姓名:",-1)),nt(" "+G(e.report.subject_name),1)]),p("li",null,[t[4]||(t[4]=p("strong",null,"年龄:",-1)),nt(" "+G(e.report.age),1)]),p("li",null,[t[5]||(t[5]=p("strong",null,"性别:",-1)),nt(" "+G(e.report.gender),1)]),p("li",null,[t[6]||(t[6]=p("strong",null,"身份证号:",-1)),nt(" "+G(e.report.id_card||"未提供"),1)]),p("li",null,[t[7]||(t[7]=p("strong",null,"职业:",-1)),nt(" "+G(e.report.occupation||"未提供"),1)]),p("li",null,[t[8]||(t[8]=p("strong",null,"案件名称:",-1)),nt(" "+G(e.report.case_name||"未提供"),1)]),p("li",null,[t[9]||(t[9]=p("strong",null,"量表类型:",-1)),nt(" "+G(e.report.questionnaire_type||"仅图片分析"),1)]),p("li",null,[t[10]||(t[10]=p("strong",null,"提交时间:",-1)),nt(" "+G(new Date(e.report.created_at).toLocaleString("zh-CN")),1)])])]),p("div",ek,[p("div",nk,[t[12]||(t[12]=p("h3",null,[p("i",{class:"fas fa-brain"}),nt(" AI 综合分析报告")],-1)),p("div",{class:"markdown-content",innerHTML:r.renderMarkdown(e.report.report_text)},null,8,sk)]),p("div",ik,[t[13]||(t[13]=p("h3",null,[p("i",{class:"fas fa-tags"}),nt(" 关联属性标签")],-1)),e.report.attributes&&e.report.attributes.length>0?(L(),B("div",rk,[(L(!0),B(jt,null,qn(e.report.attributes,o=>(L(),B("span",{key:o.id,class:"tag"},G(o.name),1))),128))])):(L(),B("p",ok,"暂无关联标签。"))])])])):Tt("",!0)])}const lk=Wt(KS,[["render",ak],["__scopeId","data-v-31cd71dd"]]),ck={name:"InterrogationInputView",data(){return{form:{person_name:"",person_gender:"男",person_age:null,is_minor:!1,person_id_type_number:"",person_address:"",person_contact:"",interrogation_location:"",interrogator_count:null,interrogator_ids:""}}},computed:{...no(["loading","error"])},watch:{"form.person_age"(e){e&&e<18&&(this.form.is_minor=!0)}},methods:{...so(["startInterrogation"]),async handleStart(){if(!this.form.person_name||!this.form.person_gender||!this.form.person_age||!this.form.interrogation_location){alert("请填写所有带 * 的必填项");return}try{const e=await this.startInterrogation(this.form);this.$router.push({name:"InterrogationEdit",params:{id:e.id}})}catch{}}},created(){this.$store.commit("CLEAR_ERROR")}},uk={class:"interrogation-input-container wide-page-container"},fk={class:"card wide-card"},hk={class:"form-row"},dk={class:"form-group"},pk={class:"form-group"},gk={class:"form-row"},mk={class:"form-group"},bk={class:"form-group checkbox-group"},_k={class:"form-group"},yk={class:"form-group"},xk={class:"form-group"},vk={class:"form-group"},wk={class:"form-row"},Sk={class:"form-group"},kk={class:"form-group"},Rk={key:0,class:"error-display"},Ek=["disabled"];function Ak(e,t,n,s,i,r){return L(),B("div",uk,[t[25]||(t[25]=p("header",{class:"page-header"},[p("h1",null,[p("i",{class:"fas fa-keyboard"}),nt(" 智能审讯 - 信息录入")]),p("p",null,"请填写审讯相关的基础信息以创建笔录。")],-1)),p("div",fk,[p("form",{onSubmit:t[10]||(t[10]=Oi((...o)=>r.handleStart&&r.handleStart(...o),["prevent"]))},[t[23]||(t[23]=p("h3",{class:"form-section-title"},"被讯问人信息",-1)),p("div",hk,[p("div",dk,[t[11]||(t[11]=p("label",{for:"name"},[nt("姓名 "),p("span",{class:"required"},"*")],-1)),Ft(p("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>i.form.person_name=o),required:""},null,512),[[te,i.form.person_name]])]),p("div",pk,[t[13]||(t[13]=p("label",{for:"gender"},[nt("性别 "),p("span",{class:"required"},"*")],-1)),Ft(p("select",{id:"gender","onUpdate:modelValue":t[1]||(t[1]=o=>i.form.person_gender=o),required:""},t[12]||(t[12]=[p("option",{value:"男"},"男",-1),p("option",{value:"女"},"女",-1)]),512),[[Om,i.form.person_gender]])])]),p("div",gk,[p("div",mk,[t[14]||(t[14]=p("label",{for:"age"},[nt("年龄 "),p("span",{class:"required"},"*")],-1)),Ft(p("input",{type:"number",id:"age","onUpdate:modelValue":t[2]||(t[2]=o=>i.form.person_age=o),required:"",min:"0"},null,512),[[te,i.form.person_age,void 0,{number:!0}]])]),p("div",bk,[Ft(p("input",{type:"checkbox",id:"is_minor","onUpdate:modelValue":t[3]||(t[3]=o=>i.form.is_minor=o)},null,512),[[Cm,i.form.is_minor]]),t[15]||(t[15]=p("label",{for:"is_minor"},"是否未成年",-1))])]),p("div",_k,[t[16]||(t[16]=p("label",{for:"id_card"},"身份证号",-1)),Ft(p("input",{type:"text",id:"id_card","onUpdate:modelValue":t[4]||(t[4]=o=>i.form.person_id_type_number=o)},null,512),[[te,i.form.person_id_type_number]])]),p("div",yk,[t[17]||(t[17]=p("label",{for:"address"},"家庭住址",-1)),Ft(p("input",{type:"text",id:"address","onUpdate:modelValue":t[5]||(t[5]=o=>i.form.person_address=o)},null,512),[[te,i.form.person_address]])]),p("div",xk,[t[18]||(t[18]=p("label",{for:"contact"},"联系方式",-1)),Ft(p("input",{type:"text",id:"contact","onUpdate:modelValue":t[6]||(t[6]=o=>i.form.person_contact=o)},null,512),[[te,i.form.person_contact]])]),t[24]||(t[24]=p("h3",{class:"form-section-title"},"审讯信息",-1)),p("div",vk,[t[19]||(t[19]=p("label",{for:"location"},[nt("审讯地点 "),p("span",{class:"required"},"*")],-1)),Ft(p("input",{type:"text",id:"location","onUpdate:modelValue":t[7]||(t[7]=o=>i.form.interrogation_location=o),required:""},null,512),[[te,i.form.interrogation_location]])]),p("div",wk,[p("div",Sk,[t[20]||(t[20]=p("label",{for:"interrogator_count"},"讯问人员数量",-1)),Ft(p("input",{type:"number",id:"interrogator_count","onUpdate:modelValue":t[8]||(t[8]=o=>i.form.interrogator_count=o),min:"1"},null,512),[[te,i.form.interrogator_count,void 0,{number:!0}]])]),p("div",kk,[t[21]||(t[21]=p("label",{for:"interrogator_ids"},"讯问人员警号",-1)),Ft(p("input",{type:"text",id:"interrogator_ids","onUpdate:modelValue":t[9]||(t[9]=o=>i.form.interrogator_ids=o),placeholder:"多个警号用逗号分隔"},null,512),[[te,i.form.interrogator_ids]])])]),e.error?(L(),B("div",Rk,G(e.error),1)):Tt("",!0),p("button",{type:"submit",class:"btn btn-primary",disabled:e.loading},[t[22]||(t[22]=p("i",{class:"fas fa-play-circle"},null,-1)),nt(" "+G(e.loading?"正在创建...":"创建笔录并开始"),1)],8,Ek)],32)])])}const Tk=Wt(ck,[["render",Ak],["__scopeId","data-v-0ab77df9"]]),Ck={class:"editor-page-container"},Ok={class:"page-header"},Pk={key:0,class:"subtitle"},Mk={key:0,class:"loading-state"},Ik={key:1,class:"error-state alert alert-danger"},Lk={key:2,class:"editor-main-content"},Dk={class:"qa-list-panel"},$k={class:"qa-header"},Nk=["onClick"],Fk={class:"qa-grid"},Bk={class:"form-group"},zk=["for"],Hk=["id","onUpdate:modelValue"],jk={class:"form-group"},Vk=["for"],Uk=["id","onUpdate:modelValue"],Wk={class:"sidebar-actions"},qk={class:"action-card"},Kk=["disabled"],Gk={key:0},Yk={key:1},Xk={class:"suggestions-content-wrapper"},Qk={key:0,class:"loading-tip-small"},Jk={key:1,class:"alert alert-danger"},Zk={key:2,class:"suggestions-list"},tR=["onClick"],eR={class:"page-footer"},nR=["disabled"],sR={key:0},iR={key:1},rR={__name:"InterrogationEditView",setup(e){const t=vs(),n=Ph(),s=to(),i=vt([]),r=vt(null),o=vt(!0),a=vt(!1),l=vt(null),c=vt([]),u=vt(!1),f=vt(null),h=vt(!1),d=vt(""),g=vt("success"),m=Ct(()=>n.params.id),b=(P,D="success",N=3e3)=>{d.value=P,g.value=D,h.value=!0,setTimeout(()=>{h.value=!1},N)},x=async()=>{o.value=!0,l.value=null;try{let P=t.state.interrogationRecord;if((!P||P.id!=m.value)&&(P=await t.dispatch("fetchInterrogationRecordById",m.value)),P)i.value=JSON.parse(JSON.stringify(P.qas||[])),r.value=JSON.parse(JSON.stringify(P.basic_info||{}));else throw new Error("未能加载到审讯记录数据。")}catch(P){l.value=P.message||"加载审讯记录失败。",console.error(P)}finally{o.value=!1}},v=()=>{i.value.push({q:"",a:"",id:Date.now()})},S=P=>{i.value.splice(P,1)},k=async()=>{u.value=!0,f.value=null,c.value=[];try{const P=await t.dispatch("suggestQuestion",{recordId:m.value,currentQAs:i.value.filter(D=>D.q.trim()!==""||D.a.trim()!=="")});c.value=P}catch(P){f.value=P.message||"获取建议时发生未知错误。",console.error(P)}finally{u.value=!1}},C=P=>{i.value.push({q:P,a:"",id:Date.now()})},$=async()=>{a.value=!0,l.value=null;try{const P={qas:i.value,basic_info:r.value};await t.dispatch("saveInterrogation",{recordId:m.value,updateData:P}),b("审讯笔录已成功保存！","success",2e3),setTimeout(()=>{s.push({name:"InterrogationList"})},2100)}catch(P){const D=P.message||"保存失败，请检查网络或联系管理员。";b(D,"error",4e3),console.error(P)}finally{a.value=!1}};return xs(()=>{x()}),(P,D)=>(L(),B("div",Ck,[p("div",Ok,[D[0]||(D[0]=p("h2",null,"审讯笔录编辑",-1)),r.value?(L(),B("p",Pk," 被讯问人: "+G(r.value.person_name||"未知")+" | 记录ID: "+G(m.value),1)):Tt("",!0)]),o.value?(L(),B("div",Mk,[ut(wi,{message:"正在加载审讯记录..."})])):Tt("",!0),l.value?(L(),B("div",Ik," 加载记录时出错: "+G(l.value),1)):Tt("",!0),!o.value&&!l.value?(L(),B("div",Lk,[p("div",Dk,[(L(!0),B(jt,null,qn(i.value,(N,H)=>(L(),B("div",{key:N.id||H,class:"qa-pair"},[p("div",$k,[p("h4",null,"第 "+G(H+1)+" 组问答",1),p("button",{onClick:K=>S(H),class:"btn-remove",title:"删除此问答对"},D[1]||(D[1]=[p("i",{class:"fas fa-times"},null,-1)]),8,Nk)]),p("div",Fk,[p("div",Bk,[p("label",{for:"question-"+H},"问题",8,zk),Ft(p("textarea",{id:"question-"+H,"onUpdate:modelValue":K=>N.q=K,class:"form-control",rows:"5",placeholder:"请输入问题..."},null,8,Hk),[[te,N.q]])]),p("div",jk,[p("label",{for:"answer-"+H},"回答",8,Vk),Ft(p("textarea",{id:"answer-"+H,"onUpdate:modelValue":K=>N.a=K,class:"form-control",rows:"5",placeholder:"请输入回答..."},null,8,Uk),[[te,N.a]])])])]))),128)),p("button",{onClick:v,class:"btn btn-add-qa"},D[2]||(D[2]=[p("i",{class:"fas fa-plus"},null,-1),nt(" 添加新问答 ")]))]),p("aside",Wk,[p("div",qk,[D[6]||(D[6]=p("h3",null,[p("i",{class:"fas fa-lightbulb"}),nt(" AI 智能建议")],-1)),p("button",{onClick:k,disabled:u.value,class:"btn btn-primary btn-block"},[u.value?(L(),B("span",Gk,D[3]||(D[3]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 正在获取...")]))):(L(),B("span",Yk,D[4]||(D[4]=[p("i",{class:"fas fa-magic"},null,-1),nt(" 获取AI建议问题")])))],8,Kk),p("div",Xk,[u.value?(L(),B("div",Qk,[ut(wi,{message:"AI思考中..."})])):f.value?(L(),B("div",Jk,G(f.value),1)):c.value.length>0?(L(),B("div",Zk,[D[5]||(D[5]=p("p",null,"点击建议以快速添加：",-1)),(L(!0),B(jt,null,qn(c.value,(N,H)=>(L(),B("button",{key:H,onClick:K=>C(N),class:"suggestion-item"},G(N),9,tR))),128))])):Tt("",!0)])])])])):Tt("",!0),p("div",eR,[p("button",{onClick:$,class:"btn btn-primary btn-lg",disabled:a.value},[a.value?(L(),B("span",sR,D[7]||(D[7]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 正在保存...")]))):(L(),B("span",iR,D[8]||(D[8]=[p("i",{class:"fas fa-save"},null,-1),nt(" 保存笔录")])))],8,nR)]),ut(gh,{name:"toast-fade"},{default:be(()=>[h.value?(L(),B("div",{key:0,class:Ce(["notification-toast",g.value])},[p("i",{class:Ce(g.value==="success"?"fas fa-check-circle":"fas fa-exclamation-circle")},null,2),p("span",null,G(d.value),1)],2)):Tt("",!0)]),_:1})]))}},oR=Wt(rR,[["__scopeId","data-v-ecf0497d"]]),aR={class:"list-container"},lR={key:0,class:"loading-state"},cR={key:1,class:"error-state alert alert-danger"},uR={key:2,class:"card"},fR={class:"record-table"},hR={key:0},dR=["onClick"],pR={key:3,class:"pagination"},gR=["disabled"],mR=["disabled"],bR={__name:"InterrogationListView",setup(e){const t=vs(),n=to(),s=vt(1),i=vt(10),r=Ct(()=>t.state.loading),o=Ct(()=>t.state.error),a=Ct(()=>t.state.interrogationList.records),l=Ct(()=>t.state.interrogationList.total),c=Ct(()=>Math.ceil(l.value/i.value)||1),u=()=>{const b=(s.value-1)*i.value;t.dispatch("fetchInterrogationList",{skip:b,limit:i.value})},f=b=>b?new Date(b).toLocaleString("zh-CN"):"N/A",h=b=>b==="completed"?"status-completed":b==="ongoing"?"status-ongoing":"status-default",d=b=>{n.push({name:"InterrogationEdit",params:{id:b}})},g=()=>{s.value>1&&(s.value--,u())},m=()=>{s.value<c.value&&(s.value++,u())};return xs(()=>{u()}),(b,x)=>(L(),B("div",aR,[x[3]||(x[3]=p("div",{class:"list-header"},[p("h2",null,"审讯记录列表"),p("p",null,"查看、搜索和管理所有已保存的审讯记录。")],-1)),r.value?(L(),B("div",lR,[ut(wi,{message:"正在加载记录列表..."})])):Tt("",!0),o.value?(L(),B("div",cR," 加载列表时出错: "+G(o.value),1)):Tt("",!0),!r.value&&!o.value?(L(),B("div",uR,[p("table",fR,[x[2]||(x[2]=p("thead",null,[p("tr",null,[p("th",null,"记录ID"),p("th",null,"被讯问人"),p("th",null,"案件类型"),p("th",null,"状态"),p("th",null,"创建时间"),p("th",null,"最后更新"),p("th",null,"操作")])],-1)),p("tbody",null,[a.value.length===0?(L(),B("tr",hR,x[0]||(x[0]=[p("td",{colspan:"7",class:"text-center"},"没有找到任何审讯记录。",-1)]))):Tt("",!0),(L(!0),B(jt,null,qn(a.value,v=>(L(),B("tr",{key:v.id},[p("td",null,G(v.id),1),p("td",null,G(v.person_name||"未命名"),1),p("td",null,G(v.case_type||"未分类"),1),p("td",null,[p("span",{class:Ce(["status-badge",h(v.status)])},G(v.status),3)]),p("td",null,G(f(v.created_at)),1),p("td",null,G(f(v.updated_at)),1),p("td",null,[p("button",{onClick:S=>d(v.id),class:"btn btn-primary btn-small"},x[1]||(x[1]=[p("i",{class:"fas fa-edit"},null,-1),nt(" 编辑 ")]),8,dR)])]))),128))])])])):Tt("",!0),!r.value&&l.value>0?(L(),B("div",pR,[p("button",{onClick:g,disabled:s.value===1},"上一页",8,gR),p("span",null,"第 "+G(s.value)+" 页 / 共 "+G(c.value)+" 页 (总计 "+G(l.value)+" 条)",1),p("button",{onClick:m,disabled:s.value===c.value},"下一页",8,mR)])):Tt("",!0)]))}},_R=Wt(bR,[["__scopeId","data-v-28fe950a"]]),yR="https://flk.npc.gov.cn/search.html";function Ze(e){const t=encodeURIComponent(e);return`${yR}?keyword=${t}&keywordType=1`}const tf=[{id:1,name:"中华人民共和国刑法",description:"规定犯罪、刑事责任和刑罚的法律。",link:Ze("中华人民共和国刑法")},{id:2,name:"中华人民共和国治安管理处罚法",description:"关于维护社会治安秩序，保障公共安全的法律。",link:Ze("中华人民共和国治安管理处罚法")},{id:3,name:"中华人民共和国消防法",description:"预防火灾和减少火灾危害，加强应急救援工作的法律。",link:Ze("中华人民共和国消防法")},{id:4,name:"中华人民共和国禁毒法",description:"预防和惩治毒品违法犯罪行为，保护公民身心健康的法律。",link:Ze("中华人民共和国禁毒法")},{id:5,name:"公安机关办理刑事案件程序规定",description:"公安机关办理刑事案件时应当遵守的具体程序规则。",link:Ze("公安机关办理刑事案件程序规定")},{id:6,name:"公安机关适用继续盘问规定",description:"关于公安机关在执法过程中适用继续盘问措施的规定。",link:Ze("公安机关适用继续盘问规定")},{id:7,name:"中华人民共和国刑事诉讼法",description:"进行刑事诉讼必须遵守的基本法律。",link:Ze("中华人民共和国刑事诉讼法")},{id:8,name:"道路交通事故处理程序规定",description:"公安机关交通管理部门处理道路交通事故的程序规定。",link:Ze("道路交通事故处理程序规定")},{id:9,name:"中华人民共和国人民警察法",description:"关于人民警察的性质、任务、职责、权利和义务的法律。",link:Ze("中华人民共和国人民警察法")}],xR={class:"law-query-container"},vR={class:"search-bar card"},wR={class:"law-list"},SR={class:"law-info"},kR={class:"law-name"},RR={class:"law-description"},ER={class:"law-actions"},AR=["href"],TR={key:0,class:"no-results card"},CR={__name:"LawQueryView",setup(e){const t=vt(""),n=Ct(()=>t.value?tf.filter(s=>s.name.toLowerCase().includes(t.value.toLowerCase())):tf);return(s,i)=>(L(),B("div",xR,[i[4]||(i[4]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-balance-scale"}),nt(" 法律法规查询")]),p("p",null,"快速查找常用法律法规，并链接至国家官方数据库。")],-1)),p("div",vR,[i[1]||(i[1]=p("i",{class:"fas fa-search search-icon"},null,-1)),Ft(p("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=r=>t.value=r),placeholder:"输入法规名称进行筛选...",class:"search-input"},null,512),[[te,t.value]])]),p("div",wR,[(L(!0),B(jt,null,qn(n.value,r=>(L(),B("div",{key:r.id,class:"law-item card"},[p("div",SR,[p("h3",kR,G(r.name),1),p("p",RR,G(r.description),1)]),p("div",ER,[p("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",class:"btn btn-primary"},i[2]||(i[2]=[p("i",{class:"fas fa-external-link-alt"},null,-1),nt(" 查看原文 ")]),8,AR)])]))),128)),n.value.length===0?(L(),B("div",TR,i[3]||(i[3]=[p("p",null,"未找到匹配的法规。",-1)]))):Tt("",!0)])]))}},OR=Wt(CR,[["__scopeId","data-v-0279a1d2"]]),PR=[{path:"/login",name:"Login",component:D_},{path:"/",component:w_,meta:{requiresAuth:!0},children:[{path:"",name:"Home",redirect:"/dashboard"},{path:"dashboard",name:"Dashboard",component:eS},{path:"assessment-search",name:"AssessmentSearch",component:ES},{path:"user-management",name:"UserManagement",component:hS},{path:"petitioner-guidance",name:"PetitionerGuidance",component:zS},{path:"juvenile-counseling",name:"JuvenileCounseling",component:VS},{path:"police-adjustment",name:"PoliceAdjustment",component:qS},{path:"report/:id",name:"ReportDetail",component:lk,props:!0},{path:"interrogation/new",name:"InterrogationInput",component:Tk},{path:"interrogation/:id/edit",name:"InterrogationEdit",component:oR,props:!0},{path:"interrogation/list",name:"InterrogationList",component:_R},{path:"law-query",name:"LawQuery",component:OR}]}],Nr=Xb({history:Rb("/admin/"),routes:PR});Nr.beforeEach((e,t,n)=>{const s=localStorage.getItem("admin_token");e.matched.some(r=>r.meta.requiresAuth)&&!s?n({name:"Login"}):e.name==="Login"&&s?n({name:"Dashboard"}):n()});const MR=d_({state:{token:localStorage.getItem("admin_token")||null,user:null,users:[],totalUsers:0,assessments:[],stats:null,currentGuidance:null,currentReport:null,interrogationRecord:null,interrogationList:{records:[],total:0},loading:!1,error:null},getters:{isAuthenticated:e=>!!e.token,currentUser:e=>e.user},mutations:{SET_TOKEN(e,t){e.token=t,t?localStorage.setItem("admin_token",t):localStorage.removeItem("admin_token")},SET_USER(e,t){e.user=t},SET_USERS(e,{users:t,total:n}){e.users=t,e.totalUsers=n},SET_ASSESSMENTS(e,t){e.assessments=t},SET_STATS(e,t){e.stats=t},SET_CURRENT_GUIDANCE(e,t){e.currentGuidance=t},SET_CURRENT_REPORT(e,t){e.currentReport=t},SET_INTERROGATION_RECORD(e,t){e.interrogationRecord=t},SET_INTERROGATION_LIST(e,{records:t,total:n}){e.interrogationList.records=t,e.interrogationList.total=n},UPDATE_INTERROGATION_QA(e,t){e.interrogationRecord&&(e.interrogationRecord.qas=t)},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},CLEAR_ERROR(e){e.error=null}},actions:{async login({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:i}=await ae.auth.login(t.username,t.password);e("SET_TOKEN",i.access_token);const r=await ae.auth.getCurrentUser();if(!r.data.is_superuser)throw new Error("您不是管理员，无法登录后台系统。");e("SET_USER",r.data),Nr.push({name:"Dashboard"})}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||i.message||"登录失败";throw e("SET_ERROR",r),e("SET_TOKEN",null),e("SET_USER",null),i}finally{e("SET_LOADING",!1)}},logout({commit:e}){e("SET_TOKEN",null),e("SET_USER",null),Nr.push({name:"Login"})},async fetchUsers({commit:e},{skip:t,limit:n}){e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:s}=await ae.users.getUsers(t,n);e("SET_USERS",{users:s.users,total:s.total})}catch{e("SET_ERROR","获取用户列表失败")}finally{e("SET_LOADING",!1)}},async updateUserStatus({commit:e},{userId:t,isActive:n}){var s,i;try{await ae.users.updateUser(t,{is_active:n})}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"更新用户状态失败";throw e("SET_ERROR",o),new Error(o)}},async fetchStats({commit:e}){e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:t}=await ae.stats.getDemographicsStats();e("SET_STATS",t)}catch{e("SET_ERROR","获取统计数据失败")}finally{e("SET_LOADING",!1)}},async searchAssessments({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR"),e("SET_ASSESSMENTS",[]);try{const{data:i}=await ae.assessments.search(t);e("SET_ASSESSMENTS",i)}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||"搜索评估记录失败";e("SET_ERROR",r)}finally{e("SET_LOADING",!1)}},async fetchGuidance({commit:e},{scenario:t,idCard:n}){var s,i;e("SET_LOADING",!0),e("CLEAR_ERROR"),e("SET_CURRENT_GUIDANCE",null);try{const{data:r}=await ae.guidance.getGuidance(t,n);e("SET_CURRENT_GUIDANCE",r)}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"获取指导方案失败";throw e("SET_ERROR",o),new Error(o)}finally{e("SET_LOADING",!1)}},async fetchReportById({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR"),e("SET_CURRENT_REPORT",null);try{const{data:i}=await ae.assessments.getById(t);if(i&&i.report)e("SET_CURRENT_REPORT",i.report);else throw i&&i.message?new Error(i.message):new Error("获取报告时返回了无效的数据格式")}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||i.message||"获取报告详情失败";e("SET_ERROR",r)}finally{e("SET_LOADING",!1)}},async startInterrogation({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:i}=await ae.interrogation.start(t);return e("SET_INTERROGATION_RECORD",i),i}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||"开始新的审讯失败";throw e("SET_ERROR",r),new Error(r)}finally{e("SET_LOADING",!1)}},async suggestQuestion({commit:e},{recordId:t,currentQAs:n}){var s,i;try{const{data:r}=await ae.interrogation.suggestQuestion(t,n);return r}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"获取AI建议失败";throw e("SET_ERROR",o),new Error(o)}},async saveInterrogation({commit:e},{recordId:t,updateData:n}){var s,i;if(!t)throw new Error("没有可保存的审讯记录ID");e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:r}=await ae.interrogation.save(t,n);return e("SET_INTERROGATION_RECORD",r),r}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"保存审讯笔录失败";throw e("SET_ERROR",o),new Error(o)}finally{e("SET_LOADING",!1)}},async fetchInterrogationRecordById({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR"),e("SET_INTERROGATION_RECORD",null);try{const{data:i}=await ae.interrogation.getById(t);return e("SET_INTERROGATION_RECORD",i),i}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||`获取审讯记录(ID: ${t})失败`;throw e("SET_ERROR",r),new Error(r)}finally{e("SET_LOADING",!1)}},async fetchInterrogationList({commit:e},{skip:t,limit:n}){var s,i;e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:r}=await ae.interrogation.getList({skip:t,limit:n});e("SET_INTERROGATION_LIST",{records:r.records,total:r.total})}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"获取审讯记录列表失败";e("SET_ERROR",o),e("SET_INTERROGATION_LIST",{records:[],total:0})}finally{e("SET_LOADING",!1)}}}}),Rl=Dm(zm);Rl.use(MR);Rl.use(Nr);Rl.mount("#app");


================================================================================

--- File: psychology-admin-frontend\dist-admin-fixed\assets\index-Cvl7QbF7.css ---
.sidebar[data-v-a00d75fa]{width:250px;background-color:var(--sidebar-bg);color:var(--sidebar-text);display:flex;flex-direction:column;height:100vh;position:fixed;left:0;top:0;box-shadow:2px 0 5px #0000001a;transition:width .3s}.sidebar-header[data-v-a00d75fa]{padding:20px;text-align:center;border-bottom:1px solid var(--secondary-color)}.logo-icon[data-v-a00d75fa]{font-size:2em;margin-bottom:10px}.sidebar-header h1[data-v-a00d75fa]{margin:0;font-size:1.5em}.sidebar-nav[data-v-a00d75fa]{flex-grow:1;overflow-y:auto}.sidebar-nav ul[data-v-a00d75fa]{list-style:none;padding:0;margin:20px 0}.sidebar-nav li a[data-v-a00d75fa]{display:flex;align-items:center;padding:15px 20px;color:var(--sidebar-text);text-decoration:none;transition:background-color .3s}.sidebar-nav li a[data-v-a00d75fa]:hover,.sidebar-nav li a.active[data-v-a00d75fa]{background-color:var(--sidebar-active-bg);color:#fff}.sidebar-nav li a i[data-v-a00d75fa]{margin-right:15px;width:20px;text-align:center}.sidebar-footer[data-v-a00d75fa]{padding:20px;border-top:1px solid var(--secondary-color)}.logout-btn[data-v-a00d75fa]{width:100%;padding:10px;background-color:#e74c3c;color:#fff;border:none;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center}.logout-btn[data-v-a00d75fa]:hover{background-color:#c0392b}.logout-btn i[data-v-a00d75fa]{margin-right:8px}.nav-item-dropdown>a[data-v-a00d75fa]{cursor:pointer;position:relative}.dropdown-arrow[data-v-a00d75fa]{margin-left:auto;transition:transform .3s ease}.nav-item-dropdown.open>a .dropdown-arrow[data-v-a00d75fa]{transform:rotate(180deg)}.submenu[data-v-a00d75fa]{list-style:none;padding:0;background-color:var(--secondary-color);margin:0}.submenu li a[data-v-a00d75fa]{padding-left:40px}.submenu li a i[data-v-a00d75fa]{font-size:.8em}.app-layout[data-v-fb2e6263]{display:flex;background-color:var(--background-color);min-height:100vh;overflow-x:hidden}.main-content[data-v-fb2e6263]{width:calc(100vw - 250px);transition:margin-left .3s ease;padding:0;overflow-y:auto;height:100vh}.fade-enter-active[data-v-fb2e6263],.fade-leave-active[data-v-fb2e6263]{transition:opacity .2s ease}.fade-enter-from[data-v-fb2e6263],.fade-leave-to[data-v-fb2e6263]{opacity:0}.login-container[data-v-47365eb3]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;width:100%;background-color:var(--background-gradient-start, #d4e6f1);background-image:linear-gradient(135deg,var(--background-gradient-start, #d4e6f1) 0%,var(--background-gradient-end, #85c1e9) 100%)}.login-box[data-v-47365eb3]{width:100%;max-width:400px;padding:40px;background-color:#fff;border-radius:8px;box-shadow:0 4px 20px #0000001a;text-align:center}.emblem-image[data-v-47365eb3]{width:90px;height:auto;margin-bottom:20px}.system-title[data-v-47365eb3]{font-size:28px;font-weight:700;color:#333;margin:0 0 10px;line-height:1.2}.system-title .subtitle[data-v-47365eb3]{display:block;font-size:16px;font-weight:400;color:#555;margin-top:8px}.login-prompt[data-v-47365eb3]{color:#6c757d;margin-bottom:30px}.form-group[data-v-47365eb3]{margin-bottom:20px;text-align:left}.form-group label[data-v-47365eb3]{display:block;margin-bottom:8px;font-weight:500}.input-wrapper[data-v-47365eb3]{position:relative}.input-wrapper i[data-v-47365eb3]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#adb5bd}.input-wrapper input[data-v-47365eb3]{width:100%;padding:12px 12px 12px 40px;border:1px solid #ced4da;border-radius:6px;font-size:16px;box-sizing:border-box}.alert-danger[data-v-47365eb3]{color:#721c24;background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:6px;padding:10px;margin-bottom:20px}.btn-block[data-v-47365eb3]{width:100%;padding:12px;font-size:16px;font-weight:600;letter-spacing:2px}.login-footer[data-v-47365eb3]{margin-top:40px;font-size:14px;color:#888}.loading-tip[data-v-916747f7]{background-color:#e6f7ff;border-left:4px solid #1890ff;border-radius:4px;padding:16px;margin:24px auto;max-width:600px}.tip-header[data-v-916747f7]{display:flex;align-items:center;margin-bottom:12px}.tip-icon[data-v-916747f7]{font-size:20px;color:#1890ff;margin-right:12px}.tip-title-group[data-v-916747f7]{flex:1}.tip-category[data-v-916747f7]{color:#1890ff;font-size:12px;font-weight:600;text-transform:uppercase}.tip-title[data-v-916747f7]{font-size:16px;font-weight:600;color:var(--primary-color)}.tip-content[data-v-916747f7]{line-height:1.6;font-size:14px;color:var(--text-color)}.dashboard-container[data-v-64f9f4b0]{width:100%;height:100%}.page-header[data-v-64f9f4b0]{margin-bottom:24px}.page-header h2[data-v-64f9f4b0]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-64f9f4b0]{color:#6c757d;margin-top:4px}.loading-state[data-v-64f9f4b0],.error-state[data-v-64f9f4b0]{text-align:center;padding:40px}.content-wrapper[data-v-64f9f4b0]{display:flex;flex-direction:column;gap:24px}.dashboard-grid[data-v-64f9f4b0]{display:grid;grid-template-columns:repeat(2,1fr);gap:24px}.chart-card[data-v-64f9f4b0]{background-color:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000012}.chart-card h3[data-v-64f9f4b0]{font-size:18px;font-weight:600;margin-bottom:16px}.chart-wrapper[data-v-64f9f4b0]{position:relative;height:350px}.ai-analysis-section[data-v-64f9f4b0]{padding:24px}.ai-header[data-v-64f9f4b0]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color);padding-bottom:16px;margin-bottom:20px}.ai-header h3[data-v-64f9f4b0]{font-size:18px;font-weight:600;margin:0;display:flex;align-items:center;gap:10px}.ai-content[data-v-64f9f4b0]{min-height:150px;display:flex;flex-direction:column;justify-content:center}.placeholder[data-v-64f9f4b0]{text-align:center;color:#6c757d;font-style:italic}.markdown-content[data-v-64f9f4b0]{line-height:1.7}[data-v-64f9f4b0] .markdown-content ul{padding-left:20px;margin-top:1em}[data-v-64f9f4b0] .markdown-content li{margin-bottom:.5em}@media (max-width: 1024px){.dashboard-grid[data-v-64f9f4b0]{grid-template-columns:1fr}}.alert-danger[data-v-64f9f4b0]{color:#991b1b;background-color:#fee2e2;border-color:#fecaca;padding:15px;border-radius:6px}.page-header[data-v-32258da0]{margin-bottom:24px}.page-header h1[data-v-32258da0]{font-size:24px;color:var(--primary-color);display:flex;align-items:center}.page-header h1 i[data-v-32258da0]{margin-right:12px}.page-header p[data-v-32258da0]{color:#888}.loading-indicator[data-v-32258da0],.error-display[data-v-32258da0]{text-align:center;padding:40px;color:#888;font-size:16px}.loading-indicator i[data-v-32258da0],.error-display i[data-v-32258da0]{margin-right:8px}.table-meta[data-v-32258da0]{margin-bottom:16px;font-size:14px}.table-wrapper[data-v-32258da0]{overflow-x:auto}.status-tag[data-v-32258da0]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;color:#fff;background-color:#909399}.status-tag.status-active[data-v-32258da0]{background-color:var(--accent-color)}.status-tag.status-inactive[data-v-32258da0]{background-color:#f56c6c}.status-tag.status-superuser[data-v-32258da0]{background-color:#e6a23c}.btn-small[data-v-32258da0]{padding:4px 8px;font-size:12px}.page-header[data-v-4e6e8926]{margin-bottom:24px}.page-header h1[data-v-4e6e8926]{font-size:24px;color:var(--primary-color);display:flex;align-items:center}.page-header h1 i[data-v-4e6e8926]{margin-right:12px}.page-header p[data-v-4e6e8926]{color:#888}.search-card[data-v-4e6e8926]{margin-bottom:24px}.search-form[data-v-4e6e8926]{display:flex;align-items:flex-end;gap:16px}.search-form .form-group[data-v-4e6e8926]{flex-grow:1;margin-bottom:0}.result-card .loading-indicator[data-v-4e6e8926],.result-card .error-display[data-v-4e6e8926],.result-card .empty-state[data-v-4e6e8926]{text-align:center;padding:40px;color:#888;font-size:16px}.result-card .loading-indicator i[data-v-4e6e8926],.result-card .error-display i[data-v-4e6e8926],.result-card .empty-state i[data-v-4e6e8926]{display:block;font-size:32px;margin-bottom:16px}.table-wrapper[data-v-4e6e8926]{overflow-x:auto}.status-tag[data-v-4e6e8926]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;color:#fff}.status-pending[data-v-4e6e8926]{background-color:#909399}.status-processing[data-v-4e6e8926]{background-color:#409eff}.status-complete[data-v-4e6e8926]{background-color:var(--accent-color)}.status-failed[data-v-4e6e8926]{background-color:#f56c6c}.btn-small[data-v-4e6e8926]{padding:4px 8px;font-size:12px}.form-card[data-v-3a737590]{max-width:600px;padding:24px}.result-container[data-v-3a737590]{display:flex;flex-direction:column;gap:24px}.report-section[data-v-3a737590],.guidance-section[data-v-3a737590]{padding:24px}h3[data-v-3a737590]{font-size:18px;font-weight:600;margin-bottom:16px;display:flex;align-items:center;gap:10px}pre[data-v-3a737590]{white-space:pre-wrap;word-wrap:break-word;background-color:#f8f9fa;padding:16px;border-radius:6px;max-height:400px;overflow-y:auto}.markdown-content[data-v-3a737590]{line-height:1.7}[data-v-3a737590] .markdown-content ul,[data-v-3a737590] .markdown-content ol{padding-left:20px;margin-top:1em}[data-v-3a737590] .markdown-content li{margin-bottom:.5em}.alert-danger[data-v-3a737590]{margin-top:16px}.guidance-container[data-v-c23f7b56]{padding:24px}.page-header[data-v-c23f7b56]{margin-bottom:24px}.page-header h2[data-v-c23f7b56]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-c23f7b56]{color:#6c757d;margin-top:4px}.guidance-container[data-v-2a20f843]{padding:24px}.page-header[data-v-2a20f843]{margin-bottom:24px}.page-header h2[data-v-2a20f843]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-2a20f843]{color:#6c757d;margin-top:4px}.guidance-container[data-v-c5a5a863]{padding:24px}.page-header[data-v-c5a5a863]{margin-bottom:24px}.page-header h2[data-v-c5a5a863]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-c5a5a863]{color:#6c757d;margin-top:4px}.page-header[data-v-31cd71dd]{margin-bottom:24px}.page-header h1[data-v-31cd71dd]{font-size:24px;color:var(--primary-color);display:flex;align-items:center}.page-header h1 i[data-v-31cd71dd]{margin-right:12px}.page-header p[data-v-31cd71dd]{color:#888}.loading-indicator[data-v-31cd71dd],.error-display[data-v-31cd71dd]{text-align:center;padding:60px 20px}.loading-indicator i[data-v-31cd71dd],.error-display i[data-v-31cd71dd]{display:block;font-size:40px;margin-bottom:16px}.report-layout[data-v-31cd71dd]{display:grid;grid-template-columns:300px 1fr;gap:24px}@media (max-width: 992px){.report-layout[data-v-31cd71dd]{grid-template-columns:1fr}}.card h3[data-v-31cd71dd]{margin-top:0;margin-bottom:16px;color:var(--primary-color);display:flex;align-items:center;border-bottom:1px solid var(--border-color);padding-bottom:10px}.card h3 i[data-v-31cd71dd]{margin-right:10px}.info-panel ul[data-v-31cd71dd]{list-style:none;padding:0}.info-panel li[data-v-31cd71dd]{padding:8px 0;border-bottom:1px solid #f0f0f0}.info-panel li[data-v-31cd71dd]:last-child{border-bottom:none}.info-panel strong[data-v-31cd71dd]{color:var(--secondary-color);margin-right:8px}.markdown-content[data-v-31cd71dd]{line-height:1.7}[data-v-31cd71dd] .markdown-content h1,[data-v-31cd71dd] .markdown-content h2,[data-v-31cd71dd] .markdown-content h3,[data-v-31cd71dd] .markdown-content h4,[data-v-31cd71dd] .markdown-content h5,[data-v-31cd71dd] .markdown-content h6{margin-top:1.2em;margin-bottom:.6em;color:var(--secondary-color);font-weight:600}[data-v-31cd71dd] .markdown-content p{margin-bottom:1em}[data-v-31cd71dd] .markdown-content ul,[data-v-31cd71dd] .markdown-content ol{padding-left:2em;margin-bottom:1em}[data-v-31cd71dd] .markdown-content strong{color:var(--primary-color)}.tags-container[data-v-31cd71dd]{display:flex;flex-wrap:wrap;gap:8px}.tag[data-v-31cd71dd]{background-color:#e6f7ff;border:1px solid #91d5ff;color:#1890ff;padding:4px 10px;border-radius:4px;font-size:14px}.no-tags[data-v-31cd71dd]{color:#888}.wide-page-container .wide-card[data-v-0ab77df9]{max-width:900px;margin-left:auto;margin-right:auto}.page-header[data-v-0ab77df9]{margin-bottom:24px}.page-header h1[data-v-0ab77df9]{font-size:24px;color:var(--primary-color);display:flex;align-items:center}.page-header h1 i[data-v-0ab77df9]{margin-right:12px}.page-header p[data-v-0ab77df9]{color:#888}.form-section-title[data-v-0ab77df9]{font-size:18px;color:var(--primary-color);margin-top:30px;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid var(--border-color)}.form-row[data-v-0ab77df9]{display:flex;gap:20px}.form-row .form-group[data-v-0ab77df9]{flex:1}.checkbox-group[data-v-0ab77df9]{display:flex;align-items:center;padding-top:20px}.checkbox-group input[data-v-0ab77df9]{width:auto;margin-right:10px}.checkbox-group label[data-v-0ab77df9]{margin-bottom:0;font-weight:400}.required[data-v-0ab77df9]{color:#f5222d;margin-left:4px}.error-display[data-v-0ab77df9]{color:#f5222d;margin-top:10px}button i[data-v-0ab77df9]{margin-right:8px}.editor-page-container[data-v-ecf0497d]{display:flex;flex-direction:column;width:100%;height:100%;background-color:#f0f2f5}.page-header[data-v-ecf0497d]{padding:0 24px;flex-shrink:0;border-bottom:1px solid var(--border-color);background-color:#fff}.page-header h2[data-v-ecf0497d]{font-size:22px;font-weight:700;padding:20px 0;margin:0}.subtitle[data-v-ecf0497d]{margin-top:-15px;padding-bottom:15px;color:#6c757d;font-size:14px}.loading-state[data-v-ecf0497d],.error-state[data-v-ecf0497d]{flex-grow:1;display:flex;justify-content:center;align-items:center}.editor-main-content[data-v-ecf0497d]{flex-grow:1;display:grid;grid-template-columns:2fr 1fr;gap:24px;padding:24px;overflow:hidden}.qa-list-panel[data-v-ecf0497d]{background-color:#fff;border-radius:8px;padding:24px;box-shadow:0 1px 3px #0000000d;overflow-y:auto}.qa-pair[data-v-ecf0497d]{border:1px solid #e5e7eb;border-radius:8px;padding:16px;margin-bottom:20px;background-color:#f9fafb}.qa-header[data-v-ecf0497d]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.qa-header h4[data-v-ecf0497d]{margin:0;font-size:16px;font-weight:600}.btn-remove[data-v-ecf0497d]{background:none;border:none;color:#9ca3af;cursor:pointer;font-size:16px}.btn-remove[data-v-ecf0497d]:hover{color:#ef4444}.qa-grid[data-v-ecf0497d]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-group[data-v-ecf0497d]{margin:0}.form-group label[data-v-ecf0497d]{font-weight:500;margin-bottom:8px;display:block}.form-control[data-v-ecf0497d]{width:100%;padding:10px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;resize:vertical;box-sizing:border-box}.form-control[data-v-ecf0497d]:focus{border-color:var(--accent-color);box-shadow:0 0 0 2px #42b98333;outline:none}.btn-add-qa[data-v-ecf0497d]{width:100%;padding:12px;margin-top:10px;border:1px dashed var(--accent-color);background-color:#f0fdf4;color:var(--accent-color);font-weight:600}.btn-add-qa[data-v-ecf0497d]:hover{background-color:#dcfce7}.sidebar-actions[data-v-ecf0497d]{display:flex;flex-direction:column;gap:24px}.action-card[data-v-ecf0497d]{background-color:#fff;border-radius:8px;padding:24px;box-shadow:0 1px 3px #0000000d}.action-card h3[data-v-ecf0497d]{font-size:18px;margin:0 0 16px;font-weight:600}.btn-block[data-v-ecf0497d]{width:100%}.suggestions-content-wrapper[data-v-ecf0497d]{margin-top:16px;min-height:150px;display:flex;flex-direction:column}.loading-tip-small[data-v-ecf0497d]{margin:auto}.suggestions-list[data-v-ecf0497d]{display:flex;flex-direction:column}.suggestions-list p[data-v-ecf0497d]{font-size:14px;color:#6b7280;margin-bottom:8px}.suggestion-item[data-v-ecf0497d]{width:100%;text-align:left;padding:10px;background-color:#f3f4f6;border:1px solid #e5e7eb;border-radius:6px;cursor:pointer;margin-bottom:8px}.suggestion-item[data-v-ecf0497d]:hover{background-color:#e5e7eb}.page-footer[data-v-ecf0497d]{flex-shrink:0;padding:16px 24px;background-color:#fff;border-top:1px solid var(--border-color);text-align:right;box-shadow:0 -2px 5px #0000000d}@media (max-width: 1200px){.editor-main-content[data-v-ecf0497d]{grid-template-columns:1fr}.qa-list-panel[data-v-ecf0497d]{height:auto;max-height:60vh}.sidebar-actions[data-v-ecf0497d]{overflow-y:auto}}@media (max-width: 768px){.qa-grid[data-v-ecf0497d]{grid-template-columns:1fr}.qa-header[data-v-ecf0497d]{position:relative}.btn-remove[data-v-ecf0497d]{position:absolute;top:-8px;right:-8px;background-color:#fff;border-radius:50%;width:24px;height:24px;display:flex;justify-content:center;align-items:center}}.notification-toast[data-v-ecf0497d]{position:fixed;top:80px;left:50%;transform:translate(-50%);padding:12px 20px;border-radius:8px;box-shadow:0 4px 12px #00000026;display:flex;align-items:center;gap:10px;color:#fff;z-index:1000;font-size:16px;font-weight:500}.notification-toast.success[data-v-ecf0497d]{background-color:var(--accent-color)}.notification-toast.error[data-v-ecf0497d]{background-color:#f5222d}.notification-toast i[data-v-ecf0497d]{font-size:20px}.toast-fade-enter-active[data-v-ecf0497d],.toast-fade-leave-active[data-v-ecf0497d]{transition:opacity .5s,transform .5s}.toast-fade-enter-from[data-v-ecf0497d],.toast-fade-leave-to[data-v-ecf0497d]{opacity:0;transform:translate(-50%,-20px)}.alert[data-v-ecf0497d]{padding:15px;border-radius:6px}.alert-danger[data-v-ecf0497d]{color:#991b1b;background-color:#fee2e2;border-color:#fecaca}.list-container[data-v-28fe950a]{padding:24px}.list-header[data-v-28fe950a]{margin-bottom:24px}.list-header h2[data-v-28fe950a]{font-size:24px;font-weight:700}.list-header p[data-v-28fe950a]{color:#6c757d}.card[data-v-28fe950a]{background-color:#fff;border-radius:8px;padding:0;box-shadow:0 2px 8px #0000001a;overflow:hidden}.record-table[data-v-28fe950a]{width:100%;border-collapse:collapse}.record-table th[data-v-28fe950a],.record-table td[data-v-28fe950a]{padding:12px 16px;text-align:left;border-bottom:1px solid #e8e8e8}.record-table th[data-v-28fe950a]{background-color:#fafafa;font-weight:600}.record-table tbody tr[data-v-28fe950a]:hover{background-color:#f5f5f5}.text-center[data-v-28fe950a]{text-align:center;padding:40px;color:#888}.status-badge[data-v-28fe950a]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:600;color:#fff}.status-completed[data-v-28fe950a]{background-color:#28a745}.status-ongoing[data-v-28fe950a]{background-color:#ffc107;color:#333}.status-default[data-v-28fe950a]{background-color:#6c757d}.btn-small[data-v-28fe950a]{padding:4px 10px;font-size:13px}.pagination[data-v-28fe950a]{margin-top:20px;display:flex;justify-content:center;align-items:center;gap:15px}.pagination button[data-v-28fe950a]{padding:8px 16px}.law-query-container[data-v-0279a1d2]{padding:24px}.page-header[data-v-0279a1d2]{margin-bottom:24px}.page-header h2[data-v-0279a1d2]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-0279a1d2]{color:#6c757d;margin-top:4px}.search-bar[data-v-0279a1d2]{display:flex;align-items:center;margin-bottom:24px;padding:8px 16px}.search-icon[data-v-0279a1d2]{color:#9ca3af;margin-right:12px}.search-input[data-v-0279a1d2]{border:none;outline:none;width:100%;font-size:16px}.law-list[data-v-0279a1d2]{display:grid;gap:16px}.law-item[data-v-0279a1d2]{display:flex;justify-content:space-between;align-items:center;padding:20px;transition:box-shadow .3s,transform .3s}.law-item[data-v-0279a1d2]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #0000001a}.law-name[data-v-0279a1d2]{font-size:18px;font-weight:600;margin:0 0 8px;color:var(--primary-color)}.law-description[data-v-0279a1d2]{font-size:14px;color:#4b5563;margin:0}.no-results[data-v-0279a1d2]{text-align:center;padding:40px;color:#6b7280}:root{--primary-color: #2c3e50;--secondary-color: #34495e;--accent-color: #42b983;--background-gradient-start: #eaf2f8;--background-gradient-end: #85c1e9;--sidebar-bg: #2c3e50;--sidebar-text: #ecf0f1;--sidebar-active-bg: #42b983;--content-bg: #ffffff;--text-color: #333;--border-color: #e8e8e8;--shadow-color: rgba(0, 0, 0, .08)}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";background-color:var(--background-gradient-start);background-image:linear-gradient(135deg,var(--background-gradient-start) 0%,var(--background-gradient-end) 100%);color:var(--text-color);min-height:100vh}#app{display:flex;min-height:100vh}a{color:var(--accent-color);text-decoration:none}a:hover{text-decoration:underline}.card{background-color:var(--content-bg);border-radius:8px;padding:24px;box-shadow:0 4px 15px var(--shadow-color);margin-bottom:24px;border:1px solid rgba(0,0,0,.05)}.btn{display:inline-block;padding:8px 16px;background-color:var(--accent-color);color:#fff;border:none;border-radius:4px;font-size:14px;cursor:pointer;transition:background-color .3s,transform .2s}.btn:hover{background-color:#36a473;transform:translateY(-2px)}.btn-primary{background-color:#1890ff}.btn-primary:hover{background-color:#40a9ff}.btn-danger{background-color:#f5222d}.btn-danger:hover{background-color:#ff4d4f}.form-group{margin-bottom:16px}.form-group label{display:block;margin-bottom:8px;font-weight:500}.form-group input,.form-group select,.form-group textarea{width:100%;padding:10px 14px;border:1px solid #d1d5db;border-radius:6px;box-sizing:border-box;background-color:#f9fafb}.form-group input:focus,.form-group select:focus,.form-group textarea:focus{outline:none;border-color:var(--accent-color);box-shadow:0 0 0 3px #42b98333}table{width:100%;border-collapse:collapse}th,td{padding:12px 16px;border-bottom:1px solid var(--border-color);text-align:left}th{background-color:#f8f9fa;font-weight:600;border-bottom-width:2px}tbody tr:hover{background-color:#f1f5f9}


================================================================================

--- File: psychology-admin-frontend\dist-admin-new\index.html ---
<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>倾听者 - 管理后台</title>
    <!-- 引入 Font Awesome 图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script type="module" crossorigin src="/admin/assets/index-Du69prlt.js"></script>
    <link rel="stylesheet" crossorigin href="/admin/assets/index-DBInCQLk.css">
  </head>
  <body>
    <div id="app"></div>
    <!-- 确保 src 指向 /src/main.js -->

  </body>
</html>

================================================================================

--- File: psychology-admin-frontend\dist-admin-new\assets\index-DBInCQLk.css ---
.sidebar[data-v-a00d75fa]{width:250px;background-color:var(--sidebar-bg);color:var(--sidebar-text);display:flex;flex-direction:column;height:100vh;position:fixed;left:0;top:0;box-shadow:2px 0 5px #0000001a;transition:width .3s}.sidebar-header[data-v-a00d75fa]{padding:20px;text-align:center;border-bottom:1px solid var(--secondary-color)}.logo-icon[data-v-a00d75fa]{font-size:2em;margin-bottom:10px}.sidebar-header h1[data-v-a00d75fa]{margin:0;font-size:1.5em}.sidebar-nav[data-v-a00d75fa]{flex-grow:1;overflow-y:auto}.sidebar-nav ul[data-v-a00d75fa]{list-style:none;padding:0;margin:20px 0}.sidebar-nav li a[data-v-a00d75fa]{display:flex;align-items:center;padding:15px 20px;color:var(--sidebar-text);text-decoration:none;transition:background-color .3s}.sidebar-nav li a[data-v-a00d75fa]:hover,.sidebar-nav li a.active[data-v-a00d75fa]{background-color:var(--sidebar-active-bg);color:#fff}.sidebar-nav li a i[data-v-a00d75fa]{margin-right:15px;width:20px;text-align:center}.sidebar-footer[data-v-a00d75fa]{padding:20px;border-top:1px solid var(--secondary-color)}.logout-btn[data-v-a00d75fa]{width:100%;padding:10px;background-color:#e74c3c;color:#fff;border:none;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center}.logout-btn[data-v-a00d75fa]:hover{background-color:#c0392b}.logout-btn i[data-v-a00d75fa]{margin-right:8px}.nav-item-dropdown>a[data-v-a00d75fa]{cursor:pointer;position:relative}.dropdown-arrow[data-v-a00d75fa]{margin-left:auto;transition:transform .3s ease}.nav-item-dropdown.open>a .dropdown-arrow[data-v-a00d75fa]{transform:rotate(180deg)}.submenu[data-v-a00d75fa]{list-style:none;padding:0;background-color:var(--secondary-color);margin:0}.submenu li a[data-v-a00d75fa]{padding-left:40px}.submenu li a i[data-v-a00d75fa]{font-size:.8em}.app-layout[data-v-fb2e6263]{display:flex;background-color:var(--background-color);min-height:100vh;overflow-x:hidden}.main-content[data-v-fb2e6263]{width:calc(100vw - 250px);transition:margin-left .3s ease;padding:0;overflow-y:auto;height:100vh}.fade-enter-active[data-v-fb2e6263],.fade-leave-active[data-v-fb2e6263]{transition:opacity .2s ease}.fade-enter-from[data-v-fb2e6263],.fade-leave-to[data-v-fb2e6263]{opacity:0}.login-container[data-v-47365eb3]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;width:100%;background-color:var(--background-gradient-start, #d4e6f1);background-image:linear-gradient(135deg,var(--background-gradient-start, #d4e6f1) 0%,var(--background-gradient-end, #85c1e9) 100%)}.login-box[data-v-47365eb3]{width:100%;max-width:400px;padding:40px;background-color:#fff;border-radius:8px;box-shadow:0 4px 20px #0000001a;text-align:center}.emblem-image[data-v-47365eb3]{width:90px;height:auto;margin-bottom:20px}.system-title[data-v-47365eb3]{font-size:28px;font-weight:700;color:#333;margin:0 0 10px;line-height:1.2}.system-title .subtitle[data-v-47365eb3]{display:block;font-size:16px;font-weight:400;color:#555;margin-top:8px}.login-prompt[data-v-47365eb3]{color:#6c757d;margin-bottom:30px}.form-group[data-v-47365eb3]{margin-bottom:20px;text-align:left}.form-group label[data-v-47365eb3]{display:block;margin-bottom:8px;font-weight:500}.input-wrapper[data-v-47365eb3]{position:relative}.input-wrapper i[data-v-47365eb3]{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#adb5bd}.input-wrapper input[data-v-47365eb3]{width:100%;padding:12px 12px 12px 40px;border:1px solid #ced4da;border-radius:6px;font-size:16px;box-sizing:border-box}.alert-danger[data-v-47365eb3]{color:#721c24;background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:6px;padding:10px;margin-bottom:20px}.btn-block[data-v-47365eb3]{width:100%;padding:12px;font-size:16px;font-weight:600;letter-spacing:2px}.login-footer[data-v-47365eb3]{margin-top:40px;font-size:14px;color:#888}.loading-tip[data-v-916747f7]{background-color:#e6f7ff;border-left:4px solid #1890ff;border-radius:4px;padding:16px;margin:24px auto;max-width:600px}.tip-header[data-v-916747f7]{display:flex;align-items:center;margin-bottom:12px}.tip-icon[data-v-916747f7]{font-size:20px;color:#1890ff;margin-right:12px}.tip-title-group[data-v-916747f7]{flex:1}.tip-category[data-v-916747f7]{color:#1890ff;font-size:12px;font-weight:600;text-transform:uppercase}.tip-title[data-v-916747f7]{font-size:16px;font-weight:600;color:var(--primary-color)}.tip-content[data-v-916747f7]{line-height:1.6;font-size:14px;color:var(--text-color)}.dashboard-container[data-v-64f9f4b0]{width:100%;height:100%}.page-header[data-v-64f9f4b0]{margin-bottom:24px}.page-header h2[data-v-64f9f4b0]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-64f9f4b0]{color:#6c757d;margin-top:4px}.loading-state[data-v-64f9f4b0],.error-state[data-v-64f9f4b0]{text-align:center;padding:40px}.content-wrapper[data-v-64f9f4b0]{display:flex;flex-direction:column;gap:24px}.dashboard-grid[data-v-64f9f4b0]{display:grid;grid-template-columns:repeat(2,1fr);gap:24px}.chart-card[data-v-64f9f4b0]{background-color:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 8px #00000012}.chart-card h3[data-v-64f9f4b0]{font-size:18px;font-weight:600;margin-bottom:16px}.chart-wrapper[data-v-64f9f4b0]{position:relative;height:350px}.ai-analysis-section[data-v-64f9f4b0]{padding:24px}.ai-header[data-v-64f9f4b0]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color);padding-bottom:16px;margin-bottom:20px}.ai-header h3[data-v-64f9f4b0]{font-size:18px;font-weight:600;margin:0;display:flex;align-items:center;gap:10px}.ai-content[data-v-64f9f4b0]{min-height:150px;display:flex;flex-direction:column;justify-content:center}.placeholder[data-v-64f9f4b0]{text-align:center;color:#6c757d;font-style:italic}.markdown-content[data-v-64f9f4b0]{line-height:1.7}[data-v-64f9f4b0] .markdown-content ul{padding-left:20px;margin-top:1em}[data-v-64f9f4b0] .markdown-content li{margin-bottom:.5em}@media (max-width: 1024px){.dashboard-grid[data-v-64f9f4b0]{grid-template-columns:1fr}}.alert-danger[data-v-64f9f4b0]{color:#991b1b;background-color:#fee2e2;border-color:#fecaca;padding:15px;border-radius:6px}.page-header[data-v-32258da0]{margin-bottom:24px}.page-header h1[data-v-32258da0]{font-size:24px;color:var(--primary-color);display:flex;align-items:center}.page-header h1 i[data-v-32258da0]{margin-right:12px}.page-header p[data-v-32258da0]{color:#888}.loading-indicator[data-v-32258da0],.error-display[data-v-32258da0]{text-align:center;padding:40px;color:#888;font-size:16px}.loading-indicator i[data-v-32258da0],.error-display i[data-v-32258da0]{margin-right:8px}.table-meta[data-v-32258da0]{margin-bottom:16px;font-size:14px}.table-wrapper[data-v-32258da0]{overflow-x:auto}.status-tag[data-v-32258da0]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;color:#fff;background-color:#909399}.status-tag.status-active[data-v-32258da0]{background-color:var(--accent-color)}.status-tag.status-inactive[data-v-32258da0]{background-color:#f56c6c}.status-tag.status-superuser[data-v-32258da0]{background-color:#e6a23c}.btn-small[data-v-32258da0]{padding:4px 8px;font-size:12px}.page-header[data-v-4e6e8926]{margin-bottom:24px}.page-header h1[data-v-4e6e8926]{font-size:24px;color:var(--primary-color);display:flex;align-items:center}.page-header h1 i[data-v-4e6e8926]{margin-right:12px}.page-header p[data-v-4e6e8926]{color:#888}.search-card[data-v-4e6e8926]{margin-bottom:24px}.search-form[data-v-4e6e8926]{display:flex;align-items:flex-end;gap:16px}.search-form .form-group[data-v-4e6e8926]{flex-grow:1;margin-bottom:0}.result-card .loading-indicator[data-v-4e6e8926],.result-card .error-display[data-v-4e6e8926],.result-card .empty-state[data-v-4e6e8926]{text-align:center;padding:40px;color:#888;font-size:16px}.result-card .loading-indicator i[data-v-4e6e8926],.result-card .error-display i[data-v-4e6e8926],.result-card .empty-state i[data-v-4e6e8926]{display:block;font-size:32px;margin-bottom:16px}.table-wrapper[data-v-4e6e8926]{overflow-x:auto}.status-tag[data-v-4e6e8926]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;color:#fff}.status-pending[data-v-4e6e8926]{background-color:#909399}.status-processing[data-v-4e6e8926]{background-color:#409eff}.status-complete[data-v-4e6e8926]{background-color:var(--accent-color)}.status-failed[data-v-4e6e8926]{background-color:#f56c6c}.btn-small[data-v-4e6e8926]{padding:4px 8px;font-size:12px}.page-header[data-v-31cd71dd]{margin-bottom:24px}.page-header h1[data-v-31cd71dd]{font-size:24px;color:var(--primary-color);display:flex;align-items:center}.page-header h1 i[data-v-31cd71dd]{margin-right:12px}.page-header p[data-v-31cd71dd]{color:#888}.loading-indicator[data-v-31cd71dd],.error-display[data-v-31cd71dd]{text-align:center;padding:60px 20px}.loading-indicator i[data-v-31cd71dd],.error-display i[data-v-31cd71dd]{display:block;font-size:40px;margin-bottom:16px}.report-layout[data-v-31cd71dd]{display:grid;grid-template-columns:300px 1fr;gap:24px}@media (max-width: 992px){.report-layout[data-v-31cd71dd]{grid-template-columns:1fr}}.card h3[data-v-31cd71dd]{margin-top:0;margin-bottom:16px;color:var(--primary-color);display:flex;align-items:center;border-bottom:1px solid var(--border-color);padding-bottom:10px}.card h3 i[data-v-31cd71dd]{margin-right:10px}.info-panel ul[data-v-31cd71dd]{list-style:none;padding:0}.info-panel li[data-v-31cd71dd]{padding:8px 0;border-bottom:1px solid #f0f0f0}.info-panel li[data-v-31cd71dd]:last-child{border-bottom:none}.info-panel strong[data-v-31cd71dd]{color:var(--secondary-color);margin-right:8px}.markdown-content[data-v-31cd71dd]{line-height:1.7}[data-v-31cd71dd] .markdown-content h1,[data-v-31cd71dd] .markdown-content h2,[data-v-31cd71dd] .markdown-content h3,[data-v-31cd71dd] .markdown-content h4,[data-v-31cd71dd] .markdown-content h5,[data-v-31cd71dd] .markdown-content h6{margin-top:1.2em;margin-bottom:.6em;color:var(--secondary-color);font-weight:600}[data-v-31cd71dd] .markdown-content p{margin-bottom:1em}[data-v-31cd71dd] .markdown-content ul,[data-v-31cd71dd] .markdown-content ol{padding-left:2em;margin-bottom:1em}[data-v-31cd71dd] .markdown-content strong{color:var(--primary-color)}.tags-container[data-v-31cd71dd]{display:flex;flex-wrap:wrap;gap:8px}.tag[data-v-31cd71dd]{background-color:#e6f7ff;border:1px solid #91d5ff;color:#1890ff;padding:4px 10px;border-radius:4px;font-size:14px}.no-tags[data-v-31cd71dd]{color:#888}.wide-page-container .wide-card[data-v-0ab77df9]{max-width:900px;margin-left:auto;margin-right:auto}.page-header[data-v-0ab77df9]{margin-bottom:24px}.page-header h1[data-v-0ab77df9]{font-size:24px;color:var(--primary-color);display:flex;align-items:center}.page-header h1 i[data-v-0ab77df9]{margin-right:12px}.page-header p[data-v-0ab77df9]{color:#888}.form-section-title[data-v-0ab77df9]{font-size:18px;color:var(--primary-color);margin-top:30px;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid var(--border-color)}.form-row[data-v-0ab77df9]{display:flex;gap:20px}.form-row .form-group[data-v-0ab77df9]{flex:1}.checkbox-group[data-v-0ab77df9]{display:flex;align-items:center;padding-top:20px}.checkbox-group input[data-v-0ab77df9]{width:auto;margin-right:10px}.checkbox-group label[data-v-0ab77df9]{margin-bottom:0;font-weight:400}.required[data-v-0ab77df9]{color:#f5222d;margin-left:4px}.error-display[data-v-0ab77df9]{color:#f5222d;margin-top:10px}button i[data-v-0ab77df9]{margin-right:8px}.editor-page-container[data-v-ecf0497d]{display:flex;flex-direction:column;width:100%;height:100%;background-color:#f0f2f5}.page-header[data-v-ecf0497d]{padding:0 24px;flex-shrink:0;border-bottom:1px solid var(--border-color);background-color:#fff}.page-header h2[data-v-ecf0497d]{font-size:22px;font-weight:700;padding:20px 0;margin:0}.subtitle[data-v-ecf0497d]{margin-top:-15px;padding-bottom:15px;color:#6c757d;font-size:14px}.loading-state[data-v-ecf0497d],.error-state[data-v-ecf0497d]{flex-grow:1;display:flex;justify-content:center;align-items:center}.editor-main-content[data-v-ecf0497d]{flex-grow:1;display:grid;grid-template-columns:2fr 1fr;gap:24px;padding:24px;overflow:hidden}.qa-list-panel[data-v-ecf0497d]{background-color:#fff;border-radius:8px;padding:24px;box-shadow:0 1px 3px #0000000d;overflow-y:auto}.qa-pair[data-v-ecf0497d]{border:1px solid #e5e7eb;border-radius:8px;padding:16px;margin-bottom:20px;background-color:#f9fafb}.qa-header[data-v-ecf0497d]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.qa-header h4[data-v-ecf0497d]{margin:0;font-size:16px;font-weight:600}.btn-remove[data-v-ecf0497d]{background:none;border:none;color:#9ca3af;cursor:pointer;font-size:16px}.btn-remove[data-v-ecf0497d]:hover{color:#ef4444}.qa-grid[data-v-ecf0497d]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-group[data-v-ecf0497d]{margin:0}.form-group label[data-v-ecf0497d]{font-weight:500;margin-bottom:8px;display:block}.form-control[data-v-ecf0497d]{width:100%;padding:10px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;resize:vertical;box-sizing:border-box}.form-control[data-v-ecf0497d]:focus{border-color:var(--accent-color);box-shadow:0 0 0 2px #42b98333;outline:none}.btn-add-qa[data-v-ecf0497d]{width:100%;padding:12px;margin-top:10px;border:1px dashed var(--accent-color);background-color:#f0fdf4;color:var(--accent-color);font-weight:600}.btn-add-qa[data-v-ecf0497d]:hover{background-color:#dcfce7}.sidebar-actions[data-v-ecf0497d]{display:flex;flex-direction:column;gap:24px}.action-card[data-v-ecf0497d]{background-color:#fff;border-radius:8px;padding:24px;box-shadow:0 1px 3px #0000000d}.action-card h3[data-v-ecf0497d]{font-size:18px;margin:0 0 16px;font-weight:600}.btn-block[data-v-ecf0497d]{width:100%}.suggestions-content-wrapper[data-v-ecf0497d]{margin-top:16px;min-height:150px;display:flex;flex-direction:column}.loading-tip-small[data-v-ecf0497d]{margin:auto}.suggestions-list[data-v-ecf0497d]{display:flex;flex-direction:column}.suggestions-list p[data-v-ecf0497d]{font-size:14px;color:#6b7280;margin-bottom:8px}.suggestion-item[data-v-ecf0497d]{width:100%;text-align:left;padding:10px;background-color:#f3f4f6;border:1px solid #e5e7eb;border-radius:6px;cursor:pointer;margin-bottom:8px}.suggestion-item[data-v-ecf0497d]:hover{background-color:#e5e7eb}.page-footer[data-v-ecf0497d]{flex-shrink:0;padding:16px 24px;background-color:#fff;border-top:1px solid var(--border-color);text-align:right;box-shadow:0 -2px 5px #0000000d}@media (max-width: 1200px){.editor-main-content[data-v-ecf0497d]{grid-template-columns:1fr}.qa-list-panel[data-v-ecf0497d]{height:auto;max-height:60vh}.sidebar-actions[data-v-ecf0497d]{overflow-y:auto}}@media (max-width: 768px){.qa-grid[data-v-ecf0497d]{grid-template-columns:1fr}.qa-header[data-v-ecf0497d]{position:relative}.btn-remove[data-v-ecf0497d]{position:absolute;top:-8px;right:-8px;background-color:#fff;border-radius:50%;width:24px;height:24px;display:flex;justify-content:center;align-items:center}}.notification-toast[data-v-ecf0497d]{position:fixed;top:80px;left:50%;transform:translate(-50%);padding:12px 20px;border-radius:8px;box-shadow:0 4px 12px #00000026;display:flex;align-items:center;gap:10px;color:#fff;z-index:1000;font-size:16px;font-weight:500}.notification-toast.success[data-v-ecf0497d]{background-color:var(--accent-color)}.notification-toast.error[data-v-ecf0497d]{background-color:#f5222d}.notification-toast i[data-v-ecf0497d]{font-size:20px}.toast-fade-enter-active[data-v-ecf0497d],.toast-fade-leave-active[data-v-ecf0497d]{transition:opacity .5s,transform .5s}.toast-fade-enter-from[data-v-ecf0497d],.toast-fade-leave-to[data-v-ecf0497d]{opacity:0;transform:translate(-50%,-20px)}.alert[data-v-ecf0497d]{padding:15px;border-radius:6px}.alert-danger[data-v-ecf0497d]{color:#991b1b;background-color:#fee2e2;border-color:#fecaca}.list-container[data-v-28fe950a]{padding:24px}.list-header[data-v-28fe950a]{margin-bottom:24px}.list-header h2[data-v-28fe950a]{font-size:24px;font-weight:700}.list-header p[data-v-28fe950a]{color:#6c757d}.card[data-v-28fe950a]{background-color:#fff;border-radius:8px;padding:0;box-shadow:0 2px 8px #0000001a;overflow:hidden}.record-table[data-v-28fe950a]{width:100%;border-collapse:collapse}.record-table th[data-v-28fe950a],.record-table td[data-v-28fe950a]{padding:12px 16px;text-align:left;border-bottom:1px solid #e8e8e8}.record-table th[data-v-28fe950a]{background-color:#fafafa;font-weight:600}.record-table tbody tr[data-v-28fe950a]:hover{background-color:#f5f5f5}.text-center[data-v-28fe950a]{text-align:center;padding:40px;color:#888}.status-badge[data-v-28fe950a]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:600;color:#fff}.status-completed[data-v-28fe950a]{background-color:#28a745}.status-ongoing[data-v-28fe950a]{background-color:#ffc107;color:#333}.status-default[data-v-28fe950a]{background-color:#6c757d}.btn-small[data-v-28fe950a]{padding:4px 10px;font-size:13px}.pagination[data-v-28fe950a]{margin-top:20px;display:flex;justify-content:center;align-items:center;gap:15px}.pagination button[data-v-28fe950a]{padding:8px 16px}.law-query-container[data-v-0279a1d2]{padding:24px}.page-header[data-v-0279a1d2]{margin-bottom:24px}.page-header h2[data-v-0279a1d2]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-0279a1d2]{color:#6c757d;margin-top:4px}.search-bar[data-v-0279a1d2]{display:flex;align-items:center;margin-bottom:24px;padding:8px 16px}.search-icon[data-v-0279a1d2]{color:#9ca3af;margin-right:12px}.search-input[data-v-0279a1d2]{border:none;outline:none;width:100%;font-size:16px}.law-list[data-v-0279a1d2]{display:grid;gap:16px}.law-item[data-v-0279a1d2]{display:flex;justify-content:space-between;align-items:center;padding:20px;transition:box-shadow .3s,transform .3s}.law-item[data-v-0279a1d2]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #0000001a}.law-name[data-v-0279a1d2]{font-size:18px;font-weight:600;margin:0 0 8px;color:var(--primary-color)}.law-description[data-v-0279a1d2]{font-size:14px;color:#4b5563;margin:0}.no-results[data-v-0279a1d2]{text-align:center;padding:40px;color:#6b7280}.form-card[data-v-3a737590]{max-width:600px;padding:24px}.result-container[data-v-3a737590]{display:flex;flex-direction:column;gap:24px}.report-section[data-v-3a737590],.guidance-section[data-v-3a737590]{padding:24px}h3[data-v-3a737590]{font-size:18px;font-weight:600;margin-bottom:16px;display:flex;align-items:center;gap:10px}pre[data-v-3a737590]{white-space:pre-wrap;word-wrap:break-word;background-color:#f8f9fa;padding:16px;border-radius:6px;max-height:400px;overflow-y:auto}.markdown-content[data-v-3a737590]{line-height:1.7}[data-v-3a737590] .markdown-content ul,[data-v-3a737590] .markdown-content ol{padding-left:20px;margin-top:1em}[data-v-3a737590] .markdown-content li{margin-bottom:.5em}.alert-danger[data-v-3a737590]{margin-top:16px}.guidance-container[data-v-c23f7b56]{padding:24px}.page-header[data-v-c23f7b56]{margin-bottom:24px}.page-header h2[data-v-c23f7b56]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-c23f7b56]{color:#6c757d;margin-top:4px}.guidance-container[data-v-2a20f843]{padding:24px}.page-header[data-v-2a20f843]{margin-bottom:24px}.page-header h2[data-v-2a20f843]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-2a20f843]{color:#6c757d;margin-top:4px}.guidance-container[data-v-c5a5a863]{padding:24px}.page-header[data-v-c5a5a863]{margin-bottom:24px}.page-header h2[data-v-c5a5a863]{font-size:24px;font-weight:700;display:flex;align-items:center;gap:12px}.page-header p[data-v-c5a5a863]{color:#6c757d;margin-top:4px}:root{--primary-color: #2c3e50;--secondary-color: #34495e;--accent-color: #42b983;--background-gradient-start: #eaf2f8;--background-gradient-end: #85c1e9;--sidebar-bg: #2c3e50;--sidebar-text: #ecf0f1;--sidebar-active-bg: #42b983;--content-bg: #ffffff;--text-color: #333;--border-color: #e8e8e8;--shadow-color: rgba(0, 0, 0, .08)}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";background-color:var(--background-gradient-start);background-image:linear-gradient(135deg,var(--background-gradient-start) 0%,var(--background-gradient-end) 100%);color:var(--text-color);min-height:100vh}#app{display:flex;min-height:100vh}a{color:var(--accent-color);text-decoration:none}a:hover{text-decoration:underline}.card{background-color:var(--content-bg);border-radius:8px;padding:24px;box-shadow:0 4px 15px var(--shadow-color);margin-bottom:24px;border:1px solid rgba(0,0,0,.05)}.btn{display:inline-block;padding:8px 16px;background-color:var(--accent-color);color:#fff;border:none;border-radius:4px;font-size:14px;cursor:pointer;transition:background-color .3s,transform .2s}.btn:hover{background-color:#36a473;transform:translateY(-2px)}.btn-primary{background-color:#1890ff}.btn-primary:hover{background-color:#40a9ff}.btn-danger{background-color:#f5222d}.btn-danger:hover{background-color:#ff4d4f}.form-group{margin-bottom:16px}.form-group label{display:block;margin-bottom:8px;font-weight:500}.form-group input,.form-group select,.form-group textarea{width:100%;padding:10px 14px;border:1px solid #d1d5db;border-radius:6px;box-sizing:border-box;background-color:#f9fafb}.form-group input:focus,.form-group select:focus,.form-group textarea:focus{outline:none;border-color:var(--accent-color);box-shadow:0 0 0 3px #42b98333}table{width:100%;border-collapse:collapse}th,td{padding:12px 16px;border-bottom:1px solid var(--border-color);text-align:left}th{background-color:#f8f9fa;font-weight:600;border-bottom-width:2px}tbody tr:hover{background-color:#f1f5f9}


================================================================================

--- File: psychology-admin-frontend\dist-admin-new\assets\index-Du69prlt.js ---
var fp=Object.defineProperty;var hp=(e,t,n)=>t in e?fp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var W=(e,t,n)=>hp(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ta(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const wt={},ls=[],Ke=()=>{},dp=()=>!1,Fr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ca=e=>e.startsWith("onUpdate:"),zt=Object.assign,Oa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},pp=Object.prototype.hasOwnProperty,gt=(e,t)=>pp.call(e,t),Q=Array.isArray,cs=e=>ki(e)==="[object Map]",ys=e=>ki(e)==="[object Set]",Tl=e=>ki(e)==="[object Date]",it=e=>typeof e=="function",Pt=e=>typeof e=="string",Ge=e=>typeof e=="symbol",St=e=>e!==null&&typeof e=="object",ef=e=>(St(e)||it(e))&&it(e.then)&&it(e.catch),nf=Object.prototype.toString,ki=e=>nf.call(e),gp=e=>ki(e).slice(8,-1),sf=e=>ki(e)==="[object Object]",Pa=e=>Pt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qs=Ta(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Br=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},mp=/-(\w)/g,Ae=Br(e=>e.replace(mp,(t,n)=>n?n.toUpperCase():"")),bp=/\B([A-Z])/g,Xn=Br(e=>e.replace(bp,"-$1").toLowerCase()),zr=Br(e=>e.charAt(0).toUpperCase()+e.slice(1)),_o=Br(e=>e?`on${zr(e)}`:""),Sn=(e,t)=>!Object.is(e,t),er=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},rf=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},fr=e=>{const t=parseFloat(e);return isNaN(t)?e:t},_p=e=>{const t=Pt(e)?Number(e):NaN;return isNaN(t)?e:t};let Cl;const Hr=()=>Cl||(Cl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jr(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=Pt(s)?wp(s):jr(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(Pt(e)||St(e))return e}const yp=/;(?![^(]*\))/g,xp=/:([^]+)/,vp=/\/\*[^]*?\*\//g;function wp(e){const t={};return e.replace(vp,"").split(yp).forEach(n=>{if(n){const s=n.split(xp);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ce(e){let t="";if(Pt(e))t=e;else if(Q(e))for(let n=0;n<e.length;n++){const s=Ce(e[n]);s&&(t+=s+" ")}else if(St(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Sp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",kp=Ta(Sp);function of(e){return!!e||e===""}function Rp(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=Ri(e[s],t[s]);return n}function Ri(e,t){if(e===t)return!0;let n=Tl(e),s=Tl(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Ge(e),s=Ge(t),n||s)return e===t;if(n=Q(e),s=Q(t),n||s)return n&&s?Rp(e,t):!1;if(n=St(e),s=St(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Ri(e[o],t[o]))return!1}}return String(e)===String(t)}function Ma(e,t){return e.findIndex(n=>Ri(n,t))}const af=e=>!!(e&&e.__v_isRef===!0),G=e=>Pt(e)?e:e==null?"":Q(e)||St(e)&&(e.toString===nf||!it(e.toString))?af(e)?G(e.value):JSON.stringify(e,lf,2):String(e),lf=(e,t)=>af(t)?lf(e,t.value):cs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[yo(s,r)+" =>"]=i,n),{})}:ys(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>yo(n))}:Ge(t)?yo(t):St(t)&&!Q(t)&&!sf(t)?String(t):t,yo=(e,t="")=>{var n;return Ge(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let le;class cf{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=le,!t&&le&&(this.index=(le.scopes||(le.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=le;try{return le=this,t()}finally{le=n}}}on(){++this._on===1&&(this.prevScope=le,le=this)}off(){this._on>0&&--this._on===0&&(le=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Ep(e){return new cf(e)}function Ap(){return le}let Et;const xo=new WeakSet;class uf{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,le&&le.active&&le.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xo.has(this)&&(xo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||hf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ol(this),df(this);const t=Et,n=Oe;Et=this,Oe=!0;try{return this.fn()}finally{pf(this),Et=t,Oe=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Da(t);this.deps=this.depsTail=void 0,Ol(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ko(this)&&this.run()}get dirty(){return Ko(this)}}let ff=0,Ks,Gs;function hf(e,t=!1){if(e.flags|=8,t){e.next=Gs,Gs=e;return}e.next=Ks,Ks=e}function Ia(){ff++}function La(){if(--ff>0)return;if(Gs){let t=Gs;for(Gs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ks;){let t=Ks;for(Ks=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function df(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function pf(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Da(s),Tp(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function Ko(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(gf(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function gf(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===oi)||(e.globalVersion=oi,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ko(e))))return;e.flags|=2;const t=e.dep,n=Et,s=Oe;Et=e,Oe=!0;try{df(e);const i=e.fn(e._value);(t.version===0||Sn(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Et=n,Oe=s,pf(e),e.flags&=-3}}function Da(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Da(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Tp(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Oe=!0;const mf=[];function un(){mf.push(Oe),Oe=!1}function fn(){const e=mf.pop();Oe=e===void 0?!0:e}function Ol(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Et;Et=void 0;try{t()}finally{Et=n}}}let oi=0;class Cp{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $a{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Et||!Oe||Et===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Et)n=this.activeLink=new Cp(Et,this),Et.deps?(n.prevDep=Et.depsTail,Et.depsTail.nextDep=n,Et.depsTail=n):Et.deps=Et.depsTail=n,bf(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Et.depsTail,n.nextDep=void 0,Et.depsTail.nextDep=n,Et.depsTail=n,Et.deps===n&&(Et.deps=s)}return n}trigger(t){this.version++,oi++,this.notify(t)}notify(t){Ia();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{La()}}}function bf(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)bf(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Go=new WeakMap,Vn=Symbol(""),Yo=Symbol(""),ai=Symbol("");function Kt(e,t,n){if(Oe&&Et){let s=Go.get(e);s||Go.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new $a),i.map=s,i.key=n),i.track()}}function rn(e,t,n,s,i,r){const o=Go.get(e);if(!o){oi++;return}const a=l=>{l&&l.trigger()};if(Ia(),t==="clear")o.forEach(a);else{const l=Q(e),c=l&&Pa(n);if(l&&n==="length"){const u=Number(s);o.forEach((f,h)=>{(h==="length"||h===ai||!Ge(h)&&h>=u)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(ai)),t){case"add":l?c&&a(o.get("length")):(a(o.get(Vn)),cs(e)&&a(o.get(Yo)));break;case"delete":l||(a(o.get(Vn)),cs(e)&&a(o.get(Yo)));break;case"set":cs(e)&&a(o.get(Vn));break}}La()}function Zn(e){const t=ct(e);return t===e?t:(Kt(t,"iterate",ai),Re(e)?t:t.map(Ht))}function Vr(e){return Kt(e=ct(e),"iterate",ai),e}const Op={__proto__:null,[Symbol.iterator](){return vo(this,Symbol.iterator,Ht)},concat(...e){return Zn(this).concat(...e.map(t=>Q(t)?Zn(t):t))},entries(){return vo(this,"entries",e=>(e[1]=Ht(e[1]),e))},every(e,t){return Ye(this,"every",e,t,void 0,arguments)},filter(e,t){return Ye(this,"filter",e,t,n=>n.map(Ht),arguments)},find(e,t){return Ye(this,"find",e,t,Ht,arguments)},findIndex(e,t){return Ye(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ye(this,"findLast",e,t,Ht,arguments)},findLastIndex(e,t){return Ye(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ye(this,"forEach",e,t,void 0,arguments)},includes(...e){return wo(this,"includes",e)},indexOf(...e){return wo(this,"indexOf",e)},join(e){return Zn(this).join(e)},lastIndexOf(...e){return wo(this,"lastIndexOf",e)},map(e,t){return Ye(this,"map",e,t,void 0,arguments)},pop(){return Ts(this,"pop")},push(...e){return Ts(this,"push",e)},reduce(e,...t){return Pl(this,"reduce",e,t)},reduceRight(e,...t){return Pl(this,"reduceRight",e,t)},shift(){return Ts(this,"shift")},some(e,t){return Ye(this,"some",e,t,void 0,arguments)},splice(...e){return Ts(this,"splice",e)},toReversed(){return Zn(this).toReversed()},toSorted(e){return Zn(this).toSorted(e)},toSpliced(...e){return Zn(this).toSpliced(...e)},unshift(...e){return Ts(this,"unshift",e)},values(){return vo(this,"values",Ht)}};function vo(e,t,n){const s=Vr(e),i=s[t]();return s!==e&&!Re(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const Pp=Array.prototype;function Ye(e,t,n,s,i,r){const o=Vr(e),a=o!==e&&!Re(e),l=o[t];if(l!==Pp[t]){const f=l.apply(e,r);return a?Ht(f):f}let c=n;o!==e&&(a?c=function(f,h){return n.call(this,Ht(f),h,e)}:n.length>2&&(c=function(f,h){return n.call(this,f,h,e)}));const u=l.call(o,c,s);return a&&i?i(u):u}function Pl(e,t,n,s){const i=Vr(e);let r=n;return i!==e&&(Re(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,Ht(a),l,e)}),i[t](r,...s)}function wo(e,t,n){const s=ct(e);Kt(s,"iterate",ai);const i=s[t](...n);return(i===-1||i===!1)&&Ai(n[0])?(n[0]=ct(n[0]),s[t](...n)):i}function Ts(e,t,n=[]){un(),Ia();const s=ct(e)[t].apply(e,n);return La(),fn(),s}const Mp=Ta("__proto__,__v_isRef,__isVue"),_f=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ge));function Ip(e){Ge(e)||(e=String(e));const t=ct(this);return Kt(t,"has",e),t.hasOwnProperty(e)}class yf{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?Vp:Sf:r?wf:vf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=Q(t);if(!i){let l;if(o&&(l=Op[n]))return l;if(n==="hasOwnProperty")return Ip}const a=Reflect.get(t,n,Xt(t)?t:s);return(Ge(n)?_f.has(n):Mp(n))||(i||Kt(t,"get",n),r)?a:Xt(a)?o&&Pa(n)?a:a.value:St(a)?i?Rf(a):Ei(a):a}}class xf extends yf{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const l=An(r);if(!Re(s)&&!An(s)&&(r=ct(r),s=ct(s)),!Q(t)&&Xt(r)&&!Xt(s))return l?!1:(r.value=s,!0)}const o=Q(t)&&Pa(n)?Number(n)<t.length:gt(t,n),a=Reflect.set(t,n,s,Xt(t)?t:i);return t===ct(i)&&(o?Sn(s,r)&&rn(t,"set",n,s):rn(t,"add",n,s)),a}deleteProperty(t,n){const s=gt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&rn(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!Ge(n)||!_f.has(n))&&Kt(t,"has",n),s}ownKeys(t){return Kt(t,"iterate",Q(t)?"length":Vn),Reflect.ownKeys(t)}}class Lp extends yf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Dp=new xf,$p=new Lp,Np=new xf(!0);const Xo=e=>e,$i=e=>Reflect.getPrototypeOf(e);function Fp(e,t,n){return function(...s){const i=this.__v_raw,r=ct(i),o=cs(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...s),u=n?Xo:t?hr:Ht;return!t&&Kt(r,"iterate",l?Yo:Vn),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Ni(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Bp(e,t){const n={get(i){const r=this.__v_raw,o=ct(r),a=ct(i);e||(Sn(i,a)&&Kt(o,"get",i),Kt(o,"get",a));const{has:l}=$i(o),c=t?Xo:e?hr:Ht;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Kt(ct(i),"iterate",Vn),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=ct(r),a=ct(i);return e||(Sn(i,a)&&Kt(o,"has",i),Kt(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=ct(a),c=t?Xo:e?hr:Ht;return!e&&Kt(l,"iterate",Vn),a.forEach((u,f)=>i.call(r,c(u),c(f),o))}};return zt(n,e?{add:Ni("add"),set:Ni("set"),delete:Ni("delete"),clear:Ni("clear")}:{add(i){!t&&!Re(i)&&!An(i)&&(i=ct(i));const r=ct(this);return $i(r).has.call(r,i)||(r.add(i),rn(r,"add",i,i)),this},set(i,r){!t&&!Re(r)&&!An(r)&&(r=ct(r));const o=ct(this),{has:a,get:l}=$i(o);let c=a.call(o,i);c||(i=ct(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?Sn(r,u)&&rn(o,"set",i,r):rn(o,"add",i,r),this},delete(i){const r=ct(this),{has:o,get:a}=$i(r);let l=o.call(r,i);l||(i=ct(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&rn(r,"delete",i,void 0),c},clear(){const i=ct(this),r=i.size!==0,o=i.clear();return r&&rn(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Fp(i,e,t)}),n}function Na(e,t){const n=Bp(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(gt(n,i)&&i in s?n:s,i,r)}const zp={get:Na(!1,!1)},Hp={get:Na(!1,!0)},jp={get:Na(!0,!1)};const vf=new WeakMap,wf=new WeakMap,Sf=new WeakMap,Vp=new WeakMap;function Up(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Wp(e){return e.__v_skip||!Object.isExtensible(e)?0:Up(gp(e))}function Ei(e){return An(e)?e:Fa(e,!1,Dp,zp,vf)}function kf(e){return Fa(e,!1,Np,Hp,wf)}function Rf(e){return Fa(e,!0,$p,jp,Sf)}function Fa(e,t,n,s,i){if(!St(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Wp(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?s:n);return i.set(e,a),a}function us(e){return An(e)?us(e.__v_raw):!!(e&&e.__v_isReactive)}function An(e){return!!(e&&e.__v_isReadonly)}function Re(e){return!!(e&&e.__v_isShallow)}function Ai(e){return e?!!e.__v_raw:!1}function ct(e){const t=e&&e.__v_raw;return t?ct(t):e}function qp(e){return!gt(e,"__v_skip")&&Object.isExtensible(e)&&rf(e,"__v_skip",!0),e}const Ht=e=>St(e)?Ei(e):e,hr=e=>St(e)?Rf(e):e;function Xt(e){return e?e.__v_isRef===!0:!1}function vt(e){return Ef(e,!1)}function Ba(e){return Ef(e,!0)}function Ef(e,t){return Xt(e)?e:new Kp(e,t)}class Kp{constructor(t,n){this.dep=new $a,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ct(t),this._value=n?t:Ht(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||Re(t)||An(t);t=s?t:ct(t),Sn(t,n)&&(this._rawValue=t,this._value=s?t:Ht(t),this.dep.trigger())}}function kn(e){return Xt(e)?e.value:e}const Gp={get:(e,t,n)=>t==="__v_raw"?e:kn(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return Xt(i)&&!Xt(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function Af(e){return us(e)?e:new Proxy(e,Gp)}class Yp{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new $a(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=oi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Et!==this)return hf(this,!0),!0}get value(){const t=this.dep.track();return gf(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Xp(e,t,n=!1){let s,i;return it(e)?s=e:(s=e.get,i=e.set),new Yp(s,i,n)}const Fi={},dr=new WeakMap;let Fn;function Qp(e,t=!1,n=Fn){if(n){let s=dr.get(n);s||dr.set(n,s=[]),s.push(e)}}function Jp(e,t,n=wt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,c=k=>i?k:Re(k)||i===!1||i===0?on(k,1):on(k);let u,f,h,d,g=!1,m=!1;if(Xt(e)?(f=()=>e.value,g=Re(e)):us(e)?(f=()=>c(e),g=!0):Q(e)?(m=!0,g=e.some(k=>us(k)||Re(k)),f=()=>e.map(k=>{if(Xt(k))return k.value;if(us(k))return c(k);if(it(k))return l?l(k,2):k()})):it(e)?t?f=l?()=>l(e,2):e:f=()=>{if(h){un();try{h()}finally{fn()}}const k=Fn;Fn=u;try{return l?l(e,3,[d]):e(d)}finally{Fn=k}}:f=Ke,t&&i){const k=f,C=i===!0?1/0:i;f=()=>on(k(),C)}const b=Ap(),x=()=>{u.stop(),b&&b.active&&Oa(b.effects,u)};if(r&&t){const k=t;t=(...C)=>{k(...C),x()}}let v=m?new Array(e.length).fill(Fi):Fi;const S=k=>{if(!(!(u.flags&1)||!u.dirty&&!k))if(t){const C=u.run();if(i||g||(m?C.some(($,P)=>Sn($,v[P])):Sn(C,v))){h&&h();const $=Fn;Fn=u;try{const P=[C,v===Fi?void 0:m&&v[0]===Fi?[]:v,d];v=C,l?l(t,3,P):t(...P)}finally{Fn=$}}}else u.run()};return a&&a(S),u=new uf(f),u.scheduler=o?()=>o(S,!1):S,d=k=>Qp(k,!1,u),h=u.onStop=()=>{const k=dr.get(u);if(k){if(l)l(k,4);else for(const C of k)C();dr.delete(u)}},t?s?S(!0):v=u.run():o?o(S.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function on(e,t=1/0,n){if(t<=0||!St(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Xt(e))on(e.value,t,n);else if(Q(e))for(let s=0;s<e.length;s++)on(e[s],t,n);else if(ys(e)||cs(e))e.forEach(s=>{on(s,t,n)});else if(sf(e)){for(const s in e)on(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&on(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ti(e,t,n,s){try{return s?e(...s):e()}catch(i){Ur(i,t,n)}}function Pe(e,t,n,s){if(it(e)){const i=Ti(e,t,n,s);return i&&ef(i)&&i.catch(r=>{Ur(r,t,n)}),i}if(Q(e)){const i=[];for(let r=0;r<e.length;r++)i.push(Pe(e[r],t,n,s));return i}}function Ur(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||wt;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,l,c)===!1)return}a=a.parent}if(r){un(),Ti(r,null,10,[e,l,c]),fn();return}}Zp(e,n,i,s,o)}function Zp(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const ee=[];let Ue=-1;const fs=[];let bn=null,rs=0;const Tf=Promise.resolve();let pr=null;function Wr(e){const t=pr||Tf;return e?t.then(this?e.bind(this):e):t}function tg(e){let t=Ue+1,n=ee.length;for(;t<n;){const s=t+n>>>1,i=ee[s],r=li(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function za(e){if(!(e.flags&1)){const t=li(e),n=ee[ee.length-1];!n||!(e.flags&2)&&t>=li(n)?ee.push(e):ee.splice(tg(t),0,e),e.flags|=1,Cf()}}function Cf(){pr||(pr=Tf.then(Pf))}function eg(e){Q(e)?fs.push(...e):bn&&e.id===-1?bn.splice(rs+1,0,e):e.flags&1||(fs.push(e),e.flags|=1),Cf()}function Ml(e,t,n=Ue+1){for(;n<ee.length;n++){const s=ee[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;ee.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Of(e){if(fs.length){const t=[...new Set(fs)].sort((n,s)=>li(n)-li(s));if(fs.length=0,bn){bn.push(...t);return}for(bn=t,rs=0;rs<bn.length;rs++){const n=bn[rs];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}bn=null,rs=0}}const li=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Pf(e){try{for(Ue=0;Ue<ee.length;Ue++){const t=ee[Ue];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ti(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ue<ee.length;Ue++){const t=ee[Ue];t&&(t.flags&=-2)}Ue=-1,ee.length=0,Of(),pr=null,(ee.length||fs.length)&&Pf()}}let ue=null,Mf=null;function gr(e){const t=ue;return ue=e,Mf=e&&e.type.__scopeId||null,t}function be(e,t=ue,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&Vl(-1);const r=gr(t);let o;try{o=e(...i)}finally{gr(r),s._d&&Vl(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ft(e,t){if(ue===null)return e;const n=Qr(ue),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=wt]=t[i];r&&(it(r)&&(r={mounted:r,updated:r}),r.deep&&on(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function On(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(un(),Pe(l,n,8,[e.el,a,e,t]),fn())}}const ng=Symbol("_vte"),If=e=>e.__isTeleport,_n=Symbol("_leaveCb"),Bi=Symbol("_enterCb");function sg(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xs(()=>{e.isMounted=!0}),Hf(()=>{e.isUnmounting=!0}),e}const ve=[Function,Array],Lf={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ve,onEnter:ve,onAfterEnter:ve,onEnterCancelled:ve,onBeforeLeave:ve,onLeave:ve,onAfterLeave:ve,onLeaveCancelled:ve,onBeforeAppear:ve,onAppear:ve,onAfterAppear:ve,onAppearCancelled:ve},Df=e=>{const t=e.subTree;return t.component?Df(t.component):t},ig={name:"BaseTransition",props:Lf,setup(e,{slots:t}){const n=Jg(),s=sg();return()=>{const i=t.default&&Ff(t.default(),!0);if(!i||!i.length)return;const r=$f(i),o=ct(e),{mode:a}=o;if(s.isLeaving)return So(r);const l=Il(r);if(!l)return So(r);let c=Qo(l,o,s,n,f=>c=f);l.type!==ne&&ci(l,c);let u=n.subTree&&Il(n.subTree);if(u&&u.type!==ne&&!zn(l,u)&&Df(n).type!==ne){let f=Qo(u,o,s,n);if(ci(u,f),a==="out-in"&&l.type!==ne)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,u=void 0},So(r);a==="in-out"&&l.type!==ne?f.delayLeave=(h,d,g)=>{const m=Nf(s,u);m[String(u.key)]=u,h[_n]=()=>{d(),h[_n]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function $f(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==ne){t=n;break}}return t}const rg=ig;function Nf(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function Qo(e,t,n,s,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:d,onAfterLeave:g,onLeaveCancelled:m,onBeforeAppear:b,onAppear:x,onAfterAppear:v,onAppearCancelled:S}=t,k=String(e.key),C=Nf(n,e),$=(N,H)=>{N&&Pe(N,s,9,H)},P=(N,H)=>{const K=H[1];$(N,H),Q(N)?N.every(M=>M.length<=1)&&K():N.length<=1&&K()},D={mode:o,persisted:a,beforeEnter(N){let H=l;if(!n.isMounted)if(r)H=b||l;else return;N[_n]&&N[_n](!0);const K=C[k];K&&zn(e,K)&&K.el[_n]&&K.el[_n](),$(H,[N])},enter(N){let H=c,K=u,M=f;if(!n.isMounted)if(r)H=x||c,K=v||u,M=S||f;else return;let tt=!1;const ft=N[Bi]=rt=>{tt||(tt=!0,rt?$(M,[N]):$(K,[N]),D.delayedLeave&&D.delayedLeave(),N[Bi]=void 0)};H?P(H,[N,ft]):ft()},leave(N,H){const K=String(e.key);if(N[Bi]&&N[Bi](!0),n.isUnmounting)return H();$(h,[N]);let M=!1;const tt=N[_n]=ft=>{M||(M=!0,H(),ft?$(m,[N]):$(g,[N]),N[_n]=void 0,C[K]===e&&delete C[K])};C[K]=e,d?P(d,[N,tt]):tt()},clone(N){const H=Qo(N,t,n,s,i);return i&&i(H),H}};return D}function So(e){if(Kr(e))return e=Tn(e),e.children=null,e}function Il(e){if(!Kr(e))return If(e.type)&&e.children?$f(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&it(n.default))return n.default()}}function ci(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ci(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ff(e,t=!1,n){let s=[],i=0;for(let r=0;r<e.length;r++){let o=e[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===jt?(o.patchFlag&128&&i++,s=s.concat(Ff(o.children,t,a))):(t||o.type!==ne)&&s.push(a!=null?Tn(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function qr(e,t){return it(e)?zt({name:e.name},t,{setup:e}):e}function Bf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function mr(e,t,n,s,i=!1){if(Q(e)){e.forEach((g,m)=>mr(g,t&&(Q(t)?t[m]:t),n,s,i));return}if(Ys(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&mr(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?Qr(s.component):s.el,o=i?null:r,{i:a,r:l}=e,c=t&&t.r,u=a.refs===wt?a.refs={}:a.refs,f=a.setupState,h=ct(f),d=f===wt?()=>!1:g=>gt(h,g);if(c!=null&&c!==l&&(Pt(c)?(u[c]=null,d(c)&&(f[c]=null)):Xt(c)&&(c.value=null)),it(l))Ti(l,a,12,[o,u]);else{const g=Pt(l),m=Xt(l);if(g||m){const b=()=>{if(e.f){const x=g?d(l)?f[l]:u[l]:l.value;i?Q(x)&&Oa(x,r):Q(x)?x.includes(r)||x.push(r):g?(u[l]=[r],d(l)&&(f[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else g?(u[l]=o,d(l)&&(f[l]=o)):m&&(l.value=o,e.k&&(u[e.k]=o))};o?(b.id=-1,me(b,n)):b()}}}Hr().requestIdleCallback;Hr().cancelIdleCallback;const Ys=e=>!!e.type.__asyncLoader,Kr=e=>e.type.__isKeepAlive;function og(e,t){zf(e,"a",t)}function ag(e,t){zf(e,"da",t)}function zf(e,t,n=Vt){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Gr(t,s,n),n){let i=n.parent;for(;i&&i.parent;)Kr(i.parent.vnode)&&lg(s,t,n,i),i=i.parent}}function lg(e,t,n,s){const i=Gr(t,e,s,!0);Ha(()=>{Oa(s[t],i)},n)}function Gr(e,t,n=Vt,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{un();const a=Ci(n),l=Pe(t,n,e,o);return a(),fn(),l});return s?i.unshift(r):i.push(r),r}}const dn=e=>(t,n=Vt)=>{(!hi||e==="sp")&&Gr(e,(...s)=>t(...s),n)},cg=dn("bm"),xs=dn("m"),ug=dn("bu"),fg=dn("u"),Hf=dn("bum"),Ha=dn("um"),hg=dn("sp"),dg=dn("rtg"),pg=dn("rtc");function gg(e,t=Vt){Gr("ec",e,t)}const jf="components";function ja(e,t){return Uf(jf,e,!0,t)||e}const Vf=Symbol.for("v-ndc");function mg(e){return Pt(e)?Uf(jf,e,!1)||e:e||Vf}function Uf(e,t,n=!0,s=!1){const i=ue||Vt;if(i){const r=i.type;{const a=sm(r,!1);if(a&&(a===t||a===Ae(t)||a===zr(Ae(t))))return r}const o=Ll(i[e]||r[e],t)||Ll(i.appContext[e],t);return!o&&s?r:o}}function Ll(e,t){return e&&(e[t]||e[Ae(t)]||e[zr(Ae(t))])}function qn(e,t,n,s){let i;const r=n,o=Q(e);if(o||Pt(e)){const a=o&&us(e);let l=!1,c=!1;a&&(l=!Re(e),c=An(e),e=Vr(e)),i=new Array(e.length);for(let u=0,f=e.length;u<f;u++)i[u]=t(l?c?hr(Ht(e[u])):Ht(e[u]):e[u],u,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r)}else if(St(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(e[u],u,l,r)}}else i=[];return i}const Jo=e=>e?uh(e)?Qr(e):Jo(e.parent):null,Xs=zt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Jo(e.parent),$root:e=>Jo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>qf(e),$forceUpdate:e=>e.f||(e.f=()=>{za(e.update)}),$nextTick:e=>e.n||(e.n=Wr.bind(e.proxy)),$watch:e=>Ng.bind(e)}),ko=(e,t)=>e!==wt&&!e.__isScriptSetup&&gt(e,t),bg={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(ko(s,t))return o[t]=1,s[t];if(i!==wt&&gt(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&gt(c,t))return o[t]=3,r[t];if(n!==wt&&gt(n,t))return o[t]=4,n[t];Zo&&(o[t]=0)}}const u=Xs[t];let f,h;if(u)return t==="$attrs"&&Kt(e.attrs,"get",""),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==wt&&gt(n,t))return o[t]=4,n[t];if(h=l.config.globalProperties,gt(h,t))return h[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return ko(i,t)?(i[t]=n,!0):s!==wt&&gt(s,t)?(s[t]=n,!0):gt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||e!==wt&&gt(e,o)||ko(t,o)||(a=r[0])&&gt(a,o)||gt(s,o)||gt(Xs,o)||gt(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:gt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Dl(e){return Q(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Zo=!0;function _g(e){const t=qf(e),n=e.proxy,s=e.ctx;Zo=!1,t.beforeCreate&&$l(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:m,deactivated:b,beforeDestroy:x,beforeUnmount:v,destroyed:S,unmounted:k,render:C,renderTracked:$,renderTriggered:P,errorCaptured:D,serverPrefetch:N,expose:H,inheritAttrs:K,components:M,directives:tt,filters:ft}=t;if(c&&yg(c,s,null),o)for(const Z in o){const ot=o[Z];it(ot)&&(s[Z]=ot.bind(n))}if(i){const Z=i.call(n,n);St(Z)&&(e.data=Ei(Z))}if(Zo=!0,r)for(const Z in r){const ot=r[Z],kt=it(ot)?ot.bind(n,n):it(ot.get)?ot.get.bind(n,n):Ke,Qt=!it(ot)&&it(ot.set)?ot.set.bind(n):Ke,Jt=Ct({get:kt,set:Qt});Object.defineProperty(s,Z,{enumerable:!0,configurable:!0,get:()=>Jt.value,set:Mt=>Jt.value=Mt})}if(a)for(const Z in a)Wf(a[Z],s,n,Z);if(l){const Z=it(l)?l.call(n):l;Reflect.ownKeys(Z).forEach(ot=>{nr(ot,Z[ot])})}u&&$l(u,e,"c");function et(Z,ot){Q(ot)?ot.forEach(kt=>Z(kt.bind(n))):ot&&Z(ot.bind(n))}if(et(cg,f),et(xs,h),et(ug,d),et(fg,g),et(og,m),et(ag,b),et(gg,D),et(pg,$),et(dg,P),et(Hf,v),et(Ha,k),et(hg,N),Q(H))if(H.length){const Z=e.exposed||(e.exposed={});H.forEach(ot=>{Object.defineProperty(Z,ot,{get:()=>n[ot],set:kt=>n[ot]=kt})})}else e.exposed||(e.exposed={});C&&e.render===Ke&&(e.render=C),K!=null&&(e.inheritAttrs=K),M&&(e.components=M),tt&&(e.directives=tt),N&&Bf(e)}function yg(e,t,n=Ke){Q(e)&&(e=ta(e));for(const s in e){const i=e[s];let r;St(i)?"default"in i?r=Ee(i.from||s,i.default,!0):r=Ee(i.from||s):r=Ee(i),Xt(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function $l(e,t,n){Pe(Q(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Wf(e,t,n,s){let i=s.includes(".")?rh(n,s):()=>n[s];if(Pt(e)){const r=t[e];it(r)&&Rn(i,r)}else if(it(e))Rn(i,e.bind(n));else if(St(e))if(Q(e))e.forEach(r=>Wf(r,t,n,s));else{const r=it(e.handler)?e.handler.bind(n):t[e.handler];it(r)&&Rn(i,r,e)}}function qf(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(c=>br(l,c,o,!0)),br(l,t,o)),St(t)&&r.set(t,l),l}function br(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&br(e,r,n,!0),i&&i.forEach(o=>br(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=xg[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const xg={data:Nl,props:Fl,emits:Fl,methods:zs,computed:zs,beforeCreate:Zt,created:Zt,beforeMount:Zt,mounted:Zt,beforeUpdate:Zt,updated:Zt,beforeDestroy:Zt,beforeUnmount:Zt,destroyed:Zt,unmounted:Zt,activated:Zt,deactivated:Zt,errorCaptured:Zt,serverPrefetch:Zt,components:zs,directives:zs,watch:wg,provide:Nl,inject:vg};function Nl(e,t){return t?e?function(){return zt(it(e)?e.call(this,this):e,it(t)?t.call(this,this):t)}:t:e}function vg(e,t){return zs(ta(e),ta(t))}function ta(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Zt(e,t){return e?[...new Set([].concat(e,t))]:t}function zs(e,t){return e?zt(Object.create(null),e,t):t}function Fl(e,t){return e?Q(e)&&Q(t)?[...new Set([...e,...t])]:zt(Object.create(null),Dl(e),Dl(t??{})):t}function wg(e,t){if(!e)return t;if(!t)return e;const n=zt(Object.create(null),e);for(const s in t)n[s]=Zt(e[s],t[s]);return n}function Kf(){return{app:null,config:{isNativeTag:dp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sg=0;function kg(e,t){return function(s,i=null){it(s)||(s=zt({},s)),i!=null&&!St(i)&&(i=null);const r=Kf(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:Sg++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:hh,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&it(u.install)?(o.add(u),u.install(c,...f)):it(u)&&(o.add(u),u(c,...f))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,f){return f?(r.components[u]=f,c):r.components[u]},directive(u,f){return f?(r.directives[u]=f,c):r.directives[u]},mount(u,f,h){if(!l){const d=c._ceVNode||ut(s,i);return d.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),e(d,u,h),l=!0,c._container=u,u.__vue_app__=c,Qr(d.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Pe(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,f){return r.provides[u]=f,c},runWithContext(u){const f=hs;hs=c;try{return u()}finally{hs=f}}};return c}}let hs=null;function nr(e,t){if(Vt){let n=Vt.provides;const s=Vt.parent&&Vt.parent.provides;s===n&&(n=Vt.provides=Object.create(s)),n[e]=t}}function Ee(e,t,n=!1){const s=Vt||ue;if(s||hs){let i=hs?hs._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&it(t)?t.call(s&&s.proxy):t}}const Gf={},Yf=()=>Object.create(Gf),Xf=e=>Object.getPrototypeOf(e)===Gf;function Rg(e,t,n,s=!1){const i={},r=Yf();e.propsDefaults=Object.create(null),Qf(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:kf(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function Eg(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=ct(i),[l]=e.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Yr(e.emitsOptions,h))continue;const d=t[h];if(l)if(gt(r,h))d!==r[h]&&(r[h]=d,c=!0);else{const g=Ae(h);i[g]=ea(l,a,g,d,e,!1)}else d!==r[h]&&(r[h]=d,c=!0)}}}else{Qf(e,t,i,r)&&(c=!0);let u;for(const f in a)(!t||!gt(t,f)&&((u=Xn(f))===f||!gt(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=ea(l,a,f,void 0,e,!0)):delete i[f]);if(r!==a)for(const f in r)(!t||!gt(t,f))&&(delete r[f],c=!0)}c&&rn(e.attrs,"set","")}function Qf(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(qs(l))continue;const c=t[l];let u;i&&gt(i,u=Ae(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:Yr(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=ct(n),c=a||wt;for(let u=0;u<r.length;u++){const f=r[u];n[f]=ea(i,l,f,c[f],e,!gt(c,f))}}return o}function ea(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=gt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&it(l)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const u=Ci(i);s=c[n]=l.call(null,t),u()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Xn(n))&&(s=!0))}return s}const Ag=new WeakMap;function Jf(e,t,n=!1){const s=n?Ag:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!it(e)){const u=f=>{l=!0;const[h,d]=Jf(f,t,!0);zt(o,h),d&&a.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return St(e)&&s.set(e,ls),ls;if(Q(r))for(let u=0;u<r.length;u++){const f=Ae(r[u]);Bl(f)&&(o[f]=wt)}else if(r)for(const u in r){const f=Ae(u);if(Bl(f)){const h=r[u],d=o[f]=Q(h)||it(h)?{type:h}:zt({},h),g=d.type;let m=!1,b=!0;if(Q(g))for(let x=0;x<g.length;++x){const v=g[x],S=it(v)&&v.name;if(S==="Boolean"){m=!0;break}else S==="String"&&(b=!1)}else m=it(g)&&g.name==="Boolean";d[0]=m,d[1]=b,(m||gt(d,"default"))&&a.push(f)}}const c=[o,a];return St(e)&&s.set(e,c),c}function Bl(e){return e[0]!=="$"&&!qs(e)}const Va=e=>e[0]==="_"||e==="$stable",Ua=e=>Q(e)?e.map(qe):[qe(e)],Tg=(e,t,n)=>{if(t._n)return t;const s=be((...i)=>Ua(t(...i)),n);return s._c=!1,s},Zf=(e,t,n)=>{const s=e._ctx;for(const i in e){if(Va(i))continue;const r=e[i];if(it(r))t[i]=Tg(i,r,s);else if(r!=null){const o=Ua(r);t[i]=()=>o}}},th=(e,t)=>{const n=Ua(t);e.slots.default=()=>n},eh=(e,t,n)=>{for(const s in t)(n||!Va(s))&&(e[s]=t[s])},Cg=(e,t,n)=>{const s=e.slots=Yf();if(e.vnode.shapeFlag&32){const i=t._;i?(eh(s,t,n),n&&rf(s,"_",i,!0)):Zf(t,s)}else t&&th(e,t)},Og=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=wt;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:eh(i,t,n):(r=!t.$stable,Zf(t,i)),o=t}else t&&(th(e,t),o={default:1});if(r)for(const a in i)!Va(a)&&o[a]==null&&delete i[a]},me=Ug;function Pg(e){return Mg(e)}function Mg(e,t){const n=Hr();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=Ke,insertStaticContent:g}=e,m=(_,y,w,E=null,O=null,T=null,j=void 0,z=null,F=!!y.dynamicChildren)=>{if(_===y)return;_&&!zn(_,y)&&(E=A(_),Mt(_,O,T,!0),_=null),y.patchFlag===-2&&(F=!1,y.dynamicChildren=null);const{type:I,ref:J,shapeFlag:U}=y;switch(I){case Xr:b(_,y,w,E);break;case ne:x(_,y,w,E);break;case Eo:_==null&&v(y,w,E,j);break;case jt:M(_,y,w,E,O,T,j,z,F);break;default:U&1?C(_,y,w,E,O,T,j,z,F):U&6?tt(_,y,w,E,O,T,j,z,F):(U&64||U&128)&&I.process(_,y,w,E,O,T,j,z,F,Y)}J!=null&&O&&mr(J,_&&_.ref,T,y||_,!y)},b=(_,y,w,E)=>{if(_==null)s(y.el=a(y.children),w,E);else{const O=y.el=_.el;y.children!==_.children&&c(O,y.children)}},x=(_,y,w,E)=>{_==null?s(y.el=l(y.children||""),w,E):y.el=_.el},v=(_,y,w,E)=>{[_.el,_.anchor]=g(_.children,y,w,E,_.el,_.anchor)},S=({el:_,anchor:y},w,E)=>{let O;for(;_&&_!==y;)O=h(_),s(_,w,E),_=O;s(y,w,E)},k=({el:_,anchor:y})=>{let w;for(;_&&_!==y;)w=h(_),i(_),_=w;i(y)},C=(_,y,w,E,O,T,j,z,F)=>{y.type==="svg"?j="svg":y.type==="math"&&(j="mathml"),_==null?$(y,w,E,O,T,j,z,F):N(_,y,O,T,j,z,F)},$=(_,y,w,E,O,T,j,z)=>{let F,I;const{props:J,shapeFlag:U,transition:X,dirs:st}=_;if(F=_.el=o(_.type,T,J&&J.is,J),U&8?u(F,_.children):U&16&&D(_.children,F,null,E,O,Ro(_,T),j,z),st&&On(_,null,E,"created"),P(F,_,_.scopeId,j,E),J){for(const Rt in J)Rt!=="value"&&!qs(Rt)&&r(F,Rt,null,J[Rt],T,E);"value"in J&&r(F,"value",null,J.value,T),(I=J.onVnodeBeforeMount)&&Be(I,E,_)}st&&On(_,null,E,"beforeMount");const lt=Ig(O,X);lt&&X.beforeEnter(F),s(F,y,w),((I=J&&J.onVnodeMounted)||lt||st)&&me(()=>{I&&Be(I,E,_),lt&&X.enter(F),st&&On(_,null,E,"mounted")},O)},P=(_,y,w,E,O)=>{if(w&&d(_,w),E)for(let T=0;T<E.length;T++)d(_,E[T]);if(O){let T=O.subTree;if(y===T||ah(T.type)&&(T.ssContent===y||T.ssFallback===y)){const j=O.vnode;P(_,j,j.scopeId,j.slotScopeIds,O.parent)}}},D=(_,y,w,E,O,T,j,z,F=0)=>{for(let I=F;I<_.length;I++){const J=_[I]=z?yn(_[I]):qe(_[I]);m(null,J,y,w,E,O,T,j,z)}},N=(_,y,w,E,O,T,j)=>{const z=y.el=_.el;let{patchFlag:F,dynamicChildren:I,dirs:J}=y;F|=_.patchFlag&16;const U=_.props||wt,X=y.props||wt;let st;if(w&&Pn(w,!1),(st=X.onVnodeBeforeUpdate)&&Be(st,w,y,_),J&&On(y,_,w,"beforeUpdate"),w&&Pn(w,!0),(U.innerHTML&&X.innerHTML==null||U.textContent&&X.textContent==null)&&u(z,""),I?H(_.dynamicChildren,I,z,w,E,Ro(y,O),T):j||ot(_,y,z,null,w,E,Ro(y,O),T,!1),F>0){if(F&16)K(z,U,X,w,O);else if(F&2&&U.class!==X.class&&r(z,"class",null,X.class,O),F&4&&r(z,"style",U.style,X.style,O),F&8){const lt=y.dynamicProps;for(let Rt=0;Rt<lt.length;Rt++){const _t=lt[Rt],pe=U[_t],re=X[_t];(re!==pe||_t==="value")&&r(z,_t,pe,re,O,w)}}F&1&&_.children!==y.children&&u(z,y.children)}else!j&&I==null&&K(z,U,X,w,O);((st=X.onVnodeUpdated)||J)&&me(()=>{st&&Be(st,w,y,_),J&&On(y,_,w,"updated")},E)},H=(_,y,w,E,O,T,j)=>{for(let z=0;z<y.length;z++){const F=_[z],I=y[z],J=F.el&&(F.type===jt||!zn(F,I)||F.shapeFlag&198)?f(F.el):w;m(F,I,J,null,E,O,T,j,!0)}},K=(_,y,w,E,O)=>{if(y!==w){if(y!==wt)for(const T in y)!qs(T)&&!(T in w)&&r(_,T,y[T],null,O,E);for(const T in w){if(qs(T))continue;const j=w[T],z=y[T];j!==z&&T!=="value"&&r(_,T,z,j,O,E)}"value"in w&&r(_,"value",y.value,w.value,O)}},M=(_,y,w,E,O,T,j,z,F)=>{const I=y.el=_?_.el:a(""),J=y.anchor=_?_.anchor:a("");let{patchFlag:U,dynamicChildren:X,slotScopeIds:st}=y;st&&(z=z?z.concat(st):st),_==null?(s(I,w,E),s(J,w,E),D(y.children||[],w,J,O,T,j,z,F)):U>0&&U&64&&X&&_.dynamicChildren?(H(_.dynamicChildren,X,w,O,T,j,z),(y.key!=null||O&&y===O.subTree)&&nh(_,y,!0)):ot(_,y,w,J,O,T,j,z,F)},tt=(_,y,w,E,O,T,j,z,F)=>{y.slotScopeIds=z,_==null?y.shapeFlag&512?O.ctx.activate(y,w,E,j,F):ft(y,w,E,O,T,j,F):rt(_,y,F)},ft=(_,y,w,E,O,T,j)=>{const z=_.component=Qg(_,E,O);if(Kr(_)&&(z.ctx.renderer=Y),Zg(z,!1,j),z.asyncDep){if(O&&O.registerDep(z,et,j),!_.el){const F=z.subTree=ut(ne);x(null,F,y,w)}}else et(z,_,y,w,O,T,j)},rt=(_,y,w)=>{const E=y.component=_.component;if(jg(_,y,w))if(E.asyncDep&&!E.asyncResolved){Z(E,y,w);return}else E.next=y,E.update();else y.el=_.el,E.vnode=y},et=(_,y,w,E,O,T,j)=>{const z=()=>{if(_.isMounted){let{next:U,bu:X,u:st,parent:lt,vnode:Rt}=_;{const Ne=sh(_);if(Ne){U&&(U.el=Rt.el,Z(_,U,j)),Ne.asyncDep.then(()=>{_.isUnmounted||z()});return}}let _t=U,pe;Pn(_,!1),U?(U.el=Rt.el,Z(_,U,j)):U=Rt,X&&er(X),(pe=U.props&&U.props.onVnodeBeforeUpdate)&&Be(pe,lt,U,Rt),Pn(_,!0);const re=Hl(_),$e=_.subTree;_.subTree=re,m($e,re,f($e.el),A($e),_,O,T),U.el=re.el,_t===null&&Vg(_,re.el),st&&me(st,O),(pe=U.props&&U.props.onVnodeUpdated)&&me(()=>Be(pe,lt,U,Rt),O)}else{let U;const{el:X,props:st}=y,{bm:lt,m:Rt,parent:_t,root:pe,type:re}=_,$e=Ys(y);Pn(_,!1),lt&&er(lt),!$e&&(U=st&&st.onVnodeBeforeMount)&&Be(U,_t,y),Pn(_,!0);{pe.ce&&pe.ce._injectChildStyle(re);const Ne=_.subTree=Hl(_);m(null,Ne,w,E,_,O,T),y.el=Ne.el}if(Rt&&me(Rt,O),!$e&&(U=st&&st.onVnodeMounted)){const Ne=y;me(()=>Be(U,_t,Ne),O)}(y.shapeFlag&256||_t&&Ys(_t.vnode)&&_t.vnode.shapeFlag&256)&&_.a&&me(_.a,O),_.isMounted=!0,y=w=E=null}};_.scope.on();const F=_.effect=new uf(z);_.scope.off();const I=_.update=F.run.bind(F),J=_.job=F.runIfDirty.bind(F);J.i=_,J.id=_.uid,F.scheduler=()=>za(J),Pn(_,!0),I()},Z=(_,y,w)=>{y.component=_;const E=_.vnode.props;_.vnode=y,_.next=null,Eg(_,y.props,E,w),Og(_,y.children,w),un(),Ml(_),fn()},ot=(_,y,w,E,O,T,j,z,F=!1)=>{const I=_&&_.children,J=_?_.shapeFlag:0,U=y.children,{patchFlag:X,shapeFlag:st}=y;if(X>0){if(X&128){Qt(I,U,w,E,O,T,j,z,F);return}else if(X&256){kt(I,U,w,E,O,T,j,z,F);return}}st&8?(J&16&&Lt(I,O,T),U!==I&&u(w,U)):J&16?st&16?Qt(I,U,w,E,O,T,j,z,F):Lt(I,O,T,!0):(J&8&&u(w,""),st&16&&D(U,w,E,O,T,j,z,F))},kt=(_,y,w,E,O,T,j,z,F)=>{_=_||ls,y=y||ls;const I=_.length,J=y.length,U=Math.min(I,J);let X;for(X=0;X<U;X++){const st=y[X]=F?yn(y[X]):qe(y[X]);m(_[X],st,w,null,O,T,j,z,F)}I>J?Lt(_,O,T,!0,!1,U):D(y,w,E,O,T,j,z,F,U)},Qt=(_,y,w,E,O,T,j,z,F)=>{let I=0;const J=y.length;let U=_.length-1,X=J-1;for(;I<=U&&I<=X;){const st=_[I],lt=y[I]=F?yn(y[I]):qe(y[I]);if(zn(st,lt))m(st,lt,w,null,O,T,j,z,F);else break;I++}for(;I<=U&&I<=X;){const st=_[U],lt=y[X]=F?yn(y[X]):qe(y[X]);if(zn(st,lt))m(st,lt,w,null,O,T,j,z,F);else break;U--,X--}if(I>U){if(I<=X){const st=X+1,lt=st<J?y[st].el:E;for(;I<=X;)m(null,y[I]=F?yn(y[I]):qe(y[I]),w,lt,O,T,j,z,F),I++}}else if(I>X)for(;I<=U;)Mt(_[I],O,T,!0),I++;else{const st=I,lt=I,Rt=new Map;for(I=lt;I<=X;I++){const ge=y[I]=F?yn(y[I]):qe(y[I]);ge.key!=null&&Rt.set(ge.key,I)}let _t,pe=0;const re=X-lt+1;let $e=!1,Ne=0;const As=new Array(re);for(I=0;I<re;I++)As[I]=0;for(I=st;I<=U;I++){const ge=_[I];if(pe>=re){Mt(ge,O,T,!0);continue}let Fe;if(ge.key!=null)Fe=Rt.get(ge.key);else for(_t=lt;_t<=X;_t++)if(As[_t-lt]===0&&zn(ge,y[_t])){Fe=_t;break}Fe===void 0?Mt(ge,O,T,!0):(As[Fe-lt]=I+1,Fe>=Ne?Ne=Fe:$e=!0,m(ge,y[Fe],w,null,O,T,j,z,F),pe++)}const El=$e?Lg(As):ls;for(_t=El.length-1,I=re-1;I>=0;I--){const ge=lt+I,Fe=y[ge],Al=ge+1<J?y[ge+1].el:E;As[I]===0?m(null,Fe,w,Al,O,T,j,z,F):$e&&(_t<0||I!==El[_t]?Jt(Fe,w,Al,2):_t--)}}},Jt=(_,y,w,E,O=null)=>{const{el:T,type:j,transition:z,children:F,shapeFlag:I}=_;if(I&6){Jt(_.component.subTree,y,w,E);return}if(I&128){_.suspense.move(y,w,E);return}if(I&64){j.move(_,y,w,Y);return}if(j===jt){s(T,y,w);for(let U=0;U<F.length;U++)Jt(F[U],y,w,E);s(_.anchor,y,w);return}if(j===Eo){S(_,y,w);return}if(E!==2&&I&1&&z)if(E===0)z.beforeEnter(T),s(T,y,w),me(()=>z.enter(T),O);else{const{leave:U,delayLeave:X,afterLeave:st}=z,lt=()=>{_.ctx.isUnmounted?i(T):s(T,y,w)},Rt=()=>{U(T,()=>{lt(),st&&st()})};X?X(T,lt,Rt):Rt()}else s(T,y,w)},Mt=(_,y,w,E=!1,O=!1)=>{const{type:T,props:j,ref:z,children:F,dynamicChildren:I,shapeFlag:J,patchFlag:U,dirs:X,cacheIndex:st}=_;if(U===-2&&(O=!1),z!=null&&(un(),mr(z,null,w,_,!0),fn()),st!=null&&(y.renderCache[st]=void 0),J&256){y.ctx.deactivate(_);return}const lt=J&1&&X,Rt=!Ys(_);let _t;if(Rt&&(_t=j&&j.onVnodeBeforeUnmount)&&Be(_t,y,_),J&6)De(_.component,w,E);else{if(J&128){_.suspense.unmount(w,E);return}lt&&On(_,null,y,"beforeUnmount"),J&64?_.type.remove(_,y,w,Y,E):I&&!I.hasOnce&&(T!==jt||U>0&&U&64)?Lt(I,y,w,!1,!0):(T===jt&&U&384||!O&&J&16)&&Lt(F,y,w),E&&xe(_)}(Rt&&(_t=j&&j.onVnodeUnmounted)||lt)&&me(()=>{_t&&Be(_t,y,_),lt&&On(_,null,y,"unmounted")},w)},xe=_=>{const{type:y,el:w,anchor:E,transition:O}=_;if(y===jt){ie(w,E);return}if(y===Eo){k(_);return}const T=()=>{i(w),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(_.shapeFlag&1&&O&&!O.persisted){const{leave:j,delayLeave:z}=O,F=()=>j(w,T);z?z(_.el,T,F):F()}else T()},ie=(_,y)=>{let w;for(;_!==y;)w=h(_),i(_),_=w;i(y)},De=(_,y,w)=>{const{bum:E,scope:O,job:T,subTree:j,um:z,m:F,a:I,parent:J,slots:{__:U}}=_;zl(F),zl(I),E&&er(E),J&&Q(U)&&U.forEach(X=>{J.renderCache[X]=void 0}),O.stop(),T&&(T.flags|=8,Mt(j,_,y,w)),z&&me(z,y),me(()=>{_.isUnmounted=!0},y),y&&y.pendingBranch&&!y.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===y.pendingId&&(y.deps--,y.deps===0&&y.resolve())},Lt=(_,y,w,E=!1,O=!1,T=0)=>{for(let j=T;j<_.length;j++)Mt(_[j],y,w,E,O)},A=_=>{if(_.shapeFlag&6)return A(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const y=h(_.anchor||_.el),w=y&&y[ng];return w?h(w):y};let q=!1;const V=(_,y,w)=>{_==null?y._vnode&&Mt(y._vnode,null,null,!0):m(y._vnode||null,_,y,null,null,null,w),y._vnode=_,q||(q=!0,Ml(),Of(),q=!1)},Y={p:m,um:Mt,m:Jt,r:xe,mt:ft,mc:D,pc:ot,pbc:H,n:A,o:e};return{render:V,hydrate:void 0,createApp:kg(V)}}function Ro({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Pn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ig(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function nh(e,t,n=!1){const s=e.children,i=t.children;if(Q(s)&&Q(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=yn(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&nh(o,a)),a.type===Xr&&(a.el=o.el),a.type===ne&&!a.el&&(a.el=o.el)}}function Lg(e){const t=e.slice(),n=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(i=n[n.length-1],e[i]<c){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<c?r=a+1:o=a;c<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function sh(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:sh(t)}function zl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Dg=Symbol.for("v-scx"),$g=()=>Ee(Dg);function Rn(e,t,n){return ih(e,t,n)}function ih(e,t,n=wt){const{immediate:s,deep:i,flush:r,once:o}=n,a=zt({},n),l=t&&s||!t&&r!=="post";let c;if(hi){if(r==="sync"){const d=$g();c=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=Ke,d.resume=Ke,d.pause=Ke,d}}const u=Vt;a.call=(d,g,m)=>Pe(d,u,g,m);let f=!1;r==="post"?a.scheduler=d=>{me(d,u&&u.suspense)}:r!=="sync"&&(f=!0,a.scheduler=(d,g)=>{g?d():za(d)}),a.augmentJob=d=>{t&&(d.flags|=4),f&&(d.flags|=2,u&&(d.id=u.uid,d.i=u))};const h=Jp(e,t,a);return hi&&(c?c.push(h):l&&h()),h}function Ng(e,t,n){const s=this.proxy,i=Pt(e)?e.includes(".")?rh(s,e):()=>s[e]:e.bind(s,s);let r;it(t)?r=t:(r=t.handler,n=t);const o=Ci(this),a=ih(i,r.bind(s),n);return o(),a}function rh(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const Fg=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ae(t)}Modifiers`]||e[`${Xn(t)}Modifiers`];function Bg(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||wt;let i=n;const r=t.startsWith("update:"),o=r&&Fg(s,t.slice(7));o&&(o.trim&&(i=n.map(u=>Pt(u)?u.trim():u)),o.number&&(i=n.map(fr)));let a,l=s[a=_o(t)]||s[a=_o(Ae(t))];!l&&r&&(l=s[a=_o(Xn(t))]),l&&Pe(l,e,6,i);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Pe(c,e,6,i)}}function oh(e,t,n=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!it(e)){const l=c=>{const u=oh(c,t,!0);u&&(a=!0,zt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(St(e)&&s.set(e,null),null):(Q(r)?r.forEach(l=>o[l]=null):zt(o,r),St(e)&&s.set(e,o),o)}function Yr(e,t){return!e||!Fr(t)?!1:(t=t.slice(2).replace(/Once$/,""),gt(e,t[0].toLowerCase()+t.slice(1))||gt(e,Xn(t))||gt(e,t))}function Hl(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:f,data:h,setupState:d,ctx:g,inheritAttrs:m}=e,b=gr(e);let x,v;try{if(n.shapeFlag&4){const k=i||s,C=k;x=qe(c.call(C,k,u,f,d,h,g)),v=a}else{const k=t;x=qe(k.length>1?k(f,{attrs:a,slots:o,emit:l}):k(f,null)),v=t.props?a:zg(a)}}catch(k){Qs.length=0,Ur(k,e,1),x=ut(ne)}let S=x;if(v&&m!==!1){const k=Object.keys(v),{shapeFlag:C}=S;k.length&&C&7&&(r&&k.some(Ca)&&(v=Hg(v,r)),S=Tn(S,v,!1,!0))}return n.dirs&&(S=Tn(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&ci(S,n.transition),x=S,gr(b),x}const zg=e=>{let t;for(const n in e)(n==="class"||n==="style"||Fr(n))&&((t||(t={}))[n]=e[n]);return t},Hg=(e,t)=>{const n={};for(const s in e)(!Ca(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function jg(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?jl(s,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==s[h]&&!Yr(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?jl(s,o,c):!0:!!o;return!1}function jl(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!Yr(n,r))return!0}return!1}function Vg({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const ah=e=>e.__isSuspense;function Ug(e,t){t&&t.pendingBranch?Q(e)?t.effects.push(...e):t.effects.push(e):eg(e)}const jt=Symbol.for("v-fgt"),Xr=Symbol.for("v-txt"),ne=Symbol.for("v-cmt"),Eo=Symbol.for("v-stc"),Qs=[];let _e=null;function L(e=!1){Qs.push(_e=e?null:[])}function Wg(){Qs.pop(),_e=Qs[Qs.length-1]||null}let ui=1;function Vl(e,t=!1){ui+=e,e<0&&_e&&t&&(_e.hasOnce=!0)}function lh(e){return e.dynamicChildren=ui>0?_e||ls:null,Wg(),ui>0&&_e&&_e.push(e),e}function B(e,t,n,s,i,r){return lh(p(e,t,n,s,i,r,!0))}function fi(e,t,n,s,i){return lh(ut(e,t,n,s,i,!0))}function _r(e){return e?e.__v_isVNode===!0:!1}function zn(e,t){return e.type===t.type&&e.key===t.key}const ch=({key:e})=>e??null,sr=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Pt(e)||Xt(e)||it(e)?{i:ue,r:e,k:t,f:!!n}:e:null);function p(e,t=null,n=null,s=0,i=null,r=e===jt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ch(t),ref:t&&sr(t),scopeId:Mf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ue};return a?(Wa(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=Pt(n)?8:16),ui>0&&!o&&_e&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&_e.push(l),l}const ut=qg;function qg(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===Vf)&&(e=ne),_r(e)){const a=Tn(e,t,!0);return n&&Wa(a,n),ui>0&&!r&&_e&&(a.shapeFlag&6?_e[_e.indexOf(e)]=a:_e.push(a)),a.patchFlag=-2,a}if(im(e)&&(e=e.__vccOpts),t){t=Kg(t);let{class:a,style:l}=t;a&&!Pt(a)&&(t.class=Ce(a)),St(l)&&(Ai(l)&&!Q(l)&&(l=zt({},l)),t.style=jr(l))}const o=Pt(e)?1:ah(e)?128:If(e)?64:St(e)?4:it(e)?2:0;return p(e,t,n,s,i,o,r,!0)}function Kg(e){return e?Ai(e)||Xf(e)?zt({},e):e:null}function Tn(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?Gg(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&ch(c),ref:t&&t.ref?n&&r?Q(r)?r.concat(sr(t)):[r,sr(t)]:sr(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==jt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Tn(e.ssContent),ssFallback:e.ssFallback&&Tn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&ci(u,l.clone(u)),u}function nt(e=" ",t=0){return ut(Xr,null,e,t)}function Tt(e="",t=!1){return t?(L(),fi(ne,null,e)):ut(ne,null,e)}function qe(e){return e==null||typeof e=="boolean"?ut(ne):Q(e)?ut(jt,null,e.slice()):_r(e)?yn(e):ut(Xr,null,String(e))}function yn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Tn(e)}function Wa(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Q(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Wa(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!Xf(t)?t._ctx=ue:i===3&&ue&&(ue.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else it(t)?(t={default:t,_ctx:ue},n=32):(t=String(t),s&64?(n=16,t=[nt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Gg(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=Ce([t.class,s.class]));else if(i==="style")t.style=jr([t.style,s.style]);else if(Fr(i)){const r=t[i],o=s[i];o&&r!==o&&!(Q(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function Be(e,t,n,s=null){Pe(e,t,7,[n,s])}const Yg=Kf();let Xg=0;function Qg(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||Yg,r={uid:Xg++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Jf(s,i),emitsOptions:oh(s,i),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:s.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Bg.bind(null,r),e.ce&&e.ce(r),r}let Vt=null;const Jg=()=>Vt||ue;let yr,na;{const e=Hr(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};yr=t("__VUE_INSTANCE_SETTERS__",n=>Vt=n),na=t("__VUE_SSR_SETTERS__",n=>hi=n)}const Ci=e=>{const t=Vt;return yr(e),e.scope.on(),()=>{e.scope.off(),yr(t)}},Ul=()=>{Vt&&Vt.scope.off(),yr(null)};function uh(e){return e.vnode.shapeFlag&4}let hi=!1;function Zg(e,t=!1,n=!1){t&&na(t);const{props:s,children:i}=e.vnode,r=uh(e);Rg(e,s,r,t),Cg(e,i,n||t);const o=r?tm(e,t):void 0;return t&&na(!1),o}function tm(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,bg);const{setup:s}=n;if(s){un();const i=e.setupContext=s.length>1?nm(e):null,r=Ci(e),o=Ti(s,e,0,[e.props,i]),a=ef(o);if(fn(),r(),(a||e.sp)&&!Ys(e)&&Bf(e),a){if(o.then(Ul,Ul),t)return o.then(l=>{Wl(e,l)}).catch(l=>{Ur(l,e,0)});e.asyncDep=o}else Wl(e,o)}else fh(e)}function Wl(e,t,n){it(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:St(t)&&(e.setupState=Af(t)),fh(e)}function fh(e,t,n){const s=e.type;e.render||(e.render=s.render||Ke);{const i=Ci(e);un();try{_g(e)}finally{fn(),i()}}}const em={get(e,t){return Kt(e,"get",""),e[t]}};function nm(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,em),slots:e.slots,emit:e.emit,expose:t}}function Qr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Af(qp(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Xs)return Xs[n](e)},has(t,n){return n in t||n in Xs}})):e.proxy}function sm(e,t=!0){return it(e)?e.displayName||e.name:e.name||t&&e.__name}function im(e){return it(e)&&"__vccOpts"in e}const Ct=(e,t)=>Xp(e,t,hi);function ps(e,t,n){const s=arguments.length;return s===2?St(t)&&!Q(t)?_r(t)?ut(e,null,[t]):ut(e,t):ut(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&_r(n)&&(n=[n]),ut(e,t,n))}const hh="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sa;const ql=typeof window<"u"&&window.trustedTypes;if(ql)try{sa=ql.createPolicy("vue",{createHTML:e=>e})}catch{}const dh=sa?e=>sa.createHTML(e):e=>e,rm="http://www.w3.org/2000/svg",om="http://www.w3.org/1998/Math/MathML",nn=typeof document<"u"?document:null,Kl=nn&&nn.createElement("template"),am={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?nn.createElementNS(rm,e):t==="mathml"?nn.createElementNS(om,e):n?nn.createElement(e,{is:n}):nn.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>nn.createTextNode(e),createComment:e=>nn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>nn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Kl.innerHTML=dh(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Kl.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},pn="transition",Cs="animation",di=Symbol("_vtc"),ph={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lm=zt({},Lf,ph),cm=e=>(e.displayName="Transition",e.props=lm,e),gh=cm((e,{slots:t})=>ps(rg,um(e),t)),Mn=(e,t=[])=>{Q(e)?e.forEach(n=>n(...t)):e&&e(...t)},Gl=e=>e?Q(e)?e.some(t=>t.length>1):e.length>1:!1;function um(e){const t={};for(const M in e)M in ph||(t[M]=e[M]);if(e.css===!1)return t;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=e,g=fm(i),m=g&&g[0],b=g&&g[1],{onBeforeEnter:x,onEnter:v,onEnterCancelled:S,onLeave:k,onLeaveCancelled:C,onBeforeAppear:$=x,onAppear:P=v,onAppearCancelled:D=S}=t,N=(M,tt,ft,rt)=>{M._enterCancelled=rt,In(M,tt?u:a),In(M,tt?c:o),ft&&ft()},H=(M,tt)=>{M._isLeaving=!1,In(M,f),In(M,d),In(M,h),tt&&tt()},K=M=>(tt,ft)=>{const rt=M?P:v,et=()=>N(tt,M,ft);Mn(rt,[tt,et]),Yl(()=>{In(tt,M?l:r),Xe(tt,M?u:a),Gl(rt)||Xl(tt,s,m,et)})};return zt(t,{onBeforeEnter(M){Mn(x,[M]),Xe(M,r),Xe(M,o)},onBeforeAppear(M){Mn($,[M]),Xe(M,l),Xe(M,c)},onEnter:K(!1),onAppear:K(!0),onLeave(M,tt){M._isLeaving=!0;const ft=()=>H(M,tt);Xe(M,f),M._enterCancelled?(Xe(M,h),Zl()):(Zl(),Xe(M,h)),Yl(()=>{M._isLeaving&&(In(M,f),Xe(M,d),Gl(k)||Xl(M,s,b,ft))}),Mn(k,[M,ft])},onEnterCancelled(M){N(M,!1,void 0,!0),Mn(S,[M])},onAppearCancelled(M){N(M,!0,void 0,!0),Mn(D,[M])},onLeaveCancelled(M){H(M),Mn(C,[M])}})}function fm(e){if(e==null)return null;if(St(e))return[Ao(e.enter),Ao(e.leave)];{const t=Ao(e);return[t,t]}}function Ao(e){return _p(e)}function Xe(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[di]||(e[di]=new Set)).add(t)}function In(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[di];n&&(n.delete(t),n.size||(e[di]=void 0))}function Yl(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let hm=0;function Xl(e,t,n,s){const i=e._endId=++hm,r=()=>{i===e._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=dm(e,t);if(!o)return s();const c=o+"end";let u=0;const f=()=>{e.removeEventListener(c,h),r()},h=d=>{d.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),e.addEventListener(c,h)}function dm(e,t){const n=window.getComputedStyle(e),s=g=>(n[g]||"").split(", "),i=s(`${pn}Delay`),r=s(`${pn}Duration`),o=Ql(i,r),a=s(`${Cs}Delay`),l=s(`${Cs}Duration`),c=Ql(a,l);let u=null,f=0,h=0;t===pn?o>0&&(u=pn,f=o,h=r.length):t===Cs?c>0&&(u=Cs,f=c,h=l.length):(f=Math.max(o,c),u=f>0?o>c?pn:Cs:null,h=u?u===pn?r.length:l.length:0);const d=u===pn&&/\b(transform|all)(,|$)/.test(s(`${pn}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:d}}function Ql(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Jl(n)+Jl(e[s])))}function Jl(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Zl(){return document.body.offsetHeight}function pm(e,t,n){const s=e[di];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const xr=Symbol("_vod"),mh=Symbol("_vsh"),gm={beforeMount(e,{value:t},{transition:n}){e[xr]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Os(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Os(e,!0),s.enter(e)):s.leave(e,()=>{Os(e,!1)}):Os(e,t))},beforeUnmount(e,{value:t}){Os(e,t)}};function Os(e,t){e.style.display=t?e[xr]:"none",e[mh]=!t}const mm=Symbol(""),bm=/(^|;)\s*display\s*:/;function _m(e,t,n){const s=e.style,i=Pt(n);let r=!1;if(n&&!i){if(t)if(Pt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ir(s,a,"")}else for(const o in t)n[o]==null&&ir(s,o,"");for(const o in n)o==="display"&&(r=!0),ir(s,o,n[o])}else if(i){if(t!==n){const o=s[mm];o&&(n+=";"+o),s.cssText=n,r=bm.test(n)}}else t&&e.removeAttribute("style");xr in e&&(e[xr]=r?s.display:"",e[mh]&&(s.display="none"))}const tc=/\s*!important$/;function ir(e,t,n){if(Q(n))n.forEach(s=>ir(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=ym(e,t);tc.test(n)?e.setProperty(Xn(s),n.replace(tc,""),"important"):e[s]=n}}const ec=["Webkit","Moz","ms"],To={};function ym(e,t){const n=To[t];if(n)return n;let s=Ae(t);if(s!=="filter"&&s in e)return To[t]=s;s=zr(s);for(let i=0;i<ec.length;i++){const r=ec[i]+s;if(r in e)return To[t]=r}return t}const nc="http://www.w3.org/1999/xlink";function sc(e,t,n,s,i,r=kp(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(nc,t.slice(6,t.length)):e.setAttributeNS(nc,t,n):n==null||r&&!of(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Ge(n)?String(n):n)}function ic(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?dh(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=of(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function vn(e,t,n,s){e.addEventListener(t,n,s)}function xm(e,t,n,s){e.removeEventListener(t,n,s)}const rc=Symbol("_vei");function vm(e,t,n,s,i=null){const r=e[rc]||(e[rc]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=wm(t);if(s){const c=r[t]=Rm(s,i);vn(e,a,c,l)}else o&&(xm(e,a,o,l),r[t]=void 0)}}const oc=/(?:Once|Passive|Capture)$/;function wm(e){let t;if(oc.test(e)){t={};let s;for(;s=e.match(oc);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xn(e.slice(2)),t]}let Co=0;const Sm=Promise.resolve(),km=()=>Co||(Sm.then(()=>Co=0),Co=Date.now());function Rm(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Pe(Em(s,n.value),t,5,[s])};return n.value=e,n.attached=km(),n}function Em(e,t){if(Q(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const ac=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Am=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?pm(e,s,o):t==="style"?_m(e,n,s):Fr(t)?Ca(t)||vm(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Tm(e,t,s,o))?(ic(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&sc(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Pt(s))?ic(e,Ae(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),sc(e,t,s,o))};function Tm(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&ac(t)&&it(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return ac(t)&&Pt(n)?!1:t in e}const gs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Q(t)?n=>er(t,n):t};function Cm(e){e.target.composing=!0}function lc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const cn=Symbol("_assign"),te={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[cn]=gs(i);const r=s||i.props&&i.props.type==="number";vn(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=fr(a)),e[cn](a)}),n&&vn(e,"change",()=>{e.value=e.value.trim()}),t||(vn(e,"compositionstart",Cm),vn(e,"compositionend",lc),vn(e,"change",lc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[cn]=gs(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?fr(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},Om={deep:!0,created(e,t,n){e[cn]=gs(n),vn(e,"change",()=>{const s=e._modelValue,i=pi(e),r=e.checked,o=e[cn];if(Q(s)){const a=Ma(s,i),l=a!==-1;if(r&&!l)o(s.concat(i));else if(!r&&l){const c=[...s];c.splice(a,1),o(c)}}else if(ys(s)){const a=new Set(s);r?a.add(i):a.delete(i),o(a)}else o(bh(e,r))})},mounted:cc,beforeUpdate(e,t,n){e[cn]=gs(n),cc(e,t,n)}};function cc(e,{value:t,oldValue:n},s){e._modelValue=t;let i;if(Q(t))i=Ma(t,s.props.value)>-1;else if(ys(t))i=t.has(s.props.value);else{if(t===n)return;i=Ri(t,bh(e,!0))}e.checked!==i&&(e.checked=i)}const Pm={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=ys(t);vn(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?fr(pi(o)):pi(o));e[cn](e.multiple?i?new Set(r):r:r[0]),e._assigning=!0,Wr(()=>{e._assigning=!1})}),e[cn]=gs(s)},mounted(e,{value:t}){uc(e,t)},beforeUpdate(e,t,n){e[cn]=gs(n)},updated(e,{value:t}){e._assigning||uc(e,t)}};function uc(e,t){const n=e.multiple,s=Q(t);if(!(n&&!s&&!ys(t))){for(let i=0,r=e.options.length;i<r;i++){const o=e.options[i],a=pi(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(c=>String(c)===String(a)):o.selected=Ma(t,a)>-1}else o.selected=t.has(a);else if(Ri(pi(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function pi(e){return"_value"in e?e._value:e.value}function bh(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Mm=["ctrl","shift","alt","meta"],Im={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Mm.some(n=>e[`${n}Key`]&&!t.includes(n))},Oi=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=Im[t[o]];if(a&&a(i,t))return}return e(i,...r)})},Lm=zt({patchProp:Am},am);let fc;function Dm(){return fc||(fc=Pg(Lm))}const $m=(...e)=>{const t=Dm().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=Fm(s);if(!i)return;const r=t._component;!it(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Nm(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function Nm(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Fm(e){return Pt(e)?document.querySelector(e):e}const Wt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},Bm={name:"App"};function zm(e,t,n,s,i,r){const o=ja("router-view");return L(),fi(o)}const Hm=Wt(Bm,[["render",zm]]);function jm(){return _h().__VUE_DEVTOOLS_GLOBAL_HOOK__}function _h(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const Vm=typeof Proxy=="function",Um="devtools-plugin:setup",Wm="plugin:settings:set";let ts,ia;function qm(){var e;return ts!==void 0||(typeof window<"u"&&window.performance?(ts=!0,ia=window.performance):typeof globalThis<"u"&&(!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance)?(ts=!0,ia=globalThis.perf_hooks.performance):ts=!1),ts}function Km(){return qm()?ia.now():Date.now()}class Gm{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const s={};if(t.settings)for(const o in t.settings){const a=t.settings[o];s[o]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let r=Object.assign({},s);try{const o=localStorage.getItem(i),a=JSON.parse(o);Object.assign(r,a)}catch{}this.fallbacks={getSettings(){return r},setSettings(o){try{localStorage.setItem(i,JSON.stringify(o))}catch{}r=o},now(){return Km()}},n&&n.on(Wm,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function Ym(e,t){const n=e,s=_h(),i=jm(),r=Vm&&n.enableEarlyProxy;if(i&&(s.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!r))i.emit(Um,e,t);else{const o=r?new Gm(n,i):null;(s.__VUE_DEVTOOLS_PLUGINS__=s.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const os=typeof document<"u";function yh(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Xm(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&yh(e.default)}const pt=Object.assign;function Oo(e,t){const n={};for(const s in t){const i=t[s];n[s]=Me(i)?i.map(e):e(i)}return n}const Js=()=>{},Me=Array.isArray,xh=/#/g,Qm=/&/g,Jm=/\//g,Zm=/=/g,tb=/\?/g,vh=/\+/g,eb=/%5B/g,nb=/%5D/g,wh=/%5E/g,sb=/%60/g,Sh=/%7B/g,ib=/%7C/g,kh=/%7D/g,rb=/%20/g;function qa(e){return encodeURI(""+e).replace(ib,"|").replace(eb,"[").replace(nb,"]")}function ob(e){return qa(e).replace(Sh,"{").replace(kh,"}").replace(wh,"^")}function ra(e){return qa(e).replace(vh,"%2B").replace(rb,"+").replace(xh,"%23").replace(Qm,"%26").replace(sb,"`").replace(Sh,"{").replace(kh,"}").replace(wh,"^")}function ab(e){return ra(e).replace(Zm,"%3D")}function lb(e){return qa(e).replace(xh,"%23").replace(tb,"%3F")}function cb(e){return e==null?"":lb(e).replace(Jm,"%2F")}function gi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const ub=/\/$/,fb=e=>e.replace(ub,"");function Po(e,t,n="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),i=e(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=gb(s??t,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:gi(o)}}function hb(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function hc(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function db(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&ms(t.matched[s],n.matched[i])&&Rh(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function ms(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Rh(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!pb(e[n],t[n]))return!1;return!0}function pb(e,t){return Me(e)?dc(e,t):Me(t)?dc(t,e):e===t}function dc(e,t){return Me(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function gb(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const gn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var mi;(function(e){e.pop="pop",e.push="push"})(mi||(mi={}));var Zs;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Zs||(Zs={}));function mb(e){if(!e)if(os){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),fb(e)}const bb=/^[^#]+#/;function _b(e,t){return e.replace(bb,"#")+t}function yb(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Jr=()=>({left:window.scrollX,top:window.scrollY});function xb(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=yb(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function pc(e,t){return(history.state?history.state.position-t:-1)+e}const oa=new Map;function vb(e,t){oa.set(e,t)}function wb(e){const t=oa.get(e);return oa.delete(e),t}let Sb=()=>location.protocol+"//"+location.host;function Eh(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let a=i.includes(e.slice(r))?e.slice(r).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),hc(l,"")}return hc(n,e)+s+i}function kb(e,t,n,s){let i=[],r=[],o=null;const a=({state:h})=>{const d=Eh(e,location),g=n.value,m=t.value;let b=0;if(h){if(n.value=d,t.value=h,o&&o===g){o=null;return}b=m?h.position-m.position:0}else s(d);i.forEach(x=>{x(n.value,g,{delta:b,type:mi.pop,direction:b?b>0?Zs.forward:Zs.back:Zs.unknown})})};function l(){o=n.value}function c(h){i.push(h);const d=()=>{const g=i.indexOf(h);g>-1&&i.splice(g,1)};return r.push(d),d}function u(){const{history:h}=window;h.state&&h.replaceState(pt({},h.state,{scroll:Jr()}),"")}function f(){for(const h of r)h();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function gc(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?Jr():null}}function Rb(e){const{history:t,location:n}=window,s={value:Eh(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:Sb()+e+l;try{t[u?"replaceState":"pushState"](c,"",h),i.value=c}catch(d){console.error(d),n[u?"replace":"assign"](h)}}function o(l,c){const u=pt({},t.state,gc(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});r(l,u,!0),s.value=l}function a(l,c){const u=pt({},i.value,t.state,{forward:l,scroll:Jr()});r(u.current,u,!0);const f=pt({},gc(s.value,l,null),{position:u.position+1},c);r(l,f,!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function Eb(e){e=mb(e);const t=Rb(e),n=kb(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=pt({location:"",base:e,go:s,createHref:_b.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Ab(e){return typeof e=="string"||e&&typeof e=="object"}function Ah(e){return typeof e=="string"||typeof e=="symbol"}const Th=Symbol("");var mc;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(mc||(mc={}));function bs(e,t){return pt(new Error,{type:e,[Th]:!0},t)}function Qe(e,t){return e instanceof Error&&Th in e&&(t==null||!!(e.type&t))}const bc="[^/]+?",Tb={sensitive:!1,strict:!1,start:!0,end:!0},Cb=/[.+*?^${}()[\]/\\]/g;function Ob(e,t){const n=pt({},Tb,t),s=[];let i=n.start?"^":"";const r=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let f=0;f<c.length;f++){const h=c[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(Cb,"\\$&"),d+=40;else if(h.type===1){const{value:g,repeatable:m,optional:b,regexp:x}=h;r.push({name:g,repeatable:m,optional:b});const v=x||bc;if(v!==bc){d+=10;try{new RegExp(`(${v})`)}catch(k){throw new Error(`Invalid custom RegExp for param "${g}" (${v}): `+k.message)}}let S=m?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;f||(S=b&&c.length<2?`(?:/${S})`:"/"+S),b&&(S+="?"),i+=S,d+=20,b&&(d+=-8),m&&(d+=-20),v===".*"&&(d+=-50)}u.push(d)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const d=u[h]||"",g=r[h-1];f[g.name]=d&&g.repeatable?d.split("/"):d}return f}function l(c){let u="",f=!1;for(const h of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const d of h)if(d.type===0)u+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:b}=d,x=g in c?c[g]:"";if(Me(x)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const v=Me(x)?x.join("/"):x;if(!v)if(b)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=v}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function Pb(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Ch(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=Pb(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(_c(s))return 1;if(_c(i))return-1}return i.length-s.length}function _c(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Mb={type:0,value:""},Ib=/[a-zA-Z0-9_]/;function Lb(e){if(!e)return[[]];if(e==="/")return[[Mb]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function f(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):h();break;case 4:h(),n=s;break;case 1:l==="("?n=2:Ib.test(l)?h():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),o(),i}function Db(e,t,n){const s=Ob(Lb(e.path),n),i=pt(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function $b(e,t){const n=[],s=new Map;t=wc({strict:!1,end:!0,sensitive:!1},t);function i(f){return s.get(f)}function r(f,h,d){const g=!d,m=xc(f);m.aliasOf=d&&d.record;const b=wc(t,f),x=[m];if("alias"in f){const k=typeof f.alias=="string"?[f.alias]:f.alias;for(const C of k)x.push(xc(pt({},m,{components:d?d.record.components:m.components,path:C,aliasOf:d?d.record:m})))}let v,S;for(const k of x){const{path:C}=k;if(h&&C[0]!=="/"){const $=h.record.path,P=$[$.length-1]==="/"?"":"/";k.path=h.record.path+(C&&P+C)}if(v=Db(k,h,b),d?d.alias.push(v):(S=S||v,S!==v&&S.alias.push(v),g&&f.name&&!vc(v)&&o(f.name)),Oh(v)&&l(v),m.children){const $=m.children;for(let P=0;P<$.length;P++)r($[P],v,d&&d.children[P])}d=d||v}return S?()=>{o(S)}:Js}function o(f){if(Ah(f)){const h=s.get(f);h&&(s.delete(f),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(f);h>-1&&(n.splice(h,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const h=Bb(f,n);n.splice(h,0,f),f.record.name&&!vc(f)&&s.set(f.record.name,f)}function c(f,h){let d,g={},m,b;if("name"in f&&f.name){if(d=s.get(f.name),!d)throw bs(1,{location:f});b=d.record.name,g=pt(yc(h.params,d.keys.filter(S=>!S.optional).concat(d.parent?d.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),f.params&&yc(f.params,d.keys.map(S=>S.name))),m=d.stringify(g)}else if(f.path!=null)m=f.path,d=n.find(S=>S.re.test(m)),d&&(g=d.parse(m),b=d.record.name);else{if(d=h.name?s.get(h.name):n.find(S=>S.re.test(h.path)),!d)throw bs(1,{location:f,currentLocation:h});b=d.record.name,g=pt({},h.params,f.params),m=d.stringify(g)}const x=[];let v=d;for(;v;)x.unshift(v.record),v=v.parent;return{name:b,path:m,params:g,matched:x,meta:Fb(x)}}e.forEach(f=>r(f));function u(){n.length=0,s.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function yc(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function xc(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Nb(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Nb(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function vc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Fb(e){return e.reduce((t,n)=>pt(t,n.meta),{})}function wc(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function Bb(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;Ch(e,t[r])<0?s=r:n=r+1}const i=zb(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function zb(e){let t=e;for(;t=t.parent;)if(Oh(t)&&Ch(e,t)===0)return t}function Oh({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Hb(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(vh," "),o=r.indexOf("="),a=gi(o<0?r:r.slice(0,o)),l=o<0?null:gi(r.slice(o+1));if(a in t){let c=t[a];Me(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Sc(e){let t="";for(let n in e){const s=e[n];if(n=ab(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Me(s)?s.map(r=>r&&ra(r)):[s&&ra(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function jb(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Me(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const Vb=Symbol(""),kc=Symbol(""),Zr=Symbol(""),Ka=Symbol(""),aa=Symbol("");function Ps(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function xn(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(bs(4,{from:n,to:t})):h instanceof Error?l(h):Ab(h)?l(bs(2,{from:t,to:h})):(o&&s.enterCallbacks[i]===o&&typeof h=="function"&&o.push(h),a())},u=r(()=>e.call(s&&s.instances[i],t,n,c));let f=Promise.resolve(u);e.length<3&&(f=f.then(c)),f.catch(h=>l(h))})}function Mo(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(yh(l)){const u=(l.__vccOpts||l)[t];u&&r.push(xn(u,n,s,o,a,i))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=Xm(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const d=(f.__vccOpts||f)[t];return d&&xn(d,n,s,o,a,i)()}))}}return r}function Rc(e){const t=Ee(Zr),n=Ee(Ka),s=Ct(()=>{const l=kn(e.to);return t.resolve(l)}),i=Ct(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const h=f.findIndex(ms.bind(null,u));if(h>-1)return h;const d=Ec(l[c-2]);return c>1&&Ec(u)===d&&f[f.length-1].path!==d?f.findIndex(ms.bind(null,l[c-2])):h}),r=Ct(()=>i.value>-1&&Gb(n.params,s.value.params)),o=Ct(()=>i.value>-1&&i.value===n.matched.length-1&&Rh(n.params,s.value.params));function a(l={}){if(Kb(l)){const c=t[kn(e.replace)?"replace":"push"](kn(e.to)).catch(Js);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:Ct(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function Ub(e){return e.length===1?e[0]:e}const Wb=qr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Rc,setup(e,{slots:t}){const n=Ei(Rc(e)),{options:s}=Ee(Zr),i=Ct(()=>({[Ac(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Ac(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&Ub(t.default(n));return e.custom?r:ps("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),qb=Wb;function Kb(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Gb(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!Me(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function Ec(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ac=(e,t,n)=>e??t??n,Yb=qr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Ee(aa),i=Ct(()=>e.route||s.value),r=Ee(kc,0),o=Ct(()=>{let c=kn(r);const{matched:u}=i.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=Ct(()=>i.value.matched[o.value]);nr(kc,Ct(()=>o.value+1)),nr(Vb,a),nr(aa,i);const l=vt();return Rn(()=>[l.value,a.value,e.name],([c,u,f],[h,d,g])=>{u&&(u.instances[f]=c,d&&d!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!ms(u,d)||!h)&&(u.enterCallbacks[f]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,u=e.name,f=a.value,h=f&&f.components[u];if(!h)return Tc(n.default,{Component:h,route:c});const d=f.props[u],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,b=ps(h,pt({},g,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return Tc(n.default,{Component:b,route:c})||b}}});function Tc(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Xb=Yb;function Qb(e){const t=$b(e.routes,e),n=e.parseQuery||Hb,s=e.stringifyQuery||Sc,i=e.history,r=Ps(),o=Ps(),a=Ps(),l=Ba(gn);let c=gn;os&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Oo.bind(null,A=>""+A),f=Oo.bind(null,cb),h=Oo.bind(null,gi);function d(A,q){let V,Y;return Ah(A)?(V=t.getRecordMatcher(A),Y=q):Y=A,t.addRoute(Y,V)}function g(A){const q=t.getRecordMatcher(A);q&&t.removeRoute(q)}function m(){return t.getRoutes().map(A=>A.record)}function b(A){return!!t.getRecordMatcher(A)}function x(A,q){if(q=pt({},q||l.value),typeof A=="string"){const w=Po(n,A,q.path),E=t.resolve({path:w.path},q),O=i.createHref(w.fullPath);return pt(w,E,{params:h(E.params),hash:gi(w.hash),redirectedFrom:void 0,href:O})}let V;if(A.path!=null)V=pt({},A,{path:Po(n,A.path,q.path).path});else{const w=pt({},A.params);for(const E in w)w[E]==null&&delete w[E];V=pt({},A,{params:f(w)}),q.params=f(q.params)}const Y=t.resolve(V,q),xt=A.hash||"";Y.params=u(h(Y.params));const _=hb(s,pt({},A,{hash:ob(xt),path:Y.path})),y=i.createHref(_);return pt({fullPath:_,hash:xt,query:s===Sc?jb(A.query):A.query||{}},Y,{redirectedFrom:void 0,href:y})}function v(A){return typeof A=="string"?Po(n,A,l.value.path):pt({},A)}function S(A,q){if(c!==A)return bs(8,{from:q,to:A})}function k(A){return P(A)}function C(A){return k(pt(v(A),{replace:!0}))}function $(A){const q=A.matched[A.matched.length-1];if(q&&q.redirect){const{redirect:V}=q;let Y=typeof V=="function"?V(A):V;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=v(Y):{path:Y},Y.params={}),pt({query:A.query,hash:A.hash,params:Y.path!=null?{}:A.params},Y)}}function P(A,q){const V=c=x(A),Y=l.value,xt=A.state,_=A.force,y=A.replace===!0,w=$(V);if(w)return P(pt(v(w),{state:typeof w=="object"?pt({},xt,w.state):xt,force:_,replace:y}),q||V);const E=V;E.redirectedFrom=q;let O;return!_&&db(s,Y,V)&&(O=bs(16,{to:E,from:Y}),Jt(Y,Y,!0,!1)),(O?Promise.resolve(O):H(E,Y)).catch(T=>Qe(T)?Qe(T,2)?T:Qt(T):ot(T,E,Y)).then(T=>{if(T){if(Qe(T,2))return P(pt({replace:y},v(T.to),{state:typeof T.to=="object"?pt({},xt,T.to.state):xt,force:_}),q||E)}else T=M(E,Y,!0,y,xt);return K(E,Y,T),T})}function D(A,q){const V=S(A,q);return V?Promise.reject(V):Promise.resolve()}function N(A){const q=ie.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(A):A()}function H(A,q){let V;const[Y,xt,_]=Jb(A,q);V=Mo(Y.reverse(),"beforeRouteLeave",A,q);for(const w of Y)w.leaveGuards.forEach(E=>{V.push(xn(E,A,q))});const y=D.bind(null,A,q);return V.push(y),Lt(V).then(()=>{V=[];for(const w of r.list())V.push(xn(w,A,q));return V.push(y),Lt(V)}).then(()=>{V=Mo(xt,"beforeRouteUpdate",A,q);for(const w of xt)w.updateGuards.forEach(E=>{V.push(xn(E,A,q))});return V.push(y),Lt(V)}).then(()=>{V=[];for(const w of _)if(w.beforeEnter)if(Me(w.beforeEnter))for(const E of w.beforeEnter)V.push(xn(E,A,q));else V.push(xn(w.beforeEnter,A,q));return V.push(y),Lt(V)}).then(()=>(A.matched.forEach(w=>w.enterCallbacks={}),V=Mo(_,"beforeRouteEnter",A,q,N),V.push(y),Lt(V))).then(()=>{V=[];for(const w of o.list())V.push(xn(w,A,q));return V.push(y),Lt(V)}).catch(w=>Qe(w,8)?w:Promise.reject(w))}function K(A,q,V){a.list().forEach(Y=>N(()=>Y(A,q,V)))}function M(A,q,V,Y,xt){const _=S(A,q);if(_)return _;const y=q===gn,w=os?history.state:{};V&&(Y||y?i.replace(A.fullPath,pt({scroll:y&&w&&w.scroll},xt)):i.push(A.fullPath,xt)),l.value=A,Jt(A,q,V,y),Qt()}let tt;function ft(){tt||(tt=i.listen((A,q,V)=>{if(!De.listening)return;const Y=x(A),xt=$(Y);if(xt){P(pt(xt,{replace:!0,force:!0}),Y).catch(Js);return}c=Y;const _=l.value;os&&vb(pc(_.fullPath,V.delta),Jr()),H(Y,_).catch(y=>Qe(y,12)?y:Qe(y,2)?(P(pt(v(y.to),{force:!0}),Y).then(w=>{Qe(w,20)&&!V.delta&&V.type===mi.pop&&i.go(-1,!1)}).catch(Js),Promise.reject()):(V.delta&&i.go(-V.delta,!1),ot(y,Y,_))).then(y=>{y=y||M(Y,_,!1),y&&(V.delta&&!Qe(y,8)?i.go(-V.delta,!1):V.type===mi.pop&&Qe(y,20)&&i.go(-1,!1)),K(Y,_,y)}).catch(Js)}))}let rt=Ps(),et=Ps(),Z;function ot(A,q,V){Qt(A);const Y=et.list();return Y.length?Y.forEach(xt=>xt(A,q,V)):console.error(A),Promise.reject(A)}function kt(){return Z&&l.value!==gn?Promise.resolve():new Promise((A,q)=>{rt.add([A,q])})}function Qt(A){return Z||(Z=!A,ft(),rt.list().forEach(([q,V])=>A?V(A):q()),rt.reset()),A}function Jt(A,q,V,Y){const{scrollBehavior:xt}=e;if(!os||!xt)return Promise.resolve();const _=!V&&wb(pc(A.fullPath,0))||(Y||!V)&&history.state&&history.state.scroll||null;return Wr().then(()=>xt(A,q,_)).then(y=>y&&xb(y)).catch(y=>ot(y,A,q))}const Mt=A=>i.go(A);let xe;const ie=new Set,De={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:m,resolve:x,options:e,push:k,replace:C,go:Mt,back:()=>Mt(-1),forward:()=>Mt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:et.add,isReady:kt,install(A){const q=this;A.component("RouterLink",qb),A.component("RouterView",Xb),A.config.globalProperties.$router=q,Object.defineProperty(A.config.globalProperties,"$route",{enumerable:!0,get:()=>kn(l)}),os&&!xe&&l.value===gn&&(xe=!0,k(i.location).catch(xt=>{}));const V={};for(const xt in gn)Object.defineProperty(V,xt,{get:()=>l.value[xt],enumerable:!0});A.provide(Zr,q),A.provide(Ka,kf(V)),A.provide(aa,l);const Y=A.unmount;ie.add(A),A.unmount=function(){ie.delete(A),ie.size<1&&(c=gn,tt&&tt(),tt=null,l.value=gn,xe=!1,Z=!1),Y()}}};function Lt(A){return A.reduce((q,V)=>q.then(()=>N(V)),Promise.resolve())}return De}function Jb(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(c=>ms(c,a))?s.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>ms(c,l))||i.push(l))}return[n,s,i]}function to(){return Ee(Zr)}function Ph(e){return Ee(Ka)}/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var Mh="store";function vs(e){return e===void 0&&(e=null),Ee(e!==null?e:Mh)}function ws(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function Ih(e){return e!==null&&typeof e=="object"}function Zb(e){return e&&typeof e.then=="function"}function t_(e,t){return function(){return e(t)}}function Lh(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var s=t.indexOf(e);s>-1&&t.splice(s,1)}}function Dh(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;eo(e,n,[],e._modules.root,!0),Ga(e,n,t)}function Ga(e,t,n){var s=e._state,i=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,o={},a={},l=Ep(!0);l.run(function(){ws(r,function(c,u){o[u]=t_(c,e),a[u]=Ct(function(){return o[u]()}),Object.defineProperty(e.getters,u,{get:function(){return a[u].value},enumerable:!0})})}),e._state=Ei({data:t}),e._scope=l,e.strict&&r_(e),s&&n&&e._withCommit(function(){s.data=null}),i&&i.stop()}function eo(e,t,n,s,i){var r=!n.length,o=e._modules.getNamespace(n);if(s.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=s),!r&&!i){var a=Ya(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit(function(){a[l]=s.state})}var c=s.context=e_(e,o,n);s.forEachMutation(function(u,f){var h=o+f;n_(e,h,u,c)}),s.forEachAction(function(u,f){var h=u.root?f:o+f,d=u.handler||u;s_(e,h,d,c)}),s.forEachGetter(function(u,f){var h=o+f;i_(e,h,u,c)}),s.forEachChild(function(u,f){eo(e,t,n.concat(f),u,i)})}function e_(e,t,n){var s=t==="",i={dispatch:s?e.dispatch:function(r,o,a){var l=vr(r,o,a),c=l.payload,u=l.options,f=l.type;return(!u||!u.root)&&(f=t+f),e.dispatch(f,c)},commit:s?e.commit:function(r,o,a){var l=vr(r,o,a),c=l.payload,u=l.options,f=l.type;(!u||!u.root)&&(f=t+f),e.commit(f,c,u)}};return Object.defineProperties(i,{getters:{get:s?function(){return e.getters}:function(){return $h(e,t)}},state:{get:function(){return Ya(e.state,n)}}}),i}function $h(e,t){if(!e._makeLocalGettersCache[t]){var n={},s=t.length;Object.keys(e.getters).forEach(function(i){if(i.slice(0,s)===t){var r=i.slice(s);Object.defineProperty(n,r,{get:function(){return e.getters[i]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function n_(e,t,n,s){var i=e._mutations[t]||(e._mutations[t]=[]);i.push(function(o){n.call(e,s.state,o)})}function s_(e,t,n,s){var i=e._actions[t]||(e._actions[t]=[]);i.push(function(o){var a=n.call(e,{dispatch:s.dispatch,commit:s.commit,getters:s.getters,state:s.state,rootGetters:e.getters,rootState:e.state},o);return Zb(a)||(a=Promise.resolve(a)),e._devtoolHook?a.catch(function(l){throw e._devtoolHook.emit("vuex:error",l),l}):a})}function i_(e,t,n,s){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(r){return n(s.state,s.getters,r.state,r.getters)})}function r_(e){Rn(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function Ya(e,t){return t.reduce(function(n,s){return n[s]},e)}function vr(e,t,n){return Ih(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var o_="vuex bindings",Cc="vuex:mutations",Io="vuex:actions",es="vuex",a_=0;function l_(e,t){Ym({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[o_]},function(n){n.addTimelineLayer({id:Cc,label:"Vuex Mutations",color:Oc}),n.addTimelineLayer({id:Io,label:"Vuex Actions",color:Oc}),n.addInspector({id:es,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(s){if(s.app===e&&s.inspectorId===es)if(s.filter){var i=[];zh(i,t._modules.root,s.filter,""),s.rootNodes=i}else s.rootNodes=[Bh(t._modules.root,"")]}),n.on.getInspectorState(function(s){if(s.app===e&&s.inspectorId===es){var i=s.nodeId;$h(t,i),s.state=f_(d_(t._modules,i),i==="root"?t.getters:t._makeLocalGettersCache,i)}}),n.on.editInspectorState(function(s){if(s.app===e&&s.inspectorId===es){var i=s.nodeId,r=s.path;i!=="root"&&(r=i.split("/").filter(Boolean).concat(r)),t._withCommit(function(){s.set(t._state.data,r,s.state.value)})}}),t.subscribe(function(s,i){var r={};s.payload&&(r.payload=s.payload),r.state=i,n.notifyComponentUpdate(),n.sendInspectorTree(es),n.sendInspectorState(es),n.addTimelineEvent({layerId:Cc,event:{time:Date.now(),title:s.type,data:r}})}),t.subscribeAction({before:function(s,i){var r={};s.payload&&(r.payload=s.payload),s._id=a_++,s._time=Date.now(),r.state=i,n.addTimelineEvent({layerId:Io,event:{time:s._time,title:s.type,groupId:s._id,subtitle:"start",data:r}})},after:function(s,i){var r={},o=Date.now()-s._time;r.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},s.payload&&(r.payload=s.payload),r.state=i,n.addTimelineEvent({layerId:Io,event:{time:Date.now(),title:s.type,groupId:s._id,subtitle:"end",data:r}})}})})}var Oc=8702998,c_=6710886,u_=16777215,Nh={label:"namespaced",textColor:u_,backgroundColor:c_};function Fh(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function Bh(e,t){return{id:t||"root",label:Fh(t),tags:e.namespaced?[Nh]:[],children:Object.keys(e._children).map(function(n){return Bh(e._children[n],t+n+"/")})}}function zh(e,t,n,s){s.includes(n)&&e.push({id:s||"root",label:s.endsWith("/")?s.slice(0,s.length-1):s||"Root",tags:t.namespaced?[Nh]:[]}),Object.keys(t._children).forEach(function(i){zh(e,t._children[i],n,s+i+"/")})}function f_(e,t,n){t=n==="root"?t:t[n];var s=Object.keys(t),i={state:Object.keys(e.state).map(function(o){return{key:o,editable:!0,value:e.state[o]}})};if(s.length){var r=h_(t);i.getters=Object.keys(r).map(function(o){return{key:o.endsWith("/")?Fh(o):o,editable:!1,value:la(function(){return r[o]})}})}return i}function h_(e){var t={};return Object.keys(e).forEach(function(n){var s=n.split("/");if(s.length>1){var i=t,r=s.pop();s.forEach(function(o){i[o]||(i[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),i=i[o]._custom.value}),i[r]=la(function(){return e[n]})}else t[n]=la(function(){return e[n]})}),t}function d_(e,t){var n=t.split("/").filter(function(s){return s});return n.reduce(function(s,i,r){var o=s[i];if(!o)throw new Error('Missing module "'+i+'" for path "'+t+'".');return r===n.length-1?o:o._children},t==="root"?e:e.root._children)}function la(e){try{return e()}catch(t){return t}}var Ie=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var s=t.state;this.state=(typeof s=="function"?s():s)||{}},Hh={namespaced:{configurable:!0}};Hh.namespaced.get=function(){return!!this._rawModule.namespaced};Ie.prototype.addChild=function(t,n){this._children[t]=n};Ie.prototype.removeChild=function(t){delete this._children[t]};Ie.prototype.getChild=function(t){return this._children[t]};Ie.prototype.hasChild=function(t){return t in this._children};Ie.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};Ie.prototype.forEachChild=function(t){ws(this._children,t)};Ie.prototype.forEachGetter=function(t){this._rawModule.getters&&ws(this._rawModule.getters,t)};Ie.prototype.forEachAction=function(t){this._rawModule.actions&&ws(this._rawModule.actions,t)};Ie.prototype.forEachMutation=function(t){this._rawModule.mutations&&ws(this._rawModule.mutations,t)};Object.defineProperties(Ie.prototype,Hh);var Qn=function(t){this.register([],t,!1)};Qn.prototype.get=function(t){return t.reduce(function(n,s){return n.getChild(s)},this.root)};Qn.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(s,i){return n=n.getChild(i),s+(n.namespaced?i+"/":"")},"")};Qn.prototype.update=function(t){jh([],this.root,t)};Qn.prototype.register=function(t,n,s){var i=this;s===void 0&&(s=!0);var r=new Ie(n,s);if(t.length===0)this.root=r;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],r)}n.modules&&ws(n.modules,function(a,l){i.register(t.concat(l),a,s)})};Qn.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),s=t[t.length-1],i=n.getChild(s);i&&i.runtime&&n.removeChild(s)};Qn.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),s=t[t.length-1];return n?n.hasChild(s):!1};function jh(e,t,n){if(t.update(n),n.modules)for(var s in n.modules){if(!t.getChild(s))return;jh(e.concat(s),t.getChild(s),n.modules[s])}}function p_(e){return new de(e)}var de=function(t){var n=this;t===void 0&&(t={});var s=t.plugins;s===void 0&&(s=[]);var i=t.strict;i===void 0&&(i=!1);var r=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Qn(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=r;var o=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(h,d){return l.call(o,h,d)},this.commit=function(h,d,g){return c.call(o,h,d,g)},this.strict=i;var u=this._modules.root.state;eo(this,u,[],this._modules.root),Ga(this,u),s.forEach(function(f){return f(n)})},Xa={state:{configurable:!0}};de.prototype.install=function(t,n){t.provide(n||Mh,this),t.config.globalProperties.$store=this;var s=this._devtools!==void 0?this._devtools:!1;s&&l_(t,this)};Xa.state.get=function(){return this._state.data};Xa.state.set=function(e){};de.prototype.commit=function(t,n,s){var i=this,r=vr(t,n,s),o=r.type,a=r.payload,l={type:o,payload:a},c=this._mutations[o];c&&(this._withCommit(function(){c.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(u){return u(l,i.state)}))};de.prototype.dispatch=function(t,n){var s=this,i=vr(t,n),r=i.type,o=i.payload,a={type:r,payload:o},l=this._actions[r];if(l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(a,s.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(o)})):l[0](o);return new Promise(function(u,f){c.then(function(h){try{s._actionSubscribers.filter(function(d){return d.after}).forEach(function(d){return d.after(a,s.state)})}catch{}u(h)},function(h){try{s._actionSubscribers.filter(function(d){return d.error}).forEach(function(d){return d.error(a,s.state,h)})}catch{}f(h)})})}};de.prototype.subscribe=function(t,n){return Lh(t,this._subscribers,n)};de.prototype.subscribeAction=function(t,n){var s=typeof t=="function"?{before:t}:t;return Lh(s,this._actionSubscribers,n)};de.prototype.watch=function(t,n,s){var i=this;return Rn(function(){return t(i.state,i.getters)},n,Object.assign({},s))};de.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};de.prototype.registerModule=function(t,n,s){s===void 0&&(s={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),eo(this,this.state,t,this._modules.get(t),s.preserveState),Ga(this,this.state)};de.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var s=Ya(n.state,t.slice(0,-1));delete s[t[t.length-1]]}),Dh(this)};de.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};de.prototype.hotUpdate=function(t){this._modules.update(t),Dh(this,!0)};de.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(de.prototype,Xa);var no=Uh(function(e,t){var n={};return Vh(t).forEach(function(s){var i=s.key,r=s.val;n[i]=function(){var a=this.$store.state,l=this.$store.getters;if(e){var c=Wh(this.$store,"mapState",e);if(!c)return;a=c.context.state,l=c.context.getters}return typeof r=="function"?r.call(this,a,l):a[r]},n[i].vuex=!0}),n}),so=Uh(function(e,t){var n={};return Vh(t).forEach(function(s){var i=s.key,r=s.val;n[i]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=this.$store.dispatch;if(e){var u=Wh(this.$store,"mapActions",e);if(!u)return;c=u.context.dispatch}return typeof r=="function"?r.apply(this,[c].concat(a)):c.apply(this.$store,[r].concat(a))}}),n});function Vh(e){return g_(e)?Array.isArray(e)?e.map(function(t){return{key:t,val:t}}):Object.keys(e).map(function(t){return{key:t,val:e[t]}}):[]}function g_(e){return Array.isArray(e)||Ih(e)}function Uh(e){return function(t,n){return typeof t!="string"?(n=t,t=""):t.charAt(t.length-1)!=="/"&&(t+="/"),e(t,n)}}function Wh(e,t,n){var s=e._modulesNamespaceMap[n];return s}function qh(e,t){return function(){return e.apply(t,arguments)}}const{toString:m_}=Object.prototype,{getPrototypeOf:Qa}=Object,{iterator:io,toStringTag:Kh}=Symbol,ro=(e=>t=>{const n=m_.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Le=e=>(e=e.toLowerCase(),t=>ro(t)===e),oo=e=>t=>typeof t===e,{isArray:Ss}=Array,bi=oo("undefined");function b_(e){return e!==null&&!bi(e)&&e.constructor!==null&&!bi(e.constructor)&&fe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Gh=Le("ArrayBuffer");function __(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Gh(e.buffer),t}const y_=oo("string"),fe=oo("function"),Yh=oo("number"),ao=e=>e!==null&&typeof e=="object",x_=e=>e===!0||e===!1,rr=e=>{if(ro(e)!=="object")return!1;const t=Qa(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Kh in e)&&!(io in e)},v_=Le("Date"),w_=Le("File"),S_=Le("Blob"),k_=Le("FileList"),R_=e=>ao(e)&&fe(e.pipe),E_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||fe(e.append)&&((t=ro(e))==="formdata"||t==="object"&&fe(e.toString)&&e.toString()==="[object FormData]"))},A_=Le("URLSearchParams"),[T_,C_,O_,P_]=["ReadableStream","Request","Response","Headers"].map(Le),M_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Pi(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,i;if(typeof e!="object"&&(e=[e]),Ss(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(s=0;s<o;s++)a=r[s],t.call(null,e[a],a,e)}}function Xh(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,i;for(;s-- >0;)if(i=n[s],t===i.toLowerCase())return i;return null}const Hn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Qh=e=>!bi(e)&&e!==Hn;function ca(){const{caseless:e}=Qh(this)&&this||{},t={},n=(s,i)=>{const r=e&&Xh(t,i)||i;rr(t[r])&&rr(s)?t[r]=ca(t[r],s):rr(s)?t[r]=ca({},s):Ss(s)?t[r]=s.slice():t[r]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Pi(arguments[s],n);return t}const I_=(e,t,n,{allOwnKeys:s}={})=>(Pi(t,(i,r)=>{n&&fe(i)?e[r]=qh(i,n):e[r]=i},{allOwnKeys:s}),e),L_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),D_=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},$_=(e,t,n,s)=>{let i,r,o;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)o=i[r],(!s||s(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&Qa(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},N_=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},F_=e=>{if(!e)return null;if(Ss(e))return e;let t=e.length;if(!Yh(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},B_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Qa(Uint8Array)),z_=(e,t)=>{const s=(e&&e[io]).call(e);let i;for(;(i=s.next())&&!i.done;){const r=i.value;t.call(e,r[0],r[1])}},H_=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},j_=Le("HTMLFormElement"),V_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),Pc=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),U_=Le("RegExp"),Jh=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Pi(n,(i,r)=>{let o;(o=t(i,r,e))!==!1&&(s[r]=o||i)}),Object.defineProperties(e,s)},W_=e=>{Jh(e,(t,n)=>{if(fe(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(fe(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},q_=(e,t)=>{const n={},s=i=>{i.forEach(r=>{n[r]=!0})};return Ss(e)?s(e):s(String(e).split(t)),n},K_=()=>{},G_=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Y_(e){return!!(e&&fe(e.append)&&e[Kh]==="FormData"&&e[io])}const X_=e=>{const t=new Array(10),n=(s,i)=>{if(ao(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[i]=s;const r=Ss(s)?[]:{};return Pi(s,(o,a)=>{const l=n(o,i+1);!bi(l)&&(r[a]=l)}),t[i]=void 0,r}}return s};return n(e,0)},Q_=Le("AsyncFunction"),J_=e=>e&&(ao(e)||fe(e))&&fe(e.then)&&fe(e.catch),Zh=((e,t)=>e?setImmediate:t?((n,s)=>(Hn.addEventListener("message",({source:i,data:r})=>{i===Hn&&r===n&&s.length&&s.shift()()},!1),i=>{s.push(i),Hn.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",fe(Hn.postMessage)),Z_=typeof queueMicrotask<"u"?queueMicrotask.bind(Hn):typeof process<"u"&&process.nextTick||Zh,ty=e=>e!=null&&fe(e[io]),R={isArray:Ss,isArrayBuffer:Gh,isBuffer:b_,isFormData:E_,isArrayBufferView:__,isString:y_,isNumber:Yh,isBoolean:x_,isObject:ao,isPlainObject:rr,isReadableStream:T_,isRequest:C_,isResponse:O_,isHeaders:P_,isUndefined:bi,isDate:v_,isFile:w_,isBlob:S_,isRegExp:U_,isFunction:fe,isStream:R_,isURLSearchParams:A_,isTypedArray:B_,isFileList:k_,forEach:Pi,merge:ca,extend:I_,trim:M_,stripBOM:L_,inherits:D_,toFlatObject:$_,kindOf:ro,kindOfTest:Le,endsWith:N_,toArray:F_,forEachEntry:z_,matchAll:H_,isHTMLForm:j_,hasOwnProperty:Pc,hasOwnProp:Pc,reduceDescriptors:Jh,freezeMethods:W_,toObjectSet:q_,toCamelCase:V_,noop:K_,toFiniteNumber:G_,findKey:Xh,global:Hn,isContextDefined:Qh,isSpecCompliantForm:Y_,toJSONObject:X_,isAsyncFn:Q_,isThenable:J_,setImmediate:Zh,asap:Z_,isIterable:ty};function at(e,t,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}R.inherits(at,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.status}}});const td=at.prototype,ed={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ed[e]={value:e}});Object.defineProperties(at,ed);Object.defineProperty(td,"isAxiosError",{value:!0});at.from=(e,t,n,s,i,r)=>{const o=Object.create(td);return R.toFlatObject(e,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),at.call(o,e.message,t,n,s,i),o.cause=e,o.name=e.name,r&&Object.assign(o,r),o};const ey=null;function ua(e){return R.isPlainObject(e)||R.isArray(e)}function nd(e){return R.endsWith(e,"[]")?e.slice(0,-2):e}function Mc(e,t,n){return e?e.concat(t).map(function(i,r){return i=nd(i),!n&&r?"["+i+"]":i}).join(n?".":""):t}function ny(e){return R.isArray(e)&&!e.some(ua)}const sy=R.toFlatObject(R,{},null,function(t){return/^is[A-Z]/.test(t)});function lo(e,t,n){if(!R.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=R.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,b){return!R.isUndefined(b[m])});const s=n.metaTokens,i=n.visitor||u,r=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(t);if(!R.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(R.isDate(g))return g.toISOString();if(!l&&R.isBlob(g))throw new at("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(g)||R.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,m,b){let x=g;if(g&&!b&&typeof g=="object"){if(R.endsWith(m,"{}"))m=s?m:m.slice(0,-2),g=JSON.stringify(g);else if(R.isArray(g)&&ny(g)||(R.isFileList(g)||R.endsWith(m,"[]"))&&(x=R.toArray(g)))return m=nd(m),x.forEach(function(S,k){!(R.isUndefined(S)||S===null)&&t.append(o===!0?Mc([m],k,r):o===null?m:m+"[]",c(S))}),!1}return ua(g)?!0:(t.append(Mc(b,m,r),c(g)),!1)}const f=[],h=Object.assign(sy,{defaultVisitor:u,convertValue:c,isVisitable:ua});function d(g,m){if(!R.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(g),R.forEach(g,function(x,v){(!(R.isUndefined(x)||x===null)&&i.call(t,x,R.isString(v)?v.trim():v,m,h))===!0&&d(x,m?m.concat(v):[v])}),f.pop()}}if(!R.isObject(e))throw new TypeError("data must be an object");return d(e),t}function Ic(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Ja(e,t){this._pairs=[],e&&lo(e,this,t)}const sd=Ja.prototype;sd.append=function(t,n){this._pairs.push([t,n])};sd.toString=function(t){const n=t?function(s){return t.call(this,s,Ic)}:Ic;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function iy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function id(e,t,n){if(!t)return e;const s=n&&n.encode||iy;R.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let r;if(i?r=i(t,n):r=R.isURLSearchParams(t)?t.toString():new Ja(t,n).toString(s),r){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class Lc{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){R.forEach(this.handlers,function(s){s!==null&&t(s)})}}const rd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ry=typeof URLSearchParams<"u"?URLSearchParams:Ja,oy=typeof FormData<"u"?FormData:null,ay=typeof Blob<"u"?Blob:null,ly={isBrowser:!0,classes:{URLSearchParams:ry,FormData:oy,Blob:ay},protocols:["http","https","file","blob","url","data"]},Za=typeof window<"u"&&typeof document<"u",fa=typeof navigator=="object"&&navigator||void 0,cy=Za&&(!fa||["ReactNative","NativeScript","NS"].indexOf(fa.product)<0),uy=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fy=Za&&window.location.href||"http://localhost",hy=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Za,hasStandardBrowserEnv:cy,hasStandardBrowserWebWorkerEnv:uy,navigator:fa,origin:fy},Symbol.toStringTag,{value:"Module"})),Gt={...hy,...ly};function dy(e,t){return lo(e,new Gt.classes.URLSearchParams,Object.assign({visitor:function(n,s,i,r){return Gt.isNode&&R.isBuffer(n)?(this.append(s,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function py(e){return R.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function gy(e){const t={},n=Object.keys(e);let s;const i=n.length;let r;for(s=0;s<i;s++)r=n[s],t[r]=e[r];return t}function od(e){function t(n,s,i,r){let o=n[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=n.length;return o=!o&&R.isArray(i)?i.length:o,l?(R.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!a):((!i[o]||!R.isObject(i[o]))&&(i[o]=[]),t(n,s,i[o],r)&&R.isArray(i[o])&&(i[o]=gy(i[o])),!a)}if(R.isFormData(e)&&R.isFunction(e.entries)){const n={};return R.forEachEntry(e,(s,i)=>{t(py(s),i,n,0)}),n}return null}function my(e,t,n){if(R.isString(e))try{return(t||JSON.parse)(e),R.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Mi={transitional:rd,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,r=R.isObject(t);if(r&&R.isHTMLForm(t)&&(t=new FormData(t)),R.isFormData(t))return i?JSON.stringify(od(t)):t;if(R.isArrayBuffer(t)||R.isBuffer(t)||R.isStream(t)||R.isFile(t)||R.isBlob(t)||R.isReadableStream(t))return t;if(R.isArrayBufferView(t))return t.buffer;if(R.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return dy(t,this.formSerializer).toString();if((a=R.isFileList(t))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return lo(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return r||i?(n.setContentType("application/json",!1),my(t)):t}],transformResponse:[function(t){const n=this.transitional||Mi.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(R.isResponse(t)||R.isReadableStream(t))return t;if(t&&R.isString(t)&&(s&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?at.from(a,at.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],e=>{Mi.headers[e]={}});const by=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_y=e=>{const t={};let n,s,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!n||t[n]&&by[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},Dc=Symbol("internals");function Ms(e){return e&&String(e).trim().toLowerCase()}function or(e){return e===!1||e==null?e:R.isArray(e)?e.map(or):String(e)}function yy(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const xy=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Lo(e,t,n,s,i){if(R.isFunction(s))return s.call(this,t,n);if(i&&(t=n),!!R.isString(t)){if(R.isString(s))return t.indexOf(s)!==-1;if(R.isRegExp(s))return s.test(t)}}function vy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function wy(e,t){const n=R.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(i,r,o){return this[s].call(this,t,i,r,o)},configurable:!0})})}let he=class{constructor(t){t&&this.set(t)}set(t,n,s){const i=this;function r(a,l,c){const u=Ms(l);if(!u)throw new Error("header name must be a non-empty string");const f=R.findKey(i,u);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=or(a))}const o=(a,l)=>R.forEach(a,(c,u)=>r(c,u,l));if(R.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(R.isString(t)&&(t=t.trim())&&!xy(t))o(_y(t),n);else if(R.isObject(t)&&R.isIterable(t)){let a={},l,c;for(const u of t){if(!R.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?R.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,n)}else t!=null&&r(n,t,s);return this}get(t,n){if(t=Ms(t),t){const s=R.findKey(this,t);if(s){const i=this[s];if(!n)return i;if(n===!0)return yy(i);if(R.isFunction(n))return n.call(this,i,s);if(R.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ms(t),t){const s=R.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||Lo(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let i=!1;function r(o){if(o=Ms(o),o){const a=R.findKey(s,o);a&&(!n||Lo(s,s[a],a,n))&&(delete s[a],i=!0)}}return R.isArray(t)?t.forEach(r):r(t),i}clear(t){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const r=n[s];(!t||Lo(this,this[r],r,t,!0))&&(delete this[r],i=!0)}return i}normalize(t){const n=this,s={};return R.forEach(this,(i,r)=>{const o=R.findKey(s,r);if(o){n[o]=or(i),delete n[r];return}const a=t?vy(r):String(r).trim();a!==r&&delete n[r],n[a]=or(i),s[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return R.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=t&&R.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(i=>s.set(i)),s}static accessor(t){const s=(this[Dc]=this[Dc]={accessors:{}}).accessors,i=this.prototype;function r(o){const a=Ms(o);s[a]||(wy(i,o),s[a]=!0)}return R.isArray(t)?t.forEach(r):r(t),this}};he.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(he.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});R.freezeMethods(he);function Do(e,t){const n=this||Mi,s=t||n,i=he.from(s.headers);let r=s.data;return R.forEach(e,function(a){r=a.call(n,r,i.normalize(),t?t.status:void 0)}),i.normalize(),r}function ad(e){return!!(e&&e.__CANCEL__)}function ks(e,t,n){at.call(this,e??"canceled",at.ERR_CANCELED,t,n),this.name="CanceledError"}R.inherits(ks,at,{__CANCEL__:!0});function ld(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new at("Request failed with status code "+n.status,[at.ERR_BAD_REQUEST,at.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Sy(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ky(e,t){e=e||10;const n=new Array(e),s=new Array(e);let i=0,r=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=s[r];o||(o=c),n[i]=l,s[i]=c;let f=r,h=0;for(;f!==i;)h+=n[f++],f=f%e;if(i=(i+1)%e,i===r&&(r=(r+1)%e),c-o<t)return;const d=u&&c-u;return d?Math.round(h*1e3/d):void 0}}function Ry(e,t){let n=0,s=1e3/t,i,r;const o=(c,u=Date.now())=>{n=u,i=null,r&&(clearTimeout(r),r=null),e.apply(null,c)};return[(...c)=>{const u=Date.now(),f=u-n;f>=s?o(c,u):(i=c,r||(r=setTimeout(()=>{r=null,o(i)},s-f)))},()=>i&&o(i)]}const wr=(e,t,n=3)=>{let s=0;const i=ky(50,250);return Ry(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-s,c=i(l),u=o<=a;s=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},n)},$c=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},Nc=e=>(...t)=>R.asap(()=>e(...t)),Ey=Gt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Gt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,Ay=Gt.hasStandardBrowserEnv?{write(e,t,n,s,i,r){const o=[e+"="+encodeURIComponent(t)];R.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),R.isString(s)&&o.push("path="+s),R.isString(i)&&o.push("domain="+i),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ty(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Cy(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function cd(e,t,n){let s=!Ty(t);return e&&(s||n==!1)?Cy(e,t):t}const Fc=e=>e instanceof he?{...e}:e;function Kn(e,t){t=t||{};const n={};function s(c,u,f,h){return R.isPlainObject(c)&&R.isPlainObject(u)?R.merge.call({caseless:h},c,u):R.isPlainObject(u)?R.merge({},u):R.isArray(u)?u.slice():u}function i(c,u,f,h){if(R.isUndefined(u)){if(!R.isUndefined(c))return s(void 0,c,f,h)}else return s(c,u,f,h)}function r(c,u){if(!R.isUndefined(u))return s(void 0,u)}function o(c,u){if(R.isUndefined(u)){if(!R.isUndefined(c))return s(void 0,c)}else return s(void 0,u)}function a(c,u,f){if(f in t)return s(c,u);if(f in e)return s(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,f)=>i(Fc(c),Fc(u),f,!0)};return R.forEach(Object.keys(Object.assign({},e,t)),function(u){const f=l[u]||i,h=f(e[u],t[u],u);R.isUndefined(h)&&f!==a||(n[u]=h)}),n}const ud=e=>{const t=Kn({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:a}=t;t.headers=o=he.from(o),t.url=id(cd(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(R.isFormData(n)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Gt.hasStandardBrowserEnv&&(s&&R.isFunction(s)&&(s=s(t)),s||s!==!1&&Ey(t.url))){const c=i&&r&&Ay.read(r);c&&o.set(i,c)}return t},Oy=typeof XMLHttpRequest<"u",Py=Oy&&function(e){return new Promise(function(n,s){const i=ud(e);let r=i.data;const o=he.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,f,h,d,g;function m(){d&&d(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function x(){if(!b)return;const S=he.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),C={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:S,config:e,request:b};ld(function(P){n(P),m()},function(P){s(P),m()},C),b=null}"onloadend"in b?b.onloadend=x:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(x)},b.onabort=function(){b&&(s(new at("Request aborted",at.ECONNABORTED,e,b)),b=null)},b.onerror=function(){s(new at("Network Error",at.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let k=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const C=i.transitional||rd;i.timeoutErrorMessage&&(k=i.timeoutErrorMessage),s(new at(k,C.clarifyTimeoutError?at.ETIMEDOUT:at.ECONNABORTED,e,b)),b=null},r===void 0&&o.setContentType(null),"setRequestHeader"in b&&R.forEach(o.toJSON(),function(k,C){b.setRequestHeader(C,k)}),R.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),a&&a!=="json"&&(b.responseType=i.responseType),c&&([h,g]=wr(c,!0),b.addEventListener("progress",h)),l&&b.upload&&([f,d]=wr(l),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",d)),(i.cancelToken||i.signal)&&(u=S=>{b&&(s(!S||S.type?new ks(null,e,b):S),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const v=Sy(i.url);if(v&&Gt.protocols.indexOf(v)===-1){s(new at("Unsupported protocol "+v+":",at.ERR_BAD_REQUEST,e));return}b.send(r||null)})},My=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,i;const r=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;s.abort(u instanceof at?u:new ks(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,r(new at(`timeout ${t} of ms exceeded`,at.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),e=null)};e.forEach(c=>c.addEventListener("abort",r));const{signal:l}=s;return l.unsubscribe=()=>R.asap(a),l}},Iy=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,i;for(;s<n;)i=s+t,yield e.slice(s,i),s=i},Ly=async function*(e,t){for await(const n of Dy(e))yield*Iy(n,t)},Dy=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},Bc=(e,t,n,s)=>{const i=Ly(e,t);let r=0,o,a=l=>{o||(o=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let f=u.byteLength;if(n){let h=r+=f;n(h)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},co=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fd=co&&typeof ReadableStream=="function",$y=co&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),hd=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Ny=fd&&hd(()=>{let e=!1;const t=new Request(Gt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),zc=64*1024,ha=fd&&hd(()=>R.isReadableStream(new Response("").body)),Sr={stream:ha&&(e=>e.body)};co&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Sr[t]&&(Sr[t]=R.isFunction(e[t])?n=>n[t]():(n,s)=>{throw new at(`Response type '${t}' is not supported`,at.ERR_NOT_SUPPORT,s)})})})(new Response);const Fy=async e=>{if(e==null)return 0;if(R.isBlob(e))return e.size;if(R.isSpecCompliantForm(e))return(await new Request(Gt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(R.isArrayBufferView(e)||R.isArrayBuffer(e))return e.byteLength;if(R.isURLSearchParams(e)&&(e=e+""),R.isString(e))return(await $y(e)).byteLength},By=async(e,t)=>{const n=R.toFiniteNumber(e.getContentLength());return n??Fy(t)},zy=co&&(async e=>{let{url:t,method:n,data:s,signal:i,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:f="same-origin",fetchOptions:h}=ud(e);c=c?(c+"").toLowerCase():"text";let d=My([i,r&&r.toAbortSignal()],o),g;const m=d&&d.unsubscribe&&(()=>{d.unsubscribe()});let b;try{if(l&&Ny&&n!=="get"&&n!=="head"&&(b=await By(u,s))!==0){let C=new Request(t,{method:"POST",body:s,duplex:"half"}),$;if(R.isFormData(s)&&($=C.headers.get("content-type"))&&u.setContentType($),C.body){const[P,D]=$c(b,wr(Nc(l)));s=Bc(C.body,zc,P,D)}}R.isString(f)||(f=f?"include":"omit");const x="credentials"in Request.prototype;g=new Request(t,{...h,signal:d,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:x?f:void 0});let v=await fetch(g);const S=ha&&(c==="stream"||c==="response");if(ha&&(a||S&&m)){const C={};["status","statusText","headers"].forEach(N=>{C[N]=v[N]});const $=R.toFiniteNumber(v.headers.get("content-length")),[P,D]=a&&$c($,wr(Nc(a),!0))||[];v=new Response(Bc(v.body,zc,P,()=>{D&&D(),m&&m()}),C)}c=c||"text";let k=await Sr[R.findKey(Sr,c)||"text"](v,e);return!S&&m&&m(),await new Promise((C,$)=>{ld(C,$,{data:k,headers:he.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:g})})}catch(x){throw m&&m(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new at("Network Error",at.ERR_NETWORK,e,g),{cause:x.cause||x}):at.from(x,x&&x.code,e,g)}}),da={http:ey,xhr:Py,fetch:zy};R.forEach(da,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Hc=e=>`- ${e}`,Hy=e=>R.isFunction(e)||e===null||e===!1,dd={getAdapter:e=>{e=R.isArray(e)?e:[e];const{length:t}=e;let n,s;const i={};for(let r=0;r<t;r++){n=e[r];let o;if(s=n,!Hy(n)&&(s=da[(o=String(n)).toLowerCase()],s===void 0))throw new at(`Unknown adapter '${o}'`);if(s)break;i[o||"#"+r]=s}if(!s){const r=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?r.length>1?`since :
`+r.map(Hc).join(`
`):" "+Hc(r[0]):"as no adapter specified";throw new at("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:da};function $o(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ks(null,e)}function jc(e){return $o(e),e.headers=he.from(e.headers),e.data=Do.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),dd.getAdapter(e.adapter||Mi.adapter)(e).then(function(s){return $o(e),s.data=Do.call(e,e.transformResponse,s),s.headers=he.from(s.headers),s},function(s){return ad(s)||($o(e),s&&s.response&&(s.response.data=Do.call(e,e.transformResponse,s.response),s.response.headers=he.from(s.response.headers))),Promise.reject(s)})}const pd="1.9.0",uo={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{uo[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Vc={};uo.transitional=function(t,n,s){function i(r,o){return"[Axios v"+pd+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,a)=>{if(t===!1)throw new at(i(o," has been removed"+(n?" in "+n:"")),at.ERR_DEPRECATED);return n&&!Vc[o]&&(Vc[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,o,a):!0}};uo.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function jy(e,t,n){if(typeof e!="object")throw new at("options must be an object",at.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const r=s[i],o=t[r];if(o){const a=e[r],l=a===void 0||o(a,r,e);if(l!==!0)throw new at("option "+r+" must be "+l,at.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new at("Unknown option "+r,at.ERR_BAD_OPTION)}}const ar={assertOptions:jy,validators:uo},ze=ar.validators;let Un=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Lc,response:new Lc}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Kn(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:r}=n;s!==void 0&&ar.assertOptions(s,{silentJSONParsing:ze.transitional(ze.boolean),forcedJSONParsing:ze.transitional(ze.boolean),clarifyTimeoutError:ze.transitional(ze.boolean)},!1),i!=null&&(R.isFunction(i)?n.paramsSerializer={serialize:i}:ar.assertOptions(i,{encode:ze.function,serialize:ze.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ar.assertOptions(n,{baseUrl:ze.spelling("baseURL"),withXsrfToken:ze.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=r&&R.merge(r.common,r[n.method]);r&&R.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),n.headers=he.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,f=0,h;if(!l){const g=[jc.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),h=g.length,u=Promise.resolve(n);f<h;)u=u.then(g[f++],g[f++]);return u}h=a.length;let d=n;for(f=0;f<h;){const g=a[f++],m=a[f++];try{d=g(d)}catch(b){m.call(this,b);break}}try{u=jc.call(this,d)}catch(g){return Promise.reject(g)}for(f=0,h=c.length;f<h;)u=u.then(c[f++],c[f++]);return u}getUri(t){t=Kn(this.defaults,t);const n=cd(t.baseURL,t.url,t.allowAbsoluteUrls);return id(n,t.params,t.paramsSerializer)}};R.forEach(["delete","get","head","options"],function(t){Un.prototype[t]=function(n,s){return this.request(Kn(s||{},{method:t,url:n,data:(s||{}).data}))}});R.forEach(["post","put","patch"],function(t){function n(s){return function(r,o,a){return this.request(Kn(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Un.prototype[t]=n(),Un.prototype[t+"Form"]=n(!0)});let Vy=class gd{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(a=>{s.subscribe(a),r=a}).then(i);return o.cancel=function(){s.unsubscribe(r)},o},t(function(r,o,a){s.reason||(s.reason=new ks(r,o,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new gd(function(i){t=i}),cancel:t}}};function Uy(e){return function(n){return e.apply(null,n)}}function Wy(e){return R.isObject(e)&&e.isAxiosError===!0}const pa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pa).forEach(([e,t])=>{pa[t]=e});function md(e){const t=new Un(e),n=qh(Un.prototype.request,t);return R.extend(n,Un.prototype,t,{allOwnKeys:!0}),R.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return md(Kn(e,i))},n}const Ot=md(Mi);Ot.Axios=Un;Ot.CanceledError=ks;Ot.CancelToken=Vy;Ot.isCancel=ad;Ot.VERSION=pd;Ot.toFormData=lo;Ot.AxiosError=at;Ot.Cancel=Ot.CanceledError;Ot.all=function(t){return Promise.all(t)};Ot.spread=Uy;Ot.isAxiosError=Wy;Ot.mergeConfig=Kn;Ot.AxiosHeaders=he;Ot.formToJSON=e=>od(R.isHTMLForm(e)?new FormData(e):e);Ot.getAdapter=dd.getAdapter;Ot.HttpStatusCode=pa;Ot.default=Ot;const{Axios:$R,AxiosError:NR,CanceledError:FR,isCancel:BR,CancelToken:zR,VERSION:HR,all:jR,Cancel:VR,isAxiosError:UR,spread:WR,toFormData:qR,AxiosHeaders:KR,HttpStatusCode:GR,formToJSON:YR,getAdapter:XR,mergeConfig:QR}=Ot,ga=Ot.create({baseURL:"/",timeout:12e4});ga.interceptors.request.use(e=>{const t=localStorage.getItem("admin_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));const Se=Ot.create({baseURL:"/api/v1/admin",timeout:12e4});Se.interceptors.request.use(e=>{const t=localStorage.getItem("admin_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));const ae={auth:{login(e,t){const n=new URLSearchParams;return n.append("username",e),n.append("password",t),Ot.post("/api/v1/auth/token",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getCurrentUser(){return ga.get("/api/v1/users/me")}},users:{getUsers(e=0,t=100){return Se.get("/users",{params:{skip:e,limit:t}})},updateUser(e,t){return Se.patch(`/users/${e}`,t)}},stats:{getDemographicsStats(){return Se.get("/stats/demographics")},getAIAnalysis(e){return Se.post("/stats/ai-analysis",{demographics:e})}},assessments:{search(e=null){const t={};return e&&(t.id_card=e),Se.get("/assessments/search",{params:t})},getById(e){return ga.get(`/api/v1/reports/${e}`)}},guidance:{getGuidance(e,t){return Se.get(`/guidance/${e}`,{params:{id_card:t}})}},interrogation:{getList({skip:e=0,limit:t=10}){return Se.get("/interrogations",{params:{skip:e,limit:t}})},getById(e){return Se.get(`/interrogations/${e}`)},start(e){return Se.post("/interrogation/start",e)},suggestQuestion(e,t){const n=t.map(s=>({q:s.q,a:s.a}));return Se.post(`/interrogation/${e}/suggest`,n)},save(e,t){return Se.put(`/interrogation/${e}`,t)}}},bd=p_({state:{token:localStorage.getItem("admin_token")||null,user:null,users:[],totalUsers:0,assessments:[],stats:null,currentGuidance:null,currentReport:null,interrogationRecord:null,interrogationList:{records:[],total:0},loading:!1,error:null},getters:{isAuthenticated:e=>!!e.token,currentUser:e=>e.user},mutations:{SET_TOKEN(e,t){e.token=t,t?localStorage.setItem("admin_token",t):localStorage.removeItem("admin_token")},SET_USER(e,t){e.user=t},SET_USERS(e,{users:t,total:n}){e.users=t,e.totalUsers=n},SET_ASSESSMENTS(e,t){e.assessments=t},SET_STATS(e,t){e.stats=t},SET_CURRENT_GUIDANCE(e,t){e.currentGuidance=t},SET_CURRENT_REPORT(e,t){e.currentReport=t},SET_INTERROGATION_RECORD(e,t){e.interrogationRecord=t},SET_INTERROGATION_LIST(e,{records:t,total:n}){e.interrogationList.records=t,e.interrogationList.total=n},UPDATE_INTERROGATION_QA(e,t){e.interrogationRecord&&(e.interrogationRecord.qas=t)},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},CLEAR_ERROR(e){e.error=null}},actions:{async login({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:i}=await ae.auth.login(t.username,t.password);e("SET_TOKEN",i.access_token);const r=await ae.auth.getCurrentUser();if(!r.data.is_superuser)throw new Error("您不是管理员，无法登录后台系统。");e("SET_USER",r.data),Nr.push({name:"Dashboard"})}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||i.message||"登录失败";throw e("SET_ERROR",r),e("SET_TOKEN",null),e("SET_USER",null),i}finally{e("SET_LOADING",!1)}},logout({commit:e}){e("SET_TOKEN",null),e("SET_USER",null),Nr.push({name:"Login"})},async fetchUsers({commit:e},{skip:t,limit:n}){e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:s}=await ae.users.getUsers(t,n);e("SET_USERS",{users:s.users,total:s.total})}catch{e("SET_ERROR","获取用户列表失败")}finally{e("SET_LOADING",!1)}},async updateUserStatus({commit:e},{userId:t,isActive:n}){var s,i;try{await ae.users.updateUser(t,{is_active:n})}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"更新用户状态失败";throw e("SET_ERROR",o),new Error(o)}},async fetchStats({commit:e}){e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:t}=await ae.stats.getDemographicsStats();e("SET_STATS",t)}catch{e("SET_ERROR","获取统计数据失败")}finally{e("SET_LOADING",!1)}},async searchAssessments({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR"),e("SET_ASSESSMENTS",[]);try{const{data:i}=await ae.assessments.search(t);e("SET_ASSESSMENTS",i)}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||"搜索评估记录失败";e("SET_ERROR",r)}finally{e("SET_LOADING",!1)}},async fetchGuidance({commit:e},{scenario:t,idCard:n}){var s,i;e("SET_LOADING",!0),e("CLEAR_ERROR"),e("SET_CURRENT_GUIDANCE",null);try{const{data:r}=await ae.guidance.getGuidance(t,n);e("SET_CURRENT_GUIDANCE",r)}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"获取指导方案失败";throw e("SET_ERROR",o),new Error(o)}finally{e("SET_LOADING",!1)}},async fetchReportById({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR"),e("SET_CURRENT_REPORT",null);try{const{data:i}=await ae.assessments.getById(t);if(i&&i.report)e("SET_CURRENT_REPORT",i.report);else throw i&&i.message?new Error(i.message):new Error("获取报告时返回了无效的数据格式")}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||i.message||"获取报告详情失败";e("SET_ERROR",r)}finally{e("SET_LOADING",!1)}},async startInterrogation({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:i}=await ae.interrogation.start(t);return e("SET_INTERROGATION_RECORD",i),i}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||"开始新的审讯失败";throw e("SET_ERROR",r),new Error(r)}finally{e("SET_LOADING",!1)}},async suggestQuestion({commit:e},{recordId:t,currentQAs:n}){var s,i;try{const{data:r}=await ae.interrogation.suggestQuestion(t,n);return r}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"获取AI建议失败";throw e("SET_ERROR",o),new Error(o)}},async saveInterrogation({commit:e},{recordId:t,updateData:n}){var s,i;if(!t)throw new Error("没有可保存的审讯记录ID");e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:r}=await ae.interrogation.save(t,n);return e("SET_INTERROGATION_RECORD",r),r}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"保存审讯笔录失败";throw e("SET_ERROR",o),new Error(o)}finally{e("SET_LOADING",!1)}},async fetchInterrogationRecordById({commit:e},t){var n,s;e("SET_LOADING",!0),e("CLEAR_ERROR"),e("SET_INTERROGATION_RECORD",null);try{const{data:i}=await ae.interrogation.getById(t);return e("SET_INTERROGATION_RECORD",i),i}catch(i){const r=((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.detail)||`获取审讯记录(ID: ${t})失败`;throw e("SET_ERROR",r),new Error(r)}finally{e("SET_LOADING",!1)}},async fetchInterrogationList({commit:e},{skip:t,limit:n}){var s,i;e("SET_LOADING",!0),e("CLEAR_ERROR");try{const{data:r}=await ae.interrogation.getList({skip:t,limit:n});e("SET_INTERROGATION_LIST",{records:r.records,total:r.total})}catch(r){const o=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.detail)||"获取审讯记录列表失败";e("SET_ERROR",o),e("SET_INTERROGATION_LIST",{records:[],total:0})}finally{e("SET_LOADING",!1)}}}}),qy={class:"sidebar",style:{width:"250px"}},Ky={class:"sidebar-nav"},Gy={class:"submenu"},Yy={__name:"SideBar",setup(e){const t=vs();to();const n=Ph(),s=vt(!1),i=()=>{s.value=!s.value};Rn(n,o=>{o.path.startsWith("/interrogation")&&(s.value=!0)},{immediate:!0});const r=()=>{t.dispatch("logout")};return(o,a)=>{const l=ja("router-link");return L(),B("aside",qy,[a[11]||(a[11]=p("div",{class:"sidebar-header"},[p("i",{class:"fas fa-brain logo-icon"}),p("h1",null,"倾听者后台")],-1)),p("nav",Ky,[p("ul",null,[p("li",null,[ut(l,{to:"/","exact-active-class":"active"},{default:be(()=>a[0]||(a[0]=[p("i",{class:"fas fa-chart-pie"},null,-1),p("span",null,"数据分析",-1)])),_:1,__:[0]})]),p("li",null,[ut(l,{to:"/assessment-search","active-class":"active"},{default:be(()=>a[1]||(a[1]=[p("i",{class:"fas fa-search"},null,-1),p("span",null,"评估查询",-1)])),_:1,__:[1]})]),p("li",null,[ut(l,{to:"/user-management","active-class":"active"},{default:be(()=>a[2]||(a[2]=[p("i",{class:"fas fa-users"},null,-1),p("span",null,"用户管理",-1)])),_:1,__:[2]})]),p("li",null,[ut(l,{to:"/petitioner-guidance","active-class":"active"},{default:be(()=>a[3]||(a[3]=[p("i",{class:"fas fa-hand-holding-heart"},null,-1),p("span",null,"上访户情绪疏导",-1)])),_:1,__:[3]})]),p("li",null,[ut(l,{to:"/juvenile-counseling","active-class":"active"},{default:be(()=>a[4]||(a[4]=[p("i",{class:"fas fa-child"},null,-1),p("span",null,"未成年人心理辅导",-1)])),_:1,__:[4]})]),p("li",null,[ut(l,{to:"/police-adjustment","active-class":"active"},{default:be(()=>a[5]||(a[5]=[p("i",{class:"fas fa-shield-alt"},null,-1),p("span",null,"民辅警心理调适",-1)])),_:1,__:[5]})]),p("li",null,[ut(l,{to:"/law-query","active-class":"active"},{default:be(()=>a[6]||(a[6]=[p("i",{class:"fas fa-balance-scale"},null,-1),p("span",null,"法规查询",-1)])),_:1,__:[6]})]),p("li",{class:Ce(["nav-item-dropdown",{open:s.value}])},[p("a",{onClick:Oi(i,["prevent"])},a[7]||(a[7]=[p("i",{class:"fas fa-gavel"},null,-1),p("span",null,"智能审讯",-1),p("i",{class:"fas fa-chevron-down dropdown-arrow"},null,-1)])),Ft(p("ul",Gy,[p("li",null,[ut(l,{to:"/interrogation/new","active-class":"active"},{default:be(()=>a[8]||(a[8]=[p("i",{class:"fas fa-plus-circle"},null,-1),p("span",null,"新建审讯",-1)])),_:1,__:[8]})]),p("li",null,[ut(l,{to:"/interrogation/list","active-class":"active"},{default:be(()=>a[9]||(a[9]=[p("i",{class:"fas fa-list-alt"},null,-1),p("span",null,"查看记录",-1)])),_:1,__:[9]})])],512),[[gm,s.value]])],2)])]),p("div",{class:"sidebar-footer"},[p("button",{onClick:r,class:"logout-btn"},a[10]||(a[10]=[p("i",{class:"fas fa-sign-out-alt"},null,-1),p("span",null,"退出登录",-1)]))])])}}},Xy=Wt(Yy,[["__scopeId","data-v-a00d75fa"]]),Qy={class:"app-layout"},Jy={__name:"AppLayout",setup(e){const t=vt(250);return(n,s)=>{const i=ja("router-view");return L(),B("div",Qy,[ut(Xy),p("main",{class:"main-content",style:jr({marginLeft:t.value+"px"})},[ut(i,null,{default:be(({Component:r})=>[ut(gh,{name:"fade",mode:"out-in"},{default:be(()=>[(L(),fi(mg(r)))]),_:2},1024)]),_:1})],4)])}}},Zy=Wt(Jy,[["__scopeId","data-v-fb2e6263"]]),t0="/admin/assets/police_emblem-Dmb8xxjE.png",e0={class:"login-container"},n0={class:"login-box"},s0={class:"form-group"},i0={class:"input-wrapper"},r0={class:"form-group"},o0={class:"input-wrapper"},a0={key:0,class:"alert alert-danger"},l0=["disabled"],c0={key:0},u0={key:1},f0={__name:"LoginView",setup(e){const t=vt(""),n=vt(""),s=vs();to();const i=Ct(()=>s.state.loading),r=Ct(()=>s.state.error),o=async()=>{s.commit("CLEAR_ERROR");try{await s.dispatch("login",{username:t.value,password:n.value})}catch(a){console.error("Login failed:",a)}};return(a,l)=>(L(),B("div",e0,[p("div",n0,[l[7]||(l[7]=p("img",{src:t0,alt:"警徽",class:"emblem-image"},null,-1)),l[8]||(l[8]=p("h1",{class:"system-title"},[nt(" “倾听者” "),p("span",{class:"subtitle"},"AI智能警务分析评估应用系统")],-1)),l[9]||(l[9]=p("p",{class:"login-prompt"},"请使用您的凭据登录",-1)),p("form",{onSubmit:Oi(o,["prevent"])},[p("div",s0,[l[3]||(l[3]=p("label",{for:"username"},"用户名",-1)),p("div",i0,[l[2]||(l[2]=p("i",{class:"fas fa-user"},null,-1)),Ft(p("input",{type:"text",id:"username","onUpdate:modelValue":l[0]||(l[0]=c=>t.value=c),required:"",placeholder:"请输入用户名"},null,512),[[te,t.value]])])]),p("div",r0,[l[5]||(l[5]=p("label",{for:"password"},"密码",-1)),p("div",o0,[l[4]||(l[4]=p("i",{class:"fas fa-lock"},null,-1)),Ft(p("input",{type:"password",id:"password","onUpdate:modelValue":l[1]||(l[1]=c=>n.value=c),required:"",placeholder:"请输入密码"},null,512),[[te,n.value]])])]),r.value?(L(),B("div",a0,G(r.value),1)):Tt("",!0),p("button",{type:"submit",class:"btn btn-primary btn-block",disabled:i.value},[i.value?(L(),B("span",c0,l[6]||(l[6]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 登录中...")]))):(L(),B("span",u0,"登 录"))],8,l0)],32)]),l[10]||(l[10]=p("footer",{class:"login-footer"}," 技术支持：倾听者项目组 ",-1))]))}},h0=Wt(f0,[["__scopeId","data-v-47365eb3"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ii(e){return e+.5|0}const wn=(e,t,n)=>Math.max(Math.min(e,n),t);function Hs(e){return wn(Ii(e*2.55),0,255)}function En(e){return wn(Ii(e*255),0,255)}function sn(e){return wn(Ii(e/2.55)/100,0,1)}function Uc(e){return wn(Ii(e*100),0,100)}const we={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ma=[..."0123456789ABCDEF"],d0=e=>ma[e&15],p0=e=>ma[(e&240)>>4]+ma[e&15],zi=e=>(e&240)>>4===(e&15),g0=e=>zi(e.r)&&zi(e.g)&&zi(e.b)&&zi(e.a);function m0(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&we[e[1]]*17,g:255&we[e[2]]*17,b:255&we[e[3]]*17,a:t===5?we[e[4]]*17:255}:(t===7||t===9)&&(n={r:we[e[1]]<<4|we[e[2]],g:we[e[3]]<<4|we[e[4]],b:we[e[5]]<<4|we[e[6]],a:t===9?we[e[7]]<<4|we[e[8]]:255})),n}const b0=(e,t)=>e<255?t(e):"";function _0(e){var t=g0(e)?d0:p0;return e?"#"+t(e.r)+t(e.g)+t(e.b)+b0(e.a,t):void 0}const y0=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _d(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function x0(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function v0(e,t,n){const s=_d(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function w0(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function tl(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=w0(n,s,i,u,r),l=l*60+.5),[l|0,c||0,a]}function el(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(En)}function nl(e,t,n){return el(_d,e,t,n)}function S0(e,t,n){return el(v0,e,t,n)}function k0(e,t,n){return el(x0,e,t,n)}function yd(e){return(e%360+360)%360}function R0(e){const t=y0.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?Hs(+t[5]):En(+t[5]));const i=yd(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=S0(i,r,o):t[1]==="hsv"?s=k0(i,r,o):s=nl(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function E0(e,t){var n=tl(e);n[0]=yd(n[0]+t),n=nl(n),e.r=n[0],e.g=n[1],e.b=n[2]}function A0(e){if(!e)return;const t=tl(e),n=t[0],s=Uc(t[1]),i=Uc(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${sn(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const Wc={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},qc={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function T0(){const e={},t=Object.keys(qc),n=Object.keys(Wc);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,Wc[r]);r=parseInt(qc[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Hi;function C0(e){Hi||(Hi=T0(),Hi.transparent=[0,0,0,0]);const t=Hi[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const O0=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function P0(e){const t=O0.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?Hs(o):wn(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?Hs(s):wn(s,0,255)),i=255&(t[4]?Hs(i):wn(i,0,255)),r=255&(t[6]?Hs(r):wn(r,0,255)),{r:s,g:i,b:r,a:n}}}function M0(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${sn(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const No=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,ns=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function I0(e,t,n){const s=ns(sn(e.r)),i=ns(sn(e.g)),r=ns(sn(e.b));return{r:En(No(s+n*(ns(sn(t.r))-s))),g:En(No(i+n*(ns(sn(t.g))-i))),b:En(No(r+n*(ns(sn(t.b))-r))),a:e.a+n*(t.a-e.a)}}function ji(e,t,n){if(e){let s=tl(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=nl(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function xd(e,t){return e&&Object.assign(t||{},e)}function Kc(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=En(e[3]))):(t=xd(e,{r:0,g:0,b:0,a:1}),t.a=En(t.a)),t}function L0(e){return e.charAt(0)==="r"?P0(e):R0(e)}class _i{constructor(t){if(t instanceof _i)return t;const n=typeof t;let s;n==="object"?s=Kc(t):n==="string"&&(s=m0(t)||C0(t)||L0(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=xd(this._rgb);return t&&(t.a=sn(t.a)),t}set rgb(t){this._rgb=Kc(t)}rgbString(){return this._valid?M0(this._rgb):void 0}hexString(){return this._valid?_0(this._rgb):void 0}hslString(){return this._valid?A0(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=I0(this._rgb,t._rgb,n)),this}clone(){return new _i(this.rgb)}alpha(t){return this._rgb.a=En(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Ii(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return ji(this._rgb,2,t),this}darken(t){return ji(this._rgb,2,-t),this}saturate(t){return ji(this._rgb,1,t),this}desaturate(t){return ji(this._rgb,1,-t),this}rotate(t){return E0(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Je(){}const D0=(()=>{let e=0;return()=>e++})();function Ut(e){return e==null}function Bt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ht(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function hn(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function He(e,t){return hn(e)?e:t}function mt(e,t){return typeof e>"u"?t:e}const $0=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,vd=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function At(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function yt(e,t,n,s){let i,r,o;if(Bt(e))for(r=e.length,i=0;i<r;i++)t.call(n,e[i],i);else if(ht(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function kr(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Rr(e){if(Bt(e))return e.map(Rr);if(ht(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=Rr(e[n[i]]);return t}return e}function wd(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function N0(e,t,n,s){if(!wd(e))return;const i=t[e],r=n[e];ht(i)&&ht(r)?yi(i,r,s):t[e]=Rr(r)}function yi(e,t,n){const s=Bt(t)?t:[t],i=s.length;if(!ht(e))return e;n=n||{};const r=n.merger||N0;let o;for(let a=0;a<i;++a){if(o=s[a],!ht(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],e,o,n)}return e}function ti(e,t){return yi(e,t,{merger:F0})}function F0(e,t,n){if(!wd(e))return;const s=t[e],i=n[e];ht(s)&&ht(i)?ti(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Rr(i))}const Gc={"":e=>e,x:e=>e.x,y:e=>e.y};function B0(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function z0(e){const t=B0(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function xi(e,t){return(Gc[t]||(Gc[t]=z0(t)))(e)}function sl(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Er=e=>typeof e<"u",Cn=e=>typeof e=="function",Yc=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function H0(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const $t=Math.PI,Dt=2*$t,Ar=Number.POSITIVE_INFINITY,j0=$t/180,Nt=$t/2,Ln=$t/4,Xc=$t*2/3,Qc=Math.sign;function V0(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function U0(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Tr(e){return!U0(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function jn(e){return e*($t/180)}function W0(e){return e*(180/$t)}function Sd(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*$t&&(r+=Dt),{angle:r,distance:i}}function q0(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Dn(e){return(e%Dt+Dt)%Dt}function Cr(e,t,n,s){const i=Dn(e),r=Dn(t),o=Dn(n),a=Dn(r-i),l=Dn(o-i),c=Dn(i-r),u=Dn(i-o);return i===r||i===o||s&&r===o||a>l&&c<u}function ye(e,t,n){return Math.max(t,Math.min(n,e))}function K0(e){return ye(e,-32768,32767)}function js(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function il(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const ba=(e,t,n,s)=>il(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),G0=(e,t,n)=>il(e,n,s=>e[s][t]>=n);function Y0(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const kd=["push","pop","shift","splice","unshift"];function X0(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),kd.forEach(n=>{const s="_onData"+sl(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function Jc(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(kd.forEach(r=>{delete e[r]}),delete e._chartjs)}function Q0(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Rd=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Ed(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,Rd.call(window,()=>{s=!1,e.apply(t,n)}))}}function J0(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const rl=e=>e==="start"?"left":e==="end"?"right":"center",qt=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,Z0=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t,Vi=e=>e===0||e===1,Zc=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Dt/n)),tu=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Dt/n)+1,ei={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Nt)+1,easeOutSine:e=>Math.sin(e*Nt),easeInOutSine:e=>-.5*(Math.cos($t*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Vi(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Vi(e)?e:Zc(e,.075,.3),easeOutElastic:e=>Vi(e)?e:tu(e,.075,.3),easeInOutElastic(e){return Vi(e)?e:e<.5?.5*Zc(e*2,.1125,.45):.5+.5*tu(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-ei.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?ei.easeInBounce(e*2)*.5:ei.easeOutBounce(e*2-1)*.5+.5};function Ad(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function eu(e){return Ad(e)?e:new _i(e)}function Fo(e){return Ad(e)?e:new _i(e).saturate(.5).darken(.1).hexString()}const tx=["x","y","borderWidth","radius","tension"],ex=["color","borderColor","backgroundColor"];function nx(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:ex},numbers:{type:"number",properties:tx}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function sx(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const nu=new Map;function ix(e,t){t=t||{};const n=e+JSON.stringify(t);let s=nu.get(n);return s||(s=new Intl.NumberFormat(e,t),nu.set(n,s)),s}function rx(e,t,n){return ix(t,n).format(e)}const ox={values(e){return Bt(e)?e:""+e}};var ax={formatters:ox};function lx(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ax.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Gn=Object.create(null),_a=Object.create(null);function ni(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function Bo(e,t,n){return typeof t=="string"?yi(ni(e,t),n):yi(ni(e,""),t)}class cx{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Fo(i.backgroundColor),this.hoverBorderColor=(s,i)=>Fo(i.borderColor),this.hoverColor=(s,i)=>Fo(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Bo(this,t,n)}get(t){return ni(this,t)}describe(t,n){return Bo(_a,t,n)}override(t,n){return Bo(Gn,t,n)}route(t,n,s,i){const r=ni(this,t),o=ni(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return ht(l)?Object.assign({},c,l):mt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var It=new cx({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[nx,sx,lx]);function ux(e){return!e||Ut(e.size)||Ut(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function su(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function $n(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function iu(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function ru(e,t,n,s){Td(e,t,n,s,null)}function Td(e,t,n,s,i){let r,o,a,l,c,u,f,h;const d=t.pointStyle,g=t.rotation,m=t.radius;let b=(g||0)*j0;if(d&&typeof d=="object"&&(r=d.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(b),e.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),e.restore();return}if(!(isNaN(m)||m<=0)){switch(e.beginPath(),d){default:i?e.ellipse(n,s,i/2,m,0,0,Dt):e.arc(n,s,m,0,Dt),e.closePath();break;case"triangle":u=i?i/2:m,e.moveTo(n+Math.sin(b)*u,s-Math.cos(b)*m),b+=Xc,e.lineTo(n+Math.sin(b)*u,s-Math.cos(b)*m),b+=Xc,e.lineTo(n+Math.sin(b)*u,s-Math.cos(b)*m),e.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(b+Ln)*l,f=Math.cos(b+Ln)*(i?i/2-c:l),a=Math.sin(b+Ln)*l,h=Math.sin(b+Ln)*(i?i/2-c:l),e.arc(n-f,s-a,c,b-$t,b-Nt),e.arc(n+h,s-o,c,b-Nt,b),e.arc(n+f,s+a,c,b,b+Nt),e.arc(n-h,s+o,c,b+Nt,b+$t),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,u=i?i/2:l,e.rect(n-u,s-l,2*u,2*l);break}b+=Ln;case"rectRot":f=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,h=Math.sin(b)*(i?i/2:m),e.moveTo(n-f,s-a),e.lineTo(n+h,s-o),e.lineTo(n+f,s+a),e.lineTo(n-h,s+o),e.closePath();break;case"crossRot":b+=Ln;case"cross":f=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,h=Math.sin(b)*(i?i/2:m),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+h,s-o),e.lineTo(n-h,s+o);break;case"star":f=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,h=Math.sin(b)*(i?i/2:m),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+h,s-o),e.lineTo(n-h,s+o),b+=Ln,f=Math.cos(b)*(i?i/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,h=Math.sin(b)*(i?i/2:m),e.moveTo(n-f,s-a),e.lineTo(n+f,s+a),e.moveTo(n+h,s-o),e.lineTo(n-h,s+o);break;case"line":o=i?i/2:Math.cos(b)*m,a=Math.sin(b)*m,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(b)*(i?i/2:m),s+Math.sin(b)*m);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Cd(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function ol(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function al(e){e.restore()}function fx(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ut(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function hx(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function dx(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function vi(e,t,n,s,i,r={}){const o=Bt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,fx(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&dx(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),Ut(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,n,s,r.maxWidth)),e.fillText(c,n,s,r.maxWidth),hx(e,n,s,c,r),s+=Number(i.lineHeight);e.restore()}function ya(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*$t,$t,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,$t,Nt,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,Nt,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-Nt,!0),e.lineTo(n+o.topLeft,s)}const px=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,gx=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function mx(e,t){const n=(""+e).match(px);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const bx=e=>+e||0;function ll(e,t){const n={},s=ht(t),i=s?Object.keys(t):t,r=ht(e)?s?o=>mt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=bx(r(o));return n}function _x(e){return ll(e,{top:"y",right:"x",bottom:"y",left:"x"})}function si(e){return ll(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Te(e){const t=_x(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Yt(e,t){e=e||{},t=t||It.font;let n=mt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=mt(e.style,t.style);s&&!(""+s).match(gx)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:mt(e.family,t.family),lineHeight:mx(mt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:mt(e.weight,t.weight),string:""};return i.string=ux(i),i}function Ui(e,t,n,s){let i,r,o;for(i=0,r=e.length;i<r;++i)if(o=e[i],o!==void 0&&o!==void 0)return o}function yx(e,t,n){const{min:s,max:i}=e,r=vd(t,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function Rs(e,t){return Object.assign(Object.create(e),t)}function cl(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=Id("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>cl([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return Pd(a,l,()=>Ax(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return au(a).includes(l)},ownKeys(a){return au(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function _s(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Od(e,s),setContext:r=>_s(e,r,n,s),override:r=>_s(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return Pd(r,o,()=>vx(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function Od(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:Cn(n)?n:()=>n,isIndexable:Cn(s)?s:()=>s}}const xx=(e,t)=>e?e+sl(t):t,ul=(e,t)=>ht(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Pd(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function vx(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return Cn(a)&&o.isScriptable(t)&&(a=wx(t,a,e,n)),Bt(a)&&a.length&&(a=Sx(t,a,e,o.isIndexable)),ul(t,a)&&(a=_s(a,i,r&&r[t],o)),a}function wx(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),ul(e,l)&&(l=fl(i._scopes,i,e,l)),l}function Sx(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(ht(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const f=fl(c,i,e,u);t.push(_s(f,r,o&&o[e],a))}}return t}function Md(e,t,n){return Cn(e)?e(t,n):e}const kx=(e,t)=>e===!0?t:typeof e=="string"?xi(t,e):void 0;function Rx(e,t,n,s,i){for(const r of t){const o=kx(n,r);if(o){e.add(o);const a=Md(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function fl(e,t,n,s){const i=t._rootScopes,r=Md(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let l=ou(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=ou(a,o,r,l,s),l===null)?!1:cl(Array.from(a),[""],i,r,()=>Ex(t,n,s))}function ou(e,t,n,s,i){for(;n;)n=Rx(e,t,n,s,i);return n}function Ex(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return Bt(i)&&ht(n)?n:i||{}}function Ax(e,t,n,s){let i;for(const r of t)if(i=Id(xx(r,e),n),typeof i<"u")return ul(e,i)?fl(n,s,e,i):i}function Id(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function au(e){let t=e._keys;return t||(t=e._keys=Tx(e._scopes)),t}function Tx(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function hl(){return typeof window<"u"&&typeof document<"u"}function dl(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Or(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const fo=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Cx(e,t){return fo(e).getPropertyValue(t)}const Ox=["top","right","bottom","left"];function Wn(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=Ox[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Px=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function Mx(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(Px(i,r,e.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Bn(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=fo(n),r=i.boxSizing==="border-box",o=Wn(i,"padding"),a=Wn(i,"border","width"),{x:l,y:c,box:u}=Mx(e,n),f=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:d,height:g}=t;return r&&(d-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-f)/d*n.width/s),y:Math.round((c-h)/g*n.height/s)}}function Ix(e,t,n){let s,i;if(t===void 0||n===void 0){const r=e&&dl(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=fo(r),l=Wn(a,"border","width"),c=Wn(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Or(a.maxWidth,r,"clientWidth"),i=Or(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||Ar,maxHeight:i||Ar}}const Wi=e=>Math.round(e*10)/10;function Lx(e,t,n,s){const i=fo(e),r=Wn(i,"margin"),o=Or(i.maxWidth,e,"clientWidth")||Ar,a=Or(i.maxHeight,e,"clientHeight")||Ar,l=Ix(e,t,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const h=Wn(i,"border","width"),d=Wn(i,"padding");c-=d.width+h.width,u-=d.height+h.height}return c=Math.max(0,c-r.width),u=Math.max(0,s?c/s:u-r.height),c=Wi(Math.min(c,o,l.maxWidth)),u=Wi(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Wi(c/2)),(t!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=Wi(Math.floor(u*s))),{width:c,height:u}}function lu(e,t,n){const s=t||1,i=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const Dx=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};hl()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function cu(e,t){const n=Cx(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const $x=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},Nx=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ds(e,t,n){return e?$x(t,n):Nx()}function Ld(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function Dd(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function qi(e,t,n){return e.options.clip?e[n]:t[n]}function Fx(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:qi(n,t,"left"),right:qi(n,t,"right"),top:qi(s,t,"top"),bottom:qi(s,t,"bottom")}:t}function Bx(e,t){const n=t._clip;if(n.disabled)return!1;const s=Fx(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class zx{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Rd.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var tn=new zx;const uu="transparent",Hx={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=eu(e||uu),i=s.valid&&eu(t||uu);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class jx{constructor(t,n,s,i){const r=n[s];i=Ui([t.to,i,r,t.from]);const o=Ui([t.from,r,i]);this._active=!0,this._fn=t.fn||Hx[t.type||typeof o],this._easing=ei[t.easing]||ei.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Ui([t.to,n,i,t.from]),this._from=Ui([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class $d{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!ht(t))return;const n=Object.keys(It.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!ht(r))return;const o={};for(const a of n)o[a]=r[a];(Bt(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=Ux(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&Vx(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,n));continue}const u=n[c];let f=r[c];const h=s.get(c);if(f)if(h&&f.active()){f.update(h,u,a);continue}else f.cancel();if(!h||!h.duration){t[c]=u;continue}r[c]=f=new jx(h,t,c,u),i.push(f)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return tn.add(this._chart,s),!0}}function Vx(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function Ux(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function fu(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function Wx(e,t,n){if(n===!1)return!1;const s=fu(e,n),i=fu(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function qx(e){let t,n,s,i;return ht(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function Nd(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function hu(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,s.all)continue;break}c=e.values[l],hn(c)&&(r||t===0||Qc(t)===Qc(c))&&(t+=c)}return!u&&!s.all?0:t}function Kx(e,t){const{iScale:n,vScale:s}=t,i=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[r]:e[u]};return a}function zo(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function Gx(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function Yx(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function Xx(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function du(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function pu(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,u=Gx(r,o,s),f=t.length;let h;for(let d=0;d<f;++d){const g=t[d],{[l]:m,[c]:b}=g,x=g._stacks||(g._stacks={});h=x[c]=Xx(i,u,m),h[a]=b,h._top=du(h,o,!0,s.type),h._bottom=du(h,o,!1,s.type);const v=h._visualValues||(h._visualValues={});v[a]=b}}function Ho(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function Qx(e,t){return Rs(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Jx(e,t,n){return Rs(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Is(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const jo=e=>e==="reset"||e==="none",gu=(e,t)=>t?e:Object.assign({},e),Zx=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Nd(n,!0),values:null};class ii{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=zo(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Is(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(f,h,d,g)=>f==="x"?h:f==="r"?g:d,r=n.xAxisID=mt(s.xAxisID,Ho(t,"x")),o=n.yAxisID=mt(s.yAxisID,Ho(t,"y")),a=n.rAxisID=mt(s.rAxisID,Ho(t,"r")),l=n.indexAxis,c=n.iAxisID=i(l,r,o,a),u=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Jc(this._data,this),t._stacked&&Is(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(ht(n)){const i=this._cachedMeta;this._data=Kx(n,i)}else if(s!==n){if(s){Jc(s,this);const i=this._cachedMeta;Is(i),i._parsed=[]}n&&Object.isExtensible(n)&&X0(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=zo(n.vScale,n),n.stack!==s.stack&&(i=!0,Is(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&(pu(this,n._parsed),n._stacked=zo(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&n===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],u,f,h;if(this._parsing===!1)s._parsed=i,s._sorted=!0,h=i;else{Bt(i[t])?h=this.parseArrayData(s,i,t,n):ht(i[t])?h=this.parseObjectData(s,i,t,n):h=this.parsePrimitiveData(s,i,t,n);const d=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)s._parsed[u+t]=f=h[u],l&&(d()&&(l=!1),c=f);s._sorted=l}o&&pu(this,h)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,f=new Array(i);let h,d,g;for(h=0,d=i;h<d;++h)g=h+s,f[h]={[a]:u||r.parse(c[g],g),[l]:o.parse(n[g],g)};return f}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,u,f;for(l=0,c=i;l<c;++l)u=l+s,f=n[u],a[l]={x:r.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,f,h,d;for(u=0,f=i;u<f;++u)h=u+s,d=n[h],c[u]={x:r.parse(xi(d,a),h),y:o.parse(xi(d,l),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:Nd(i,!0),values:n._stacks[t.axis]._visualValues};return hu(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=hu(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=Zx(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=Yx(a);let h,d;function g(){d=i[h];const m=d[a.axis];return!hn(d[t.axis])||u>m||f<m}for(h=0;h<o&&!(!g()&&(this.updateRangeFromParsed(c,t,d,l),r));++h);if(r){for(h=o-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,t,d,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],hn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=qx(mt(this.options.clip,Wx(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,r,a,l),u=a;u<a+l;++u){const f=i[u];f.hidden||(f.active&&c?o.push(f):f.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=Jx(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=Qx(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&Er(s);if(a)return gu(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),f=i?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),u),d=Object.keys(It.elements[t]),g=()=>this.getContext(s,i,n),m=c.resolveNamedOptions(h,d,g,f);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(gu(m,l))),m}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(h,this.getContext(t,s,n))}const c=new $d(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||jo(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){jo(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!jo(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&Is(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}W(ii,"defaults",{}),W(ii,"datasetElementType",null),W(ii,"dataElementType",null);function tv(e,t,n){let s=1,i=1,r=0,o=0;if(t<Dt){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),h=Math.sin(l),d=(S,k,C)=>Cr(S,a,l,!0)?1:Math.max(k,k*n,C,C*n),g=(S,k,C)=>Cr(S,a,l,!0)?-1:Math.min(k,k*n,C,C*n),m=d(0,c,f),b=d(Nt,u,h),x=g($t,c,f),v=g($t+Nt,u,h);s=(m-x)/2,i=(b-v)/2,r=-(m+x)/2,o=-(b+v)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class as extends ii{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=l=>+s[l];if(ht(s[t])){const{key:l="value"}=this._parsing;r=c=>+xi(s[c],l)}let o,a;for(o=t,a=t+n;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return jn(this.options.rotation-90)}_getCircumference(){return jn(this.options.circumference)}_getRotationExtents(){let t=Dt,n=-Dt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),n=Math.max(n,r+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min($0(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:h,ratioY:d,offsetX:g,offsetY:m}=tv(f,u,l),b=(s.width-o)/h,x=(s.height-o)/d,v=Math.max(Math.min(b,x)/2,0),S=vd(this.options.radius,v),k=Math.max(S*l,0),C=(S-k)/this._getVisibleDatasetWeightTotal();this.offsetX=g*S,this.offsetY=m*S,i.total=this.calculateTotal(),this.outerRadius=S-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/Dt)}updateElements(t,n,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,h=r&&c.animateScale,d=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:m,includeOptions:b}=this._getSharedOptions(n,i);let x=this._getRotation(),v;for(v=0;v<n;++v)x+=this._circumference(v,r);for(v=n;v<n+s;++v){const S=this._circumference(v,r),k=t[v],C={x:u+this.offsetX,y:f+this.offsetY,startAngle:x,endAngle:x+S,circumference:S,outerRadius:g,innerRadius:d};b&&(C.options=m||this.resolveDataElementOptions(v,k.active?"active":i)),x+=S,this.updateElement(k,v,C,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,i;for(i=0;i<n.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Dt*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=rx(n._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const s=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(mt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}W(as,"id","doughnut"),W(as,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),W(as,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),W(as,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return n.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class xa extends as{}W(xa,"id","pie"),W(xa,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Nn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pl{constructor(t){W(this,"options");this.options=t||{}}static override(t){Object.assign(pl.prototype,t)}init(){}formats(){return Nn()}parse(){return Nn()}format(){return Nn()}add(){return Nn()}diff(){return Nn()}startOf(){return Nn()}endOf(){return Nn()}}var ev={_date:pl};function nv(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?G0:ba;if(s){if(i._sharedOptions){const u=r[0],f=typeof u.getRange=="function"&&u.getRange(t);if(f){const h=c(r,t,n-f),d=c(r,t,n+f);return{lo:h.lo,hi:d.hi}}}}else{const u=c(r,t,n);if(l){const{vScale:f}=i._cachedMeta,{_parsed:h}=e,d=h.slice(0,u.lo+1).reverse().findIndex(m=>!Ut(m[f.axis]));u.lo-=Math.max(0,d);const g=h.slice(u.hi).findIndex(m=>!Ut(m[f.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:r.length-1}}function ho(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:f,hi:h}=nv(r[a],t,o,i);for(let d=f;d<=h;++d){const g=u[d];g.skip||s(g,c,d)}}}function sv(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Vo(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||ho(e,n,t,function(a,l,c){!i&&!Cd(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function iv(e,t,n,s){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:f}=Sd(o,{x:t.x,y:t.y});Cr(f,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return ho(e,n,t,r),i}function rv(e,t,n,s,i,r){let o=[];const a=sv(n);let l=Number.POSITIVE_INFINITY;function c(u,f,h){const d=u.inRange(t.x,t.y,i);if(s&&!d)return;const g=u.getCenterPoint(i);if(!(!!r||e.isPointInArea(g))&&!d)return;const b=a(t,g);b<l?(o=[{element:u,datasetIndex:f,index:h}],l=b):b===l&&o.push({element:u,datasetIndex:f,index:h})}return ho(e,n,t,c),o}function Uo(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?iv(e,t,n,i):rv(e,t,n,s,i,r)}function mu(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ho(e,n,t,(l,c,u)=>{l[o]&&l[o](t[n],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var ov={modes:{index(e,t,n,s){const i=Bn(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Vo(e,i,r,s,o):Uo(e,i,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,n,s){const i=Bn(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Vo(e,i,r,s,o):Uo(e,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,n,s){const i=Bn(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Vo(e,i,r,s,o)},nearest(e,t,n,s){const i=Bn(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Uo(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=Bn(t,e);return mu(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=Bn(t,e);return mu(e,i,"y",n.intersect,s)}}};const Fd=["left","top","right","bottom"];function Ls(e,t){return e.filter(n=>n.pos===t)}function bu(e,t){return e.filter(n=>Fd.indexOf(n.pos)===-1&&n.box.axis===t)}function Ds(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function av(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function lv(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!Fd.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function cv(e,t){const n=lv(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=u?u*i:l&&t.availableHeight)}return n}function uv(e){const t=av(e),n=Ds(t.filter(c=>c.box.fullSize),!0),s=Ds(Ls(t,"left"),!0),i=Ds(Ls(t,"right")),r=Ds(Ls(t,"top"),!0),o=Ds(Ls(t,"bottom")),a=bu(t,"x"),l=bu(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Ls(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function _u(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function Bd(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function fv(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!ht(i)){n.size&&(e[i]-=n.size);const f=s[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?r.height:r.width),n.size=f.size/f.count,e[i]+=n.size}r.getPadding&&Bd(o,r.getPadding());const a=Math.max(0,t.outerWidth-_u(o,e,"left","right")),l=Math.max(0,t.outerHeight-_u(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function hv(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function dv(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function Vs(e,t,n,s){const i=[];let r,o,a,l,c,u;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,dv(a.horizontal,t));const{same:f,other:h}=fv(t,n,a,s);c|=f&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Vs(i,t,n,s)||u}function Ki(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function yu(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=t.w*u,h=c.size||l.height;Er(c.start)&&(o=c.start),l.fullSize?Ki(l,i.left,o,n.outerWidth-i.right-i.left,h):Ki(l,t.left+c.placed,o,f,h),c.start=o,c.placed+=f,o=l.bottom}else{const f=t.h*u,h=c.size||l.width;Er(c.start)&&(r=c.start),l.fullSize?Ki(l,r,i.top,h,n.outerHeight-i.bottom-i.top):Ki(l,r,t.top+c.placed,h,f),c.start=r,c.placed+=f,r=l.right}}t.x=r,t.y=o}var ke={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=Te(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=uv(e.boxes),l=a.vertical,c=a.horizontal;yt(e.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,b)=>b.box.options&&b.box.options.display===!1?m:m+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);Bd(h,Te(s));const d=Object.assign({maxPadding:h,w:r,h:o,x:i.left,y:i.top},i),g=cv(l.concat(c),f);Vs(a.fullSize,d,f,g),Vs(l,d,f,g),Vs(c,d,f,g)&&Vs(l,d,f,g),hv(d),yu(a.leftAndTop,d,f,g),d.x+=d.w,d.y+=d.h,yu(a.rightAndBottom,d,f,g),e.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},yt(a.chartArea,m=>{const b=m.box;Object.assign(b,e.chartArea),b.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class zd{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class pv extends zd{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const lr="$chartjs",gv={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xu=e=>e===null||e==="";function mv(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[lr]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",xu(i)){const r=cu(e,"width");r!==void 0&&(e.width=r)}if(xu(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=cu(e,"height");r!==void 0&&(e.height=r)}return e}const Hd=Dx?{passive:!0}:!1;function bv(e,t,n){e&&e.addEventListener(t,n,Hd)}function _v(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Hd)}function yv(e,t){const n=gv[e.type]||e.type,{x:s,y:i}=Bn(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Pr(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function xv(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Pr(a.addedNodes,s),o=o&&!Pr(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function vv(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Pr(a.removedNodes,s),o=o&&!Pr(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const wi=new Map;let vu=0;function jd(){const e=window.devicePixelRatio;e!==vu&&(vu=e,wi.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function wv(e,t){wi.size||window.addEventListener("resize",jd),wi.set(e,t)}function Sv(e){wi.delete(e),wi.size||window.removeEventListener("resize",jd)}function kv(e,t,n){const s=e.canvas,i=s&&dl(s);if(!i)return;const r=Ed((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),wv(e,r),o}function Wo(e,t,n){n&&n.disconnect(),t==="resize"&&Sv(e)}function Rv(e,t,n){const s=e.canvas,i=Ed(r=>{e.ctx!==null&&n(yv(r,e))},e);return bv(s,t,i),i}class Ev extends zd{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(mv(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[lr])return!1;const s=n[lr].initial;["height","width"].forEach(r=>{const o=s[r];Ut(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[lr],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:xv,detach:vv,resize:kv}[n]||Rv;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:Wo,detach:Wo,resize:Wo}[n]||_v)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return Lx(t,n,s,i)}isAttached(t){const n=t&&dl(t);return!!(n&&n.isConnected)}}function Av(e){return!hl()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?pv:Ev}var tr;let Es=(tr=class{constructor(){W(this,"x");W(this,"y");W(this,"active",!1);W(this,"options");W(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return Tr(this.x)&&Tr(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}},W(tr,"defaults",{}),W(tr,"defaultRoutes"),tr);function Tv(e,t){const n=e.options.ticks,s=Cv(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?Pv(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return Mv(t,c,r,o/i),c;const u=Ov(r,t,i);if(o>0){let f,h;const d=o>1?Math.round((l-a)/(o-1)):null;for(Gi(t,c,u,Ut(d)?0:a-d,a),f=0,h=o-1;f<h;f++)Gi(t,c,u,r[f],r[f+1]);return Gi(t,c,u,l,Ut(d)?t.length:l+d),c}return Gi(t,c,u),c}function Cv(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function Ov(e,t,n){const s=Iv(e),i=t.length/n;if(!s)return Math.max(i,1);const r=V0(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function Pv(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function Mv(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function Gi(e,t,n,s,i){const r=mt(s,0),o=Math.min(mt(i,e.length),e.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(r+a*n))}function Iv(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const Lv=e=>e==="left"?"right":e==="right"?"left":e,wu=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,Su=(e,t)=>Math.min(t||e,e);function ku(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function Dv(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(n&&(s===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function $v(e,t){yt(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function $s(e){return e.drawTicks?e.tickLength:0}function Ru(e,t){if(!e.display)return 0;const n=Yt(e.font,t),s=Te(e.padding);return(Bt(e.text)?e.text.length:1)*n.lineHeight+s.height}function Nv(e,t){return Rs(e,{scale:t,type:"scale"})}function Fv(e,t,n){return Rs(e,{tick:n,index:t,type:"tick"})}function Bv(e,t,n){let s=rl(e);return(n&&t!=="right"||!n&&t==="right")&&(s=Lv(s)),s}function zv(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let f=0,h,d,g;const m=o-i,b=a-r;if(e.isHorizontal()){if(d=qt(s,r,a),ht(n)){const x=Object.keys(n)[0],v=n[x];g=u[x].getPixelForValue(v)+m-t}else n==="center"?g=(c.bottom+c.top)/2+m-t:g=wu(e,n,t);h=a-r}else{if(ht(n)){const x=Object.keys(n)[0],v=n[x];d=u[x].getPixelForValue(v)-b+t}else n==="center"?d=(c.left+c.right)/2-b+t:d=wu(e,n,t);g=qt(s,o,i),f=n==="left"?-Nt:Nt}return{titleX:d,titleY:g,maxWidth:h,rotation:f}}class Li extends Es{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=He(t,Number.POSITIVE_INFINITY),n=He(n,Number.NEGATIVE_INFINITY),s=He(s,Number.POSITIVE_INFINITY),i=He(i,Number.NEGATIVE_INFINITY),{min:He(t,s),max:He(n,i),minDefined:hn(t),maxDefined:hn(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:He(n,He(s,n)),max:He(s,He(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){At(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=yx(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?ku(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Tv(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){At(this.options.afterUpdate,[this])}beforeSetDimensions(){At(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){At(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),At(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){At(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=At(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){At(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){At(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=Su(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),f=u.widest.width,h=u.highest.height,d=ye(this.chart.width-f,0,this.maxWidth);a=t.offset?this.maxWidth/s:d/(s-1),f+6>a&&(a=d/(s-(t.offset?.5:1)),l=this.maxHeight-$s(t.grid)-n.padding-Ru(t.title,this.chart.options.font),c=Math.sqrt(f*f+h*h),o=W0(Math.min(Math.asin(ye((u.highest.height+6)/a,-1,1)),Math.asin(ye(l/c,-1,1))-Math.asin(ye(h/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){At(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){At(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ru(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=$s(r)+l):(t.height=this.maxHeight,t.width=$s(r)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:h}=this._getLabelSizes(),d=s.padding*2,g=jn(this.labelRotation),m=Math.cos(g),b=Math.sin(g);if(a){const x=s.mirror?0:b*f.width+m*h.height;t.height=Math.min(this.maxHeight,t.height+x+d)}else{const x=s.mirror?0:m*f.width+b*h.height;t.width=Math.min(this.maxWidth,t.width+x+d)}this._calculatePadding(c,u,b,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,d=0;l?c?(h=i*t.width,d=s*n.height):(h=s*t.height,d=i*n.width):r==="start"?d=n.width:r==="end"?h=t.width:r!=="inner"&&(h=t.width/2,d=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((d-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=t.height/2;r==="start"?(u=0,f=t.height):r==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){At(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)Ut(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=ku(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/Su(n,s));let c=0,u=0,f,h,d,g,m,b,x,v,S,k,C;for(f=0;f<n;f+=l){if(g=t[f].label,m=this._resolveTickFontOptions(f),i.font=b=m.string,x=r[b]=r[b]||{data:{},gc:[]},v=m.lineHeight,S=k=0,!Ut(g)&&!Bt(g))S=su(i,x.data,x.gc,S,g),k=v;else if(Bt(g))for(h=0,d=g.length;h<d;++h)C=g[h],!Ut(C)&&!Bt(C)&&(S=su(i,x.data,x.gc,S,C),k+=v);o.push(S),a.push(k),c=Math.max(S,c),u=Math.max(k,u)}$v(r,n);const $=o.indexOf(c),P=a.indexOf(u),D=N=>({width:o[N]||0,height:a[N]||0});return{first:D(0),last:D(n-1),widest:D($),highest:D(P),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return K0(this._alignToPixels?$n(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=Fv(this.getContext(),t,s))}return this.$context||(this.$context=Nv(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=jn(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),h=$s(r),d=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,b=m/2,x=function(et){return $n(s,et,m)};let v,S,k,C,$,P,D,N,H,K,M,tt;if(o==="top")v=x(this.bottom),P=this.bottom-h,N=v-b,K=x(t.top)+b,tt=t.bottom;else if(o==="bottom")v=x(this.top),K=t.top,tt=x(t.bottom)-b,P=v+b,N=this.top+h;else if(o==="left")v=x(this.right),$=this.right-h,D=v-b,H=x(t.left)+b,M=t.right;else if(o==="right")v=x(this.left),H=t.left,M=x(t.right)-b,$=v+b,D=this.left+h;else if(n==="x"){if(o==="center")v=x((t.top+t.bottom)/2+.5);else if(ht(o)){const et=Object.keys(o)[0],Z=o[et];v=x(this.chart.scales[et].getPixelForValue(Z))}K=t.top,tt=t.bottom,P=v+b,N=P+h}else if(n==="y"){if(o==="center")v=x((t.left+t.right)/2);else if(ht(o)){const et=Object.keys(o)[0],Z=o[et];v=x(this.chart.scales[et].getPixelForValue(Z))}$=v-b,D=$-h,H=t.left,M=t.right}const ft=mt(i.ticks.maxTicksLimit,f),rt=Math.max(1,Math.ceil(f/ft));for(S=0;S<f;S+=rt){const et=this.getContext(S),Z=r.setContext(et),ot=a.setContext(et),kt=Z.lineWidth,Qt=Z.color,Jt=ot.dash||[],Mt=ot.dashOffset,xe=Z.tickWidth,ie=Z.tickColor,De=Z.tickBorderDash||[],Lt=Z.tickBorderDashOffset;k=Dv(this,S,l),k!==void 0&&(C=$n(s,k,kt),c?$=D=H=M=C:P=N=K=tt=C,d.push({tx1:$,ty1:P,tx2:D,ty2:N,x1:H,y1:K,x2:M,y2:tt,width:kt,color:Qt,borderDash:Jt,borderDashOffset:Mt,tickWidth:xe,tickColor:ie,tickBorderDash:De,tickBorderDashOffset:Lt}))}return this._ticksLength=f,this._borderValue=v,d}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=r,h=$s(s.grid),d=h+u,g=f?-u:d,m=-jn(this.labelRotation),b=[];let x,v,S,k,C,$,P,D,N,H,K,M,tt="middle";if(i==="top")$=this.bottom-g,P=this._getXAxisLabelAlignment();else if(i==="bottom")$=this.top+g,P=this._getXAxisLabelAlignment();else if(i==="left"){const rt=this._getYAxisLabelAlignment(h);P=rt.textAlign,C=rt.x}else if(i==="right"){const rt=this._getYAxisLabelAlignment(h);P=rt.textAlign,C=rt.x}else if(n==="x"){if(i==="center")$=(t.top+t.bottom)/2+d;else if(ht(i)){const rt=Object.keys(i)[0],et=i[rt];$=this.chart.scales[rt].getPixelForValue(et)+d}P=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")C=(t.left+t.right)/2-d;else if(ht(i)){const rt=Object.keys(i)[0],et=i[rt];C=this.chart.scales[rt].getPixelForValue(et)}P=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?tt="top":l==="end"&&(tt="bottom"));const ft=this._getLabelSizes();for(x=0,v=a.length;x<v;++x){S=a[x],k=S.label;const rt=r.setContext(this.getContext(x));D=this.getPixelForTick(x)+r.labelOffset,N=this._resolveTickFontOptions(x),H=N.lineHeight,K=Bt(k)?k.length:1;const et=K/2,Z=rt.color,ot=rt.textStrokeColor,kt=rt.textStrokeWidth;let Qt=P;o?(C=D,P==="inner"&&(x===v-1?Qt=this.options.reverse?"left":"right":x===0?Qt=this.options.reverse?"right":"left":Qt="center"),i==="top"?c==="near"||m!==0?M=-K*H+H/2:c==="center"?M=-ft.highest.height/2-et*H+H:M=-ft.highest.height+H/2:c==="near"||m!==0?M=H/2:c==="center"?M=ft.highest.height/2-et*H:M=ft.highest.height-K*H,f&&(M*=-1),m!==0&&!rt.showLabelBackdrop&&(C+=H/2*Math.sin(m))):($=D,M=(1-K)*H/2);let Jt;if(rt.showLabelBackdrop){const Mt=Te(rt.backdropPadding),xe=ft.heights[x],ie=ft.widths[x];let De=M-Mt.top,Lt=0-Mt.left;switch(tt){case"middle":De-=xe/2;break;case"bottom":De-=xe;break}switch(P){case"center":Lt-=ie/2;break;case"right":Lt-=ie;break;case"inner":x===v-1?Lt-=ie:x>0&&(Lt-=ie/2);break}Jt={left:Lt,top:De,width:ie+Mt.width,height:xe+Mt.height,color:rt.backdropColor}}b.push({label:k,font:N,textOffset:M,options:{rotation:m,color:Z,strokeColor:ot,strokeWidth:kt,textAlign:Qt,textBaseline:tt,translation:[C,$],backdrop:Jt}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-jn(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+r,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+r,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,h;this.isHorizontal()?(c=$n(t,this.left,o)-o/2,u=$n(t,this.right,a)+a/2,f=h=l):(f=$n(t,this.top,o)-o/2,h=$n(t,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&ol(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;vi(s,c,0,u,l,a)}i&&al(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=Yt(s.font),o=Te(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||ht(n)?(l+=o.bottom,Bt(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:h}=zv(this,l,n,a);vi(t,s.text,0,0,r,{color:s.color,maxWidth:f,rotation:h,textAlign:Bv(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=mt(t.grid&&t.grid.z,-1),i=mt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Li.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Yt(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Yi{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;Vv(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,Hv(t,o,s),this.override&&It.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in It[i]&&(delete It[i][s],this.override&&delete Gn[s])}}function Hv(e,t,n){const s=yi(Object.create(null),[n?It.get(n):{},It.get(t),e.defaults]);It.set(t,s),e.defaultRoutes&&jv(t,e.defaultRoutes),e.descriptors&&It.describe(t,e.descriptors)}function jv(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");It.route(r,i,l,a)})}function Vv(e){return"id"in e&&"defaults"in e}class Uv{constructor(){this.controllers=new Yi(ii,"datasets",!0),this.elements=new Yi(Es,"elements"),this.plugins=new Yi(Object,"plugins"),this.scales=new Yi(Li,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):yt(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=sl(t);At(s["before"+i],[],s),n[t](s),At(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var We=new Uv;class Wv{constructor(){this._init=[]}notify(t,n,s,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[n,i,r.options];if(At(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Ut(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=mt(s.options&&s.options.plugins,{}),r=qv(s);return i===!1&&!n?[]:Gv(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function qv(e){const t={},n=[],s=Object.keys(We.plugins.items);for(let r=0;r<s.length;r++)n.push(We.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function Kv(e,t){return!t&&e===!1?null:e===!0?{}:e}function Gv(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=Kv(s[l],i);c!==null&&r.push({plugin:a,options:Yv(e.config,{plugin:a,local:n[l]},c,o)})}return r}function Yv(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function va(e,t){const n=It.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Xv(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function Qv(e,t){return e===t?"_index_":"_value_"}function Eu(e){if(e==="x"||e==="y"||e==="r")return e}function Jv(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function wa(e,...t){if(Eu(e))return e;for(const n of t){const s=n.axis||Jv(n.position)||e.length>1&&Eu(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Au(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Zv(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return Au(e,"x",n[0])||Au(e,"y",n[0])}return{}}function tw(e,t){const n=Gn[e.type]||{scales:{}},s=t.scales||{},i=va(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!ht(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=wa(o,a,Zv(o,e),It.scales[a.type]),c=Qv(l,i),u=n.scales||{};r[o]=ti(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||va(a,t),u=(Gn[a]||{}).scales||{};Object.keys(u).forEach(f=>{const h=Xv(f,l),d=o[h+"AxisID"]||h;r[d]=r[d]||Object.create(null),ti(r[d],[{axis:h},s[d],u[f]])})}),Object.keys(r).forEach(o=>{const a=r[o];ti(a,[It.scales[a.type],It.scale])}),r}function Vd(e){const t=e.options||(e.options={});t.plugins=mt(t.plugins,{}),t.scales=tw(e,t)}function Ud(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function ew(e){return e=e||{},e.data=Ud(e.data),Vd(e),e}const Tu=new Map,Wd=new Set;function Xi(e,t){let n=Tu.get(e);return n||(n=t(),Tu.set(e,n),Wd.add(n)),n}const Ns=(e,t,n)=>{const s=xi(t,n);s!==void 0&&e.add(s)};class nw{constructor(t){this._config=ew(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ud(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Vd(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Xi(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Xi(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Xi(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Xi(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{t&&(l.add(t),u.forEach(f=>Ns(l,t,f))),u.forEach(f=>Ns(l,i,f)),u.forEach(f=>Ns(l,Gn[r]||{},f)),u.forEach(f=>Ns(l,It,f)),u.forEach(f=>Ns(l,_a,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Wd.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,Gn[n]||{},It.datasets[n]||{},{type:n},It,_a]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Cu(this._resolverCache,t,i);let l=o;if(iw(o,n)){r.$shared=!1,s=Cn(s)?s():s;const c=this.createResolver(t,s,a);l=_s(o,s,c)}for(const c of n)r[c]=l[c];return r}createResolver(t,n,s=[""],i){const{resolver:r}=Cu(this._resolverCache,t,s);return ht(n)?_s(r,n,void 0,i):r}}function Cu(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:cl(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const sw=e=>ht(e)&&Object.getOwnPropertyNames(e).some(t=>Cn(e[t]));function iw(e,t){const{isScriptable:n,isIndexable:s}=Od(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(Cn(a)||sw(a))||o&&Bt(a))return!0}return!1}var rw="4.4.9";const ow=["top","bottom","left","right","chartArea"];function Ou(e,t){return e==="top"||e==="bottom"||ow.indexOf(e)===-1&&t==="x"}function Pu(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function Mu(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),At(n&&n.onComplete,[e],t)}function aw(e){const t=e.chart,n=t.options.animation;At(n&&n.onProgress,[e],t)}function qd(e){return hl()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const cr={},Iu=e=>{const t=qd(e);return Object.values(cr).filter(n=>n.canvas===t).pop()};function lw(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function cw(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var mn;let po=(mn=class{static register(...t){We.add(...t),Lu()}static unregister(...t){We.remove(...t),Lu()}constructor(t,n){const s=this.config=new nw(n),i=qd(t),r=Iu(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Av(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=D0(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Wv,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=J0(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],cr[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}tn.listen(this,"complete",Mu),tn.listen(this,"progress",aw),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return Ut(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return We}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():lu(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return iu(this.canvas,this.ctx),this}stop(){return tn.stop(this),this}resize(t,n){tn.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,lu(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),At(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};yt(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=wa(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),yt(r,o=>{const a=o.options,l=a.id,c=wa(l,a),u=mt(a.type,o.dtype);(a.position===void 0||Ou(a.position,c)!==Ou(o.dposition))&&(a.position=o.dposition),i[l]=!0;let f=null;if(l in s&&s[l].type===u)f=s[l];else{const h=We.getScale(u);f=new h({id:l,type:u,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(a,t)}),yt(i,(o,a)=>{o||delete s[a]}),yt(s,o=>{ke.configure(this,o,o.options),ke.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(Pu("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||va(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=We.getController(a),{datasetElementType:c,dataElementType:u}=It.datasets[a];Object.assign(l,{dataElementType:We.getElement(u),datasetElementType:c&&We.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){yt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),h=!i&&r.indexOf(f)===-1;f.buildOrUpdateElements(h),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||yt(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Pu("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){yt(this.scales,t=>{ke.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Yc(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;lw(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!Yc(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ke.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],yt(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Cn(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(tn.has(this)?this.attached&&!tn.running(this)&&tn.start(this):(this.draw(),Mu({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=Bx(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&ol(n,i),t.controller.draw(),i&&al(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Cd(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=ov.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Rs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);Er(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),tn.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),iu(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete cr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};yt(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){yt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},yt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!kr(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),l=H0(t),c=cw(t,this._lastEvent,s,l);s&&(this._lastEvent=null,At(r.onHover,[t,a,this],this),l&&At(r.onClick,[t,a,this],this));const u=!kr(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}},W(mn,"defaults",It),W(mn,"instances",cr),W(mn,"overrides",Gn),W(mn,"registry",We),W(mn,"version",rw),W(mn,"getChart",Iu),mn);function Lu(){return yt(po.instances,e=>e._plugins.invalidate())}function uw(e,t,n){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(r,o,a,s-c,n+c),l>i?(c=i/l,e.arc(r,o,l,n+c,s-c,!0)):e.arc(r,o,i,n+Nt,s-Nt),e.closePath(),e.clip()}function fw(e){return ll(e,["outerStart","outerEnd","innerStart","innerEnd"])}function hw(e,t,n,s){const i=fw(e.options.borderRadius),r=(n-t)/2,o=Math.min(r,s*t/2),a=l=>{const c=(n-Math.min(r,l))*s/2;return ye(l,0,Math.min(r,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:ye(i.innerStart,0,o),innerEnd:ye(i.innerEnd,0,o)}}function ss(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function Mr(e,t,n,s,i,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,f=Math.max(t.outerRadius+s+n-c,0),h=u>0?u+s+n+c:0;let d=0;const g=i-l;if(s){const rt=u>0?u-s:0,et=f>0?f-s:0,Z=(rt+et)/2,ot=Z!==0?g*Z/(Z+s):g;d=(g-ot)/2}const m=Math.max(.001,g*f-n/$t)/f,b=(g-m)/2,x=l+b+d,v=i-b-d,{outerStart:S,outerEnd:k,innerStart:C,innerEnd:$}=hw(t,h,f,v-x),P=f-S,D=f-k,N=x+S/P,H=v-k/D,K=h+C,M=h+$,tt=x+C/K,ft=v-$/M;if(e.beginPath(),r){const rt=(N+H)/2;if(e.arc(o,a,f,N,rt),e.arc(o,a,f,rt,H),k>0){const kt=ss(D,H,o,a);e.arc(kt.x,kt.y,k,H,v+Nt)}const et=ss(M,v,o,a);if(e.lineTo(et.x,et.y),$>0){const kt=ss(M,ft,o,a);e.arc(kt.x,kt.y,$,v+Nt,ft+Math.PI)}const Z=(v-$/h+(x+C/h))/2;if(e.arc(o,a,h,v-$/h,Z,!0),e.arc(o,a,h,Z,x+C/h,!0),C>0){const kt=ss(K,tt,o,a);e.arc(kt.x,kt.y,C,tt+Math.PI,x-Nt)}const ot=ss(P,x,o,a);if(e.lineTo(ot.x,ot.y),S>0){const kt=ss(P,N,o,a);e.arc(kt.x,kt.y,S,x-Nt,N)}}else{e.moveTo(o,a);const rt=Math.cos(N)*f+o,et=Math.sin(N)*f+a;e.lineTo(rt,et);const Z=Math.cos(H)*f+o,ot=Math.sin(H)*f+a;e.lineTo(Z,ot)}e.closePath()}function dw(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){Mr(e,t,n,s,l,i);for(let c=0;c<r;++c)e.fill();isNaN(a)||(l=o+(a%Dt||Dt))}return Mr(e,t,n,s,l,i),e.fill(),l}function pw(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:f,borderDashOffset:h}=l,d=l.borderAlign==="inner";if(!c)return;e.setLineDash(f||[]),e.lineDashOffset=h,d?(e.lineWidth=c*2,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let g=t.endAngle;if(r){Mr(e,t,n,s,g,i);for(let m=0;m<r;++m)e.stroke();isNaN(a)||(g=o+(a%Dt||Dt))}d&&uw(e,t,g),r||(Mr(e,t,n,s,g,i),e.stroke())}class Us extends Es{constructor(n){super();W(this,"circumference");W(this,"endAngle");W(this,"fullCircles");W(this,"innerRadius");W(this,"outerRadius");W(this,"pixelMargin");W(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.getProps(["x","y"],i),{angle:o,distance:a}=Sd(r,{x:n,y:s}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:f,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,g=mt(h,c-l),m=Cr(o,l,c)&&l!==c,b=g>=Dt||m,x=js(a,u+d,f+d);return b&&x}getCenterPoint(n){const{x:s,y:i,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,f=(r+o)/2,h=(a+l+u+c)/2;return{x:s+Math.cos(f)*h,y:i+Math.sin(f)*h}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:i}=this,r=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=i>Dt?Math.floor(i/Dt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min($t,i||0)),u=r*c;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,dw(n,this,u,o,a),pw(n,this,u,o,a),n.restore()}}W(Us,"id","arc"),W(Us,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),W(Us,"defaultRoutes",{backgroundColor:"backgroundColor"}),W(Us,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});const Du=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},gw=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class $u extends Es{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=At(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=Yt(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Du(s,r);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let f=t;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-u;return this.legendItems.forEach((g,m)=>{const b=s+n/2+r.measureText(g.text).width;(m===0||c[c.length-1]+b+2*a>o)&&(f+=u,c[c.length-(m>0?0:1)]=0,d+=u,h++),l[m]={left:0,top:d,row:h,width:b,height:i},c[c.length-1]+=b+a}),f}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let f=a,h=0,d=0,g=0,m=0;return this.legendItems.forEach((b,x)=>{const{itemWidth:v,itemHeight:S}=mw(s,n,r,b,i);x>0&&d+S+2*a>u&&(f+=h+a,c.push({width:h,height:d}),g+=h+a,m++,h=d=0),l[x]={left:g,top:d,col:m,width:v,height:S},h=Math.max(h,v),d+=S+a}),f+=h,c.push({width:h,height:d}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=ds(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=qt(s,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=qt(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=qt(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=qt(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;ol(t,this),this._draw(),al(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=It.color,l=ds(t.rtl,this.left,this.width),c=Yt(o.font),{padding:u}=o,f=c.size,h=f/2;let d;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:b}=Du(o,f),x=function($,P,D){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;i.save();const N=mt(D.lineWidth,1);if(i.fillStyle=mt(D.fillStyle,a),i.lineCap=mt(D.lineCap,"butt"),i.lineDashOffset=mt(D.lineDashOffset,0),i.lineJoin=mt(D.lineJoin,"miter"),i.lineWidth=N,i.strokeStyle=mt(D.strokeStyle,a),i.setLineDash(mt(D.lineDash,[])),o.usePointStyle){const H={radius:m*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:N},K=l.xPlus($,g/2),M=P+h;Td(i,H,K,M,o.pointStyleWidth&&g)}else{const H=P+Math.max((f-m)/2,0),K=l.leftForLtr($,g),M=si(D.borderRadius);i.beginPath(),Object.values(M).some(tt=>tt!==0)?ya(i,{x:K,y:H,w:g,h:m,radius:M}):i.rect(K,H,g,m),i.fill(),N!==0&&i.stroke()}i.restore()},v=function($,P,D){vi(i,D.text,$,P+b/2,c,{strikethrough:D.hidden,textAlign:l.textAlign(D.textAlign)})},S=this.isHorizontal(),k=this._computeTitleHeight();S?d={x:qt(r,this.left+u,this.right-s[0]),y:this.top+u+k,line:0}:d={x:this.left+u,y:qt(r,this.top+k+u,this.bottom-n[0].height),line:0},Ld(this.ctx,t.textDirection);const C=b+u;this.legendItems.forEach(($,P)=>{i.strokeStyle=$.fontColor,i.fillStyle=$.fontColor;const D=i.measureText($.text).width,N=l.textAlign($.textAlign||($.textAlign=o.textAlign)),H=g+h+D;let K=d.x,M=d.y;l.setWidth(this.width),S?P>0&&K+H+u>this.right&&(M=d.y+=C,d.line++,K=d.x=qt(r,this.left+u,this.right-s[d.line])):P>0&&M+C>this.bottom&&(K=d.x=K+n[d.line].width+u,d.line++,M=d.y=qt(r,this.top+k+u,this.bottom-n[d.line].height));const tt=l.x(K);if(x(tt,M,$),K=Z0(N,K+g+h,S?K+H:this.right,t.rtl),v(l.x(K),M,$),S)d.x+=H+u;else if(typeof $.text!="string"){const ft=c.lineHeight;d.y+=Kd($,ft)+u}else d.y+=C}),Dd(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Yt(n.font),i=Te(n.padding);if(!n.display)return;const r=ds(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=i.top+l;let u,f=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,f=qt(t.align,f,this.right-h);else{const g=this.columnSizes.reduce((m,b)=>Math.max(m,b.height),0);u=c+qt(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const d=qt(a,f,f+h);o.textAlign=r.textAlign(rl(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,vi(o,n.text,d,u,s)}_computeTitleHeight(){const t=this.options.title,n=Yt(t.font),s=Te(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(js(t,this.left,this.right)&&js(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],js(t,i.left,i.left+i.width)&&js(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!yw(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=gw(i,s);i&&!r&&At(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&At(n.onHover,[t,s,this],this)}else s&&At(n.onClick,[t,s,this],this)}}function mw(e,t,n,s,i){const r=bw(s,e,t,n),o=_w(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function bw(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function _w(e,t,n){let s=e;return typeof t.text!="string"&&(s=Kd(t,n)),s}function Kd(e,t){const n=e.text?e.text.length:0;return t*n}function yw(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var xw={id:"legend",_element:$u,start(e,t,n){const s=e.legend=new $u({ctx:e.ctx,options:n,chart:e});ke.configure(e,s,n),ke.addBox(e,s)},stop(e){ke.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;ke.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Te(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Gd extends Es{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=Bt(s.text)?s.text.length:1;this._padding=Te(s.padding);const r=i*Yt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=qt(a,s,r),f=n+t,c=r-s):(o.position==="left"?(u=s+t,f=qt(a,i,n),l=$t*-.5):(u=r-t,f=qt(a,n,i),l=$t*.5),c=i-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Yt(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);vi(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:rl(n.align),textBaseline:"middle",translation:[o,a]})}}function vw(e,t){const n=new Gd({ctx:e.ctx,options:t,chart:e});ke.configure(e,n,t),ke.addBox(e,n),e.titleBlock=n}var ww={id:"title",_element:Gd,start(e,t,n){vw(e,n)},stop(e){const t=e.titleBlock;ke.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;ke.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ws={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=q0(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function je(e,t){return t&&(Bt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function en(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Sw(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function Nu(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Yt(t.bodyFont),c=Yt(t.titleFont),u=Yt(t.footerFont),f=r.length,h=i.length,d=s.length,g=Te(t.padding);let m=g.height,b=0,x=s.reduce((k,C)=>k+C.before.length+C.lines.length+C.after.length,0);if(x+=e.beforeBody.length+e.afterBody.length,f&&(m+=f*c.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),x){const k=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=d*k+(x-d)*l.lineHeight+(x-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let v=0;const S=function(k){b=Math.max(b,n.measureText(k).width+v)};return n.save(),n.font=c.string,yt(e.title,S),n.font=l.string,yt(e.beforeBody.concat(e.afterBody),S),v=t.displayColors?o+2+t.boxPadding:0,yt(s,k=>{yt(k.before,S),yt(k.lines,S),yt(k.after,S)}),v=0,n.font=u.string,yt(e.footer,S),n.restore(),b+=g.width,{width:b,height:m}}function kw(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function Rw(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function Ew(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),Rw(c,e,t,n)&&(c="center"),c}function Fu(e,t,n){const s=n.yAlign||t.yAlign||kw(e,n);return{xAlign:n.xAlign||t.xAlign||Ew(e,t,n,s),yAlign:s}}function Aw(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function Tw(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function Bu(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+r,{topLeft:u,topRight:f,bottomLeft:h,bottomRight:d}=si(o);let g=Aw(t,a);const m=Tw(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+i:a==="right"&&(g+=Math.max(f,d)+i),{x:ye(g,0,s.width-t.width),y:ye(m,0,s.height-t.height)}}function Qi(e,t,n){const s=Te(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function zu(e){return je([],en(e))}function Cw(e,t,n){return Rs(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function Hu(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Yd={beforeTitle:Je,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:Je,beforeBody:Je,beforeLabel:Je,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Ut(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Je,afterBody:Je,beforeFooter:Je,footer:Je,afterFooter:Je};function oe(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?Yd[t].call(n,s):i}class Sa extends Es{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new $d(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Cw(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=oe(s,"beforeTitle",this,t),r=oe(s,"title",this,t),o=oe(s,"afterTitle",this,t);let a=[];return a=je(a,en(i)),a=je(a,en(r)),a=je(a,en(o)),a}getBeforeBody(t,n){return zu(oe(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return yt(t,r=>{const o={before:[],lines:[],after:[]},a=Hu(s,r);je(o.before,en(oe(a,"beforeLabel",this,r))),je(o.lines,oe(a,"label",this,r)),je(o.after,en(oe(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return zu(oe(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=oe(s,"beforeFooter",this,t),r=oe(s,"footer",this,t),o=oe(s,"afterFooter",this,t);let a=[];return a=je(a,en(i)),a=je(a,en(r)),a=je(a,en(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Sw(this.chart,n[l]));return t.filter&&(a=a.filter((u,f,h)=>t.filter(u,f,h,s))),t.itemSort&&(a=a.sort((u,f)=>t.itemSort(u,f,s))),yt(a,u=>{const f=Hu(t.callbacks,u);i.push(oe(f,"labelColor",this,u)),r.push(oe(f,"labelPointStyle",this,u)),o.push(oe(f,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Ws[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=Nu(this,s),c=Object.assign({},a,l),u=Fu(this.chart,s,c),f=Bu(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=si(a),{x:h,y:d}=t,{width:g,height:m}=n;let b,x,v,S,k,C;return r==="center"?(k=d+m/2,i==="left"?(b=h,x=b-o,S=k+o,C=k-o):(b=h+g,x=b+o,S=k-o,C=k+o),v=b):(i==="left"?x=h+Math.max(l,u)+o:i==="right"?x=h+g-Math.max(c,f)-o:x=this.caretX,r==="top"?(S=d,k=S-o,b=x-o,v=x+o):(S=d+m,k=S+o,b=x+o,v=x-o),C=S),{x1:b,x2:x,x3:v,y1:S,y2:k,y3:C}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const c=ds(s.rtl,this.x,this.width);for(t.x=Qi(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=Yt(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,u=Yt(r.bodyFont),f=Qi(this,"left",r),h=i.x(f),d=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+d;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(h,c)+c/2,x=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,ru(t,m,b,x),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,ru(t,m,b,x)}else{t.lineWidth=ht(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const m=i.leftForLtr(h,c),b=i.leftForLtr(i.xPlus(h,1),c-2),x=si(o.borderRadius);Object.values(x).some(v=>v!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,ya(t,{x:m,y:g,w:c,h:l,radius:x}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),ya(t,{x:b,y:g+1,w:c-2,h:l-2,radius:x}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,c,l),t.strokeRect(m,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(b,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,f=Yt(s.bodyFont);let h=f.lineHeight,d=0;const g=ds(s.rtl,this.x,this.width),m=function(D){n.fillText(D,g.x(t.x+d),t.y+h/2),t.y+=h+r},b=g.textAlign(o);let x,v,S,k,C,$,P;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,t.x=Qi(this,b,s),n.fillStyle=s.bodyColor,yt(this.beforeBody,m),d=a&&b!=="right"?o==="center"?c/2+u:c+2+u:0,k=0,$=i.length;k<$;++k){for(x=i[k],v=this.labelTextColors[k],n.fillStyle=v,yt(x.before,m),S=x.lines,a&&S.length&&(this._drawColorBox(n,t,k,g,s),h=Math.max(f.lineHeight,l)),C=0,P=S.length;C<P;++C)m(S[C]),h=f.lineHeight;yt(x.after,m)}d=0,h=f.lineHeight,yt(this.afterBody,m),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=ds(s.rtl,this.x,this.width);for(t.x=Qi(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=Yt(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=s,{topLeft:f,topRight:h,bottomLeft:d,bottomRight:g}=si(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+d,l+u),n.quadraticCurveTo(a,l+u,a,l+u-d),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Ws[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Nu(this,t),l=Object.assign({},o,this._size),c=Fu(n,t,l),u=Bu(t,l,c,n);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Te(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),Ld(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),Dd(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!kr(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),l=n||!kr(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=Ws[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}W(Sa,"positioners",Ws);var Ow={id:"tooltip",_element:Sa,positioners:Ws,afterInit(e,t,n){n&&(e.tooltip=new Sa({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Yd},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Pw=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function Mw(e,t,n,s){const i=e.indexOf(t);if(i===-1)return Pw(e,t,n,s);const r=e.lastIndexOf(t);return i!==r?n:i}const Iw=(e,t)=>e===null?null:ye(Math.round(e),0,t);function ju(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ka extends Li{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:r}of n)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Ut(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:Mw(s,t,mt(n,t),this._addedLabels),Iw(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)i.push({value:o});return i}getLabelForValue(t){return ju.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}W(ka,"id","category"),W(ka,"defaults",{ticks:{callback:ju}});const go={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ce=Object.keys(go);function Vu(e,t){return e-t}function Uu(e,t){if(Ut(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),hn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Tr(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function Wu(e,t,n,s){const i=ce.length;for(let r=ce.indexOf(e);r<i-1;++r){const o=go[ce[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return ce[r]}return ce[i-1]}function Lw(e,t,n,s,i){for(let r=ce.length-1;r>=ce.indexOf(n);r--){const o=ce[r];if(go[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return ce[n?ce.indexOf(n):0]}function Dw(e){for(let t=ce.indexOf(e)+1,n=ce.length;t<n;++t)if(go[ce[t]].common)return ce[t]}function qu(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=il(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function $w(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function Ku(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:$w(e,s,i,n)}class Ir extends Li{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new ev._date(t.adapters.date);i.init(n),ti(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Uu(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=hn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=hn(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=Y0(i,r,o);return this._unit=n.unit||(s.autoSkip?Wu(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):Lw(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Dw(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),Ku(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=ye(n,0,o),s=ye(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||Wu(r.minUnit,n,s,this._getLabelCapacity(n)),a=mt(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Tr(l)||l===!0,u={};let f=n,h,d;if(c&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,c?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(h=f,d=0;h<s;h=+t.add(h,a,o),d++)qu(u,h,g);return(h===s||i.bounds==="ticks"||d===1)&&qu(u,h,g),Object.keys(u).sort(Vu).map(m=>+m)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return At(o,[t,n,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],h=s[n],d=c&&f&&h&&h.major;return this._adapter.format(t,i||(d?f:u))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=jn(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,Ku(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(Uu(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Q0(t.sort(Vu))}}W(Ir,"id","time"),W(Ir,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ji(e,t,n){let s=0,i=e.length-1,r,o,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=ba(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=ba(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class Gu extends Ir{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Ji(n,this.min),this._tableRange=Ji(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=s&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Ji(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Ji(this._table,s*this._tableRange+this._minPos,!0)}}W(Gu,"id","timeseries"),W(Gu,"defaults",Ir.defaults);const Xd={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},Nw={ariaLabel:{type:String},ariaDescribedby:{type:String}},Fw={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...Xd,...Nw},Bw=hh[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function is(e){return Ai(e)?ct(e):e}function zw(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return Ai(t)?new Proxy(e,{}):e}function Hw(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function Qd(e,t){e.labels=t}function Jd(e,t,n){const s=[];e.datasets=t.map(i=>{const r=e.datasets.find(o=>o[n]===i[n]);return!r||!i.data||s.includes(r)?{...i}:(s.push(r),Object.assign(r,i),r)})}function jw(e,t){const n={labels:[],datasets:[]};return Qd(n,e.labels),Jd(n,e.datasets,t),n}const Vw=qr({props:Fw,setup(e,t){let{expose:n,slots:s}=t;const i=vt(null),r=Ba(null);n({chart:r});const o=()=>{if(!i.value)return;const{type:c,data:u,options:f,plugins:h,datasetIdKey:d}=e,g=jw(u,d),m=zw(g,u);r.value=new po(i.value,{type:c,data:m,options:{...f},plugins:h})},a=()=>{const c=ct(r.value);c&&(e.destroyDelay>0?setTimeout(()=>{c.destroy(),r.value=null},e.destroyDelay):(c.destroy(),r.value=null))},l=c=>{c.update(e.updateMode)};return xs(o),Ha(a),Rn([()=>e.options,()=>e.data],(c,u)=>{let[f,h]=c,[d,g]=u;const m=ct(r.value);if(!m)return;let b=!1;if(f){const x=is(f),v=is(d);x&&x!==v&&(Hw(m,x),b=!0)}if(h){const x=is(h.labels),v=is(g.labels),S=is(h.datasets),k=is(g.datasets);x!==v&&(Qd(m.config.data,x),b=!0),S&&S!==k&&(Jd(m.config.data,S,e.datasetIdKey),b=!0)}b&&Wr(()=>{l(m)})},{deep:!0}),()=>ps("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:i},[ps("p",{},[s.default?s.default():""])])}});function Zd(e,t){return po.register(t),qr({props:Xd,setup(n,s){let{expose:i}=s;const r=Ba(null),o=a=>{r.value=a==null?void 0:a.chart};return i({chart:r}),()=>ps(Vw,Bw({ref:o},{type:e,...n}))}})}const Uw=Zd("doughnut",as),Ww=Zd("pie",xa),qw={name:"LoadingTip",props:{tip:{type:Object,required:!0,default:()=>({category:"心理小贴士",title:"每日提示",content:"保持积极的心态有助于应对挑战。"})}}},Kw={class:"loading-tip"},Gw={class:"tip-header"},Yw={class:"tip-title-group"},Xw={class:"tip-category"},Qw={class:"tip-title"},Jw={class:"tip-content"};function Zw(e,t,n,s,i,r){return L(),B("div",Kw,[p("div",Gw,[t[0]||(t[0]=p("i",{class:"fas fa-lightbulb tip-icon"},null,-1)),p("div",Yw,[p("div",Xw,G(n.tip.category),1),p("div",Qw,G(n.tip.title),1)])]),p("div",Jw,G(n.tip.content),1)])}const Si=Wt(qw,[["render",Zw],["__scopeId","data-v-916747f7"]]);function gl(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Jn=gl();function tp(e){Jn=e}var ri={exec:()=>null};function bt(e,t=""){let n=typeof e=="string"?e:e.source;const s={replace:(i,r)=>{let o=typeof r=="string"?r:r.source;return o=o.replace(se.caret,"$1"),n=n.replace(i,o),s},getRegex:()=>new RegExp(n,t)};return s}var se={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},t1=/^(?:[ \t]*(?:\n|$))+/,e1=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,n1=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Di=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,s1=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ml=/(?:[*+-]|\d{1,9}[.)])/,ep=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,np=bt(ep).replace(/bull/g,ml).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),i1=bt(ep).replace(/bull/g,ml).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),bl=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,r1=/^[^\n]+/,_l=/(?!\s*\])(?:\\.|[^\[\]\\])+/,o1=bt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",_l).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),a1=bt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ml).getRegex(),mo="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",yl=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,l1=bt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",yl).replace("tag",mo).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),sp=bt(bl).replace("hr",Di).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mo).getRegex(),c1=bt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",sp).getRegex(),xl={blockquote:c1,code:e1,def:o1,fences:n1,heading:s1,hr:Di,html:l1,lheading:np,list:a1,newline:t1,paragraph:sp,table:ri,text:r1},Yu=bt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Di).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mo).getRegex(),u1={...xl,lheading:i1,table:Yu,paragraph:bt(bl).replace("hr",Di).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Yu).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mo).getRegex()},f1={...xl,html:bt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",yl).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ri,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:bt(bl).replace("hr",Di).replace("heading",` *#{1,6} *[^
]`).replace("lheading",np).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},h1=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,d1=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ip=/^( {2,}|\\)\n(?!\s*$)/,p1=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,bo=/[\p{P}\p{S}]/u,vl=/[\s\p{P}\p{S}]/u,rp=/[^\s\p{P}\p{S}]/u,g1=bt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,vl).getRegex(),op=/(?!~)[\p{P}\p{S}]/u,m1=/(?!~)[\s\p{P}\p{S}]/u,b1=/(?:[^\s\p{P}\p{S}]|~)/u,_1=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,ap=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,y1=bt(ap,"u").replace(/punct/g,bo).getRegex(),x1=bt(ap,"u").replace(/punct/g,op).getRegex(),lp="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",v1=bt(lp,"gu").replace(/notPunctSpace/g,rp).replace(/punctSpace/g,vl).replace(/punct/g,bo).getRegex(),w1=bt(lp,"gu").replace(/notPunctSpace/g,b1).replace(/punctSpace/g,m1).replace(/punct/g,op).getRegex(),S1=bt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,rp).replace(/punctSpace/g,vl).replace(/punct/g,bo).getRegex(),k1=bt(/\\(punct)/,"gu").replace(/punct/g,bo).getRegex(),R1=bt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),E1=bt(yl).replace("(?:-->|$)","-->").getRegex(),A1=bt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",E1).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Lr=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,T1=bt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Lr).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),cp=bt(/^!?\[(label)\]\[(ref)\]/).replace("label",Lr).replace("ref",_l).getRegex(),up=bt(/^!?\[(ref)\](?:\[\])?/).replace("ref",_l).getRegex(),C1=bt("reflink|nolink(?!\\()","g").replace("reflink",cp).replace("nolink",up).getRegex(),wl={_backpedal:ri,anyPunctuation:k1,autolink:R1,blockSkip:_1,br:ip,code:d1,del:ri,emStrongLDelim:y1,emStrongRDelimAst:v1,emStrongRDelimUnd:S1,escape:h1,link:T1,nolink:up,punctuation:g1,reflink:cp,reflinkSearch:C1,tag:A1,text:p1,url:ri},O1={...wl,link:bt(/^!?\[(label)\]\((.*?)\)/).replace("label",Lr).getRegex(),reflink:bt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Lr).getRegex()},Ra={...wl,emStrongRDelimAst:w1,emStrongLDelim:x1,url:bt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},P1={...Ra,br:bt(ip).replace("{2,}","*").getRegex(),text:bt(Ra.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Zi={normal:xl,gfm:u1,pedantic:f1},Fs={normal:wl,gfm:Ra,breaks:P1,pedantic:O1},M1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xu=e=>M1[e];function Ve(e,t){if(t){if(se.escapeTest.test(e))return e.replace(se.escapeReplace,Xu)}else if(se.escapeTestNoEncode.test(e))return e.replace(se.escapeReplaceNoEncode,Xu);return e}function Qu(e){try{e=encodeURI(e).replace(se.percentDecode,"%")}catch{return null}return e}function Ju(e,t){var r;const n=e.replace(se.findPipe,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),s=n.split(se.splitPipe);let i=0;if(s[0].trim()||s.shift(),s.length>0&&!((r=s.at(-1))!=null&&r.trim())&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;i<s.length;i++)s[i]=s[i].trim().replace(se.slashPipe,"|");return s}function Bs(e,t,n){const s=e.length;if(s===0)return"";let i=0;for(;i<s&&e.charAt(s-i-1)===t;)i++;return e.slice(0,s-i)}function I1(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let s=0;s<e.length;s++)if(e[s]==="\\")s++;else if(e[s]===t[0])n++;else if(e[s]===t[1]&&(n--,n<0))return s;return n>0?-2:-1}function Zu(e,t,n,s,i){const r=t.href,o=t.title||null,a=e[1].replace(i.other.outputLinkReplace,"$1");s.state.inLink=!0;const l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:r,title:o,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,l}function L1(e,t,n){const s=e.match(n.other.indentCodeCompensation);if(s===null)return t;const i=s[1];return t.split(`
`).map(r=>{const o=r.match(n.other.beginningSpace);if(o===null)return r;const[a]=o;return a.length>=i.length?r.slice(i.length):r}).join(`
`)}var Dr=class{constructor(e){W(this,"options");W(this,"rules");W(this,"lexer");this.options=e||Jn}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Bs(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],s=L1(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){const s=Bs(n,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(n=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Bs(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=Bs(t[0],`
`).split(`
`),s="",i="";const r=[];for(;n.length>0;){let o=!1;const a=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),o=!0;else if(!o)a.push(n[l]);else break;n=n.slice(l);const c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${c}`:c,i=i?`${i}
${u}`:u;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,r,!0),this.lexer.state.top=f,n.length===0)break;const h=r.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){const d=h,g=d.raw+`
`+n.join(`
`),m=this.blockquote(g);r[r.length-1]=m,s=s.substring(0,s.length-d.raw.length)+m.raw,i=i.substring(0,i.length-d.text.length)+m.text;break}else if((h==null?void 0:h.type)==="list"){const d=h,g=d.raw+`
`+n.join(`
`),m=this.list(g);r[r.length-1]=m,s=s.substring(0,s.length-h.raw.length)+m.raw,i=i.substring(0,i.length-d.raw.length)+m.raw,n=g.substring(r.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:r,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,i={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const r=this.rules.other.listItemRegex(n);let o=!1;for(;e;){let l=!1,c="",u="";if(!(t=r.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,x=>" ".repeat(3*x.length)),h=e.split(`
`,1)[0],d=!f.trim(),g=0;if(this.options.pedantic?(g=2,u=f.trimStart()):d?g=t[1].length+1:(g=t[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,u=f.slice(g),g+=t[1].length),d&&this.rules.other.blankLine.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),l=!0),!l){const x=this.rules.other.nextBulletRegex(g),v=this.rules.other.hrRegex(g),S=this.rules.other.fencesBeginRegex(g),k=this.rules.other.headingBeginRegex(g),C=this.rules.other.htmlBeginRegex(g);for(;e;){const $=e.split(`
`,1)[0];let P;if(h=$,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),P=h):P=h.replace(this.rules.other.tabCharGlobal,"    "),S.test(h)||k.test(h)||C.test(h)||x.test(h)||v.test(h))break;if(P.search(this.rules.other.nonSpaceChar)>=g||!h.trim())u+=`
`+P.slice(g);else{if(d||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||S.test(f)||k.test(f)||v.test(f))break;u+=`
`+h}!d&&!h.trim()&&(d=!0),c+=$+`
`,e=e.substring($.length+1),f=P.slice(g)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let m=null,b;this.options.gfm&&(m=this.rules.other.listIsTask.exec(u),m&&(b=m[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!m,checked:b,loose:!1,text:u,tokens:[]}),i.raw+=c}const a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){const c=i.items[l].tokens.filter(f=>f.type==="space"),u=c.length>0&&c.some(f=>this.rules.other.anyLine.test(f.raw));i.loose=u}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:s,title:i}}}table(e){var o;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const n=Ju(t[1]),s=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(o=t[3])!=null&&o.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const a of s)this.rules.other.tableAlignRight.test(a)?r.align.push("right"):this.rules.other.tableAlignCenter.test(a)?r.align.push("center"):this.rules.other.tableAlignLeft.test(a)?r.align.push("left"):r.align.push(null);for(let a=0;a<n.length;a++)r.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:r.align[a]});for(const a of i)r.rows.push(Ju(a,r.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:r.align[c]})));return r}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const r=Bs(n.slice(0,-1),"\\");if((n.length-r.length)%2===0)return}else{const r=I1(t[2],"()");if(r===-2)return;if(r>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let s=t[2],i="";if(this.options.pedantic){const r=this.rules.other.pedanticHrefTitle.exec(s);r&&(s=r[1],i=r[3])}else i=t[3]?t[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?s=s.slice(1):s=s.slice(1,-1)),Zu(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const s=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[s.toLowerCase()];if(!i){const r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return Zu(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(s[1]||s[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const r=[...s[0]].length-1;let o,a,l=r,c=0;const u=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+r);(s=u.exec(t))!=null;){if(o=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!o)continue;if(a=[...o].length,s[3]||s[4]){l+=a;continue}else if((s[5]||s[6])&&r%3&&!((r+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);const f=[...s[0]][0].length,h=e.slice(0,r+s.index+f+a);if(Math.min(r,a)%2){const g=h.slice(1,-1);return{type:"em",raw:h,text:g,tokens:this.lexer.inlineTokens(g)}}const d=h.slice(2,-2);return{type:"strong",raw:h,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," ");const s=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return s&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,s;return t[2]==="@"?(n=t[1],s="mailto:"+n):(n=t[1],s=n),{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let s,i;if(t[2]==="@")s=t[0],i="mailto:"+s;else{let r;do r=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(r!==t[0]);s=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},an=class Ea{constructor(t){W(this,"tokens");W(this,"options");W(this,"state");W(this,"tokenizer");W(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Jn,this.options.tokenizer=this.options.tokenizer||new Dr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:se,block:Zi.normal,inline:Fs.normal};this.options.pedantic?(n.block=Zi.pedantic,n.inline=Fs.pedantic):this.options.gfm&&(n.block=Zi.gfm,this.options.breaks?n.inline=Fs.breaks:n.inline=Fs.gfm),this.tokenizer.rules=n}static get rules(){return{block:Zi,inline:Fs}}static lex(t,n){return new Ea(n).lex(t)}static lexInline(t,n){return new Ea(n).inlineTokens(t)}lex(t){t=t.replace(se.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const s=this.inlineQueue[n];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],s=!1){var i,r,o;for(this.options.pedantic&&(t=t.replace(se.tabCharGlobal,"    ").replace(se.spaceLine,""));t;){let a;if((r=(i=this.options.extensions)==null?void 0:i.block)!=null&&r.some(c=>(a=c.call({lexer:this},t,n))?(t=t.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);const c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),n.push(a);continue}let l=t;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0;const u=t.slice(1);let f;this.options.extensions.startBlock.forEach(h=>{f=h.call({lexer:this},u),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const c=n.at(-1);s&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),s=l.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(t){const c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var a,l,c;let s=t,i=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,i.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let r=!1,o="";for(;t;){r||(o=""),r=!1;let u;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(h=>(u=h.call({lexer:this},t,n))?(t=t.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(u.raw.length);const h=n.at(-1);u.type==="text"&&(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(t,s,o)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(t)){t=t.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(t))){t=t.substring(u.raw.length),n.push(u);continue}let f=t;if((c=this.options.extensions)!=null&&c.startInline){let h=1/0;const d=t.slice(1);let g;this.options.extensions.startInline.forEach(m=>{g=m.call({lexer:this},d),typeof g=="number"&&g>=0&&(h=Math.min(h,g))}),h<1/0&&h>=0&&(f=t.substring(0,h+1))}if(u=this.tokenizer.inlineText(f)){t=t.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),r=!0;const h=n.at(-1);(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):n.push(u);continue}if(t){const h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return n}},$r=class{constructor(e){W(this,"options");W(this,"parser");this.options=e||Jn}space(e){return""}code({text:e,lang:t,escaped:n}){var r;const s=(r=(t||"").match(se.notSpaceStart))==null?void 0:r[0],i=e.replace(se.endingNewline,"")+`
`;return s?'<pre><code class="language-'+Ve(s)+'">'+(n?i:Ve(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Ve(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,n=e.start;let s="";for(let o=0;o<e.items.length;o++){const a=e.items[o];s+=this.listitem(a)}const i=t?"ol":"ul",r=t&&n!==1?' start="'+n+'"':"";return"<"+i+r+`>
`+s+"</"+i+`>
`}listitem(e){var n;let t="";if(e.task){const s=this.checkbox({checked:!!e.checked});e.loose?((n=e.tokens[0])==null?void 0:n.type)==="paragraph"?(e.tokens[0].text=s+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=s+" "+Ve(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):t+=s+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let s="";for(let i=0;i<e.rows.length;i++){const r=e.rows[i];n="";for(let o=0;o<r.length;o++)n+=this.tablecell(r[o]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Ve(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const s=this.parser.parseInline(n),i=Qu(e);if(i===null)return s;e=i;let r='<a href="'+e+'"';return t&&(r+=' title="'+Ve(t)+'"'),r+=">"+s+"</a>",r}image({href:e,title:t,text:n,tokens:s}){s&&(n=this.parser.parseInline(s,this.parser.textRenderer));const i=Qu(e);if(i===null)return Ve(n);e=i;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${Ve(t)}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Ve(e.text)}},Sl=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},ln=class Aa{constructor(t){W(this,"options");W(this,"renderer");W(this,"textRenderer");this.options=t||Jn,this.options.renderer=this.options.renderer||new $r,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Sl}static parse(t,n){return new Aa(n).parse(t)}static parseInline(t,n){return new Aa(n).parseInline(t)}parse(t,n=!0){var i,r;let s="";for(let o=0;o<t.length;o++){const a=t[o];if((r=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&r[a.type]){const c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){s+=u||"";continue}}const l=a;switch(l.type){case"space":{s+=this.renderer.space(l);continue}case"hr":{s+=this.renderer.hr(l);continue}case"heading":{s+=this.renderer.heading(l);continue}case"code":{s+=this.renderer.code(l);continue}case"table":{s+=this.renderer.table(l);continue}case"blockquote":{s+=this.renderer.blockquote(l);continue}case"list":{s+=this.renderer.list(l);continue}case"html":{s+=this.renderer.html(l);continue}case"paragraph":{s+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;o+1<t.length&&t[o+1].type==="text";)c=t[++o],u+=`
`+this.renderer.text(c);n?s+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):s+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return s}parseInline(t,n=this.renderer){var i,r;let s="";for(let o=0;o<t.length;o++){const a=t[o];if((r=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&r[a.type]){const c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){s+=c||"";continue}}const l=a;switch(l.type){case"escape":{s+=n.text(l);break}case"html":{s+=n.html(l);break}case"link":{s+=n.link(l);break}case"image":{s+=n.image(l);break}case"strong":{s+=n.strong(l);break}case"em":{s+=n.em(l);break}case"codespan":{s+=n.codespan(l);break}case"br":{s+=n.br(l);break}case"del":{s+=n.del(l);break}case"text":{s+=n.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return s}},qo,ur=(qo=class{constructor(e){W(this,"options");W(this,"block");this.options=e||Jn}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?an.lex:an.lexInline}provideParser(){return this.block?ln.parse:ln.parseInline}},W(qo,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),qo),D1=class{constructor(...e){W(this,"defaults",gl());W(this,"options",this.setOptions);W(this,"parse",this.parseMarkdown(!0));W(this,"parseInline",this.parseMarkdown(!1));W(this,"Parser",ln);W(this,"Renderer",$r);W(this,"TextRenderer",Sl);W(this,"Lexer",an);W(this,"Tokenizer",Dr);W(this,"Hooks",ur);this.use(...e)}walkTokens(e,t){var s,i;let n=[];for(const r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{const o=r;for(const a of o.header)n=n.concat(this.walkTokens(a.tokens,t));for(const a of o.rows)for(const l of a)n=n.concat(this.walkTokens(l.tokens,t));break}case"list":{const o=r;n=n.concat(this.walkTokens(o.items,t));break}default:{const o=r;(i=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&i[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{const l=o[a].flat(1/0);n=n.concat(this.walkTokens(l,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const s={...n};if(s.async=this.defaults.async||s.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const r=t.renderers[i.name];r?t.renderers[i.name]=function(...o){let a=i.renderer.apply(this,o);return a===!1&&(a=r.apply(this,o)),a}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const r=t[i.level];r?r.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),s.extensions=t),n.renderer){const i=this.defaults.renderer||new $r(this.defaults);for(const r in n.renderer){if(!(r in i))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;const o=r,a=n.renderer[o],l=i[o];i[o]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u||""}}s.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new Dr(this.defaults);for(const r in n.tokenizer){if(!(r in i))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;const o=r,a=n.tokenizer[o],l=i[o];i[o]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}s.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new ur;for(const r in n.hooks){if(!(r in i))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;const o=r,a=n.hooks[o],l=i[o];ur.passThroughHooks.has(r)?i[o]=c=>{if(this.defaults.async)return Promise.resolve(a.call(i,c)).then(f=>l.call(i,f));const u=a.call(i,c);return l.call(i,u)}:i[o]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}s.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,r=n.walkTokens;s.walkTokens=function(o){let a=[];return a.push(r.call(this,o)),i&&(a=a.concat(i.call(this,o))),a}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return an.lex(e,t??this.defaults)}parser(e,t){return ln.parse(e,t??this.defaults)}parseMarkdown(e){return(n,s)=>{const i={...s},r={...this.defaults,...i},o=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));r.hooks&&(r.hooks.options=r,r.hooks.block=e);const a=r.hooks?r.hooks.provideLexer():e?an.lex:an.lexInline,l=r.hooks?r.hooks.provideParser():e?ln.parse:ln.parseInline;if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(n):n).then(c=>a(c,r)).then(c=>r.hooks?r.hooks.processAllTokens(c):c).then(c=>r.walkTokens?Promise.all(this.walkTokens(c,r.walkTokens)).then(()=>c):c).then(c=>l(c,r)).then(c=>r.hooks?r.hooks.postprocess(c):c).catch(o);try{r.hooks&&(n=r.hooks.preprocess(n));let c=a(n,r);r.hooks&&(c=r.hooks.processAllTokens(c)),r.walkTokens&&this.walkTokens(c,r.walkTokens);let u=l(c,r);return r.hooks&&(u=r.hooks.postprocess(u)),u}catch(c){return o(c)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+Ve(n.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(n);throw n}}},Yn=new D1;function dt(e,t){return Yn.parse(e,t)}dt.options=dt.setOptions=function(e){return Yn.setOptions(e),dt.defaults=Yn.defaults,tp(dt.defaults),dt};dt.getDefaults=gl;dt.defaults=Jn;dt.use=function(...e){return Yn.use(...e),dt.defaults=Yn.defaults,tp(dt.defaults),dt};dt.walkTokens=function(e,t){return Yn.walkTokens(e,t)};dt.parseInline=Yn.parseInline;dt.Parser=ln;dt.parser=ln.parse;dt.Renderer=$r;dt.TextRenderer=Sl;dt.Lexer=an;dt.lexer=an.lex;dt.Tokenizer=Dr;dt.Hooks=ur;dt.parse=dt;dt.options;dt.setOptions;dt.use;dt.walkTokens;dt.parseInline;ln.parse;an.lex;const $1={class:"dashboard-container"},N1={key:0,class:"loading-state"},F1={key:1,class:"error-state alert alert-danger"},B1={key:2,class:"content-wrapper"},z1={class:"dashboard-grid"},H1={class:"chart-card card"},j1={class:"chart-wrapper"},V1={class:"chart-card card"},U1={class:"chart-wrapper"},W1={class:"ai-analysis-section card"},q1={class:"ai-header"},K1=["disabled"],G1={key:0},Y1={key:1},X1={class:"ai-content"},Q1={key:0,class:"loading-tip-small"},J1={key:1,class:"alert alert-danger"},Z1=["innerHTML"],tS={key:3,class:"placeholder"},eS={__name:"DashboardView",setup(e){po.register(ww,Ow,xw,Us,ka);const t=vs(),n=Ct(()=>t.state.loading),s=Ct(()=>t.state.error),i=Ct(()=>t.state.stats),r=vt(!1),o=vt(null),a=vt(""),l=async()=>{var h,d;if(i.value){r.value=!0,o.value=null,a.value="";try{const g=await ae.stats.getAIAnalysis(i.value);a.value=g.data.analysis_text}catch(g){o.value=((d=(h=g.response)==null?void 0:h.data)==null?void 0:d.detail)||g.message||"未知错误"}finally{r.value=!1}}},c=h=>dt(h),u=(h,d)=>!h||!h.labels||!h.values?{labels:[],datasets:[]}:{labels:h.labels,datasets:[{label:d,backgroundColor:["#42A5F5","#66BB6A","#FFA726","#26A69A","#AB47BC","#FF7043","#8D6E63","#EC407A","#78909C"],data:h.values}]},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1}}};return xs(()=>{t.dispatch("fetchStats")}),(h,d)=>(L(),B("div",$1,[d[5]||(d[5]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-chart-pie"}),nt(" 数据分析")]),p("p",null,"查看系统关键指标，并获取AI智能分析洞察。")],-1)),n.value?(L(),B("div",N1,[ut(Si,{message:"正在加载统计数据..."})])):Tt("",!0),s.value?(L(),B("div",F1," 加载数据时出错: "+G(s.value),1)):Tt("",!0),i.value&&!n.value?(L(),B("div",B1,[p("div",z1,[p("div",H1,[d[0]||(d[0]=p("h3",null,"用户年龄分布",-1)),p("div",j1,[i.value.ageData?(L(),fi(kn(Ww),{key:0,data:u(i.value.ageData,"年龄分布"),options:f},null,8,["data"])):Tt("",!0)])]),p("div",V1,[d[1]||(d[1]=p("h3",null,"用户性别分布",-1)),p("div",U1,[i.value.genderData?(L(),fi(kn(Uw),{key:0,data:u(i.value.genderData,"性别分布"),options:f},null,8,["data"])):Tt("",!0)])])]),p("div",W1,[p("div",q1,[d[4]||(d[4]=p("h3",null,[p("i",{class:"fas fa-robot"}),nt(" AI 智能分析")],-1)),p("button",{onClick:l,class:"btn btn-primary",disabled:r.value},[r.value?(L(),B("span",G1,d[2]||(d[2]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 分析中...")]))):(L(),B("span",Y1,d[3]||(d[3]=[p("i",{class:"fas fa-play-circle"},null,-1),nt(" 启动 AI 分析")])))],8,K1)]),p("div",X1,[r.value?(L(),B("div",Q1,[ut(Si,{message:"AI 正在深度解读数据，请稍候..."})])):o.value?(L(),B("div",J1," AI 分析失败: "+G(o.value),1)):a.value?(L(),B("div",{key:2,class:"markdown-content",innerHTML:c(a.value)},null,8,Z1)):(L(),B("div",tS," 点击“启动 AI 分析”按钮，获取关于当前数据的智能洞察和建议。 "))])])])):Tt("",!0)]))}},nS=Wt(eS,[["__scopeId","data-v-64f9f4b0"]]),sS={name:"UserManagementView",computed:{...no(["users","totalUsers","loading","error"])},methods:{...so(["fetchUsers"]),async toggleUserStatus(e){if(confirm(`您确定要“${e.is_active?"禁用":"激活"}”用户 ${e.username} 吗？`))try{await this.$store.dispatch("updateUserStatus",{userId:e.id,isActive:!e.is_active}),alert(`用户 ${e.username} 已成功${e.is_active?"禁用":"激活"}！`),this.fetchUsers({skip:0,limit:100})}catch(n){alert(`操作失败: ${n.message}`)}}},created(){this.fetchUsers({skip:0,limit:100})}},iS={class:"user-management-container"},rS={class:"card"},oS={key:0,class:"loading-indicator"},aS={key:1,class:"error-display"},lS={key:2},cS={class:"table-meta"},uS={class:"table-wrapper"},fS=["onClick"];function hS(e,t,n,s,i,r){return L(),B("div",iS,[t[5]||(t[5]=p("header",{class:"page-header"},[p("h1",null,[p("i",{class:"fas fa-users-cog"}),nt(" 用户管理")]),p("p",null,"管理系统中的所有用户账户。")],-1)),p("div",rS,[e.loading?(L(),B("div",oS,t[0]||(t[0]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),p("span",null,"正在加载用户数据...",-1)]))):e.error?(L(),B("div",aS,[t[1]||(t[1]=p("i",{class:"fas fa-exclamation-triangle"},null,-1)),p("span",null,G(e.error),1)])):(L(),B("div",lS,[p("div",cS,[t[2]||(t[2]=nt(" 总计：")),p("strong",null,G(e.totalUsers),1),t[3]||(t[3]=nt(" 位用户 "))]),p("div",uS,[p("table",null,[t[4]||(t[4]=p("thead",null,[p("tr",null,[p("th",null,"ID"),p("th",null,"用户名"),p("th",null,"邮箱"),p("th",null,"全名"),p("th",null,"管理员"),p("th",null,"状态"),p("th",null,"操作")])],-1)),p("tbody",null,[(L(!0),B(jt,null,qn(e.users,o=>(L(),B("tr",{key:o.id},[p("td",null,G(o.id),1),p("td",null,G(o.username),1),p("td",null,G(o.email||"未设置"),1),p("td",null,G(o.full_name||"未设置"),1),p("td",null,[p("span",{class:Ce(["status-tag",o.is_superuser?"status-superuser":""])},G(o.is_superuser?"是":"否"),3)]),p("td",null,[p("span",{class:Ce(["status-tag",o.is_active?"status-active":"status-inactive"])},G(o.is_active?"已激活":"已禁用"),3)]),p("td",null,[p("button",{onClick:a=>r.toggleUserStatus(o),class:Ce(["btn btn-small",o.is_active?"btn-danger":"btn-primary"])},G(o.is_active?"禁用":"激活"),11,fS)])]))),128))])])])]))])])}const dS=Wt(sS,[["render",hS],["__scopeId","data-v-32258da0"]]),pS={name:"AssessmentSearchView",data(){return{searchIdCard:"",searched:!1}},computed:{...no(["assessments","loading","error"])},methods:{...so(["searchAssessments"]),handleSearch(){this.searched=!0,this.searchAssessments(this.searchIdCard.trim()||null)},viewReport(e){this.$router.push({name:"ReportDetail",params:{id:e}})},formatStatus(e){return{pending:"待处理",processing:"处理中",complete:"已完成",failed:"失败"}[e]||e},getStatusClass(e){return`status-${e}`}},created(){this.$store.commit("CLEAR_ERROR"),this.searchAssessments(null)}},gS={class:"assessment-search-container"},mS={class:"card search-card"},bS={class:"form-group"},_S=["disabled"],yS={class:"card result-card"},xS={key:0,class:"loading-indicator"},vS={key:1,class:"error-display"},wS={key:2,class:"empty-state"},SS={key:3,class:"empty-state"},kS={key:4,class:"table-wrapper"},RS=["onClick"];function ES(e,t,n,s,i,r){return L(),B("div",gS,[t[9]||(t[9]=p("header",{class:"page-header"},[p("h1",null,[p("i",{class:"fas fa-search"}),nt(" 评估查询")]),p("p",null,"通过身份证号查询历史评估记录，或查看所有最新记录。")],-1)),p("div",mS,[p("form",{onSubmit:t[1]||(t[1]=Oi((...o)=>r.handleSearch&&r.handleSearch(...o),["prevent"])),class:"search-form"},[p("div",bS,[t[2]||(t[2]=p("label",{for:"idCardSearch"},"身份证号 (可选)",-1)),Ft(p("input",{type:"text",id:"idCardSearch","onUpdate:modelValue":t[0]||(t[0]=o=>i.searchIdCard=o),placeholder:"输入身份证号进行精确查询"},null,512),[[te,i.searchIdCard]])]),p("button",{type:"submit",class:"btn btn-primary",disabled:e.loading},[t[3]||(t[3]=p("i",{class:"fas fa-search"},null,-1)),nt(" "+G(e.loading?"查询中...":"查 询"),1)],8,_S)],32)]),p("div",yS,[e.loading?(L(),B("div",xS,t[4]||(t[4]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),p("span",null,"正在加载数据...",-1)]))):e.error?(L(),B("div",vS,[t[5]||(t[5]=p("i",{class:"fas fa-exclamation-triangle"},null,-1)),p("span",null,G(e.error),1)])):!i.searched&&e.assessments.length===0?(L(),B("div",wS,t[6]||(t[6]=[p("i",{class:"fas fa-info-circle"},null,-1),p("p",null,"默认显示最新评估记录。您也可以输入身份证号进行精确查询。",-1)]))):e.assessments.length===0?(L(),B("div",SS,t[7]||(t[7]=[p("i",{class:"fas fa-file-excel"},null,-1),p("p",null,"未找到与查询条件匹配的评估记录。",-1)]))):(L(),B("div",kS,[p("table",null,[t[8]||(t[8]=p("thead",null,[p("tr",null,[p("th",null,"评估ID"),p("th",null,"被测者姓名"),p("th",null,"量表类型"),p("th",null,"评估状态"),p("th",null,"创建时间"),p("th",null,"操作")])],-1)),p("tbody",null,[(L(!0),B(jt,null,qn(e.assessments,o=>(L(),B("tr",{key:o.id},[p("td",null,G(o.id),1),p("td",null,G(o.subject_name),1),p("td",null,G(o.questionnaire_type||"仅图片"),1),p("td",null,[p("span",{class:Ce(["status-tag",r.getStatusClass(o.status)])},G(r.formatStatus(o.status)),3)]),p("td",null,G(new Date(o.created_at).toLocaleString("zh-CN")),1),p("td",null,[p("button",{class:"btn btn-small",onClick:a=>r.viewReport(o.id)}," 查看报告 ",8,RS)])]))),128))])])]))])])}const AS=Wt(pS,[["render",ES],["__scopeId","data-v-4e6e8926"]]),TS={name:"ReportDetailView",props:{id:{type:[String,Number],required:!0}},computed:{...no({report:e=>e.currentReport,loading:e=>e.loading,error:e=>e.error})},methods:{...so(["fetchReportById"]),renderMarkdown(e){return e?dt(e):"<p>报告内容为空。</p>"}},created(){this.fetchReportById(this.id)},beforeRouteUpdate(e,t,n){this.fetchReportById(e.params.id),n()}},CS={class:"report-detail-container"},OS={class:"page-header"},PS={key:0},MS={key:0,class:"loading-indicator"},IS={key:1,class:"error-display"},LS={key:2,class:"report-layout"},DS={class:"card info-panel"},$S={class:"main-panel"},NS={class:"card report-content-card"},FS=["innerHTML"],BS={class:"card tags-card"},zS={key:0,class:"tags-container"},HS={key:1,class:"no-tags"};function jS(e,t,n,s,i,r){return L(),B("div",CS,[p("header",OS,[t[0]||(t[0]=p("h1",null,[p("i",{class:"fas fa-file-invoice"}),nt(" 评估报告详情")],-1)),e.report?(L(),B("p",PS,"报告 ID: "+G(e.report.id)+" | 被测者: "+G(e.report.subject_name),1)):Tt("",!0)]),e.loading?(L(),B("div",MS,t[1]||(t[1]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),p("span",null,"正在加载报告...",-1)]))):e.error?(L(),B("div",IS,[t[2]||(t[2]=p("i",{class:"fas fa-exclamation-triangle"},null,-1)),p("span",null,G(e.error),1)])):e.report?(L(),B("div",LS,[p("div",DS,[t[11]||(t[11]=p("h3",null,[p("i",{class:"fas fa-user-circle"}),nt(" 基础信息")],-1)),p("ul",null,[p("li",null,[t[3]||(t[3]=p("strong",null,"姓名:",-1)),nt(" "+G(e.report.subject_name),1)]),p("li",null,[t[4]||(t[4]=p("strong",null,"年龄:",-1)),nt(" "+G(e.report.age),1)]),p("li",null,[t[5]||(t[5]=p("strong",null,"性别:",-1)),nt(" "+G(e.report.gender),1)]),p("li",null,[t[6]||(t[6]=p("strong",null,"身份证号:",-1)),nt(" "+G(e.report.id_card||"未提供"),1)]),p("li",null,[t[7]||(t[7]=p("strong",null,"职业:",-1)),nt(" "+G(e.report.occupation||"未提供"),1)]),p("li",null,[t[8]||(t[8]=p("strong",null,"案件名称:",-1)),nt(" "+G(e.report.case_name||"未提供"),1)]),p("li",null,[t[9]||(t[9]=p("strong",null,"量表类型:",-1)),nt(" "+G(e.report.questionnaire_type||"仅图片分析"),1)]),p("li",null,[t[10]||(t[10]=p("strong",null,"提交时间:",-1)),nt(" "+G(new Date(e.report.created_at).toLocaleString("zh-CN")),1)])])]),p("div",$S,[p("div",NS,[t[12]||(t[12]=p("h3",null,[p("i",{class:"fas fa-brain"}),nt(" AI 综合分析报告")],-1)),p("div",{class:"markdown-content",innerHTML:r.renderMarkdown(e.report.report_text)},null,8,FS)]),p("div",BS,[t[13]||(t[13]=p("h3",null,[p("i",{class:"fas fa-tags"}),nt(" 关联属性标签")],-1)),e.report.attributes&&e.report.attributes.length>0?(L(),B("div",zS,[(L(!0),B(jt,null,qn(e.report.attributes,o=>(L(),B("span",{key:o.id,class:"tag"},G(o.name),1))),128))])):(L(),B("p",HS,"暂无关联标签。"))])])])):Tt("",!0)])}const VS=Wt(TS,[["render",jS],["__scopeId","data-v-31cd71dd"]]),US={name:"InterrogationInputView",data(){return{form:{person_name:"",person_gender:"男",person_age:null,is_minor:!1,person_id_type_number:"",person_address:"",person_contact:"",interrogation_location:"",interrogator_count:null,interrogator_ids:""}}},computed:{...no(["loading","error"])},watch:{"form.person_age"(e){e&&e<18&&(this.form.is_minor=!0)}},methods:{...so(["startInterrogation"]),async handleStart(){if(!this.form.person_name||!this.form.person_gender||!this.form.person_age||!this.form.interrogation_location){alert("请填写所有带 * 的必填项");return}try{const e=await this.startInterrogation(this.form);this.$router.push({name:"InterrogationEdit",params:{id:e.id}})}catch{}}},created(){this.$store.commit("CLEAR_ERROR")}},WS={class:"interrogation-input-container wide-page-container"},qS={class:"card wide-card"},KS={class:"form-row"},GS={class:"form-group"},YS={class:"form-group"},XS={class:"form-row"},QS={class:"form-group"},JS={class:"form-group checkbox-group"},ZS={class:"form-group"},tk={class:"form-group"},ek={class:"form-group"},nk={class:"form-group"},sk={class:"form-row"},ik={class:"form-group"},rk={class:"form-group"},ok={key:0,class:"error-display"},ak=["disabled"];function lk(e,t,n,s,i,r){return L(),B("div",WS,[t[25]||(t[25]=p("header",{class:"page-header"},[p("h1",null,[p("i",{class:"fas fa-keyboard"}),nt(" 智能审讯 - 信息录入")]),p("p",null,"请填写审讯相关的基础信息以创建笔录。")],-1)),p("div",qS,[p("form",{onSubmit:t[10]||(t[10]=Oi((...o)=>r.handleStart&&r.handleStart(...o),["prevent"]))},[t[23]||(t[23]=p("h3",{class:"form-section-title"},"被讯问人信息",-1)),p("div",KS,[p("div",GS,[t[11]||(t[11]=p("label",{for:"name"},[nt("姓名 "),p("span",{class:"required"},"*")],-1)),Ft(p("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>i.form.person_name=o),required:""},null,512),[[te,i.form.person_name]])]),p("div",YS,[t[13]||(t[13]=p("label",{for:"gender"},[nt("性别 "),p("span",{class:"required"},"*")],-1)),Ft(p("select",{id:"gender","onUpdate:modelValue":t[1]||(t[1]=o=>i.form.person_gender=o),required:""},t[12]||(t[12]=[p("option",{value:"男"},"男",-1),p("option",{value:"女"},"女",-1)]),512),[[Pm,i.form.person_gender]])])]),p("div",XS,[p("div",QS,[t[14]||(t[14]=p("label",{for:"age"},[nt("年龄 "),p("span",{class:"required"},"*")],-1)),Ft(p("input",{type:"number",id:"age","onUpdate:modelValue":t[2]||(t[2]=o=>i.form.person_age=o),required:"",min:"0"},null,512),[[te,i.form.person_age,void 0,{number:!0}]])]),p("div",JS,[Ft(p("input",{type:"checkbox",id:"is_minor","onUpdate:modelValue":t[3]||(t[3]=o=>i.form.is_minor=o)},null,512),[[Om,i.form.is_minor]]),t[15]||(t[15]=p("label",{for:"is_minor"},"是否未成年",-1))])]),p("div",ZS,[t[16]||(t[16]=p("label",{for:"id_card"},"身份证号",-1)),Ft(p("input",{type:"text",id:"id_card","onUpdate:modelValue":t[4]||(t[4]=o=>i.form.person_id_type_number=o)},null,512),[[te,i.form.person_id_type_number]])]),p("div",tk,[t[17]||(t[17]=p("label",{for:"address"},"家庭住址",-1)),Ft(p("input",{type:"text",id:"address","onUpdate:modelValue":t[5]||(t[5]=o=>i.form.person_address=o)},null,512),[[te,i.form.person_address]])]),p("div",ek,[t[18]||(t[18]=p("label",{for:"contact"},"联系方式",-1)),Ft(p("input",{type:"text",id:"contact","onUpdate:modelValue":t[6]||(t[6]=o=>i.form.person_contact=o)},null,512),[[te,i.form.person_contact]])]),t[24]||(t[24]=p("h3",{class:"form-section-title"},"审讯信息",-1)),p("div",nk,[t[19]||(t[19]=p("label",{for:"location"},[nt("审讯地点 "),p("span",{class:"required"},"*")],-1)),Ft(p("input",{type:"text",id:"location","onUpdate:modelValue":t[7]||(t[7]=o=>i.form.interrogation_location=o),required:""},null,512),[[te,i.form.interrogation_location]])]),p("div",sk,[p("div",ik,[t[20]||(t[20]=p("label",{for:"interrogator_count"},"讯问人员数量",-1)),Ft(p("input",{type:"number",id:"interrogator_count","onUpdate:modelValue":t[8]||(t[8]=o=>i.form.interrogator_count=o),min:"1"},null,512),[[te,i.form.interrogator_count,void 0,{number:!0}]])]),p("div",rk,[t[21]||(t[21]=p("label",{for:"interrogator_ids"},"讯问人员警号",-1)),Ft(p("input",{type:"text",id:"interrogator_ids","onUpdate:modelValue":t[9]||(t[9]=o=>i.form.interrogator_ids=o),placeholder:"多个警号用逗号分隔"},null,512),[[te,i.form.interrogator_ids]])])]),e.error?(L(),B("div",ok,G(e.error),1)):Tt("",!0),p("button",{type:"submit",class:"btn btn-primary",disabled:e.loading},[t[22]||(t[22]=p("i",{class:"fas fa-play-circle"},null,-1)),nt(" "+G(e.loading?"正在创建...":"创建笔录并开始"),1)],8,ak)],32)])])}const ck=Wt(US,[["render",lk],["__scopeId","data-v-0ab77df9"]]),uk={class:"editor-page-container"},fk={class:"page-header"},hk={key:0,class:"subtitle"},dk={key:0,class:"loading-state"},pk={key:1,class:"error-state alert alert-danger"},gk={key:2,class:"editor-main-content"},mk={class:"qa-list-panel"},bk={class:"qa-header"},_k=["onClick"],yk={class:"qa-grid"},xk={class:"form-group"},vk=["for"],wk=["id","onUpdate:modelValue"],Sk={class:"form-group"},kk=["for"],Rk=["id","onUpdate:modelValue"],Ek={class:"sidebar-actions"},Ak={class:"action-card"},Tk=["disabled"],Ck={key:0},Ok={key:1},Pk={class:"suggestions-content-wrapper"},Mk={key:0,class:"loading-tip-small"},Ik={key:1,class:"alert alert-danger"},Lk={key:2,class:"suggestions-list"},Dk=["onClick"],$k={class:"page-footer"},Nk=["disabled"],Fk={key:0},Bk={key:1},zk={__name:"InterrogationEditView",setup(e){const t=vs(),n=Ph(),s=to(),i=vt([]),r=vt(null),o=vt(!0),a=vt(!1),l=vt(null),c=vt([]),u=vt(!1),f=vt(null),h=vt(!1),d=vt(""),g=vt("success"),m=Ct(()=>n.params.id),b=(P,D="success",N=3e3)=>{d.value=P,g.value=D,h.value=!0,setTimeout(()=>{h.value=!1},N)},x=async()=>{o.value=!0,l.value=null;try{let P=t.state.interrogationRecord;if((!P||P.id!=m.value)&&(P=await t.dispatch("fetchInterrogationRecordById",m.value)),P)i.value=JSON.parse(JSON.stringify(P.qas||[])),r.value=JSON.parse(JSON.stringify(P.basic_info||{}));else throw new Error("未能加载到审讯记录数据。")}catch(P){l.value=P.message||"加载审讯记录失败。",console.error(P)}finally{o.value=!1}},v=()=>{i.value.push({q:"",a:"",id:Date.now()})},S=P=>{i.value.splice(P,1)},k=async()=>{u.value=!0,f.value=null,c.value=[];try{const P=await t.dispatch("suggestQuestion",{recordId:m.value,currentQAs:i.value.filter(D=>D.q.trim()!==""||D.a.trim()!=="")});c.value=P}catch(P){f.value=P.message||"获取建议时发生未知错误。",console.error(P)}finally{u.value=!1}},C=P=>{i.value.push({q:P,a:"",id:Date.now()})},$=async()=>{a.value=!0,l.value=null;try{const P={qas:i.value,basic_info:r.value};await t.dispatch("saveInterrogation",{recordId:m.value,updateData:P}),b("审讯笔录已成功保存！","success",2e3),setTimeout(()=>{s.push({name:"InterrogationList"})},2100)}catch(P){const D=P.message||"保存失败，请检查网络或联系管理员。";b(D,"error",4e3),console.error(P)}finally{a.value=!1}};return xs(()=>{x()}),(P,D)=>(L(),B("div",uk,[p("div",fk,[D[0]||(D[0]=p("h2",null,"审讯笔录编辑",-1)),r.value?(L(),B("p",hk," 被讯问人: "+G(r.value.person_name||"未知")+" | 记录ID: "+G(m.value),1)):Tt("",!0)]),o.value?(L(),B("div",dk,[ut(Si,{message:"正在加载审讯记录..."})])):Tt("",!0),l.value?(L(),B("div",pk," 加载记录时出错: "+G(l.value),1)):Tt("",!0),!o.value&&!l.value?(L(),B("div",gk,[p("div",mk,[(L(!0),B(jt,null,qn(i.value,(N,H)=>(L(),B("div",{key:N.id||H,class:"qa-pair"},[p("div",bk,[p("h4",null,"第 "+G(H+1)+" 组问答",1),p("button",{onClick:K=>S(H),class:"btn-remove",title:"删除此问答对"},D[1]||(D[1]=[p("i",{class:"fas fa-times"},null,-1)]),8,_k)]),p("div",yk,[p("div",xk,[p("label",{for:"question-"+H},"问题",8,vk),Ft(p("textarea",{id:"question-"+H,"onUpdate:modelValue":K=>N.q=K,class:"form-control",rows:"5",placeholder:"请输入问题..."},null,8,wk),[[te,N.q]])]),p("div",Sk,[p("label",{for:"answer-"+H},"回答",8,kk),Ft(p("textarea",{id:"answer-"+H,"onUpdate:modelValue":K=>N.a=K,class:"form-control",rows:"5",placeholder:"请输入回答..."},null,8,Rk),[[te,N.a]])])])]))),128)),p("button",{onClick:v,class:"btn btn-add-qa"},D[2]||(D[2]=[p("i",{class:"fas fa-plus"},null,-1),nt(" 添加新问答 ")]))]),p("aside",Ek,[p("div",Ak,[D[6]||(D[6]=p("h3",null,[p("i",{class:"fas fa-lightbulb"}),nt(" AI 智能建议")],-1)),p("button",{onClick:k,disabled:u.value,class:"btn btn-primary btn-block"},[u.value?(L(),B("span",Ck,D[3]||(D[3]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 正在获取...")]))):(L(),B("span",Ok,D[4]||(D[4]=[p("i",{class:"fas fa-magic"},null,-1),nt(" 获取AI建议问题")])))],8,Tk),p("div",Pk,[u.value?(L(),B("div",Mk,[ut(Si,{message:"AI思考中..."})])):f.value?(L(),B("div",Ik,G(f.value),1)):c.value.length>0?(L(),B("div",Lk,[D[5]||(D[5]=p("p",null,"点击建议以快速添加：",-1)),(L(!0),B(jt,null,qn(c.value,(N,H)=>(L(),B("button",{key:H,onClick:K=>C(N),class:"suggestion-item"},G(N),9,Dk))),128))])):Tt("",!0)])])])])):Tt("",!0),p("div",$k,[p("button",{onClick:$,class:"btn btn-primary btn-lg",disabled:a.value},[a.value?(L(),B("span",Fk,D[7]||(D[7]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 正在保存...")]))):(L(),B("span",Bk,D[8]||(D[8]=[p("i",{class:"fas fa-save"},null,-1),nt(" 保存笔录")])))],8,Nk)]),ut(gh,{name:"toast-fade"},{default:be(()=>[h.value?(L(),B("div",{key:0,class:Ce(["notification-toast",g.value])},[p("i",{class:Ce(g.value==="success"?"fas fa-check-circle":"fas fa-exclamation-circle")},null,2),p("span",null,G(d.value),1)],2)):Tt("",!0)]),_:1})]))}},Hk=Wt(zk,[["__scopeId","data-v-ecf0497d"]]),jk={class:"list-container"},Vk={key:0,class:"loading-state"},Uk={key:1,class:"error-state alert alert-danger"},Wk={key:2,class:"card"},qk={class:"record-table"},Kk={key:0},Gk=["onClick"],Yk={key:3,class:"pagination"},Xk=["disabled"],Qk=["disabled"],Jk={__name:"InterrogationListView",setup(e){const t=vs(),n=to(),s=vt(1),i=vt(10),r=Ct(()=>t.state.loading),o=Ct(()=>t.state.error),a=Ct(()=>t.state.interrogationList.records),l=Ct(()=>t.state.interrogationList.total),c=Ct(()=>Math.ceil(l.value/i.value)||1),u=()=>{const b=(s.value-1)*i.value;t.dispatch("fetchInterrogationList",{skip:b,limit:i.value})},f=b=>b?new Date(b).toLocaleString("zh-CN"):"N/A",h=b=>b==="completed"?"status-completed":b==="ongoing"?"status-ongoing":"status-default",d=b=>{n.push({name:"InterrogationEdit",params:{id:b}})},g=()=>{s.value>1&&(s.value--,u())},m=()=>{s.value<c.value&&(s.value++,u())};return xs(()=>{u()}),(b,x)=>(L(),B("div",jk,[x[3]||(x[3]=p("div",{class:"list-header"},[p("h2",null,"审讯记录列表"),p("p",null,"查看、搜索和管理所有已保存的审讯记录。")],-1)),r.value?(L(),B("div",Vk,[ut(Si,{message:"正在加载记录列表..."})])):Tt("",!0),o.value?(L(),B("div",Uk," 加载列表时出错: "+G(o.value),1)):Tt("",!0),!r.value&&!o.value?(L(),B("div",Wk,[p("table",qk,[x[2]||(x[2]=p("thead",null,[p("tr",null,[p("th",null,"记录ID"),p("th",null,"被讯问人"),p("th",null,"案件类型"),p("th",null,"状态"),p("th",null,"创建时间"),p("th",null,"最后更新"),p("th",null,"操作")])],-1)),p("tbody",null,[a.value.length===0?(L(),B("tr",Kk,x[0]||(x[0]=[p("td",{colspan:"7",class:"text-center"},"没有找到任何审讯记录。",-1)]))):Tt("",!0),(L(!0),B(jt,null,qn(a.value,v=>(L(),B("tr",{key:v.id},[p("td",null,G(v.id),1),p("td",null,G(v.person_name||"未命名"),1),p("td",null,G(v.case_type||"未分类"),1),p("td",null,[p("span",{class:Ce(["status-badge",h(v.status)])},G(v.status),3)]),p("td",null,G(f(v.created_at)),1),p("td",null,G(f(v.updated_at)),1),p("td",null,[p("button",{onClick:S=>d(v.id),class:"btn btn-primary btn-small"},x[1]||(x[1]=[p("i",{class:"fas fa-edit"},null,-1),nt(" 编辑 ")]),8,Gk)])]))),128))])])])):Tt("",!0),!r.value&&l.value>0?(L(),B("div",Yk,[p("button",{onClick:g,disabled:s.value===1},"上一页",8,Xk),p("span",null,"第 "+G(s.value)+" 页 / 共 "+G(c.value)+" 页 (总计 "+G(l.value)+" 条)",1),p("button",{onClick:m,disabled:s.value===c.value},"下一页",8,Qk)])):Tt("",!0)]))}},Zk=Wt(Jk,[["__scopeId","data-v-28fe950a"]]),tR="https://flk.npc.gov.cn/search.html";function Ze(e){const t=encodeURIComponent(e);return`${tR}?keyword=${t}&keywordType=1`}const tf=[{id:1,name:"中华人民共和国刑法",description:"规定犯罪、刑事责任和刑罚的法律。",link:Ze("中华人民共和国刑法")},{id:2,name:"中华人民共和国治安管理处罚法",description:"关于维护社会治安秩序，保障公共安全的法律。",link:Ze("中华人民共和国治安管理处罚法")},{id:3,name:"中华人民共和国消防法",description:"预防火灾和减少火灾危害，加强应急救援工作的法律。",link:Ze("中华人民共和国消防法")},{id:4,name:"中华人民共和国禁毒法",description:"预防和惩治毒品违法犯罪行为，保护公民身心健康的法律。",link:Ze("中华人民共和国禁毒法")},{id:5,name:"公安机关办理刑事案件程序规定",description:"公安机关办理刑事案件时应当遵守的具体程序规则。",link:Ze("公安机关办理刑事案件程序规定")},{id:6,name:"公安机关适用继续盘问规定",description:"关于公安机关在执法过程中适用继续盘问措施的规定。",link:Ze("公安机关适用继续盘问规定")},{id:7,name:"中华人民共和国刑事诉讼法",description:"进行刑事诉讼必须遵守的基本法律。",link:Ze("中华人民共和国刑事诉讼法")},{id:8,name:"道路交通事故处理程序规定",description:"公安机关交通管理部门处理道路交通事故的程序规定。",link:Ze("道路交通事故处理程序规定")},{id:9,name:"中华人民共和国人民警察法",description:"关于人民警察的性质、任务、职责、权利和义务的法律。",link:Ze("中华人民共和国人民警察法")}],eR={class:"law-query-container"},nR={class:"search-bar card"},sR={class:"law-list"},iR={class:"law-info"},rR={class:"law-name"},oR={class:"law-description"},aR={class:"law-actions"},lR=["href"],cR={key:0,class:"no-results card"},uR={__name:"LawQueryView",setup(e){const t=vt(""),n=Ct(()=>t.value?tf.filter(s=>s.name.toLowerCase().includes(t.value.toLowerCase())):tf);return(s,i)=>(L(),B("div",eR,[i[4]||(i[4]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-balance-scale"}),nt(" 法律法规查询")]),p("p",null,"快速查找常用法律法规，并链接至国家官方数据库。")],-1)),p("div",nR,[i[1]||(i[1]=p("i",{class:"fas fa-search search-icon"},null,-1)),Ft(p("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=r=>t.value=r),placeholder:"输入法规名称进行筛选...",class:"search-input"},null,512),[[te,t.value]])]),p("div",sR,[(L(!0),B(jt,null,qn(n.value,r=>(L(),B("div",{key:r.id,class:"law-item card"},[p("div",iR,[p("h3",rR,G(r.name),1),p("p",oR,G(r.description),1)]),p("div",aR,[p("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",class:"btn btn-primary"},i[2]||(i[2]=[p("i",{class:"fas fa-external-link-alt"},null,-1),nt(" 查看原文 ")]),8,lR)])]))),128)),n.value.length===0?(L(),B("div",cR,i[3]||(i[3]=[p("p",null,"未找到匹配的法规。",-1)]))):Tt("",!0)])]))}},fR=Wt(uR,[["__scopeId","data-v-0279a1d2"]]),hR={key:0,class:"form-card card"},dR={class:"form-group"},pR={key:0,class:"alert alert-danger"},gR=["disabled"],mR={key:0},bR={key:1},_R={key:1,class:"result-container"},yR={class:"report-section card"},xR={class:"guidance-section card"},vR=["innerHTML"],wR={__name:"GuidanceForm",props:{scenario:{type:String,required:!0}},setup(e){const t=e,n=vs(),s=vt(""),i=vt(null),r=vt(!1),o=vt(null),a=async()=>{r.value=!0,o.value=null,i.value=null;try{const u=await n.dispatch("fetchGuidance",{scenario:t.scenario,idCard:s.value});i.value={report_text:u.report.report_text,guidance:u.guidance}}catch(u){o.value=u.message||"获取指导方案失败。"}finally{r.value=!1}},l=u=>u?dt(u):"",c=()=>{i.value=null,s.value="",o.value=null};return(u,f)=>(L(),B("div",null,[i.value?Tt("",!0):(L(),B("div",hR,[p("form",{onSubmit:Oi(a,["prevent"])},[p("div",dR,[f[1]||(f[1]=p("label",{for:"id_card"},"请输入查询对象的身份证号:",-1)),Ft(p("input",{type:"text",id:"id_card","onUpdate:modelValue":f[0]||(f[0]=h=>s.value=h),placeholder:"输入身份证号进行查询",required:""},null,512),[[te,s.value]])]),o.value?(L(),B("div",pR,G(o.value),1)):Tt("",!0),p("button",{type:"submit",class:"btn btn-primary",disabled:r.value},[r.value?(L(),B("span",mR,f[2]||(f[2]=[p("i",{class:"fas fa-spinner fa-spin"},null,-1),nt(" 查询中...")]))):(L(),B("span",bR,f[3]||(f[3]=[p("i",{class:"fas fa-search"},null,-1),nt(" 查询并生成方案")])))],8,gR)],32)])),i.value?(L(),B("div",_R,[p("div",yR,[f[4]||(f[4]=p("h3",null,[p("i",{class:"fas fa-file-invoice"}),nt(" 关联心理评估报告")],-1)),p("pre",null,G(i.value.report_text),1)]),p("div",xR,[f[5]||(f[5]=p("h3",null,[p("i",{class:"fas fa-lightbulb"}),nt(" AI 生成指导方案")],-1)),p("div",{class:"markdown-content",innerHTML:l(i.value.guidance)},null,8,vR)]),p("button",{onClick:c,class:"btn btn-secondary"},"返回重新查询")])):Tt("",!0)]))}},kl=Wt(wR,[["__scopeId","data-v-3a737590"]]),SR={class:"guidance-container"},kR={__name:"PetitionerGuidanceView",setup(e){return(t,n)=>(L(),B("div",SR,[n[0]||(n[0]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-hand-holding-heart"}),nt(" 上访户情绪疏导")]),p("p",null,"输入上访户信息以查询评估报告，并生成针对性的情绪疏导方案。")],-1)),ut(kl,{scenario:"petitioner"})]))}},RR=Wt(kR,[["__scopeId","data-v-c23f7b56"]]),ER={class:"guidance-container"},AR={__name:"JuvenileCounselingView",setup(e){return(t,n)=>(L(),B("div",ER,[n[0]||(n[0]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-child"}),nt(" 未成年人心理辅导")]),p("p",null,"输入未成年人信息以查询评估报告，并生成定制化的心理辅导方案。")],-1)),ut(kl,{scenario:"juvenile"})]))}},TR=Wt(AR,[["__scopeId","data-v-2a20f843"]]),CR={class:"guidance-container"},OR={__name:"PoliceAdjustmentView",setup(e){return(t,n)=>(L(),B("div",CR,[n[0]||(n[0]=p("div",{class:"page-header"},[p("h2",null,[p("i",{class:"fas fa-shield-alt"}),nt(" 民辅警心理调适")]),p("p",null,"输入民辅警信息以查询评估报告，并获取专业的心理调适建议。")],-1)),ut(kl,{scenario:"police"})]))}},PR=Wt(OR,[["__scopeId","data-v-c5a5a863"]]),MR=[{path:"/login",name:"Login",component:h0},{path:"/",component:Zy,meta:{requiresAuth:!0},children:[{path:"",name:"Dashboard",component:nS},{path:"assessment-search",name:"AssessmentSearch",component:AS},{path:"user-management",name:"UserManagement",component:dS},{path:"petitioner-guidance",name:"PetitionerGuidance",component:RR},{path:"juvenile-counseling",name:"JuvenileCounseling",component:TR},{path:"police-adjustment",name:"PoliceAdjustment",component:PR},{path:"report/:id",name:"ReportDetail",component:VS,props:!0},{path:"interrogation/new",name:"InterrogationInput",component:ck},{path:"interrogation/:id/edit",name:"InterrogationEdit",component:Hk,props:!0},{path:"interrogation/list",name:"InterrogationList",component:Zk},{path:"law-query",name:"LawQuery",component:fR}]}],Nr=Qb({history:Eb(),routes:MR});Nr.beforeEach((e,t,n)=>{const s=bd.getters.isAuthenticated;e.meta.requiresAuth&&!s?n({name:"Login"}):e.name==="Login"&&s?n({name:"Dashboard"}):n()});const Rl=$m(Hm);Rl.use(bd);Rl.use(Nr);Rl.mount("#app");


================================================================================

--- File: psychology-admin-frontend\public\index.html ---
<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>倾听者 - 管理后台</title>
    <!-- 引入 Font Awesome 图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>

================================================================================

--- File: psychology-admin-frontend\src\main.js ---
import { createApp } from 'vue';
import App from './App.vue';
import router from './router';
import store from './store';
import './assets/main.css'; // 引入全局样式

const app = createApp(App);

app.use(store);
app.use(router);

app.mount('#app');

================================================================================

--- File: psychology-admin-frontend\src\api\index.js ---
// 文件路径: psychology-admin-frontend/src/api/index.js

import axios from 'axios';

// ====================================================================
// --- Axios 实例定义 ---
// 我们创建多个实例来清晰地分离不同API端点的基础路径，便于维护。
// ====================================================================

/**
 * @description Admin 专用实例
 * 所有需要 /api/v1/admin 前缀的后台管理请求都通过它发送。
 */
const adminApi = axios.create({
  baseURL: '/api/v1/admin',
  timeout: 120000, // 设置较长的超时时间，以应对可能耗时较长的AI分析
});

/**
 * @description Auth 专用实例
 * 所有认证相关请求（登录、获取用户信息等）都通过它发送。
 * baseURL 直接指向认证模块，使得调用时路径更简洁。
 */
const authApi = axios.create({
  baseURL: '/api/v1/auth',
  timeout: 120000,
});

/**
 * @description 通用基础实例
 * 用于访问不带特定前缀（如/admin, /auth）的API，或者需要写完整路径的特殊情况。
 */
const baseApi = axios.create({
    baseURL: '/', // 根路径
    timeout: 120000,
});

// ====================================================================
// --- 请求拦截器 ---
// 统一为所有实例添加请求拦截器，自动在请求头中附加认证Token。
// ====================================================================
[adminApi, authApi, baseApi].forEach(apiInstance => {
  apiInstance.interceptors.request.use(
    (config) => {
      // 从 localStorage 中获取管理员token
      const token = localStorage.getItem('admin_token');
      if (token) {
        // 如果token存在，将其添加到 Authorization 请求头中
        config.headers['Authorization'] = `Bearer ${token}`;
      }
      return config;
    },
    (error) => {
      // 对请求错误做些什么
      return Promise.reject(error);
    }
  );
});

// ====================================================================
// --- API 方法导出 ---
// 将所有API请求封装成函数，按模块导出，方便组件调用。
// ====================================================================
export default {
  /**
   * @namespace auth 认证模块
   */
  auth: {
    login(username, password) {
      // OAuth2.0 的密码模式要求使用 application/x-www-form-urlencoded 格式
      const formData = new URLSearchParams();
      formData.append('username', username);
      formData.append('password', password);
      // 使用 authApi 实例，请求的实际URL是: /api/v1/auth/token
      return authApi.post('/token', formData, {
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      });
    },
    getCurrentUser() {
      // 使用 authApi 实例，请求的实际URL是: /api/v1/auth/users/me
      return authApi.get('/users/me');
    }
  },

  /**
   * @namespace users 用户管理模块
   */
  users: {
    getUsers(skip = 0, limit = 100) {
      return adminApi.get(`/users`, { params: { skip, limit } });
    },
    updateUser(userId, userData) {
      return adminApi.patch(`/users/${userId}`, userData);
    },
  },

  /**
   * @namespace stats 数据统计模块
   */
  stats: {
    getDemographicsStats() {
      return adminApi.get('/stats/demographics');
    },
    getAIAnalysis(statsData) {
      return adminApi.post('/stats/ai-analysis', { demographics: statsData });
    }
  },

  /**
   * @namespace assessments 评估记录模块
   */
  assessments: {
    search(idCard = null) {
      const params = {};
      if (idCard) params.id_card = idCard;
      return adminApi.get(`/assessments/search`, { params });
    },
    // 注意：获取单个报告的接口不在/admin下，因此使用通用实例
    getById(assessmentId) {
      return baseApi.get(`/api/v1/reports/${assessmentId}`);
    }
  },

  /**
   * @namespace guidance 指导方案模块
   */
  guidance: {
    getGuidance(scenario, idCard) {
      // `scenario` 可以是 "petitioner", "juvenile", "police"
      return adminApi.get(`/guidance/${scenario}`, { params: { id_card: idCard } });
    }
  },

  /**
   * @namespace interrogation 智能审讯模块
   */
  interrogation: {
    getList({ skip = 0, limit = 10 }) {
      return adminApi.get('/interrogations', { params: { skip, limit } });
    },
    getById(recordId) {
      return adminApi.get(`/interrogations/${recordId}`);
    },
    start(basicInfo) {
      return adminApi.post('/interrogation/start', basicInfo);
    },
    suggestQuestion(recordId, currentQAs) {
      // 根据后端要求的数据格式构建 payload
      const payload = currentQAs.map(qa => ({ q: qa.q, a: qa.a }));
      return adminApi.post(`/interrogation/${recordId}/suggest`, payload);
    },
    save(recordId, recordUpdate) {
      return adminApi.put(`/interrogation/${recordId}`, recordUpdate);
    }
  }
};

================================================================================

--- File: psychology-admin-frontend\src\assets\main.css ---
/* 文件路径: psychology-admin-frontend/src/assets/main.css (最终优化版) */

/* 1. CSS 变量定义 */
:root {
  --primary-color: #2c3e50;      /* 深蓝灰色 - 用于侧边栏和强调元素 */
  --secondary-color: #34495e;    /* 稍浅的蓝灰色 */
  --accent-color: #42b983;       /* 绿色 - 用于按钮、链接等高亮元素 */
  
  /* [->] 新增: 定义渐变背景色 */
  --background-gradient-start: #eaf2f8; /* 渐变起始色 - 非常浅的蓝 */
  --background-gradient-end: #85c1e9;   /* 渐变结束色 - 稍深的柔和蓝 */

  --sidebar-bg: #2c3e50;
  --sidebar-text: #ecf0f1;
  --sidebar-active-bg: #42b983;
  --content-bg: #ffffff;         /* 卡片背景色 */
  --text-color: #333;
  --border-color: #e8e8e8;
  --shadow-color: rgba(0, 0, 0, 0.08); /* 稍微调整阴影颜色 */
}

/* 2. 全局 Body 样式 */
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  
  /* [->] 关键: 应用线性渐变背景 */
  background-color: var(--background-gradient-start); /* 为不支持渐变的浏览器提供后备 */
  background-image: linear-gradient(135deg, var(--background-gradient-start) 0%, var(--background-gradient-end) 100%);
  
  color: var(--text-color);
  /* 确保 body 至少和视口一样高，让渐变能铺满全屏 */
  min-height: 100vh;
}

/* 3. App 根元素 & 布局 */
#app {
  display: flex;
  min-height: 100vh;
}

/* 链接样式 */
a {
  color: var(--accent-color);
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}

/* [->] 优化: 卡片/容器样式，使其在渐变背景上更突出 */
.card {
  background-color: var(--content-bg);
  border-radius: 8px;
  padding: 24px;
  box-shadow: 0 4px 15px var(--shadow-color); /* 稍微加深阴影 */
  margin-bottom: 24px;
  border: 1px solid rgba(0, 0, 0, 0.05); /* 添加一个非常淡的边框 */
}

/* 按钮样式 */
.btn {
  display: inline-block;
  padding: 8px 16px;
  background-color: var(--accent-color);
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 14px;
  cursor: pointer;
  transition: background-color 0.3s, transform 0.2s;
}
.btn:hover {
  background-color: #36a473;
  transform: translateY(-2px); /* 添加轻微的上浮效果 */
}
.btn-primary {
  background-color: #1890ff;
}
.btn-primary:hover {
  background-color: #40a9ff;
}
.btn-danger {
  background-color: #f5222d;
}
.btn-danger:hover {
  background-color: #ff4d4f;
}

/* 表单样式 */
.form-group {
    margin-bottom: 16px;
}
.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
}
.form-group input, .form-group select, .form-group textarea { /* 应用到所有表单控件 */
    width: 100%;
    padding: 10px 14px;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    box-sizing: border-box;
    background-color: #f9fafb; /* 给输入框一个浅灰色背景 */
}
.form-group input:focus, .form-group select:focus, .form-group textarea:focus {
  outline: none;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 3px rgba(66, 185, 131, 0.2);
}

/* 表格样式 */
table {
    width: 100%;
    border-collapse: collapse;
}
th, td {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-color); /* [->] 修改: 只保留底部边框，更现代 */
    text-align: left;
}
th {
    background-color: #f8f9fa;
    font-weight: 600;
    border-bottom-width: 2px; /* 让表头下划线更粗 */
}
tbody tr:hover {
    background-color: #f1f5f9;
}

================================================================================

--- File: psychology-admin-frontend\src\data\laws.js ---
// 文件路径: psychology-admin-frontend/src/data/laws.js

// 国家法律法规数据库基础搜索URL
const BASE_SEARCH_URL = 'https://flk.npc.gov.cn/search.html';

/**
 * 生成特定法律的搜索链接。
 * @param {string} lawName - 法律的全名。
 * @returns {string} - 指向官方数据库搜索结果页面的URL。
 */
function createSearchLink(lawName) {
  // 对法律名称进行URL编码，以处理特殊字符
  const encodedName = encodeURIComponent(lawName);
  // 构建搜索链接，keywordType=1 表示按标题搜索
  return `${BASE_SEARCH_URL}?keyword=${encodedName}&keywordType=1`;
}

// 导出的法律法规列表
export const laws = [
  {
    id: 1,
    name: '中华人民共和国刑法',
    description: '规定犯罪、刑事责任和刑罚的法律。',
    // 直接链接到搜索结果页，通常第一个就是目标法律
    link: createSearchLink('中华人民共和国刑法'),
  },
  {
    id: 2,
    name: '中华人民共和国治安管理处罚法',
    description: '关于维护社会治安秩序，保障公共安全的法律。',
    link: createSearchLink('中华人民共和国治安管理处罚法'),
  },
  {
    id: 3,
    name: '中华人民共和国消防法',
    description: '预防火灾和减少火灾危害，加强应急救援工作的法律。',
    link: createSearchLink('中华人民共和国消防法'),
  },
  {
    id: 4,
    name: '中华人民共和国禁毒法',
    description: '预防和惩治毒品违法犯罪行为，保护公民身心健康的法律。',
    link: createSearchLink('中华人民共和国禁毒法'),
  },
  {
    id: 5,
    name: '公安机关办理刑事案件程序规定',
    description: '公安机关办理刑事案件时应当遵守的具体程序规则。',
    link: createSearchLink('公安机关办理刑事案件程序规定'),
  },
  {
    id: 6,
    name: '公安机关适用继续盘问规定',
    description: '关于公安机关在执法过程中适用继续盘问措施的规定。',
    link: createSearchLink('公安机关适用继续盘问规定'),
  },
  {
    id: 7,
    name: '中华人民共和国刑事诉讼法',
    description: '进行刑事诉讼必须遵守的基本法律。',
    link: createSearchLink('中华人民共和国刑事诉讼法'),
  },
  {
    id: 8,
    name: '道路交通事故处理程序规定',
    description: '公安机关交通管理部门处理道路交通事故的程序规定。',
    link: createSearchLink('道路交通事故处理程序规定'),
  },
  {
    id: 9,
    name: '中华人民共和国人民警察法',
    description: '关于人民警察的性质、任务、职责、权利和义务的法律。',
    link: createSearchLink('中华人民共和国人民警察法'),
  },
];

================================================================================

--- File: psychology-admin-frontend\src\router\index.js ---
// 文件路径: psychology-admin-frontend/src/router/index.js (最终修复版 - 解决 ReferenceError)

import { createRouter, createWebHistory } from 'vue-router';

// [->] 核心修复: 确保所有在 routes 中使用的组件都被导入
import AppLayout from '../components/AppLayout.vue';
import LoginView from '../views/LoginView.vue';
import DashboardView from '../views/DashboardView.vue';
import UserManagementView from '../views/UserManagementView.vue';
import AssessmentSearchView from '../views/AssessmentSearchView.vue'; // <--- 之前可能缺失的导入
import PetitionerGuidanceView from '../views/PetitionerGuidanceView.vue';
import JuvenileCounselingView from '../views/JuvenileCounselingView.vue';
import PoliceAdjustmentView from '../views/PoliceAdjustmentView.vue';
import ReportDetailView from '../views/ReportDetailView.vue';
import InterrogationInputView from '../views/InterrogationInputView.vue';
import InterrogationEditView from '../views/InterrogationEditView.vue';
import InterrogationListView from '../views/InterrogationListView.vue';
import LawQueryView from '../views/LawQueryView.vue';

const routes = [
  {
    path: '/login',
    name: 'Login',
    component: LoginView,
  },
  {
    path: '/',
    component: AppLayout,
    meta: { requiresAuth: true },
    children: [
      { path: '', name: 'Home', redirect: '/dashboard' },
      { path: 'dashboard', name: 'Dashboard', component: DashboardView },
      { path: 'assessment-search', name: 'AssessmentSearch', component: AssessmentSearchView }, // <--- 使用已导入的组件
      { path: 'user-management', name: 'UserManagement', component: UserManagementView },
      { path: 'petitioner-guidance', name: 'PetitionerGuidance', component: PetitionerGuidanceView },
      { path: 'juvenile-counseling', name: 'JuvenileCounseling', component: JuvenileCounselingView },
      { path: 'police-adjustment', name: 'PoliceAdjustment', component: PoliceAdjustmentView },
      { path: 'report/:id', name: 'ReportDetail', component: ReportDetailView, props: true },
      { path: 'interrogation/new', name: 'InterrogationInput', component: InterrogationInputView },
      { path: 'interrogation/:id/edit', name: 'InterrogationEdit', component: InterrogationEditView, props: true },
      { path: 'interrogation/list', name: 'InterrogationList', component: InterrogationListView },
      { path: 'law-query', name: 'LawQuery', component: LawQueryView },
    ],
  },
];

const router = createRouter({
  // 这个配置保持不变，它对于部署是正确的
  history: createWebHistory(import.meta.env.BASE_URL), 
  routes,
});

// 路由守卫保持不变
router.beforeEach((to, from, next) => {
  const token = localStorage.getItem('admin_token');
  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);

  if (requiresAuth && !token) {
    next({ name: 'Login' });
  } else if (to.name === 'Login' && token) {
    next({ name: 'Dashboard' });
  } else {
    next();
  }
});

export default router;

================================================================================

--- File: psychology-admin-frontend\src\store\index.js ---
import { createStore } from 'vuex';
import api from '../api';
import router from '../router';
import axios from 'axios';

export default createStore({
  state: {
    token: localStorage.getItem('admin_token') || null,
    user: null,
    users: [],
    totalUsers: 0,
    assessments: [],
    stats: null,
    currentGuidance: null,
    currentReport: null,
    interrogationRecord: null,
    interrogationList: {
      records: [],
      total: 0,
    },
    loading: false,
    error: null,
  },
  getters: {
    isAuthenticated: (state) => !!state.token,
    currentUser: (state) => state.user,
  },
  mutations: {
    SET_TOKEN(state, token) {
      state.token = token;
      if (token) {
        localStorage.setItem('admin_token', token);
      } else {
        localStorage.removeItem('admin_token');
      }
    },
    SET_USER(state, user) {
      state.user = user;
    },
    SET_USERS(state, { users, total }) {
      state.users = users;
      state.totalUsers = total;
    },
    SET_ASSESSMENTS(state, assessments) {
      state.assessments = assessments;
    },
    SET_STATS(state, stats) {
        state.stats = stats;
    },
    SET_CURRENT_GUIDANCE(state, guidanceData) {
        state.currentGuidance = guidanceData;
    },
    SET_CURRENT_REPORT(state, reportData) {
        state.currentReport = reportData;
    },
    SET_INTERROGATION_RECORD(state, record) {
        state.interrogationRecord = record;
    },
    SET_INTERROGATION_LIST(state, { records, total }) {
      state.interrogationList.records = records;
      state.interrogationList.total = total;
    },
    UPDATE_INTERROGATION_QA(state, newQAs) {
        if (state.interrogationRecord) {
            state.interrogationRecord.qas = newQAs;
        }
    },
    SET_LOADING(state, loading) {
      state.loading = loading;
    },
    SET_ERROR(state, error) {
      state.error = error;
    },
    CLEAR_ERROR(state) {
      state.error = null;
    },
  },
  actions: {
    async login({ commit }, credentials) {
      commit('SET_LOADING', true);
      commit('CLEAR_ERROR');
      try {
        const { data } = await api.auth.login(credentials.username, credentials.password);
        commit('SET_TOKEN', data.access_token);
        const userResponse = await api.auth.getCurrentUser();
        if (!userResponse.data.is_superuser) {
            throw new Error('您不是管理员，无法登录后台系统。');
        }
        commit('SET_USER', userResponse.data);
        router.push({ name: 'Dashboard' });
      } catch (error) {
        const errorMessage = error.response?.data?.detail || error.message || '登录失败';
        commit('SET_ERROR', errorMessage);
        commit('SET_TOKEN', null);
        commit('SET_USER', null);
        throw error;
      } finally {
        commit('SET_LOADING', false);
      }
    },
    logout({ commit }) {
      commit('SET_TOKEN', null);
      commit('SET_USER', null);
      router.push({ name: 'Login' });
    },
    async fetchUsers({ commit }, { skip, limit }) {
        commit('SET_LOADING', true);
        commit('CLEAR_ERROR');
        try {
            const { data } = await api.users.getUsers(skip, limit);
            commit('SET_USERS', { users: data.users, total: data.total });
        } catch (error) {
            commit('SET_ERROR', '获取用户列表失败');
        } finally {
            commit('SET_LOADING', false);
        }
    },
    async updateUserStatus({ commit }, { userId, isActive }) {
        try {
            await api.users.updateUser(userId, { is_active: isActive });
        } catch (error) {
            const errorMessage = error.response?.data?.detail || '更新用户状态失败';
            commit('SET_ERROR', errorMessage);
            throw new Error(errorMessage);
        }
    },
    async fetchStats({ commit }) {
        commit('SET_LOADING', true);
        commit('CLEAR_ERROR');
        try {
            const { data } = await api.stats.getDemographicsStats();
            commit('SET_STATS', data);
        } catch(error) {
            commit('SET_ERROR', '获取统计数据失败');
        } finally {
            commit('SET_LOADING', false);
        }
    },
    async searchAssessments({ commit }, idCard) {
      commit('SET_LOADING', true);
      commit('CLEAR_ERROR');
      commit('SET_ASSESSMENTS', []);
      try {
        const { data } = await api.assessments.search(idCard);
        commit('SET_ASSESSMENTS', data);
      } catch (error) {
        const errorMessage = error.response?.data?.detail || '搜索评估记录失败';
        commit('SET_ERROR', errorMessage);
      } finally {
        commit('SET_LOADING', false);
      }
    },
    async fetchGuidance({ commit }, { scenario, idCard }) {
      commit('SET_LOADING', true);
      commit('CLEAR_ERROR');
      commit('SET_CURRENT_GUIDANCE', null);
      try {
        const { data } = await api.guidance.getGuidance(scenario, idCard);
        commit('SET_CURRENT_GUIDANCE', data);
        return data; // <<< FIX: Return the fetched data
      } catch (error) {
        const errorMessage = error.response?.data?.detail || '获取指导方案失败';
        commit('SET_ERROR', errorMessage);
        throw new Error(errorMessage);
      } finally {
        commit('SET_LOADING', false);
      }
    },
    async fetchReportById({ commit }, assessmentId) {
      commit('SET_LOADING', true);
      commit('CLEAR_ERROR');
      commit('SET_CURRENT_REPORT', null);
      try {
        const { data } = await api.assessments.getById(assessmentId);
        if (data && data.report) {
          commit('SET_CURRENT_REPORT', data.report);
        } else if (data && data.message) {
          throw new Error(data.message);
        } else {
          throw new Error('获取报告时返回了无效的数据格式');
        }
      } catch (error) {
        const errorMessage = error.response?.data?.detail || error.message || '获取报告详情失败';
        commit('SET_ERROR', errorMessage);
      } finally {
        commit('SET_LOADING', false);
      }
    },
    async startInterrogation({ commit }, basicInfo) {
      commit('SET_LOADING', true);
      commit('CLEAR_ERROR');
      try {
        const { data } = await api.interrogation.start(basicInfo);
        commit('SET_INTERROGATION_RECORD', data);
        return data;
      } catch (error) {
        const errorMessage = error.response?.data?.detail || '开始新的审讯失败';
        commit('SET_ERROR', errorMessage);
        throw new Error(errorMessage);
      } finally {
        commit('SET_LOADING', false);
      }
    },
    async suggestQuestion({ commit }, { recordId, currentQAs }) {
      try {
        const { data } = await api.interrogation.suggestQuestion(recordId, currentQAs);
        return data;
      } catch (error) {
        const errorMessage = error.response?.data?.detail || '获取AI建议失败';
        commit('SET_ERROR', errorMessage);
        throw new Error(errorMessage);
      }
    },
    async saveInterrogation({ commit }, { recordId, updateData }) {
      if (!recordId) {
        throw new Error('没有可保存的审讯记录ID');
      }
      commit('SET_LOADING', true);
      commit('CLEAR_ERROR');
      try {
        const { data } = await api.interrogation.save(recordId, updateData);
        // 保存成功后，更新当前的 interrogationRecord
        commit('SET_INTERROGATION_RECORD', data);
        return data;
      } catch (error) {
        const errorMessage = error.response?.data?.detail || '保存审讯笔录失败';
        commit('SET_ERROR', errorMessage);
        throw new Error(errorMessage);
      } finally {
        commit('SET_LOADING', false);
      }
    },

    async fetchInterrogationRecordById({ commit }, recordId) {
      commit('SET_LOADING', true);
      commit('CLEAR_ERROR');
      commit('SET_INTERROGATION_RECORD', null);
      try {
        const { data } = await api.interrogation.getById(recordId);
        commit('SET_INTERROGATION_RECORD', data);
        return data;
      } catch (error) {
        const errorMessage = error.response?.data?.detail || `获取审讯记录(ID: ${recordId})失败`;
        commit('SET_ERROR', errorMessage);
        throw new Error(errorMessage);
      } finally {
        commit('SET_LOADING', false);
      }
    },
    async fetchInterrogationList({ commit }, { skip, limit }) {
      commit('SET_LOADING', true);
      commit('CLEAR_ERROR');
      try {
        const { data } = await api.interrogation.getList({ skip, limit });
        commit('SET_INTERROGATION_LIST', {
          records: data.records,
          total: data.total,
        });
      } catch (error) {
        const errorMessage = error.response?.data?.detail || '获取审讯记录列表失败';
        commit('SET_ERROR', errorMessage);
        commit('SET_INTERROGATION_LIST', { records: [], total: 0 });
      } finally {
        commit('SET_LOADING', false);
      }
    },
  },
});

================================================================================

--- File: psychology-app-new\Combiner.py ---
import os
import sys
from tqdm import tqdm

# --- 配置区 ---

# 定义允许被合并内容的文件扩展名
ALLOWED_EXTENSIONS_FOR_CONTENT = ('.py', '.vue', '.js', '.css', '.html', '.md', '.json') # 可以根据需要添加更多

# 定义需要排除（不访问、不包含在目录树和合并内容中）的目录名称列表
EXCLUDED_DIRS = ['node_modules', '.git', '__pycache__', 'dist', 'build', 'venv', '.env', '.vscode', '.idea'] # 添加了常见的排除项

# --- 函数定义 ---

def generate_tree(root_dir):
    """
    生成类似 tree /f 的目录树字符串，但会排除 EXCLUDED_DIRS 中指定的目录。
    """
    tree_output = [os.path.basename(root_dir)] # 使用 basename 获取根目录名
    
    # 使用 os.walk 遍历目录
    # topdown=True (默认) 意味着先访问父目录，再访问子目录，允许我们修改 dirs 列表来阻止访问某些子目录
    for root, dirs, files in os.walk(root_dir, topdown=True):
        # --- 核心过滤逻辑：排除指定的目录 ---
        # 使用列表推导式原地修改 dirs 列表，移除需要排除的目录
        # 这样 os.walk 就不会再进入这些被移除的目录
        dirs[:] = [d for d in dirs if d not in EXCLUDED_DIRS]

        # 计算当前层级和缩进
        # 注意：root 包含完整路径，我们需要计算相对于 root_dir 的深度
        # 如果 root_dir 是 '.' 或相对路径，这可能需要调整，但对于绝对路径或简单子目录通常有效
        relative_path = os.path.relpath(root, root_dir)
        level = relative_path.count(os.sep) if relative_path != '.' else 0
        
        # 避免在根目录下额外缩进 basename
        if relative_path != '.':
            indent = '    ' * level
            tree_output.append(f"{indent}└── {os.path.basename(root)}") # 使用更像 tree 的前缀

        # 列出当前目录下的文件（这些文件所在的目录已经通过了 EXCLUDED_DIRS 的过滤）
        sub_indent = '    ' * (level + 1)
        for file in files:
            # 在目录树中列出所有未被排除目录下的文件
            tree_output.append(f"{sub_indent}├── {file}") # 使用更像 tree 的前缀
            
    return "\n".join(tree_output)

def calculate_total_files(root_dir):
    """
    计算需要处理的文件总数（排除了 EXCLUDED_DIRS 目录下的文件）。
    用于 TQDM 进度条。
    """
    total_files = 0
    for root, dirs, files in os.walk(root_dir, topdown=True):
        # --- 同样应用目录排除逻辑 ---
        dirs[:] = [d for d in dirs if d not in EXCLUDED_DIRS]
        
        # 只计算文件总数，不区分扩展名，因为进度条反映的是扫描进度
        total_files += len(files)
    return total_files

def concatenate_files(root_dir, output_file):
    """
    合并指定目录下符合条件的文件内容到输出文件中，并包含过滤后的目录树。
    会排除 EXCLUDED_DIRS 中指定的目录。
    """
    # --- 1. 计算需要扫描的文件总数 (已排除 EXCLUDED_DIRS) ---
    total_files = calculate_total_files(root_dir)
    print(f"排除 {', '.join(EXCLUDED_DIRS)} 后，预计扫描文件总数: {total_files}")
    
    # 可以在这里也计算一下会被合并内容的文件数（可选）
    included_files_count = 0
    files_to_include = []
    for root, dirs, files in os.walk(root_dir, topdown=True):
        dirs[:] = [d for d in dirs if d not in EXCLUDED_DIRS]
        for file in files:
             _, ext = os.path.splitext(file)
             if ext.lower() in ALLOWED_EXTENSIONS_FOR_CONTENT:
                 included_files_count += 1
                 files_to_include.append(os.path.join(root, file)) # 记录待合并的文件路径
    print(f"找到 {included_files_count} 个符合扩展名条件 ({', '.join(ALLOWED_EXTENSIONS_FOR_CONTENT)}) 的文件将被合并内容。")


    with open(output_file, 'w', encoding='utf-8') as outfile:
        # --- 2. 写入过滤后的目录树 ---
        outfile.write("项目目录结构 (已过滤部分目录):\n") # 标题明确说明是过滤后的树
        outfile.write("=================================\n")
        tree_content = generate_tree(root_dir)
        outfile.write(tree_content + "\n")
        outfile.write("=================================\n\n")
        outfile.write("合并的文件内容 (仅限指定类型):\n") # 明确说明内容是过滤后的
        outfile.write("=================================\n\n")

        # --- 3. 遍历文件并合并内容 ---
        # 使用 tqdm 显示进度条 (total 是排除目录后的文件总数)
        with tqdm(total=total_files, desc="扫描文件并合并内容", unit="个文件", bar_format="{l_bar}{bar}| {n_fmt}/{total_fmt} [{elapsed}<{remaining}, {rate_fmt}]") as pbar:
            processed_files_count = 0 # 用于实际处理的文件计数器
            for root, dirs, files in os.walk(root_dir, topdown=True):
                # --- 核心过滤逻辑：再次排除指定的目录 ---
                # 确保在主处理循环中也应用这个过滤
                dirs[:] = [d for d in dirs if d not in EXCLUDED_DIRS]

                for file in files:
                    file_path = os.path.join(root, file)
                    relative_file_path = os.path.relpath(file_path, root_dir) # 获取相对路径，更通用

                    # --- 检查文件扩展名是否允许合并 ---
                    _, ext = os.path.splitext(file)
                    if ext.lower() in ALLOWED_EXTENSIONS_FOR_CONTENT:
                        # --- 文件内容合并逻辑 ---
                        try:
                            with open(file_path, 'r', encoding='utf-8', errors='ignore') as infile: # 添加 errors='ignore' 避免解码错误中断
                                content = infile.read()
                                outfile.write(f"--- 文件: {relative_file_path} ---\n") # 使用相对路径更清晰
                                outfile.write(content + "\n")
                                outfile.write(f"--- 文件结束: {relative_file_path} ---\n\n")
                            # print(f"已合并内容: {relative_file_path}") # 可以在 tqdm 中显示，减少控制台输出噪音
                            pbar.set_postfix_str(f"正在合并: {relative_file_path[-50:]}", refresh=True) # 显示当前正在处理的文件（部分）
                        except Exception as e:
                            # 记录读取或写入错误
                            outfile.write(f"--- 文件: {relative_file_path} ---\n")
                            outfile.write(f"!!! 读取或写入文件时出错: {str(e)} !!!\n")
                            outfile.write(f"--- 文件结束 (错误): {relative_file_path} ---\n\n")
                            pbar.set_postfix_str(f"合并错误: {relative_file_path[-50:]}", refresh=True)
                            # print(f"合并内容失败: {relative_file_path} - 错误: {str(e)}") # 可以在 tqdm 中显示
                    else:
                        # --- 文件类型不符，跳过内容合并 ---
                        # print(f"已跳过内容合并 (类型不符): {relative_file_path}") # 可以在 tqdm 中显示
                        pbar.set_postfix_str(f"已跳过: {relative_file_path[-50:]}", refresh=True) # 显示当前跳过的文件（部分）

                    # --- 更新进度条 ---
                    # 每个访问的文件（无论是否合并内容）都更新进度条
                    pbar.update(1)
                    processed_files_count += 1 # 增加处理计数

            # 确保进度条达到 100% (有时由于计数误差可能不到)
            if pbar.n < total_files:
                 pbar.n = total_files
                 pbar.refresh()
            # 检查处理的文件数是否与预期扫描数匹配
            if processed_files_count != total_files:
                 print(f"\n警告：扫描到的文件数 ({total_files}) 与实际处理的文件数 ({processed_files_count}) 不匹配。请检查过滤逻辑或文件系统变化。")


# --- 主程序入口 ---
if __name__ == "__main__":
    # 获取目标目录，默认为当前工作目录
    root_dir = sys.argv[1] if len(sys.argv) > 1 else os.getcwd()
    # 标准化路径，确保 C:\path 和 C:\path/ 不同
    root_dir = os.path.normpath(root_dir) 
    
    # 定义输出文件名
    output_file = 'project_content_aggregator_output.txt' # 使用更具描述性的文件名

    print(f"[*] 目标扫描目录: {root_dir}")
    print(f"[*] 将要排除的目录: {', '.join(EXCLUDED_DIRS)}")
    print(f"[*] 将合并以下类型文件的内容: {', '.join(ALLOWED_EXTENSIONS_FOR_CONTENT)}")
    print(f"[*] 输出文件将保存为: {output_file}")
    
    # 执行合并操作
    try:
        concatenate_files(root_dir, output_file)
        print(f"\n[+] 处理完成。输出文件已生成: {output_file}")
    except FileNotFoundError:
        print(f"[!] 错误：指定的目录不存在: {root_dir}")
    except Exception as e:
        print(f"[!] 处理过程中发生意外错误: {str(e)}")

================================================================================

--- File: psychology-app-new\README.md ---
# Vue 3 + Vite

This template should help get you started developing with Vue 3 in Vite. The template uses Vue 3 `<script setup>` SFCs, check out the [script setup docs](https://v3.vuejs.org/api/sfc-script-setup.html#sfc-script-setup) to learn more.

Learn more about IDE Support for Vue in the [Vue Docs Scaling up Guide](https://vuejs.org/guide/scaling-up/tooling.html#ide-support).

# 开启
npm run dev


================================================================================

--- File: psychology-app-new\index.html ---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + Vue</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>


================================================================================

--- File: psychology-app-new\package-lock.json ---
{
  "name": "psychology-app-new",
  "version": "0.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "psychology-app-new",
      "version": "0.0.0",
      "dependencies": {
        "axios": "^1.9.0",
        "marked": "^15.0.11",
        "vue": "^3.5.13",
        "vue-router": "^4.5.0",
        "vuex": "^4.1.0"
      },
      "devDependencies": {
        "@vitejs/plugin-vue": "^5.2.2",
        "vite": "^6.3.1"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.25.9",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.25.9.tgz",
      "integrity": "sha512-4A/SCr/2KLd5jrtOMFzaKjVtAei3+2r/NChoBNoZ3EyP/+GlhoaEGoWOZUmFmoITP7zOJyHIMm+DYRd8o3PvHA==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.25.9",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.25.9.tgz",
      "integrity": "sha512-Ed61U6XJc3CVRfkERJWDz4dJwKe7iLmmJsbOGu9wSloNSFttHV0I8g6UAgb7qnK5ly5bGLPd4oXZlxCdANBOWQ==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.27.0.tgz",
      "integrity": "sha512-iaepho73/2Pz7w2eMS0Q5f83+0RKI7i4xmiYeBmDzfRVbQtTOG7Ts0S4HzJVsTMGI9keU8rNfuZr8DKfSt7Yyg==",
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.27.0"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.27.0.tgz",
      "integrity": "sha512-H45s8fVLYjbhFH62dIJ3WtmJ6RSPt/3DRO0ZcT2SUiYiQyz3BLVb9ADEnLl91m74aQPS3AzzeajZHYOalWe3bg==",
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.25.9",
        "@babel/helper-validator-identifier": "^7.25.9"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@esbuild/aix-ppc64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.25.3.tgz",
      "integrity": "sha512-W8bFfPA8DowP8l//sxjJLSLkD8iEjMc7cBVyP+u4cEv9sM7mdUCkgsj+t0n/BWPFtv7WWCN5Yzj0N6FJNUUqBQ==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "aix"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.25.3.tgz",
      "integrity": "sha512-PuwVXbnP87Tcff5I9ngV0lmiSu40xw1At6i3GsU77U7cjDDB4s0X2cyFuBiDa1SBk9DnvWwnGvVaGBqoFWPb7A==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.25.3.tgz",
      "integrity": "sha512-XelR6MzjlZuBM4f5z2IQHK6LkK34Cvv6Rj2EntER3lwCBFdg6h2lKbtRjpTTsdEjD/WSe1q8UyPBXP1x3i/wYQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.25.3.tgz",
      "integrity": "sha512-ogtTpYHT/g1GWS/zKM0cc/tIebFjm1F9Aw1boQ2Y0eUQ+J89d0jFY//s9ei9jVIlkYi8AfOjiixcLJSGNSOAdQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.25.3.tgz",
      "integrity": "sha512-eESK5yfPNTqpAmDfFWNsOhmIOaQA59tAcF/EfYvo5/QWQCzXn5iUSOnqt3ra3UdzBv073ykTtmeLJZGt3HhA+w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.25.3.tgz",
      "integrity": "sha512-Kd8glo7sIZtwOLcPbW0yLpKmBNWMANZhrC1r6K++uDR2zyzb6AeOYtI6udbtabmQpFaxJ8uduXMAo1gs5ozz8A==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.25.3.tgz",
      "integrity": "sha512-EJiyS70BYybOBpJth3M0KLOus0n+RRMKTYzhYhFeMwp7e/RaajXvP+BWlmEXNk6uk+KAu46j/kaQzr6au+JcIw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.25.3.tgz",
      "integrity": "sha512-Q+wSjaLpGxYf7zC0kL0nDlhsfuFkoN+EXrx2KSB33RhinWzejOd6AvgmP5JbkgXKmjhmpfgKZq24pneodYqE8Q==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.25.3.tgz",
      "integrity": "sha512-dUOVmAUzuHy2ZOKIHIKHCm58HKzFqd+puLaS424h6I85GlSDRZIA5ycBixb3mFgM0Jdh+ZOSB6KptX30DD8YOQ==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.25.3.tgz",
      "integrity": "sha512-xCUgnNYhRD5bb1C1nqrDV1PfkwgbswTTBRbAd8aH5PhYzikdf/ddtsYyMXFfGSsb/6t6QaPSzxtbfAZr9uox4A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.25.3.tgz",
      "integrity": "sha512-yplPOpczHOO4jTYKmuYuANI3WhvIPSVANGcNUeMlxH4twz/TeXuzEP41tGKNGWJjuMhotpGabeFYGAOU2ummBw==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.25.3.tgz",
      "integrity": "sha512-P4BLP5/fjyihmXCELRGrLd793q/lBtKMQl8ARGpDxgzgIKJDRJ/u4r1A/HgpBpKpKZelGct2PGI4T+axcedf6g==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.25.3.tgz",
      "integrity": "sha512-eRAOV2ODpu6P5divMEMa26RRqb2yUoYsuQQOuFUexUoQndm4MdpXXDBbUoKIc0iPa4aCO7gIhtnYomkn2x+bag==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.25.3.tgz",
      "integrity": "sha512-ZC4jV2p7VbzTlnl8nZKLcBkfzIf4Yad1SJM4ZMKYnJqZFD4rTI+pBG65u8ev4jk3/MPwY9DvGn50wi3uhdaghg==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.25.3.tgz",
      "integrity": "sha512-LDDODcFzNtECTrUUbVCs6j9/bDVqy7DDRsuIXJg6so+mFksgwG7ZVnTruYi5V+z3eE5y+BJZw7VvUadkbfg7QA==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.25.3.tgz",
      "integrity": "sha512-s+w/NOY2k0yC2p9SLen+ymflgcpRkvwwa02fqmAwhBRI3SC12uiS10edHHXlVWwfAagYSY5UpmT/zISXPMW3tQ==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.25.3.tgz",
      "integrity": "sha512-nQHDz4pXjSDC6UfOE1Fw9Q8d6GCAd9KdvMZpfVGWSJztYCarRgSDfOVBY5xwhQXseiyxapkiSJi/5/ja8mRFFA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-arm64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-arm64/-/netbsd-arm64-0.25.3.tgz",
      "integrity": "sha512-1QaLtOWq0mzK6tzzp0jRN3eccmN3hezey7mhLnzC6oNlJoUJz4nym5ZD7mDnS/LZQgkrhEbEiTn515lPeLpgWA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.25.3.tgz",
      "integrity": "sha512-i5Hm68HXHdgv8wkrt+10Bc50zM0/eonPb/a/OFVfB6Qvpiirco5gBA5bz7S2SHuU+Y4LWn/zehzNX14Sp4r27g==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-arm64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-arm64/-/openbsd-arm64-0.25.3.tgz",
      "integrity": "sha512-zGAVApJEYTbOC6H/3QBr2mq3upG/LBEXr85/pTtKiv2IXcgKV0RT0QA/hSXZqSvLEpXeIxah7LczB4lkiYhTAQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.25.3.tgz",
      "integrity": "sha512-fpqctI45NnCIDKBH5AXQBsD0NDPbEFczK98hk/aa6HJxbl+UtLkJV2+Bvy5hLSLk3LHmqt0NTkKNso1A9y1a4w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.25.3.tgz",
      "integrity": "sha512-ROJhm7d8bk9dMCUZjkS8fgzsPAZEjtRJqCAmVgB0gMrvG7hfmPmz9k1rwO4jSiblFjYmNvbECL9uhaPzONMfgA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.25.3.tgz",
      "integrity": "sha512-YWcow8peiHpNBiIXHwaswPnAXLsLVygFwCB3A7Bh5jRkIBFWHGmNQ48AlX4xDvQNoMZlPYzjVOQDYEzWCqufMQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.25.3.tgz",
      "integrity": "sha512-qspTZOIGoXVS4DpNqUYUs9UxVb04khS1Degaw/MnfMe7goQ3lTfQ13Vw4qY/Nj0979BGvMRpAYbs/BAxEvU8ew==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.25.3.tgz",
      "integrity": "sha512-ICgUR+kPimx0vvRzf+N/7L7tVSQeE3BYY+NhHRHXS1kBuPO7z2+7ea2HbhDyZdTephgvNvKrlDDKUexuCVBVvg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.0.tgz",
      "integrity": "sha512-gv3ZRaISU3fjPAgNsriBRqGWQL6quFx04YMPW/zD8XMLsU32mhCCbfbO6KZFLjvYpCZ8zyDEgqsgf+PwPaM7GQ==",
      "license": "MIT"
    },
    "node_modules/@rollup/rollup-android-arm-eabi": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.40.0.tgz",
      "integrity": "sha512-+Fbls/diZ0RDerhE8kyC6hjADCXA1K4yVNlH0EYfd2XjyH0UGgzaQ8MlT0pCXAThfxv3QUAczHaL+qSv1E4/Cg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-android-arm64": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.40.0.tgz",
      "integrity": "sha512-PPA6aEEsTPRz+/4xxAmaoWDqh67N7wFbgFUJGMnanCFs0TV99M0M8QhhaSCks+n6EbQoFvLQgYOGXxlMGQe/6w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-darwin-arm64": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.40.0.tgz",
      "integrity": "sha512-GwYOcOakYHdfnjjKwqpTGgn5a6cUX7+Ra2HeNj/GdXvO2VJOOXCiYYlRFU4CubFM67EhbmzLOmACKEfvp3J1kQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-darwin-x64": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.40.0.tgz",
      "integrity": "sha512-CoLEGJ+2eheqD9KBSxmma6ld01czS52Iw0e2qMZNpPDlf7Z9mj8xmMemxEucinev4LgHalDPczMyxzbq+Q+EtA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-arm64": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.40.0.tgz",
      "integrity": "sha512-r7yGiS4HN/kibvESzmrOB/PxKMhPTlz+FcGvoUIKYoTyGd5toHp48g1uZy1o1xQvybwwpqpe010JrcGG2s5nkg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-x64": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.40.0.tgz",
      "integrity": "sha512-mVDxzlf0oLzV3oZOr0SMJ0lSDd3xC4CmnWJ8Val8isp9jRGl5Dq//LLDSPFrasS7pSm6m5xAcKaw3sHXhBjoRw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.40.0.tgz",
      "integrity": "sha512-y/qUMOpJxBMy8xCXD++jeu8t7kzjlOCkoxxajL58G62PJGBZVl/Gwpm7JK9+YvlB701rcQTzjUZ1JgUoPTnoQA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.40.0.tgz",
      "integrity": "sha512-GoCsPibtVdJFPv/BOIvBKO/XmwZLwaNWdyD8TKlXuqp0veo2sHE+A/vpMQ5iSArRUz/uaoj4h5S6Pn0+PdhRjg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-gnu": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.40.0.tgz",
      "integrity": "sha512-L5ZLphTjjAD9leJzSLI7rr8fNqJMlGDKlazW2tX4IUF9P7R5TMQPElpH82Q7eNIDQnQlAyiNVfRPfP2vM5Avvg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-musl": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.40.0.tgz",
      "integrity": "sha512-ATZvCRGCDtv1Y4gpDIXsS+wfFeFuLwVxyUBSLawjgXK2tRE6fnsQEkE4csQQYWlBlsFztRzCnBvWVfcae/1qxQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loongarch64-gnu": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loongarch64-gnu/-/rollup-linux-loongarch64-gnu-4.40.0.tgz",
      "integrity": "sha512-wG9e2XtIhd++QugU5MD9i7OnpaVb08ji3P1y/hNbxrQ3sYEelKJOq1UJ5dXczeo6Hj2rfDEL5GdtkMSVLa/AOg==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-powerpc64le-gnu": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-powerpc64le-gnu/-/rollup-linux-powerpc64le-gnu-4.40.0.tgz",
      "integrity": "sha512-vgXfWmj0f3jAUvC7TZSU/m/cOE558ILWDzS7jBhiCAFpY2WEBn5jqgbqvmzlMjtp8KlLcBlXVD2mkTSEQE6Ixw==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.40.0.tgz",
      "integrity": "sha512-uJkYTugqtPZBS3Z136arevt/FsKTF/J9dEMTX/cwR7lsAW4bShzI2R0pJVw+hcBTWF4dxVckYh72Hk3/hWNKvA==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-musl": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.40.0.tgz",
      "integrity": "sha512-rKmSj6EXQRnhSkE22+WvrqOqRtk733x3p5sWpZilhmjnkHkpeCgWsFFo0dGnUGeA+OZjRl3+VYq+HyCOEuwcxQ==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-s390x-gnu": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.40.0.tgz",
      "integrity": "sha512-SpnYlAfKPOoVsQqmTFJ0usx0z84bzGOS9anAC0AZ3rdSo3snecihbhFTlJZ8XMwzqAcodjFU4+/SM311dqE5Sw==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-gnu": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.40.0.tgz",
      "integrity": "sha512-RcDGMtqF9EFN8i2RYN2W+64CdHruJ5rPqrlYw+cgM3uOVPSsnAQps7cpjXe9be/yDp8UC7VLoCoKC8J3Kn2FkQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-musl": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.40.0.tgz",
      "integrity": "sha512-HZvjpiUmSNx5zFgwtQAV1GaGazT2RWvqeDi0hV+AtC8unqqDSsaFjPxfsO6qPtKRRg25SisACWnJ37Yio8ttaw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-win32-arm64-msvc": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.40.0.tgz",
      "integrity": "sha512-UtZQQI5k/b8d7d3i9AZmA/t+Q4tk3hOC0tMOMSq2GlMYOfxbesxG4mJSeDp0EHs30N9bsfwUvs3zF4v/RzOeTQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-ia32-msvc": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.40.0.tgz",
      "integrity": "sha512-+m03kvI2f5syIqHXCZLPVYplP8pQch9JHyXKZ3AGMKlg8dCyr2PKHjwRLiW53LTrN/Nc3EqHOKxUxzoSPdKddA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-msvc": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.40.0.tgz",
      "integrity": "sha512-lpPE1cLfP5oPzVjKMx10pgBmKELQnFJXHgvtHCtuJWOv8MxqdEIMNtgHgBFf7Ea2/7EuVwa9fodWUfXAlXZLZQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@types/estree": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.7.tgz",
      "integrity": "sha512-w28IoSUCJpidD/TGviZwwMJckNESJZXFu7NBZ5YJ4mEUnNraUn9Pm8HSZm/jDF1pDWYKspWE7oVphigUPRakIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@vitejs/plugin-vue": {
      "version": "5.2.3",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-vue/-/plugin-vue-5.2.3.tgz",
      "integrity": "sha512-IYSLEQj4LgZZuoVpdSUCw3dIynTWQgPlaRP6iAvMle4My0HdYwr5g5wQAfwOeHQBmYwEkqF70nRpSilr6PoUDg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.0.0 || >=20.0.0"
      },
      "peerDependencies": {
        "vite": "^5.0.0 || ^6.0.0",
        "vue": "^3.2.25"
      }
    },
    "node_modules/@vue/compiler-core": {
      "version": "3.5.13",
      "resolved": "https://registry.npmjs.org/@vue/compiler-core/-/compiler-core-3.5.13.tgz",
      "integrity": "sha512-oOdAkwqUfW1WqpwSYJce06wvt6HljgY3fGeM9NcVA1HaYOij3mZG9Rkysn0OHuyUAGMbEbARIpsG+LPVlBJ5/Q==",
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.25.3",
        "@vue/shared": "3.5.13",
        "entities": "^4.5.0",
        "estree-walker": "^2.0.2",
        "source-map-js": "^1.2.0"
      }
    },
    "node_modules/@vue/compiler-dom": {
      "version": "3.5.13",
      "resolved": "https://registry.npmjs.org/@vue/compiler-dom/-/compiler-dom-3.5.13.tgz",
      "integrity": "sha512-ZOJ46sMOKUjO3e94wPdCzQ6P1Lx/vhp2RSvfaab88Ajexs0AHeV0uasYhi99WPaogmBlRHNRuly8xV75cNTMDA==",
      "license": "MIT",
      "dependencies": {
        "@vue/compiler-core": "3.5.13",
        "@vue/shared": "3.5.13"
      }
    },
    "node_modules/@vue/compiler-sfc": {
      "version": "3.5.13",
      "resolved": "https://registry.npmjs.org/@vue/compiler-sfc/-/compiler-sfc-3.5.13.tgz",
      "integrity": "sha512-6VdaljMpD82w6c2749Zhf5T9u5uLBWKnVue6XWxprDobftnletJ8+oel7sexFfM3qIxNmVE7LSFGTpv6obNyaQ==",
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.25.3",
        "@vue/compiler-core": "3.5.13",
        "@vue/compiler-dom": "3.5.13",
        "@vue/compiler-ssr": "3.5.13",
        "@vue/shared": "3.5.13",
        "estree-walker": "^2.0.2",
        "magic-string": "^0.30.11",
        "postcss": "^8.4.48",
        "source-map-js": "^1.2.0"
      }
    },
    "node_modules/@vue/compiler-ssr": {
      "version": "3.5.13",
      "resolved": "https://registry.npmjs.org/@vue/compiler-ssr/-/compiler-ssr-3.5.13.tgz",
      "integrity": "sha512-wMH6vrYHxQl/IybKJagqbquvxpWCuVYpoUJfCqFZwa/JY1GdATAQ+TgVtgrwwMZ0D07QhA99rs/EAAWfvG6KpA==",
      "license": "MIT",
      "dependencies": {
        "@vue/compiler-dom": "3.5.13",
        "@vue/shared": "3.5.13"
      }
    },
    "node_modules/@vue/devtools-api": {
      "version": "6.6.4",
      "resolved": "https://registry.npmjs.org/@vue/devtools-api/-/devtools-api-6.6.4.tgz",
      "integrity": "sha512-sGhTPMuXqZ1rVOk32RylztWkfXTRhuS7vgAKv0zjqk8gbsHkJ7xfFf+jbySxt7tWObEJwyKaHMikV/WGDiQm8g==",
      "license": "MIT"
    },
    "node_modules/@vue/reactivity": {
      "version": "3.5.13",
      "resolved": "https://registry.npmjs.org/@vue/reactivity/-/reactivity-3.5.13.tgz",
      "integrity": "sha512-NaCwtw8o48B9I6L1zl2p41OHo/2Z4wqYGGIK1Khu5T7yxrn+ATOixn/Udn2m+6kZKB/J7cuT9DbWWhRxqixACg==",
      "license": "MIT",
      "dependencies": {
        "@vue/shared": "3.5.13"
      }
    },
    "node_modules/@vue/runtime-core": {
      "version": "3.5.13",
      "resolved": "https://registry.npmjs.org/@vue/runtime-core/-/runtime-core-3.5.13.tgz",
      "integrity": "sha512-Fj4YRQ3Az0WTZw1sFe+QDb0aXCerigEpw418pw1HBUKFtnQHWzwojaukAs2X/c9DQz4MQ4bsXTGlcpGxU/RCIw==",
      "license": "MIT",
      "dependencies": {
        "@vue/reactivity": "3.5.13",
        "@vue/shared": "3.5.13"
      }
    },
    "node_modules/@vue/runtime-dom": {
      "version": "3.5.13",
      "resolved": "https://registry.npmjs.org/@vue/runtime-dom/-/runtime-dom-3.5.13.tgz",
      "integrity": "sha512-dLaj94s93NYLqjLiyFzVs9X6dWhTdAlEAciC3Moq7gzAc13VJUdCnjjRurNM6uTLFATRHexHCTu/Xp3eW6yoog==",
      "license": "MIT",
      "dependencies": {
        "@vue/reactivity": "3.5.13",
        "@vue/runtime-core": "3.5.13",
        "@vue/shared": "3.5.13",
        "csstype": "^3.1.3"
      }
    },
    "node_modules/@vue/server-renderer": {
      "version": "3.5.13",
      "resolved": "https://registry.npmjs.org/@vue/server-renderer/-/server-renderer-3.5.13.tgz",
      "integrity": "sha512-wAi4IRJV/2SAW3htkTlB+dHeRmpTiVIK1OGLWV1yeStVSebSQQOwGwIq0D3ZIoBj2C2qpgz5+vX9iEBkTdk5YA==",
      "license": "MIT",
      "dependencies": {
        "@vue/compiler-ssr": "3.5.13",
        "@vue/shared": "3.5.13"
      },
      "peerDependencies": {
        "vue": "3.5.13"
      }
    },
    "node_modules/@vue/shared": {
      "version": "3.5.13",
      "resolved": "https://registry.npmjs.org/@vue/shared/-/shared-3.5.13.tgz",
      "integrity": "sha512-/hnE/qP5ZoGpol0a5mDi45bOd7t3tjYJBjsgCsivow7D48cJeV5l05RD82lPqi7gRiphZM37rnhW1l6ZoCNNnQ==",
      "license": "MIT"
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT"
    },
    "node_modules/axios": {
      "version": "1.9.0",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.9.0.tgz",
      "integrity": "sha512-re4CqKTJaURpzbLHtIi6XpDv20/CnpXOtjRY5/CU32L8gU8ek9UIivcfvSWvmKEngmVbrUtPpdDwWDWL7DNHvg==",
      "license": "MIT",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.0",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/csstype": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.1.3.tgz",
      "integrity": "sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==",
      "license": "MIT"
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/entities": {
      "version": "4.5.0",
      "resolved": "https://registry.npmjs.org/entities/-/entities-4.5.0.tgz",
      "integrity": "sha512-V0hjH4dGPh9Ao5p0MoRY6BVqtwCjhz6vI5LT8AJ55H+4g9/4vbHx1I54fS0XuclLhDHArPQCiMjDxjaL8fPxhw==",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.12"
      },
      "funding": {
        "url": "https://github.com/fb55/entities?sponsor=1"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/esbuild": {
      "version": "0.25.3",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.25.3.tgz",
      "integrity": "sha512-qKA6Pvai73+M2FtftpNKRxJ78GIjmFXFxd/1DVBqGo/qNhLSfv+G12n9pNoWdytJC8U00TrViOwpjT0zgqQS8Q==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=18"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.25.3",
        "@esbuild/android-arm": "0.25.3",
        "@esbuild/android-arm64": "0.25.3",
        "@esbuild/android-x64": "0.25.3",
        "@esbuild/darwin-arm64": "0.25.3",
        "@esbuild/darwin-x64": "0.25.3",
        "@esbuild/freebsd-arm64": "0.25.3",
        "@esbuild/freebsd-x64": "0.25.3",
        "@esbuild/linux-arm": "0.25.3",
        "@esbuild/linux-arm64": "0.25.3",
        "@esbuild/linux-ia32": "0.25.3",
        "@esbuild/linux-loong64": "0.25.3",
        "@esbuild/linux-mips64el": "0.25.3",
        "@esbuild/linux-ppc64": "0.25.3",
        "@esbuild/linux-riscv64": "0.25.3",
        "@esbuild/linux-s390x": "0.25.3",
        "@esbuild/linux-x64": "0.25.3",
        "@esbuild/netbsd-arm64": "0.25.3",
        "@esbuild/netbsd-x64": "0.25.3",
        "@esbuild/openbsd-arm64": "0.25.3",
        "@esbuild/openbsd-x64": "0.25.3",
        "@esbuild/sunos-x64": "0.25.3",
        "@esbuild/win32-arm64": "0.25.3",
        "@esbuild/win32-ia32": "0.25.3",
        "@esbuild/win32-x64": "0.25.3"
      }
    },
    "node_modules/estree-walker": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/estree-walker/-/estree-walker-2.0.2.tgz",
      "integrity": "sha512-Rfkk/Mp/DL7JVje3u18FxFujQlTNR2q6QfMSMB7AvCBx91NGj/ba3kCfza0f6dVDbw7YlRf/nDrn7pQrCCyQ/w==",
      "license": "MIT"
    },
    "node_modules/fdir": {
      "version": "6.4.4",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.4.4.tgz",
      "integrity": "sha512-1NZP+GK4GfuAv3PqKvxQRDMjdSRZjnkq7KfhlNrCNNlZ0ygQFpebfrnfnq/W7fpUnAv9aGWmY1zKx7FYL3gwhg==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/follow-redirects": {
      "version": "1.15.9",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.9.tgz",
      "integrity": "sha512-gew4GsXizNgdoRyqmyfMHyAmXsZDk6mHkSxZFCzW9gwlbtOW44CDtYavM+y+72qD/Vq2l550kMF52DT8fOLJqQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/form-data": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.2.tgz",
      "integrity": "sha512-hGfm/slu0ZabnNt4oaRZ6uREyfCj6P4fT/n6A1rGV+Z0VdGXjfOhVUpkn6qVQONHGIFwmveGXyDs75+nr6FM8w==",
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/magic-string": {
      "version": "0.30.17",
      "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.30.17.tgz",
      "integrity": "sha512-sNPKHvyjVf7gyjwS4xGTaW/mCnF8wnjtifKBEhxfZ7E/S8tQ0rssrwGNn6q8JH/ohItJfSQp9mBtQYuTlH5QnA==",
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0"
      }
    },
    "node_modules/marked": {
      "version": "15.0.11",
      "resolved": "https://registry.npmjs.org/marked/-/marked-15.0.11.tgz",
      "integrity": "sha512-1BEXAU2euRCG3xwgLVT1y0xbJEld1XOrmRJpUwRCcy7rxhSCwMrmEu9LXoPhHSCJG41V7YcQ2mjKRr5BA3ITIA==",
      "license": "MIT",
      "bin": {
        "marked": "bin/marked.js"
      },
      "engines": {
        "node": ">= 18"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.2.tgz",
      "integrity": "sha512-M7BAV6Rlcy5u+m6oPhAPFgJTzAioX/6B0DxyvDlo9l8+T3nLKbrczg2WLUyzd45L8RqfUMyGPzekbMvX2Ldkwg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/postcss": {
      "version": "8.5.3",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.3.tgz",
      "integrity": "sha512-dle9A3yYxlBSrt8Fu+IpjGT8SY8hN0mlaA6GY8t0P5PjIOZemULz/E2Bnm/2dcUOena75OTNkHI76uZBNUUq3A==",
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.8",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "license": "MIT"
    },
    "node_modules/rollup": {
      "version": "4.40.0",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.40.0.tgz",
      "integrity": "sha512-Noe455xmA96nnqH5piFtLobsGbCij7Tu+tb3c1vYjNbTkfzGqXqQXG3wJaYXkRZuQ0vEYN4bhwg7QnIrqB5B+w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "1.0.7"
      },
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "@rollup/rollup-android-arm-eabi": "4.40.0",
        "@rollup/rollup-android-arm64": "4.40.0",
        "@rollup/rollup-darwin-arm64": "4.40.0",
        "@rollup/rollup-darwin-x64": "4.40.0",
        "@rollup/rollup-freebsd-arm64": "4.40.0",
        "@rollup/rollup-freebsd-x64": "4.40.0",
        "@rollup/rollup-linux-arm-gnueabihf": "4.40.0",
        "@rollup/rollup-linux-arm-musleabihf": "4.40.0",
        "@rollup/rollup-linux-arm64-gnu": "4.40.0",
        "@rollup/rollup-linux-arm64-musl": "4.40.0",
        "@rollup/rollup-linux-loongarch64-gnu": "4.40.0",
        "@rollup/rollup-linux-powerpc64le-gnu": "4.40.0",
        "@rollup/rollup-linux-riscv64-gnu": "4.40.0",
        "@rollup/rollup-linux-riscv64-musl": "4.40.0",
        "@rollup/rollup-linux-s390x-gnu": "4.40.0",
        "@rollup/rollup-linux-x64-gnu": "4.40.0",
        "@rollup/rollup-linux-x64-musl": "4.40.0",
        "@rollup/rollup-win32-arm64-msvc": "4.40.0",
        "@rollup/rollup-win32-ia32-msvc": "4.40.0",
        "@rollup/rollup-win32-x64-msvc": "4.40.0",
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/tinyglobby": {
      "version": "0.2.13",
      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.13.tgz",
      "integrity": "sha512-mEwzpUgrLySlveBwEVDMKk5B57bhLPYovRfPAXD5gA/98Opn0rCDj3GtLwFvCvH5RK9uPCExUROW5NjDwvqkxw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fdir": "^6.4.4",
        "picomatch": "^4.0.2"
      },
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/SuperchupuDev"
      }
    },
    "node_modules/vite": {
      "version": "6.3.3",
      "resolved": "https://registry.npmjs.org/vite/-/vite-6.3.3.tgz",
      "integrity": "sha512-5nXH+QsELbFKhsEfWLkHrvgRpTdGJzqOZ+utSdmPTvwHmvU6ITTm3xx+mRusihkcI8GeC7lCDyn3kDtiki9scw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "esbuild": "^0.25.0",
        "fdir": "^6.4.4",
        "picomatch": "^4.0.2",
        "postcss": "^8.5.3",
        "rollup": "^4.34.9",
        "tinyglobby": "^0.2.13"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^18.0.0 || ^20.0.0 || >=22.0.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^18.0.0 || ^20.0.0 || >=22.0.0",
        "jiti": ">=1.21.0",
        "less": "*",
        "lightningcss": "^1.21.0",
        "sass": "*",
        "sass-embedded": "*",
        "stylus": "*",
        "sugarss": "*",
        "terser": "^5.16.0",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "jiti": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/vue": {
      "version": "3.5.13",
      "resolved": "https://registry.npmjs.org/vue/-/vue-3.5.13.tgz",
      "integrity": "sha512-wmeiSMxkZCSc+PM2w2VRsOYAZC8GdipNFRTsLSfodVqI9mbejKeXEGr8SckuLnrQPGe3oJN5c3K0vpoU9q/wCQ==",
      "license": "MIT",
      "dependencies": {
        "@vue/compiler-dom": "3.5.13",
        "@vue/compiler-sfc": "3.5.13",
        "@vue/runtime-dom": "3.5.13",
        "@vue/server-renderer": "3.5.13",
        "@vue/shared": "3.5.13"
      },
      "peerDependencies": {
        "typescript": "*"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/vue-router": {
      "version": "4.5.0",
      "resolved": "https://registry.npmjs.org/vue-router/-/vue-router-4.5.0.tgz",
      "integrity": "sha512-HDuk+PuH5monfNuY+ct49mNmkCRK4xJAV9Ts4z9UFc4rzdDnxQLyCMGGc8pKhZhHTVzfanpNwB/lwqevcBwI4w==",
      "license": "MIT",
      "dependencies": {
        "@vue/devtools-api": "^6.6.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/posva"
      },
      "peerDependencies": {
        "vue": "^3.2.0"
      }
    },
    "node_modules/vuex": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/vuex/-/vuex-4.1.0.tgz",
      "integrity": "sha512-hmV6UerDrPcgbSy9ORAtNXDr9M4wlNP4pEFKye4ujJF8oqgFFuxDCdOLS3eNoRTtq5O3hoBDh9Doj1bQMYHRbQ==",
      "license": "MIT",
      "dependencies": {
        "@vue/devtools-api": "^6.0.0-beta.11"
      },
      "peerDependencies": {
        "vue": "^3.2.0"
      }
    }
  }
}


================================================================================

--- File: psychology-app-new\package.json ---
{
  "name": "psychology-app-new",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "axios": "^1.9.0",
    "marked": "^15.0.11",
    "vue": "^3.5.13",
    "vue-router": "^4.5.0",
    "vuex": "^4.1.0"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^5.2.2",
    "vite": "^6.3.1"
  }
}


================================================================================

--- File: psychology-app-new\vite.config.js ---
// psychology-app-new/vite.config.js
import { defineConfig } from 'vite';
import vue from '@vitejs/plugin-vue';
import path from 'path';

// 将您后端服务器的局域网 IP 地址放在这里
// 这个地址应该是您电脑的 IP 地址，手机等设备可以通过它访问到电脑
// 您可以通过 ipconfig (Windows) 或 ifconfig/ip a (macOS/Linux) 命令获取
const VITE_BACKEND_TARGET_IP = '192.168.43.190'; // <-- 在这里填入您电脑的局域网IP地址

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src')
    }
  },
  server: {
    host: '0.0.0.0', // 保持 0.0.0.0，以便前端服务可以在局域网被访问
    proxy: {
      // 将所有以 /api 开头的请求代理到后端
      '/api': {
        // --- 关键修改：使用IP地址作为代理目标 ---
        target: `http://${VITE_BACKEND_TARGET_IP}:8000`,
        // ------------------------------------------
        changeOrigin: true, // 必须设置为 true
        // 可选：打印代理请求日志，方便调试
        configure: (proxy, options) => {
          proxy.on('proxyReq', (proxyReq, req, res) => {
            console.log(`[Vite Proxy] Forwarding request: ${req.method} ${req.url} -> ${options.target}${proxyReq.path}`);
          });
        }
      },
      // SSE (Server-Sent Events) 也需要代理
      '/sse': {
        target: `http://${VITE_BACKEND_TARGET_IP}:8000`,
        changeOrigin: true,
        ws: false, // SSE 不是 WebSocket
      }
    }
  }
});

================================================================================

--- File: psychology-app-new\dist-app\index.html ---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + Vue</title>
    <script type="module" crossorigin src="/assets/index-CTufck70.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-CGTHoD7k.css">
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>


================================================================================

--- File: psychology-app-new\dist-app\assets\index-CGTHoD7k.css ---
:root{--primary-color: #4a6fa5;--secondary-color: #61a0af;--accent-color: #8bbccc;--text-color: #333;--light-bg: #f5f9fc;--error-color: #e74c3c;--success-color: #2ecc71;--border-radius: 8px;--box-shadow: 0 2px 10px rgba(0, 0, 0, .1);--transition-speed: .3s}*{margin:0;padding:0;box-sizing:border-box}body{font-family:PingFang SC,Helvetica Neue,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:var(--light-bg);color:var(--text-color);font-size:16px;line-height:1.5;overflow-x:hidden}.page-container{min-height:100vh;padding:16px 16px 70px;max-width:100%;overflow-x:hidden}.card{background-color:#fff;border-radius:var(--border-radius);padding:16px;margin-bottom:16px;box-shadow:var(--box-shadow)}.form-group{margin-bottom:16px}label{display:block;margin-bottom:8px;font-weight:500}input,select,textarea{width:100%;padding:12px;border:1px solid #ddd;border-radius:var(--border-radius);font-size:16px;transition:border-color var(--transition-speed)}input:focus,select:focus,textarea:focus{border-color:var(--primary-color);outline:none}.btn{display:inline-block;padding:12px 20px;background-color:var(--primary-color);color:#fff;border:none;border-radius:var(--border-radius);font-size:16px;font-weight:500;cursor:pointer;transition:background-color var(--transition-speed);text-align:center;text-decoration:none}.btn:hover{background-color:#3c5a84}.btn-secondary{background-color:var(--secondary-color)}.btn-secondary:hover{background-color:#4f828e}.error-message{color:var(--error-color);font-size:14px;margin-top:4px}.success-message{color:var(--success-color);font-size:14px;margin-top:4px}.page-enter-active,.page-leave-active{transition:opacity .5s,transform .5s}.page-enter-from{opacity:0;transform:translate(100%)}.page-leave-to{opacity:0;transform:translate(-100%)}.loading-spinner{width:50px;height:50px;border:5px solid var(--light-bg);border-top:5px solid var(--primary-color);border-radius:50%;animation:spin 1s linear infinite;margin:20px auto}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.fade-enter-active,.fade-leave-active{transition:opacity .5s}.fade-enter-from,.fade-leave-to{opacity:0}.markdown-content{line-height:1.6}.markdown-content h1,.markdown-content h2,.markdown-content h3,.markdown-content h4{margin-top:1.5em;margin-bottom:.5em}.markdown-content p{margin-bottom:1em}.markdown-content ul,.markdown-content ol{margin-bottom:1em;padding-left:2em}.login-page[data-v-fab92b12]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;padding:20px;position:relative;overflow:hidden}.tech-circles[data-v-fab92b12]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.circle[data-v-fab92b12]{position:absolute;border-radius:50%;opacity:.05;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color))}.circle-1[data-v-fab92b12]{width:500px;height:500px;top:-100px;right:-100px}.circle-2[data-v-fab92b12]{width:300px;height:300px;bottom:-50px;left:-50px}.floating-icons[data-v-fab92b12]{position:absolute;top:0;left:0;width:100%;height:100%}.icon[data-v-fab92b12]{position:absolute;color:var(--primary-color);opacity:.1;filter:drop-shadow(0 0 5px var(--primary-color))}.icon-1[data-v-fab92b12]{top:15%;left:10%;font-size:40px;animation:float 4s ease-in-out infinite}.icon-2[data-v-fab92b12]{top:30%;right:15%;font-size:30px;animation:float 5s ease-in-out infinite 1s}.icon-3[data-v-fab92b12]{bottom:20%;left:20%;font-size:36px;animation:float 6s ease-in-out infinite .5s}.icon-4[data-v-fab92b12]{bottom:30%;right:10%;font-size:42px;animation:float 7s ease-in-out infinite 1.5s}.logo-container[data-v-fab92b12]{text-align:center;margin-bottom:40px;animation:float 3s ease-in-out infinite}.emblem-image[data-v-fab92b12]{width:90px;height:auto;margin-bottom:16px;filter:drop-shadow(0 0 10px rgba(33,150,243,.5))}h1[data-v-fab92b12]{font-size:28px;color:var(--primary-color);font-family:var(--heading-font);letter-spacing:2px;position:relative}.tech-badge[data-v-fab92b12]{font-size:14px;background:var(--accent-color);color:#fff;padding:2px 6px;border-radius:4px;position:relative;top:-10px;margin-left:5px;font-family:var(--heading-font)}.login-card[data-v-fab92b12]{width:100%;max-width:400px;padding:30px;background:#ffffffe6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(33,150,243,.2)}.card-header[data-v-fab92b12]{display:flex;align-items:center;justify-content:center;margin-bottom:24px}.card-header i[data-v-fab92b12]{font-size:28px;color:var(--primary-color);margin-right:12px}h2[data-v-fab92b12]{margin:0;color:var(--primary-dark);font-size:22px}.form-group[data-v-fab92b12]{margin-bottom:20px}label[data-v-fab92b12]{display:flex;align-items:center;margin-bottom:8px;font-weight:500;color:var(--text-secondary)}.form-icon[data-v-fab92b12]{margin-right:8px;color:var(--primary-color)}.password-input-container[data-v-fab92b12]{position:relative}.toggle-password[data-v-fab92b12]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:0;font-size:16px}.toggle-password[data-v-fab92b12]:hover{color:var(--primary-color)}.btn-icon[data-v-fab92b12]{margin-right:8px}.error-message[data-v-fab92b12]{display:flex;align-items:center;background-color:#ff52521a;border-left:4px solid var(--error-color);padding:12px;margin-bottom:20px;border-radius:var(--border-radius)}.error-message i[data-v-fab92b12]{color:var(--error-color);margin-right:10px;font-size:16px}.register-link[data-v-fab92b12]{margin-top:25px;text-align:center;font-size:14px;color:var(--text-secondary)}.register-link a[data-v-fab92b12]{color:var(--primary-color);text-decoration:none;font-weight:600;display:inline-flex;align-items:center;margin-left:5px}.register-link a i[data-v-fab92b12]{margin-right:5px}.register-link a[data-v-fab92b12]:hover{color:var(--primary-dark);text-decoration:underline}.fa-project-diagram[data-v-fab92b12]:before{content:""}.nav-bar[data-v-2bd0dc8b]{display:flex;justify-content:space-between;align-items:center;height:60px;background:linear-gradient(90deg,var(--primary-dark),var(--primary-color));color:#fff;position:fixed;top:0;left:0;right:0;z-index:100;padding:0 16px;box-shadow:0 2px 10px #0000001a}.nav-left[data-v-2bd0dc8b]{display:flex;align-items:center;width:60px}.back-button[data-v-2bd0dc8b]{width:36px;height:36px;border-radius:50%;background-color:#ffffff1a;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background-color var(--transition-speed)}.back-button[data-v-2bd0dc8b]:hover{background-color:#fff3}.nav-title[data-v-2bd0dc8b]{display:flex;align-items:center;justify-content:center;flex:1;font-size:20px;font-weight:500;font-family:var(--heading-font);letter-spacing:1px}.nav-icon[data-v-2bd0dc8b]{margin-right:10px;color:var(--secondary-light);font-size:22px;animation:glow 2s infinite}.nav-right[data-v-2bd0dc8b]{display:flex;justify-content:flex-end;width:60px}.status-indicator[data-v-2bd0dc8b]{display:flex;align-items:center;background-color:#ffffff1a;border-radius:12px;padding:4px 8px}.pulse-dot[data-v-2bd0dc8b]{width:8px;height:8px;background-color:var(--secondary-color);border-radius:50%;margin-right:6px;animation:pulse 2s infinite}.status-text[data-v-2bd0dc8b]{font-size:12px;font-weight:600;letter-spacing:1px}.register-page[data-v-85ecef0e]{padding-top:70px;padding-bottom:40px;position:relative;overflow:hidden}.register-card[data-v-85ecef0e]{margin:20px auto;max-width:500px;padding:30px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(33,150,243,.2);position:relative;z-index:10}.card-header[data-v-85ecef0e]{display:flex;align-items:center;justify-content:center;margin-bottom:24px}.card-header i[data-v-85ecef0e]{font-size:28px;color:var(--primary-color);margin-right:12px}h2[data-v-85ecef0e]{margin:0;color:var(--primary-dark);font-size:22px;font-family:var(--heading-font)}.form-group[data-v-85ecef0e]{margin-bottom:22px;position:relative}label[data-v-85ecef0e]{display:flex;align-items:center;margin-bottom:8px;font-weight:500;color:var(--text-secondary)}.form-icon[data-v-85ecef0e]{margin-right:8px;color:var(--primary-color)}.password-input-container[data-v-85ecef0e]{position:relative}.toggle-password[data-v-85ecef0e]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:0;font-size:16px;z-index:1}.toggle-password[data-v-85ecef0e]:hover{color:var(--primary-color)}.input-validation[data-v-85ecef0e]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:var(--success-color)}.password-validation[data-v-85ecef0e]{right:40px}.validation-icon[data-v-85ecef0e]{animation:fadeIn-85ecef0e .3s}.input-valid[data-v-85ecef0e]{border-color:var(--success-color)!important}.input-invalid[data-v-85ecef0e]{border-color:var(--error-color)!important}.error-message[data-v-85ecef0e]{display:flex;align-items:center;padding:12px;margin-top:8px;margin-bottom:16px;background-color:#ff52521a;border-left:4px solid var(--error-color);color:var(--error-color);border-radius:var(--border-radius);font-size:14px}.error-message i[data-v-85ecef0e]{margin-right:10px}.success-message[data-v-85ecef0e]{display:flex;align-items:center;padding:12px;margin-bottom:16px;background-color:#4caf501a;border-left:4px solid var(--success-color);color:var(--success-color);border-radius:var(--border-radius);font-weight:500}.success-message i[data-v-85ecef0e]{margin-right:10px}.btn-icon[data-v-85ecef0e]{margin-right:8px}.login-link[data-v-85ecef0e]{margin-top:25px;text-align:center;font-size:14px;color:var(--text-secondary)}.login-link a[data-v-85ecef0e]{color:var(--primary-color);text-decoration:none;font-weight:600;display:inline-flex;align-items:center;margin-left:5px}.login-link a i[data-v-85ecef0e]{margin-right:5px}.login-link a[data-v-85ecef0e]:hover{color:var(--primary-dark);text-decoration:underline}@keyframes fadeIn-85ecef0e{0%{opacity:0}to{opacity:1}}.user-info-page[data-v-03e884e5]{padding-top:70px;padding-bottom:40px}.info-card[data-v-03e884e5]{margin:20px auto;max-width:800px;padding:30px;background:#fffffff2}.card-header[data-v-03e884e5]{display:flex;align-items:center;justify-content:center;margin-bottom:30px}.card-header i[data-v-03e884e5]{font-size:28px;color:var(--primary-color);margin-right:12px}h2[data-v-03e884e5]{margin:0;color:var(--primary-dark);font-size:22px;font-family:var(--heading-font)}.form-section[data-v-03e884e5]{margin-bottom:30px;border:1px solid rgba(33,150,243,.1);border-radius:var(--border-radius);padding:20px;background-color:#f8f9fa80;transition:box-shadow .3s ease}.form-section[data-v-03e884e5]:hover{box-shadow:0 5px 15px #2196f31a}.section-title[data-v-03e884e5]{display:flex;align-items:center;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid rgba(33,150,243,.2);color:var(--primary-color);font-weight:600;font-size:18px;font-family:var(--heading-font)}.section-title i[data-v-03e884e5]{margin-right:10px}.form-row[data-v-03e884e5]{display:flex;gap:20px;margin-bottom:15px}.form-group[data-v-03e884e5]{margin-bottom:20px;position:relative;flex:1}.form-group-half[data-v-03e884e5]{flex:.5}.form-icon[data-v-03e884e5]{margin-right:8px;color:var(--primary-color)}.required[data-v-03e884e5]{color:var(--error-color);margin-left:4px}.select-wrapper[data-v-03e884e5]{position:relative}.select-arrow[data-v-03e884e5]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:var(--primary-color);pointer-events:none;transition:transform .3s}select:focus+.select-arrow[data-v-03e884e5]{transform:translateY(-50%) rotate(180deg)}.radio-group[data-v-03e884e5]{display:flex;gap:20px}.radio-label[data-v-03e884e5]{display:flex;align-items:center;cursor:pointer}.radio-label input[data-v-03e884e5]{display:none}.radio-text[data-v-03e884e5]{position:relative;padding-left:30px}.radio-text[data-v-03e884e5]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:20px;height:20px;border:2px solid rgba(33,150,243,.3);border-radius:50%;transition:all .2s}.radio-label input:checked+.radio-text[data-v-03e884e5]:before{border-color:var(--primary-color);background-color:#2196f31a}.radio-text[data-v-03e884e5]:after{content:"";position:absolute;left:7px;top:50%;transform:translateY(-50%) scale(0);width:10px;height:10px;border-radius:50%;background-color:var(--primary-color);transition:transform .2s}.radio-label input:checked+.radio-text[data-v-03e884e5]:after{transform:translateY(-50%) scale(1)}.error-message[data-v-03e884e5]{display:flex;align-items:center;padding:8px 12px;margin-top:8px;background-color:#ff52521a;border-left:4px solid var(--error-color);color:var(--error-color);border-radius:var(--border-radius);font-size:14px}.error-message i[data-v-03e884e5]{margin-right:8px}.global-error[data-v-03e884e5]{margin-bottom:20px}.btn i[data-v-03e884e5]{margin-right:8px}.scale-selector[data-v-a8f1925c]{margin-bottom:30px;background-color:#fff;border-radius:var(--border-radius);padding:20px;box-shadow:var(--box-shadow);border:1px solid rgba(33,150,243,.1);transition:transform var(--transition-speed),box-shadow var(--transition-speed)}.scale-selector[data-v-a8f1925c]:hover{transform:translateY(-5px);box-shadow:0 8px 30px #2196f326}.icon-left[data-v-a8f1925c]{margin-right:8px;color:var(--primary-color)}label[data-v-a8f1925c]{display:flex;align-items:center;font-size:18px;font-weight:600;color:var(--primary-color);margin-bottom:16px;font-family:var(--heading-font)}.select-wrapper[data-v-a8f1925c]{position:relative;margin-bottom:16px}select[data-v-a8f1925c]{width:100%;padding:14px 18px;border:2px solid rgba(33,150,243,.2);border-radius:var(--border-radius);background-color:#fffc;font-size:16px;-webkit-appearance:none;-moz-appearance:none;appearance:none;transition:all var(--transition-speed);color:var(--text-primary);font-family:var(--body-font);cursor:pointer}select[data-v-a8f1925c]:focus{border-color:var(--primary-color);box-shadow:0 0 0 3px #2196f333;outline:none}.select-arrow[data-v-a8f1925c]{position:absolute;right:16px;top:50%;transform:translateY(-50%);color:var(--primary-color);pointer-events:none;transition:transform var(--transition-speed)}select:focus+.select-arrow[data-v-a8f1925c]{transform:translateY(-50%) rotate(180deg)}.scale-info[data-v-a8f1925c]{display:flex;align-items:center;padding:10px 16px;background-color:#2196f30d;border-radius:var(--border-radius);color:var(--primary-color);font-size:14px}.scale-info i[data-v-a8f1925c]{margin-right:8px;animation:pulse 2s infinite}.question-item[data-v-2ce7a956]{background-color:#fff;border-radius:var(--border-radius);padding:20px;margin-bottom:30px;box-shadow:var(--box-shadow);border:1px solid rgba(33,150,243,.1);position:relative;overflow:hidden;transition:transform var(--transition-speed),box-shadow var(--transition-speed)}.question-item[data-v-2ce7a956]:hover{transform:translateY(-5px);box-shadow:0 8px 30px #2196f326}.question-header[data-v-2ce7a956]{display:flex;margin-bottom:20px;align-items:flex-start}.question-number[data-v-2ce7a956]{width:30px;height:30px;background-color:var(--primary-color);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;margin-right:15px;flex-shrink:0;font-family:var(--heading-font);box-shadow:0 2px 10px #2196f34d}.question-text[data-v-2ce7a956]{font-size:18px;line-height:1.5;color:var(--text-primary);font-weight:500}.options[data-v-2ce7a956]{display:flex;flex-direction:column;gap:12px}.option[data-v-2ce7a956]{display:flex;align-items:center;padding:16px;border-radius:var(--border-radius);background-color:#2196f308;cursor:pointer;transition:all var(--transition-speed);position:relative;overflow:hidden}.option[data-v-2ce7a956]:hover{background-color:#2196f314}.option.selected[data-v-2ce7a956]{background-color:#2196f31f}.option-select-indicator[data-v-2ce7a956]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;margin-right:16px;color:var(--primary-color);font-size:24px;transition:transform .3s}.option.selected .option-select-indicator[data-v-2ce7a956]{transform:scale(1.2)}.option.selected .option-select-indicator i[data-v-2ce7a956]{animation:pulse 1s}.option-text[data-v-2ce7a956]{font-size:16px;color:var(--text-primary);flex:1;transition:transform .3s}.option.selected .option-text[data-v-2ce7a956]{font-weight:500;color:var(--primary-dark)}.option-highlight[data-v-2ce7a956]{position:absolute;left:0;top:0;width:4px;height:100%;background-color:transparent;transition:background-color .3s}.option.selected .option-highlight[data-v-2ce7a956]{background-color:var(--primary-color)}.questionnaire-page[data-v-7cd58e3a]{padding-top:70px;padding-bottom:40px}.section-header[data-v-7cd58e3a]{display:flex;align-items:center;margin-bottom:20px;padding:0 16px}.section-icon[data-v-7cd58e3a]{font-size:24px;color:var(--primary-color);margin-right:12px}h2[data-v-7cd58e3a]{margin:0;font-size:20px;color:var(--primary-color);font-family:var(--heading-font)}.optional-tag[data-v-7cd58e3a]{font-size:14px;color:var(--text-secondary);opacity:.7;font-weight:400;font-family:var(--body-font)}.scale-section[data-v-7cd58e3a],.image-upload-section[data-v-7cd58e3a],.questions-section[data-v-7cd58e3a]{margin-bottom:40px;padding:0 16px}.upload-container[data-v-7cd58e3a]{border:2px dashed rgba(33,150,243,.3);border-radius:var(--border-radius);padding:40px 20px;text-align:center;cursor:pointer;transition:all var(--transition-speed);background-color:#ffffffb3}.upload-container[data-v-7cd58e3a]:hover{border-color:var(--primary-color);background-color:#2196f30d;transform:translateY(-5px)}.file-input[data-v-7cd58e3a]{display:none}.upload-placeholder[data-v-7cd58e3a]{color:var(--text-secondary)}.upload-icon[data-v-7cd58e3a]{font-size:40px;margin-bottom:16px;color:var(--primary-color);opacity:.7}.image-preview-container[data-v-7cd58e3a]{position:relative;display:inline-block}.image-preview[data-v-7cd58e3a]{max-width:100%;max-height:200px;border-radius:var(--border-radius);box-shadow:var(--box-shadow)}.remove-image[data-v-7cd58e3a]{position:absolute;top:-10px;right:-10px;width:30px;height:30px;background-color:var(--error-color);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform var(--transition-speed)}.remove-image[data-v-7cd58e3a]:hover{transform:scale(1.1)}.loading-container[data-v-7cd58e3a]{display:flex;flex-direction:column;align-items:center;margin:30px 0}.loading-spinner[data-v-7cd58e3a]{width:40px;height:40px;border:4px solid rgba(33,150,243,.1);border-top:4px solid var(--primary-color);border-radius:50%;animation:rotate 1s linear infinite;margin-bottom:16px}.error-message[data-v-7cd58e3a]{display:flex;align-items:center;padding:16px;margin:20px 16px;background-color:#ff52521a;border-left:4px solid var(--error-color);color:var(--error-color);border-radius:var(--border-radius)}.error-message i[data-v-7cd58e3a]{margin-right:10px;font-size:18px}.action-buttons[data-v-7cd58e3a]{margin:40px 16px}.btn i[data-v-7cd58e3a]{margin-right:8px}.loading-tip[data-v-98d402a0]{background:linear-gradient(135deg,var(--card-bg),rgba(255,255,255,.9));border-radius:var(--border-radius);box-shadow:var(--box-shadow);padding:20px;margin:20px auto;max-width:90%;position:relative;border-left:4px solid var(--secondary-color);transform:perspective(1000px) rotateX(0);transition:transform .5s}.loading-tip[data-v-98d402a0]:hover{transform:perspective(1000px) rotateX(2deg);box-shadow:var(--glow-effect)}.tip-header[data-v-98d402a0]{display:flex;align-items:center;margin-bottom:16px}.tip-icon[data-v-98d402a0]{font-size:24px;color:var(--secondary-color);margin-right:16px;animation:pulse 2s infinite}.tip-title-group[data-v-98d402a0]{flex:1}.tip-category[data-v-98d402a0]{color:var(--secondary-color);font-size:14px;font-weight:600;margin-bottom:4px;text-transform:uppercase;letter-spacing:1px}.tip-title[data-v-98d402a0]{font-size:18px;font-weight:600;color:var(--primary-color);font-family:var(--heading-font)}.tip-content[data-v-98d402a0]{line-height:1.6;font-size:16px;color:var(--text-secondary);padding-left:40px}.tip-decoration[data-v-98d402a0]{display:flex;justify-content:flex-end;margin-top:16px}.tip-dots[data-v-98d402a0]{display:flex;gap:4px}.tip-dot[data-v-98d402a0]{width:8px;height:8px;border-radius:50%;background-color:var(--secondary-color);opacity:.5}.tip-dot[data-v-98d402a0]:nth-child(1){animation:pulse 2s infinite}.tip-dot[data-v-98d402a0]:nth-child(2){animation:pulse 2s infinite .3s}.tip-dot[data-v-98d402a0]:nth-child(3){animation:pulse 2s infinite .6s}.loading-page[data-v-e0e477c3]{padding-top:60px;min-height:100vh;background-color:var(--background-color);background-image:radial-gradient(circle at 10% 20%,rgba(33,150,243,.05) 0%,transparent 25%),radial-gradient(circle at 90% 80%,rgba(3,218,198,.05) 0%,transparent 25%)}.loading-content[data-v-e0e477c3]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:30px 20px;min-height:calc(100vh - 60px)}.loading-visualization[data-v-e0e477c3]{margin-bottom:40px;position:relative}.brain-scan[data-v-e0e477c3]{position:relative;width:150px;height:150px;display:flex;align-items:center;justify-content:center;margin:0 auto 40px}.brain-icon[data-v-e0e477c3]{font-size:80px;color:var(--primary-color);z-index:2;animation:float 3s ease-in-out infinite;filter:drop-shadow(0 0 10px rgba(33,150,243,.5))}.scan-line[data-v-e0e477c3]{position:absolute;top:0;left:0;width:100%;height:5px;background:linear-gradient(90deg,transparent,var(--secondary-color),transparent);animation:scanLine-e0e477c3 2s ease-in-out infinite;z-index:1;opacity:.7;box-shadow:0 0 10px var(--secondary-color)}.scan-ring[data-v-e0e477c3]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:120px;height:120px;border:2px solid rgba(3,218,198,.3);border-radius:50%;animation:pulse 2s infinite}.neural-network[data-v-e0e477c3]{display:flex;position:relative;width:200px;height:100px;margin:0 auto}.neural-node[data-v-e0e477c3]{position:absolute;width:10px;height:10px;background-color:var(--primary-color);border-radius:50%;z-index:2}.node-1[data-v-e0e477c3]{top:10%;left:10%;animation:pulse 2s infinite .1s}.node-2[data-v-e0e477c3]{top:30%;left:30%;animation:pulse 2s infinite .2s}.node-3[data-v-e0e477c3]{top:70%;left:20%;animation:pulse 2s infinite .3s}.node-4[data-v-e0e477c3]{top:50%;left:50%;animation:pulse 2s infinite .4s}.node-5[data-v-e0e477c3]{top:20%;left:70%;animation:pulse 2s infinite .5s}.node-6[data-v-e0e477c3]{top:80%;left:60%;animation:pulse 2s infinite .6s}.node-7[data-v-e0e477c3]{top:40%;left:85%;animation:pulse 2s infinite .7s}.node-8[data-v-e0e477c3]{top:60%;left:15%;animation:pulse 2s infinite .8s}.node-9[data-v-e0e477c3]{top:90%;left:80%;animation:pulse 2s infinite .9s}.neural-line[data-v-e0e477c3]{position:absolute;height:2px;background:linear-gradient(90deg,var(--primary-color),var(--secondary-color));opacity:.3;transform-origin:left center;z-index:1}.line-1[data-v-e0e477c3]{top:15%;left:10%;width:100px;transform:rotate(20deg);animation:pulseLine-e0e477c3 2s infinite .1s}.line-2[data-v-e0e477c3]{top:35%;left:30%;width:70px;transform:rotate(-10deg);animation:pulseLine-e0e477c3 2s infinite .2s}.line-3[data-v-e0e477c3]{top:75%;left:20%;width:120px;transform:rotate(30deg);animation:pulseLine-e0e477c3 2s infinite .3s}.line-4[data-v-e0e477c3]{top:55%;left:50%;width:90px;transform:rotate(5deg);animation:pulseLine-e0e477c3 2s infinite .4s}.line-5[data-v-e0e477c3]{top:25%;left:70%;width:60px;transform:rotate(-25deg);animation:pulseLine-e0e477c3 2s infinite .5s}.line-6[data-v-e0e477c3]{top:85%;left:60%;width:80px;transform:rotate(-15deg);animation:pulseLine-e0e477c3 2s infinite .6s}.line-7[data-v-e0e477c3]{top:45%;left:15%;width:110px;transform:rotate(15deg);animation:pulseLine-e0e477c3 2s infinite .7s}.line-8[data-v-e0e477c3]{top:65%;left:15%;width:100px;transform:rotate(20deg);animation:pulseLine-e0e477c3 2s infinite .8s}.line-9[data-v-e0e477c3]{top:95%;left:30%;width:120px;transform:rotate(10deg);animation:pulseLine-e0e477c3 2s infinite .9s}.line-10[data-v-e0e477c3]{top:15%;left:40%;width:90px;transform:rotate(-20deg);animation:pulseLine-e0e477c3 2s infinite 1s}.line-11[data-v-e0e477c3]{top:55%;left:60%;width:70px;transform:rotate(-10deg);animation:pulseLine-e0e477c3 2s infinite 1.1s}.line-12[data-v-e0e477c3]{top:75%;left:70%;width:60px;transform:rotate(15deg);animation:pulseLine-e0e477c3 2s infinite 1.2s}.loading-text[data-v-e0e477c3]{text-align:center;margin-bottom:30px}h2[data-v-e0e477c3]{font-size:24px;color:var(--primary-color);margin-bottom:16px;font-family:var(--heading-font);display:flex;align-items:center;justify-content:center;gap:10px}.tech-highlight[data-v-e0e477c3]{display:inline-block;background:linear-gradient(135deg,var(--primary-color),var(--accent-color));color:#fff;padding:2px 8px;border-radius:4px;font-size:18px;margin-right:8px}.icon-spin[data-v-e0e477c3]{animation:rotate 4s linear infinite;color:var(--secondary-color);margin-left:10px}.loading-content p[data-v-e0e477c3]{color:var(--text-secondary);min-height:1.5em;font-size:16px;display:flex;align-items:center;justify-content:center;gap:8px}.status-badge[data-v-e0e477c3]{padding:2px 8px;border-radius:12px;font-size:12px;font-weight:600;margin-left:8px}.status-badge.processing[data-v-e0e477c3]{background-color:#2196f31a;color:var(--primary-color);border:1px solid rgba(33,150,243,.3)}.polling-status[data-v-e0e477c3]{font-size:14px;color:var(--text-secondary);margin-top:8px}.success-message[data-v-e0e477c3]{color:var(--success-color)!important;font-weight:500}.redirect-text[data-v-e0e477c3]{opacity:.7;animation:pulse 1s infinite}.progress-container[data-v-e0e477c3]{width:80%;max-width:400px;margin:20px auto 30px}.progress-track[data-v-e0e477c3]{height:8px;background-color:#2196f31a;border-radius:4px;overflow:hidden;position:relative}.progress-value[data-v-e0e477c3]{height:100%;background:linear-gradient(90deg,var(--secondary-color),var(--primary-color));border-radius:4px;transition:width .5s ease;position:relative}.progress-glow[data-v-e0e477c3]{position:absolute;top:0;left:0;width:60px;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.7),transparent);animation:progressGlow-e0e477c3 2s infinite;pointer-events:none}.progress-text[data-v-e0e477c3]{text-align:center;font-size:14px;color:var(--text-secondary);margin-top:8px;font-family:var(--heading-font)}.status-message[data-v-e0e477c3]{display:flex;flex-direction:column;align-items:center;color:#856404;background-color:#fff3cd;border:1px solid #ffeeba;padding:20px;margin-top:20px;margin-bottom:20px;text-align:center;width:90%;max-width:500px;border-radius:var(--border-radius);box-shadow:var(--box-shadow)}.error-icon[data-v-e0e477c3]{color:var(--error-color);font-size:32px;margin-bottom:16px}.error-text[data-v-e0e477c3]{font-size:16px;margin-bottom:16px}.action-buttons[data-v-e0e477c3]{display:flex;gap:10px;margin-top:16px}.fade-enter-active[data-v-e0e477c3],.fade-leave-active[data-v-e0e477c3]{transition:all .5s ease}.fade-enter-from[data-v-e0e477c3],.fade-leave-to[data-v-e0e477c3]{opacity:0;transform:translateY(20px)}@keyframes scanLine-e0e477c3{0%{transform:translateY(0);opacity:0}20%{opacity:1}80%{opacity:1}to{transform:translateY(150px);opacity:0}}@keyframes pulseLine-e0e477c3{0%,to{opacity:.3}50%{opacity:.8}}@keyframes progressGlow-e0e477c3{0%{left:-100px}to{left:100%}}.report-page[data-v-a5d32b77]{padding-top:70px;padding-bottom:40px;background-color:var(--background-color)}.loading-container[data-v-a5d32b77]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 24px;text-align:center}.loading-spinner[data-v-a5d32b77]{width:50px;height:50px;border:4px solid rgba(33,150,243,.1);border-top:4px solid var(--primary-color);border-radius:50%;animation:rotate 1s linear infinite;margin-bottom:20px}.error-container[data-v-a5d32b77]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 24px;text-align:center;margin:20px auto;max-width:500px}.error-icon-container[data-v-a5d32b77]{width:80px;height:80px;background-color:#ff52521a;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:24px}.error-icon[data-v-a5d32b77]{font-size:40px;color:var(--error-color)}.error-container h2[data-v-a5d32b77]{margin-bottom:16px;color:var(--primary-color);font-size:22px}.error-container p[data-v-a5d32b77]{margin-bottom:24px;color:var(--text-secondary)}.action-buttons[data-v-a5d32b77]{display:flex;gap:12px;margin-top:20px}.report-container[data-v-a5d32b77]{max-width:800px;margin:0 auto;padding:0 16px}.report-header[data-v-a5d32b77]{padding:24px;margin-bottom:20px;text-align:center;background:linear-gradient(135deg,#2196f30d,#3f51b50d);border-bottom:2px solid rgba(33,150,243,.1)}.report-title[data-v-a5d32b77]{display:flex;align-items:center;justify-content:center;margin-bottom:20px}.header-icon[data-v-a5d32b77]{font-size:40px;color:var(--primary-color);margin-right:16px;animation:glow 2s infinite}.report-title h2[data-v-a5d32b77]{font-size:24px;color:var(--primary-color);margin:0}.report-meta[data-v-a5d32b77]{display:flex;flex-wrap:wrap;justify-content:center;gap:20px}.meta-item[data-v-a5d32b77]{display:flex;align-items:center;color:var(--text-secondary);font-size:14px}.meta-icon[data-v-a5d32b77]{color:var(--secondary-color);margin-right:8px}.report-body[data-v-a5d32b77]{padding:30px;margin-bottom:20px}.report-content[data-v-a5d32b77]{line-height:1.8;color:var(--text-primary)}[data-v-a5d32b77] .markdown-content h1,[data-v-a5d32b77] .markdown-content h2,[data-v-a5d32b77] .markdown-content h3,[data-v-a5d32b77] .markdown-content h4{margin-top:1.5em;margin-bottom:.8em;color:var(--primary-color);font-family:var(--heading-font)}[data-v-a5d32b77] .markdown-content h1{font-size:1.8em}[data-v-a5d32b77] .markdown-content h2{font-size:1.5em}[data-v-a5d32b77] .markdown-content h3{font-size:1.25em}[data-v-a5d32b77] .markdown-content h4{font-size:1.1em}[data-v-a5d32b77] .markdown-content p{margin-bottom:1em}[data-v-a5d32b77] .markdown-content ul,[data-v-a5d32b77] .markdown-content ol{margin-bottom:1em;padding-left:2em}[data-v-a5d32b77] .markdown-content li{margin-bottom:.5em}[data-v-a5d32b77] .markdown-content strong{font-weight:700;color:var(--primary-dark)}[data-v-a5d32b77] .markdown-content em{font-style:italic}[data-v-a5d32b77] .markdown-content blockquote{border-left:4px solid var(--secondary-color);padding-left:16px;margin-left:0;margin-right:0;font-style:italic;color:var(--text-secondary)}.report-actions[data-v-a5d32b77]{padding:24px;text-align:center}.btn i[data-v-a5d32b77]{margin-right:8px}:root{--primary-color: #2196f3;--primary-light: #6ec6ff;--primary-dark: #0069c0;--secondary-color: #03dac6;--secondary-light: #84ffff;--secondary-dark: #00b686;--accent-color: #ff4081;--error-color: #ff5252;--success-color: #4caf50;--warning-color: #ff9800;--background-color: #f8f9ff;--card-bg: #ffffff;--text-primary: #202124;--text-secondary: #5f6368;--border-radius: 8px;--large-radius: 16px;--box-shadow: 0 4px 20px rgba(33, 150, 243, .1);--glow-effect: 0 0 15px rgba(3, 218, 198, .5);--transition-speed: .3s;--heading-font: "Orbitron", sans-serif;--body-font: "Rajdhani", "Roboto", sans-serif}body{background-color:var(--background-color);background-image:radial-gradient(circle at 10% 20%,rgba(33,150,243,.03) 0%,transparent 20%),radial-gradient(circle at 90% 80%,rgba(3,218,198,.03) 0%,transparent 20%);font-family:var(--body-font);color:var(--text-primary);margin:0;padding:0}h1,h2,h3,h4,h5,h6,.navbar-title{font-family:var(--heading-font);letter-spacing:1px}.card{background-color:var(--card-bg);border-radius:var(--large-radius);box-shadow:var(--box-shadow);border:1px solid rgba(33,150,243,.1);overflow:hidden;transition:transform var(--transition-speed),box-shadow var(--transition-speed)}.card:hover{transform:translateY(-5px);box-shadow:var(--box-shadow),var(--glow-effect)}.btn{background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));border:none;border-radius:var(--border-radius);color:#fff;font-family:var(--heading-font);font-weight:500;letter-spacing:1px;padding:12px 24px;transition:all var(--transition-speed);position:relative;overflow:hidden;cursor:pointer}.btn:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .7s}.btn:hover:not(:disabled):before{left:100%}.btn:hover:not(:disabled){background:linear-gradient(135deg,var(--primary-light),var(--primary-color));box-shadow:0 5px 15px #2196f34d}.btn-secondary{background:linear-gradient(135deg,var(--secondary-color),var(--secondary-dark))}.btn-secondary:hover:not(:disabled){background:linear-gradient(135deg,var(--secondary-light),var(--secondary-color))}.btn:disabled{background:#b0bec5;box-shadow:none;cursor:not-allowed}.btn-small{padding:6px 12px;font-size:14px}.btn-block{display:block;width:100%}input,select,textarea{border:2px solid rgba(33,150,243,.2);border-radius:var(--border-radius);padding:12px 16px;transition:all var(--transition-speed);background-color:#fffc;font-family:var(--body-font);font-size:16px;width:100%;box-sizing:border-box}input:focus,select:focus,textarea:focus{border-color:var(--primary-color);box-shadow:0 0 0 3px #2196f333;outline:none}label{display:block;margin-bottom:8px;font-weight:500;color:var(--text-secondary);font-family:var(--body-font)}.error-message{color:var(--error-color);background-color:#ff52521a;border:1px solid var(--error-color);border-radius:var(--border-radius);padding:10px;margin:8px 0;font-size:14px}.page-container{max-width:1200px;margin:0 auto;padding:0 16px}@keyframes pulse{0%{box-shadow:0 0 #03dac666}70%{box-shadow:0 0 0 10px #03dac600}to{box-shadow:0 0 #03dac600}}@keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-10px)}to{transform:translateY(0)}}@keyframes glow{0%,to{filter:drop-shadow(0 0 5px rgba(33,150,243,.5))}50%{filter:drop-shadow(0 0 15px rgba(33,150,243,.8))}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}


================================================================================

--- File: psychology-app-new\dist-app\assets\index-CTufck70.js ---
var zc=Object.defineProperty;var Gc=(e,t,n)=>t in e?zc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var de=(e,t,n)=>Gc(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function co(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const pe={},mn=[],St=()=>{},Kc=()=>!1,Ks=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),uo=e=>e.startsWith("onUpdate:"),xe=Object.assign,fo=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Wc=Object.prototype.hasOwnProperty,re=(e,t)=>Wc.call(e,t),V=Array.isArray,bn=e=>is(e)==="[object Map]",kn=e=>is(e)==="[object Set]",Jo=e=>is(e)==="[object Date]",W=e=>typeof e=="function",we=e=>typeof e=="string",Et=e=>typeof e=="symbol",he=e=>e!==null&&typeof e=="object",_l=e=>(he(e)||W(e))&&W(e.then)&&W(e.catch),vl=Object.prototype.toString,is=e=>vl.call(e),Qc=e=>is(e).slice(8,-1),wl=e=>is(e)==="[object Object]",po=e=>we(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Vn=co(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ws=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Jc=/-(\w)/g,rt=Ws(e=>e.replace(Jc,(t,n)=>n?n.toUpperCase():"")),Zc=/\B([A-Z])/g,on=Ws(e=>e.replace(Zc,"-$1").toLowerCase()),Qs=Ws(e=>e.charAt(0).toUpperCase()+e.slice(1)),_r=Ws(e=>e?`on${Qs(e)}`:""),Bt=(e,t)=>!Object.is(e,t),Rs=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Sl=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Ps=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Xc=e=>{const t=we(e)?Number(e):NaN;return isNaN(t)?e:t};let Zo;const Js=()=>Zo||(Zo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Zs(e){if(V(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],r=we(s)?nu(s):Zs(s);if(r)for(const o in r)t[o]=r[o]}return t}else if(we(e)||he(e))return e}const Yc=/;(?![^(]*\))/g,eu=/:([^]+)/,tu=/\/\*[^]*?\*\//g;function nu(e){const t={};return e.replace(tu,"").split(Yc).forEach(n=>{if(n){const s=n.split(eu);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ze(e){let t="";if(we(e))t=e;else if(V(e))for(let n=0;n<e.length;n++){const s=Ze(e[n]);s&&(t+=s+" ")}else if(he(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const su="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ru=co(su);function El(e){return!!e||e===""}function ou(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=tn(e[s],t[s]);return n}function tn(e,t){if(e===t)return!0;let n=Jo(e),s=Jo(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Et(e),s=Et(t),n||s)return e===t;if(n=V(e),s=V(t),n||s)return n&&s?ou(e,t):!1;if(n=he(e),s=he(t),n||s){if(!n||!s)return!1;const r=Object.keys(e).length,o=Object.keys(t).length;if(r!==o)return!1;for(const i in e){const l=e.hasOwnProperty(i),a=t.hasOwnProperty(i);if(l&&!a||!l&&a||!tn(e[i],t[i]))return!1}}return String(e)===String(t)}function ho(e,t){return e.findIndex(n=>tn(n,t))}const Rl=e=>!!(e&&e.__v_isRef===!0),le=e=>we(e)?e:e==null?"":V(e)||he(e)&&(e.toString===vl||!W(e.toString))?Rl(e)?le(e.value):JSON.stringify(e,xl,2):String(e),xl=(e,t)=>Rl(t)?xl(e,t.value):bn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,r],o)=>(n[vr(s,o)+" =>"]=r,n),{})}:kn(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>vr(n))}:Et(t)?vr(t):he(t)&&!V(t)&&!wl(t)?String(t):t,vr=(e,t="")=>{var n;return Et(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ke;class Tl{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ke,!t&&Ke&&(this.index=(Ke.scopes||(Ke.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ke;try{return Ke=this,t()}finally{Ke=n}}}on(){Ke=this}off(){Ke=this.parent}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function iu(e){return new Tl(e)}function lu(){return Ke}let be;const wr=new WeakSet;class kl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ke&&Ke.active&&Ke.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wr.has(this)&&(wr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Cl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Xo(this),Il(this);const t=be,n=ot;be=this,ot=!0;try{return this.fn()}finally{Ol(this),be=t,ot=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)bo(t);this.deps=this.depsTail=void 0,Xo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Dr(this)&&this.run()}get dirty(){return Dr(this)}}let Al=0,Fn,Bn;function Cl(e,t=!1){if(e.flags|=8,t){e.next=Bn,Bn=e;return}e.next=Fn,Fn=e}function go(){Al++}function mo(){if(--Al>0)return;if(Bn){let t=Bn;for(Bn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Fn;){let t=Fn;for(Fn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Il(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ol(e){let t,n=e.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),bo(s),au(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}e.deps=t,e.depsTail=n}function Dr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Pl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Pl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Qn))return;e.globalVersion=Qn;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Dr(e)){e.flags&=-3;return}const n=be,s=ot;be=e,ot=!0;try{Il(e);const r=e.fn(e._value);(t.version===0||Bt(r,e._value))&&(e._value=r,t.version++)}catch(r){throw t.version++,r}finally{be=n,ot=s,Ol(e),e.flags&=-3}}function bo(e,t=!1){const{dep:n,prevSub:s,nextSub:r}=e;if(s&&(s.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)bo(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function au(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let ot=!0;const Ll=[];function Ht(){Ll.push(ot),ot=!1}function zt(){const e=Ll.pop();ot=e===void 0?!0:e}function Xo(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=be;be=void 0;try{t()}finally{be=n}}}let Qn=0;class cu{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class yo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!be||!ot||be===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==be)n=this.activeLink=new cu(be,this),be.deps?(n.prevDep=be.depsTail,be.depsTail.nextDep=n,be.depsTail=n):be.deps=be.depsTail=n,Nl(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=be.depsTail,n.nextDep=void 0,be.depsTail.nextDep=n,be.depsTail=n,be.deps===n&&(be.deps=s)}return n}trigger(t){this.version++,Qn++,this.notify(t)}notify(t){go();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{mo()}}}function Nl(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Nl(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ur=new WeakMap,Yt=Symbol(""),Vr=Symbol(""),Jn=Symbol("");function Ae(e,t,n){if(ot&&be){let s=Ur.get(e);s||Ur.set(e,s=new Map);let r=s.get(n);r||(s.set(n,r=new yo),r.map=s,r.key=n),r.track()}}function Ct(e,t,n,s,r,o){const i=Ur.get(e);if(!i){Qn++;return}const l=a=>{a&&a.trigger()};if(go(),t==="clear")i.forEach(l);else{const a=V(e),u=a&&po(n);if(a&&n==="length"){const c=Number(s);i.forEach((f,p)=>{(p==="length"||p===Jn||!Et(p)&&p>=c)&&l(f)})}else switch((n!==void 0||i.has(void 0))&&l(i.get(n)),u&&l(i.get(Jn)),t){case"add":a?u&&l(i.get("length")):(l(i.get(Yt)),bn(e)&&l(i.get(Vr)));break;case"delete":a||(l(i.get(Yt)),bn(e)&&l(i.get(Vr)));break;case"set":bn(e)&&l(i.get(Yt));break}}mo()}function fn(e){const t=ee(e);return t===e?t:(Ae(t,"iterate",Jn),tt(e)?t:t.map(Ce))}function Xs(e){return Ae(e=ee(e),"iterate",Jn),e}const uu={__proto__:null,[Symbol.iterator](){return Sr(this,Symbol.iterator,Ce)},concat(...e){return fn(this).concat(...e.map(t=>V(t)?fn(t):t))},entries(){return Sr(this,"entries",e=>(e[1]=Ce(e[1]),e))},every(e,t){return xt(this,"every",e,t,void 0,arguments)},filter(e,t){return xt(this,"filter",e,t,n=>n.map(Ce),arguments)},find(e,t){return xt(this,"find",e,t,Ce,arguments)},findIndex(e,t){return xt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return xt(this,"findLast",e,t,Ce,arguments)},findLastIndex(e,t){return xt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return xt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Er(this,"includes",e)},indexOf(...e){return Er(this,"indexOf",e)},join(e){return fn(this).join(e)},lastIndexOf(...e){return Er(this,"lastIndexOf",e)},map(e,t){return xt(this,"map",e,t,void 0,arguments)},pop(){return Pn(this,"pop")},push(...e){return Pn(this,"push",e)},reduce(e,...t){return Yo(this,"reduce",e,t)},reduceRight(e,...t){return Yo(this,"reduceRight",e,t)},shift(){return Pn(this,"shift")},some(e,t){return xt(this,"some",e,t,void 0,arguments)},splice(...e){return Pn(this,"splice",e)},toReversed(){return fn(this).toReversed()},toSorted(e){return fn(this).toSorted(e)},toSpliced(...e){return fn(this).toSpliced(...e)},unshift(...e){return Pn(this,"unshift",e)},values(){return Sr(this,"values",Ce)}};function Sr(e,t,n){const s=Xs(e),r=s[t]();return s!==e&&!tt(e)&&(r._next=r.next,r.next=()=>{const o=r._next();return o.value&&(o.value=n(o.value)),o}),r}const fu=Array.prototype;function xt(e,t,n,s,r,o){const i=Xs(e),l=i!==e&&!tt(e),a=i[t];if(a!==fu[t]){const f=a.apply(e,o);return l?Ce(f):f}let u=n;i!==e&&(l?u=function(f,p){return n.call(this,Ce(f),p,e)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,e)}));const c=a.call(i,u,s);return l&&r?r(c):c}function Yo(e,t,n,s){const r=Xs(e);let o=n;return r!==e&&(tt(e)?n.length>3&&(o=function(i,l,a){return n.call(this,i,l,a,e)}):o=function(i,l,a){return n.call(this,i,Ce(l),a,e)}),r[t](o,...s)}function Er(e,t,n){const s=ee(e);Ae(s,"iterate",Jn);const r=s[t](...n);return(r===-1||r===!1)&&wo(n[0])?(n[0]=ee(n[0]),s[t](...n)):r}function Pn(e,t,n=[]){Ht(),go();const s=ee(e)[t].apply(e,n);return mo(),zt(),s}const du=co("__proto__,__v_isRef,__isVue"),$l=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Et));function pu(e){Et(e)||(e=String(e));const t=ee(this);return Ae(t,"has",e),t.hasOwnProperty(e)}class Ml{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return o;if(n==="__v_raw")return s===(r?o?Eu:Fl:o?Vl:Ul).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const i=V(t);if(!r){let a;if(i&&(a=uu[n]))return a;if(n==="hasOwnProperty")return pu}const l=Reflect.get(t,n,Oe(t)?t:s);return(Et(n)?$l.has(n):du(n))||(r||Ae(t,"get",n),o)?l:Oe(l)?i&&po(n)?l:l.value:he(l)?r?jl(l):ls(l):l}}class Dl extends Ml{constructor(t=!1){super(!1,t)}set(t,n,s,r){let o=t[n];if(!this._isShallow){const a=nn(o);if(!tt(s)&&!nn(s)&&(o=ee(o),s=ee(s)),!V(t)&&Oe(o)&&!Oe(s))return a?!1:(o.value=s,!0)}const i=V(t)&&po(n)?Number(n)<t.length:re(t,n),l=Reflect.set(t,n,s,Oe(t)?t:r);return t===ee(r)&&(i?Bt(s,o)&&Ct(t,"set",n,s):Ct(t,"add",n,s)),l}deleteProperty(t,n){const s=re(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&s&&Ct(t,"delete",n,void 0),r}has(t,n){const s=Reflect.has(t,n);return(!Et(n)||!$l.has(n))&&Ae(t,"has",n),s}ownKeys(t){return Ae(t,"iterate",V(t)?"length":Yt),Reflect.ownKeys(t)}}class hu extends Ml{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const gu=new Dl,mu=new hu,bu=new Dl(!0);const Fr=e=>e,ys=e=>Reflect.getPrototypeOf(e);function yu(e,t,n){return function(...s){const r=this.__v_raw,o=ee(r),i=bn(o),l=e==="entries"||e===Symbol.iterator&&i,a=e==="keys"&&i,u=r[e](...s),c=n?Fr:t?Br:Ce;return!t&&Ae(o,"iterate",a?Vr:Yt),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:l?[c(f[0]),c(f[1])]:c(f),done:p}},[Symbol.iterator](){return this}}}}function _s(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function _u(e,t){const n={get(r){const o=this.__v_raw,i=ee(o),l=ee(r);e||(Bt(r,l)&&Ae(i,"get",r),Ae(i,"get",l));const{has:a}=ys(i),u=t?Fr:e?Br:Ce;if(a.call(i,r))return u(o.get(r));if(a.call(i,l))return u(o.get(l));o!==i&&o.get(r)},get size(){const r=this.__v_raw;return!e&&Ae(ee(r),"iterate",Yt),Reflect.get(r,"size",r)},has(r){const o=this.__v_raw,i=ee(o),l=ee(r);return e||(Bt(r,l)&&Ae(i,"has",r),Ae(i,"has",l)),r===l?o.has(r):o.has(r)||o.has(l)},forEach(r,o){const i=this,l=i.__v_raw,a=ee(l),u=t?Fr:e?Br:Ce;return!e&&Ae(a,"iterate",Yt),l.forEach((c,f)=>r.call(o,u(c),u(f),i))}};return xe(n,e?{add:_s("add"),set:_s("set"),delete:_s("delete"),clear:_s("clear")}:{add(r){!t&&!tt(r)&&!nn(r)&&(r=ee(r));const o=ee(this);return ys(o).has.call(o,r)||(o.add(r),Ct(o,"add",r,r)),this},set(r,o){!t&&!tt(o)&&!nn(o)&&(o=ee(o));const i=ee(this),{has:l,get:a}=ys(i);let u=l.call(i,r);u||(r=ee(r),u=l.call(i,r));const c=a.call(i,r);return i.set(r,o),u?Bt(o,c)&&Ct(i,"set",r,o):Ct(i,"add",r,o),this},delete(r){const o=ee(this),{has:i,get:l}=ys(o);let a=i.call(o,r);a||(r=ee(r),a=i.call(o,r)),l&&l.call(o,r);const u=o.delete(r);return a&&Ct(o,"delete",r,void 0),u},clear(){const r=ee(this),o=r.size!==0,i=r.clear();return o&&Ct(r,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=yu(r,e,t)}),n}function _o(e,t){const n=_u(e,t);return(s,r,o)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?s:Reflect.get(re(n,r)&&r in s?n:s,r,o)}const vu={get:_o(!1,!1)},wu={get:_o(!1,!0)},Su={get:_o(!0,!1)};const Ul=new WeakMap,Vl=new WeakMap,Fl=new WeakMap,Eu=new WeakMap;function Ru(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xu(e){return e.__v_skip||!Object.isExtensible(e)?0:Ru(Qc(e))}function ls(e){return nn(e)?e:vo(e,!1,gu,vu,Ul)}function Bl(e){return vo(e,!1,bu,wu,Vl)}function jl(e){return vo(e,!0,mu,Su,Fl)}function vo(e,t,n,s,r){if(!he(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=r.get(e);if(o)return o;const i=xu(e);if(i===0)return e;const l=new Proxy(e,i===2?s:n);return r.set(e,l),l}function yn(e){return nn(e)?yn(e.__v_raw):!!(e&&e.__v_isReactive)}function nn(e){return!!(e&&e.__v_isReadonly)}function tt(e){return!!(e&&e.__v_isShallow)}function wo(e){return e?!!e.__v_raw:!1}function ee(e){const t=e&&e.__v_raw;return t?ee(t):e}function Tu(e){return!re(e,"__v_skip")&&Object.isExtensible(e)&&Sl(e,"__v_skip",!0),e}const Ce=e=>he(e)?ls(e):e,Br=e=>he(e)?jl(e):e;function Oe(e){return e?e.__v_isRef===!0:!1}function ku(e){return ql(e,!1)}function Au(e){return ql(e,!0)}function ql(e,t){return Oe(e)?e:new Cu(e,t)}class Cu{constructor(t,n){this.dep=new yo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ee(t),this._value=n?t:Ce(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||tt(t)||nn(t);t=s?t:ee(t),Bt(t,n)&&(this._rawValue=t,this._value=s?t:Ce(t),this.dep.trigger())}}function _n(e){return Oe(e)?e.value:e}const Iu={get:(e,t,n)=>t==="__v_raw"?e:_n(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const r=e[t];return Oe(r)&&!Oe(n)?(r.value=n,!0):Reflect.set(e,t,n,s)}};function Hl(e){return yn(e)?e:new Proxy(e,Iu)}class Ou{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new yo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Qn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&be!==this)return Cl(this,!0),!0}get value(){const t=this.dep.track();return Pl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Pu(e,t,n=!1){let s,r;return W(e)?s=e:(s=e.get,r=e.set),new Ou(s,r,n)}const vs={},Ls=new WeakMap;let Jt;function Lu(e,t=!1,n=Jt){if(n){let s=Ls.get(n);s||Ls.set(n,s=[]),s.push(e)}}function Nu(e,t,n=pe){const{immediate:s,deep:r,once:o,scheduler:i,augmentJob:l,call:a}=n,u=P=>r?P:tt(P)||r===!1||r===0?It(P,1):It(P);let c,f,p,m,y=!1,_=!1;if(Oe(e)?(f=()=>e.value,y=tt(e)):yn(e)?(f=()=>u(e),y=!0):V(e)?(_=!0,y=e.some(P=>yn(P)||tt(P)),f=()=>e.map(P=>{if(Oe(P))return P.value;if(yn(P))return u(P);if(W(P))return a?a(P,2):P()})):W(e)?t?f=a?()=>a(e,2):e:f=()=>{if(p){Ht();try{p()}finally{zt()}}const P=Jt;Jt=c;try{return a?a(e,3,[m]):e(m)}finally{Jt=P}}:f=St,t&&r){const P=f,F=r===!0?1/0:r;f=()=>It(P(),F)}const S=lu(),A=()=>{c.stop(),S&&S.active&&fo(S.effects,c)};if(o&&t){const P=t;t=(...F)=>{P(...F),A()}}let k=_?new Array(e.length).fill(vs):vs;const O=P=>{if(!(!(c.flags&1)||!c.dirty&&!P))if(t){const F=c.run();if(r||y||(_?F.some((Z,J)=>Bt(Z,k[J])):Bt(F,k))){p&&p();const Z=Jt;Jt=c;try{const J=[F,k===vs?void 0:_&&k[0]===vs?[]:k,m];a?a(t,3,J):t(...J),k=F}finally{Jt=Z}}}else c.run()};return l&&l(O),c=new kl(f),c.scheduler=i?()=>i(O,!1):O,m=P=>Lu(P,!1,c),p=c.onStop=()=>{const P=Ls.get(c);if(P){if(a)a(P,4);else for(const F of P)F();Ls.delete(c)}},t?s?O(!0):k=c.run():i?i(O.bind(null,!0),!0):c.run(),A.pause=c.pause.bind(c),A.resume=c.resume.bind(c),A.stop=A,A}function It(e,t=1/0,n){if(t<=0||!he(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Oe(e))It(e.value,t,n);else if(V(e))for(let s=0;s<e.length;s++)It(e[s],t,n);else if(kn(e)||bn(e))e.forEach(s=>{It(s,t,n)});else if(wl(e)){for(const s in e)It(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&It(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function as(e,t,n,s){try{return s?e(...s):e()}catch(r){Ys(r,t,n)}}function lt(e,t,n,s){if(W(e)){const r=as(e,t,n,s);return r&&_l(r)&&r.catch(o=>{Ys(o,t,n)}),r}if(V(e)){const r=[];for(let o=0;o<e.length;o++)r.push(lt(e[o],t,n,s));return r}}function Ys(e,t,n,s=!0){const r=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||pe;if(t){let l=t.parent;const a=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const c=l.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,a,u)===!1)return}l=l.parent}if(o){Ht(),as(o,null,10,[e,a,u]),zt();return}}$u(e,n,r,s,i)}function $u(e,t,n,s=!0,r=!1){if(r)throw e;console.error(e)}const Le=[];let vt=-1;const vn=[];let Dt=null,hn=0;const zl=Promise.resolve();let Ns=null;function So(e){const t=Ns||zl;return e?t.then(this?e.bind(this):e):t}function Mu(e){let t=vt+1,n=Le.length;for(;t<n;){const s=t+n>>>1,r=Le[s],o=Zn(r);o<e||o===e&&r.flags&2?t=s+1:n=s}return t}function Eo(e){if(!(e.flags&1)){const t=Zn(e),n=Le[Le.length-1];!n||!(e.flags&2)&&t>=Zn(n)?Le.push(e):Le.splice(Mu(t),0,e),e.flags|=1,Gl()}}function Gl(){Ns||(Ns=zl.then(Wl))}function Du(e){V(e)?vn.push(...e):Dt&&e.id===-1?Dt.splice(hn+1,0,e):e.flags&1||(vn.push(e),e.flags|=1),Gl()}function ei(e,t,n=vt+1){for(;n<Le.length;n++){const s=Le[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Le.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Kl(e){if(vn.length){const t=[...new Set(vn)].sort((n,s)=>Zn(n)-Zn(s));if(vn.length=0,Dt){Dt.push(...t);return}for(Dt=t,hn=0;hn<Dt.length;hn++){const n=Dt[hn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Dt=null,hn=0}}const Zn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Wl(e){try{for(vt=0;vt<Le.length;vt++){const t=Le[vt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),as(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;vt<Le.length;vt++){const t=Le[vt];t&&(t.flags&=-2)}vt=-1,Le.length=0,Kl(),Ns=null,(Le.length||vn.length)&&Wl()}}let Ve=null,Ql=null;function $s(e){const t=Ve;return Ve=e,Ql=e&&e.type.__scopeId||null,t}function En(e,t=Ve,n){if(!t||e._n)return e;const s=(...r)=>{s._d&&fi(-1);const o=$s(t);let i;try{i=e(...r)}finally{$s(o),s._d&&fi(1)}return i};return s._n=!0,s._c=!0,s._d=!0,s}function _e(e,t){if(Ve===null)return e;const n=or(Ve),s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[o,i,l,a=pe]=t[r];o&&(W(o)&&(o={mounted:o,updated:o}),o.deep&&It(i),s.push({dir:o,instance:n,value:i,oldValue:void 0,arg:l,modifiers:a}))}return e}function Gt(e,t,n,s){const r=e.dirs,o=t&&t.dirs;for(let i=0;i<r.length;i++){const l=r[i];o&&(l.oldValue=o[i].value);let a=l.dir[s];a&&(Ht(),lt(a,n,8,[e.el,l,e,t]),zt())}}const Uu=Symbol("_vte"),Jl=e=>e.__isTeleport,Ut=Symbol("_leaveCb"),ws=Symbol("_enterCb");function Vu(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return oa(()=>{e.isMounted=!0}),ia(()=>{e.isUnmounting=!0}),e}const Je=[Function,Array],Zl={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Je,onEnter:Je,onAfterEnter:Je,onEnterCancelled:Je,onBeforeLeave:Je,onLeave:Je,onAfterLeave:Je,onLeaveCancelled:Je,onBeforeAppear:Je,onAppear:Je,onAfterAppear:Je,onAppearCancelled:Je},Xl=e=>{const t=e.subTree;return t.component?Xl(t.component):t},Fu={name:"BaseTransition",props:Zl,setup(e,{slots:t}){const n=$f(),s=Vu();return()=>{const r=t.default&&ta(t.default(),!0);if(!r||!r.length)return;const o=Yl(r),i=ee(e),{mode:l}=i;if(s.isLeaving)return Rr(o);const a=ti(o);if(!a)return Rr(o);let u=jr(a,i,s,n,f=>u=f);a.type!==Ue&&Xn(a,u);let c=n.subTree&&ti(n.subTree);if(c&&c.type!==Ue&&!Zt(a,c)&&Xl(n).type!==Ue){let f=jr(c,i,s,n);if(Xn(c,f),l==="out-in"&&a.type!==Ue)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,c=void 0},Rr(o);l==="in-out"&&a.type!==Ue?f.delayLeave=(p,m,y)=>{const _=ea(s,c);_[String(c.key)]=c,p[Ut]=()=>{m(),p[Ut]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{y(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return o}}};function Yl(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Ue){t=n;break}}return t}const Bu=Fu;function ea(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function jr(e,t,n,s,r){const{appear:o,mode:i,persisted:l=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:y,onLeaveCancelled:_,onBeforeAppear:S,onAppear:A,onAfterAppear:k,onAppearCancelled:O}=t,P=String(e.key),F=ea(n,e),Z=(K,Y)=>{K&&lt(K,s,9,Y)},J=(K,Y)=>{const ge=Y[1];Z(K,Y),V(K)?K.every(D=>D.length<=1)&&ge():K.length<=1&&ge()},ue={mode:i,persisted:l,beforeEnter(K){let Y=a;if(!n.isMounted)if(o)Y=S||a;else return;K[Ut]&&K[Ut](!0);const ge=F[P];ge&&Zt(e,ge)&&ge.el[Ut]&&ge.el[Ut](),Z(Y,[K])},enter(K){let Y=u,ge=c,D=f;if(!n.isMounted)if(o)Y=A||u,ge=k||c,D=O||f;else return;let te=!1;const Re=K[ws]=qe=>{te||(te=!0,qe?Z(D,[K]):Z(ge,[K]),ue.delayedLeave&&ue.delayedLeave(),K[ws]=void 0)};Y?J(Y,[K,Re]):Re()},leave(K,Y){const ge=String(e.key);if(K[ws]&&K[ws](!0),n.isUnmounting)return Y();Z(p,[K]);let D=!1;const te=K[Ut]=Re=>{D||(D=!0,Y(),Re?Z(_,[K]):Z(y,[K]),K[Ut]=void 0,F[ge]===e&&delete F[ge])};F[ge]=e,m?J(m,[K,te]):te()},clone(K){const Y=jr(K,t,n,s,r);return r&&r(Y),Y}};return ue}function Rr(e){if(er(e))return e=jt(e),e.children=null,e}function ti(e){if(!er(e))return Jl(e.type)&&e.children?Yl(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&W(n.default))return n.default()}}function Xn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Xn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ta(e,t=!1,n){let s=[],r=0;for(let o=0;o<e.length;o++){let i=e[o];const l=n==null?i.key:String(n)+String(i.key!=null?i.key:o);i.type===Ne?(i.patchFlag&128&&r++,s=s.concat(ta(i.children,t,l))):(t||i.type!==Ue)&&s.push(l!=null?jt(i,{key:l}):i)}if(r>1)for(let o=0;o<s.length;o++)s[o].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function na(e,t){return W(e)?xe({name:e.name},t,{setup:e}):e}function sa(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ms(e,t,n,s,r=!1){if(V(e)){e.forEach((y,_)=>Ms(y,t&&(V(t)?t[_]:t),n,s,r));return}if(jn(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ms(e,t,n,s.component.subTree);return}const o=s.shapeFlag&4?or(s.component):s.el,i=r?null:o,{i:l,r:a}=e,u=t&&t.r,c=l.refs===pe?l.refs={}:l.refs,f=l.setupState,p=ee(f),m=f===pe?()=>!1:y=>re(p,y);if(u!=null&&u!==a&&(we(u)?(c[u]=null,m(u)&&(f[u]=null)):Oe(u)&&(u.value=null)),W(a))as(a,l,12,[i,c]);else{const y=we(a),_=Oe(a);if(y||_){const S=()=>{if(e.f){const A=y?m(a)?f[a]:c[a]:a.value;r?V(A)&&fo(A,o):V(A)?A.includes(o)||A.push(o):y?(c[a]=[o],m(a)&&(f[a]=c[a])):(a.value=[o],e.k&&(c[e.k]=a.value))}else y?(c[a]=i,m(a)&&(f[a]=i)):_&&(a.value=i,e.k&&(c[e.k]=i))};i?(S.id=-1,Ge(S,n)):S()}}}Js().requestIdleCallback;Js().cancelIdleCallback;const jn=e=>!!e.type.__asyncLoader,er=e=>e.type.__isKeepAlive;function ju(e,t){ra(e,"a",t)}function qu(e,t){ra(e,"da",t)}function ra(e,t,n=ke){const s=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(tr(t,s,n),n){let r=n.parent;for(;r&&r.parent;)er(r.parent.vnode)&&Hu(s,t,n,r),r=r.parent}}function Hu(e,t,n,s){const r=tr(t,e,s,!0);la(()=>{fo(s[t],r)},n)}function tr(e,t,n=ke,s=!1){if(n){const r=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...i)=>{Ht();const l=us(n),a=lt(t,n,e,i);return l(),zt(),a});return s?r.unshift(o):r.push(o),o}}const Lt=e=>(t,n=ke)=>{(!ts||e==="sp")&&tr(e,(...s)=>t(...s),n)},zu=Lt("bm"),oa=Lt("m"),Gu=Lt("bu"),Ku=Lt("u"),ia=Lt("bum"),la=Lt("um"),Wu=Lt("sp"),Qu=Lt("rtg"),Ju=Lt("rtc");function Zu(e,t=ke){tr("ec",e,t)}const aa="components";function it(e,t){return ua(aa,e,!0,t)||e}const ca=Symbol.for("v-ndc");function Xu(e){return we(e)?ua(aa,e,!1)||e:e||ca}function ua(e,t,n=!0,s=!1){const r=Ve||ke;if(r){const o=r.type;{const l=Ff(o,!1);if(l&&(l===t||l===rt(t)||l===Qs(rt(t))))return o}const i=ni(r[e]||o[e],t)||ni(r.appContext[e],t);return!i&&s?o:i}}function ni(e,t){return e&&(e[t]||e[rt(t)]||e[Qs(rt(t))])}function Yn(e,t,n,s){let r;const o=n,i=V(e);if(i||we(e)){const l=i&&yn(e);let a=!1;l&&(a=!tt(e),e=Xs(e)),r=new Array(e.length);for(let u=0,c=e.length;u<c;u++)r[u]=t(a?Ce(e[u]):e[u],u,void 0,o)}else if(typeof e=="number"){r=new Array(e);for(let l=0;l<e;l++)r[l]=t(l+1,l,void 0,o)}else if(he(e))if(e[Symbol.iterator])r=Array.from(e,(l,a)=>t(l,a,void 0,o));else{const l=Object.keys(e);r=new Array(l.length);for(let a=0,u=l.length;a<u;a++){const c=l[a];r[a]=t(e[c],c,a,o)}}else r=[];return r}const qr=e=>e?Oa(e)?or(e):qr(e.parent):null,qn=xe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>qr(e.parent),$root:e=>qr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>da(e),$forceUpdate:e=>e.f||(e.f=()=>{Eo(e.update)}),$nextTick:e=>e.n||(e.n=So.bind(e.proxy)),$watch:e=>vf.bind(e)}),xr=(e,t)=>e!==pe&&!e.__isScriptSetup&&re(e,t),Yu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:o,accessCache:i,type:l,appContext:a}=e;let u;if(t[0]!=="$"){const m=i[t];if(m!==void 0)switch(m){case 1:return s[t];case 2:return r[t];case 4:return n[t];case 3:return o[t]}else{if(xr(s,t))return i[t]=1,s[t];if(r!==pe&&re(r,t))return i[t]=2,r[t];if((u=e.propsOptions[0])&&re(u,t))return i[t]=3,o[t];if(n!==pe&&re(n,t))return i[t]=4,n[t];Hr&&(i[t]=0)}}const c=qn[t];let f,p;if(c)return t==="$attrs"&&Ae(e.attrs,"get",""),c(e);if((f=l.__cssModules)&&(f=f[t]))return f;if(n!==pe&&re(n,t))return i[t]=4,n[t];if(p=a.config.globalProperties,re(p,t))return p[t]},set({_:e},t,n){const{data:s,setupState:r,ctx:o}=e;return xr(r,t)?(r[t]=n,!0):s!==pe&&re(s,t)?(s[t]=n,!0):re(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:r,propsOptions:o}},i){let l;return!!n[i]||e!==pe&&re(e,i)||xr(t,i)||(l=o[0])&&re(l,i)||re(s,i)||re(qn,i)||re(r.config.globalProperties,i)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:re(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function si(e){return V(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Hr=!0;function ef(e){const t=da(e),n=e.proxy,s=e.ctx;Hr=!1,t.beforeCreate&&ri(t.beforeCreate,e,"bc");const{data:r,computed:o,methods:i,watch:l,provide:a,inject:u,created:c,beforeMount:f,mounted:p,beforeUpdate:m,updated:y,activated:_,deactivated:S,beforeDestroy:A,beforeUnmount:k,destroyed:O,unmounted:P,render:F,renderTracked:Z,renderTriggered:J,errorCaptured:ue,serverPrefetch:K,expose:Y,inheritAttrs:ge,components:D,directives:te,filters:Re}=t;if(u&&tf(u,s,null),i)for(const ce in i){const ne=i[ce];W(ne)&&(s[ce]=ne.bind(n))}if(r){const ce=r.call(n,n);he(ce)&&(e.data=ls(ce))}if(Hr=!0,o)for(const ce in o){const ne=o[ce],Rt=W(ne)?ne.bind(n,n):W(ne.get)?ne.get.bind(n,n):St,Nt=!W(ne)&&W(ne.set)?ne.set.bind(n):St,dt=Xe({get:Rt,set:Nt});Object.defineProperty(s,ce,{enumerable:!0,configurable:!0,get:()=>dt.value,set:Me=>dt.value=Me})}if(l)for(const ce in l)fa(l[ce],s,n,ce);if(a){const ce=W(a)?a.call(n):a;Reflect.ownKeys(ce).forEach(ne=>{xs(ne,ce[ne])})}c&&ri(c,e,"c");function Se(ce,ne){V(ne)?ne.forEach(Rt=>ce(Rt.bind(n))):ne&&ce(ne.bind(n))}if(Se(zu,f),Se(oa,p),Se(Gu,m),Se(Ku,y),Se(ju,_),Se(qu,S),Se(Zu,ue),Se(Ju,Z),Se(Qu,J),Se(ia,k),Se(la,P),Se(Wu,K),V(Y))if(Y.length){const ce=e.exposed||(e.exposed={});Y.forEach(ne=>{Object.defineProperty(ce,ne,{get:()=>n[ne],set:Rt=>n[ne]=Rt})})}else e.exposed||(e.exposed={});F&&e.render===St&&(e.render=F),ge!=null&&(e.inheritAttrs=ge),D&&(e.components=D),te&&(e.directives=te),K&&sa(e)}function tf(e,t,n=St){V(e)&&(e=zr(e));for(const s in e){const r=e[s];let o;he(r)?"default"in r?o=Pt(r.from||s,r.default,!0):o=Pt(r.from||s):o=Pt(r),Oe(o)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):t[s]=o}}function ri(e,t,n){lt(V(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function fa(e,t,n,s){let r=s.includes(".")?Ta(n,s):()=>n[s];if(we(e)){const o=t[e];W(o)&&Sn(r,o)}else if(W(e))Sn(r,e.bind(n));else if(he(e))if(V(e))e.forEach(o=>fa(o,t,n,s));else{const o=W(e.handler)?e.handler.bind(n):t[e.handler];W(o)&&Sn(r,o,e)}}function da(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:i}}=e.appContext,l=o.get(t);let a;return l?a=l:!r.length&&!n&&!s?a=t:(a={},r.length&&r.forEach(u=>Ds(a,u,i,!0)),Ds(a,t,i)),he(t)&&o.set(t,a),a}function Ds(e,t,n,s=!1){const{mixins:r,extends:o}=t;o&&Ds(e,o,n,!0),r&&r.forEach(i=>Ds(e,i,n,!0));for(const i in t)if(!(s&&i==="expose")){const l=nf[i]||n&&n[i];e[i]=l?l(e[i],t[i]):t[i]}return e}const nf={data:oi,props:ii,emits:ii,methods:Un,computed:Un,beforeCreate:Pe,created:Pe,beforeMount:Pe,mounted:Pe,beforeUpdate:Pe,updated:Pe,beforeDestroy:Pe,beforeUnmount:Pe,destroyed:Pe,unmounted:Pe,activated:Pe,deactivated:Pe,errorCaptured:Pe,serverPrefetch:Pe,components:Un,directives:Un,watch:rf,provide:oi,inject:sf};function oi(e,t){return t?e?function(){return xe(W(e)?e.call(this,this):e,W(t)?t.call(this,this):t)}:t:e}function sf(e,t){return Un(zr(e),zr(t))}function zr(e){if(V(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Pe(e,t){return e?[...new Set([].concat(e,t))]:t}function Un(e,t){return e?xe(Object.create(null),e,t):t}function ii(e,t){return e?V(e)&&V(t)?[...new Set([...e,...t])]:xe(Object.create(null),si(e),si(t??{})):t}function rf(e,t){if(!e)return t;if(!t)return e;const n=xe(Object.create(null),e);for(const s in t)n[s]=Pe(e[s],t[s]);return n}function pa(){return{app:null,config:{isNativeTag:Kc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let of=0;function lf(e,t){return function(s,r=null){W(s)||(s=xe({},s)),r!=null&&!he(r)&&(r=null);const o=pa(),i=new WeakSet,l=[];let a=!1;const u=o.app={_uid:of++,_component:s,_props:r,_container:null,_context:o,_instance:null,version:jf,get config(){return o.config},set config(c){},use(c,...f){return i.has(c)||(c&&W(c.install)?(i.add(c),c.install(u,...f)):W(c)&&(i.add(c),c(u,...f))),u},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),u},component(c,f){return f?(o.components[c]=f,u):o.components[c]},directive(c,f){return f?(o.directives[c]=f,u):o.directives[c]},mount(c,f,p){if(!a){const m=u._ceVNode||ye(s,r);return m.appContext=o,p===!0?p="svg":p===!1&&(p=void 0),e(m,c,p),a=!0,u._container=c,c.__vue_app__=u,or(m.component)}},onUnmount(c){l.push(c)},unmount(){a&&(lt(l,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,f){return o.provides[c]=f,u},runWithContext(c){const f=wn;wn=u;try{return c()}finally{wn=f}}};return u}}let wn=null;function xs(e,t){if(ke){let n=ke.provides;const s=ke.parent&&ke.parent.provides;s===n&&(n=ke.provides=Object.create(s)),n[e]=t}}function Pt(e,t,n=!1){const s=ke||Ve;if(s||wn){const r=wn?wn._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&W(t)?t.call(s&&s.proxy):t}}const ha={},ga=()=>Object.create(ha),ma=e=>Object.getPrototypeOf(e)===ha;function af(e,t,n,s=!1){const r={},o=ga();e.propsDefaults=Object.create(null),ba(e,t,r,o);for(const i in e.propsOptions[0])i in r||(r[i]=void 0);n?e.props=s?r:Bl(r):e.type.props?e.props=r:e.props=o,e.attrs=o}function cf(e,t,n,s){const{props:r,attrs:o,vnode:{patchFlag:i}}=e,l=ee(r),[a]=e.propsOptions;let u=!1;if((s||i>0)&&!(i&16)){if(i&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let p=c[f];if(nr(e.emitsOptions,p))continue;const m=t[p];if(a)if(re(o,p))m!==o[p]&&(o[p]=m,u=!0);else{const y=rt(p);r[y]=Gr(a,l,y,m,e,!1)}else m!==o[p]&&(o[p]=m,u=!0)}}}else{ba(e,t,r,o)&&(u=!0);let c;for(const f in l)(!t||!re(t,f)&&((c=on(f))===f||!re(t,c)))&&(a?n&&(n[f]!==void 0||n[c]!==void 0)&&(r[f]=Gr(a,l,f,void 0,e,!0)):delete r[f]);if(o!==l)for(const f in o)(!t||!re(t,f))&&(delete o[f],u=!0)}u&&Ct(e.attrs,"set","")}function ba(e,t,n,s){const[r,o]=e.propsOptions;let i=!1,l;if(t)for(let a in t){if(Vn(a))continue;const u=t[a];let c;r&&re(r,c=rt(a))?!o||!o.includes(c)?n[c]=u:(l||(l={}))[c]=u:nr(e.emitsOptions,a)||(!(a in s)||u!==s[a])&&(s[a]=u,i=!0)}if(o){const a=ee(n),u=l||pe;for(let c=0;c<o.length;c++){const f=o[c];n[f]=Gr(r,a,f,u[f],e,!re(u,f))}}return i}function Gr(e,t,n,s,r,o){const i=e[n];if(i!=null){const l=re(i,"default");if(l&&s===void 0){const a=i.default;if(i.type!==Function&&!i.skipFactory&&W(a)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const c=us(r);s=u[n]=a.call(null,t),c()}}else s=a;r.ce&&r.ce._setProp(n,s)}i[0]&&(o&&!l?s=!1:i[1]&&(s===""||s===on(n))&&(s=!0))}return s}const uf=new WeakMap;function ya(e,t,n=!1){const s=n?uf:t.propsCache,r=s.get(e);if(r)return r;const o=e.props,i={},l=[];let a=!1;if(!W(e)){const c=f=>{a=!0;const[p,m]=ya(f,t,!0);xe(i,p),m&&l.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!a)return he(e)&&s.set(e,mn),mn;if(V(o))for(let c=0;c<o.length;c++){const f=rt(o[c]);li(f)&&(i[f]=pe)}else if(o)for(const c in o){const f=rt(c);if(li(f)){const p=o[c],m=i[f]=V(p)||W(p)?{type:p}:xe({},p),y=m.type;let _=!1,S=!0;if(V(y))for(let A=0;A<y.length;++A){const k=y[A],O=W(k)&&k.name;if(O==="Boolean"){_=!0;break}else O==="String"&&(S=!1)}else _=W(y)&&y.name==="Boolean";m[0]=_,m[1]=S,(_||re(m,"default"))&&l.push(f)}}const u=[i,l];return he(e)&&s.set(e,u),u}function li(e){return e[0]!=="$"&&!Vn(e)}const _a=e=>e[0]==="_"||e==="$stable",Ro=e=>V(e)?e.map(wt):[wt(e)],ff=(e,t,n)=>{if(t._n)return t;const s=En((...r)=>Ro(t(...r)),n);return s._c=!1,s},va=(e,t,n)=>{const s=e._ctx;for(const r in e){if(_a(r))continue;const o=e[r];if(W(o))t[r]=ff(r,o,s);else if(o!=null){const i=Ro(o);t[r]=()=>i}}},wa=(e,t)=>{const n=Ro(t);e.slots.default=()=>n},Sa=(e,t,n)=>{for(const s in t)(n||s!=="_")&&(e[s]=t[s])},df=(e,t,n)=>{const s=e.slots=ga();if(e.vnode.shapeFlag&32){const r=t._;r?(Sa(s,t,n),n&&Sl(s,"_",r,!0)):va(t,s)}else t&&wa(e,t)},pf=(e,t,n)=>{const{vnode:s,slots:r}=e;let o=!0,i=pe;if(s.shapeFlag&32){const l=t._;l?n&&l===1?o=!1:Sa(r,t,n):(o=!t.$stable,va(t,r)),i=t}else t&&(wa(e,t),i={default:1});if(o)for(const l in r)!_a(l)&&i[l]==null&&delete r[l]},Ge=kf;function hf(e){return gf(e)}function gf(e,t){const n=Js();n.__VUE__=!0;const{insert:s,remove:r,patchProp:o,createElement:i,createText:l,createComment:a,setText:u,setElementText:c,parentNode:f,nextSibling:p,setScopeId:m=St,insertStaticContent:y}=e,_=(h,g,b,w=null,x=null,R=null,L=void 0,I=null,C=!!g.dynamicChildren)=>{if(h===g)return;h&&!Zt(h,g)&&(w=E(h),Me(h,x,R,!0),h=null),g.patchFlag===-2&&(C=!1,g.dynamicChildren=null);const{type:T,ref:q,shapeFlag:$}=g;switch(T){case sr:S(h,g,b,w);break;case Ue:A(h,g,b,w);break;case Ts:h==null&&k(g,b,w,L);break;case Ne:D(h,g,b,w,x,R,L,I,C);break;default:$&1?F(h,g,b,w,x,R,L,I,C):$&6?te(h,g,b,w,x,R,L,I,C):($&64||$&128)&&T.process(h,g,b,w,x,R,L,I,C,U)}q!=null&&x&&Ms(q,h&&h.ref,R,g||h,!g)},S=(h,g,b,w)=>{if(h==null)s(g.el=l(g.children),b,w);else{const x=g.el=h.el;g.children!==h.children&&u(x,g.children)}},A=(h,g,b,w)=>{h==null?s(g.el=a(g.children||""),b,w):g.el=h.el},k=(h,g,b,w)=>{[h.el,h.anchor]=y(h.children,g,b,w,h.el,h.anchor)},O=({el:h,anchor:g},b,w)=>{let x;for(;h&&h!==g;)x=p(h),s(h,b,w),h=x;s(g,b,w)},P=({el:h,anchor:g})=>{let b;for(;h&&h!==g;)b=p(h),r(h),h=b;r(g)},F=(h,g,b,w,x,R,L,I,C)=>{g.type==="svg"?L="svg":g.type==="math"&&(L="mathml"),h==null?Z(g,b,w,x,R,L,I,C):K(h,g,x,R,L,I,C)},Z=(h,g,b,w,x,R,L,I)=>{let C,T;const{props:q,shapeFlag:$,transition:B,dirs:G}=h;if(C=h.el=i(h.type,R,q&&q.is,q),$&8?c(C,h.children):$&16&&ue(h.children,C,null,w,x,Tr(h,R),L,I),G&&Gt(h,null,w,"created"),J(C,h,h.scopeId,L,w),q){for(const me in q)me!=="value"&&!Vn(me)&&o(C,me,null,q[me],R,w);"value"in q&&o(C,"value",null,q.value,R),(T=q.onVnodeBeforeMount)&&mt(T,w,h)}G&&Gt(h,null,w,"beforeMount");const X=mf(x,B);X&&B.beforeEnter(C),s(C,g,b),((T=q&&q.onVnodeMounted)||X||G)&&Ge(()=>{T&&mt(T,w,h),X&&B.enter(C),G&&Gt(h,null,w,"mounted")},x)},J=(h,g,b,w,x)=>{if(b&&m(h,b),w)for(let R=0;R<w.length;R++)m(h,w[R]);if(x){let R=x.subTree;if(g===R||Aa(R.type)&&(R.ssContent===g||R.ssFallback===g)){const L=x.vnode;J(h,L,L.scopeId,L.slotScopeIds,x.parent)}}},ue=(h,g,b,w,x,R,L,I,C=0)=>{for(let T=C;T<h.length;T++){const q=h[T]=I?Vt(h[T]):wt(h[T]);_(null,q,g,b,w,x,R,L,I)}},K=(h,g,b,w,x,R,L)=>{const I=g.el=h.el;let{patchFlag:C,dynamicChildren:T,dirs:q}=g;C|=h.patchFlag&16;const $=h.props||pe,B=g.props||pe;let G;if(b&&Kt(b,!1),(G=B.onVnodeBeforeUpdate)&&mt(G,b,g,h),q&&Gt(g,h,b,"beforeUpdate"),b&&Kt(b,!0),($.innerHTML&&B.innerHTML==null||$.textContent&&B.textContent==null)&&c(I,""),T?Y(h.dynamicChildren,T,I,b,w,Tr(g,x),R):L||ne(h,g,I,null,b,w,Tr(g,x),R,!1),C>0){if(C&16)ge(I,$,B,b,x);else if(C&2&&$.class!==B.class&&o(I,"class",null,B.class,x),C&4&&o(I,"style",$.style,B.style,x),C&8){const X=g.dynamicProps;for(let me=0;me<X.length;me++){const ie=X[me],He=$[ie],De=B[ie];(De!==He||ie==="value")&&o(I,ie,He,De,x,b)}}C&1&&h.children!==g.children&&c(I,g.children)}else!L&&T==null&&ge(I,$,B,b,x);((G=B.onVnodeUpdated)||q)&&Ge(()=>{G&&mt(G,b,g,h),q&&Gt(g,h,b,"updated")},w)},Y=(h,g,b,w,x,R,L)=>{for(let I=0;I<g.length;I++){const C=h[I],T=g[I],q=C.el&&(C.type===Ne||!Zt(C,T)||C.shapeFlag&70)?f(C.el):b;_(C,T,q,null,w,x,R,L,!0)}},ge=(h,g,b,w,x)=>{if(g!==b){if(g!==pe)for(const R in g)!Vn(R)&&!(R in b)&&o(h,R,g[R],null,x,w);for(const R in b){if(Vn(R))continue;const L=b[R],I=g[R];L!==I&&R!=="value"&&o(h,R,I,L,x,w)}"value"in b&&o(h,"value",g.value,b.value,x)}},D=(h,g,b,w,x,R,L,I,C)=>{const T=g.el=h?h.el:l(""),q=g.anchor=h?h.anchor:l("");let{patchFlag:$,dynamicChildren:B,slotScopeIds:G}=g;G&&(I=I?I.concat(G):G),h==null?(s(T,b,w),s(q,b,w),ue(g.children||[],b,q,x,R,L,I,C)):$>0&&$&64&&B&&h.dynamicChildren?(Y(h.dynamicChildren,B,b,x,R,L,I),(g.key!=null||x&&g===x.subTree)&&Ea(h,g,!0)):ne(h,g,b,q,x,R,L,I,C)},te=(h,g,b,w,x,R,L,I,C)=>{g.slotScopeIds=I,h==null?g.shapeFlag&512?x.ctx.activate(g,b,w,L,C):Re(g,b,w,x,R,L,C):qe(h,g,C)},Re=(h,g,b,w,x,R,L)=>{const I=h.component=Nf(h,w,x);if(er(h)&&(I.ctx.renderer=U),Mf(I,!1,L),I.asyncDep){if(x&&x.registerDep(I,Se,L),!h.el){const C=I.subTree=ye(Ue);A(null,C,g,b)}}else Se(I,h,g,b,x,R,L)},qe=(h,g,b)=>{const w=g.component=h.component;if(xf(h,g,b))if(w.asyncDep&&!w.asyncResolved){ce(w,g,b);return}else w.next=g,w.update();else g.el=h.el,w.vnode=g},Se=(h,g,b,w,x,R,L)=>{const I=()=>{if(h.isMounted){let{next:$,bu:B,u:G,parent:X,vnode:me}=h;{const ht=Ra(h);if(ht){$&&($.el=me.el,ce(h,$,L)),ht.asyncDep.then(()=>{h.isUnmounted||I()});return}}let ie=$,He;Kt(h,!1),$?($.el=me.el,ce(h,$,L)):$=me,B&&Rs(B),(He=$.props&&$.props.onVnodeBeforeUpdate)&&mt(He,X,$,me),Kt(h,!0);const De=ci(h),pt=h.subTree;h.subTree=De,_(pt,De,f(pt.el),E(pt),h,x,R),$.el=De.el,ie===null&&Tf(h,De.el),G&&Ge(G,x),(He=$.props&&$.props.onVnodeUpdated)&&Ge(()=>mt(He,X,$,me),x)}else{let $;const{el:B,props:G}=g,{bm:X,m:me,parent:ie,root:He,type:De}=h,pt=jn(g);Kt(h,!1),X&&Rs(X),!pt&&($=G&&G.onVnodeBeforeMount)&&mt($,ie,g),Kt(h,!0);{He.ce&&He.ce._injectChildStyle(De);const ht=h.subTree=ci(h);_(null,ht,b,w,h,x,R),g.el=ht.el}if(me&&Ge(me,x),!pt&&($=G&&G.onVnodeMounted)){const ht=g;Ge(()=>mt($,ie,ht),x)}(g.shapeFlag&256||ie&&jn(ie.vnode)&&ie.vnode.shapeFlag&256)&&h.a&&Ge(h.a,x),h.isMounted=!0,g=b=w=null}};h.scope.on();const C=h.effect=new kl(I);h.scope.off();const T=h.update=C.run.bind(C),q=h.job=C.runIfDirty.bind(C);q.i=h,q.id=h.uid,C.scheduler=()=>Eo(q),Kt(h,!0),T()},ce=(h,g,b)=>{g.component=h;const w=h.vnode.props;h.vnode=g,h.next=null,cf(h,g.props,w,b),pf(h,g.children,b),Ht(),ei(h),zt()},ne=(h,g,b,w,x,R,L,I,C=!1)=>{const T=h&&h.children,q=h?h.shapeFlag:0,$=g.children,{patchFlag:B,shapeFlag:G}=g;if(B>0){if(B&128){Nt(T,$,b,w,x,R,L,I,C);return}else if(B&256){Rt(T,$,b,w,x,R,L,I,C);return}}G&8?(q&16&&Qe(T,x,R),$!==T&&c(b,$)):q&16?G&16?Nt(T,$,b,w,x,R,L,I,C):Qe(T,x,R,!0):(q&8&&c(b,""),G&16&&ue($,b,w,x,R,L,I,C))},Rt=(h,g,b,w,x,R,L,I,C)=>{h=h||mn,g=g||mn;const T=h.length,q=g.length,$=Math.min(T,q);let B;for(B=0;B<$;B++){const G=g[B]=C?Vt(g[B]):wt(g[B]);_(h[B],G,b,null,x,R,L,I,C)}T>q?Qe(h,x,R,!0,!1,$):ue(g,b,w,x,R,L,I,C,$)},Nt=(h,g,b,w,x,R,L,I,C)=>{let T=0;const q=g.length;let $=h.length-1,B=q-1;for(;T<=$&&T<=B;){const G=h[T],X=g[T]=C?Vt(g[T]):wt(g[T]);if(Zt(G,X))_(G,X,b,null,x,R,L,I,C);else break;T++}for(;T<=$&&T<=B;){const G=h[$],X=g[B]=C?Vt(g[B]):wt(g[B]);if(Zt(G,X))_(G,X,b,null,x,R,L,I,C);else break;$--,B--}if(T>$){if(T<=B){const G=B+1,X=G<q?g[G].el:w;for(;T<=B;)_(null,g[T]=C?Vt(g[T]):wt(g[T]),b,X,x,R,L,I,C),T++}}else if(T>B)for(;T<=$;)Me(h[T],x,R,!0),T++;else{const G=T,X=T,me=new Map;for(T=X;T<=B;T++){const ze=g[T]=C?Vt(g[T]):wt(g[T]);ze.key!=null&&me.set(ze.key,T)}let ie,He=0;const De=B-X+1;let pt=!1,ht=0;const On=new Array(De);for(T=0;T<De;T++)On[T]=0;for(T=G;T<=$;T++){const ze=h[T];if(He>=De){Me(ze,x,R,!0);continue}let gt;if(ze.key!=null)gt=me.get(ze.key);else for(ie=X;ie<=B;ie++)if(On[ie-X]===0&&Zt(ze,g[ie])){gt=ie;break}gt===void 0?Me(ze,x,R,!0):(On[gt-X]=T+1,gt>=ht?ht=gt:pt=!0,_(ze,g[gt],b,null,x,R,L,I,C),He++)}const Wo=pt?bf(On):mn;for(ie=Wo.length-1,T=De-1;T>=0;T--){const ze=X+T,gt=g[ze],Qo=ze+1<q?g[ze+1].el:w;On[T]===0?_(null,gt,b,Qo,x,R,L,I,C):pt&&(ie<0||T!==Wo[ie]?dt(gt,b,Qo,2):ie--)}}},dt=(h,g,b,w,x=null)=>{const{el:R,type:L,transition:I,children:C,shapeFlag:T}=h;if(T&6){dt(h.component.subTree,g,b,w);return}if(T&128){h.suspense.move(g,b,w);return}if(T&64){L.move(h,g,b,U);return}if(L===Ne){s(R,g,b);for(let $=0;$<C.length;$++)dt(C[$],g,b,w);s(h.anchor,g,b);return}if(L===Ts){O(h,g,b);return}if(w!==2&&T&1&&I)if(w===0)I.beforeEnter(R),s(R,g,b),Ge(()=>I.enter(R),x);else{const{leave:$,delayLeave:B,afterLeave:G}=I,X=()=>s(R,g,b),me=()=>{$(R,()=>{X(),G&&G()})};B?B(R,X,me):me()}else s(R,g,b)},Me=(h,g,b,w=!1,x=!1)=>{const{type:R,props:L,ref:I,children:C,dynamicChildren:T,shapeFlag:q,patchFlag:$,dirs:B,cacheIndex:G}=h;if($===-2&&(x=!1),I!=null&&Ms(I,null,b,h,!0),G!=null&&(g.renderCache[G]=void 0),q&256){g.ctx.deactivate(h);return}const X=q&1&&B,me=!jn(h);let ie;if(me&&(ie=L&&L.onVnodeBeforeUnmount)&&mt(ie,g,h),q&6)bs(h.component,b,w);else{if(q&128){h.suspense.unmount(b,w);return}X&&Gt(h,null,g,"beforeUnmount"),q&64?h.type.remove(h,g,b,U,w):T&&!T.hasOnce&&(R!==Ne||$>0&&$&64)?Qe(T,g,b,!1,!0):(R===Ne&&$&384||!x&&q&16)&&Qe(C,g,b),w&&cn(h)}(me&&(ie=L&&L.onVnodeUnmounted)||X)&&Ge(()=>{ie&&mt(ie,g,h),X&&Gt(h,null,g,"unmounted")},b)},cn=h=>{const{type:g,el:b,anchor:w,transition:x}=h;if(g===Ne){un(b,w);return}if(g===Ts){P(h);return}const R=()=>{r(b),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(h.shapeFlag&1&&x&&!x.persisted){const{leave:L,delayLeave:I}=x,C=()=>L(b,R);I?I(h.el,R,C):C()}else R()},un=(h,g)=>{let b;for(;h!==g;)b=p(h),r(h),h=b;r(g)},bs=(h,g,b)=>{const{bum:w,scope:x,job:R,subTree:L,um:I,m:C,a:T}=h;ai(C),ai(T),w&&Rs(w),x.stop(),R&&(R.flags|=8,Me(L,h,g,b)),I&&Ge(I,g),Ge(()=>{h.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&h.asyncDep&&!h.asyncResolved&&h.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},Qe=(h,g,b,w=!1,x=!1,R=0)=>{for(let L=R;L<h.length;L++)Me(h[L],g,b,w,x)},E=h=>{if(h.shapeFlag&6)return E(h.component.subTree);if(h.shapeFlag&128)return h.suspense.next();const g=p(h.anchor||h.el),b=g&&g[Uu];return b?p(b):g};let M=!1;const N=(h,g,b)=>{h==null?g._vnode&&Me(g._vnode,null,null,!0):_(g._vnode||null,h,g,null,null,null,b),g._vnode=h,M||(M=!0,ei(),Kl(),M=!1)},U={p:_,um:Me,m:dt,r:cn,mt:Re,mc:ue,pc:ne,pbc:Y,n:E,o:e};return{render:N,hydrate:void 0,createApp:lf(N)}}function Tr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Kt({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function mf(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ea(e,t,n=!1){const s=e.children,r=t.children;if(V(s)&&V(r))for(let o=0;o<s.length;o++){const i=s[o];let l=r[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[o]=Vt(r[o]),l.el=i.el),!n&&l.patchFlag!==-2&&Ea(i,l)),l.type===sr&&(l.el=i.el)}}function bf(e){const t=e.slice(),n=[0];let s,r,o,i,l;const a=e.length;for(s=0;s<a;s++){const u=e[s];if(u!==0){if(r=n[n.length-1],e[r]<u){t[s]=r,n.push(s);continue}for(o=0,i=n.length-1;o<i;)l=o+i>>1,e[n[l]]<u?o=l+1:i=l;u<e[n[o]]&&(o>0&&(t[s]=n[o-1]),n[o]=s)}}for(o=n.length,i=n[o-1];o-- >0;)n[o]=i,i=t[i];return n}function Ra(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ra(t)}function ai(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const yf=Symbol.for("v-scx"),_f=()=>Pt(yf);function Sn(e,t,n){return xa(e,t,n)}function xa(e,t,n=pe){const{immediate:s,deep:r,flush:o,once:i}=n,l=xe({},n),a=t&&s||!t&&o!=="post";let u;if(ts){if(o==="sync"){const m=_f();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=St,m.resume=St,m.pause=St,m}}const c=ke;l.call=(m,y,_)=>lt(m,c,y,_);let f=!1;o==="post"?l.scheduler=m=>{Ge(m,c&&c.suspense)}:o!=="sync"&&(f=!0,l.scheduler=(m,y)=>{y?m():Eo(m)}),l.augmentJob=m=>{t&&(m.flags|=4),f&&(m.flags|=2,c&&(m.id=c.uid,m.i=c))};const p=Nu(e,t,l);return ts&&(u?u.push(p):a&&p()),p}function vf(e,t,n){const s=this.proxy,r=we(e)?e.includes(".")?Ta(s,e):()=>s[e]:e.bind(s,s);let o;W(t)?o=t:(o=t.handler,n=t);const i=us(this),l=xa(r,o.bind(s),n);return i(),l}function Ta(e,t){const n=t.split(".");return()=>{let s=e;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const wf=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${rt(t)}Modifiers`]||e[`${on(t)}Modifiers`];function Sf(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||pe;let r=n;const o=t.startsWith("update:"),i=o&&wf(s,t.slice(7));i&&(i.trim&&(r=n.map(c=>we(c)?c.trim():c)),i.number&&(r=n.map(Ps)));let l,a=s[l=_r(t)]||s[l=_r(rt(t))];!a&&o&&(a=s[l=_r(on(t))]),a&&lt(a,e,6,r);const u=s[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,lt(u,e,6,r)}}function ka(e,t,n=!1){const s=t.emitsCache,r=s.get(e);if(r!==void 0)return r;const o=e.emits;let i={},l=!1;if(!W(e)){const a=u=>{const c=ka(u,t,!0);c&&(l=!0,xe(i,c))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!o&&!l?(he(e)&&s.set(e,null),null):(V(o)?o.forEach(a=>i[a]=null):xe(i,o),he(e)&&s.set(e,i),i)}function nr(e,t){return!e||!Ks(t)?!1:(t=t.slice(2).replace(/Once$/,""),re(e,t[0].toLowerCase()+t.slice(1))||re(e,on(t))||re(e,t))}function ci(e){const{type:t,vnode:n,proxy:s,withProxy:r,propsOptions:[o],slots:i,attrs:l,emit:a,render:u,renderCache:c,props:f,data:p,setupState:m,ctx:y,inheritAttrs:_}=e,S=$s(e);let A,k;try{if(n.shapeFlag&4){const P=r||s,F=P;A=wt(u.call(F,P,c,f,m,p,y)),k=l}else{const P=t;A=wt(P.length>1?P(f,{attrs:l,slots:i,emit:a}):P(f,null)),k=t.props?l:Ef(l)}}catch(P){Hn.length=0,Ys(P,e,1),A=ye(Ue)}let O=A;if(k&&_!==!1){const P=Object.keys(k),{shapeFlag:F}=O;P.length&&F&7&&(o&&P.some(uo)&&(k=Rf(k,o)),O=jt(O,k,!1,!0))}return n.dirs&&(O=jt(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(n.dirs):n.dirs),n.transition&&Xn(O,n.transition),A=O,$s(S),A}const Ef=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ks(n))&&((t||(t={}))[n]=e[n]);return t},Rf=(e,t)=>{const n={};for(const s in e)(!uo(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function xf(e,t,n){const{props:s,children:r,component:o}=e,{props:i,children:l,patchFlag:a}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return s?ui(s,i,u):!!i;if(a&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const p=c[f];if(i[p]!==s[p]&&!nr(u,p))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===i?!1:s?i?ui(s,i,u):!0:!!i;return!1}function ui(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const o=s[r];if(t[o]!==e[o]&&!nr(n,o))return!0}return!1}function Tf({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Aa=e=>e.__isSuspense;function kf(e,t){t&&t.pendingBranch?V(e)?t.effects.push(...e):t.effects.push(e):Du(e)}const Ne=Symbol.for("v-fgt"),sr=Symbol.for("v-txt"),Ue=Symbol.for("v-cmt"),Ts=Symbol.for("v-stc"),Hn=[];let We=null;function j(e=!1){Hn.push(We=e?null:[])}function Af(){Hn.pop(),We=Hn[Hn.length-1]||null}let es=1;function fi(e,t=!1){es+=e,e<0&&We&&t&&(We.hasOnce=!0)}function Ca(e){return e.dynamicChildren=es>0?We||mn:null,Af(),es>0&&We&&We.push(e),e}function z(e,t,n,s,r,o){return Ca(d(e,t,n,s,r,o,!0))}function rr(e,t,n,s,r){return Ca(ye(e,t,n,s,r,!0))}function Us(e){return e?e.__v_isVNode===!0:!1}function Zt(e,t){return e.type===t.type&&e.key===t.key}const Ia=({key:e})=>e??null,ks=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?we(e)||Oe(e)||W(e)?{i:Ve,r:e,k:t,f:!!n}:e:null);function d(e,t=null,n=null,s=0,r=null,o=e===Ne?0:1,i=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ia(t),ref:t&&ks(t),scopeId:Ql,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ve};return l?(xo(a,n),o&128&&e.normalize(a)):n&&(a.shapeFlag|=we(n)?8:16),es>0&&!i&&We&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&We.push(a),a}const ye=Cf;function Cf(e,t=null,n=null,s=0,r=null,o=!1){if((!e||e===ca)&&(e=Ue),Us(e)){const l=jt(e,t,!0);return n&&xo(l,n),es>0&&!o&&We&&(l.shapeFlag&6?We[We.indexOf(e)]=l:We.push(l)),l.patchFlag=-2,l}if(Bf(e)&&(e=e.__vccOpts),t){t=If(t);let{class:l,style:a}=t;l&&!we(l)&&(t.class=Ze(l)),he(a)&&(wo(a)&&!V(a)&&(a=xe({},a)),t.style=Zs(a))}const i=we(e)?1:Aa(e)?128:Jl(e)?64:he(e)?4:W(e)?2:0;return d(e,t,n,s,r,i,o,!0)}function If(e){return e?wo(e)||ma(e)?xe({},e):e:null}function jt(e,t,n=!1,s=!1){const{props:r,ref:o,patchFlag:i,children:l,transition:a}=e,u=t?Of(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Ia(u),ref:t&&t.ref?n&&o?V(o)?o.concat(ks(t)):[o,ks(t)]:ks(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ne?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&jt(e.ssContent),ssFallback:e.ssFallback&&jt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&s&&Xn(c,a.clone(c)),c}function H(e=" ",t=0){return ye(sr,null,e,t)}function cs(e,t){const n=ye(Ts,null,e);return n.staticCount=t,n}function ve(e="",t=!1){return t?(j(),rr(Ue,null,e)):ye(Ue,null,e)}function wt(e){return e==null||typeof e=="boolean"?ye(Ue):V(e)?ye(Ne,null,e.slice()):Us(e)?Vt(e):ye(sr,null,String(e))}function Vt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:jt(e)}function xo(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(V(t))n=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),xo(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!ma(t)?t._ctx=Ve:r===3&&Ve&&(Ve.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else W(t)?(t={default:t,_ctx:Ve},n=32):(t=String(t),s&64?(n=16,t=[H(t)]):n=8);e.children=t,e.shapeFlag|=n}function Of(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=Ze([t.class,s.class]));else if(r==="style")t.style=Zs([t.style,s.style]);else if(Ks(r)){const o=t[r],i=s[r];i&&o!==i&&!(V(o)&&o.includes(i))&&(t[r]=o?[].concat(o,i):i)}else r!==""&&(t[r]=s[r])}return t}function mt(e,t,n,s=null){lt(e,t,7,[n,s])}const Pf=pa();let Lf=0;function Nf(e,t,n){const s=e.type,r=(t?t.appContext:e.appContext)||Pf,o={uid:Lf++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Tl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ya(s,r),emitsOptions:ka(s,r),emit:null,emitted:null,propsDefaults:pe,inheritAttrs:s.inheritAttrs,ctx:pe,data:pe,props:pe,attrs:pe,slots:pe,refs:pe,setupState:pe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Sf.bind(null,o),e.ce&&e.ce(o),o}let ke=null;const $f=()=>ke||Ve;let Vs,Kr;{const e=Js(),t=(n,s)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(s),o=>{r.length>1?r.forEach(i=>i(o)):r[0](o)}};Vs=t("__VUE_INSTANCE_SETTERS__",n=>ke=n),Kr=t("__VUE_SSR_SETTERS__",n=>ts=n)}const us=e=>{const t=ke;return Vs(e),e.scope.on(),()=>{e.scope.off(),Vs(t)}},di=()=>{ke&&ke.scope.off(),Vs(null)};function Oa(e){return e.vnode.shapeFlag&4}let ts=!1;function Mf(e,t=!1,n=!1){t&&Kr(t);const{props:s,children:r}=e.vnode,o=Oa(e);af(e,s,o,t),df(e,r,n);const i=o?Df(e,t):void 0;return t&&Kr(!1),i}function Df(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Yu);const{setup:s}=n;if(s){Ht();const r=e.setupContext=s.length>1?Vf(e):null,o=us(e),i=as(s,e,0,[e.props,r]),l=_l(i);if(zt(),o(),(l||e.sp)&&!jn(e)&&sa(e),l){if(i.then(di,di),t)return i.then(a=>{pi(e,a)}).catch(a=>{Ys(a,e,0)});e.asyncDep=i}else pi(e,i)}else Pa(e)}function pi(e,t,n){W(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:he(t)&&(e.setupState=Hl(t)),Pa(e)}function Pa(e,t,n){const s=e.type;e.render||(e.render=s.render||St);{const r=us(e);Ht();try{ef(e)}finally{zt(),r()}}}const Uf={get(e,t){return Ae(e,"get",""),e[t]}};function Vf(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Uf),slots:e.slots,emit:e.emit,expose:t}}function or(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Hl(Tu(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in qn)return qn[n](e)},has(t,n){return n in t||n in qn}})):e.proxy}function Ff(e,t=!0){return W(e)?e.displayName||e.name:e.name||t&&e.__name}function Bf(e){return W(e)&&"__vccOpts"in e}const Xe=(e,t)=>Pu(e,t,ts);function To(e,t,n){const s=arguments.length;return s===2?he(t)&&!V(t)?Us(t)?ye(e,null,[t]):ye(e,t):ye(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Us(n)&&(n=[n]),ye(e,t,n))}const jf="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wr;const hi=typeof window<"u"&&window.trustedTypes;if(hi)try{Wr=hi.createPolicy("vue",{createHTML:e=>e})}catch{}const La=Wr?e=>Wr.createHTML(e):e=>e,qf="http://www.w3.org/2000/svg",Hf="http://www.w3.org/1998/Math/MathML",At=typeof document<"u"?document:null,gi=At&&At.createElement("template"),zf={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const r=t==="svg"?At.createElementNS(qf,e):t==="mathml"?At.createElementNS(Hf,e):n?At.createElement(e,{is:n}):At.createElement(e);return e==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:e=>At.createTextNode(e),createComment:e=>At.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>At.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,r,o){const i=n?n.previousSibling:t.lastChild;if(r&&(r===o||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===o||!(r=r.nextSibling)););else{gi.innerHTML=La(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const l=gi.content;if(s==="svg"||s==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},$t="transition",Ln="animation",ns=Symbol("_vtc"),Na={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Gf=xe({},Zl,Na),Kf=e=>(e.displayName="Transition",e.props=Gf,e),$a=Kf((e,{slots:t})=>To(Bu,Wf(e),t)),Wt=(e,t=[])=>{V(e)?e.forEach(n=>n(...t)):e&&e(...t)},mi=e=>e?V(e)?e.some(t=>t.length>1):e.length>1:!1;function Wf(e){const t={};for(const D in e)D in Na||(t[D]=e[D]);if(e.css===!1)return t;const{name:n="v",type:s,duration:r,enterFromClass:o=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:a=o,appearActiveClass:u=i,appearToClass:c=l,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,y=Qf(r),_=y&&y[0],S=y&&y[1],{onBeforeEnter:A,onEnter:k,onEnterCancelled:O,onLeave:P,onLeaveCancelled:F,onBeforeAppear:Z=A,onAppear:J=k,onAppearCancelled:ue=O}=t,K=(D,te,Re,qe)=>{D._enterCancelled=qe,Qt(D,te?c:l),Qt(D,te?u:i),Re&&Re()},Y=(D,te)=>{D._isLeaving=!1,Qt(D,f),Qt(D,m),Qt(D,p),te&&te()},ge=D=>(te,Re)=>{const qe=D?J:k,Se=()=>K(te,D,Re);Wt(qe,[te,Se]),bi(()=>{Qt(te,D?a:o),Tt(te,D?c:l),mi(qe)||yi(te,s,_,Se)})};return xe(t,{onBeforeEnter(D){Wt(A,[D]),Tt(D,o),Tt(D,i)},onBeforeAppear(D){Wt(Z,[D]),Tt(D,a),Tt(D,u)},onEnter:ge(!1),onAppear:ge(!0),onLeave(D,te){D._isLeaving=!0;const Re=()=>Y(D,te);Tt(D,f),D._enterCancelled?(Tt(D,p),wi()):(wi(),Tt(D,p)),bi(()=>{D._isLeaving&&(Qt(D,f),Tt(D,m),mi(P)||yi(D,s,S,Re))}),Wt(P,[D,Re])},onEnterCancelled(D){K(D,!1,void 0,!0),Wt(O,[D])},onAppearCancelled(D){K(D,!0,void 0,!0),Wt(ue,[D])},onLeaveCancelled(D){Y(D),Wt(F,[D])}})}function Qf(e){if(e==null)return null;if(he(e))return[kr(e.enter),kr(e.leave)];{const t=kr(e);return[t,t]}}function kr(e){return Xc(e)}function Tt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[ns]||(e[ns]=new Set)).add(t)}function Qt(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[ns];n&&(n.delete(t),n.size||(e[ns]=void 0))}function bi(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Jf=0;function yi(e,t,n,s){const r=e._endId=++Jf,o=()=>{r===e._endId&&s()};if(n!=null)return setTimeout(o,n);const{type:i,timeout:l,propCount:a}=Zf(e,t);if(!i)return s();const u=i+"end";let c=0;const f=()=>{e.removeEventListener(u,p),o()},p=m=>{m.target===e&&++c>=a&&f()};setTimeout(()=>{c<a&&f()},l+1),e.addEventListener(u,p)}function Zf(e,t){const n=window.getComputedStyle(e),s=y=>(n[y]||"").split(", "),r=s(`${$t}Delay`),o=s(`${$t}Duration`),i=_i(r,o),l=s(`${Ln}Delay`),a=s(`${Ln}Duration`),u=_i(l,a);let c=null,f=0,p=0;t===$t?i>0&&(c=$t,f=i,p=o.length):t===Ln?u>0&&(c=Ln,f=u,p=a.length):(f=Math.max(i,u),c=f>0?i>u?$t:Ln:null,p=c?c===$t?o.length:a.length:0);const m=c===$t&&/\b(transform|all)(,|$)/.test(s(`${$t}Property`).toString());return{type:c,timeout:f,propCount:p,hasTransform:m}}function _i(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>vi(n)+vi(e[s])))}function vi(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function wi(){return document.body.offsetHeight}function Xf(e,t,n){const s=e[ns];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Si=Symbol("_vod"),Yf=Symbol("_vsh"),ed=Symbol(""),td=/(^|;)\s*display\s*:/;function nd(e,t,n){const s=e.style,r=we(n);let o=!1;if(n&&!r){if(t)if(we(t))for(const i of t.split(";")){const l=i.slice(0,i.indexOf(":")).trim();n[l]==null&&As(s,l,"")}else for(const i in t)n[i]==null&&As(s,i,"");for(const i in n)i==="display"&&(o=!0),As(s,i,n[i])}else if(r){if(t!==n){const i=s[ed];i&&(n+=";"+i),s.cssText=n,o=td.test(n)}}else t&&e.removeAttribute("style");Si in e&&(e[Si]=o?s.display:"",e[Yf]&&(s.display="none"))}const Ei=/\s*!important$/;function As(e,t,n){if(V(n))n.forEach(s=>As(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=sd(e,t);Ei.test(n)?e.setProperty(on(s),n.replace(Ei,""),"important"):e[s]=n}}const Ri=["Webkit","Moz","ms"],Ar={};function sd(e,t){const n=Ar[t];if(n)return n;let s=rt(t);if(s!=="filter"&&s in e)return Ar[t]=s;s=Qs(s);for(let r=0;r<Ri.length;r++){const o=Ri[r]+s;if(o in e)return Ar[t]=o}return t}const xi="http://www.w3.org/1999/xlink";function Ti(e,t,n,s,r,o=ru(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(xi,t.slice(6,t.length)):e.setAttributeNS(xi,t,n):n==null||o&&!El(n)?e.removeAttribute(t):e.setAttribute(t,o?"":Et(n)?String(n):n)}function ki(e,t,n,s,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?La(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const l=o==="OPTION"?e.getAttribute("value")||"":e.value,a=n==null?e.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in e))&&(e.value=a),n==null&&e.removeAttribute(t),e._value=n;return}let i=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=El(n):n==null&&l==="string"?(n="",i=!0):l==="number"&&(n=0,i=!0)}try{e[t]=n}catch{}i&&e.removeAttribute(r||t)}function Ot(e,t,n,s){e.addEventListener(t,n,s)}function rd(e,t,n,s){e.removeEventListener(t,n,s)}const Ai=Symbol("_vei");function od(e,t,n,s,r=null){const o=e[Ai]||(e[Ai]={}),i=o[t];if(s&&i)i.value=s;else{const[l,a]=id(t);if(s){const u=o[t]=cd(s,r);Ot(e,l,u,a)}else i&&(rd(e,l,i,a),o[t]=void 0)}}const Ci=/(?:Once|Passive|Capture)$/;function id(e){let t;if(Ci.test(e)){t={};let s;for(;s=e.match(Ci);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):on(e.slice(2)),t]}let Cr=0;const ld=Promise.resolve(),ad=()=>Cr||(ld.then(()=>Cr=0),Cr=Date.now());function cd(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;lt(ud(s,n.value),t,5,[s])};return n.value=e,n.attached=ad(),n}function ud(e,t){if(V(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const Ii=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,fd=(e,t,n,s,r,o)=>{const i=r==="svg";t==="class"?Xf(e,s,i):t==="style"?nd(e,n,s):Ks(t)?uo(t)||od(e,t,n,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):dd(e,t,s,i))?(ki(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ti(e,t,s,i,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!we(s))?ki(e,rt(t),s,o,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Ti(e,t,s,i))};function dd(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ii(t)&&W(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Ii(t)&&we(n)?!1:t in e}const qt=e=>{const t=e.props["onUpdate:modelValue"]||!1;return V(t)?n=>Rs(t,n):t};function pd(e){e.target.composing=!0}function Oi(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const nt=Symbol("_assign"),Te={created(e,{modifiers:{lazy:t,trim:n,number:s}},r){e[nt]=qt(r);const o=s||r.props&&r.props.type==="number";Ot(e,t?"change":"input",i=>{if(i.target.composing)return;let l=e.value;n&&(l=l.trim()),o&&(l=Ps(l)),e[nt](l)}),n&&Ot(e,"change",()=>{e.value=e.value.trim()}),t||(Ot(e,"compositionstart",pd),Ot(e,"compositionend",Oi),Ot(e,"change",Oi))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:r,number:o}},i){if(e[nt]=qt(i),e.composing)return;const l=(o||e.type==="number")&&!/^0\d/.test(e.value)?Ps(e.value):e.value,a=t??"";l!==a&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||r&&e.value.trim()===a)||(e.value=a))}},hd={deep:!0,created(e,t,n){e[nt]=qt(n),Ot(e,"change",()=>{const s=e._modelValue,r=Rn(e),o=e.checked,i=e[nt];if(V(s)){const l=ho(s,r),a=l!==-1;if(o&&!a)i(s.concat(r));else if(!o&&a){const u=[...s];u.splice(l,1),i(u)}}else if(kn(s)){const l=new Set(s);o?l.add(r):l.delete(r),i(l)}else i(Ma(e,o))})},mounted:Pi,beforeUpdate(e,t,n){e[nt]=qt(n),Pi(e,t,n)}};function Pi(e,{value:t,oldValue:n},s){e._modelValue=t;let r;if(V(t))r=ho(t,s.props.value)>-1;else if(kn(t))r=t.has(s.props.value);else{if(t===n)return;r=tn(t,Ma(e,!0))}e.checked!==r&&(e.checked=r)}const Qr={created(e,{value:t},n){e.checked=tn(t,n.props.value),e[nt]=qt(n),Ot(e,"change",()=>{e[nt](Rn(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e[nt]=qt(s),t!==n&&(e.checked=tn(t,s.props.value))}},Fs={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const r=kn(t);Ot(e,"change",()=>{const o=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>n?Ps(Rn(i)):Rn(i));e[nt](e.multiple?r?new Set(o):o:o[0]),e._assigning=!0,So(()=>{e._assigning=!1})}),e[nt]=qt(s)},mounted(e,{value:t}){Li(e,t)},beforeUpdate(e,t,n){e[nt]=qt(n)},updated(e,{value:t}){e._assigning||Li(e,t)}};function Li(e,t){const n=e.multiple,s=V(t);if(!(n&&!s&&!kn(t))){for(let r=0,o=e.options.length;r<o;r++){const i=e.options[r],l=Rn(i);if(n)if(s){const a=typeof l;a==="string"||a==="number"?i.selected=t.some(u=>String(u)===String(l)):i.selected=ho(t,l)>-1}else i.selected=t.has(l);else if(tn(Rn(i),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Rn(e){return"_value"in e?e._value:e.value}function Ma(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Jr={created(e,t,n){Ss(e,t,n,null,"created")},mounted(e,t,n){Ss(e,t,n,null,"mounted")},beforeUpdate(e,t,n,s){Ss(e,t,n,s,"beforeUpdate")},updated(e,t,n,s){Ss(e,t,n,s,"updated")}};function gd(e,t){switch(e){case"SELECT":return Fs;case"TEXTAREA":return Te;default:switch(t){case"checkbox":return hd;case"radio":return Qr;default:return Te}}}function Ss(e,t,n,s,r){const i=gd(e.tagName,n.props&&n.props.type)[r];i&&i(e,t,n,s)}const md=["ctrl","shift","alt","meta"],bd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>md.some(n=>e[`${n}Key`]&&!t.includes(n))},ir=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(r,...o)=>{for(let i=0;i<t.length;i++){const l=bd[t[i]];if(l&&l(r,t))return}return e(r,...o)})},yd=xe({patchProp:fd},zf);let Ni;function _d(){return Ni||(Ni=hf(yd))}const vd=(...e)=>{const t=_d().createApp(...e),{mount:n}=t;return t.mount=s=>{const r=Sd(s);if(!r)return;const o=t._component;!W(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const i=n(r,!1,wd(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},t};function wd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Sd(e){return we(e)?document.querySelector(e):e}const ct=(e,t)=>{const n=e.__vccOpts||e;for(const[s,r]of t)n[s]=r;return n},Ed={name:"App"},Rd={id:"app"};function xd(e,t,n,s,r,o){const i=it("router-view");return j(),z("div",Rd,[ye(i,null,{default:En(({Component:l})=>[ye($a,{name:"page",mode:"out-in"},{default:En(()=>[(j(),rr(Xu(l)))]),_:2},1024)]),_:1})])}const Td=ct(Ed,[["render",xd]]);function kd(){return Da().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Da(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const Ad=typeof Proxy=="function",Cd="devtools-plugin:setup",Id="plugin:settings:set";let dn,Zr;function Od(){var e;return dn!==void 0||(typeof window<"u"&&window.performance?(dn=!0,Zr=window.performance):typeof globalThis<"u"&&(!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance)?(dn=!0,Zr=globalThis.perf_hooks.performance):dn=!1),dn}function Pd(){return Od()?Zr.now():Date.now()}class Ld{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const s={};if(t.settings)for(const i in t.settings){const l=t.settings[i];s[i]=l.defaultValue}const r=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},s);try{const i=localStorage.getItem(r),l=JSON.parse(i);Object.assign(o,l)}catch{}this.fallbacks={getSettings(){return o},setSettings(i){try{localStorage.setItem(r,JSON.stringify(i))}catch{}o=i},now(){return Pd()}},n&&n.on(Id,(i,l)=>{i===this.plugin.id&&this.fallbacks.setSettings(l)}),this.proxiedOn=new Proxy({},{get:(i,l)=>this.target?this.target.on[l]:(...a)=>{this.onQueue.push({method:l,args:a})}}),this.proxiedTarget=new Proxy({},{get:(i,l)=>this.target?this.target[l]:l==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(l)?(...a)=>(this.targetQueue.push({method:l,args:a,resolve:()=>{}}),this.fallbacks[l](...a)):(...a)=>new Promise(u=>{this.targetQueue.push({method:l,args:a,resolve:u})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function Nd(e,t){const n=e,s=Da(),r=kd(),o=Ad&&n.enableEarlyProxy;if(r&&(s.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))r.emit(Cd,e,t);else{const i=o?new Ld(n,r):null;(s.__VUE_DEVTOOLS_PLUGINS__=s.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:i}),i&&t(i.proxiedTarget)}}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const gn=typeof document<"u";function Ua(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function $d(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Ua(e.default)}const se=Object.assign;function Ir(e,t){const n={};for(const s in t){const r=t[s];n[s]=at(r)?r.map(e):e(r)}return n}const zn=()=>{},at=Array.isArray,Va=/#/g,Md=/&/g,Dd=/\//g,Ud=/=/g,Vd=/\?/g,Fa=/\+/g,Fd=/%5B/g,Bd=/%5D/g,Ba=/%5E/g,jd=/%60/g,ja=/%7B/g,qd=/%7C/g,qa=/%7D/g,Hd=/%20/g;function ko(e){return encodeURI(""+e).replace(qd,"|").replace(Fd,"[").replace(Bd,"]")}function zd(e){return ko(e).replace(ja,"{").replace(qa,"}").replace(Ba,"^")}function Xr(e){return ko(e).replace(Fa,"%2B").replace(Hd,"+").replace(Va,"%23").replace(Md,"%26").replace(jd,"`").replace(ja,"{").replace(qa,"}").replace(Ba,"^")}function Gd(e){return Xr(e).replace(Ud,"%3D")}function Kd(e){return ko(e).replace(Va,"%23").replace(Vd,"%3F")}function Wd(e){return e==null?"":Kd(e).replace(Dd,"%2F")}function ss(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Qd=/\/$/,Jd=e=>e.replace(Qd,"");function Or(e,t,n="/"){let s,r={},o="",i="";const l=t.indexOf("#");let a=t.indexOf("?");return l<a&&l>=0&&(a=-1),a>-1&&(s=t.slice(0,a),o=t.slice(a+1,l>-1?l:t.length),r=e(o)),l>-1&&(s=s||t.slice(0,l),i=t.slice(l,t.length)),s=ep(s??t,n),{fullPath:s+(o&&"?")+o+i,path:s,query:r,hash:ss(i)}}function Zd(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function $i(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Xd(e,t,n){const s=t.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&xn(t.matched[s],n.matched[r])&&Ha(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function xn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ha(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Yd(e[n],t[n]))return!1;return!0}function Yd(e,t){return at(e)?Mi(e,t):at(t)?Mi(t,e):e===t}function Mi(e,t){return at(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function ep(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let o=n.length-1,i,l;for(i=0;i<s.length;i++)if(l=s[i],l!==".")if(l==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+s.slice(i).join("/")}const Mt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var rs;(function(e){e.pop="pop",e.push="push"})(rs||(rs={}));var Gn;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Gn||(Gn={}));function tp(e){if(!e)if(gn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Jd(e)}const np=/^[^#]+#/;function sp(e,t){return e.replace(np,"#")+t}function rp(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const lr=()=>({left:window.scrollX,top:window.scrollY});function op(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=rp(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Di(e,t){return(history.state?history.state.position-t:-1)+e}const Yr=new Map;function ip(e,t){Yr.set(e,t)}function lp(e){const t=Yr.get(e);return Yr.delete(e),t}let ap=()=>location.protocol+"//"+location.host;function za(e,t){const{pathname:n,search:s,hash:r}=t,o=e.indexOf("#");if(o>-1){let l=r.includes(e.slice(o))?e.slice(o).length:1,a=r.slice(l);return a[0]!=="/"&&(a="/"+a),$i(a,"")}return $i(n,e)+s+r}function cp(e,t,n,s){let r=[],o=[],i=null;const l=({state:p})=>{const m=za(e,location),y=n.value,_=t.value;let S=0;if(p){if(n.value=m,t.value=p,i&&i===y){i=null;return}S=_?p.position-_.position:0}else s(m);r.forEach(A=>{A(n.value,y,{delta:S,type:rs.pop,direction:S?S>0?Gn.forward:Gn.back:Gn.unknown})})};function a(){i=n.value}function u(p){r.push(p);const m=()=>{const y=r.indexOf(p);y>-1&&r.splice(y,1)};return o.push(m),m}function c(){const{history:p}=window;p.state&&p.replaceState(se({},p.state,{scroll:lr()}),"")}function f(){for(const p of o)p();o=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:a,listen:u,destroy:f}}function Ui(e,t,n,s=!1,r=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:r?lr():null}}function up(e){const{history:t,location:n}=window,s={value:za(e,n)},r={value:t.state};r.value||o(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(a,u,c){const f=e.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+a:ap()+e+a;try{t[c?"replaceState":"pushState"](u,"",p),r.value=u}catch(m){console.error(m),n[c?"replace":"assign"](p)}}function i(a,u){const c=se({},t.state,Ui(r.value.back,a,r.value.forward,!0),u,{position:r.value.position});o(a,c,!0),s.value=a}function l(a,u){const c=se({},r.value,t.state,{forward:a,scroll:lr()});o(c.current,c,!0);const f=se({},Ui(s.value,a,null),{position:c.position+1},u);o(a,f,!1),s.value=a}return{location:s,state:r,push:l,replace:i}}function fp(e){e=tp(e);const t=up(e),n=cp(e,t.state,t.location,t.replace);function s(o,i=!0){i||n.pauseListeners(),history.go(o)}const r=se({location:"",base:e,go:s,createHref:sp.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function dp(e){return typeof e=="string"||e&&typeof e=="object"}function Ga(e){return typeof e=="string"||typeof e=="symbol"}const Ka=Symbol("");var Vi;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Vi||(Vi={}));function Tn(e,t){return se(new Error,{type:e,[Ka]:!0},t)}function kt(e,t){return e instanceof Error&&Ka in e&&(t==null||!!(e.type&t))}const Fi="[^/]+?",pp={sensitive:!1,strict:!1,start:!0,end:!0},hp=/[.+*?^${}()[\]/\\]/g;function gp(e,t){const n=se({},pp,t),s=[];let r=n.start?"^":"";const o=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let f=0;f<u.length;f++){const p=u[f];let m=40+(n.sensitive?.25:0);if(p.type===0)f||(r+="/"),r+=p.value.replace(hp,"\\$&"),m+=40;else if(p.type===1){const{value:y,repeatable:_,optional:S,regexp:A}=p;o.push({name:y,repeatable:_,optional:S});const k=A||Fi;if(k!==Fi){m+=10;try{new RegExp(`(${k})`)}catch(P){throw new Error(`Invalid custom RegExp for param "${y}" (${k}): `+P.message)}}let O=_?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;f||(O=S&&u.length<2?`(?:/${O})`:"/"+O),S&&(O+="?"),r+=O,m+=20,S&&(m+=-8),_&&(m+=-20),k===".*"&&(m+=-50)}c.push(m)}s.push(c)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const i=new RegExp(r,n.sensitive?"":"i");function l(u){const c=u.match(i),f={};if(!c)return null;for(let p=1;p<c.length;p++){const m=c[p]||"",y=o[p-1];f[y.name]=m&&y.repeatable?m.split("/"):m}return f}function a(u){let c="",f=!1;for(const p of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const m of p)if(m.type===0)c+=m.value;else if(m.type===1){const{value:y,repeatable:_,optional:S}=m,A=y in u?u[y]:"";if(at(A)&&!_)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const k=at(A)?A.join("/"):A;if(!k)if(S)p.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${y}"`);c+=k}}return c||"/"}return{re:i,score:s,keys:o,parse:l,stringify:a}}function mp(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Wa(e,t){let n=0;const s=e.score,r=t.score;for(;n<s.length&&n<r.length;){const o=mp(s[n],r[n]);if(o)return o;n++}if(Math.abs(r.length-s.length)===1){if(Bi(s))return 1;if(Bi(r))return-1}return r.length-s.length}function Bi(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const bp={type:0,value:""},yp=/[a-zA-Z0-9_]/;function _p(e){if(!e)return[[]];if(e==="/")return[[bp]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,s=n;const r=[];let o;function i(){o&&r.push(o),o=[]}let l=0,a,u="",c="";function f(){u&&(n===0?o.push({type:0,value:u}):n===1||n===2||n===3?(o.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=a}for(;l<e.length;){if(a=e[l++],a==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:a==="/"?(u&&f(),i()):a===":"?(f(),n=1):p();break;case 4:p(),n=s;break;case 1:a==="("?n=2:yp.test(a)?p():(f(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case 2:a===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+a:n=3:c+=a;break;case 3:f(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&l--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),i(),r}function vp(e,t,n){const s=gp(_p(e.path),n),r=se(s,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function wp(e,t){const n=[],s=new Map;t=zi({strict:!1,end:!0,sensitive:!1},t);function r(f){return s.get(f)}function o(f,p,m){const y=!m,_=qi(f);_.aliasOf=m&&m.record;const S=zi(t,f),A=[_];if("alias"in f){const P=typeof f.alias=="string"?[f.alias]:f.alias;for(const F of P)A.push(qi(se({},_,{components:m?m.record.components:_.components,path:F,aliasOf:m?m.record:_})))}let k,O;for(const P of A){const{path:F}=P;if(p&&F[0]!=="/"){const Z=p.record.path,J=Z[Z.length-1]==="/"?"":"/";P.path=p.record.path+(F&&J+F)}if(k=vp(P,p,S),m?m.alias.push(k):(O=O||k,O!==k&&O.alias.push(k),y&&f.name&&!Hi(k)&&i(f.name)),Qa(k)&&a(k),_.children){const Z=_.children;for(let J=0;J<Z.length;J++)o(Z[J],k,m&&m.children[J])}m=m||k}return O?()=>{i(O)}:zn}function i(f){if(Ga(f)){const p=s.get(f);p&&(s.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(i),p.alias.forEach(i))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(i),f.alias.forEach(i))}}function l(){return n}function a(f){const p=Rp(f,n);n.splice(p,0,f),f.record.name&&!Hi(f)&&s.set(f.record.name,f)}function u(f,p){let m,y={},_,S;if("name"in f&&f.name){if(m=s.get(f.name),!m)throw Tn(1,{location:f});S=m.record.name,y=se(ji(p.params,m.keys.filter(O=>!O.optional).concat(m.parent?m.parent.keys.filter(O=>O.optional):[]).map(O=>O.name)),f.params&&ji(f.params,m.keys.map(O=>O.name))),_=m.stringify(y)}else if(f.path!=null)_=f.path,m=n.find(O=>O.re.test(_)),m&&(y=m.parse(_),S=m.record.name);else{if(m=p.name?s.get(p.name):n.find(O=>O.re.test(p.path)),!m)throw Tn(1,{location:f,currentLocation:p});S=m.record.name,y=se({},p.params,f.params),_=m.stringify(y)}const A=[];let k=m;for(;k;)A.unshift(k.record),k=k.parent;return{name:S,path:_,params:y,matched:A,meta:Ep(A)}}e.forEach(f=>o(f));function c(){n.length=0,s.clear()}return{addRoute:o,resolve:u,removeRoute:i,clearRoutes:c,getRoutes:l,getRecordMatcher:r}}function ji(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function qi(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Sp(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Sp(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function Hi(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Ep(e){return e.reduce((t,n)=>se(t,n.meta),{})}function zi(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function Rp(e,t){let n=0,s=t.length;for(;n!==s;){const o=n+s>>1;Wa(e,t[o])<0?s=o:n=o+1}const r=xp(e);return r&&(s=t.lastIndexOf(r,s-1)),s}function xp(e){let t=e;for(;t=t.parent;)if(Qa(t)&&Wa(e,t)===0)return t}function Qa({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Tp(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<s.length;++r){const o=s[r].replace(Fa," "),i=o.indexOf("="),l=ss(i<0?o:o.slice(0,i)),a=i<0?null:ss(o.slice(i+1));if(l in t){let u=t[l];at(u)||(u=t[l]=[u]),u.push(a)}else t[l]=a}return t}function Gi(e){let t="";for(let n in e){const s=e[n];if(n=Gd(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(at(s)?s.map(o=>o&&Xr(o)):[s&&Xr(s)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function kp(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=at(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return t}const Ap=Symbol(""),Ki=Symbol(""),Ao=Symbol(""),Ja=Symbol(""),eo=Symbol("");function Nn(){let e=[];function t(s){return e.push(s),()=>{const r=e.indexOf(s);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Ft(e,t,n,s,r,o=i=>i()){const i=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,a)=>{const u=p=>{p===!1?a(Tn(4,{from:n,to:t})):p instanceof Error?a(p):dp(p)?a(Tn(2,{from:t,to:p})):(i&&s.enterCallbacks[r]===i&&typeof p=="function"&&i.push(p),l())},c=o(()=>e.call(s&&s.instances[r],t,n,u));let f=Promise.resolve(c);e.length<3&&(f=f.then(u)),f.catch(p=>a(p))})}function Pr(e,t,n,s,r=o=>o()){const o=[];for(const i of e)for(const l in i.components){let a=i.components[l];if(!(t!=="beforeRouteEnter"&&!i.instances[l]))if(Ua(a)){const c=(a.__vccOpts||a)[t];c&&o.push(Ft(c,n,s,i,l,r))}else{let u=a();o.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${l}" at "${i.path}"`);const f=$d(c)?c.default:c;i.mods[l]=c,i.components[l]=f;const m=(f.__vccOpts||f)[t];return m&&Ft(m,n,s,i,l,r)()}))}}return o}function Wi(e){const t=Pt(Ao),n=Pt(Ja),s=Xe(()=>{const a=_n(e.to);return t.resolve(a)}),r=Xe(()=>{const{matched:a}=s.value,{length:u}=a,c=a[u-1],f=n.matched;if(!c||!f.length)return-1;const p=f.findIndex(xn.bind(null,c));if(p>-1)return p;const m=Qi(a[u-2]);return u>1&&Qi(c)===m&&f[f.length-1].path!==m?f.findIndex(xn.bind(null,a[u-2])):p}),o=Xe(()=>r.value>-1&&Lp(n.params,s.value.params)),i=Xe(()=>r.value>-1&&r.value===n.matched.length-1&&Ha(n.params,s.value.params));function l(a={}){if(Pp(a)){const u=t[_n(e.replace)?"replace":"push"](_n(e.to)).catch(zn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Xe(()=>s.value.href),isActive:o,isExactActive:i,navigate:l}}function Cp(e){return e.length===1?e[0]:e}const Ip=na({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Wi,setup(e,{slots:t}){const n=ls(Wi(e)),{options:s}=Pt(Ao),r=Xe(()=>({[Ji(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Ji(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&Cp(t.default(n));return e.custom?o:To("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},o)}}}),Op=Ip;function Pp(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Lp(e,t){for(const n in t){const s=t[n],r=e[n];if(typeof s=="string"){if(s!==r)return!1}else if(!at(r)||r.length!==s.length||s.some((o,i)=>o!==r[i]))return!1}return!0}function Qi(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ji=(e,t,n)=>e??t??n,Np=na({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Pt(eo),r=Xe(()=>e.route||s.value),o=Pt(Ki,0),i=Xe(()=>{let u=_n(o);const{matched:c}=r.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),l=Xe(()=>r.value.matched[i.value]);xs(Ki,Xe(()=>i.value+1)),xs(Ap,l),xs(eo,r);const a=ku();return Sn(()=>[a.value,l.value,e.name],([u,c,f],[p,m,y])=>{c&&(c.instances[f]=u,m&&m!==c&&u&&u===p&&(c.leaveGuards.size||(c.leaveGuards=m.leaveGuards),c.updateGuards.size||(c.updateGuards=m.updateGuards))),u&&c&&(!m||!xn(c,m)||!p)&&(c.enterCallbacks[f]||[]).forEach(_=>_(u))},{flush:"post"}),()=>{const u=r.value,c=e.name,f=l.value,p=f&&f.components[c];if(!p)return Zi(n.default,{Component:p,route:u});const m=f.props[c],y=m?m===!0?u.params:typeof m=="function"?m(u):m:null,S=To(p,se({},y,t,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(f.instances[c]=null)},ref:a}));return Zi(n.default,{Component:S,route:u})||S}}});function Zi(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const $p=Np;function Mp(e){const t=wp(e.routes,e),n=e.parseQuery||Tp,s=e.stringifyQuery||Gi,r=e.history,o=Nn(),i=Nn(),l=Nn(),a=Au(Mt);let u=Mt;gn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Ir.bind(null,E=>""+E),f=Ir.bind(null,Wd),p=Ir.bind(null,ss);function m(E,M){let N,U;return Ga(E)?(N=t.getRecordMatcher(E),U=M):U=E,t.addRoute(U,N)}function y(E){const M=t.getRecordMatcher(E);M&&t.removeRoute(M)}function _(){return t.getRoutes().map(E=>E.record)}function S(E){return!!t.getRecordMatcher(E)}function A(E,M){if(M=se({},M||a.value),typeof E=="string"){const b=Or(n,E,M.path),w=t.resolve({path:b.path},M),x=r.createHref(b.fullPath);return se(b,w,{params:p(w.params),hash:ss(b.hash),redirectedFrom:void 0,href:x})}let N;if(E.path!=null)N=se({},E,{path:Or(n,E.path,M.path).path});else{const b=se({},E.params);for(const w in b)b[w]==null&&delete b[w];N=se({},E,{params:f(b)}),M.params=f(M.params)}const U=t.resolve(N,M),fe=E.hash||"";U.params=c(p(U.params));const h=Zd(s,se({},E,{hash:zd(fe),path:U.path})),g=r.createHref(h);return se({fullPath:h,hash:fe,query:s===Gi?kp(E.query):E.query||{}},U,{redirectedFrom:void 0,href:g})}function k(E){return typeof E=="string"?Or(n,E,a.value.path):se({},E)}function O(E,M){if(u!==E)return Tn(8,{from:M,to:E})}function P(E){return J(E)}function F(E){return P(se(k(E),{replace:!0}))}function Z(E){const M=E.matched[E.matched.length-1];if(M&&M.redirect){const{redirect:N}=M;let U=typeof N=="function"?N(E):N;return typeof U=="string"&&(U=U.includes("?")||U.includes("#")?U=k(U):{path:U},U.params={}),se({query:E.query,hash:E.hash,params:U.path!=null?{}:E.params},U)}}function J(E,M){const N=u=A(E),U=a.value,fe=E.state,h=E.force,g=E.replace===!0,b=Z(N);if(b)return J(se(k(b),{state:typeof b=="object"?se({},fe,b.state):fe,force:h,replace:g}),M||N);const w=N;w.redirectedFrom=M;let x;return!h&&Xd(s,U,N)&&(x=Tn(16,{to:w,from:U}),dt(U,U,!0,!1)),(x?Promise.resolve(x):Y(w,U)).catch(R=>kt(R)?kt(R,2)?R:Nt(R):ne(R,w,U)).then(R=>{if(R){if(kt(R,2))return J(se({replace:g},k(R.to),{state:typeof R.to=="object"?se({},fe,R.to.state):fe,force:h}),M||w)}else R=D(w,U,!0,g,fe);return ge(w,U,R),R})}function ue(E,M){const N=O(E,M);return N?Promise.reject(N):Promise.resolve()}function K(E){const M=un.values().next().value;return M&&typeof M.runWithContext=="function"?M.runWithContext(E):E()}function Y(E,M){let N;const[U,fe,h]=Dp(E,M);N=Pr(U.reverse(),"beforeRouteLeave",E,M);for(const b of U)b.leaveGuards.forEach(w=>{N.push(Ft(w,E,M))});const g=ue.bind(null,E,M);return N.push(g),Qe(N).then(()=>{N=[];for(const b of o.list())N.push(Ft(b,E,M));return N.push(g),Qe(N)}).then(()=>{N=Pr(fe,"beforeRouteUpdate",E,M);for(const b of fe)b.updateGuards.forEach(w=>{N.push(Ft(w,E,M))});return N.push(g),Qe(N)}).then(()=>{N=[];for(const b of h)if(b.beforeEnter)if(at(b.beforeEnter))for(const w of b.beforeEnter)N.push(Ft(w,E,M));else N.push(Ft(b.beforeEnter,E,M));return N.push(g),Qe(N)}).then(()=>(E.matched.forEach(b=>b.enterCallbacks={}),N=Pr(h,"beforeRouteEnter",E,M,K),N.push(g),Qe(N))).then(()=>{N=[];for(const b of i.list())N.push(Ft(b,E,M));return N.push(g),Qe(N)}).catch(b=>kt(b,8)?b:Promise.reject(b))}function ge(E,M,N){l.list().forEach(U=>K(()=>U(E,M,N)))}function D(E,M,N,U,fe){const h=O(E,M);if(h)return h;const g=M===Mt,b=gn?history.state:{};N&&(U||g?r.replace(E.fullPath,se({scroll:g&&b&&b.scroll},fe)):r.push(E.fullPath,fe)),a.value=E,dt(E,M,N,g),Nt()}let te;function Re(){te||(te=r.listen((E,M,N)=>{if(!bs.listening)return;const U=A(E),fe=Z(U);if(fe){J(se(fe,{replace:!0,force:!0}),U).catch(zn);return}u=U;const h=a.value;gn&&ip(Di(h.fullPath,N.delta),lr()),Y(U,h).catch(g=>kt(g,12)?g:kt(g,2)?(J(se(k(g.to),{force:!0}),U).then(b=>{kt(b,20)&&!N.delta&&N.type===rs.pop&&r.go(-1,!1)}).catch(zn),Promise.reject()):(N.delta&&r.go(-N.delta,!1),ne(g,U,h))).then(g=>{g=g||D(U,h,!1),g&&(N.delta&&!kt(g,8)?r.go(-N.delta,!1):N.type===rs.pop&&kt(g,20)&&r.go(-1,!1)),ge(U,h,g)}).catch(zn)}))}let qe=Nn(),Se=Nn(),ce;function ne(E,M,N){Nt(E);const U=Se.list();return U.length?U.forEach(fe=>fe(E,M,N)):console.error(E),Promise.reject(E)}function Rt(){return ce&&a.value!==Mt?Promise.resolve():new Promise((E,M)=>{qe.add([E,M])})}function Nt(E){return ce||(ce=!E,Re(),qe.list().forEach(([M,N])=>E?N(E):M()),qe.reset()),E}function dt(E,M,N,U){const{scrollBehavior:fe}=e;if(!gn||!fe)return Promise.resolve();const h=!N&&lp(Di(E.fullPath,0))||(U||!N)&&history.state&&history.state.scroll||null;return So().then(()=>fe(E,M,h)).then(g=>g&&op(g)).catch(g=>ne(g,E,M))}const Me=E=>r.go(E);let cn;const un=new Set,bs={currentRoute:a,listening:!0,addRoute:m,removeRoute:y,clearRoutes:t.clearRoutes,hasRoute:S,getRoutes:_,resolve:A,options:e,push:P,replace:F,go:Me,back:()=>Me(-1),forward:()=>Me(1),beforeEach:o.add,beforeResolve:i.add,afterEach:l.add,onError:Se.add,isReady:Rt,install(E){const M=this;E.component("RouterLink",Op),E.component("RouterView",$p),E.config.globalProperties.$router=M,Object.defineProperty(E.config.globalProperties,"$route",{enumerable:!0,get:()=>_n(a)}),gn&&!cn&&a.value===Mt&&(cn=!0,P(r.location).catch(fe=>{}));const N={};for(const fe in Mt)Object.defineProperty(N,fe,{get:()=>a.value[fe],enumerable:!0});E.provide(Ao,M),E.provide(Ja,Bl(N)),E.provide(eo,a);const U=E.unmount;un.add(E),E.unmount=function(){un.delete(E),un.size<1&&(u=Mt,te&&te(),te=null,a.value=Mt,cn=!1,ce=!1),U()}}};function Qe(E){return E.reduce((M,N)=>M.then(()=>K(N)),Promise.resolve())}return bs}function Dp(e,t){const n=[],s=[],r=[],o=Math.max(t.matched.length,e.matched.length);for(let i=0;i<o;i++){const l=t.matched[i];l&&(e.matched.find(u=>xn(u,l))?s.push(l):n.push(l));const a=e.matched[i];a&&(t.matched.find(u=>xn(u,a))||r.push(a))}return[n,s,r]}/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var Up="store";function An(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function Za(e){return e!==null&&typeof e=="object"}function Vp(e){return e&&typeof e.then=="function"}function Fp(e,t){return function(){return e(t)}}function Xa(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var s=t.indexOf(e);s>-1&&t.splice(s,1)}}function Ya(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;ar(e,n,[],e._modules.root,!0),Co(e,n,t)}function Co(e,t,n){var s=e._state,r=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var o=e._wrappedGetters,i={},l={},a=iu(!0);a.run(function(){An(o,function(u,c){i[c]=Fp(u,e),l[c]=Xe(function(){return i[c]()}),Object.defineProperty(e.getters,c,{get:function(){return l[c].value},enumerable:!0})})}),e._state=ls({data:t}),e._scope=a,e.strict&&zp(e),s&&n&&e._withCommit(function(){s.data=null}),r&&r.stop()}function ar(e,t,n,s,r){var o=!n.length,i=e._modules.getNamespace(n);if(s.namespaced&&(e._modulesNamespaceMap[i],e._modulesNamespaceMap[i]=s),!o&&!r){var l=Io(t,n.slice(0,-1)),a=n[n.length-1];e._withCommit(function(){l[a]=s.state})}var u=s.context=Bp(e,i,n);s.forEachMutation(function(c,f){var p=i+f;jp(e,p,c,u)}),s.forEachAction(function(c,f){var p=c.root?f:i+f,m=c.handler||c;qp(e,p,m,u)}),s.forEachGetter(function(c,f){var p=i+f;Hp(e,p,c,u)}),s.forEachChild(function(c,f){ar(e,t,n.concat(f),c,r)})}function Bp(e,t,n){var s=t==="",r={dispatch:s?e.dispatch:function(o,i,l){var a=Bs(o,i,l),u=a.payload,c=a.options,f=a.type;return(!c||!c.root)&&(f=t+f),e.dispatch(f,u)},commit:s?e.commit:function(o,i,l){var a=Bs(o,i,l),u=a.payload,c=a.options,f=a.type;(!c||!c.root)&&(f=t+f),e.commit(f,u,c)}};return Object.defineProperties(r,{getters:{get:s?function(){return e.getters}:function(){return ec(e,t)}},state:{get:function(){return Io(e.state,n)}}}),r}function ec(e,t){if(!e._makeLocalGettersCache[t]){var n={},s=t.length;Object.keys(e.getters).forEach(function(r){if(r.slice(0,s)===t){var o=r.slice(s);Object.defineProperty(n,o,{get:function(){return e.getters[r]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function jp(e,t,n,s){var r=e._mutations[t]||(e._mutations[t]=[]);r.push(function(i){n.call(e,s.state,i)})}function qp(e,t,n,s){var r=e._actions[t]||(e._actions[t]=[]);r.push(function(i){var l=n.call(e,{dispatch:s.dispatch,commit:s.commit,getters:s.getters,state:s.state,rootGetters:e.getters,rootState:e.state},i);return Vp(l)||(l=Promise.resolve(l)),e._devtoolHook?l.catch(function(a){throw e._devtoolHook.emit("vuex:error",a),a}):l})}function Hp(e,t,n,s){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(o){return n(s.state,s.getters,o.state,o.getters)})}function zp(e){Sn(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function Io(e,t){return t.reduce(function(n,s){return n[s]},e)}function Bs(e,t,n){return Za(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var Gp="vuex bindings",Xi="vuex:mutations",Lr="vuex:actions",pn="vuex",Kp=0;function Wp(e,t){Nd({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Gp]},function(n){n.addTimelineLayer({id:Xi,label:"Vuex Mutations",color:Yi}),n.addTimelineLayer({id:Lr,label:"Vuex Actions",color:Yi}),n.addInspector({id:pn,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(s){if(s.app===e&&s.inspectorId===pn)if(s.filter){var r=[];rc(r,t._modules.root,s.filter,""),s.rootNodes=r}else s.rootNodes=[sc(t._modules.root,"")]}),n.on.getInspectorState(function(s){if(s.app===e&&s.inspectorId===pn){var r=s.nodeId;ec(t,r),s.state=Zp(Yp(t._modules,r),r==="root"?t.getters:t._makeLocalGettersCache,r)}}),n.on.editInspectorState(function(s){if(s.app===e&&s.inspectorId===pn){var r=s.nodeId,o=s.path;r!=="root"&&(o=r.split("/").filter(Boolean).concat(o)),t._withCommit(function(){s.set(t._state.data,o,s.state.value)})}}),t.subscribe(function(s,r){var o={};s.payload&&(o.payload=s.payload),o.state=r,n.notifyComponentUpdate(),n.sendInspectorTree(pn),n.sendInspectorState(pn),n.addTimelineEvent({layerId:Xi,event:{time:Date.now(),title:s.type,data:o}})}),t.subscribeAction({before:function(s,r){var o={};s.payload&&(o.payload=s.payload),s._id=Kp++,s._time=Date.now(),o.state=r,n.addTimelineEvent({layerId:Lr,event:{time:s._time,title:s.type,groupId:s._id,subtitle:"start",data:o}})},after:function(s,r){var o={},i=Date.now()-s._time;o.duration={_custom:{type:"duration",display:i+"ms",tooltip:"Action duration",value:i}},s.payload&&(o.payload=s.payload),o.state=r,n.addTimelineEvent({layerId:Lr,event:{time:Date.now(),title:s.type,groupId:s._id,subtitle:"end",data:o}})}})})}var Yi=8702998,Qp=6710886,Jp=16777215,tc={label:"namespaced",textColor:Jp,backgroundColor:Qp};function nc(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function sc(e,t){return{id:t||"root",label:nc(t),tags:e.namespaced?[tc]:[],children:Object.keys(e._children).map(function(n){return sc(e._children[n],t+n+"/")})}}function rc(e,t,n,s){s.includes(n)&&e.push({id:s||"root",label:s.endsWith("/")?s.slice(0,s.length-1):s||"Root",tags:t.namespaced?[tc]:[]}),Object.keys(t._children).forEach(function(r){rc(e,t._children[r],n,s+r+"/")})}function Zp(e,t,n){t=n==="root"?t:t[n];var s=Object.keys(t),r={state:Object.keys(e.state).map(function(i){return{key:i,editable:!0,value:e.state[i]}})};if(s.length){var o=Xp(t);r.getters=Object.keys(o).map(function(i){return{key:i.endsWith("/")?nc(i):i,editable:!1,value:to(function(){return o[i]})}})}return r}function Xp(e){var t={};return Object.keys(e).forEach(function(n){var s=n.split("/");if(s.length>1){var r=t,o=s.pop();s.forEach(function(i){r[i]||(r[i]={_custom:{value:{},display:i,tooltip:"Module",abstract:!0}}),r=r[i]._custom.value}),r[o]=to(function(){return e[n]})}else t[n]=to(function(){return e[n]})}),t}function Yp(e,t){var n=t.split("/").filter(function(s){return s});return n.reduce(function(s,r,o){var i=s[r];if(!i)throw new Error('Missing module "'+r+'" for path "'+t+'".');return o===n.length-1?i:i._children},t==="root"?e:e.root._children)}function to(e){try{return e()}catch(t){return t}}var ut=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var s=t.state;this.state=(typeof s=="function"?s():s)||{}},oc={namespaced:{configurable:!0}};oc.namespaced.get=function(){return!!this._rawModule.namespaced};ut.prototype.addChild=function(t,n){this._children[t]=n};ut.prototype.removeChild=function(t){delete this._children[t]};ut.prototype.getChild=function(t){return this._children[t]};ut.prototype.hasChild=function(t){return t in this._children};ut.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};ut.prototype.forEachChild=function(t){An(this._children,t)};ut.prototype.forEachGetter=function(t){this._rawModule.getters&&An(this._rawModule.getters,t)};ut.prototype.forEachAction=function(t){this._rawModule.actions&&An(this._rawModule.actions,t)};ut.prototype.forEachMutation=function(t){this._rawModule.mutations&&An(this._rawModule.mutations,t)};Object.defineProperties(ut.prototype,oc);var ln=function(t){this.register([],t,!1)};ln.prototype.get=function(t){return t.reduce(function(n,s){return n.getChild(s)},this.root)};ln.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(s,r){return n=n.getChild(r),s+(n.namespaced?r+"/":"")},"")};ln.prototype.update=function(t){ic([],this.root,t)};ln.prototype.register=function(t,n,s){var r=this;s===void 0&&(s=!0);var o=new ut(n,s);if(t.length===0)this.root=o;else{var i=this.get(t.slice(0,-1));i.addChild(t[t.length-1],o)}n.modules&&An(n.modules,function(l,a){r.register(t.concat(a),l,s)})};ln.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),s=t[t.length-1],r=n.getChild(s);r&&r.runtime&&n.removeChild(s)};ln.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),s=t[t.length-1];return n?n.hasChild(s):!1};function ic(e,t,n){if(t.update(n),n.modules)for(var s in n.modules){if(!t.getChild(s))return;ic(e.concat(s),t.getChild(s),n.modules[s])}}function eh(e){return new je(e)}var je=function(t){var n=this;t===void 0&&(t={});var s=t.plugins;s===void 0&&(s=[]);var r=t.strict;r===void 0&&(r=!1);var o=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ln(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=o;var i=this,l=this,a=l.dispatch,u=l.commit;this.dispatch=function(p,m){return a.call(i,p,m)},this.commit=function(p,m,y){return u.call(i,p,m,y)},this.strict=r;var c=this._modules.root.state;ar(this,c,[],this._modules.root),Co(this,c),s.forEach(function(f){return f(n)})},Oo={state:{configurable:!0}};je.prototype.install=function(t,n){t.provide(n||Up,this),t.config.globalProperties.$store=this;var s=this._devtools!==void 0?this._devtools:!1;s&&Wp(t,this)};Oo.state.get=function(){return this._state.data};Oo.state.set=function(e){};je.prototype.commit=function(t,n,s){var r=this,o=Bs(t,n,s),i=o.type,l=o.payload,a={type:i,payload:l},u=this._mutations[i];u&&(this._withCommit(function(){u.forEach(function(f){f(l)})}),this._subscribers.slice().forEach(function(c){return c(a,r.state)}))};je.prototype.dispatch=function(t,n){var s=this,r=Bs(t,n),o=r.type,i=r.payload,l={type:o,payload:i},a=this._actions[o];if(a){try{this._actionSubscribers.slice().filter(function(c){return c.before}).forEach(function(c){return c.before(l,s.state)})}catch{}var u=a.length>1?Promise.all(a.map(function(c){return c(i)})):a[0](i);return new Promise(function(c,f){u.then(function(p){try{s._actionSubscribers.filter(function(m){return m.after}).forEach(function(m){return m.after(l,s.state)})}catch{}c(p)},function(p){try{s._actionSubscribers.filter(function(m){return m.error}).forEach(function(m){return m.error(l,s.state,p)})}catch{}f(p)})})}};je.prototype.subscribe=function(t,n){return Xa(t,this._subscribers,n)};je.prototype.subscribeAction=function(t,n){var s=typeof t=="function"?{before:t}:t;return Xa(s,this._actionSubscribers,n)};je.prototype.watch=function(t,n,s){var r=this;return Sn(function(){return t(r.state,r.getters)},n,Object.assign({},s))};je.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};je.prototype.registerModule=function(t,n,s){s===void 0&&(s={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),ar(this,this.state,t,this._modules.get(t),s.preserveState),Co(this,this.state)};je.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var s=Io(n.state,t.slice(0,-1));delete s[t[t.length-1]]}),Ya(this)};je.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};je.prototype.hotUpdate=function(t){this._modules.update(t),Ya(this,!0)};je.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(je.prototype,Oo);var fs=No(function(e,t){var n={};return Lo(t).forEach(function(s){var r=s.key,o=s.val;n[r]=function(){var l=this.$store.state,a=this.$store.getters;if(e){var u=$o(this.$store,"mapState",e);if(!u)return;l=u.context.state,a=u.context.getters}return typeof o=="function"?o.call(this,l,a):l[o]},n[r].vuex=!0}),n}),Po=No(function(e,t){var n={};return Lo(t).forEach(function(s){var r=s.key,o=s.val;o=e+o,n[r]=function(){if(!(e&&!$o(this.$store,"mapGetters",e)))return this.$store.getters[o]},n[r].vuex=!0}),n}),ds=No(function(e,t){var n={};return Lo(t).forEach(function(s){var r=s.key,o=s.val;n[r]=function(){for(var l=[],a=arguments.length;a--;)l[a]=arguments[a];var u=this.$store.dispatch;if(e){var c=$o(this.$store,"mapActions",e);if(!c)return;u=c.context.dispatch}return typeof o=="function"?o.apply(this,[u].concat(l)):u.apply(this.$store,[o].concat(l))}}),n});function Lo(e){return th(e)?Array.isArray(e)?e.map(function(t){return{key:t,val:t}}):Object.keys(e).map(function(t){return{key:t,val:e[t]}}):[]}function th(e){return Array.isArray(e)||Za(e)}function No(e){return function(t,n){return typeof t!="string"?(n=t,t=""):t.charAt(t.length-1)!=="/"&&(t+="/"),e(t,n)}}function $o(e,t,n){var s=e._modulesNamespaceMap[n];return s}function lc(e,t){return function(){return e.apply(t,arguments)}}const{toString:nh}=Object.prototype,{getPrototypeOf:Mo}=Object,{iterator:cr,toStringTag:ac}=Symbol,ur=(e=>t=>{const n=nh.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ft=e=>(e=e.toLowerCase(),t=>ur(t)===e),fr=e=>t=>typeof t===e,{isArray:Cn}=Array,os=fr("undefined");function sh(e){return e!==null&&!os(e)&&e.constructor!==null&&!os(e.constructor)&&Fe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const cc=ft("ArrayBuffer");function rh(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&cc(e.buffer),t}const oh=fr("string"),Fe=fr("function"),uc=fr("number"),dr=e=>e!==null&&typeof e=="object",ih=e=>e===!0||e===!1,Cs=e=>{if(ur(e)!=="object")return!1;const t=Mo(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(ac in e)&&!(cr in e)},lh=ft("Date"),ah=ft("File"),ch=ft("Blob"),uh=ft("FileList"),fh=e=>dr(e)&&Fe(e.pipe),dh=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Fe(e.append)&&((t=ur(e))==="formdata"||t==="object"&&Fe(e.toString)&&e.toString()==="[object FormData]"))},ph=ft("URLSearchParams"),[hh,gh,mh,bh]=["ReadableStream","Request","Response","Headers"].map(ft),yh=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ps(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Cn(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let l;for(s=0;s<i;s++)l=o[s],t.call(null,e[l],l,e)}}function fc(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const Xt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dc=e=>!os(e)&&e!==Xt;function no(){const{caseless:e}=dc(this)&&this||{},t={},n=(s,r)=>{const o=e&&fc(t,r)||r;Cs(t[o])&&Cs(s)?t[o]=no(t[o],s):Cs(s)?t[o]=no({},s):Cn(s)?t[o]=s.slice():t[o]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&ps(arguments[s],n);return t}const _h=(e,t,n,{allOwnKeys:s}={})=>(ps(t,(r,o)=>{n&&Fe(r)?e[o]=lc(r,n):e[o]=r},{allOwnKeys:s}),e),vh=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),wh=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Sh=(e,t,n,s)=>{let r,o,i;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)i=r[o],(!s||s(i,e,t))&&!l[i]&&(t[i]=e[i],l[i]=!0);e=n!==!1&&Mo(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Eh=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},Rh=e=>{if(!e)return null;if(Cn(e))return e;let t=e.length;if(!uc(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},xh=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Mo(Uint8Array)),Th=(e,t)=>{const s=(e&&e[cr]).call(e);let r;for(;(r=s.next())&&!r.done;){const o=r.value;t.call(e,o[0],o[1])}},kh=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},Ah=ft("HTMLFormElement"),Ch=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),el=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ih=ft("RegExp"),pc=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};ps(n,(r,o)=>{let i;(i=t(r,o,e))!==!1&&(s[o]=i||r)}),Object.defineProperties(e,s)},Oh=e=>{pc(e,(t,n)=>{if(Fe(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Fe(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Ph=(e,t)=>{const n={},s=r=>{r.forEach(o=>{n[o]=!0})};return Cn(e)?s(e):s(String(e).split(t)),n},Lh=()=>{},Nh=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function $h(e){return!!(e&&Fe(e.append)&&e[ac]==="FormData"&&e[cr])}const Mh=e=>{const t=new Array(10),n=(s,r)=>{if(dr(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[r]=s;const o=Cn(s)?[]:{};return ps(s,(i,l)=>{const a=n(i,r+1);!os(a)&&(o[l]=a)}),t[r]=void 0,o}}return s};return n(e,0)},Dh=ft("AsyncFunction"),Uh=e=>e&&(dr(e)||Fe(e))&&Fe(e.then)&&Fe(e.catch),hc=((e,t)=>e?setImmediate:t?((n,s)=>(Xt.addEventListener("message",({source:r,data:o})=>{r===Xt&&o===n&&s.length&&s.shift()()},!1),r=>{s.push(r),Xt.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Fe(Xt.postMessage)),Vh=typeof queueMicrotask<"u"?queueMicrotask.bind(Xt):typeof process<"u"&&process.nextTick||hc,Fh=e=>e!=null&&Fe(e[cr]),v={isArray:Cn,isArrayBuffer:cc,isBuffer:sh,isFormData:dh,isArrayBufferView:rh,isString:oh,isNumber:uc,isBoolean:ih,isObject:dr,isPlainObject:Cs,isReadableStream:hh,isRequest:gh,isResponse:mh,isHeaders:bh,isUndefined:os,isDate:lh,isFile:ah,isBlob:ch,isRegExp:Ih,isFunction:Fe,isStream:fh,isURLSearchParams:ph,isTypedArray:xh,isFileList:uh,forEach:ps,merge:no,extend:_h,trim:yh,stripBOM:vh,inherits:wh,toFlatObject:Sh,kindOf:ur,kindOfTest:ft,endsWith:Eh,toArray:Rh,forEachEntry:Th,matchAll:kh,isHTMLForm:Ah,hasOwnProperty:el,hasOwnProp:el,reduceDescriptors:pc,freezeMethods:Oh,toObjectSet:Ph,toCamelCase:Ch,noop:Lh,toFiniteNumber:Nh,findKey:fc,global:Xt,isContextDefined:dc,isSpecCompliantForm:$h,toJSONObject:Mh,isAsyncFn:Dh,isThenable:Uh,setImmediate:hc,asap:Vh,isIterable:Fh};function Q(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}v.inherits(Q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:v.toJSONObject(this.config),code:this.code,status:this.status}}});const gc=Q.prototype,mc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{mc[e]={value:e}});Object.defineProperties(Q,mc);Object.defineProperty(gc,"isAxiosError",{value:!0});Q.from=(e,t,n,s,r,o)=>{const i=Object.create(gc);return v.toFlatObject(e,i,function(a){return a!==Error.prototype},l=>l!=="isAxiosError"),Q.call(i,e.message,t,n,s,r),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const Bh=null;function so(e){return v.isPlainObject(e)||v.isArray(e)}function bc(e){return v.endsWith(e,"[]")?e.slice(0,-2):e}function tl(e,t,n){return e?e.concat(t).map(function(r,o){return r=bc(r),!n&&o?"["+r+"]":r}).join(n?".":""):t}function jh(e){return v.isArray(e)&&!e.some(so)}const qh=v.toFlatObject(v,{},null,function(t){return/^is[A-Z]/.test(t)});function pr(e,t,n){if(!v.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=v.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,S){return!v.isUndefined(S[_])});const s=n.metaTokens,r=n.visitor||c,o=n.dots,i=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&v.isSpecCompliantForm(t);if(!v.isFunction(r))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(v.isDate(y))return y.toISOString();if(!a&&v.isBlob(y))throw new Q("Blob is not supported. Use a Buffer instead.");return v.isArrayBuffer(y)||v.isTypedArray(y)?a&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function c(y,_,S){let A=y;if(y&&!S&&typeof y=="object"){if(v.endsWith(_,"{}"))_=s?_:_.slice(0,-2),y=JSON.stringify(y);else if(v.isArray(y)&&jh(y)||(v.isFileList(y)||v.endsWith(_,"[]"))&&(A=v.toArray(y)))return _=bc(_),A.forEach(function(O,P){!(v.isUndefined(O)||O===null)&&t.append(i===!0?tl([_],P,o):i===null?_:_+"[]",u(O))}),!1}return so(y)?!0:(t.append(tl(S,_,o),u(y)),!1)}const f=[],p=Object.assign(qh,{defaultVisitor:c,convertValue:u,isVisitable:so});function m(y,_){if(!v.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+_.join("."));f.push(y),v.forEach(y,function(A,k){(!(v.isUndefined(A)||A===null)&&r.call(t,A,v.isString(k)?k.trim():k,_,p))===!0&&m(A,_?_.concat(k):[k])}),f.pop()}}if(!v.isObject(e))throw new TypeError("data must be an object");return m(e),t}function nl(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Do(e,t){this._pairs=[],e&&pr(e,this,t)}const yc=Do.prototype;yc.append=function(t,n){this._pairs.push([t,n])};yc.toString=function(t){const n=t?function(s){return t.call(this,s,nl)}:nl;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Hh(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _c(e,t,n){if(!t)return e;const s=n&&n.encode||Hh;v.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let o;if(r?o=r(t,n):o=v.isURLSearchParams(t)?t.toString():new Do(t,n).toString(s),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class sl{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){v.forEach(this.handlers,function(s){s!==null&&t(s)})}}const vc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zh=typeof URLSearchParams<"u"?URLSearchParams:Do,Gh=typeof FormData<"u"?FormData:null,Kh=typeof Blob<"u"?Blob:null,Wh={isBrowser:!0,classes:{URLSearchParams:zh,FormData:Gh,Blob:Kh},protocols:["http","https","file","blob","url","data"]},Uo=typeof window<"u"&&typeof document<"u",ro=typeof navigator=="object"&&navigator||void 0,Qh=Uo&&(!ro||["ReactNative","NativeScript","NS"].indexOf(ro.product)<0),Jh=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Zh=Uo&&window.location.href||"http://localhost",Xh=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Uo,hasStandardBrowserEnv:Qh,hasStandardBrowserWebWorkerEnv:Jh,navigator:ro,origin:Zh},Symbol.toStringTag,{value:"Module"})),Ie={...Xh,...Wh};function Yh(e,t){return pr(e,new Ie.classes.URLSearchParams,Object.assign({visitor:function(n,s,r,o){return Ie.isNode&&v.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function eg(e){return v.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function tg(e){const t={},n=Object.keys(e);let s;const r=n.length;let o;for(s=0;s<r;s++)o=n[s],t[o]=e[o];return t}function wc(e){function t(n,s,r,o){let i=n[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),a=o>=n.length;return i=!i&&v.isArray(r)?r.length:i,a?(v.hasOwnProp(r,i)?r[i]=[r[i],s]:r[i]=s,!l):((!r[i]||!v.isObject(r[i]))&&(r[i]=[]),t(n,s,r[i],o)&&v.isArray(r[i])&&(r[i]=tg(r[i])),!l)}if(v.isFormData(e)&&v.isFunction(e.entries)){const n={};return v.forEachEntry(e,(s,r)=>{t(eg(s),r,n,0)}),n}return null}function ng(e,t,n){if(v.isString(e))try{return(t||JSON.parse)(e),v.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const hs={transitional:vc,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,o=v.isObject(t);if(o&&v.isHTMLForm(t)&&(t=new FormData(t)),v.isFormData(t))return r?JSON.stringify(wc(t)):t;if(v.isArrayBuffer(t)||v.isBuffer(t)||v.isStream(t)||v.isFile(t)||v.isBlob(t)||v.isReadableStream(t))return t;if(v.isArrayBufferView(t))return t.buffer;if(v.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Yh(t,this.formSerializer).toString();if((l=v.isFileList(t))||s.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return pr(l?{"files[]":t}:t,a&&new a,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),ng(t)):t}],transformResponse:[function(t){const n=this.transitional||hs.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(v.isResponse(t)||v.isReadableStream(t))return t;if(t&&v.isString(t)&&(s&&!this.responseType||r)){const i=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(l){if(i)throw l.name==="SyntaxError"?Q.from(l,Q.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ie.classes.FormData,Blob:Ie.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};v.forEach(["delete","get","head","post","put","patch"],e=>{hs.headers[e]={}});const sg=v.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rg=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(i){r=i.indexOf(":"),n=i.substring(0,r).trim().toLowerCase(),s=i.substring(r+1).trim(),!(!n||t[n]&&sg[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},rl=Symbol("internals");function $n(e){return e&&String(e).trim().toLowerCase()}function Is(e){return e===!1||e==null?e:v.isArray(e)?e.map(Is):String(e)}function og(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const ig=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Nr(e,t,n,s,r){if(v.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!v.isString(t)){if(v.isString(s))return t.indexOf(s)!==-1;if(v.isRegExp(s))return s.test(t)}}function lg(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function ag(e,t){const n=v.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,o,i){return this[s].call(this,t,r,o,i)},configurable:!0})})}let Be=class{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function o(l,a,u){const c=$n(a);if(!c)throw new Error("header name must be a non-empty string");const f=v.findKey(r,c);(!f||r[f]===void 0||u===!0||u===void 0&&r[f]!==!1)&&(r[f||a]=Is(l))}const i=(l,a)=>v.forEach(l,(u,c)=>o(u,c,a));if(v.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(v.isString(t)&&(t=t.trim())&&!ig(t))i(rg(t),n);else if(v.isObject(t)&&v.isIterable(t)){let l={},a,u;for(const c of t){if(!v.isArray(c))throw TypeError("Object iterator must return a key-value pair");l[u=c[0]]=(a=l[u])?v.isArray(a)?[...a,c[1]]:[a,c[1]]:c[1]}i(l,n)}else t!=null&&o(n,t,s);return this}get(t,n){if(t=$n(t),t){const s=v.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return og(r);if(v.isFunction(n))return n.call(this,r,s);if(v.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=$n(t),t){const s=v.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||Nr(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function o(i){if(i=$n(i),i){const l=v.findKey(s,i);l&&(!n||Nr(s,s[l],l,n))&&(delete s[l],r=!0)}}return v.isArray(t)?t.forEach(o):o(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const o=n[s];(!t||Nr(this,this[o],o,t,!0))&&(delete this[o],r=!0)}return r}normalize(t){const n=this,s={};return v.forEach(this,(r,o)=>{const i=v.findKey(s,o);if(i){n[i]=Is(r),delete n[o];return}const l=t?lg(o):String(o).trim();l!==o&&delete n[o],n[l]=Is(r),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return v.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&v.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[rl]=this[rl]={accessors:{}}).accessors,r=this.prototype;function o(i){const l=$n(i);s[l]||(ag(r,i),s[l]=!0)}return v.isArray(t)?t.forEach(o):o(t),this}};Be.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);v.reduceDescriptors(Be.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});v.freezeMethods(Be);function $r(e,t){const n=this||hs,s=t||n,r=Be.from(s.headers);let o=s.data;return v.forEach(e,function(l){o=l.call(n,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function Sc(e){return!!(e&&e.__CANCEL__)}function In(e,t,n){Q.call(this,e??"canceled",Q.ERR_CANCELED,t,n),this.name="CanceledError"}v.inherits(In,Q,{__CANCEL__:!0});function Ec(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new Q("Request failed with status code "+n.status,[Q.ERR_BAD_REQUEST,Q.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function cg(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ug(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,o=0,i;return t=t!==void 0?t:1e3,function(a){const u=Date.now(),c=s[o];i||(i=u),n[r]=a,s[r]=u;let f=o,p=0;for(;f!==r;)p+=n[f++],f=f%e;if(r=(r+1)%e,r===o&&(o=(o+1)%e),u-i<t)return;const m=c&&u-c;return m?Math.round(p*1e3/m):void 0}}function fg(e,t){let n=0,s=1e3/t,r,o;const i=(u,c=Date.now())=>{n=c,r=null,o&&(clearTimeout(o),o=null),e.apply(null,u)};return[(...u)=>{const c=Date.now(),f=c-n;f>=s?i(u,c):(r=u,o||(o=setTimeout(()=>{o=null,i(r)},s-f)))},()=>r&&i(r)]}const js=(e,t,n=3)=>{let s=0;const r=ug(50,250);return fg(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,a=i-s,u=r(a),c=i<=l;s=i;const f={loaded:i,total:l,progress:l?i/l:void 0,bytes:a,rate:u||void 0,estimated:u&&l&&c?(l-i)/u:void 0,event:o,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},n)},ol=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},il=e=>(...t)=>v.asap(()=>e(...t)),dg=Ie.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ie.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ie.origin),Ie.navigator&&/(msie|trident)/i.test(Ie.navigator.userAgent)):()=>!0,pg=Ie.hasStandardBrowserEnv?{write(e,t,n,s,r,o){const i=[e+"="+encodeURIComponent(t)];v.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),v.isString(s)&&i.push("path="+s),v.isString(r)&&i.push("domain="+r),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function hg(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function gg(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Rc(e,t,n){let s=!hg(t);return e&&(s||n==!1)?gg(e,t):t}const ll=e=>e instanceof Be?{...e}:e;function sn(e,t){t=t||{};const n={};function s(u,c,f,p){return v.isPlainObject(u)&&v.isPlainObject(c)?v.merge.call({caseless:p},u,c):v.isPlainObject(c)?v.merge({},c):v.isArray(c)?c.slice():c}function r(u,c,f,p){if(v.isUndefined(c)){if(!v.isUndefined(u))return s(void 0,u,f,p)}else return s(u,c,f,p)}function o(u,c){if(!v.isUndefined(c))return s(void 0,c)}function i(u,c){if(v.isUndefined(c)){if(!v.isUndefined(u))return s(void 0,u)}else return s(void 0,c)}function l(u,c,f){if(f in t)return s(u,c);if(f in e)return s(void 0,u)}const a={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(u,c,f)=>r(ll(u),ll(c),f,!0)};return v.forEach(Object.keys(Object.assign({},e,t)),function(c){const f=a[c]||r,p=f(e[c],t[c],c);v.isUndefined(p)&&f!==l||(n[c]=p)}),n}const xc=e=>{const t=sn({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:o,headers:i,auth:l}=t;t.headers=i=Be.from(i),t.url=_c(Rc(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let a;if(v.isFormData(n)){if(Ie.hasStandardBrowserEnv||Ie.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((a=i.getContentType())!==!1){const[u,...c]=a?a.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...c].join("; "))}}if(Ie.hasStandardBrowserEnv&&(s&&v.isFunction(s)&&(s=s(t)),s||s!==!1&&dg(t.url))){const u=r&&o&&pg.read(o);u&&i.set(r,u)}return t},mg=typeof XMLHttpRequest<"u",bg=mg&&function(e){return new Promise(function(n,s){const r=xc(e);let o=r.data;const i=Be.from(r.headers).normalize();let{responseType:l,onUploadProgress:a,onDownloadProgress:u}=r,c,f,p,m,y;function _(){m&&m(),y&&y(),r.cancelToken&&r.cancelToken.unsubscribe(c),r.signal&&r.signal.removeEventListener("abort",c)}let S=new XMLHttpRequest;S.open(r.method.toUpperCase(),r.url,!0),S.timeout=r.timeout;function A(){if(!S)return;const O=Be.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),F={data:!l||l==="text"||l==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:O,config:e,request:S};Ec(function(J){n(J),_()},function(J){s(J),_()},F),S=null}"onloadend"in S?S.onloadend=A:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(A)},S.onabort=function(){S&&(s(new Q("Request aborted",Q.ECONNABORTED,e,S)),S=null)},S.onerror=function(){s(new Q("Network Error",Q.ERR_NETWORK,e,S)),S=null},S.ontimeout=function(){let P=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const F=r.transitional||vc;r.timeoutErrorMessage&&(P=r.timeoutErrorMessage),s(new Q(P,F.clarifyTimeoutError?Q.ETIMEDOUT:Q.ECONNABORTED,e,S)),S=null},o===void 0&&i.setContentType(null),"setRequestHeader"in S&&v.forEach(i.toJSON(),function(P,F){S.setRequestHeader(F,P)}),v.isUndefined(r.withCredentials)||(S.withCredentials=!!r.withCredentials),l&&l!=="json"&&(S.responseType=r.responseType),u&&([p,y]=js(u,!0),S.addEventListener("progress",p)),a&&S.upload&&([f,m]=js(a),S.upload.addEventListener("progress",f),S.upload.addEventListener("loadend",m)),(r.cancelToken||r.signal)&&(c=O=>{S&&(s(!O||O.type?new In(null,e,S):O),S.abort(),S=null)},r.cancelToken&&r.cancelToken.subscribe(c),r.signal&&(r.signal.aborted?c():r.signal.addEventListener("abort",c)));const k=cg(r.url);if(k&&Ie.protocols.indexOf(k)===-1){s(new Q("Unsupported protocol "+k+":",Q.ERR_BAD_REQUEST,e));return}S.send(o||null)})},yg=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,r;const o=function(u){if(!r){r=!0,l();const c=u instanceof Error?u:this.reason;s.abort(c instanceof Q?c:new In(c instanceof Error?c.message:c))}};let i=t&&setTimeout(()=>{i=null,o(new Q(`timeout ${t} of ms exceeded`,Q.ETIMEDOUT))},t);const l=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:a}=s;return a.unsubscribe=()=>v.asap(l),a}},_g=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},vg=async function*(e,t){for await(const n of wg(e))yield*_g(n,t)},wg=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},al=(e,t,n,s)=>{const r=vg(e,t);let o=0,i,l=a=>{i||(i=!0,s&&s(a))};return new ReadableStream({async pull(a){try{const{done:u,value:c}=await r.next();if(u){l(),a.close();return}let f=c.byteLength;if(n){let p=o+=f;n(p)}a.enqueue(new Uint8Array(c))}catch(u){throw l(u),u}},cancel(a){return l(a),r.return()}},{highWaterMark:2})},hr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Tc=hr&&typeof ReadableStream=="function",Sg=hr&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),kc=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Eg=Tc&&kc(()=>{let e=!1;const t=new Request(Ie.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),cl=64*1024,oo=Tc&&kc(()=>v.isReadableStream(new Response("").body)),qs={stream:oo&&(e=>e.body)};hr&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!qs[t]&&(qs[t]=v.isFunction(e[t])?n=>n[t]():(n,s)=>{throw new Q(`Response type '${t}' is not supported`,Q.ERR_NOT_SUPPORT,s)})})})(new Response);const Rg=async e=>{if(e==null)return 0;if(v.isBlob(e))return e.size;if(v.isSpecCompliantForm(e))return(await new Request(Ie.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(v.isArrayBufferView(e)||v.isArrayBuffer(e))return e.byteLength;if(v.isURLSearchParams(e)&&(e=e+""),v.isString(e))return(await Sg(e)).byteLength},xg=async(e,t)=>{const n=v.toFiniteNumber(e.getContentLength());return n??Rg(t)},Tg=hr&&(async e=>{let{url:t,method:n,data:s,signal:r,cancelToken:o,timeout:i,onDownloadProgress:l,onUploadProgress:a,responseType:u,headers:c,withCredentials:f="same-origin",fetchOptions:p}=xc(e);u=u?(u+"").toLowerCase():"text";let m=yg([r,o&&o.toAbortSignal()],i),y;const _=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let S;try{if(a&&Eg&&n!=="get"&&n!=="head"&&(S=await xg(c,s))!==0){let F=new Request(t,{method:"POST",body:s,duplex:"half"}),Z;if(v.isFormData(s)&&(Z=F.headers.get("content-type"))&&c.setContentType(Z),F.body){const[J,ue]=ol(S,js(il(a)));s=al(F.body,cl,J,ue)}}v.isString(f)||(f=f?"include":"omit");const A="credentials"in Request.prototype;y=new Request(t,{...p,signal:m,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:s,duplex:"half",credentials:A?f:void 0});let k=await fetch(y);const O=oo&&(u==="stream"||u==="response");if(oo&&(l||O&&_)){const F={};["status","statusText","headers"].forEach(K=>{F[K]=k[K]});const Z=v.toFiniteNumber(k.headers.get("content-length")),[J,ue]=l&&ol(Z,js(il(l),!0))||[];k=new Response(al(k.body,cl,J,()=>{ue&&ue(),_&&_()}),F)}u=u||"text";let P=await qs[v.findKey(qs,u)||"text"](k,e);return!O&&_&&_(),await new Promise((F,Z)=>{Ec(F,Z,{data:P,headers:Be.from(k.headers),status:k.status,statusText:k.statusText,config:e,request:y})})}catch(A){throw _&&_(),A&&A.name==="TypeError"&&/Load failed|fetch/i.test(A.message)?Object.assign(new Q("Network Error",Q.ERR_NETWORK,e,y),{cause:A.cause||A}):Q.from(A,A&&A.code,e,y)}}),io={http:Bh,xhr:bg,fetch:Tg};v.forEach(io,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ul=e=>`- ${e}`,kg=e=>v.isFunction(e)||e===null||e===!1,Ac={getAdapter:e=>{e=v.isArray(e)?e:[e];const{length:t}=e;let n,s;const r={};for(let o=0;o<t;o++){n=e[o];let i;if(s=n,!kg(n)&&(s=io[(i=String(n)).toLowerCase()],s===void 0))throw new Q(`Unknown adapter '${i}'`);if(s)break;r[i||"#"+o]=s}if(!s){const o=Object.entries(r).map(([l,a])=>`adapter ${l} `+(a===!1?"is not supported by the environment":"is not available in the build"));let i=t?o.length>1?`since :
`+o.map(ul).join(`
`):" "+ul(o[0]):"as no adapter specified";throw new Q("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return s},adapters:io};function Mr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new In(null,e)}function fl(e){return Mr(e),e.headers=Be.from(e.headers),e.data=$r.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ac.getAdapter(e.adapter||hs.adapter)(e).then(function(s){return Mr(e),s.data=$r.call(e,e.transformResponse,s),s.headers=Be.from(s.headers),s},function(s){return Sc(s)||(Mr(e),s&&s.response&&(s.response.data=$r.call(e,e.transformResponse,s.response),s.response.headers=Be.from(s.response.headers))),Promise.reject(s)})}const Cc="1.9.0",gr={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{gr[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const dl={};gr.transitional=function(t,n,s){function r(o,i){return"[Axios v"+Cc+"] Transitional option '"+o+"'"+i+(s?". "+s:"")}return(o,i,l)=>{if(t===!1)throw new Q(r(i," has been removed"+(n?" in "+n:"")),Q.ERR_DEPRECATED);return n&&!dl[i]&&(dl[i]=!0,console.warn(r(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,i,l):!0}};gr.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function Ag(e,t,n){if(typeof e!="object")throw new Q("options must be an object",Q.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const o=s[r],i=t[o];if(i){const l=e[o],a=l===void 0||i(l,o,e);if(a!==!0)throw new Q("option "+o+" must be "+a,Q.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Q("Unknown option "+o,Q.ERR_BAD_OPTION)}}const Os={assertOptions:Ag,validators:gr},bt=Os.validators;let en=class{constructor(t){this.defaults=t||{},this.interceptors={request:new sl,response:new sl}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=sn(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:o}=n;s!==void 0&&Os.assertOptions(s,{silentJSONParsing:bt.transitional(bt.boolean),forcedJSONParsing:bt.transitional(bt.boolean),clarifyTimeoutError:bt.transitional(bt.boolean)},!1),r!=null&&(v.isFunction(r)?n.paramsSerializer={serialize:r}:Os.assertOptions(r,{encode:bt.function,serialize:bt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Os.assertOptions(n,{baseUrl:bt.spelling("baseURL"),withXsrfToken:bt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&v.merge(o.common,o[n.method]);o&&v.forEach(["delete","get","head","post","put","patch","common"],y=>{delete o[y]}),n.headers=Be.concat(i,o);const l=[];let a=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(a=a&&_.synchronous,l.unshift(_.fulfilled,_.rejected))});const u=[];this.interceptors.response.forEach(function(_){u.push(_.fulfilled,_.rejected)});let c,f=0,p;if(!a){const y=[fl.bind(this),void 0];for(y.unshift.apply(y,l),y.push.apply(y,u),p=y.length,c=Promise.resolve(n);f<p;)c=c.then(y[f++],y[f++]);return c}p=l.length;let m=n;for(f=0;f<p;){const y=l[f++],_=l[f++];try{m=y(m)}catch(S){_.call(this,S);break}}try{c=fl.call(this,m)}catch(y){return Promise.reject(y)}for(f=0,p=u.length;f<p;)c=c.then(u[f++],u[f++]);return c}getUri(t){t=sn(this.defaults,t);const n=Rc(t.baseURL,t.url,t.allowAbsoluteUrls);return _c(n,t.params,t.paramsSerializer)}};v.forEach(["delete","get","head","options"],function(t){en.prototype[t]=function(n,s){return this.request(sn(s||{},{method:t,url:n,data:(s||{}).data}))}});v.forEach(["post","put","patch"],function(t){function n(s){return function(o,i,l){return this.request(sn(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}en.prototype[t]=n(),en.prototype[t+"Form"]=n(!0)});let Cg=class Ic{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(r=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](r);s._listeners=null}),this.promise.then=r=>{let o;const i=new Promise(l=>{s.subscribe(l),o=l}).then(r);return i.cancel=function(){s.unsubscribe(o)},i},t(function(o,i,l){s.reason||(s.reason=new In(o,i,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Ic(function(r){t=r}),cancel:t}}};function Ig(e){return function(n){return e.apply(null,n)}}function Og(e){return v.isObject(e)&&e.isAxiosError===!0}const lo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lo).forEach(([e,t])=>{lo[t]=e});function Oc(e){const t=new en(e),n=lc(en.prototype.request,t);return v.extend(n,en.prototype,t,{allOwnKeys:!0}),v.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return Oc(sn(e,r))},n}const Ee=Oc(hs);Ee.Axios=en;Ee.CanceledError=In;Ee.CancelToken=Cg;Ee.isCancel=Sc;Ee.VERSION=Cc;Ee.toFormData=pr;Ee.AxiosError=Q;Ee.Cancel=Ee.CanceledError;Ee.all=function(t){return Promise.all(t)};Ee.spread=Ig;Ee.isAxiosError=Og;Ee.mergeConfig=sn;Ee.AxiosHeaders=Be;Ee.formToJSON=e=>wc(v.isHTMLForm(e)?new FormData(e):e);Ee.getAdapter=Ac.getAdapter;Ee.HttpStatusCode=lo;Ee.default=Ee;const{Axios:E_,AxiosError:R_,CanceledError:x_,isCancel:T_,CancelToken:k_,VERSION:A_,all:C_,Cancel:I_,isAxiosError:O_,spread:P_,toFormData:L_,AxiosHeaders:N_,HttpStatusCode:$_,formToJSON:M_,getAdapter:D_,mergeConfig:U_}=Ee,st=Ee.create({baseURL:"/api/v1",timeout:3e4});st.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e},e=>Promise.reject(e));const Pg={login(e,t){const n=new URLSearchParams;return n.append("username",e),n.append("password",t),console.log("API 模块 login - 准备发送的数据 (form-urlencoded):",n.toString()),st.post("/auth/token",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},register(e){return console.log("API 模块 register - 准备发送的数据 (JSON):",e),st.post("/auth/register",e,{headers:{"Content-Type":"application/json"}})},getCurrentUser(){return st.get("/users/me")}},Lg={getAvailableScales(){return st.get("/scales")},getScaleQuestions(e){return st.get(`/scales/${e}/questions`)}},Ng={getCategories(){return st.get("/encyclopedia/categories")},getEntries(e=null){const t=e?`/encyclopedia/entries?category=${encodeURIComponent(e)}`:"/encyclopedia/entries";return st.get(t)},getRandomTip(){return st.get("/encyclopedia/entries?random_tip=true")}},$g={submitAssessment(e){return console.log("API 模块 submitAssessment - 准备发送的数据 (FormData)"),st.post("/assessments/submit",e,{headers:{}})}},Mg={getReport(e){return st.get(`/reports/${e}`)},getReportStatus(e){return st.get(`/reports/${e}/status`)}},yt={auth:Pg,scales:Lg,encyclopedia:Ng,assessments:$g,reports:Mg},Pc=eh({state(){return{user:null,token:null,scales:[],currentScale:null,scaleQuestions:[],assessment:{basicInfo:{name:"",gender:"",age:"",id_card:"",occupation:"",case_name:"",case_type:"",identity_type:"",person_type:"",marital_status:"",children_info:"",criminal_record:0,health_status:"",phone_number:"",domicile:""},answers:{},uploadedImage:null,submissionId:null},psychologyTips:[],currentTip:null,loading:!1,error:null,report:null,reportStatus:"pending"}},getters:{isAuthenticated(e){return!!e.token},currentUser(e){return e.user},availableScales(e){return e.scales},getScaleQuestions(e){return e.scaleQuestions},getCurrentTip(e){return e.currentTip},getAssessmentBasicInfo(e){return e.assessment.basicInfo},getAssessmentAnswers(e){return e.assessment.answers},getUploadedImage(e){return e.assessment.uploadedImage},getSubmissionId(e){return console.log("[Getter: getSubmissionId] 返回:",e.assessment.submissionId),e.assessment.submissionId},getReport(e){return console.log("[Getter: getReport] 返回:",e.report),e.report},isLoading(e){return e.loading},getReportStatus(e){return e.reportStatus}},mutations:{SET_TOKEN(e,t){e.token=t,t?(localStorage.setItem("token",t),console.log("[Mutation: SET_TOKEN] Token 已设置到 state 和 localStorage。")):(localStorage.removeItem("token"),console.log("[Mutation: SET_TOKEN] Token 已从 state 和 localStorage 移除。"))},SET_USER(e,t){e.user=t,console.log("[Mutation: SET_USER] 用户信息已设置到 state:",t)},SET_SCALES(e,t){e.scales=t,console.log("[Mutation: SET_SCALES] 量表列表已设置到 state:",t==null?void 0:t.length)},SET_CURRENT_SCALE(e,t){e.currentScale=t,console.log("[Mutation: SET_CURRENT_SCALE] 当前量表已设置为:",t)},SET_SCALE_QUESTIONS(e,t){e.scaleQuestions=t,console.log("[Mutation: SET_SCALE_QUESTIONS] 量表问题已设置:",t==null?void 0:t.length)},SET_PSYCHOLOGY_TIPS(e,t){e.psychologyTips=t,console.log("[Mutation: SET_PSYCHOLOGY_TIPS] 心理小贴士已设置:",t==null?void 0:t.length)},SET_CURRENT_TIP(e,t){e.currentTip=t,console.log("[Mutation: SET_CURRENT_TIP] 当前心理小贴士已设置:",t==null?void 0:t.title)},SET_BASIC_INFO(e,t){e.assessment.basicInfo={...e.assessment.basicInfo,...t},console.log("[Mutation: SET_BASIC_INFO] 基础信息已更新。")},SET_ANSWER(e,{questionNumber:t,answer:n}){e.assessment.answers={...e.assessment.answers,["q"+t]:n}},SET_UPLOADED_IMAGE(e,t){e.assessment.uploadedImage=t,console.log("[Mutation: SET_UPLOADED_IMAGE] 上传的图片已更新:",t?t.name:null)},SET_SUBMISSION_ID(e,t){e.assessment.submissionId=t,console.log("[Mutation: SET_SUBMISSION_ID] 提交 ID 已设置为:",t)},SET_REPORT(e,t){console.log("[Mutation: SET_REPORT] 触发。接收到的 payload:",t),e.report=t,t&&typeof t=="object"&&t.report_text?console.log("[Mutation: SET_REPORT] State 已使用有效的报告数据更新。"):t==null?console.log("[Mutation: SET_REPORT] State 已使用 NULL/UNDEFINED 报告更新。"):console.warn("[Mutation: SET_REPORT] State 已更新，但接收到的报告数据似乎无效或不完整:",t)},SET_REPORT_STATUS(e,t){console.log(`[Mutation: SET_REPORT_STATUS] 状态更新为: ${t}`),e.reportStatus=t},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t,console.error("[Mutation: SET_ERROR] 错误信息已设置到 state:",t)},RESET_ASSESSMENT(e){console.log("[Mutation: RESET_ASSESSMENT] 正在重置评估状态..."),e.assessment={basicInfo:{name:"",gender:"",age:"",id_card:"",occupation:"",case_name:"",case_type:"",identity_type:"",person_type:"",marital_status:"",children_info:"",criminal_record:0,health_status:"",phone_number:"",domicile:""},answers:{},uploadedImage:null,submissionId:null},e.scaleQuestions=[],e.currentScale=null,e.report=null,console.log("[Mutation: RESET_ASSESSMENT] 评估状态重置完成。")},CLEAR_ERROR(e){e.error&&(console.log("[Mutation: CLEAR_ERROR] 正在清除错误状态。"),e.error=null)}},actions:{async login({commit:e,dispatch:t},{username:n,password:s}){var r,o;console.log("[Action: login] 触发。"),e("CLEAR_ERROR"),e("SET_LOADING",!0);try{console.log("[Action: login] 尝试 API 登录，用户名:",n);const i=await yt.auth.login(n,s);if(console.log("[Action: login] 收到 API 响应:",i),i&&i.data&&i.data.access_token)return e("SET_TOKEN",i.data.access_token),await t("fetchCurrentUser"),console.log("[Action: login] 登录并获取用户信息成功。"),e("SET_LOADING",!1),i;throw new Error("登录响应无效或缺少 access_token。")}catch(i){const l=((o=(r=i.response)==null?void 0:r.data)==null?void 0:o.detail)||i.message||"登录失败，请检查您的凭据或网络连接。";throw console.error("[Action: login] 失败。",i.response||i),e("SET_ERROR",l),e("SET_TOKEN",null),e("SET_USER",null),e("SET_LOADING",!1),i}},async register({commit:e},t){var n,s;console.log("[Action: register] 触发。"),e("CLEAR_ERROR"),e("SET_LOADING",!0);try{const r=await yt.auth.register(t);return console.log("[Action: register] API 响应:",r),e("SET_LOADING",!1),r}catch(r){const o=((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.detail)||r.message||"注册失败，请稍后再试。";throw console.error("[Action: register] 失败。",r.response||r),e("SET_ERROR",o),e("SET_LOADING",!1),r}},async fetchCurrentUser({commit:e,state:t}){var n,s;if(console.log("[Action: fetchCurrentUser] 触发。"),!t.token){console.warn("[Action: fetchCurrentUser] 未找到 token，跳过 API 调用。");return}try{const r=await yt.auth.getCurrentUser();return console.log("[Action: fetchCurrentUser] API 响应:",r),e("SET_USER",r.data),r}catch(r){const o=((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.detail)||r.message||"无法获取用户信息，您的会话可能已过期。";console.error("[Action: fetchCurrentUser] 失败。",r.response||r),e("SET_TOKEN",null),e("SET_USER",null),e("SET_ERROR",o)}},logout({commit:e}){console.log("[Action: logout] 触发。"),e("SET_TOKEN",null),e("SET_USER",null),e("RESET_ASSESSMENT"),e("CLEAR_ERROR"),console.log("[Action: logout] 用户已登出，状态已重置。")},async fetchScales({commit:e}){var t,n;console.log("[Action: fetchScales] 触发。"),e("CLEAR_ERROR"),e("SET_LOADING",!0);try{const s=await yt.scales.getAvailableScales();return console.log("[Action: fetchScales] API 响应:",s.data),s&&s.data&&Array.isArray(s.data.scales)?e("SET_SCALES",s.data.scales):(console.warn("[Action: fetchScales] 从 API 收到的响应结构无效。"),e("SET_SCALES",[])),e("SET_LOADING",!1),s}catch(s){const r=((n=(t=s.response)==null?void 0:t.data)==null?void 0:n.detail)||s.message||"无法加载量表列表。";throw console.error("[Action: fetchScales] 失败。",s.response||s),e("SET_ERROR",r),e("SET_SCALES",[]),e("SET_LOADING",!1),s}},async fetchScaleQuestions({commit:e},t){var n,s;console.log("[Action: fetchScaleQuestions] 触发，量表代码:",t),e("CLEAR_ERROR"),e("SET_LOADING",!0);try{e("SET_CURRENT_SCALE",t);const r=await yt.scales.getScaleQuestions(t);return console.log("[Action: fetchScaleQuestions] 量表",t,"的 API 响应:",r.data),r&&r.data&&Array.isArray(r.data.questions)?e("SET_SCALE_QUESTIONS",r.data.questions):(console.warn("[Action: fetchScaleQuestions] 从 API 收到的响应结构无效。"),e("SET_SCALE_QUESTIONS",[])),e("SET_LOADING",!1),r}catch(r){const o=((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.detail)||r.message||"无法加载量表问题。";throw console.error("[Action: fetchScaleQuestions] 失败。",r.response||r),e("SET_ERROR",o),e("SET_SCALE_QUESTIONS",[]),e("SET_LOADING",!1),r}},setBasicInfo({commit:e},t){console.log("[Action: setBasicInfo] 触发。"),e("SET_BASIC_INFO",t)},setAnswer({commit:e},{questionNumber:t,answer:n}){e("SET_ANSWER",{questionNumber:t,answer:n})},setUploadedImage({commit:e},t){console.log("[Action: setUploadedImage] 触发。"),e("SET_UPLOADED_IMAGE",t)},async submitAssessment({commit:e,state:t}){var n,s;console.log("[Action: submitAssessment] 触发。"),e("CLEAR_ERROR"),e("SET_LOADING",!0);try{const r=new FormData;Object.entries(t.assessment.basicInfo).forEach(([i,l])=>{l!=null&&l!==""&&r.append(i,l)}),t.currentScale&&r.append("scale_type",t.currentScale),Object.entries(t.assessment.answers).forEach(([i,l])=>{r.append(i,l)}),t.assessment.uploadedImage&&r.append("image",t.assessment.uploadedImage),console.log("[Action: submitAssessment] 正在向 API 发送 FormData...");const o=await yt.assessments.submitAssessment(r);if(console.log("[Action: submitAssessment] API 响应:",o),o&&o.data&&o.data.submission_id)e("SET_SUBMISSION_ID",o.data.submission_id);else throw console.warn("[Action: submitAssessment] API 响应缺少 submission_id。"),new Error("提交评估响应无效，缺少 submission_id。");return e("SET_LOADING",!1),o}catch(r){const o=((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.detail)||r.message||"提交评估失败。";throw console.error("[Action: submitAssessment] 失败。",r.response||r),e("SET_ERROR",o),e("SET_LOADING",!1),r}},async fetchRandomTip({commit:e}){console.log("[Action: fetchRandomTip] 触发。");try{const t=await yt.encyclopedia.getRandomTip();return console.log("[Action: fetchRandomTip] API 响应:",t),t&&t.data&&Array.isArray(t.data.entries)&&t.data.entries.length>0?e("SET_CURRENT_TIP",t.data.entries[0]):(console.warn("[Action: fetchRandomTip] 响应中未找到小贴士条目。"),e("SET_CURRENT_TIP",{category:"提示",title:"小贴士",content:"保持积极心态，迎接每一天！"})),t}catch(t){return console.error("[Action: fetchRandomTip] 失败。",t.response||t),e("SET_CURRENT_TIP",{category:"提示",title:"网络错误",content:"无法获取心理小贴士，请检查网络连接。"}),null}},async fetchReportStatus({commit:e,state:t}){var s,r,o;const n=t.assessment.submissionId;if(!n)return console.warn("[Action: fetchReportStatus] 没有 submissionId，无法获取状态。"),e("SET_REPORT_STATUS","not_found"),null;console.log(`[Action: fetchReportStatus] 触发，检查 ID: ${n} 的状态...`),e("CLEAR_ERROR");try{console.log("[Action: fetchReport] 使用的 api 实例默认 baseURL:",yt.defaults.baseURL),console.log(`[Action: fetchReport] 准备调用 api.reports.getReport，ID: ${n}`);const i=await yt.reports.getReportStatus(n);return console.log("[Action: fetchReportStatus] API 响应:",i),i&&i.data&&i.data.status?(e("SET_REPORT_STATUS",i.data.status),i.data.status):(console.warn("[Action: fetchReportStatus] 无效的状态 API 响应结构。"),e("SET_REPORT_STATUS","failed"),"failed")}catch(i){console.error(`[Action: fetchReportStatus] 获取 ID: ${n} 状态时出错。`,i.response||i);let l="failed",a="无法获取报告状态。";return((s=i.response)==null?void 0:s.status)===404?(console.log(`[Action: fetchReportStatus] 评估 ID: ${n} 未找到 (404)。`),l="not_found",a="评估记录未找到。"):a=((o=(r=i.response)==null?void 0:r.data)==null?void 0:o.detail)||i.message||a,e("SET_REPORT_STATUS",l),l}},async fetchReport({commit:e,state:t}){var s;const n=t.assessment.submissionId;if(console.log(`[Action: fetchReport] 触发获取完整报告，ID: ${n}。`),!n)return console.warn("[Action: fetchReport] state 中没有可用的 submission ID。"),e("SET_REPORT",null),null;e("CLEAR_ERROR"),e("SET_LOADING",!0);try{console.log(`[Action: fetchReport] 正在调用 API 获取完整报告，ID: ${n}...`);const r=await yt.reports.getReport(n);return console.log("[Action: fetchReport] 收到 API 响应:",r),r&&r.data&&r.data.report?(e("SET_REPORT",r.data.report),console.log(`[Action: fetchReport] 已接收并保存完整报告数据，ID: ${n}。`)):r&&r.data&&r.data.message?(console.warn(`[Action: fetchReport] API 返回了消息而非报告: ${r.data.message}. 报告可能未就绪或失败。`),e("SET_REPORT",null),r.data.message.includes("失败")&&(e("SET_REPORT_STATUS","failed"),e("SET_ERROR",r.data.message))):(console.warn("[Action: fetchReport] 无效的 API 响应结构或未包含报告数据。"),e("SET_REPORT",null),e("SET_ERROR","获取报告时响应无效。")),e("SET_LOADING",!1),r}catch(r){let o="无法获取分析报告。";throw r.response?(console.error(`[Action: fetchReport] 服务器响应错误状态: ${r.response.status}`,r.response.data),o=((s=r.response.data)==null?void 0:s.detail)||o,r.response.status===404?(o="评估记录未找到。",e("SET_REPORT_STATUS","not_found")):(r.response.status===401||r.response.status===403)&&(o="身份验证失败或无权限。")):r.request?(console.error("[Action: fetchReport] 未收到服务器响应。"),o="服务器未响应，请检查网络连接。"):(console.error("[Action: fetchReport] 设置请求时出错:",r.message),o=`请求出错: ${r.message}`),console.error(`[Action: fetchReport] 获取 ID: ${n} 的报告失败。`,r),e("SET_ERROR",o),e("SET_REPORT",null),e("SET_LOADING",!1),r}},resetAssessment({commit:e}){console.log("[Action: resetAssessment] 触发。"),e("RESET_ASSESSMENT")},clearError({commit:e}){e("CLEAR_ERROR")}}}),Dg="/assets/police_emblem-Dmb8xxjE.png",Ug={name:"LoginView",data(){return{username:"",password:"",loading:!1,error:"",showPassword:!1}},computed:{...fs({storeError:e=>e.error})},watch:{storeError(e){this.error=e}},methods:{...ds(["login","clearError"]),async handleLoginSubmit(){console.log("Login button clicked, executing LoginView handleLoginSubmit method..."),this.error="",this.loading=!0;try{await this.login({username:this.username,password:this.password}),console.log("LoginView: Vuex action call presumably successful (no error thrown)."),this.$router.push("/user-info")}catch(e){console.error("LoginView: Caught error after Vuex action call:",e)}finally{this.loading=!1}}},created(){this.clearError(),this.error=""}},Vg={class:"page-container login-page"},Fg={class:"card login-card"},Bg={class:"form-group"},jg={class:"form-group"},qg={class:"password-input-container"},Hg=["type"],zg={key:0,class:"error-message"},Gg=["disabled"],Kg={class:"register-link"};function Wg(e,t,n,s,r,o){const i=it("router-link");return j(),z("div",Vg,[t[11]||(t[11]=cs('<div class="tech-circles" data-v-fab92b12><div class="circle circle-1" data-v-fab92b12></div><div class="circle circle-2" data-v-fab92b12></div><div class="floating-icons" data-v-fab92b12><i class="fas fa-brain icon icon-1" data-v-fab92b12></i><i class="fas fa-project-diagram icon icon-2" data-v-fab92b12></i><i class="fas fa-microscope icon icon-3" data-v-fab92b12></i><i class="fas fa-dna icon icon-4" data-v-fab92b12></i></div></div><div class="logo-container" data-v-fab92b12><img src="'+Dg+'" alt="警徽" class="emblem-image" data-v-fab92b12><h1 data-v-fab92b12>“倾听者”AI智能警务分析评估应用系统<span class="tech-badge" data-v-fab92b12>AI</span></h1></div>',2)),d("div",Fg,[t[10]||(t[10]=d("div",{class:"card-header"},[d("i",{class:"fas fa-user-circle"}),d("h2",null,"用户登录")],-1)),d("form",{onSubmit:t[3]||(t[3]=ir((...l)=>o.handleLoginSubmit&&o.handleLoginSubmit(...l),["prevent"]))},[d("div",Bg,[t[4]||(t[4]=d("label",{for:"username"},[d("i",{class:"fas fa-user form-icon"}),H(" 用户名 (身份证号/手机号) ")],-1)),_e(d("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=l=>r.username=l),required:"",placeholder:"请输入用户名"},null,512),[[Te,r.username]])]),d("div",jg,[t[5]||(t[5]=d("label",{for:"password"},[d("i",{class:"fas fa-lock form-icon"}),H(" 密码 ")],-1)),d("div",qg,[_e(d("input",{type:r.showPassword?"text":"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=l=>r.password=l),required:"",placeholder:"请输入密码"},null,8,Hg),[[Jr,r.password]]),d("button",{type:"button",class:"toggle-password",onClick:t[2]||(t[2]=l=>r.showPassword=!r.showPassword),title:"切换密码可见性"},[d("i",{class:Ze(r.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),r.error?(j(),z("div",zg,[t[6]||(t[6]=d("i",{class:"fas fa-exclamation-circle"},null,-1)),H(" "+le(r.error),1)])):ve("",!0),d("button",{type:"submit",class:"btn btn-block",disabled:r.loading},[t[7]||(t[7]=d("i",{class:"fas fa-sign-in-alt btn-icon"},null,-1)),H(" "+le(r.loading?"登录中...":"登录"),1)],8,Gg)],32),d("div",Kg,[t[9]||(t[9]=H(" 还没有账号？ ")),ye(i,{to:"/register"},{default:En(()=>t[8]||(t[8]=[d("i",{class:"fas fa-user-plus"},null,-1),H(" 立即注册 ")])),_:1})])])])}const Qg=ct(Ug,[["render",Wg],["__scopeId","data-v-fab92b12"]]),Jg={name:"NavBar",props:{title:{type:String,required:!0},canGoBack:{type:Boolean,default:!0}},methods:{goBack(){this.canGoBack&&this.$router.back()}}},Zg={class:"nav-bar"},Xg={class:"nav-title"};function Yg(e,t,n,s,r,o){return j(),z("div",Zg,[n.canGoBack?(j(),z("div",{key:0,class:"nav-left",onClick:t[0]||(t[0]=(...i)=>o.goBack&&o.goBack(...i))},t[1]||(t[1]=[d("div",{class:"back-button"},[d("i",{class:"fas fa-chevron-left"})],-1)]))):ve("",!0),d("div",Xg,[t[2]||(t[2]=d("i",{class:"fas fa-brain nav-icon"},null,-1)),d("span",null,le(n.title),1)]),t[3]||(t[3]=d("div",{class:"nav-right"},[d("div",{class:"status-indicator"},[d("span",{class:"pulse-dot"}),d("span",{class:"status-text"},"AI")])],-1))])}const gs=ct(Jg,[["render",Yg],["__scopeId","data-v-2bd0dc8b"]]),em={name:"RegisterView",components:{NavBar:gs},data(){return{form:{username:"",email:"",password:"",is_active:!0},confirmPassword:"",loading:!1,error:null,passwordError:"",registrationSuccess:!1,showPassword:!1}},computed:{isValidEmail(){return this.form.email?/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.form.email).toLowerCase()):!1}},watch:{"form.password":function(){this.validatePasswordMatch()},confirmPassword:function(){this.validatePasswordMatch()}},methods:{validatePasswordMatch(){this.form.password&&this.confirmPassword?this.passwordError=this.form.password!==this.confirmPassword?"两次输入的密码不一致":"":this.passwordError=""},formatError(e){if(console.error("原始错误对象:",e),Array.isArray(e))return e.map(t=>`${t.loc.join(".")}: ${t.msg}`).join("; ");if(typeof e=="object"&&e!==null&&e.detail){if(typeof e.detail=="string")return e.detail;if(Array.isArray(e.detail))return e.detail.map(t=>`${t.loc.join(".")}: ${t.msg}`).join("; ")}else{if(typeof e=="string")return e;if(e&&e.message)return e.message}return"发生未知错误，请检查控制台获取更多信息。"},async handleRegisterSubmit(){var t;if(this.passwordError)return;this.error=null,this.registrationSuccess=!1,this.loading=!0;const e={...this.form};e.email||delete e.email,console.log("准备发送的注册数据:",e);try{await this.$store.dispatch("register",e),this.registrationSuccess=!0,setTimeout(()=>{this.$router.push("/login")},1500)}catch(n){console.error("注册过程中捕获到错误:",n),this.error=((t=n==null?void 0:n.response)==null?void 0:t.data)||(n==null?void 0:n.message)||"注册失败，请检查输入或稍后再试。"}finally{this.loading=!1}}},created(){this.$store.dispatch("clearError")}},tm={class:"page-container register-page"},nm={class:"card register-card"},sm={class:"form-group"},rm={key:0,class:"input-validation"},om={class:"form-group"},im={key:0,class:"input-validation"},lm={class:"form-group"},am={class:"password-input-container"},cm=["type"],um={key:0,class:"input-validation password-validation"},fm={class:"form-group"},dm={class:"password-input-container"},pm=["type"],hm={key:0,class:"input-validation password-validation"},gm={key:0,class:"error-message"},mm={key:0,class:"error-message"},bm={key:1,class:"success-message"},ym=["disabled"],_m={class:"login-link"};function vm(e,t,n,s,r,o){const i=it("nav-bar"),l=it("router-link");return j(),z("div",tm,[ye(i,{title:"注册账号"}),d("div",nm,[t[20]||(t[20]=d("div",{class:"card-header"},[d("i",{class:"fas fa-user-plus"}),d("h2",null,"创建新账号")],-1)),d("form",{onSubmit:t[5]||(t[5]=ir((...a)=>o.handleRegisterSubmit&&o.handleRegisterSubmit(...a),["prevent"]))},[d("div",sm,[t[7]||(t[7]=d("label",{for:"username"},[d("i",{class:"fas fa-user form-icon"}),H(" 用户名 ")],-1)),_e(d("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=a=>r.form.username=a),required:"",placeholder:"请输入用户名 (至少3个字符)",minlength:"3",class:Ze({"input-valid":r.form.username.length>=3&&r.form.username.length>0})},null,2),[[Te,r.form.username]]),r.form.username.length>=3?(j(),z("div",rm,t[6]||(t[6]=[d("i",{class:"fas fa-check-circle validation-icon"},null,-1)]))):ve("",!0)]),d("div",om,[t[9]||(t[9]=d("label",{for:"email"},[d("i",{class:"fas fa-envelope form-icon"}),H(" 邮箱 ")],-1)),_e(d("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=a=>r.form.email=a),placeholder:"请输入邮箱地址",class:Ze({"input-valid":o.isValidEmail})},null,2),[[Te,r.form.email]]),o.isValidEmail?(j(),z("div",im,t[8]||(t[8]=[d("i",{class:"fas fa-check-circle validation-icon"},null,-1)]))):ve("",!0)]),d("div",lm,[t[11]||(t[11]=d("label",{for:"password"},[d("i",{class:"fas fa-lock form-icon"}),H(" 密码 ")],-1)),d("div",am,[_e(d("input",{type:r.showPassword?"text":"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=a=>r.form.password=a),required:"",placeholder:"请输入密码 (至少6个字符)",minlength:"6",class:Ze({"input-valid":r.form.password.length>=6&&r.form.password.length>0})},null,10,cm),[[Jr,r.form.password]]),d("button",{type:"button",class:"toggle-password",onClick:t[3]||(t[3]=a=>r.showPassword=!r.showPassword)},[d("i",{class:Ze(r.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),r.form.password.length>=6&&r.form.password.length>0?(j(),z("div",um,t[10]||(t[10]=[d("i",{class:"fas fa-check-circle validation-icon"},null,-1)]))):ve("",!0)]),d("div",fm,[t[14]||(t[14]=d("label",{for:"confirmPassword"},[d("i",{class:"fas fa-shield-alt form-icon"}),H(" 确认密码 ")],-1)),d("div",dm,[_e(d("input",{type:r.showPassword?"text":"password",id:"confirmPassword","onUpdate:modelValue":t[4]||(t[4]=a=>r.confirmPassword=a),required:"",placeholder:"请再次输入密码",class:Ze({"input-valid":r.confirmPassword===r.form.password&&r.confirmPassword.length>0,"input-invalid":r.passwordError})},null,10,pm),[[Jr,r.confirmPassword]]),r.confirmPassword===r.form.password&&r.confirmPassword.length>0?(j(),z("div",hm,t[12]||(t[12]=[d("i",{class:"fas fa-check-circle validation-icon"},null,-1)]))):ve("",!0)]),r.passwordError?(j(),z("div",gm,[t[13]||(t[13]=d("i",{class:"fas fa-exclamation-circle"},null,-1)),H(" "+le(r.passwordError),1)])):ve("",!0)]),r.error?(j(),z("div",mm,[t[15]||(t[15]=d("i",{class:"fas fa-exclamation-triangle"},null,-1)),H(" 注册失败: "+le(o.formatError(r.error)),1)])):ve("",!0),r.registrationSuccess?(j(),z("div",bm,t[16]||(t[16]=[d("i",{class:"fas fa-check-circle"},null,-1),H(" 注册成功！请前往登录。 ")]))):ve("",!0),d("button",{type:"submit",class:"btn btn-block",disabled:r.loading||!!r.passwordError},[t[17]||(t[17]=d("i",{class:"fas fa-user-plus btn-icon"},null,-1)),H(" "+le(r.loading?"注册中...":"注册"),1)],8,ym)],32),d("div",_m,[t[19]||(t[19]=H(" 已有账号？ ")),ye(l,{to:"/login"},{default:En(()=>t[18]||(t[18]=[d("i",{class:"fas fa-sign-in-alt"},null,-1),H(" 登录 ")])),_:1})])])])}const wm=ct(em,[["render",vm],["__scopeId","data-v-85ecef0e"]]),Sm=e=>e?new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",Em=e=>/(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(e),Rm=e=>/^1[3-9]\d{9}$/.test(e),xm=e=>{const t=parseInt(e,10);return!isNaN(t)&&t>0&&t<150},pl=[{category:"心理小贴士",title:"专注力提升",content:"每天花5分钟进行深呼吸冥想，可以有效提高注意力和减少分心。"},{category:"心理小贴士",title:"情绪管理",content:'感到焦虑时，尝试"5-4-3-2-1"技巧：说出5个你看到的东西，4个你触摸到的东西，3个你听到的声音，2个你闻到的气味，1个你尝到的味道。'},{category:"心理小贴士",title:"人际关系",content:"积极倾听是建立良好人际关系的关键，尝试在对话中花80%的时间倾听，20%的时间讲话。"},{category:"心理小贴士",title:"自我成长",content:"研究表明，学习新技能不仅能提高能力，还能增加幸福感和降低抑郁风险。"},{category:"心理小贴士",title:"压力缓解",content:'感到压力大时，尝试"方块呼吸法"：吸气4秒，屏息4秒，呼气4秒，再屏息4秒，构成一个完整的"方块"循环。'}],Tm=()=>{const e=Math.floor(Math.random()*pl.length);return pl[e]},km={name:"UserInfoView",components:{NavBar:gs},data(){return{form:{name:"",gender:"",age:"",id_card:"",occupation:"",phone_number:"",marital_status:"",children_info:"",criminal_record:"0",health_status:"",domicile:"",case_name:"",case_type:"",identity_type:"",person_type:""},idCardError:"",phoneError:"",error:"",loading:!1}},computed:{...fs({basicInfo:e=>e.assessment.basicInfo,storeError:e=>e.error})},watch:{storeError(e){e&&(this.error=e)},"form.id_card"(){this.validateIdCard()},"form.phone_number"(){this.validatePhone()}},methods:{...ds(["setBasicInfo","clearError"]),validateIdCard(){return this.form.id_card?Em(this.form.id_card)?(this.idCardError="",!0):(this.idCardError="请输入有效的身份证号",!1):(this.idCardError="",!0)},validatePhone(){return this.form.phone_number?Rm(this.form.phone_number)?(this.phoneError="",!0):(this.phoneError="请输入有效的手机号",!1):(this.phoneError="",!0)},validateAge(){return xm(this.form.age)?!0:(this.error="请输入有效的年龄",!1)},submitInfo(){if(!this.form.name||!this.form.gender||!this.form.age){this.error="请填写必填字段 (姓名、性别、年龄)";return}if(!this.validateIdCard()||!this.validatePhone()||!this.validateAge())return;this.error="";const e={...this.form,criminal_record:parseInt(this.form.criminal_record,10),age:parseInt(this.form.age,10)};this.setBasicInfo(e),this.$router.push("/questionnaire")}},created(){this.clearError(),this.basicInfo&&(this.form={...this.basicInfo,criminal_record:this.basicInfo.criminal_record.toString()})}},Am={class:"page-container user-info-page"},Cm={class:"card info-card"},Im={class:"form-section"},Om={class:"form-group"},Pm={class:"form-row"},Lm={class:"form-group form-group-half"},Nm={class:"select-wrapper"},$m={class:"form-group form-group-half"},Mm={class:"form-group"},Dm={key:0,class:"error-message"},Um={class:"form-section"},Vm={class:"form-row"},Fm={class:"form-group form-group-half"},Bm={class:"form-group form-group-half"},jm={key:0,class:"error-message"},qm={class:"form-section"},Hm={class:"form-row"},zm={class:"form-group form-group-half"},Gm={class:"select-wrapper"},Km={class:"form-group form-group-half"},Wm={class:"form-group"},Qm={class:"form-section"},Jm={class:"form-group"},Zm={class:"form-group"},Xm={class:"radio-group"},Ym={class:"radio-label"},eb={class:"radio-label"},tb={class:"form-section"},nb={class:"form-row"},sb={class:"form-group form-group-half"},rb={class:"form-group form-group-half"},ob={class:"form-row"},ib={class:"form-group form-group-half"},lb={class:"form-group form-group-half"},ab={key:0,class:"error-message global-error"},cb=["disabled"];function ub(e,t,n,s,r,o){const i=it("nav-bar");return j(),z("div",Am,[ye(i,{title:"基本信息",canGoBack:!1}),d("div",Cm,[t[47]||(t[47]=d("div",{class:"card-header"},[d("i",{class:"fas fa-user-edit"}),d("h2",null,"请填写基本信息")],-1)),d("form",{onSubmit:t[16]||(t[16]=ir((...l)=>o.submitInfo&&o.submitInfo(...l),["prevent"]))},[d("div",Im,[t[24]||(t[24]=d("div",{class:"section-title"},[d("i",{class:"fas fa-id-card"}),d("span",null,"个人基本信息")],-1)),d("div",Om,[t[17]||(t[17]=d("label",{for:"name"},[d("i",{class:"fas fa-user form-icon"}),H(" 姓名 "),d("span",{class:"required"},"*")],-1)),_e(d("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=l=>r.form.name=l),required:"",placeholder:"请输入姓名"},null,512),[[Te,r.form.name]])]),d("div",Pm,[d("div",Lm,[t[20]||(t[20]=d("label",{for:"gender"},[d("i",{class:"fas fa-venus-mars form-icon"}),H(" 性别 "),d("span",{class:"required"},"*")],-1)),d("div",Nm,[_e(d("select",{id:"gender","onUpdate:modelValue":t[1]||(t[1]=l=>r.form.gender=l),required:""},t[18]||(t[18]=[d("option",{value:""},"请选择性别",-1),d("option",{value:"男"},"男",-1),d("option",{value:"女"},"女",-1),d("option",{value:"其他"},"其他",-1)]),512),[[Fs,r.form.gender]]),t[19]||(t[19]=d("div",{class:"select-arrow"},[d("i",{class:"fas fa-chevron-down"})],-1))])]),d("div",$m,[t[21]||(t[21]=d("label",{for:"age"},[d("i",{class:"fas fa-birthday-cake form-icon"}),H(" 年龄 "),d("span",{class:"required"},"*")],-1)),_e(d("input",{type:"number",id:"age","onUpdate:modelValue":t[2]||(t[2]=l=>r.form.age=l),required:"",placeholder:"请输入年龄",min:"1",max:"120"},null,512),[[Te,r.form.age]])])]),d("div",Mm,[t[23]||(t[23]=d("label",{for:"id_card"},[d("i",{class:"fas fa-id-badge form-icon"}),H(" 身份证号 ")],-1)),_e(d("input",{type:"text",id:"id_card","onUpdate:modelValue":t[3]||(t[3]=l=>r.form.id_card=l),placeholder:"请输入身份证号"},null,512),[[Te,r.form.id_card]]),r.idCardError?(j(),z("div",Dm,[t[22]||(t[22]=d("i",{class:"fas fa-exclamation-circle"},null,-1)),H(" "+le(r.idCardError),1)])):ve("",!0)])]),d("div",Um,[t[28]||(t[28]=d("div",{class:"section-title"},[d("i",{class:"fas fa-briefcase"}),d("span",null,"职业与联系方式")],-1)),d("div",Vm,[d("div",Fm,[t[25]||(t[25]=d("label",{for:"occupation"},[d("i",{class:"fas fa-briefcase form-icon"}),H(" 职业 ")],-1)),_e(d("input",{type:"text",id:"occupation","onUpdate:modelValue":t[4]||(t[4]=l=>r.form.occupation=l),placeholder:"请输入职业"},null,512),[[Te,r.form.occupation]])]),d("div",Bm,[t[27]||(t[27]=d("label",{for:"phone_number"},[d("i",{class:"fas fa-phone form-icon"}),H(" 手机号 ")],-1)),_e(d("input",{type:"tel",id:"phone_number","onUpdate:modelValue":t[5]||(t[5]=l=>r.form.phone_number=l),placeholder:"请输入手机号"},null,512),[[Te,r.form.phone_number]]),r.phoneError?(j(),z("div",jm,[t[26]||(t[26]=d("i",{class:"fas fa-exclamation-circle"},null,-1)),H(" "+le(r.phoneError),1)])):ve("",!0)])])]),d("div",qm,[t[34]||(t[34]=d("div",{class:"section-title"},[d("i",{class:"fas fa-home"}),d("span",null,"婚姻与家庭")],-1)),d("div",Hm,[d("div",zm,[t[31]||(t[31]=d("label",{for:"marital_status"},[d("i",{class:"fas fa-heart form-icon"}),H(" 婚姻状况 ")],-1)),d("div",Gm,[_e(d("select",{id:"marital_status","onUpdate:modelValue":t[6]||(t[6]=l=>r.form.marital_status=l)},t[29]||(t[29]=[cs('<option value="" data-v-03e884e5>请选择</option><option value="未婚" data-v-03e884e5>未婚</option><option value="已婚" data-v-03e884e5>已婚</option><option value="离异" data-v-03e884e5>离异</option><option value="丧偶" data-v-03e884e5>丧偶</option>',5)]),512),[[Fs,r.form.marital_status]]),t[30]||(t[30]=d("div",{class:"select-arrow"},[d("i",{class:"fas fa-chevron-down"})],-1))])]),d("div",Km,[t[32]||(t[32]=d("label",{for:"children_info"},[d("i",{class:"fas fa-child form-icon"}),H(" 子女情况 ")],-1)),_e(d("input",{type:"text",id:"children_info","onUpdate:modelValue":t[7]||(t[7]=l=>r.form.children_info=l),placeholder:"请描述子女情况"},null,512),[[Te,r.form.children_info]])])]),d("div",Wm,[t[33]||(t[33]=d("label",{for:"domicile"},[d("i",{class:"fas fa-map-marker-alt form-icon"}),H(" 归属地 ")],-1)),_e(d("input",{type:"text",id:"domicile","onUpdate:modelValue":t[8]||(t[8]=l=>r.form.domicile=l),placeholder:"请输入户籍所在地"},null,512),[[Te,r.form.domicile]])])]),d("div",Qm,[t[39]||(t[39]=d("div",{class:"section-title"},[d("i",{class:"fas fa-heartbeat"}),d("span",null,"健康与背景")],-1)),d("div",Jm,[t[35]||(t[35]=d("label",{for:"health_status"},[d("i",{class:"fas fa-notes-medical form-icon"}),H(" 健康情况 ")],-1)),_e(d("textarea",{id:"health_status","onUpdate:modelValue":t[9]||(t[9]=l=>r.form.health_status=l),placeholder:"请描述健康情况",rows:"3"},null,512),[[Te,r.form.health_status]])]),d("div",Zm,[t[38]||(t[38]=d("label",{for:"criminal_record"},[d("i",{class:"fas fa-gavel form-icon"}),H(" 有无犯罪前科 ")],-1)),d("div",Xm,[d("label",Ym,[_e(d("input",{type:"radio","onUpdate:modelValue":t[10]||(t[10]=l=>r.form.criminal_record=l),value:"0"},null,512),[[Qr,r.form.criminal_record]]),t[36]||(t[36]=d("span",{class:"radio-text"},"无",-1))]),d("label",eb,[_e(d("input",{type:"radio","onUpdate:modelValue":t[11]||(t[11]=l=>r.form.criminal_record=l),value:"1"},null,512),[[Qr,r.form.criminal_record]]),t[37]||(t[37]=d("span",{class:"radio-text"},"有",-1))])])])]),d("div",tb,[t[44]||(t[44]=d("div",{class:"section-title"},[d("i",{class:"fas fa-balance-scale"}),d("span",null,"案件信息")],-1)),d("div",nb,[d("div",sb,[t[40]||(t[40]=d("label",{for:"case_name"},[d("i",{class:"fas fa-folder-open form-icon"}),H(" 案件名称 ")],-1)),_e(d("input",{type:"text",id:"case_name","onUpdate:modelValue":t[12]||(t[12]=l=>r.form.case_name=l),placeholder:"请输入案件名称"},null,512),[[Te,r.form.case_name]])]),d("div",rb,[t[41]||(t[41]=d("label",{for:"case_type"},[d("i",{class:"fas fa-tags form-icon"}),H(" 案件类型 ")],-1)),_e(d("input",{type:"text",id:"case_type","onUpdate:modelValue":t[13]||(t[13]=l=>r.form.case_type=l),placeholder:"请输入案件类型"},null,512),[[Te,r.form.case_type]])])]),d("div",ob,[d("div",ib,[t[42]||(t[42]=d("label",{for:"identity_type"},[d("i",{class:"fas fa-user-tag form-icon"}),H(" 人员身份 ")],-1)),_e(d("input",{type:"text",id:"identity_type","onUpdate:modelValue":t[14]||(t[14]=l=>r.form.identity_type=l),placeholder:"请输入人员身份"},null,512),[[Te,r.form.identity_type]])]),d("div",lb,[t[43]||(t[43]=d("label",{for:"person_type"},[d("i",{class:"fas fa-users form-icon"}),H(" 人员类型 ")],-1)),_e(d("input",{type:"text",id:"person_type","onUpdate:modelValue":t[15]||(t[15]=l=>r.form.person_type=l),placeholder:"请输入人员类型"},null,512),[[Te,r.form.person_type]])])])]),r.error?(j(),z("div",ab,[t[45]||(t[45]=d("i",{class:"fas fa-exclamation-triangle"},null,-1)),H(" "+le(r.error),1)])):ve("",!0),d("button",{type:"submit",class:"btn btn-block",disabled:r.loading},t[46]||(t[46]=[d("i",{class:"fas fa-arrow-right"},null,-1),H(" 下一步 ")]),8,cb)],32)])])}const fb=ct(km,[["render",ub],["__scopeId","data-v-03e884e5"]]),db={name:"ScaleSelector",props:{scales:{type:Array,required:!0},value:{type:String,default:""}},data(){return{selectedScale:this.value}},computed:{getSelectedScaleName(){if(!this.selectedScale||!this.scales)return"";const e=this.scales.find(t=>t.code===this.selectedScale);return e?e.name:""}},watch:{value(e){this.selectedScale=e}},methods:{onScaleChange(){this.$emit("update:value",this.selectedScale),this.$emit("scale-selected",this.selectedScale)}}},pb={class:"scale-selector"},hb={class:"select-wrapper"},gb=["value"],mb={key:0,class:"scale-info"};function bb(e,t,n,s,r,o){return j(),z("div",pb,[t[5]||(t[5]=d("label",{for:"scale-select"},[d("i",{class:"fas fa-clipboard-list icon-left"}),H(" 请选择测试量表 ")],-1)),d("div",hb,[_e(d("select",{id:"scale-select","onUpdate:modelValue":t[0]||(t[0]=i=>r.selectedScale=i),onChange:t[1]||(t[1]=(...i)=>o.onScaleChange&&o.onScaleChange(...i))},[t[2]||(t[2]=d("option",{value:""},"请选择一个量表",-1)),(j(!0),z(Ne,null,Yn(n.scales,i=>(j(),z("option",{key:i.code,value:i.code},le(i.name),9,gb))),128))],544),[[Fs,r.selectedScale]]),t[3]||(t[3]=d("div",{class:"select-arrow"},[d("i",{class:"fas fa-chevron-down"})],-1))]),r.selectedScale?(j(),z("div",mb,[t[4]||(t[4]=d("i",{class:"fas fa-info-circle"},null,-1)),d("span",null,"已选择量表: "+le(o.getSelectedScaleName),1)])):ve("",!0)])}const yb=ct(db,[["render",bb],["__scopeId","data-v-a8f1925c"]]),_b={name:"QuestionItem",props:{questionNumber:{type:Number,required:!0},questionText:{type:String,required:!0},options:{type:Array,required:!0},value:{type:[String,Number],default:null}},data(){return{selectedOption:this.value}},watch:{value(e){this.selectedOption=e}},methods:{selectOption(e){this.selectedOption=e,this.$emit("update:value",e),this.$emit("answer",{questionNumber:this.questionNumber,answer:e})}}},vb={class:"question-item"},wb={class:"question-header"},Sb={class:"question-number"},Eb={class:"question-text"},Rb={class:"options"},xb=["onClick"],Tb={class:"option-select-indicator"},kb={key:0,class:"fas fa-check-circle"},Ab={key:1,class:"far fa-circle"},Cb={class:"option-text"};function Ib(e,t,n,s,r,o){return j(),z("div",vb,[d("div",wb,[d("div",Sb,le(n.questionNumber),1),d("div",Eb,le(n.questionText),1)]),d("div",Rb,[(j(!0),z(Ne,null,Yn(n.options,(i,l)=>(j(),z("div",{key:l,class:Ze(["option",{selected:r.selectedOption===i.score}]),onClick:a=>o.selectOption(i.score)},[d("div",Tb,[r.selectedOption===i.score?(j(),z("i",kb)):(j(),z("i",Ab))]),d("div",Cb,le(i.text),1),t[0]||(t[0]=d("div",{class:"option-highlight"},null,-1))],10,xb))),128))])])}const Ob=ct(_b,[["render",Ib],["__scopeId","data-v-2ce7a956"]]),Pb={name:"QuestionnaireView",components:{NavBar:gs,ScaleSelector:yb,QuestionItem:Ob},data(){return{selectedScale:"",imageFile:null,imagePreview:null,loading:!1,error:""}},computed:{...fs({scales:e=>e.scales,questions:e=>e.scaleQuestions,storeError:e=>e.error,submissionId:e=>e.assessment.submissionId}),...Po(["getAssessmentAnswers"]),answers(){return this.getAssessmentAnswers},canSubmit(){return this.imageFile&&!this.selectedScale||this.selectedScale&&Object.keys(this.answers).length>0}},watch:{storeError(e){e&&(this.error=e)},submissionId(e){e&&this.$router.push("/loading")}},methods:{...ds(["fetchScales","fetchScaleQuestions","setAnswer","setUploadedImage","submitAssessment","clearError"]),async onScaleSelected(e){if(e)try{await this.fetchScaleQuestions(e)}catch{this.error="加载量表问题失败，请重试"}},triggerFileInput(){this.$refs.fileInput.click()},onFileSelected(e){const t=e.target.files;if(!t.length)return;const n=t[0];if(!n.type.match("image.*")){this.error="请上传图片文件";return}if(n.size>5*1024*1024){this.error="图片大小不能超过5MB";return}this.imageFile=n,this.setUploadedImage(n);const s=new FileReader;s.onload=r=>{this.imagePreview=r.target.result},s.readAsDataURL(n)},removeImage(e){e.stopPropagation(),this.imageFile=null,this.imagePreview=null,this.setUploadedImage(null),this.$refs.fileInput.value=""},onAnswer({questionNumber:e,answer:t}){this.setAnswer({questionNumber:e,answer:t})},async submitQuestionnaire(){var e,t;if(!this.canSubmit){this.error="请上传图片或选择量表并回答至少一个问题";return}this.loading=!0,this.error="";try{await this.submitAssessment()}catch(n){this.error=((t=(e=n.response)==null?void 0:e.data)==null?void 0:t.detail)||"提交测评失败，请重试",this.loading=!1}}},async created(){this.clearError();try{await this.fetchScales()}catch{this.error="加载量表失败"}this.$store.state.currentScale&&(this.selectedScale=this.$store.state.currentScale,this.onScaleSelected(this.selectedScale))}},Lb={class:"page-container questionnaire-page"},Nb={class:"scale-section"},$b={key:0,class:"loading-container"},Mb={class:"image-upload-section"},Db={key:0,class:"upload-placeholder"},Ub={key:1,class:"image-preview-container"},Vb=["src"],Fb={key:0,class:"section-header"},Bb={key:1,class:"questions-section"},jb={key:2,class:"error-message"},qb={class:"action-buttons"},Hb=["disabled"];function zb(e,t,n,s,r,o){const i=it("nav-bar"),l=it("scale-selector"),a=it("question-item");return j(),z("div",Lb,[ye(i,{title:"心理测评"}),t[11]||(t[11]=d("div",{class:"section-header"},[d("i",{class:"fas fa-clipboard-list section-icon"}),d("h2",null,"选择测评量表")],-1)),d("div",Nb,[ye(l,{scales:e.scales,modelValue:r.selectedScale,"onUpdate:modelValue":t[0]||(t[0]=u=>r.selectedScale=u),onScaleSelected:o.onScaleSelected},null,8,["scales","modelValue","onScaleSelected"]),r.selectedScale&&!e.questions.length?(j(),z("div",$b,t[5]||(t[5]=[d("div",{class:"loading-spinner"},null,-1),d("p",null,"加载量表问题中...",-1)]))):ve("",!0)]),t[12]||(t[12]=d("div",{class:"section-header"},[d("i",{class:"fas fa-image section-icon"}),d("h2",null,[H("上传绘画图片 "),d("span",{class:"optional-tag"},"(可选)")])],-1)),d("div",Mb,[d("div",{class:"upload-container",onClick:t[3]||(t[3]=(...u)=>o.triggerFileInput&&o.triggerFileInput(...u))},[d("input",{type:"file",ref:"fileInput",accept:"image/*",onChange:t[1]||(t[1]=(...u)=>o.onFileSelected&&o.onFileSelected(...u)),class:"file-input"},null,544),r.imagePreview?(j(),z("div",Ub,[d("img",{src:r.imagePreview,alt:"Preview",class:"image-preview"},null,8,Vb),d("div",{class:"remove-image",onClick:t[2]||(t[2]=ir((...u)=>o.removeImage&&o.removeImage(...u),["stop"]))},t[7]||(t[7]=[d("i",{class:"fas fa-times"},null,-1)]))])):(j(),z("div",Db,t[6]||(t[6]=[d("div",{class:"upload-icon"},[d("i",{class:"fas fa-cloud-upload-alt"})],-1),d("div",null,"点击上传图片",-1)])))])]),e.questions.length?(j(),z("div",Fb,t[8]||(t[8]=[d("i",{class:"fas fa-question-circle section-icon"},null,-1),d("h2",null,"问卷内容",-1)]))):ve("",!0),e.questions.length?(j(),z("div",Bb,[(j(!0),z(Ne,null,Yn(e.questions,u=>(j(),rr(a,{key:u.number,questionNumber:u.number,questionText:u.text,options:u.options,value:o.answers["q"+u.number],onAnswer:o.onAnswer},null,8,["questionNumber","questionText","options","value","onAnswer"]))),128))])):ve("",!0),r.error?(j(),z("div",jb,[t[9]||(t[9]=d("i",{class:"fas fa-exclamation-triangle"},null,-1)),H(" "+le(r.error),1)])):ve("",!0),d("div",qb,[d("button",{class:"btn btn-block",onClick:t[4]||(t[4]=(...u)=>o.submitQuestionnaire&&o.submitQuestionnaire(...u)),disabled:!o.canSubmit||r.loading},[t[10]||(t[10]=d("i",{class:"fas fa-paper-plane"},null,-1)),H(" "+le(r.loading?"提交中...":"提交测评"),1)],8,Hb)])])}const Gb=ct(Pb,[["render",zb],["__scopeId","data-v-7cd58e3a"]]),Kb={name:"LoadingTip",props:{tip:{type:Object,required:!0,default:()=>({category:"心理小贴士",title:"今日小贴士",content:"保持正念与关注当下可以有效减轻压力和焦虑。"})}}},Wb={class:"loading-tip"},Qb={class:"tip-header"},Jb={class:"tip-title-group"},Zb={class:"tip-category"},Xb={class:"tip-title"},Yb={class:"tip-content"};function ey(e,t,n,s,r,o){return j(),z("div",Wb,[d("div",Qb,[t[0]||(t[0]=d("i",{class:"fas fa-lightbulb tip-icon"},null,-1)),d("div",Jb,[d("div",Zb,le(n.tip.category),1),d("div",Xb,le(n.tip.title),1)])]),d("div",Yb,le(n.tip.content),1),t[1]||(t[1]=cs('<div class="tip-decoration" data-v-98d402a0><div class="tip-dots" data-v-98d402a0><div class="tip-dot" data-v-98d402a0></div><div class="tip-dot" data-v-98d402a0></div><div class="tip-dot" data-v-98d402a0></div></div></div>',1))])}const ty=ct(Kb,[["render",ey],["__scopeId","data-v-98d402a0"]]),ny={name:"LoadingView",components:{NavBar:gs,LoadingTip:ty},data(){return{tipInterval:null,checkReportInterval:null,retries:0,maxRetries:30,pollingIntervalMs:1e4,isPolling:!1,isCheckingReport:!1,tipIntervalMs:15e3,currentTipKey:0,localError:"",eventSource:null,reportReady:!1,isFetchingManually:!1,progressValue:0,progressInterval:null}},computed:{...fs({reportFromStore:e=>e.report,submissionIdFromStore:e=>e.assessment.submissionId,globalError:e=>e.error}),...Po({tip:"getCurrentTip"}),submissionId(){const e=this.submissionIdFromStore;return console.log("[LoadingView computed] submissionId:",e),e},isValidReportAvailable(){const e=this.reportFromStore,t=e&&typeof e=="object"&&e.report_text&&e.report_text.trim()!=="";return t&&console.log("[LoadingView computed] isValidReportAvailable: true"),t},currentTip(){return this.tip||Tm()}},watch:{isValidReportAvailable(e){e&&(console.log("[LoadingView watcher] isValidReportAvailable 变为 true，准备导航。"),this.clearPollingIntervals(),this.closeEventSource(),this.progressValue=100,setTimeout(()=>{console.log("[LoadingView watcher] 执行导航到 /report"),this.$router.push("/report")},1e3))},globalError(e){console.log("[LoadingView watcher] 全局 Vuex 错误状态变化:",e),e&&!this.localError&&(this.localError=`发生全局错误: ${e}`,this.closeEventSource(),this.clearPollingIntervals())},retries(e){e>=this.maxRetries&&this.isPolling&&(console.warn(`[LoadingView watcher] 达到最大重试次数 ${this.maxRetries}，停止轮询。`),this.localError="报告生成时间过长或查询失败，请稍后尝试手动刷新或返回。",this.clearPollingIntervals())}},methods:{...ds(["fetchRandomTip","fetchReport","clearError","resetAssessment"]),async getNewTip(){console.log("[LoadingView method] getNewTip: 尝试获取新提示...");try{await this.fetchRandomTip(),this.currentTipKey++,console.log("[LoadingView method] getNewTip: 新提示获取成功。")}catch(e){console.error("[LoadingView method] getNewTip: 获取提示时出错:",e)}},startProgressSimulation(){this.progressInterval&&clearInterval(this.progressInterval),this.progressValue=0,this.progressInterval=setInterval(()=>{if(this.reportReady){this.progressValue=100,clearInterval(this.progressInterval);return}this.progressValue<95&&(this.progressValue+=Math.random()*3,this.progressValue>95&&(this.progressValue=95))},1e3)},clearPollingIntervals(){console.log("[LoadingView method] clearPollingIntervals: 清理所有定时器..."),this.tipInterval&&clearInterval(this.tipInterval),this.checkReportInterval&&clearInterval(this.checkReportInterval),this.progressInterval&&clearInterval(this.progressInterval),this.tipInterval=null,this.checkReportInterval=null,this.progressInterval=null,this.isPolling=!1,this.retries=0},closeEventSource(){this.eventSource&&(console.log("[LoadingView method] closeEventSource: 正在关闭 EventSource 连接..."),this.eventSource.close(),this.eventSource=null,console.log("[LoadingView method] closeEventSource: EventSource 连接已关闭。"))},setupEventSource(){if(console.log("[LoadingView setupEventSource] 启动函数：尝试设置 SSE 连接..."),!this.submissionId){this.localError="无法获取评估ID，无法订阅状态更新。",console.error("[LoadingView setupEventSource] 错误：无 submissionId。无法继续。");return}this.eventSource&&(console.warn("[LoadingView setupEventSource] 警告：EventSource 已存在。正在关闭旧连接。"),this.closeEventSource());const e=`/sse/report-status/${this.submissionId}`;console.log(`[LoadingView setupEventSource] 构造的 SSE URL: ${e}`),this.localError="",this.reportReady=!1;try{console.log("[LoadingView setupEventSource] 准备创建新的 EventSource 对象..."),this.eventSource=new globalThis.EventSource(e,{withCredentials:!0}),console.log("[LoadingView setupEventSource] EventSource 对象已成功创建 (尚未连接)。"),this.eventSource.onopen=()=>{console.log(`[LoadingView SSE] SSE 连接成功打开。评估 ID: ${this.submissionId}`)},this.eventSource.addEventListener("report_ready",async t=>{console.log('[LoadingView SSE] 收到 "report_ready" 事件。'),this.reportReady=!0,this.closeEventSource(),this.clearPollingIntervals();try{console.log("[LoadingView SSE] 报告已就绪，触发 fetchReport..."),await this.fetchReport(),console.log("[LoadingView SSE] fetchReport 完成，等待 watcher 导航。")}catch(n){console.error('[LoadingView SSE] 处理 "report_ready" 事件后 fetchReport 出错:',n),this.localError="收到报告就绪通知，但在获取报告内容时出错。"}}),this.eventSource.addEventListener("report_failed",t=>{console.error('[LoadingView SSE] 收到 "report_failed" 事件:',t.data),this.closeEventSource(),this.clearPollingIntervals();try{const n=JSON.parse(t.data||"{}");this.localError=`报告生成失败: ${(n==null?void 0:n.error)||"原因未知"}. 您可以尝试返回重新提交。`}catch{this.localError="报告生成失败，且无法解析服务器返回的错误详情。您可以尝试返回重新提交。"}}),this.eventSource.onerror=t=>{console.error(`[LoadingView SSE] SSE 连接发生错误。评估 ID: ${this.submissionId}。错误事件对象:`,t),this.closeEventSource(),this.isPolling?this.localError="实时连接中断，继续尝试自动查询状态...":(console.warn("[LoadingView SSE onerror] SSE 连接失败，启动轮询作为后备方案。"),this.localError="尝试自动查询状态...",this.startPolling(),setTimeout(()=>{this.isPolling&&this.checkReport()},this.pollingIntervalMs/2))},this.eventSource.onmessage=t=>{console.log("[LoadingView SSE] 收到通用 SSE 消息:",t.data)},console.log("[LoadingView setupEventSource] EventSource 监听器设置完成。")}catch(t){console.error("[LoadingView setupEventSource] 创建 EventSource 对象期间发生同步错误:",t),this.localError=`建立实时更新连接时遇到问题 (${t.message})。将尝试自动查询状态...`,this.eventSource=null,this.isPolling||(console.warn("[LoadingView setupEventSource catch] 创建 SSE 失败，启动轮询。"),this.startPolling(),setTimeout(()=>{this.isPolling&&this.checkReport()},this.pollingIntervalMs/2))}},startPolling(){this.clearPollingIntervals(),console.log(`[LoadingView method] startPolling: 启动轮询，间隔 ${this.pollingIntervalMs}ms。`),this.isPolling=!0,this.retries=0,this.tipInterval=setInterval(this.getNewTip,this.tipIntervalMs),this.checkReportInterval=setInterval(()=>{this.isPolling?this.checkReport():(console.log("[LoadingView checkReportInterval] Polling is inactive, clearing interval."),this.checkReportInterval&&clearInterval(this.checkReportInterval),this.checkReportInterval=null)},this.pollingIntervalMs),this.startProgressSimulation()},async checkReport(){var e,t,n;if(!this.isPolling||this.isCheckingReport){console.log(`[LoadingView method] checkReport: 跳过检查 (isPolling: ${this.isPolling}, isCheckingReport: ${this.isCheckingReport})`);return}if(!this.submissionId){console.error("[LoadingView method] checkReport: 无 submissionId，无法检查报告！"),this.localError="无法获取评估ID，停止查询。",this.clearPollingIntervals();return}this.isCheckingReport=!0,console.log(`[LoadingView method] checkReport: 开始检查报告状态，尝试次数 ${this.retries+1}/${this.maxRetries}，ID: ${this.submissionId}`),this.retries++;try{const s=await this.fetchReport();console.log("[LoadingView method] checkReport: fetchReport action 完成。"),(s==null?void 0:s.status)===404&&console.log("[LoadingView method] checkReport: 报告尚未就绪 (收到 404 状态)。")}catch(s){console.error("[LoadingView method] checkReport: 调用 fetchReport action 时捕获到错误:",s);const r=((t=(e=s.response)==null?void 0:e.data)==null?void 0:t.detail)||s.message||"未知错误";this.localError=`自动查询报告时遇到问题: ${r}. 如长时间无响应，请尝试手动刷新或返回。`,((n=s.response)==null?void 0:n.status)!==404&&this.clearPollingIntervals()}finally{this.isCheckingReport=!1,console.log("[LoadingView method] checkReport: 检查结束。")}},async manualFetchReport(){var e,t,n;if(!this.submissionId){this.localError="无法获取评估ID，无法手动刷新。";return}console.log("[LoadingView method] manualFetchReport: 用户点击手动刷新。"),this.isFetchingManually=!0,this.localError="";try{await this.fetchReport(),this.isValidReportAvailable||(this.localError="手动刷新完成，但报告仍未就绪。请再等待一段时间。")}catch(s){const r=((t=(e=s.response)==null?void 0:e.data)==null?void 0:t.detail)||s.message||"未知错误";((n=s.response)==null?void 0:n.status)!==404?this.localError=`手动刷新失败: ${r}`:this.localError="手动刷新完成，但报告仍未就绪。请再等待一段时间。"}finally{this.isFetchingManually=!1}},goBackToStart(){console.log("[LoadingView method] goBackToStart: 用户点击返回。"),this.closeEventSource(),this.clearPollingIntervals(),this.resetAssessment(),this.$router.push("/user-info")}},created(){console.log("[LoadingView] Component created."),this.clearError(),this.localError="",this.reportReady=!1,this.getNewTip(),this.startProgressSimulation(),this.submissionId?this.isValidReportAvailable?(console.log("[LoadingView created] 报告已存在，直接导航。"),this.$router.push("/report")):(console.log("[LoadingView created] 报告不存在，尝试启动 SSE。"),this.setupEventSource()):(console.error("[LoadingView created] CRITICAL: 无 submissionId!"),this.localError="无法获取评估ID，请返回重试。")},beforeUnmount(){console.log("[LoadingView] Component unmounting."),this.closeEventSource(),this.clearPollingIntervals()}},sy={class:"page-container loading-page"},ry={class:"loading-content"},oy={class:"loading-visualization"},iy={class:"neural-network"},ly={class:"loading-text"},ay={key:0},cy={key:1,class:"polling-status"},uy={key:2,class:"success-message"},fy={key:0,class:"progress-container"},dy={class:"progress-track"},py={class:"progress-text"},hy={key:1,class:"status-message"},gy={class:"error-text"},my={class:"action-buttons"},by=["disabled"];function yy(e,t,n,s,r,o){const i=it("nav-bar"),l=it("loading-tip");return j(),z("div",sy,[ye(i,{title:"分析进行中",canGoBack:!1}),d("div",ry,[d("div",oy,[t[2]||(t[2]=cs('<div class="brain-scan" data-v-e0e477c3><i class="fas fa-brain brain-icon" data-v-e0e477c3></i><div class="scan-line" data-v-e0e477c3></div><div class="scan-particles" data-v-e0e477c3></div><div class="scan-ring" data-v-e0e477c3></div></div>',1)),d("div",iy,[(j(),z(Ne,null,Yn(9,a=>d("div",{key:a,class:Ze(["neural-node",`node-${a}`])},null,2)),64)),(j(),z(Ne,null,Yn(12,a=>d("div",{key:`line-${a}`,class:Ze(["neural-line",`line-${a}`])},null,2)),64))])]),d("div",ly,[t[6]||(t[6]=d("h2",null,[d("span",{class:"tech-highlight"},"AI"),H(" 心理分析报告生成中 "),d("i",{class:"fas fa-dna icon-spin"})],-1)),!r.localError&&!r.reportReady?(j(),z("p",ay,t[3]||(t[3]=[d("i",{class:"fas fa-microchip"},null,-1),H(" AI 正在努力分析，请稍候... "),d("span",{class:"status-badge processing"},"处理中",-1)]))):ve("",!0),r.isPolling&&!r.reportReady&&!r.localError?(j(),z("p",cy,[t[4]||(t[4]=d("i",{class:"fas fa-sync fa-spin"},null,-1)),H(" 自动查询中 ("+le(r.retries+1)+"/"+le(r.maxRetries)+") ",1)])):ve("",!0),r.reportReady&&!r.localError?(j(),z("p",uy,t[5]||(t[5]=[d("i",{class:"fas fa-check-circle"},null,-1),H(" 报告已生成！ "),d("span",{class:"redirect-text"},"正在跳转...",-1)]))):ve("",!0)]),!r.localError&&!r.reportReady?(j(),z("div",fy,[d("div",dy,[d("div",{class:"progress-value",style:Zs({width:`${r.progressValue}%`})},null,4),t[7]||(t[7]=d("div",{class:"progress-glow"},null,-1))]),d("div",py,le(Math.round(r.progressValue))+"%",1)])):ve("",!0),r.localError?(j(),z("div",hy,[t[10]||(t[10]=d("i",{class:"fas fa-exclamation-triangle error-icon"},null,-1)),d("div",gy,le(r.localError),1),d("div",my,[d("button",{onClick:t[0]||(t[0]=(...a)=>o.manualFetchReport&&o.manualFetchReport(...a)),class:"btn btn-secondary btn-small",disabled:r.isFetchingManually||r.isCheckingReport},[t[8]||(t[8]=d("i",{class:"fas fa-sync-alt"},null,-1)),H(" "+le(r.isFetchingManually?"刷新中...":"手动刷新"),1)],8,by),d("button",{onClick:t[1]||(t[1]=(...a)=>o.goBackToStart&&o.goBackToStart(...a)),class:"btn btn-small"},t[9]||(t[9]=[d("i",{class:"fas fa-arrow-left"},null,-1),H(" 返回 ")]))])])):ve("",!0),ye($a,{name:"fade",mode:"out-in"},{default:En(()=>[(j(),rr(l,{key:r.currentTipKey,tip:o.currentTip},null,8,["tip"]))]),_:1})])])}const _y=ct(ny,[["render",yy],["__scopeId","data-v-e0e477c3"]]),vy={name:"ReportView",components:{NavBar:gs},data(){return{loading:!1}},computed:{...fs({report:e=>e.report}),...Po(["getSubmissionId"]),submissionId(){return this.getSubmissionId}},methods:{...ds(["fetchReport","resetAssessment"]),formatDate:Sm,async checkReport(){if(!this.submissionId){console.warn("ReportView: No submission ID found, cannot fetch report.");return}console.log("ReportView: checkReport called, setting loading true."),this.loading=!0;try{await this.fetchReport(),console.log("ReportView: fetchReport action completed.")}catch(e){console.error("ReportView: Error caught during checkReport -> fetchReport:",e)}finally{this.loading=!1,console.log("ReportView: checkReport finished, setting loading false.")}},startNew(){console.log("ReportView: Starting new assessment."),this.resetAssessment(),this.$router.push("/user-info")}},async created(){console.log("ReportView: Component created."),!this.report&&this.submissionId?(console.log("ReportView: Report not found in store, and submissionId exists. Triggering initial fetch."),await this.checkReport()):this.report?console.log("ReportView: Report found in store on creation."):console.log("ReportView: No report and no submissionId on creation.")}},wy={class:"page-container report-page"},Sy={key:0,class:"loading-container"},Ey={key:1,class:"error-container card"},Ry={class:"action-buttons"},xy=["disabled"],Ty={key:2,class:"report-container"},ky={class:"report-header card"},Ay={class:"report-title"},Cy={class:"report-meta"},Iy={class:"meta-item"},Oy={key:0,class:"meta-item"},Py={class:"report-body card"},Ly=["innerHTML"],Ny={class:"report-actions card"};function $y(e,t,n,s,r,o){const i=it("nav-bar");return j(),z("div",wy,[ye(i,{title:"心理分析报告",canGoBack:!1}),r.loading?(j(),z("div",Sy,t[3]||(t[3]=[d("div",{class:"loading-spinner"},null,-1),d("p",null,"正在加载报告内容...",-1)]))):!e.report&&!r.loading?(j(),z("div",Ey,[t[6]||(t[6]=d("div",{class:"error-icon-container"},[d("i",{class:"fas fa-file-excel error-icon"})],-1)),t[7]||(t[7]=d("h2",null,"未能加载报告",-1)),t[8]||(t[8]=d("p",null,"报告可能仍在生成中，或加载失败。请稍后尝试刷新。",-1)),d("div",Ry,[d("button",{onClick:t[0]||(t[0]=(...l)=>o.checkReport&&o.checkReport(...l)),class:"btn btn-secondary btn-small",disabled:r.loading},[t[4]||(t[4]=d("i",{class:"fas fa-sync-alt"},null,-1)),H(" "+le(r.loading?"刷新中...":"手动刷新"),1)],8,xy),d("button",{onClick:t[1]||(t[1]=(...l)=>o.startNew&&o.startNew(...l)),class:"btn btn-small"},t[5]||(t[5]=[d("i",{class:"fas fa-redo"},null,-1),H(" 开始新测评 ")]))])])):(j(),z("div",Ty,[d("div",ky,[d("div",Ay,[t[9]||(t[9]=d("i",{class:"fas fa-brain header-icon"},null,-1)),d("h2",null,le(e.report.subject_name||"未知对象")+" 的心理分析报告",1)]),d("div",Cy,[d("div",Iy,[t[10]||(t[10]=d("i",{class:"fas fa-calendar-alt meta-icon"},null,-1)),d("span",null,"生成时间: "+le(o.formatDate(e.report.created_at)),1)]),e.report.questionnaire_type?(j(),z("div",Oy,[t[11]||(t[11]=d("i",{class:"fas fa-clipboard-list meta-icon"},null,-1)),d("span",null,"量表类型: "+le(e.report.questionnaire_type),1)])):ve("",!0)])]),d("div",Py,[d("div",{class:"report-content markdown-content",innerHTML:e.$marked(e.report.report_text||"")},null,8,Ly)]),d("div",Ny,[d("button",{onClick:t[2]||(t[2]=(...l)=>o.startNew&&o.startNew(...l)),class:"btn btn-block"},t[12]||(t[12]=[d("i",{class:"fas fa-plus-circle"},null,-1),H(" 开始新测评 ")])),t[13]||(t[13]=cs('<div class="action-buttons" data-v-a5d32b77><button class="btn btn-secondary btn-small" data-v-a5d32b77><i class="fas fa-print" data-v-a5d32b77></i> 打印报告 </button><button class="btn btn-secondary btn-small" data-v-a5d32b77><i class="fas fa-download" data-v-a5d32b77></i> 下载PDF </button></div>',1))])]))])}const My=ct(vy,[["render",$y],["__scopeId","data-v-a5d32b77"]]),Dy=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:Qg,meta:{requiresAuth:!1}},{path:"/register",name:"Register",component:wm,meta:{requiresAuth:!1}},{path:"/user-info",name:"UserInfo",component:fb,meta:{requiresAuth:!0}},{path:"/questionnaire",name:"Questionnaire",component:Gb,meta:{requiresAuth:!0}},{path:"/loading",name:"Loading",component:_y,meta:{requiresAuth:!0}},{path:"/report",name:"Report",component:My,meta:{requiresAuth:!0}}],Lc=Mp({history:fp(),routes:Dy});Lc.beforeEach((e,t,n)=>{const s=Pc.getters.isAuthenticated;e.meta.requiresAuth&&!s?n({name:"Login"}):e.path==="/login"&&s?n({name:"UserInfo"}):n()});function Vo(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let an=Vo();function Nc(e){an=e}const Kn={exec:()=>null};function oe(e,t=""){let n=typeof e=="string"?e:e.source;const s={replace:(r,o)=>{let i=typeof o=="string"?o:o.source;return i=i.replace($e.caret,"$1"),n=n.replace(r,i),s},getRegex:()=>new RegExp(n,t)};return s}const $e={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},Uy=/^(?:[ \t]*(?:\n|$))+/,Vy=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Fy=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ms=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,By=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Fo=/(?:[*+-]|\d{1,9}[.)])/,$c=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Mc=oe($c).replace(/bull/g,Fo).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),jy=oe($c).replace(/bull/g,Fo).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Bo=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,qy=/^[^\n]+/,jo=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Hy=oe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",jo).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),zy=oe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Fo).getRegex(),mr="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",qo=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Gy=oe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",qo).replace("tag",mr).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Dc=oe(Bo).replace("hr",ms).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mr).getRegex(),Ky=oe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Dc).getRegex(),Ho={blockquote:Ky,code:Vy,def:Hy,fences:Fy,heading:By,hr:ms,html:Gy,lheading:Mc,list:zy,newline:Uy,paragraph:Dc,table:Kn,text:qy},hl=oe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ms).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mr).getRegex(),Wy={...Ho,lheading:jy,table:hl,paragraph:oe(Bo).replace("hr",ms).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",hl).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mr).getRegex()},Qy={...Ho,html:oe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",qo).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Kn,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:oe(Bo).replace("hr",ms).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Mc).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Jy=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Zy=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Uc=/^( {2,}|\\)\n(?!\s*$)/,Xy=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,br=/[\p{P}\p{S}]/u,zo=/[\s\p{P}\p{S}]/u,Vc=/[^\s\p{P}\p{S}]/u,Yy=oe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,zo).getRegex(),Fc=/(?!~)[\p{P}\p{S}]/u,e_=/(?!~)[\s\p{P}\p{S}]/u,t_=/(?:[^\s\p{P}\p{S}]|~)/u,n_=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Bc=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,s_=oe(Bc,"u").replace(/punct/g,br).getRegex(),r_=oe(Bc,"u").replace(/punct/g,Fc).getRegex(),jc="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",o_=oe(jc,"gu").replace(/notPunctSpace/g,Vc).replace(/punctSpace/g,zo).replace(/punct/g,br).getRegex(),i_=oe(jc,"gu").replace(/notPunctSpace/g,t_).replace(/punctSpace/g,e_).replace(/punct/g,Fc).getRegex(),l_=oe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Vc).replace(/punctSpace/g,zo).replace(/punct/g,br).getRegex(),a_=oe(/\\(punct)/,"gu").replace(/punct/g,br).getRegex(),c_=oe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),u_=oe(qo).replace("(?:-->|$)","-->").getRegex(),f_=oe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",u_).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Hs=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,d_=oe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Hs).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),qc=oe(/^!?\[(label)\]\[(ref)\]/).replace("label",Hs).replace("ref",jo).getRegex(),Hc=oe(/^!?\[(ref)\](?:\[\])?/).replace("ref",jo).getRegex(),p_=oe("reflink|nolink(?!\\()","g").replace("reflink",qc).replace("nolink",Hc).getRegex(),Go={_backpedal:Kn,anyPunctuation:a_,autolink:c_,blockSkip:n_,br:Uc,code:Zy,del:Kn,emStrongLDelim:s_,emStrongRDelimAst:o_,emStrongRDelimUnd:l_,escape:Jy,link:d_,nolink:Hc,punctuation:Yy,reflink:qc,reflinkSearch:p_,tag:f_,text:Xy,url:Kn},h_={...Go,link:oe(/^!?\[(label)\]\((.*?)\)/).replace("label",Hs).getRegex(),reflink:oe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Hs).getRegex()},ao={...Go,emStrongRDelimAst:i_,emStrongLDelim:r_,url:oe(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},g_={...ao,br:oe(Uc).replace("{2,}","*").getRegex(),text:oe(ao.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Es={normal:Ho,gfm:Wy,pedantic:Qy},Mn={normal:Go,gfm:ao,breaks:g_,pedantic:h_},m_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gl=e=>m_[e];function _t(e,t){if(t){if($e.escapeTest.test(e))return e.replace($e.escapeReplace,gl)}else if($e.escapeTestNoEncode.test(e))return e.replace($e.escapeReplaceNoEncode,gl);return e}function ml(e){try{e=encodeURI(e).replace($e.percentDecode,"%")}catch{return null}return e}function bl(e,t){var o;const n=e.replace($e.findPipe,(i,l,a)=>{let u=!1,c=l;for(;--c>=0&&a[c]==="\\";)u=!u;return u?"|":" |"}),s=n.split($e.splitPipe);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!((o=s.at(-1))!=null&&o.trim())&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace($e.slashPipe,"|");return s}function Dn(e,t,n){const s=e.length;if(s===0)return"";let r=0;for(;r<s&&e.charAt(s-r-1)===t;)r++;return e.slice(0,s-r)}function b_(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let s=0;s<e.length;s++)if(e[s]==="\\")s++;else if(e[s]===t[0])n++;else if(e[s]===t[1]&&(n--,n<0))return s;return n>0?-2:-1}function yl(e,t,n,s,r){const o=t.href,i=t.title||null,l=e[1].replace(r.other.outputLinkReplace,"$1");s.state.inLink=!0;const a={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:o,title:i,text:l,tokens:s.inlineTokens(l)};return s.state.inLink=!1,a}function y_(e,t,n){const s=e.match(n.other.indentCodeCompensation);if(s===null)return t;const r=s[1];return t.split(`
`).map(o=>{const i=o.match(n.other.beginningSpace);if(i===null)return o;const[l]=i;return l.length>=r.length?o.slice(r.length):o}).join(`
`)}class zs{constructor(t){de(this,"options");de(this,"rules");de(this,"lexer");this.options=t||an}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const s=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?s:Dn(s,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const s=n[0],r=y_(s,n[3]||"",this.rules);return{type:"code",raw:s,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:r}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let s=n[2].trim();if(this.rules.other.endingHash.test(s)){const r=Dn(s,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(s=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:Dn(n[0],`
`)}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){let s=Dn(n[0],`
`).split(`
`),r="",o="";const i=[];for(;s.length>0;){let l=!1;const a=[];let u;for(u=0;u<s.length;u++)if(this.rules.other.blockquoteStart.test(s[u]))a.push(s[u]),l=!0;else if(!l)a.push(s[u]);else break;s=s.slice(u);const c=a.join(`
`),f=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,o=o?`${o}
${f}`:f;const p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,i,!0),this.lexer.state.top=p,s.length===0)break;const m=i.at(-1);if((m==null?void 0:m.type)==="code")break;if((m==null?void 0:m.type)==="blockquote"){const y=m,_=y.raw+`
`+s.join(`
`),S=this.blockquote(_);i[i.length-1]=S,r=r.substring(0,r.length-y.raw.length)+S.raw,o=o.substring(0,o.length-y.text.length)+S.text;break}else if((m==null?void 0:m.type)==="list"){const y=m,_=y.raw+`
`+s.join(`
`),S=this.list(_);i[i.length-1]=S,r=r.substring(0,r.length-m.raw.length)+S.raw,o=o.substring(0,o.length-y.raw.length)+S.raw,s=_.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:i,text:o}}}list(t){let n=this.rules.block.list.exec(t);if(n){let s=n[1].trim();const r=s.length>1,o={type:"list",raw:"",ordered:r,start:r?+s.slice(0,-1):"",loose:!1,items:[]};s=r?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=r?s:"[*+-]");const i=this.rules.other.listItemRegex(s);let l=!1;for(;t;){let u=!1,c="",f="";if(!(n=i.exec(t))||this.rules.block.hr.test(t))break;c=n[0],t=t.substring(c.length);let p=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,k=>" ".repeat(3*k.length)),m=t.split(`
`,1)[0],y=!p.trim(),_=0;if(this.options.pedantic?(_=2,f=p.trimStart()):y?_=n[1].length+1:(_=n[2].search(this.rules.other.nonSpaceChar),_=_>4?1:_,f=p.slice(_),_+=n[1].length),y&&this.rules.other.blankLine.test(m)&&(c+=m+`
`,t=t.substring(m.length+1),u=!0),!u){const k=this.rules.other.nextBulletRegex(_),O=this.rules.other.hrRegex(_),P=this.rules.other.fencesBeginRegex(_),F=this.rules.other.headingBeginRegex(_),Z=this.rules.other.htmlBeginRegex(_);for(;t;){const J=t.split(`
`,1)[0];let ue;if(m=J,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),ue=m):ue=m.replace(this.rules.other.tabCharGlobal,"    "),P.test(m)||F.test(m)||Z.test(m)||k.test(m)||O.test(m))break;if(ue.search(this.rules.other.nonSpaceChar)>=_||!m.trim())f+=`
`+ue.slice(_);else{if(y||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||P.test(p)||F.test(p)||O.test(p))break;f+=`
`+m}!y&&!m.trim()&&(y=!0),c+=J+`
`,t=t.substring(J.length+1),p=ue.slice(_)}}o.loose||(l?o.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(l=!0));let S=null,A;this.options.gfm&&(S=this.rules.other.listIsTask.exec(f),S&&(A=S[0]!=="[ ] ",f=f.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:c,task:!!S,checked:A,loose:!1,text:f,tokens:[]}),o.raw+=c}const a=o.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let u=0;u<o.items.length;u++)if(this.lexer.state.top=!1,o.items[u].tokens=this.lexer.blockTokens(o.items[u].text,[]),!o.loose){const c=o.items[u].tokens.filter(p=>p.type==="space"),f=c.length>0&&c.some(p=>this.rules.other.anyLine.test(p.raw));o.loose=f}if(o.loose)for(let u=0;u<o.items.length;u++)o.items[u].loose=!0;return o}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const s=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:s,raw:n[0],href:r,title:o}}}table(t){var l;const n=this.rules.block.table.exec(t);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;const s=bl(n[1]),r=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(l=n[3])!=null&&l.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:n[0],header:[],align:[],rows:[]};if(s.length===r.length){for(const a of r)this.rules.other.tableAlignRight.test(a)?i.align.push("right"):this.rules.other.tableAlignCenter.test(a)?i.align.push("center"):this.rules.other.tableAlignLeft.test(a)?i.align.push("left"):i.align.push(null);for(let a=0;a<s.length;a++)i.header.push({text:s[a],tokens:this.lexer.inline(s[a]),header:!0,align:i.align[a]});for(const a of o)i.rows.push(bl(a,i.header.length).map((u,c)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:i.align[c]})));return i}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const s=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:s,tokens:this.lexer.inline(s)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const s=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(s)){if(!this.rules.other.endAngleBracket.test(s))return;const i=Dn(s.slice(0,-1),"\\");if((s.length-i.length)%2===0)return}else{const i=b_(n[2],"()");if(i===-2)return;if(i>-1){const a=(n[0].indexOf("!")===0?5:4)+n[1].length+i;n[2]=n[2].substring(0,i),n[0]=n[0].substring(0,a).trim(),n[3]=""}}let r=n[2],o="";if(this.options.pedantic){const i=this.rules.other.pedanticHrefTitle.exec(r);i&&(r=i[1],o=i[3])}else o=n[3]?n[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(s)?r=r.slice(1):r=r.slice(1,-1)),yl(n,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(t,n){let s;if((s=this.rules.inline.reflink.exec(t))||(s=this.rules.inline.nolink.exec(t))){const r=(s[2]||s[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=n[r.toLowerCase()];if(!o){const i=s[0].charAt(0);return{type:"text",raw:i,text:i}}return yl(s,o,s[0],this.lexer,this.rules)}}emStrong(t,n,s=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&s.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const i=[...r[0]].length-1;let l,a,u=i,c=0;const f=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,n=n.slice(-1*t.length+i);(r=f.exec(n))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(a=[...l].length,r[3]||r[4]){u+=a;continue}else if((r[5]||r[6])&&i%3&&!((i+a)%3)){c+=a;continue}if(u-=a,u>0)continue;a=Math.min(a,a+u+c);const p=[...r[0]][0].length,m=t.slice(0,i+r.index+p+a);if(Math.min(i,a)%2){const _=m.slice(1,-1);return{type:"em",raw:m,text:_,tokens:this.lexer.inlineTokens(_)}}const y=m.slice(2,-2);return{type:"strong",raw:m,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let s=n[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(s),o=this.rules.other.startingSpaceChar.test(s)&&this.rules.other.endingSpaceChar.test(s);return r&&o&&(s=s.substring(1,s.length-1)),{type:"codespan",raw:n[0],text:s}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let s,r;return n[2]==="@"?(s=n[1],r="mailto:"+s):(s=n[1],r=s),{type:"link",raw:n[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(t){var s;let n;if(n=this.rules.inline.url.exec(t)){let r,o;if(n[2]==="@")r=n[0],o="mailto:"+r;else{let i;do i=n[0],n[0]=((s=this.rules.inline._backpedal.exec(n[0]))==null?void 0:s[0])??"";while(i!==n[0]);r=n[0],n[1]==="www."?o="http://"+n[0]:o=n[0]}return{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){const s=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:s}}}}class Ye{constructor(t){de(this,"tokens");de(this,"options");de(this,"state");de(this,"tokenizer");de(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||an,this.options.tokenizer=this.options.tokenizer||new zs,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:$e,block:Es.normal,inline:Mn.normal};this.options.pedantic?(n.block=Es.pedantic,n.inline=Mn.pedantic):this.options.gfm&&(n.block=Es.gfm,this.options.breaks?n.inline=Mn.breaks:n.inline=Mn.gfm),this.tokenizer.rules=n}static get rules(){return{block:Es,inline:Mn}}static lex(t,n){return new Ye(n).lex(t)}static lexInline(t,n){return new Ye(n).inlineTokens(t)}lex(t){t=t.replace($e.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const s=this.inlineQueue[n];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],s=!1){var r,o,i;for(this.options.pedantic&&(t=t.replace($e.tabCharGlobal,"    ").replace($e.spaceLine,""));t;){let l;if((o=(r=this.options.extensions)==null?void 0:r.block)!=null&&o.some(u=>(l=u.call({lexer:this},t,n))?(t=t.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.space(t)){t=t.substring(l.raw.length);const u=n.at(-1);l.raw.length===1&&u!==void 0?u.raw+=`
`:n.push(l);continue}if(l=this.tokenizer.code(t)){t=t.substring(l.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+l.raw,u.text+=`
`+l.text,this.inlineQueue.at(-1).src=u.text):n.push(l);continue}if(l=this.tokenizer.fences(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.heading(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.hr(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.blockquote(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.list(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.html(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.def(t)){t=t.substring(l.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+l.raw,u.text+=`
`+l.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title});continue}if(l=this.tokenizer.table(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.lheading(t)){t=t.substring(l.raw.length),n.push(l);continue}let a=t;if((i=this.options.extensions)!=null&&i.startBlock){let u=1/0;const c=t.slice(1);let f;this.options.extensions.startBlock.forEach(p=>{f=p.call({lexer:this},c),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(a=t.substring(0,u+1))}if(this.state.top&&(l=this.tokenizer.paragraph(a))){const u=n.at(-1);s&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=`
`+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(l),s=a.length!==t.length,t=t.substring(l.raw.length);continue}if(l=this.tokenizer.text(t)){t=t.substring(l.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=`
`+l.raw,u.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(l);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var l,a,u;let s=t,r=null;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)c.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,r.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,i="";for(;t;){o||(i=""),o=!1;let c;if((a=(l=this.options.extensions)==null?void 0:l.inline)!=null&&a.some(p=>(c=p.call({lexer:this},t,n))?(t=t.substring(c.raw.length),n.push(c),!0):!1))continue;if(c=this.tokenizer.escape(t)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.tag(t)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.link(t)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(c.raw.length);const p=n.at(-1);c.type==="text"&&(p==null?void 0:p.type)==="text"?(p.raw+=c.raw,p.text+=c.text):n.push(c);continue}if(c=this.tokenizer.emStrong(t,s,i)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.codespan(t)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.br(t)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.del(t)){t=t.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.autolink(t)){t=t.substring(c.raw.length),n.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(t))){t=t.substring(c.raw.length),n.push(c);continue}let f=t;if((u=this.options.extensions)!=null&&u.startInline){let p=1/0;const m=t.slice(1);let y;this.options.extensions.startInline.forEach(_=>{y=_.call({lexer:this},m),typeof y=="number"&&y>=0&&(p=Math.min(p,y))}),p<1/0&&p>=0&&(f=t.substring(0,p+1))}if(c=this.tokenizer.inlineText(f)){t=t.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(i=c.raw.slice(-1)),o=!0;const p=n.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=c.raw,p.text+=c.text):n.push(c);continue}if(t){const p="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return n}}class Gs{constructor(t){de(this,"options");de(this,"parser");this.options=t||an}space(t){return""}code({text:t,lang:n,escaped:s}){var i;const r=(i=(n||"").match($e.notSpaceStart))==null?void 0:i[0],o=t.replace($e.endingNewline,"")+`
`;return r?'<pre><code class="language-'+_t(r)+'">'+(s?o:_t(o,!0))+`</code></pre>
`:"<pre><code>"+(s?o:_t(o,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:n}){return`<h${n}>${this.parser.parseInline(t)}</h${n}>
`}hr(t){return`<hr>
`}list(t){const n=t.ordered,s=t.start;let r="";for(let l=0;l<t.items.length;l++){const a=t.items[l];r+=this.listitem(a)}const o=n?"ol":"ul",i=n&&s!==1?' start="'+s+'"':"";return"<"+o+i+`>
`+r+"</"+o+`>
`}listitem(t){var s;let n="";if(t.task){const r=this.checkbox({checked:!!t.checked});t.loose?((s=t.tokens[0])==null?void 0:s.type)==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+_t(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):n+=r+" "}return n+=this.parser.parse(t.tokens,!!t.loose),`<li>${n}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let n="",s="";for(let o=0;o<t.header.length;o++)s+=this.tablecell(t.header[o]);n+=this.tablerow({text:s});let r="";for(let o=0;o<t.rows.length;o++){const i=t.rows[o];s="";for(let l=0;l<i.length;l++)s+=this.tablecell(i[l]);r+=this.tablerow({text:s})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const n=this.parser.parseInline(t.tokens),s=t.header?"th":"td";return(t.align?`<${s} align="${t.align}">`:`<${s}>`)+n+`</${s}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${_t(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:n,tokens:s}){const r=this.parser.parseInline(s),o=ml(t);if(o===null)return r;t=o;let i='<a href="'+t+'"';return n&&(i+=' title="'+_t(n)+'"'),i+=">"+r+"</a>",i}image({href:t,title:n,text:s,tokens:r}){r&&(s=this.parser.parseInline(r,this.parser.textRenderer));const o=ml(t);if(o===null)return _t(s);t=o;let i=`<img src="${t}" alt="${s}"`;return n&&(i+=` title="${_t(n)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:_t(t.text)}}class Ko{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}}class et{constructor(t){de(this,"options");de(this,"renderer");de(this,"textRenderer");this.options=t||an,this.options.renderer=this.options.renderer||new Gs,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ko}static parse(t,n){return new et(n).parse(t)}static parseInline(t,n){return new et(n).parseInline(t)}parse(t,n=!0){var r,o;let s="";for(let i=0;i<t.length;i++){const l=t[i];if((o=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&o[l.type]){const u=l,c=this.options.extensions.renderers[u.type].call({parser:this},u);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){s+=c||"";continue}}const a=l;switch(a.type){case"space":{s+=this.renderer.space(a);continue}case"hr":{s+=this.renderer.hr(a);continue}case"heading":{s+=this.renderer.heading(a);continue}case"code":{s+=this.renderer.code(a);continue}case"table":{s+=this.renderer.table(a);continue}case"blockquote":{s+=this.renderer.blockquote(a);continue}case"list":{s+=this.renderer.list(a);continue}case"html":{s+=this.renderer.html(a);continue}case"paragraph":{s+=this.renderer.paragraph(a);continue}case"text":{let u=a,c=this.renderer.text(u);for(;i+1<t.length&&t[i+1].type==="text";)u=t[++i],c+=`
`+this.renderer.text(u);n?s+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):s+=c;continue}default:{const u='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return s}parseInline(t,n=this.renderer){var r,o;let s="";for(let i=0;i<t.length;i++){const l=t[i];if((o=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&o[l.type]){const u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){s+=u||"";continue}}const a=l;switch(a.type){case"escape":{s+=n.text(a);break}case"html":{s+=n.html(a);break}case"link":{s+=n.link(a);break}case"image":{s+=n.image(a);break}case"strong":{s+=n.strong(a);break}case"em":{s+=n.em(a);break}case"codespan":{s+=n.codespan(a);break}case"br":{s+=n.br(a);break}case"del":{s+=n.del(a);break}case"text":{s+=n.text(a);break}default:{const u='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return s}}class Wn{constructor(t){de(this,"options");de(this,"block");this.options=t||an}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?Ye.lex:Ye.lexInline}provideParser(){return this.block?et.parse:et.parseInline}}de(Wn,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class __{constructor(...t){de(this,"defaults",Vo());de(this,"options",this.setOptions);de(this,"parse",this.parseMarkdown(!0));de(this,"parseInline",this.parseMarkdown(!1));de(this,"Parser",et);de(this,"Renderer",Gs);de(this,"TextRenderer",Ko);de(this,"Lexer",Ye);de(this,"Tokenizer",zs);de(this,"Hooks",Wn);this.use(...t)}walkTokens(t,n){var r,o;let s=[];for(const i of t)switch(s=s.concat(n.call(this,i)),i.type){case"table":{const l=i;for(const a of l.header)s=s.concat(this.walkTokens(a.tokens,n));for(const a of l.rows)for(const u of a)s=s.concat(this.walkTokens(u.tokens,n));break}case"list":{const l=i;s=s.concat(this.walkTokens(l.items,n));break}default:{const l=i;(o=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&o[l.type]?this.defaults.extensions.childTokens[l.type].forEach(a=>{const u=l[a].flat(1/0);s=s.concat(this.walkTokens(u,n))}):l.tokens&&(s=s.concat(this.walkTokens(l.tokens,n)))}}return s}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(s=>{const r={...s};if(r.async=this.defaults.async||r.async||!1,s.extensions&&(s.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const i=n.renderers[o.name];i?n.renderers[o.name]=function(...l){let a=o.renderer.apply(this,l);return a===!1&&(a=i.apply(this,l)),a}:n.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=n[o.level];i?i.unshift(o.tokenizer):n[o.level]=[o.tokenizer],o.start&&(o.level==="block"?n.startBlock?n.startBlock.push(o.start):n.startBlock=[o.start]:o.level==="inline"&&(n.startInline?n.startInline.push(o.start):n.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(n.childTokens[o.name]=o.childTokens)}),r.extensions=n),s.renderer){const o=this.defaults.renderer||new Gs(this.defaults);for(const i in s.renderer){if(!(i in o))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const l=i,a=s.renderer[l],u=o[l];o[l]=(...c)=>{let f=a.apply(o,c);return f===!1&&(f=u.apply(o,c)),f||""}}r.renderer=o}if(s.tokenizer){const o=this.defaults.tokenizer||new zs(this.defaults);for(const i in s.tokenizer){if(!(i in o))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const l=i,a=s.tokenizer[l],u=o[l];o[l]=(...c)=>{let f=a.apply(o,c);return f===!1&&(f=u.apply(o,c)),f}}r.tokenizer=o}if(s.hooks){const o=this.defaults.hooks||new Wn;for(const i in s.hooks){if(!(i in o))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const l=i,a=s.hooks[l],u=o[l];Wn.passThroughHooks.has(i)?o[l]=c=>{if(this.defaults.async)return Promise.resolve(a.call(o,c)).then(p=>u.call(o,p));const f=a.call(o,c);return u.call(o,f)}:o[l]=(...c)=>{let f=a.apply(o,c);return f===!1&&(f=u.apply(o,c)),f}}r.hooks=o}if(s.walkTokens){const o=this.defaults.walkTokens,i=s.walkTokens;r.walkTokens=function(l){let a=[];return a.push(i.call(this,l)),o&&(a=a.concat(o.call(this,l))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return Ye.lex(t,n??this.defaults)}parser(t,n){return et.parse(t,n??this.defaults)}parseMarkdown(t){return(s,r)=>{const o={...r},i={...this.defaults,...o},l=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&o.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof s>"u"||s===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=t);const a=i.hooks?i.hooks.provideLexer():t?Ye.lex:Ye.lexInline,u=i.hooks?i.hooks.provideParser():t?et.parse:et.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(s):s).then(c=>a(c,i)).then(c=>i.hooks?i.hooks.processAllTokens(c):c).then(c=>i.walkTokens?Promise.all(this.walkTokens(c,i.walkTokens)).then(()=>c):c).then(c=>u(c,i)).then(c=>i.hooks?i.hooks.postprocess(c):c).catch(l);try{i.hooks&&(s=i.hooks.preprocess(s));let c=a(s,i);i.hooks&&(c=i.hooks.processAllTokens(c)),i.walkTokens&&this.walkTokens(c,i.walkTokens);let f=u(c,i);return i.hooks&&(f=i.hooks.postprocess(f)),f}catch(c){return l(c)}}}onError(t,n){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+_t(s.message+"",!0)+"</pre>";return n?Promise.resolve(r):r}if(n)return Promise.reject(s);throw s}}}const rn=new __;function ae(e,t){return rn.parse(e,t)}ae.options=ae.setOptions=function(e){return rn.setOptions(e),ae.defaults=rn.defaults,Nc(ae.defaults),ae};ae.getDefaults=Vo;ae.defaults=an;ae.use=function(...e){return rn.use(...e),ae.defaults=rn.defaults,Nc(ae.defaults),ae};ae.walkTokens=function(e,t){return rn.walkTokens(e,t)};ae.parseInline=rn.parseInline;ae.Parser=et;ae.parser=et.parse;ae.Renderer=Gs;ae.TextRenderer=Ko;ae.Lexer=Ye;ae.lexer=Ye.lex;ae.Tokenizer=zs;ae.Hooks=Wn;ae.parse=ae;ae.options;ae.setOptions;ae.use;ae.walkTokens;ae.parseInline;et.parse;Ye.lex;const yr=vd(Td);yr.config.globalProperties.$marked=e=>e?ae(e):"";yr.use(Pc);yr.use(Lc);yr.mount("#app");


================================================================================

--- File: psychology-app-new\public\index.html ---
<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <!-- 你可以从旧项目 public 目录复制 logo.svg 到新项目根目录，或者移除/修改这个 link -->
    <link rel="icon" type="image/svg+xml" href="/logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>心理分析应用 (新)</title> <!-- 修改标题 -->
  <!-- Font Awesome 6 通过CDN引入 -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- 添加适合科幻感设计的字体 -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>

================================================================================

--- File: psychology-app-new\src\main.js ---
import { createApp } from 'vue';
import App from './App.vue';
import router from './router';
import store from './store';
import { marked } from 'marked'; // For markdown rendering
import './assets/sci-fi-theme.css'; // Global CSS

// Create the Vue app
const app = createApp(App);

// Register a global markdown filter
app.config.globalProperties.$marked = (text) => {
  if (!text) return '';
  return marked(text);
};

// Use Vuex store and Vue Router
app.use(store);
app.use(router);

// Mount the app
app.mount('#app');



================================================================================

--- File: psychology-app-new\src\api\index.js ---
// src/api/index.js
import axios from 'axios';

// 创建 axios 实例，配置基础 URL 和超时时间
const api = axios.create({
  baseURL: '/api/v1', // 基础路径，Vite 会代理 /api/v1 -> http://localhost:8000/api/v1 (请再次确认后端路径是否匹配)
  timeout: 30000, // 设置请求超时时间为 30 秒
  // 注意：建议移除全局的 Content-Type 设置，在具体的请求中按需指定，避免冲突
  // headers: {
  //   'Content-Type': 'application/json',
  // }
});

// 添加请求拦截器，用于在每个请求头中附加认证令牌（如果存在）
api.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token'); // 从 localStorage 获取 token
    if (token) {
      // 如果 token 存在，则添加到 Authorization 头部
      config.headers['Authorization'] = 'Bearer ' + token;
    }
    return config; // 返回修改后的配置
  },
  (error) => {
    // 处理请求配置阶段的错误
    return Promise.reject(error);
  }
);

// --- 认证相关的 API 函数 ---
export const authAPI = {
  // 登录函数
  login(username, password) {
    // 登录通常需要 'application/x-www-form-urlencoded' 格式
    // 这取决于你的后端 OAuth2 实现 (例如 FastAPI 的 OAuth2PasswordRequestForm)
    const formData = new URLSearchParams(); // 使用 URLSearchParams 格式化数据
    formData.append('username', username);
    formData.append('password', password);
    console.log('API 模块 login - 准备发送的数据 (form-urlencoded):', formData.toString());
    // 发送 POST 请求到 /auth/token
    return api.post('/auth/token', formData, { // 假设登录接口路径是 /auth/token
      headers: {
        // 明确指定 Content-Type
        'Content-Type': 'application/x-www-form-urlencoded'
      }
    });
  },

  // 注册函数
  register(userData) {
    // 注册请求：明确发送 application/json 格式
    console.log('API 模块 register - 准备发送的数据 (JSON):', userData);
    // 【关键修改处】在 post 请求的第三个参数 config 中明确添加 headers
    return api.post('/auth/register', userData, { // 假设注册接口路径是 /auth/register
      headers: {
        'Content-Type': 'application/json' // 明确指定 Content-Type 为 JSON
      }
    });
  },

  // 获取当前用户信息函数
  getCurrentUser() {
    return api.get('/users/me'); // 假设获取用户信息的接口路径是 /users/me
  }
};

// --- 量表相关的 API 函数 ---
export const scalesAPI = {
  // 获取可用量表列表
  getAvailableScales() {
    return api.get('/scales');
  },

  // 根据量表代码获取问题列表
  getScaleQuestions(scaleCode) {
    return api.get(`/scales/${scaleCode}/questions`);
  }
};

// --- 百科知识相关的 API 函数 ---
export const encyclopediaAPI = {
  // 获取百科分类
  getCategories() {
    return api.get('/encyclopedia/categories');
  },

  // 根据分类获取词条，或获取所有词条
  getEntries(category = null) {
    const url = category
      ? `/encyclopedia/entries?category=${encodeURIComponent(category)}` // 如果有分类，添加到查询参数
      : '/encyclopedia/entries'; // 否则获取所有
    return api.get(url);
  },

  // 获取随机心理小贴士
  getRandomTip() {
    // 通过查询参数请求随机贴士
    return api.get('/encyclopedia/entries?random_tip=true');
  }
};

// --- 评估相关的 API 函数 ---
export const assessmentsAPI = {
  // 提交评估数据
  submitAssessment(formData) {
    // 提交评估数据通常包含文件（如图片），需要使用 multipart/form-data
    console.log('API 模块 submitAssessment - 准备发送的数据 (FormData)'); // FormData 内容复杂，不易直接打印，可在网络面板查看
    // 发送 POST 请求到 /assessments/submit
    return api.post('/assessments/submit', formData, { // 假设提交接口路径是 /assessments/submit
      headers: {
        // 当使用 FormData 时，axios 通常会自动设置正确的 Content-Type (multipart/form-data)
        // 手动设置可能会导致边界字符串 (boundary) 缺失或错误，所以一般不建议手动设置
        // 'Content-Type': 'multipart/form-data', // 通常让 axios 自动处理
      },
    });
  }
};

// --- 报告相关的 API 函数 ---
export const reportsAPI = {
  // 根据评估 ID 获取报告
  getReport(assessmentId) {
    return api.get(`/reports/${assessmentId}`); // 假设获取报告接口路径是 /reports/{assessmentId}
  },
  // +++ 新增: 根据评估 ID 获取报告状态 +++
  getReportStatus(assessmentId) {
    return api.get(`/reports/${assessmentId}/status`); // 假设获取状态接口路径是 /reports/{assessmentId}/status
  }
  // ++++++++++++++++++++++++++++++++++++
};

// 统一导出所有 API 模块，方便在 store 或组件中按类别调用
export default {
  auth: authAPI,
  scales: scalesAPI,
  encyclopedia: encyclopediaAPI,
  assessments: assessmentsAPI,
  reports: reportsAPI
};

================================================================================

--- File: psychology-app-new\src\assets\main.css ---

:root {
  --primary-color: #4a6fa5;
  --secondary-color: #61a0af;
  --accent-color: #8bbccc;
  --text-color: #333;
  --light-bg: #f5f9fc;
  --error-color: #e74c3c;
  --success-color: #2ecc71;
  --border-radius: 8px;
  --box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  --transition-speed: 0.3s;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'PingFang SC', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--light-bg);
  color: var(--text-color);
  font-size: 16px;
  line-height: 1.5;
  overflow-x: hidden;
}

.page-container {
  min-height: 100vh;
  padding: 16px;
  padding-bottom: 70px; /* Space for bottom navigation if needed */
  max-width: 100%;
  overflow-x: hidden;
}

.card {
  background-color: white;
  border-radius: var(--border-radius);
  padding: 16px;
  margin-bottom: 16px;
  box-shadow: var(--box-shadow);
}

.form-group {
  margin-bottom: 16px;
}

label {
  display: block;
  margin-bottom: 8px;
  font-weight: 500;
}

input, select, textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: var(--border-radius);
  font-size: 16px;
  transition: border-color var(--transition-speed);
}

input:focus, select:focus, textarea:focus {
  border-color: var(--primary-color);
  outline: none;
}

.btn {
  display: inline-block;
  padding: 12px 20px;
  background-color: var(--primary-color);
  color: white;
  border: none;
  border-radius: var(--border-radius);
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  transition: background-color var(--transition-speed);
  text-align: center;
  text-decoration: none;
}

.btn:hover {
  background-color: #3c5a84;
}

.btn-block {
  display: block;
  width: 100%;
}

.btn-secondary {
  background-color: var(--secondary-color);
}

.btn-secondary:hover {
  background-color: #4f828e;
}

.error-message {
  color: var(--error-color);
  font-size: 14px;
  margin-top: 4px;
}

.success-message {
  color: var(--success-color);
  font-size: 14px;
  margin-top: 4px;
}

/* Page transition animations */
.page-enter-active,
.page-leave-active {
  transition: opacity 0.5s, transform 0.5s;
}

.page-enter-from {
  opacity: 0;
  transform: translateX(100%);
}

.page-leave-to {
  opacity: 0;
  transform: translateX(-100%);
}

/* Loading spinner */
.loading-spinner {
  width: 50px;
  height: 50px;
  border: 5px solid var(--light-bg);
  border-top: 5px solid var(--primary-color);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 20px auto;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.5s;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

/* Markdown rendering styles */
.markdown-content {
  line-height: 1.6;
}

.markdown-content h1,
.markdown-content h2,
.markdown-content h3,
.markdown-content h4 {
  margin-top: 1.5em;
  margin-bottom: 0.5em;
}

.markdown-content p {
  margin-bottom: 1em;
}

.markdown-content ul,
.markdown-content ol {
  margin-bottom: 1em;
  padding-left: 2em;
}



================================================================================

--- File: psychology-app-new\src\assets\sci-fi-theme.css ---
:root {
    /* 科幻感色彩方案 */
    --primary-color: #2196f3;  /* 亮蓝色 */
    --primary-light: #6ec6ff;
    --primary-dark: #0069c0;
    --secondary-color: #03dac6; /* 青绿色 */
    --secondary-light: #84ffff;
    --secondary-dark: #00b686;
    --accent-color: #ff4081;    /* 亮粉色作为强调 */
    --error-color: #ff5252;     /* 错误颜色 */
    --success-color: #4caf50;   /* 成功颜色 */
    --warning-color: #ff9800;   /* 警告颜色 */
    --background-color: #f8f9ff; /* 极浅蓝色背景 */
    --card-bg: #ffffff;
    --text-primary: #202124;
    --text-secondary: #5f6368;
    
    /* 科幻感设计元素 */
    --border-radius: 8px;      /* 圆角效果 */
    --large-radius: 16px;      /* 更大的圆角效果 */
    --box-shadow: 0 4px 20px rgba(33, 150, 243, 0.1); /* 柔和的蓝色阴影 */
    --glow-effect: 0 0 15px rgba(3, 218, 198, 0.5);   /* 科技感光晕效果 */
    --transition-speed: 0.3s;  /* 过渡动画速度 */
    
    /* 科幻感字体设置 */
    --heading-font: 'Orbitron', sans-serif;  /* 科幻感标题字体 */
    --body-font: 'Rajdhani', 'Roboto', sans-serif;  /* 正文字体 */
  }
  
  /* 全局科幻感样式 */
  body {
    background-color: var(--background-color);
    background-image: 
      radial-gradient(circle at 10% 20%, rgba(33, 150, 243, 0.03) 0%, transparent 20%),
      radial-gradient(circle at 90% 80%, rgba(3, 218, 198, 0.03) 0%, transparent 20%);
    font-family: var(--body-font);
    color: var(--text-primary);
    margin: 0;
    padding: 0;
  }
  
  h1, h2, h3, h4, h5, h6, .navbar-title {
    font-family: var(--heading-font);
    letter-spacing: 1px;
  }
  
  /* 科幻感卡片样式更新 */
  .card {
    background-color: var(--card-bg);
    border-radius: var(--large-radius);
    box-shadow: var(--box-shadow);
    border: 1px solid rgba(33, 150, 243, 0.1);
    overflow: hidden;
    transition: transform var(--transition-speed), box-shadow var(--transition-speed);
  }
  
  .card:hover {
    transform: translateY(-5px);
    box-shadow: var(--box-shadow), var(--glow-effect);
  }
  
  /* 科幻感按钮样式 */
  .btn {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    border: none;
    border-radius: var(--border-radius);
    color: white;
    font-family: var(--heading-font);
    font-weight: 500;
    letter-spacing: 1px;
    padding: 12px 24px;
    transition: all var(--transition-speed);
    position: relative;
    overflow: hidden;
    cursor: pointer;
  }
  
  .btn:before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.7s;
  }
  
  .btn:hover:not(:disabled):before {
    left: 100%;
  }
  
  .btn:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
    box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
  }
  
  .btn-secondary {
    background: linear-gradient(135deg, var(--secondary-color), var(--secondary-dark));
  }
  
  .btn-secondary:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--secondary-light), var(--secondary-color));
  }
  
  .btn:disabled {
    background: #b0bec5;
    box-shadow: none;
    cursor: not-allowed;
  }
  
  .btn-small {
    padding: 6px 12px;
    font-size: 14px;
  }
  
  .btn-block {
    display: block;
    width: 100%;
  }
  
  /* 表单控件科幻感样式 */
  input, select, textarea {
    border: 2px solid rgba(33, 150, 243, 0.2);
    border-radius: var(--border-radius);
    padding: 12px 16px;
    transition: all var(--transition-speed);
    background-color: rgba(255, 255, 255, 0.8);
    font-family: var(--body-font);
    font-size: 16px;
    width: 100%;
    box-sizing: border-box;
  }
  
  input:focus, select:focus, textarea:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
    outline: none;
  }
  
  label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: var(--text-secondary);
    font-family: var(--body-font);
  }
  
  /* 错误信息样式 */
  .error-message {
    color: var(--error-color);
    background-color: rgba(255, 82, 82, 0.1);
    border: 1px solid var(--error-color);
    border-radius: var(--border-radius);
    padding: 10px;
    margin: 8px 0;
    font-size: 14px;
  }
  
  /* 容器通用样式 */
  .page-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 16px;
  }
  
  /* 科幻感动画 */
  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(3, 218, 198, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(3, 218, 198, 0); }
    100% { box-shadow: 0 0 0 0 rgba(3, 218, 198, 0); }
  }
  
  @keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
  }
  
  @keyframes glow {
    0%, 100% { filter: drop-shadow(0 0 5px rgba(33, 150, 243, 0.5)); }
    50% { filter: drop-shadow(0 0 15px rgba(33, 150, 243, 0.8)); }
  }
  
  @keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

================================================================================

--- File: psychology-app-new\src\router\index.js ---
import { createRouter, createWebHistory } from 'vue-router';
import store from '../store'; // Import Vuex store

// Import all the views
import LoginView from '../views/LoginView.vue';
import RegisterView from '../views/RegisterView.vue';
import UserInfoView from '../views/UserInfoView.vue';
import QuestionnaireView from '../views/QuestionnaireView.vue';
import LoadingView from '../views/LoadingView.vue';
import ReportView from '../views/ReportView.vue';

const routes = [
  {
    path: '/',
    redirect: '/login'
  },
  {
    path: '/login',
    name: 'Login',
    component: LoginView,
    meta: { requiresAuth: false }
  },
  {
    path: '/register',
    name: 'Register',
    component: RegisterView,
    meta: { requiresAuth: false }
  },
  {
    path: '/user-info',
    name: 'UserInfo',
    component: UserInfoView,
    meta: { requiresAuth: true }
  },
  {
    path: '/questionnaire',
    name: 'Questionnaire',
    component: QuestionnaireView,
    meta: { requiresAuth: true }
  },
  {
    path: '/loading',
    name: 'Loading',
    component: LoadingView,
    meta: { requiresAuth: true }
  },
  {
    path: '/report',
    name: 'Report',
    component: ReportView,
    meta: { requiresAuth: true }
  }
];

const router = createRouter({
  history: createWebHistory(),
  routes
});

// Navigation guard to check authentication
router.beforeEach((to, from, next) => {
  const isAuthenticated = store.getters.isAuthenticated;
  
  if (to.meta.requiresAuth && !isAuthenticated) {
    // If route requires auth and user is not authenticated, redirect to login
    next({ name: 'Login' });
  } else if (to.path === '/login' && isAuthenticated) {
    // If user is already logged in and tries to access login page, redirect to user-info
    next({ name: 'UserInfo' });
  } else {
    // Otherwise allow navigation
    next();
  }
});

export default router;

================================================================================

--- File: psychology-app-new\src\store\index.js ---
// src/store/index.js
import { createStore } from 'vuex';
import api from '../api'; // 确保 api 导入正确

const store = createStore({
  state() {
    // 定义 Vuex store 的初始状态
    return {
      user: null, // 当前登录用户信息
      // --- 关键修改：不再从 localStorage 初始化 token ---
      token: null, // 用户认证令牌，初始为 null，不再从 localStorage 读取
      // ----------------------------------------------
      scales: [], // 可用量表列表
      currentScale: null, // 当前选择的量表代码
      scaleQuestions: [], // 当前量表的问题列表
      assessment: { // 评估相关数据
        basicInfo: { // 用户填写的基本信息
          name: '',
          gender: '',
          age: '',
          id_card: '',
          occupation: '',
          case_name: '',
          case_type: '',
          identity_type: '',
          person_type: '',
          marital_status: '',
          children_info: '',
          criminal_record: 0, // 保持数字类型，0 代表无
          health_status: '',
          phone_number: '',
          domicile: '',
        },
        answers: {}, // 用户对量表问题的回答
        uploadedImage: null, // 用户上传的图片文件
        submissionId: null // 提交评估后获取的 ID
      },
      psychologyTips: [], // 心理小贴士列表 (似乎未使用，但保留)
      currentTip: null, // 当前显示的心理小贴士
      loading: false, // 全局加载状态标志
      error: null, // 全局错误信息
      report: null ,// 存储获取到的分析报告数据
      reportStatus: 'pending', // 可能的状态: 'pending', 'processing', 'complete', 'failed', 'not_found'
    };
  },

  getters: {
    // 定义基于 state 的计算属性
    // isAuthenticated 仍然依赖 state.token，现在初始值将为 false
    isAuthenticated(state) {
      // 判断用户是否已认证（是否有 token）
      return !!state.token;
    },
    currentUser(state) {
      // 获取当前用户信息
      return state.user;
    },
    availableScales(state) {
      // 获取可用量表列表
      return state.scales;
    },
    getScaleQuestions(state) {
      // 获取当前量表的问题
      return state.scaleQuestions;
    },
    getCurrentTip(state) {
      // 获取当前显示的心理小贴士
      return state.currentTip;
    },
    getAssessmentBasicInfo(state) {
      // 获取评估的基本信息
      return state.assessment.basicInfo;
    },
    getAssessmentAnswers(state) {
      // 获取评估的答案
      return state.assessment.answers;
    },
    getUploadedImage(state) {
      // 获取上传的图片
      return state.assessment.uploadedImage;
    },
    getSubmissionId(state) {
      // 获取提交 ID
      console.log('[Getter: getSubmissionId] 返回:', state.assessment.submissionId);
      return state.assessment.submissionId;
    },
    getReport(state) {
      // 获取分析报告
      console.log('[Getter: getReport] 返回:', state.report);
      return state.report;
    },
    isLoading(state) {
      // 获取加载状态
      return state.loading;
    },
    getReportStatus(state) {
       return state.reportStatus; 
    },
  },

  mutations: {
    // 定义同步修改 state 的方法
    SET_TOKEN(state, token) {
      // 设置认证 Token
      state.token = token;
      // --- 保留将 token 写入 localStorage 的逻辑 ---
      // 这仍然有用，比如可以在开发者工具中查看当前 token，
      // 但它不会影响下次启动时的自动登录了。
      if (token) {
        localStorage.setItem('token', token);
        console.log('[Mutation: SET_TOKEN] Token 已设置到 state 和 localStorage。');
      } else {
        localStorage.removeItem('token');
        console.log('[Mutation: SET_TOKEN] Token 已从 state 和 localStorage 移除。');
      }
      // ---------------------------------------------
    },
    SET_USER(state, user) {
      // 设置用户信息
      state.user = user;
      console.log('[Mutation: SET_USER] 用户信息已设置到 state:', user);
    },
    SET_SCALES(state, scales) {
      // 设置量表列表
      state.scales = scales;
      console.log('[Mutation: SET_SCALES] 量表列表已设置到 state:', scales?.length);
    },
    SET_CURRENT_SCALE(state, scaleCode) {
      // 设置当前量表代码
      state.currentScale = scaleCode;
      console.log('[Mutation: SET_CURRENT_SCALE] 当前量表已设置为:', scaleCode);
    },
    SET_SCALE_QUESTIONS(state, questions) {
      // 设置量表问题
      state.scaleQuestions = questions;
       console.log('[Mutation: SET_SCALE_QUESTIONS] 量表问题已设置:', questions?.length);
    },
    SET_PSYCHOLOGY_TIPS(state, tips) {
      // 设置心理小贴士列表
      state.psychologyTips = tips;
       console.log('[Mutation: SET_PSYCHOLOGY_TIPS] 心理小贴士已设置:', tips?.length);
    },
    SET_CURRENT_TIP(state, tip) {
      // 设置当前心理小贴士
      state.currentTip = tip;
       console.log('[Mutation: SET_CURRENT_TIP] 当前心理小贴士已设置:', tip?.title);
    },
    SET_BASIC_INFO(state, info) {
      // 更新基础信息
      state.assessment.basicInfo = { ...state.assessment.basicInfo, ...info };
      console.log('[Mutation: SET_BASIC_INFO] 基础信息已更新。');
    },
    SET_ANSWER(state, { questionNumber, answer }) {
      // 设置单个问题的答案
      state.assessment.answers = {
        ...state.assessment.answers,
        ['q' + questionNumber]: answer // 使用 'q' + 题号 作为 key
      };
      // console.log(`[Mutation: SET_ANSWER] 问题 Q${questionNumber} 的答案已设置为: ${answer}`); // 这个日志比较频繁，可以选择性注释掉
    },
    SET_UPLOADED_IMAGE(state, imageFile) {
      // 设置上传的图片文件
      state.assessment.uploadedImage = imageFile;
      console.log('[Mutation: SET_UPLOADED_IMAGE] 上传的图片已更新:', imageFile ? imageFile.name : null);
    },
    SET_SUBMISSION_ID(state, id) {
      // 设置提交 ID
      state.assessment.submissionId = id;
      console.log('[Mutation: SET_SUBMISSION_ID] 提交 ID 已设置为:', id);
    },
    SET_REPORT(state, report) {
      // 设置分析报告数据
      console.log('[Mutation: SET_REPORT] 触发。接收到的 payload:', report);
      state.report = report;
      if (report && typeof report === 'object' && report.report_text) {
         console.log('[Mutation: SET_REPORT] State 已使用有效的报告数据更新。');
      } else if (report === null || report === undefined) {
         console.log('[Mutation: SET_REPORT] State 已使用 NULL/UNDEFINED 报告更新。');
      } else {
         console.warn('[Mutation: SET_REPORT] State 已更新，但接收到的报告数据似乎无效或不完整:', report);
      }
    },
    SET_REPORT_STATUS(state, status) {
      console.log(`[Mutation: SET_REPORT_STATUS] 状态更新为: ${status}`);
      state.reportStatus = status;
    },
    SET_LOADING(state, isLoading) {
      // 设置加载状态
      state.loading = isLoading;
    },
    SET_ERROR(state, error) {
      // 设置错误信息
      state.error = error;
      console.error('[Mutation: SET_ERROR] 错误信息已设置到 state:', error);
    },
    RESET_ASSESSMENT(state) {
      // 重置评估相关的状态
      console.log('[Mutation: RESET_ASSESSMENT] 正在重置评估状态...');
      state.assessment = {
        basicInfo: {
          name: '', gender: '', age: '', id_card: '', occupation: '',
          case_name: '', case_type: '', identity_type: '', person_type: '',
          marital_status: '', children_info: '', criminal_record: 0,
          health_status: '', phone_number: '', domicile: '',
        },
        answers: {},
        uploadedImage: null,
        submissionId: null
      };
      state.scaleQuestions = [];
      state.currentScale = null;
      state.report = null; // 同时清空报告
      console.log('[Mutation: RESET_ASSESSMENT] 评估状态重置完成。');
    },
    CLEAR_ERROR(state) {
      // 清除错误信息
      if (state.error) {
        console.log('[Mutation: CLEAR_ERROR] 正在清除错误状态。');
        state.error = null;
      }
    }
  },

  actions: {
    // 定义异步操作或包含业务逻辑的方法

    // --- 身份认证 actions ---
    async login({ commit, dispatch }, { username, password }) {
      // 用户登录
      console.log('[Action: login] 触发。');
      commit('CLEAR_ERROR'); // 清除之前的错误
      commit('SET_LOADING', true); // 开始加载
      try {
        console.log('[Action: login] 尝试 API 登录，用户名:', username);
        const response = await api.auth.login(username, password); // 调用 API
        console.log('[Action: login] 收到 API 响应:', response);
        if (response && response.data && response.data.access_token) {
          // 登录成功
          commit('SET_TOKEN', response.data.access_token); // 保存 token
          await dispatch('fetchCurrentUser'); // 获取当前用户信息
          console.log('[Action: login] 登录并获取用户信息成功。');
          commit('SET_LOADING', false); // 结束加载
          return response; // 返回响应给调用者
        } else {
          // API 响应无效
          throw new Error('登录响应无效或缺少 access_token。');
        }
      } catch (error) {
        // 登录失败
        const errorMessage = error.response?.data?.detail || error.message || '登录失败，请检查您的凭据或网络连接。';
        console.error('[Action: login] 失败。', error.response || error);
        commit('SET_ERROR', errorMessage); // 设置错误信息
        commit('SET_TOKEN', null); // 清除 token
        commit('SET_USER', null); // 清除用户信息
        commit('SET_LOADING', false); // 结束加载
        throw error; // 将错误继续抛出，方便 UI 处理
      }
    },

    async register({ commit }, userData) {
      // 用户注册
      console.log('[Action: register] 触发。');
      commit('CLEAR_ERROR');
      commit('SET_LOADING', true);
      try {
        const response = await api.auth.register(userData); // 调用注册 API
        console.log('[Action: register] API 响应:', response);
        commit('SET_LOADING', false);
        return response; // 返回响应
      } catch (error) {
        const errorMessage = error.response?.data?.detail || error.message || '注册失败，请稍后再试。';
        console.error('[Action: register] 失败。', error.response || error);
        commit('SET_ERROR', errorMessage);
        commit('SET_LOADING', false);
        throw error;
      }
    },

    async fetchCurrentUser({ commit, state }) {
      // 获取当前登录用户信息
      console.log('[Action: fetchCurrentUser] 触发。');
      if (!state.token) {
        // 如果没有 token，则无需调用 API
        console.warn('[Action: fetchCurrentUser] 未找到 token，跳过 API 调用。');
        return;
      }
      try {
        const response = await api.auth.getCurrentUser(); // 调用获取用户信息的 API
        console.log('[Action: fetchCurrentUser] API 响应:', response);
        commit('SET_USER', response.data); // 保存用户信息
        return response;
      } catch (error) {
        // 获取失败，可能是 token 失效
        const errorMessage = error.response?.data?.detail || error.message || '无法获取用户信息，您的会话可能已过期。';
        console.error('[Action: fetchCurrentUser] 失败。', error.response || error);
        commit('SET_TOKEN', null); // 清除无效 token
        commit('SET_USER', null); // 清除用户信息
        commit('SET_ERROR', errorMessage); // 设置错误
        // 这里可以选择性地不 throw error，或者根据需要处理
        // throw error;
      }
    },

    logout({ commit }) {
      // 用户登出
      console.log('[Action: logout] 触发。');
      commit('SET_TOKEN', null); // 清除 token
      commit('SET_USER', null); // 清除用户信息
      commit('RESET_ASSESSMENT'); // 重置评估状态
      commit('CLEAR_ERROR'); // 清除错误
      // 可以选择性地调用 API 通知后端登出
      // await api.auth.logout();
      console.log('[Action: logout] 用户已登出，状态已重置。');
    },

    // --- 量表 actions ---
    async fetchScales({ commit }) {
      // 获取可用量表列表
      console.log('[Action: fetchScales] 触发。');
      commit('CLEAR_ERROR');
      commit('SET_LOADING', true);
      try {
        const response = await api.scales.getAvailableScales(); // 调用 API
        console.log('[Action: fetchScales] API 响应:', response.data);
        if (response && response.data && Array.isArray(response.data.scales)) {
            // 检查响应结构是否正确
            commit('SET_SCALES', response.data.scales); // 保存量表列表
        } else {
            console.warn('[Action: fetchScales] 从 API 收到的响应结构无效。');
            commit('SET_SCALES', []); // 设置为空数组
        }
        commit('SET_LOADING', false);
        return response;
      } catch (error) {
        const errorMessage = error.response?.data?.detail || error.message || '无法加载量表列表。';
        console.error('[Action: fetchScales] 失败。', error.response || error);
        commit('SET_ERROR', errorMessage);
        commit('SET_SCALES', []); // 失败时设置为空数组
        commit('SET_LOADING', false);
        throw error;
      }
    },

    async fetchScaleQuestions({ commit }, scaleCode) {
      // 根据量表代码获取问题列表
      console.log('[Action: fetchScaleQuestions] 触发，量表代码:', scaleCode);
      commit('CLEAR_ERROR');
      commit('SET_LOADING', true);
      try {
        commit('SET_CURRENT_SCALE', scaleCode); // 设置当前量表
        const response = await api.scales.getScaleQuestions(scaleCode); // 调用 API
        console.log('[Action: fetchScaleQuestions] 量表', scaleCode, '的 API 响应:', response.data);
         if (response && response.data && Array.isArray(response.data.questions)) {
            // 检查响应结构
            commit('SET_SCALE_QUESTIONS', response.data.questions); // 保存问题列表
         } else {
            console.warn('[Action: fetchScaleQuestions] 从 API 收到的响应结构无效。');
            commit('SET_SCALE_QUESTIONS', []); // 设置为空数组
         }
        commit('SET_LOADING', false);
        return response;
      } catch (error) {
        const errorMessage = error.response?.data?.detail || error.message || '无法加载量表问题。';
        console.error('[Action: fetchScaleQuestions] 失败。', error.response || error);
        commit('SET_ERROR', errorMessage);
        commit('SET_SCALE_QUESTIONS', []); // 失败时设置为空数组
        commit('SET_LOADING', false);
        throw error;
      }
    },

    // --- 评估 actions ---
    setBasicInfo({ commit }, info) {
      // 设置评估的基础信息 (这是一个同步操作，理论上可以直接 commit，放在 action 里是为了结构统一)
      console.log('[Action: setBasicInfo] 触发。');
      commit('SET_BASIC_INFO', info);
    },

    setAnswer({ commit }, { questionNumber, answer }) {
      // 设置问题的答案 (同上，同步操作)
      commit('SET_ANSWER', { questionNumber, answer });
    },

    setUploadedImage({ commit }, imageFile) {
      // 设置上传的图片 (同上，同步操作)
       console.log('[Action: setUploadedImage] 触发。');
      commit('SET_UPLOADED_IMAGE', imageFile);
    },

    async submitAssessment({ commit, state }) {
      // 提交评估数据
      console.log('[Action: submitAssessment] 触发。');
      commit('CLEAR_ERROR');
      commit('SET_LOADING', true);
      try {
        // 创建 FormData 对象来发送数据，特别是因为包含文件上传
        const formData = new FormData();

        // 添加基础信息
        Object.entries(state.assessment.basicInfo).forEach(([key, value]) => {
          // 确保不添加 null, undefined 或空字符串的值，除非后端需要
          if (value !== null && value !== undefined && value !== '') {
            formData.append(key, value);
          }
        });

        // 添加量表类型
        if (state.currentScale) {
          formData.append('scale_type', state.currentScale);
        }

        // 添加答案
        Object.entries(state.assessment.answers).forEach(([key, value]) => {
          formData.append(key, value);
        });

        // 添加图片文件（如果存在）
        if (state.assessment.uploadedImage) {
          formData.append('image', state.assessment.uploadedImage);
        }

        console.log('[Action: submitAssessment] 正在向 API 发送 FormData...');
        // 调用提交评估的 API
        const response = await api.assessments.submitAssessment(formData);
        console.log('[Action: submitAssessment] API 响应:', response);

        // 检查响应是否包含 submission_id
        if (response && response.data && response.data.submission_id) {
             commit('SET_SUBMISSION_ID', response.data.submission_id); // 保存提交 ID
        } else {
             console.warn('[Action: submitAssessment] API 响应缺少 submission_id。');
             // 可以抛出错误或设置错误状态
             throw new Error('提交评估响应无效，缺少 submission_id。');
        }

        commit('SET_LOADING', false);
        return response; // 返回响应，可能包含 submission_id
      } catch (error) {
        const errorMessage = error.response?.data?.detail || error.message || '提交评估失败。';
        console.error('[Action: submitAssessment] 失败。', error.response || error);
        commit('SET_ERROR', errorMessage);
        commit('SET_LOADING', false);
        throw error; // 重新抛出错误，让 UI 处理
      }
    },

    // --- 心理小贴士 actions ---
    async fetchRandomTip({ commit }) {
      // 获取随机心理小贴士
      console.log('[Action: fetchRandomTip] 触发。');
      try {
        const response = await api.encyclopedia.getRandomTip(); // 调用 API
        console.log('[Action: fetchRandomTip] API 响应:', response);
        // 检查响应结构并获取第一个条目
        if (response && response.data && Array.isArray(response.data.entries) && response.data.entries.length > 0) {
          commit('SET_CURRENT_TIP', response.data.entries[0]); // 保存小贴士
        } else {
           // 如果没有获取到，可以设置一个默认的
           console.warn('[Action: fetchRandomTip] 响应中未找到小贴士条目。');
           commit('SET_CURRENT_TIP', { category: '提示', title: '小贴士', content: '保持积极心态，迎接每一天！' });
        }
        return response;
      } catch (error) {
        // 获取失败
        console.error('[Action: fetchRandomTip] 失败。', error.response || error);
        // 设置一个错误提示或默认值
        commit('SET_CURRENT_TIP', { category: '提示', title: '网络错误', content: '无法获取心理小贴士，请检查网络连接。' });
        return null; // 返回 null 表示失败
      }
    },

    // --- 报告 actions ---
     // +++ 新增: 获取报告状态的 Action +++
     async fetchReportStatus({ commit, state }) {
      const submissionId = state.assessment.submissionId;
      // 只在有 submissionId 时执行
      if (!submissionId) {
        console.warn('[Action: fetchReportStatus] 没有 submissionId，无法获取状态。');
        commit('SET_REPORT_STATUS', 'not_found'); // 或其他表示无效的状态
        return null;
      }

      console.log(`[Action: fetchReportStatus] 触发，检查 ID: ${submissionId} 的状态...`);
      // 注意：状态检查通常不设置全局 loading，因为它是后台轮询的一部分
      // commit('SET_LOADING', true); // 如果需要，可以启用
      commit('CLEAR_ERROR'); // 清除旧错误

      try {
        console.log('[Action: fetchReport] 使用的 api 实例默认 baseURL:', api.defaults.baseURL); // <--- 添加这行
        console.log(`[Action: fetchReport] 准备调用 api.reports.getReport，ID: ${submissionId}`); // <--- 添加这行
        const response = await api.reports.getReportStatus(submissionId);
        console.log('[Action: fetchReportStatus] API 响应:', response);
        if (response && response.data && response.data.status) {
          commit('SET_REPORT_STATUS', response.data.status); // 使用从 API 获取的状态更新 state
          return response.data.status; // 返回状态值
        } else {
          console.warn('[Action: fetchReportStatus] 无效的状态 API 响应结构。');
          commit('SET_REPORT_STATUS', 'failed'); // 响应无效视为失败
          return 'failed';
        }
      } catch (error) {
        console.error(`[Action: fetchReportStatus] 获取 ID: ${submissionId} 状态时出错。`, error.response || error);
        let statusToSet = 'failed';
        let errorMessage = "无法获取报告状态。";

        if (error.response?.status === 404) {
          console.log(`[Action: fetchReportStatus] 评估 ID: ${submissionId} 未找到 (404)。`);
          statusToSet = 'not_found'; // 使用特定状态表示未找到
          errorMessage = "评估记录未找到。";
        } else {
           errorMessage = error.response?.data?.detail || error.message || errorMessage;
        }
        commit('SET_REPORT_STATUS', statusToSet);
        // 状态检查失败通常不设置全局错误，避免干扰用户，但可以记录
        // commit('SET_ERROR', errorMessage);
        // commit('SET_LOADING', false); // 如果启用了 loading
        return statusToSet; // 返回最终确定的状态
      }
    },
    // ++++++++++++++++++++++++++++++++++++++++
    // VVVVVV 这里是替换后的 fetchReport action VVVVVV
    async fetchReport({ commit, state }) {
      const submissionId = state.assessment.submissionId;
      console.log(`[Action: fetchReport] 触发获取完整报告，ID: ${submissionId}。`);

      if (!submissionId) {
        console.warn('[Action: fetchReport] state 中没有可用的 submission ID。');
        commit('SET_REPORT', null); // 确保 report 为空
        return null;
      }

      commit('CLEAR_ERROR');
      // 获取完整报告时可以显示加载状态
      commit('SET_LOADING', true);

      try {
        console.log(`[Action: fetchReport] 正在调用 API 获取完整报告，ID: ${submissionId}...`);
        const response = await api.reports.getReport(submissionId);
        console.log('[Action: fetchReport] 收到 API 响应:', response);

        // 后端现在应该只在报告完成时返回 report 数据
        if (response && response.data && response.data.report) {
            commit('SET_REPORT', response.data.report); // 保存有效的报告数据
            console.log(`[Action: fetchReport] 已接收并保存完整报告数据，ID: ${submissionId}。`);
            // 如果 API 在报告未完成时仍返回 200 和 message，这里可以处理
        } else if (response && response.data && response.data.message) {
             console.warn(`[Action: fetchReport] API 返回了消息而非报告: ${response.data.message}. 报告可能未就绪或失败。`);
             commit('SET_REPORT', null); // 确保报告为空
             // 可以根据 message 更新状态或错误
             if (response.data.message.includes("失败")) {
                  commit('SET_REPORT_STATUS', 'failed');
                  commit('SET_ERROR', response.data.message);
             }
        }
         else {
            console.warn('[Action: fetchReport] 无效的 API 响应结构或未包含报告数据。');
            commit('SET_REPORT', null);
            commit('SET_ERROR', '获取报告时响应无效。'); // 设置错误
        }
        commit('SET_LOADING', false);
        return response; // 返回原始响应

      } catch (error) {
        // 处理 API 调用错误
        let errorMessage = "无法获取分析报告。";
        if (error.response) {
          console.error(`[Action: fetchReport] 服务器响应错误状态: ${error.response.status}`, error.response.data);
          errorMessage = error.response.data?.detail || errorMessage;
          if (error.response.status === 404) {
             errorMessage = "评估记录未找到。"; // 更具体的 404 消息
             commit('SET_REPORT_STATUS', 'not_found'); // 更新状态
          } else if (error.response.status === 401 || error.response.status === 403) {
             errorMessage = "身份验证失败或无权限。";
          }
        } else if (error.request) {
          console.error(`[Action: fetchReport] 未收到服务器响应。`);
          errorMessage = "服务器未响应，请检查网络连接。";
        } else {
          console.error(`[Action: fetchReport] 设置请求时出错:`, error.message);
          errorMessage = `请求出错: ${error.message}`;
        }
        console.error(`[Action: fetchReport] 获取 ID: ${submissionId} 的报告失败。`, error);
        commit('SET_ERROR', errorMessage); // 设置全局错误
        commit('SET_REPORT', null); // 清空报告
        commit('SET_LOADING', false);
        throw error; // 重新抛出，让调用者知道失败
      }
    },
    // ^^^^^^ 这里是替换后的 fetchReport action ^^^^^^

    // --- 重置 actions ---
    resetAssessment({ commit }) {
      // 重置评估相关状态 (调用 mutation)
       console.log('[Action: resetAssessment] 触发。');
      commit('RESET_ASSESSMENT');
    },

    clearError({ commit }) {
      // 清除错误状态 (调用 mutation)
      commit('CLEAR_ERROR');
    }
  }
});

export default store;

================================================================================

--- File: psychology-app-new\src\utils\index.js ---
// Format functions
export const formatDate = (dateString) => {
    if (!dateString) return '';
    const date = new Date(dateString);
    return date.toLocaleDateString('zh-CN', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  };
  
  // Validate functions
  export const validateIdCard = (idCard) => {
    // Simple validation for Chinese ID card (18 digits)
    const idCardRegex = /(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
    return idCardRegex.test(idCard);
  };
  
  export const validatePhone = (phone) => {
    // Simple validation for Chinese phone numbers
    const phoneRegex = /^1[3-9]\d{9}$/;
    return phoneRegex.test(phone);
  };
  
  export const validateAge = (age) => {
    const parsedAge = parseInt(age, 10);
    return !isNaN(parsedAge) && parsedAge > 0 && parsedAge < 150;
  };
  
  // Local storage helpers
  export const saveToLocalStorage = (key, value) => {
    try {
      localStorage.setItem(key, JSON.stringify(value));
      return true;
    } catch (error) {
      console.error('Error saving to localStorage:', error);
      return false;
    }
  };
  
  export const getFromLocalStorage = (key) => {
    try {
      const item = localStorage.getItem(key);
      return item ? JSON.parse(item) : null;
    } catch (error) {
      console.error('Error getting from localStorage:', error);
      return null;
    }
  };
  
  // Default psychology tips for fallback
  export const defaultTips = [
    {
      category: '心理小贴士',
      title: '专注力提升',
      content: '每天花5分钟进行深呼吸冥想，可以有效提高注意力和减少分心。'
    },
    {
      category: '心理小贴士',
      title: '情绪管理',
      content: '感到焦虑时，尝试"5-4-3-2-1"技巧：说出5个你看到的东西，4个你触摸到的东西，3个你听到的声音，2个你闻到的气味，1个你尝到的味道。'
    },
    {
      category: '心理小贴士',
      title: '人际关系',
      content: '积极倾听是建立良好人际关系的关键，尝试在对话中花80%的时间倾听，20%的时间讲话。'
    },
    {
      category: '心理小贴士',
      title: '自我成长',
      content: '研究表明，学习新技能不仅能提高能力，还能增加幸福感和降低抑郁风险。'
    },
    {
      category: '心理小贴士',
      title: '压力缓解',
      content: '感到压力大时，尝试"方块呼吸法"：吸气4秒，屏息4秒，呼气4秒，再屏息4秒，构成一个完整的"方块"循环。'
    }
  ];
  
  // Get a random tip from the default tips array
  export const getRandomDefaultTip = () => {
    const randomIndex = Math.floor(Math.random() * defaultTips.length);
    return defaultTips[randomIndex];
  };

================================================================================

--- File: PsychologyAnalysis\Combiner.py ---
import os
import sys
from tqdm import tqdm

# 定义允许被合并内容的文件扩展名
ALLOWED_EXTENSIONS_FOR_CONTENT = ('.py','.yaml','.json','.csv','.html')

# --- 恢复 generate_tree 到原始版本，以包含所有文件 --txt-
def generate_tree(root_dir):
    """生成类似 tree /f 的目录树字符串 (包含所有文件和目录)"""
    tree_output = [root_dir]
    # os.walk 会自然遍历所有子目录和文件
    for root, dirs, files in os.walk(root_dir):
        level = root.replace(root_dir, '').count(os.sep)
        indent = '    ' * level
        if level > 0:  # 避免重复输出根目录
            tree_output.append(f"{indent}{os.path.basename(root)}")
        
        # --- 在目录树中列出该目录下的所有文件 ---
        sub_indent = indent + '    '
        for file in files:
            # 不进行扩展名过滤，列出所有文件
            tree_output.append(f"{sub_indent}{file}")
            
    return "\n".join(tree_output)

def concatenate_files(root_dir, output_file):
    # 计算总文件数以初始化进度条 (反映遍历的所有文件)
    total_files = sum(len(files) for _, _, files in os.walk(root_dir))

    # 预计算将被合并内容的文件数（可选，如果你想让进度条只反映合并进度）
    # included_files_count = 0
    # for root, dirs, files in os.walk(root_dir):
    #     for file in files:
    #         _, ext = os.path.splitext(file)
    #         if ext.lower() in ALLOWED_EXTENSIONS_FOR_CONTENT:
    #             included_files_count += 1
    # print(f"找到 {included_files_count} 个符合条件的文件将被合并内容。")


    with open(output_file, 'w', encoding='utf-8') as outfile:
        # --- 写入完整的目录树 ---
        outfile.write("Full Project Directory Tree:\n") # 标题明确说明是完整树
        outfile.write(generate_tree(root_dir) + "\n") # 调用未经过滤的 generate_tree
        outfile.write("=====\n\n")
        outfile.write("Concatenated File Content (Filtered):\n") # 明确说明内容是过滤后的

        # 使用 tqdm 显示进度条 (total 仍然是所有文件数，反映遍历进度)
        # 如果使用上面的 included_files_count，这里改为 total=included_files_count
        with tqdm(total=total_files, desc="扫描文件并合并内容", unit="file") as pbar:
            for root, dirs, files in os.walk(root_dir):
                for file in files:
                    file_path = os.path.join(root, file)

                    # --- 核心过滤逻辑：只处理指定扩展名的文件内容 ---
                    _, ext = os.path.splitext(file)

                    # 检查扩展名是否在允许合并内容的列表中
                    if ext.lower() in ALLOWED_EXTENSIONS_FOR_CONTENT:
                        # --- 文件内容合并逻辑 ---
                        try:
                            with open(file_path, 'r', encoding='utf-8') as infile:
                                content = infile.read()
                                outfile.write("FILE: " + file_path + "\n")
                                outfile.write(content + "\n")
                                outfile.write("-----\n")
                            print(f"已合并内容: {file_path} - 成功")
                        except Exception as e:
                            # 即使读取失败，也记录下来
                            outfile.write(f"FILE: {file_path}\n")
                            outfile.write(f"读取文件出错 (尝试合并内容时): {str(e)}\n")
                            outfile.write("-----\n")
                            print(f"尝试合并内容失败: {file_path} - 错误: {str(e)}")
                    else:
                        # --- 文件类型不符，跳过内容合并 ---
                        # 不需要写入文件内容，只在控制台打印信息
                        print(f"已跳过内容合并 (类型不符): {file_path}")

                    # --- 更新进度条 ---
                    # 每个访问的文件都更新进度条
                    pbar.update(1)

if __name__ == "__main__":
    root_dir = sys.argv[1] if len(sys.argv) > 1 else os.getcwd()
    output_file = 'project_text1.txt'
    print(f"正在扫描目录: {root_dir}")
    print(f"将生成包含所有文件的目录树，并合并后缀为 {', '.join(ALLOWED_EXTENSIONS_FOR_CONTENT)} 的文件内容到: {output_file}")
    concatenate_files(root_dir, output_file)
    print(f"处理完成。输出文件: {output_file}")

================================================================================

--- File: PsychologyAnalysis\README.md ---
# conda
conda activate listener

# 依赖
pip install -r requirements.txt 来安装所有依赖
pip install --force-reinstall -r requirements.txt。这会确保即使包已存在，也会尝试重新安装，有时能解决损坏的安装。

# 进度
核心的 FastAPI 框架、API 端点（用于量表、提交、报告获取）以及 Celery 异步 AI 处理流程都已经成功搭建并初步验证

# 进程1
在执行前，打开redis windows为：redis-server.exe

python run_celery_worker.py #运行该代码来 启动celery worker(这个就行)
celery -A app.core.celery_app worker --loglevel=info -P solo # Windows 使用 solo 进程池

# 进程2

uvicorn app.main:app --reload
uvicorn app.main:app --reload --host 127.0.0.1 --port 8000 --log-level info 启动 FastAPI 服务器 (Uvicorn)
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000 --log-level info 启动 FastAPI 服务器 (Uvicorn)  -->全局广播，用于局域网，记得关闭防火墙 -->ip：http://192.168.43.190:5173/（我手机热点）


# 记得打开前端
npm run dev

# 手动创建用户 尤其是管理员的
python create_initial_user.py

# 进程0:
## 数据库初始化
从终端运行 python -m app.db.init_db。这会连接到 config.py 中 DATABASE_URL 指定的 SQLite 文件，并创建 users 表（如果它还不存在）。

## 数据库迁移 使用 Alembic
安装 Alembic: pip install alembic
初始化 Alembic: 在项目根目录运行 alembic init alembic (会创建一个 alembic 文件夹和 alembic.ini 文件)。
配置 Alembic: 修改 alembic/env.py 文件，让它能连接到你的数据库并识别你的 SQLAlchemy Base。你需要：
导入你的 Base: from app.db.base_class import Base
设置 target_metadata = Base.metadata
配置数据库 URL (可以从 settings 导入)。
自动生成迁移脚本: 运行 alembic revision --autogenerate -m "Add submitter_id to analysis_data"。Alembic 会比较你的模型和数据库，并在 alembic/versions/ 目录下生成一个 Python 文件，包含添加 submitter_id 列的 SQL 操作。
检查迁移脚本: 打开生成的脚本文件，确认它包含了类似 op.add_column('analysis_data', sa.Column('submitter_id', sa.Integer(), nullable=True)) 和 op.create_foreign_key(...)、op.create_index(...) 的操作。
应用迁移: 运行 *alembic upgrade head* 这会执行迁移脚本，更新你的数据库表结构。

## 量表导入：
导入input\questionnaires里面的量表
python src/import_questions.py

使用总结：
1.
alembic revision --autogenerate -m "Create users table and add submitter_id fk"
2.
alembic upgrade head


# 运行应用: 确保你的 FastAPI 应用和 Celery worker 都在运行。（两个进程：1 2）
uvicorn app.main:app --reload --host 127.0.0.1 --port 8000
python run_celery_worker.py (或 celery -A ...)

# 注意！！！！

1. pages.py
下面内容注销了，所以这里没有依赖，等有机会再修复。先能跑

     添加依赖项，确保只有激活的用户才能访问此页面
     dependencies=[Depends(get_current_active_user)]

================================================================================

--- File: PsychologyAnalysis\alembic.ini ---
# A generic, single database configuration.

[alembic]
# path to migration scripts
# Use forward slashes (/) also on windows to provide an os agnostic path
script_location = alembic

# template used to generate migration file names; The default value is %%(rev)s_%%(slug)s
# Uncomment the line below if you want the files to be prepended with date and time
# see https://alembic.sqlalchemy.org/en/latest/tutorial.html#editing-the-ini-file
# for all available tokens
# file_template = %%(year)d_%%(month).2d_%%(day).2d_%%(hour).2d%%(minute).2d-%%(rev)s_%%(slug)s

# sys.path path, will be prepended to sys.path if present.
# defaults to the current working directory.
prepend_sys_path = .

# timezone to use when rendering the date within the migration file
# as well as the filename.
# If specified, requires the python>=3.9 or backports.zoneinfo library and tzdata library.
# Any required deps can installed by adding `alembic[tz]` to the pip requirements
# string value is passed to ZoneInfo()
# leave blank for localtime
# timezone =

# max length of characters to apply to the "slug" field
# truncate_slug_length = 40

# set to 'true' to run the environment during
# the 'revision' command, regardless of autogenerate
# revision_environment = false

# set to 'true' to allow .pyc and .pyo files without
# a source .py file to be detected as revisions in the
# versions/ directory
# sourceless = false

# version location specification; This defaults
# to alembic/versions.  When using multiple version
# directories, initial revisions must be specified with --version-path.
# The path separator used here should be the separator specified by "version_path_separator" below.
# version_locations = %(here)s/bar:%(here)s/bat:alembic/versions

# version path separator; As mentioned above, this is the character used to split
# version_locations. The default within new alembic.ini files is "os", which uses os.pathsep.
# If this key is omitted entirely, it falls back to the legacy behavior of splitting on spaces and/or commas.
# Valid values for version_path_separator are:
#
# version_path_separator = :
# version_path_separator = ;
# version_path_separator = space
# version_path_separator = newline
#
# Use os.pathsep. Default configuration used for new projects.
version_path_separator = os

# set to 'true' to search source files recursively
# in each "version_locations" directory
# new in Alembic version 1.10
# recursive_version_locations = false

# the output encoding used when revision files
# are written from script.py.mako
# output_encoding = utf-8

sqlalchemy.url = driver://user:pass@localhost/dbname


[post_write_hooks]
# post_write_hooks defines scripts or Python functions that are run
# on newly generated revision scripts.  See the documentation for further
# detail and examples

# format using "black" - use the console_scripts runner, against the "black" entrypoint
# hooks = black
# black.type = console_scripts
# black.entrypoint = black
# black.options = -l 79 REVISION_SCRIPT_FILENAME

# lint with attempts to fix using "ruff" - use the exec runner, execute a binary
# hooks = ruff
# ruff.type = exec
# ruff.executable = %(here)s/.venv/bin/ruff
# ruff.options = check --fix REVISION_SCRIPT_FILENAME

# Logging configuration
[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARNING
handlers = console
qualname =

[logger_sqlalchemy]
level = WARNING
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S


================================================================================

--- File: PsychologyAnalysis\code2txt.py ---

# 将文件夹下内容转化为txt文件，方便一次性导入导出
# 该脚本会遍历指定目录下的所有文件和子目录，并将可读的文本文件内容写入到一个输出文件中
# 目录树结构也会被写入到输出文件的开头

import os
import argparse
from pathlib import Path
import sys

# --- 配置 ---

# 硬编码的根目录路径
HARDCODED_ROOT_DIR = r"C:\Users\ymh33\Desktop\Project\PythonProject\QingtingzheDemoProject"

# 默认输出文件名
DEFAULT_OUTPUT_FILENAME = "dump0608.txt" # 可以改成更具体的名字

# 识别为可读文本文件的扩展名 (小写)
READABLE_EXTENSIONS = {
    # Code files
    '.py', '.js', '.ts', '.java', '.c', '.cpp', '.h', '.hpp', '.cs', '.go',
    '.rb', '.php', '.swift', '.kt', '.scala', '.rs', '.lua', '.pl', '.sh',
    '.bat', '.ps1',
    # Markup & Data
    '.html', '.htm', '.css', '.scss', '.less', '.md', '.rst', '.json', '.yaml',
    '.yml', '.xml', '.toml', '.ini', '.cfg', '.env', '.sql',
    # Text & Docs
    # '.txt', '.log', '.csv', '.tsv', '.tex',
    # Config files
    # '.gitignore', '.dockerignore', 'dockerfile', '.editorconfig',
    # '.babelrc', '.eslintrc', '.prettierrc',
    # Add more as needed
}

# 识别为可读的特定文件名 (小写，不含扩展名或完整文件名)
READABLE_FILENAMES = {
    'readme', 'license', 'contributing', 'changelog', 'makefile', 'dockerfile',
    'requirements.txt', 'pipfile', 'gemfile', 'package.json', 'composer.json',
    'pom.xml', 'build.gradle', 'setup.py',
    # Add more specific filenames
}

# 需要完全排除扫描的目录名称
EXCLUDE_DIRS = {
    '.git', '.svn', '.hg', '.vscode', '.idea', '__pycache__', 'node_modules',
    'vendor', 'build', 'dist', 'target', 'out', 'bin', 'obj', 'venv', 'env',
    '.pytest_cache', '.mypy_cache', '.tox', '.nox', 'site-packages', 'migrations'
    # Add more directories to exclude
}

# 需要排除的特定文件名称
EXCLUDE_FILES = {
    '.DS_Store', 'Thumbs.db',
    # Add specific files to exclude by name
}

# --- 辅助函数 ---

def generate_tree(start_path, exclude_dirs):
    """生成目录树结构字符串"""
    tree_lines = []
    start_path = Path(start_path).resolve() # 确保是绝对路径

    def build_tree_recursive(directory, prefix="", is_last=False):
        try:
            # 获取目录内容，排序以保证一致性
            items = sorted(
                [item for item in directory.iterdir()],
                key=lambda x: (x.is_file(), x.name.lower()) # 文件夹优先，然后按名称排序
            )
        except PermissionError:
            tree_lines.append(f"{prefix}└── [Error: Permission Denied]")
            return
        except OSError as e:
            tree_lines.append(f"{prefix}└── [Error: {e}]")
            return

        # 过滤掉需要排除的目录和文件（主要用于树状图显示）
        items = [
            item for item in items
            if not (item.is_dir() and item.name in exclude_dirs) and \
               not (item.is_file() and item.name in EXCLUDE_FILES)
        ]

        for i, item in enumerate(items):
            is_current_last = (i == len(items) - 1)
            connector = "└── " if is_current_last else "├── "
            tree_lines.append(f"{prefix}{connector}{item.name}")

            if item.is_dir():
                new_prefix = prefix + ("    " if is_current_last else "│   ")
                build_tree_recursive(item, new_prefix, is_current_last)

    tree_lines.append(f"{start_path.name}/")
    build_tree_recursive(start_path) # 初始调用
    return "\n".join(tree_lines)

def is_readable_file(file_path: Path) -> bool:
    """检查文件是否根据配置被认为是可读的文本文件"""
    # 1. 检查是否在排除的文件列表中
    if file_path.name in EXCLUDE_FILES:
        return False

    # 2. 检查特定文件名 (不区分大小写)
    if file_path.name.lower() in READABLE_FILENAMES:
        return True

    # 3. 检查文件扩展名 (不区分大小写)
    if file_path.suffix.lower() in READABLE_EXTENSIONS:
        return True

    # 4. 检查无扩展名的特定文件名（如 Dockerfile）
    if file_path.stem.lower() in READABLE_FILENAMES and not file_path.suffix:
         return True

    # 默认不是可读文件
    return False

# --- 主函数 ---

def main(output_file): # 注意：移除了 root_dir 参数
    root_path = Path(HARDCODED_ROOT_DIR).resolve() # 使用硬编码的路径
    output_path = Path(output_file)

    if not root_path.is_dir():
        # 使用硬编码的路径显示错误消息
        print(f"Error: Root directory '{HARDCODED_ROOT_DIR}' not found or is not a directory.", file=sys.stderr)
        sys.exit(1)

    all_content = []

    # 1. 生成目录树
    print(f"Generating directory tree for '{root_path}'...") # root_path 现在是硬编码路径解析后的结果
    try:
        tree_structure = generate_tree(root_path, EXCLUDE_DIRS)
        all_content.append("--- Directory Tree ---")
        all_content.append(tree_structure)
        all_content.append("\n" + "="*80 + "\n") # 分隔符
    except Exception as e:
        print(f"Error generating directory tree: {e}", file=sys.stderr)
        all_content.append(f"--- Error Generating Directory Tree ---\n{e}\n")
        all_content.append("\n" + "="*80 + "\n")

    # 2. 遍历文件并读取内容
    print("Scanning and reading files...")
    file_contents = []
    processed_files = 0
    skipped_binary_or_excluded = 0
    read_errors = 0

    # 使用 os.walk 来高效地排除目录，起始路径使用 root_path
    for root, dirs, files in os.walk(root_path, topdown=True, onerror=lambda err: print(f"Warning: Cannot access {err.filename} - {err.strerror}", file=sys.stderr)):
        # --- 排除目录 ---
        dirs[:] = [d for d in dirs if d not in EXCLUDE_DIRS]

        current_root_path = Path(root)

        # 对文件进行排序，保证输出顺序一致
        files.sort()

        for filename in files:
            file_path = current_root_path / filename
            # 计算相对路径时，仍然相对于硬编码的根路径
            relative_path = file_path.relative_to(root_path)

            # 检查是否是可读文件
            if is_readable_file(file_path):
                try:
                    with open(file_path, 'r', encoding='utf-8', errors='ignore') as f:
                        content = f.read()
                    file_contents.append(f"--- File: {relative_path} ---")
                    file_contents.append(content)
                    file_contents.append("\n" + "="*80 + "\n") # 文件间分隔符
                    processed_files += 1
                    if processed_files % 100 == 0: # 每处理 100 个文件打印一次进度
                        print(f"  Processed {processed_files} files...")
                except Exception as e:
                    print(f"  Warning: Could not read file {relative_path}: {e}", file=sys.stderr)
                    file_contents.append(f"--- File: {relative_path} ---")
                    file_contents.append(f"[Error reading file: {e}]")
                    file_contents.append("\n" + "="*80 + "\n")
                    read_errors += 1
            else:
                skipped_binary_or_excluded += 1
                # 可选：打印被跳过的文件信息
                # print(f"  Skipping non-readable or excluded file: {relative_path}")

    print(f"Finished scanning.")
    print(f"  Processed {processed_files} readable files.")
    print(f"  Skipped {skipped_binary_or_excluded} non-readable/excluded files.")
    if read_errors > 0:
        print(f"  Encountered {read_errors} errors while reading files.")

    all_content.extend(file_contents)

    # 3. 写入到输出文件
    print(f"Writing output to '{output_path}'...")
    try:
        with open(output_path, 'w', encoding='utf-8') as f:
            f.write("\n".join(all_content))
        print(f"Successfully created output file: '{output_path}'")
    except Exception as e:
        print(f"Error writing to output file '{output_path}': {e}", file=sys.stderr)
        sys.exit(1)

# --- 脚本入口 ---
if __name__ == "__main__":
    parser = argparse.ArgumentParser(
        description=f"Convert readable files in '{HARDCODED_ROOT_DIR}' into a single TXT file.", # 更新描述
        formatter_class=argparse.RawDescriptionHelpFormatter
    )
    # 移除了 root_dir 参数
    parser.add_argument(
        "-o", "--output",
        default=DEFAULT_OUTPUT_FILENAME,
        help=f"The name of the output TXT file (default: {DEFAULT_OUTPUT_FILENAME})"
    )

    args = parser.parse_args()

    # 调用 main 时只传递 output 文件名
    main(args.output)

================================================================================

--- File: PsychologyAnalysis\create_initial_user.py ---
# create_initial_user.py
import sys
import os
import traceback
import logging
import asyncio # 导入 asyncio 用于运行异步代码
from getpass import getpass # 用于安全地获取密码输入

# --- 设置项目路径 (确保能找到 app 包) ---
PROJECT_ROOT = os.path.dirname(os.path.abspath(__file__))
if PROJECT_ROOT not in sys.path:
    sys.path.insert(0, PROJECT_ROOT)
# --------------------------------------------

# --- 导入必要的模块 ---
try:
    # 从 app.schemas 直接导入 UserCreate
    from app.schemas import UserCreate
    # 导入异步数据库组件
    from sqlalchemy.ext.asyncio import AsyncSession
    from app.db.session import AsyncSessionLocal, async_engine
    # 导入异步 CRUD 函数
    from app.crud.user import get_user_by_username, create_user
    # 导入设置 (如果需要)
    from app.core.config import settings
    # 导入数据库 Base 和 User 模型
    from app.db.base_class import Base
    from app.models.user import User
except ImportError as e:
    print(f"导入应用模块时出错: {e}")
    print("请检查以下几点:")
    print("1. 您是否在 'PsychologyAnalysis' 目录下运行此脚本。")
    print("2. 必要的文件（如 app/db/session.py, app/crud/user.py, app/models/user.py, app/schemas/user.py）是否存在。")
    print("3. requirements.txt 中的所有依赖项是否已在您的环境中安装。")
    print("4. CRUD 函数 (get_user_by_username, create_user) 是否已定义为 'async def'。")
    print("5. app/schemas/__init__.py 是否正确导出了 UserCreate。")
    sys.exit(1)
except Exception as e:
     print(f"导入过程中发生意外错误: {e}")
     sys.exit(1)
# ------------------------

# --- 配置日志 ---
APP_LOGGER_NAME = settings.APP_NAME or "QingtingzheApp"
logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(name)s - %(levelname)s - %(message)s')
logger = logging.getLogger(APP_LOGGER_NAME)
# ----------------

async def create_tables():
    """异步创建数据库表（如果尚不存在）"""
    logger.info("正在异步初始化数据库表...")
    try:
        async with async_engine.begin() as conn:
            # Base.metadata 包含了所有继承自 Base 的模型信息
            await conn.run_sync(Base.metadata.create_all)
        logger.info("数据库表已确认/创建成功。")
    except Exception as e:
        logger.error(f"创建数据库表时出错: {e}", exc_info=True)
        print(f"错误：无法创建数据库表。正在退出。错误: {e}")
        sys.exit(1)

async def create_user_interactively(db: AsyncSession) -> None:
    """交互式地获取用户信息并异步创建初始用户。"""
    logger.info("--- 正在创建初始用户 ---")

    while True:
        username = input("输入用户名: ").strip()
        if not username:
            print("用户名不能为空。")
            continue
        # 调用异步 CRUD 函数获取用户
        existing_user = await get_user_by_username(db, username=username)
        if existing_user:
            print(f"用户名 '{username}' 已存在。请选择其他用户名。")
        else:
            break

    email_str = input(f"为 {username} 输入邮箱 (可选, 直接按 Enter 跳过): ").strip()
    email = email_str if email_str else None
    full_name = input(f"为 {username} 输入全名 (可选, 直接按 Enter 跳过): ").strip() or None

    while True:
        password = getpass("输入密码 (最少6位): ")
        if len(password) < 6:
            print("密码太短 (最少6位)。")
            continue
        password_confirm = getpass("确认密码: ")
        if password != password_confirm:
            print("两次输入的密码不匹配，请重试。")
        else:
            break

    is_superuser_input = input("是否将此用户设为超级用户? (y/N): ").strip().lower()
    is_superuser = True if is_superuser_input == 'y' else False

    # 使用 Pydantic schema 准备用户数据
    user_in = UserCreate( # <-- 直接使用导入的 UserCreate
        username=username,
        email=email,
        full_name=full_name,
        password=password, # 传递明文密码，哈希在 crud.create_user 中完成
        is_superuser=is_superuser,
        is_active=True # 初始用户通常是激活的
    )

    try:
        logger.info(f"尝试创建用户: {user_in.username} (超级用户: {is_superuser})")
        # --- 关键修改：使用正确的关键字参数名 ---
        # created_user = await create_user(db=db, user=user_in) # 旧的，错误的调用
        created_user = await create_user(db=db, user_in=user_in) # <--- 使用 'user_in='
        # -----------------------------------------
        logger.info(f"成功创建用户: '{created_user.username}' (ID: {created_user.id})")
        print(f"\n用户 '{created_user.username}' 创建成功!")
    except ValueError as ve: # 捕获来自 CRUD 的特定错误 (如重复用户)
         logger.error(f"创建用户 '{username}' 失败: {ve}")
         print(f"\n错误：无法创建用户。{ve}")
    except Exception as e:
        logger.error(f"创建用户 '{username}' 时发生意外错误: {e}", exc_info=True)
        print(f"\n错误：发生意外错误: {e}")


async def main():
    """主异步执行函数"""
    await create_tables() # 先确保表存在

    logger.info("正在创建数据库会话...")
    # 正确使用异步会话上下文管理器
    async with AsyncSessionLocal() as session:
        await create_user_interactively(session)

    logger.info("脚本执行完毕。")


if __name__ == "__main__":
    print("开始执行用户创建脚本...")
    try:
        # 运行主异步函数
        asyncio.run(main())
    except KeyboardInterrupt:
         print("\n用户中断了脚本执行。")
    except Exception as e:
         print(f"\n在顶层发生意外错误: {e}")
         traceback.print_exc() # 打印完整的错误堆栈

================================================================================

--- File: PsychologyAnalysis\create_structure.bat ---
@echo off
setlocal

echo Creating project structure...
echo.

REM === Create Root Folder ===
IF NOT EXIST "QingtingzheFullProject" (
    mkdir "QingtingzheFullProject"
    echo Created: QingtingzheFullProject
) ELSE (
    echo Exists: QingtingzheFullProject
)
pushd "QingtingzheFullProject"

REM === Create PsychologyAnalysis Structure ===
IF NOT EXIST "PsychologyAnalysis" (
    mkdir "PsychologyAnalysis"
    echo   Created: PsychologyAnalysis
) ELSE (
    echo   Exists: PsychologyAnalysis
)
pushd "PsychologyAnalysis"

IF NOT EXIST "config" mkdir "config" && echo     Created: config || echo     Exists: config
IF NOT EXIST "input" mkdir "input" && echo     Created: input || echo     Exists: input
pushd "input"
IF NOT EXIST "images" mkdir "images" && echo       Created: images || echo       Exists: images
IF NOT EXIST "questionnaires" mkdir "questionnaires" && echo       Created: questionnaires || echo       Exists: questionnaires
popd

IF NOT EXIST "logs" mkdir "logs" && echo     Created: logs || echo     Exists: logs
IF NOT EXIST "output" mkdir "output" && echo     Created: output || echo     Exists: output
pushd "output"
IF NOT EXIST "descriptions" mkdir "descriptions" && echo       Created: descriptions || echo       Exists: descriptions
IF NOT EXIST "reports" mkdir "reports" && echo       Created: reports || echo       Exists: reports
popd

IF NOT EXIST "src" mkdir "src" && echo     Created: src || echo     Exists: src
pushd "src"
IF NOT EXIST "__pycache__" mkdir "__pycache__" && echo       Created: __pycache__ || echo       Exists: __pycache__
popd

IF NOT EXIST "templates" mkdir "templates" && echo     Created: templates || echo     Exists: templates
pushd "templates"
IF NOT EXIST "static" mkdir "static" && echo       Created: static || echo       Exists: static
popd

IF NOT EXIST "uploads" mkdir "uploads" && echo     Created: uploads || echo     Exists: uploads
IF NOT EXIST "__pycache__" mkdir "__pycache__" && echo     Created: __pycache__ || echo     Exists: __pycache__
IF NOT EXIST "文档部分" (
    mkdir "文档部分"
    echo     Created: 文档部分
) ELSE (
    echo     Exists: 文档部分
)
REM --- Placeholder for files inside PsychologyAnalysis (optional, creates empty files) ---
REM IF NOT EXIST "app.py" type nul > "app.py" && echo     Created file: app.py
REM IF NOT EXIST "config.yaml" type nul > "config.yaml" && echo     Created file: config.yaml
REM IF NOT EXIST "requirements.txt" type nul > "requirements.txt" && echo     Created file: requirements.txt
REM IF NOT EXIST "data_handler.py" type nul > "data_handler.py" && echo     Created file: data_handler.py
REM IF NOT EXIST "ai_utils.py" type nul > "ai_utils.py" && echo     Created file: ai_utils.py
REM IF NOT EXIST "templates\app_prototype_form.html" type nul > "templates\app_prototype_form.html" && echo     Created file: templates\app_prototype_form.html
REM IF NOT EXIST "templates\report_prototype.html" type nul > "templates\report_prototype.html" && echo     Created file: templates\report_prototype.html
REM IF NOT EXIST "templates\error.html" type nul > "templates\error.html" && echo     Created file: templates\error.html

popd REM Exit PsychologyAnalysis

REM === Create AndroidAppPrototype Structure ===
IF NOT EXIST "AndroidAppPrototype" (
    mkdir "AndroidAppPrototype"
    echo   Created: AndroidAppPrototype
) ELSE (
    echo   Exists: AndroidAppPrototype
)
pushd "AndroidAppPrototype"

IF NOT EXIST "app" mkdir "app" && echo     Created: app || echo     Exists: app
pushd "app"
IF NOT EXIST "libs" mkdir "libs" && echo       Created: libs || echo       Exists: libs
IF NOT EXIST "src" mkdir "src" && echo       Created: src || echo       Exists: src
pushd "src"
IF NOT EXIST "androidTest" mkdir "androidTest" && echo         Created: androidTest || echo         Exists: androidTest
IF NOT EXIST "main" mkdir "main" && echo         Created: main || echo         Exists: main
pushd "main"
IF NOT EXIST "java" mkdir "java" && echo           Created: java || echo           Exists: java
pushd "java"
IF NOT EXIST "com" mkdir "com" && echo             Created: com || echo             Exists: com
pushd "com"
IF NOT EXIST "example" mkdir "example" && echo               Created: example || echo               Exists: example
pushd "example"
IF NOT EXIST "qingtingzheproto" mkdir "qingtingzheproto" && echo                 Created: qingtingzheproto || echo                 Exists: qingtingzheproto
popd
popd
popd
popd REM Exit java path
IF NOT EXIST "res" mkdir "res" && echo           Created: res || echo           Exists: res
pushd "res"
IF NOT EXIST "drawable" mkdir "drawable" && echo             Created: drawable || echo             Exists: drawable
IF NOT EXIST "layout" mkdir "layout" && echo             Created: layout || echo             Exists: layout
IF NOT EXIST "mipmap" mkdir "mipmap" && echo             Created: mipmap || echo             Exists: mipmap
IF NOT EXIST "values" mkdir "values" && echo             Created: values || echo             Exists: values
IF NOT EXIST "xml" mkdir "xml" && echo             Created: xml || echo             Exists: xml
popd
popd REM Exit main
IF NOT EXIST "test" mkdir "test" && echo         Created: test || echo         Exists: test
popd REM Exit src
popd REM Exit app

IF NOT EXIST "gradle" mkdir "gradle" && echo     Created: gradle || echo     Exists: gradle
pushd "gradle"
IF NOT EXIST "wrapper" mkdir "wrapper" && echo       Created: wrapper || echo       Exists: wrapper
popd

popd REM Exit AndroidAppPrototype

popd REM Exit QingtingzheFullProject

echo.
echo Structure creation process complete.
echo Check the directory you ran this script from for 'QingtingzheFullProject'.

endlocal

================================================================================

--- File: PsychologyAnalysis\find _token.py ---
import dashscope
from dashscope import Account

# 配置您的API Key
dashscope.api_key = 'sk-0ffc64dd9d614c0088ee28e3a072420a'

# 查询账户信息
account = Account()
balance = account.get_balance()
print(balance)

================================================================================

--- File: PsychologyAnalysis\main.py ---
# 文件路径: main.py
import os
import yaml
import sqlite3
import json
from concurrent.futures import ThreadPoolExecutor, as_completed  # 新增导入
from src.image_processor import ImageProcessor
from src.report_generator import ReportGenerator
from src.data_handler import DataHandler
from src.utils import setup_logging

def process_single_task(image_path, image_processor, report_generator, data_handler, logger):
    """处理单个图片和量表数据的分析任务"""
    logger.info(f"开始处理图片: {image_path}")
    try:
        # 处理图片
        description = image_processor.process_image(image_path)
        desc_file = os.path.join(os.path.dirname(os.path.abspath(__file__)), 
                               f"output/descriptions/{os.path.splitext(os.path.basename(image_path))[0]}_desc.txt")
        os.makedirs(os.path.dirname(desc_file), exist_ok=True)
        with open(desc_file, "w", encoding='utf-8') as f:
            f.write(description)
        logger.info(f"图片描述已保存至: {desc_file}")

        # 加载数据
        subject_info, questionnaire_type, questionnaire_data = data_handler.load_data_by_image(image_path)
        if not subject_info:
            logger.warning(f"图片 {image_path} 无对应量表数据，仅保存描述")
            return

        # 计算得分并生成报告
        score = calculate_score(questionnaire_type, questionnaire_data)
        report = report_generator.generate_report(description, questionnaire_data, subject_info, questionnaire_type, score)
        report_file = os.path.join(os.path.dirname(os.path.abspath(__file__)), 
                                 f"output/reports/{os.path.splitext(os.path.basename(image_path))[0]}_report.txt")
        os.makedirs(os.path.dirname(report_file), exist_ok=True)
        with open(report_file, "w", encoding='utf-8') as f:
            f.write(report)
        logger.info(f"报告已保存至: {report_file}")
    except Exception as e:
        logger.error(f"处理 {image_path} 时出错: {str(e)}")

def main(image_paths=None, max_workers=4):
    logger = setup_logging()
    logger.info("心理学图像和数据分析项目启动（并发模式）")

    project_root = os.path.dirname(os.path.abspath(__file__))
    os.chdir(project_root)
    config_path = os.path.join(project_root, "config/config.yaml")
    with open(config_path, "r", encoding='utf-8') as f:
        config = yaml.safe_load(f)

    # 初始化处理器
    image_processor = ImageProcessor(config)
    report_generator = ReportGenerator(config)
    data_handler = DataHandler(db_path=os.path.join(project_root, "psychology_analysis.db"))

    # 如果没有指定图片路径，处理 input/images 目录下的所有图片
    if not image_paths:
        image_dir = os.path.join(project_root, "input/images")
        image_paths = [os.path.join(image_dir, f) for f in os.listdir(image_dir) if f.lower().endswith(('.jpg', '.jpeg', '.png'))]
        logger.info(f"未指定图片路径，将处理目录 {image_dir} 中的所有图片: {len(image_paths)} 张")

    if not image_paths:
        logger.warning("没有找到任何图片需要处理")
        return

    # 使用线程池并发处理
    with ThreadPoolExecutor(max_workers=max_workers) as executor:
        # 提交所有任务
        future_to_image = {executor.submit(process_single_task, image_path, image_processor, report_generator, data_handler, logger): image_path 
                         for image_path in image_paths}
        
        # 处理完成的任务
        for future in as_completed(future_to_image):
            image_path = future_to_image[future]
            try:
                future.result()  # 获取结果，如果有异常会抛出
                logger.info(f"任务完成: {image_path}")
            except Exception as e:
                logger.error(f"任务 {image_path} 执行失败: {str(e)}")

def calculate_score(questionnaire_type, questionnaire_data):
    """根据量表类型计算总分"""
    scores = [int(value) for value in questionnaire_data.values()]
    total_score = sum(scores)
    return total_score

if __name__ == "__main__":
    # 示例：可以传入特定图片路径列表
    specific_images = [
        os.path.join(os.path.dirname(os.path.abspath(__file__)), "input/images/TestPic.jpg"),
        os.path.join(os.path.dirname(os.path.abspath(__file__)), "input/images/testpic1.jpg")
    ]
    main(image_paths=specific_images, max_workers=4)  # 设置最大线程数为4
    # 或不指定图片路径，处理所有图片
    # main(max_workers=4)

================================================================================

--- File: PsychologyAnalysis\requirements.txt ---
# requirements.txt

# FastAPI Core
fastapi>=0.100.0
uvicorn[standard]>=0.22.0

# Configuration & Environment
pydantic-settings>=2.0.0
python-dotenv>=1.0.0
pyyaml>=6.0

# Database
sqlalchemy>=2.0.0
aiosqlite >= 0.17.0 # For async SQLite access
alembic>=1.7.0

# Security
python-jose[cryptography]>=3.3.0
passlib[bcrypt]>=1.7.4

# HTTP Client & File Uploads
requests>=2.28.1
httpx>=0.24.1
python-multipart>=0.0.7
Werkzeug>=2.0.0 # Secure filename utility

# AI Integration
openai>=1.30.1

# Celery (Background Tasks)
celery>=5.0.0
# 使用 redis[hiredis] >= 5.0.0 来确保包含 redis.asyncio 并获得性能提升
redis[hiredis]>=5.0.0 # Using hiredis for performance, requires redis-py >= 5.0 for Celery 5+ compatibility

# Server-Sent Events (SSE)
sse-starlette>=1.0.0 # 确保这一行存在

# Pydantic (Base for Settings and Schemas)
# 确保 pydantic 版本与 FastAPI 和 Pydantic-Settings 兼容
pydantic[email]>=2.0.0

# Jinja2 (If needed for any template rendering)
jinja2>=3.0.0

# --- 注意：移除了文件末尾重复的 sse-starlette 和 redis>=4.2.0 行 ---
# --- 确保上面列出的 redis[hiredis] 和 sse-starlette 是你需要的唯一条目 ---

================================================================================

--- File: PsychologyAnalysis\run_celery_worker.py ---
# run_celery_worker.py
import os
import sys

# --- 1. 定位项目根目录 ---
# __file__ 指向这个脚本文件 (run_celery_worker.py)
# os.path.dirname(__file__) 指向项目根目录 (PsychologyAnalysis/)
PROJECT_ROOT = os.path.dirname(os.path.abspath(__file__))
print(f"[Worker Start Script] Project Root detected: {PROJECT_ROOT}")

# --- 2. 将项目根目录添加到 sys.path ---
# 这样 Celery 启动时就能找到 app 和 src 包
if PROJECT_ROOT not in sys.path:
    sys.path.insert(0, PROJECT_ROOT)
    print(f"[Worker Start Script] Added {PROJECT_ROOT} to sys.path")
else:
    print(f"[Worker Start Script] {PROJECT_ROOT} already in sys.path")

# --- 3. 导入 Celery App 实例 ---
# 现在可以安全地导入了
try:
    from app.core.celery_app import celery_app
    print("[Worker Start Script] Successfully imported celery_app")
except ImportError as e:
    print(f"[Worker Start Script] CRITICAL ERROR: Could not import celery_app: {e}")
    print("Please ensure app/core/celery_app.py exists and dependencies are installed.")
    sys.exit(1)
except Exception as e:
     print(f"[Worker Start Script] CRITICAL ERROR during celery_app import: {e}")
     sys.exit(1)


# --- 4. (可选) 加载 .env 文件 (如果 Celery 任务需要直接访问环境变量) ---
# Celery worker 默认不一定加载 .env。如果你的任务代码 (如 ai_utils)
# 需要读取 .env 中的变量 (除了 Pydantic Settings 已经加载的)，
# 在这里加载它。
# from dotenv import load_dotenv
# dotenv_path = os.path.join(PROJECT_ROOT, '.env')
# if os.path.exists(dotenv_path):
#     load_dotenv(dotenv_path=dotenv_path)
#     print(f"[Worker Start Script] Loaded environment variables from: {dotenv_path}")
# else:
#     print("[Worker Start Script] .env file not found, skipping dotenv load.")


# --- 5. 准备 Celery Worker 的命令行参数 ---
# 你可以在这里定义参数，或者从命令行读取
worker_args = [
    'worker',             # 命令
    '--loglevel=info',    # 日志级别
    # '-P', 'solo',       # 在 Windows 上需要添加这个参数
    # '-c', '4',          # (可选) 并发数 (Linux/macOS)
    # '--pool=prefork',   # (可选) 进程池类型 (Linux/macOS 默认)
]

# --- 针对 Windows 添加 solo 进程池 ---
if sys.platform == "win32":
     if '-P' not in worker_args and '--pool' not in worker_args:
         print("[Worker Start Script] Windows detected, adding '-P solo' argument.")
         worker_args.extend(['-P', 'solo'])

# --- 6. 执行 Celery Worker 命令 ---
print(f"[Worker Start Script] Starting Celery worker with args: {worker_args}")
# 使用 celery_app.worker_main 来启动 worker，它会处理命令行参数
celery_app.worker_main(argv=worker_args)

================================================================================

--- File: PsychologyAnalysis\alembic\README ---
Generic single-database configuration.

1.
alembic revision --autogenerate -m "Create users table and add submitter_id fk"
2.
alembic upgrade head

================================================================================

--- File: PsychologyAnalysis\alembic\env.py ---
# FILE: alembic/env.py (修改后，启用 batch mode)
import os
import sys
from logging.config import fileConfig

from sqlalchemy import engine_from_config
from sqlalchemy import pool
# +++ 确保导入了 sqlalchemy +++
import sqlalchemy

from alembic import context

# +++ 添加这部分来设置路径和导入你的应用模块 +++
# 1. 计算项目根目录 (PROJECT_ROOT)
#    确保你的项目结构是 PsychologyAnalysis/alembic/env.py
try:
    # This assumes the env.py file is in PsychologyAnalysis/alembic/
    PROJECT_ROOT = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
except NameError: # Fallback if __file__ is not defined
    PROJECT_ROOT = os.path.abspath(os.path.join(os.getcwd(), '.'))
    print(f"警告: __file__ 未定义, 假设项目根目录是当前工作目录: {PROJECT_ROOT}")

# 2. 将项目根目录添加到 sys.path，这样 Python 就能找到 'app' 包
if PROJECT_ROOT not in sys.path:
    sys.path.insert(0, PROJECT_ROOT)
    print(f"[Alembic env.py] 已添加项目根目录到 sys.path: {PROJECT_ROOT}")
else:
    print(f"[Alembic env.py] 项目根目录已在 sys.path 中: {PROJECT_ROOT}")


# 3. 从你的应用导入 settings, Base, 和所有模型
try:
    # 导入配置
    from app.core.config import settings
    # 导入 SQLAlchemy Base
    from app.db.base_class import Base
    # +++ 显式导入所有需要被 Alembic 管理的模型 +++
    from app.models.user import User           # 导入 User 模型
    from app.models.assessment import Assessment # 导入 Assessment 模型
    from app.models.interrogation import InterrogationRecord # 导入审讯记录模型
    # 如果还有其他模型，也在这里导入:
    # from app.models.questionnaire import QuestionnaireQuestion # <--- 如果你决定保留并为其创建模型
    print("[Alembic env.py] 成功导入 settings, Base, 和模型 (User, Assessment, InterrogationRecord).") # 更新日志
except ImportError as e:
    print(f"[Alembic env.py] 导入应用模块时出错: {e}")
    print(f"请确认项目根目录 ({PROJECT_ROOT}) 是否正确，并且包含 'app' 包及其子模块 "
          f"(core.config, db.base_class, models.user, models.assessment, models.interrogation)。")
    sys.exit(1)
except Exception as e_import:
     print(f"[Alembic env.py] 在导入期间发生意外错误: {e_import}")
     sys.exit(1)
# --- 添加结束 ---


# 这是 Alembic 配置对象，提供对 .ini 文件值的访问
config = context.config

# 解析配置文件以进行 Python 日志记录。
# 这行代码基本上是设置日志记录器。
if config.config_file_name is not None:
    try:
        fileConfig(config.config_file_name)
        print(f"[Alembic env.py] 已从以下文件配置日志记录: {config.config_file_name}")
    except Exception as e_log:
        # 如果日志配置失败则避免崩溃，仅发出警告
        print(f"[Alembic env.py] 警告: 无法从 {config.config_file_name} 配置日志记录: {e_log}")


# 在这里添加你的模型的 MetaData 对象
# 以支持 'autogenerate'
# from myapp import mymodel
# target_metadata = mymodel.Base.metadata

# +++ 设置 Alembic 需要知道的模型元数据 (现在包含了导入的所有模型) +++
print(f"[Alembic env.py] 从 {Base.__module__}.Base 设置 target_metadata")
target_metadata = Base.metadata
# --- 设置结束 ---

# +++ (可选) 调试代码，打印已注册的表名 +++
try:
    known_tables = list(target_metadata.tables.keys())
    print(f"[Alembic env.py] DEBUG: 在比较前，Base.metadata 中注册的表: {known_tables}")
except Exception as e_debug:
    print(f"[Alembic env.py] DEBUG: 获取元数据中的表名时出错: {e_debug}")
# +++ 调试代码结束 +++

# 从配置中获取的其他值，由 env.py 的需求定义，
# 可以这样获取:
# my_important_option = config.get_main_option("my_important_option")
# ... 等等。


def get_sync_database_url() -> str:
    """从设置中获取数据库 URL，并确保其对于 Alembic 是同步的。"""
    url = settings.DATABASE_URL
    # 将异步 sqlite 驱动替换为同步驱动
    if url and url.startswith("sqlite+aiosqlite"):
        sync_url = url.replace("sqlite+aiosqlite", "sqlite", 1)
        # print(f"[Alembic env.py] 为 Alembic 转换的数据库 URL: {sync_url}") # 减少冗余输出
        return sync_url
    # 如果需要，为其他异步驱动添加类似的替换
    # elif url and url.startswith("postgresql+asyncpg"):
    #     return url.replace("postgresql+asyncpg", "postgresql", 1)
    # print(f"[Alembic env.py] 为 Alembic 按原样使用数据库 URL: {url}") # 减少冗余输出
    return url # 如果未找到已知的异步驱动，则返回原始 URL


def run_migrations_offline() -> None:
    """在 'offline' 模式下运行迁移。"""
    sync_url = get_sync_database_url() # 获取可能修改过的同步 URL
    print(f"[Alembic env.py] 使用 URL 配置离线模式: {sync_url}")

    context.configure(
        url=sync_url,
        target_metadata=target_metadata,
        literal_binds=True, # 推荐用于脚本生成
        dialect_opts={"paramstyle": "named"},
        compare_type=True, # 启用类型比较
        compare_server_default=True, # 启用服务器默认值比较
        render_as_batch=True # <--- *** 在离线模式下也启用 Batch Mode ***
    )

    with context.begin_transaction():
        context.run_migrations()
    print("[Alembic env.py] 离线模式迁移完成。")


def run_migrations_online() -> None:
    """在 'online' 模式下运行迁移。"""
    # 获取同步 URL
    sync_url = get_sync_database_url()
    # 在 Alembic 配置对象中设置同步 URL，覆盖 alembic.ini
    config.set_main_option("sqlalchemy.url", sync_url)
    print(f"[Alembic env.py] 已将在线模式的 sqlalchemy.url 设置为: {sync_url}")

    try:
        # 使用配置中的同步 URL 创建引擎
        connectable = engine_from_config(
            config.get_section(config.config_ini_section, {}),
            prefix="sqlalchemy.",
            poolclass=pool.NullPool, # 迁移时使用 NullPool
        )
        # print("[Alembic env.py] 在线模式的同步引擎创建成功。") # 减少冗余输出
    except Exception as e_engine:
         print(f"[Alembic env.py] 从配置创建同步引擎时出错: {e_engine}")
         sys.exit(1)

    # 使用同步引擎连接
    with connectable.connect() as connection:
        # print("[Alembic env.py] 在线模式的同步连接已建立。") # 减少冗余输出
        # 配置上下文，使用连接和元数据
        context.configure(
            connection=connection,
            target_metadata=target_metadata,
            compare_type=True,            # 比较列类型
            compare_server_default=True,  # 比较服务器默认值
            # include_schemas=True, # 如果使用 PG schemas，取消注释
            render_as_batch=True # <--- *** 确保在线模式也启用 Batch Mode ***
        )
        # print("[Alembic env.py] 在线模式的上下文已配置。") # 减少冗余输出

        # 在事务中运行迁移
        try:
            print("[Alembic env.py] 开始事务并运行迁移...")
            with context.begin_transaction():
                context.run_migrations()
            print("[Alembic env.py] 迁移在事务中成功运行。")
        except Exception as e_migrate:
             print(f"[Alembic env.py] 运行迁移时出错: {e_migrate}")
             # 如果你希望命令明确失败，可以考虑重新抛出异常
             # raise e_migrate
        finally:
            # 连接会在 'with' 块结束时自动关闭
            pass


# --- 判断模式并运行 ---
if context.is_offline_mode():
    print("[Alembic env.py] 在离线模式下运行迁移。")
    run_migrations_offline()
else:
    print("[Alembic env.py] 在在线模式下运行迁移。")
    run_migrations_online()

print("[Alembic env.py] 脚本执行完毕。")

================================================================================

--- File: PsychologyAnalysis\alembic\versions\269625ee49fe_add_status_column_to_assessment_table.py ---
"""Add status column to Assessment table

Revision ID: 269625ee49fe
Revises: 72143d5034d8
Create Date: 2025-04-25 23:48:19.299356

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision: str = '269625ee49fe'
down_revision: Union[str, None] = '72143d5034d8'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    # op.drop_table('questionnaire_questions')
    op.add_column('analysis_data', sa.Column('status', sa.String(length=30), server_default='pending', nullable=False))
    op.create_index(op.f('ix_analysis_data_status'), 'analysis_data', ['status'], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_analysis_data_status'), table_name='analysis_data')
    op.drop_column('analysis_data', 'status')
    op.create_table('questionnaire_questions',
    sa.Column('id', sa.INTEGER(), nullable=True),
    sa.Column('questionnaire_type', sa.TEXT(), nullable=False),
    sa.Column('question_number', sa.INTEGER(), nullable=False),
    sa.Column('question_text', sa.TEXT(), nullable=False),
    sa.Column('options', sa.TEXT(), nullable=False),
    sa.Column('scale_name', sa.TEXT(), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('questionnaire_type', 'question_number')
    )
    # ### end Alembic commands ###


================================================================================

--- File: PsychologyAnalysis\alembic\versions\5976b03ee0fc_create_interrogation_records_table.py ---
"""Create interrogation_records table

Revision ID: 5976b03ee0fc
Revises: 269625ee49fe
Create Date: 2025-05-08 18:39:41.402219

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision: str = '5976b03ee0fc'
down_revision: Union[str, None] = '269625ee49fe'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('interrogation_records',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('interrogator_id', sa.Integer(), nullable=False),
    sa.Column('basic_info', sa.JSON(), nullable=True),
    sa.Column('qas', sa.JSON(), nullable=True),
    sa.Column('status', sa.String(length=50), nullable=False),
    sa.Column('full_text', sa.Text(), nullable=True),
    sa.Column('created_at', sa.TIMESTAMP(), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.Column('updated_at', sa.TIMESTAMP(), server_default=sa.text('(CURRENT_TIMESTAMP)'), nullable=False),
    sa.ForeignKeyConstraint(['interrogator_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_interrogation_records_id'), 'interrogation_records', ['id'], unique=False)
    op.create_index(op.f('ix_interrogation_records_interrogator_id'), 'interrogation_records', ['interrogator_id'], unique=False)
    op.create_index(op.f('ix_interrogation_records_status'), 'interrogation_records', ['status'], unique=False)
    op.drop_table('questionnaire_questions')
    op.alter_column('analysis_data', 'created_at',
               existing_type=sa.TIMESTAMP(),
               nullable=False,
               existing_server_default=sa.text('(CURRENT_TIMESTAMP)'))
    op.alter_column('analysis_data', 'updated_at',
               existing_type=sa.TIMESTAMP(),
               nullable=False,
               existing_server_default=sa.text('(CURRENT_TIMESTAMP)'))
    op.alter_column('analysis_data', 'criminal_record',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.create_index(op.f('ix_analysis_data_submitter_id'), 'analysis_data', ['submitter_id'], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_analysis_data_submitter_id'), table_name='analysis_data')
    op.alter_column('analysis_data', 'criminal_record',
               existing_type=sa.INTEGER(),
               nullable=True)
    op.alter_column('analysis_data', 'updated_at',
               existing_type=sa.TIMESTAMP(),
               nullable=True,
               existing_server_default=sa.text('(CURRENT_TIMESTAMP)'))
    op.alter_column('analysis_data', 'created_at',
               existing_type=sa.TIMESTAMP(),
               nullable=True,
               existing_server_default=sa.text('(CURRENT_TIMESTAMP)'))
    op.create_table('questionnaire_questions',
    sa.Column('id', sa.INTEGER(), nullable=True),
    sa.Column('questionnaire_type', sa.TEXT(), nullable=False),
    sa.Column('question_number', sa.INTEGER(), nullable=False),
    sa.Column('question_text', sa.TEXT(), nullable=False),
    sa.Column('options', sa.TEXT(), nullable=False),
    sa.Column('scale_name', sa.TEXT(), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('questionnaire_type', 'question_number')
    )
    op.drop_index(op.f('ix_interrogation_records_status'), table_name='interrogation_records')
    op.drop_index(op.f('ix_interrogation_records_interrogator_id'), table_name='interrogation_records')
    op.drop_index(op.f('ix_interrogation_records_id'), table_name='interrogation_records')
    op.drop_table('interrogation_records')
    # ### end Alembic commands ###


================================================================================

--- File: PsychologyAnalysis\alembic\versions\72143d5034d8_create_users_table.py ---
"""Create users table

Revision ID: 72143d5034d8
Revises: 
Create Date: 2025-04-24 15:06:06.038114

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision: str = '72143d5034d8'
down_revision: Union[str, None] = None
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    pass


def downgrade() -> None:
    """Downgrade schema."""
    pass


================================================================================

--- File: PsychologyAnalysis\alembic\versions\a43553c2237e_add_attributes_and_assessment_.py ---
"""Add attributes and assessment_attributes tables

Revision ID: a43553c2237e
Revises: 5976b03ee0fc
Create Date: 2025-05-08 19:19:08.492623

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision: str = 'a43553c2237e'
down_revision: Union[str, None] = '5976b03ee0fc'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('attributes',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=100), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('category', sa.String(length=50), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    with op.batch_alter_table('attributes', schema=None) as batch_op:
        batch_op.create_index(batch_op.f('ix_attributes_category'), ['category'], unique=False)
        batch_op.create_index(batch_op.f('ix_attributes_id'), ['id'], unique=False)
        batch_op.create_index(batch_op.f('ix_attributes_name'), ['name'], unique=True)

    op.create_table('assessment_attributes',
    sa.Column('assessment_id', sa.Integer(), nullable=False),
    sa.Column('attribute_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['assessment_id'], ['analysis_data.id'], ),
    sa.ForeignKeyConstraint(['attribute_id'], ['attributes.id'], ),
    sa.PrimaryKeyConstraint('assessment_id', 'attribute_id')
    )
    with op.batch_alter_table('analysis_data', schema=None) as batch_op:
        batch_op.alter_column('created_at',
               existing_type=sa.TIMESTAMP(),
               nullable=False,
               existing_server_default=sa.text('(CURRENT_TIMESTAMP)'))
        batch_op.alter_column('updated_at',
               existing_type=sa.TIMESTAMP(),
               nullable=False,
               existing_server_default=sa.text('(CURRENT_TIMESTAMP)'))
        batch_op.alter_column('criminal_record',
               existing_type=sa.INTEGER(),
               nullable=False)
        batch_op.create_index(batch_op.f('ix_analysis_data_submitter_id'), ['submitter_id'], unique=False)

    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('analysis_data', schema=None) as batch_op:
        batch_op.drop_index(batch_op.f('ix_analysis_data_submitter_id'))
        batch_op.alter_column('criminal_record',
               existing_type=sa.INTEGER(),
               nullable=True)
        batch_op.alter_column('updated_at',
               existing_type=sa.TIMESTAMP(),
               nullable=True,
               existing_server_default=sa.text('(CURRENT_TIMESTAMP)'))
        batch_op.alter_column('created_at',
               existing_type=sa.TIMESTAMP(),
               nullable=True,
               existing_server_default=sa.text('(CURRENT_TIMESTAMP)'))

    op.drop_table('assessment_attributes')
    with op.batch_alter_table('attributes', schema=None) as batch_op:
        batch_op.drop_index(batch_op.f('ix_attributes_name'))
        batch_op.drop_index(batch_op.f('ix_attributes_id'))
        batch_op.drop_index(batch_op.f('ix_attributes_category'))

    op.drop_table('attributes')
    # ### end Alembic commands ###


================================================================================

--- File: PsychologyAnalysis\app\__init__.py ---
# # FILE: app/crud/__init__.py (Corrected)
# from . import user      # 导入 user.py 中的内容
# from . import assessment # +++ 添加这一行，导入 assessment.py 中的内容 +++


================================================================================

--- File: PsychologyAnalysis\app\main.py ---
# 文件路径: PsychologyAnalysis/app/main.py

# --- 标准库和第三方库导入 ---
import sys
import os
import logging
import traceback
from fastapi import FastAPI, Request
from fastapi.middleware.cors import CORSMiddleware
from fastapi.staticfiles import StaticFiles
from fastapi.responses import FileResponse, Response

# --- 1. 添加项目根目录到系统路径 ---
# 这一步至关重要，确保所有模块都能被正确找到
CURRENT_DIR = os.path.dirname(os.path.abspath(__file__))
PROJECT_ROOT = os.path.abspath(os.path.join(CURRENT_DIR, ".."))
if PROJECT_ROOT not in sys.path:
    sys.path.insert(0, PROJECT_ROOT)

# --- 2. 导入应用核心配置和工具函数 ---
try:
    from app.core.config import settings, parsed_cors_origins
    from src.utils import setup_logging
except ImportError as e:
    print(f"[启动错误] 无法导入核心配置或日志设置: {e}")
    traceback.print_exc()
    sys.exit(1)

# --- 3. 设置集中式日志系统 ---
APP_LOGGER_NAME = settings.APP_NAME or "PsychologyAnalysisApp"
try:
    log_dir = settings.LOGS_DIR
    if not os.path.exists(log_dir):
        os.makedirs(log_dir)
    
    setup_logging(
        log_level_str=settings.LOG_LEVEL,
        log_dir_name=os.path.basename(log_dir),
        log_dir_base_path=os.path.dirname(log_dir),
        logger_name=APP_LOGGER_NAME
    )
    logger = logging.getLogger(APP_LOGGER_NAME)
    logger.info("=" * 50)
    logger.info("--- 启动 FastAPI 应用 ---")
    logger.info(f"日志系统 '{APP_LOGGER_NAME}' 配置成功。级别: {settings.LOG_LEVEL}, 目录: {settings.LOGS_DIR}")
except Exception as e:
    logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(name)s - %(levelname)s - %(message)s')
    logger = logging.getLogger(APP_LOGGER_NAME)
    logger.critical(f"[启动错误] 日志系统设置失败: {e}。将使用基础配置。", exc_info=True)

# --- 4. 导入所有API路由模块 ---
try:
    from app.routers import scales, assessments, reports, auth, encyclopedia, sse, admin
    logger.info("所有API路由模块 (scales, assessments, reports, auth, encyclopedia, sse, admin) 导入成功。")
except ImportError as e:
    logger.critical(f"[启动错误] 无法导入路由模块: {e}", exc_info=True)
    sys.exit(1)

# --- 5. 创建FastAPI应用实例 ---
app = FastAPI(
    title=settings.APP_NAME,
    description="倾听者AI智能警务分析评估应用系统 API",
    version="0.5.1", # 版本更新，体现路由修复
    openapi_url=f"{settings.API_V1_STR}/openapi.json",
    docs_url="/docs",
    redoc_url="/redoc",
)
logger.info(f"FastAPI应用 '{settings.APP_NAME}' 实例已创建。")
logger.info(f"API文档可在 /docs (Swagger UI) 或 /redoc (ReDoc) 访问。")

# --- 6. 配置CORS中间件 ---
if parsed_cors_origins:
    app.add_middleware(
        CORSMiddleware,
        allow_origins=parsed_cors_origins,
        allow_credentials=True,
        allow_methods=["*"],
        allow_headers=["*"],
    )
    logger.info(f"CORS中间件已启用，允许的来源: {parsed_cors_origins}")
else:
    logger.warning("CORS源列表为空，前端可能无法访问API。请检查.env文件中的 BACKEND_CORS_ORIGINS 设置。")


# --- 7. 包含所有API路由 (根据建议优化) ---
logger.info("开始注册API路由...")

# 认证路由 - 它内部已经定义了完整前缀 (如 /api/v1/auth)，所以这里不再添加
app.include_router(auth.router, tags=["认证 (Auth)"])
logger.info(f"已注册认证路由，根路径: {auth.router.prefix}")

# 其他应用路由，统一添加 /api/v1 前缀
app.include_router(scales.router, prefix=settings.API_V1_STR, tags=["量表 (Scales)"])
app.include_router(assessments.router, prefix=settings.API_V1_STR, tags=["评估 (Assessments)"])
app.include_router(reports.router, prefix=f"{settings.API_V1_STR}/reports", tags=["报告 (Reports)"])
app.include_router(encyclopedia.router, prefix=settings.API_V1_STR, tags=["心理百科 (Encyclopedia)"])

# 后台管理API路由，添加 /api/v1 前缀 (其内部已有 /admin 前缀)
app.include_router(admin.router, prefix=settings.API_V1_STR) # 最终路径: /api/v1/admin/...
logger.info(f"已注册后台管理API路由，根路径: {settings.API_V1_STR}{admin.router.prefix}")

# SSE事件流路由
app.include_router(sse.router, tags=["SSE 事件流"])

logger.info("所有API路由注册完成。")


# --- 8. 挂载后台管理静态文件 (Single Page Application) ---
# 这部分逻辑服务于Vue构建出的前端应用
ADMIN_FRONTEND_DIR = os.path.join(PROJECT_ROOT, "psychology-admin-frontend", "dist")

if os.path.isdir(ADMIN_FRONTEND_DIR):
    logger.info(f"找到后台管理前端构建目录: {ADMIN_FRONTEND_DIR}")
    
    # 将URL路径 /admin 挂载到指定的静态文件目录
    app.mount("/admin", StaticFiles(directory=ADMIN_FRONTEND_DIR, html=True), name="admin_static")
    logger.info(f"URL路径 '/admin' 已成功挂载到静态文件目录: {ADMIN_FRONTEND_DIR}")

    # 为解决SPA在子路由刷新时404的问题，添加一个回退路由
    @app.get("/admin/{full_path:path}")
    async def serve_admin_spa(request: Request, full_path: str):
        """
        当用户直接访问或刷新如 /admin/users 等子路由时，
        此函数会捕获请求并返回主 index.html 文件，让 Vue Router 接管前端路由。
        """
        index_path = os.path.join(ADMIN_FRONTEND_DIR, "index.html")
        if os.path.exists(index_path):
            logger.debug(f"后台管理SPA回退机制触发：为路径 '/admin/{full_path}' 提供 index.html")
            return FileResponse(index_path)
        else:
            logger.error(f"后台管理SPA回退失败: 主文件 'index.html' 在 '{ADMIN_FRONTEND_DIR}' 中未找到！")
            return Response(status_code=404, content="Admin application not found.")
else:
    logger.warning(f"后台管理前端目录未找到: {ADMIN_FRONTEND_DIR}")
    logger.warning("后台管理界面将无法通过 '/admin' 访问。请确保已执行前端构建命令 (如 npm run build)。")


# --- 9. 最终启动信息 ---
logger.info("=" * 50)
logger.info(f"FastAPI 应用 '{settings.APP_NAME}' 已完成配置并准备就绪。")
logger.info(f"当前环境: {settings.ENVIRONMENT}")
logger.info("服务已启动，等待接收请求...")
logger.info("=" * 50)


# --- 10. Uvicorn 开发服务器运行器 ---
# 此部分仅在直接运行 `python app/main.py` 时执行
if __name__ == "__main__":
    import uvicorn
    logger.info("检测到直接运行 main.py，将启动 Uvicorn 开发服务器...")
    
    run_host = getattr(settings, 'HOST', '0.0.0.0')
    try:
        run_port = int(os.environ.get('PORT', '8000'))
    except ValueError:
        run_port = 8000
        logger.warning(f"无效的PORT环境变量，使用默认端口 {run_port}。")

    # 仅在开发环境启用代码自动重载
    reload_flag = settings.ENVIRONMENT == "development"
    
    log_config_level = settings.LOG_LEVEL.lower()
    logger.info(f"服务器将在 http://{run_host}:{run_port} 上运行")
    logger.info(f"代码自动重载: {'启用' if reload_flag else '禁用'}")
    logger.info(f"Uvicorn 日志级别: {log_config_level}")

    try:
        uvicorn.run(
            "app.main:app",
            host=run_host,
            port=run_port,
            reload=reload_flag,
            log_level=log_config_level,
        )
    except Exception as e:
        logger.critical(f"[启动错误] 启动 Uvicorn 服务器失败: {e}", exc_info=True)
        sys.exit(1)

================================================================================

--- File: PsychologyAnalysis\app\core\__init__.py ---


================================================================================

--- File: PsychologyAnalysis\app\core\celery_app.py ---
# app/core/celery_app.py




from celery import Celery
from app.core.config import settings # 导入你的设置

# 配置 Redis 作为 Broker 和 Backend
# 使用 settings 中的配置或默认值
REDIS_URL = "redis://localhost:6379/0" # 默认 Redis 地址和数据库 0
# 你可以在 .env 中添加 REDIS_URL 并从 settings 加载

# 创建 Celery 实例
# main 参数通常是 Celery 应用的入口点名称，这里用 'app' 或项目名
celery_app = Celery(
    "QingtingzheApp", # 与 FastAPI app name 保持一致或自定义
    broker=REDIS_URL,
    backend=REDIS_URL, # 使用 Redis 作为结果存储后端
    include=['app.tasks.analysis'] # 指定包含任务定义的模块列表
)

# 可选：Celery 配置项 (可以放在 settings 或这里)
celery_app.conf.update(
    task_serializer='json',
    accept_content=['json'],  # Allow json content
    result_serializer='json',
    timezone='Asia/Shanghai', # 设置时区
    enable_utc=True,
    # task_track_started=True, # 如果需要追踪任务开始状态
    # broker_connection_retry_on_startup=True, # 启动时自动重试连接 broker
)

# 可选: 打印确认信息
print(f"[Celery Setup] Celery app configured. Broker: {REDIS_URL}, Backend: {REDIS_URL}")
print(f"[Celery Setup] Included task modules: {celery_app.conf.include}")

# 如果你需要在任务中使用 FastAPI 的依赖项或设置，
# 可以考虑更复杂的设置，但现在保持简单。

================================================================================

--- File: PsychologyAnalysis\app\core\config.py ---
# app/core/config.py
import os
import sys
import json
from typing import List, Union, Optional, Dict, Any
from pydantic_settings import BaseSettings, SettingsConfigDict
import yaml
import logging
import traceback

# --- Basic Logging Setup (用于配置加载本身) ---
# 获取一个专门用于配置加载问题的基本日志记录器实例
# 这避免了主应用程序记录器尚未配置时可能出现的问题
config_logger = logging.getLogger("ConfigLoader")
# 如果主设置尚未运行，则设置默认级别
config_logger.setLevel(logging.INFO)
# 如果没有处理程序存在 (例如，直接运行脚本)，则添加一个处理程序
if not config_logger.hasHandlers():
    ch = logging.StreamHandler(sys.stdout)
    formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
    ch.setFormatter(formatter)
    config_logger.addHandler(ch)
# ---------------------------------------------------------

# --- 项目根目录计算 ---
# __file__ 指向此文件 (config.py)
# os.path.dirname(__file__) 指向 app/core
# os.path.join(os.path.dirname(__file__), "..", "..") 指向项目根目录 PsychologyAnalysis/
PROJECT_ROOT = os.path.abspath(os.path.join(os.path.dirname(__file__), "..", ".."))
CONFIG_YAML_PATH = os.path.join(PROJECT_ROOT, "config/config.yaml") # YAML 配置文件路径
DOTENV_PATH = os.path.join(PROJECT_ROOT, ".env")                     # .env 文件路径
ENCYCLOPEDIA_JSON_PATH = os.path.join(PROJECT_ROOT, "config/psychology_encyclopedia.json") # 百科文件路径

class Settings(BaseSettings):
    """
    应用程序设置，从 .env 文件和 YAML 加载。
    对于重叠的变量，.env 文件具有优先权。
    """
    # --- 基本应用设置 ---
    APP_NAME: str = "Qingtingzhe AI Analysis"       # 应用名称
    ENVIRONMENT: str = "development"                # 环境 (development, staging, production)
    API_V1_STR: str = "/api/v1"                     # API V1 端点的基本路径
    LOG_LEVEL: str = "INFO"                         # 默认日志级别 (DEBUG, INFO, WARNING, ERROR)

    # --- 安全设置 (JWT 认证) ---
    SECRET_KEY: str = "a_very_unsafe_default_secret_key_please_change_in_dotenv" # JWT 密钥，务必在 .env 中修改
    ALGORITHM: str = "HS256"                        # JWT 签名算法
    ACCESS_TOKEN_EXPIRE_MINUTES: int = 60 * 24      # 访问令牌过期时间 (分钟)，默认为 1 天

    # --- CORS (跨源资源共享) ---
    # 允许访问后端的源列表 (逗号分隔的字符串)
    BACKEND_CORS_ORIGINS_STR: str = "http://localhost:8080,http://127.0.0.1:8080,http://localhost:5173,http://127.0.0.1:5173,http://192.168.43.190:5173" # 添加 Vite 默认开发端口

    # --- 数据库 ---
    # SQLite 数据库文件路径
    DB_PATH_SQLITE: str = os.path.join(PROJECT_ROOT, "psychology_analysis.db")
    # 数据库连接 URL (用于 SQLAlchemy AsyncIO)
    DATABASE_URL: str = f"sqlite+aiosqlite:///{DB_PATH_SQLITE}"

    # --- 文件存储 ---
    UPLOADS_DIR: str = os.path.join(PROJECT_ROOT, "uploads") # 上传文件存储目录
    LOGS_DIR: str = os.path.join(PROJECT_ROOT, "logs")       # 日志文件存储目录

    # --- Dashscope (阿里云灵积) API ---
    # API 密钥，优先从 .env 读取，否则尝试从 YAML 读取
    DASHSCOPE_API_KEY: Optional[str] = None

    # --- Redis 配置 --- # <--- 添加 Redis 配置部分
    # Redis 连接 URL，格式: redis://:[password@]host:port/db
    # 示例: redis://localhost:6379/0 (本地无密码)
    # 示例: redis://:mypassword@myredishost:6379/1 (带密码，使用数据库 1)
    REDIS_URL: str = "redis://localhost:6379/0"  # <-- 确保此行存在且具有合理的默认值

    # --- 可能从 config.yaml 加载的设置 (作为 .env 未设置时的备选或默认值) ---
    TEXT_MODEL: str = "qwen-plus"                       # 默认使用的文本生成模型
    VISION_MODEL: str = "qwen-vl-plus"                  # 默认使用的视觉理解模型
    REPORT_PROMPT_TEMPLATE: Optional[str] = None        # 报告生成的提示模板 (可选，可从 YAML 加载)
    YAML_CONFIG: Dict[str, Any] = {}                    # 用于存储从 YAML 加载的原始配置数据

    # --- 心理学百科全书 ---
    # 百科全书 JSON 文件路径
    PSYCHOLOGY_ENCYCLOPEDIA_FILE: str = ENCYCLOPEDIA_JSON_PATH
    # 加载后的百科条目列表 (每个条目是字典)
    PSYCHOLOGY_ENTRIES: List[Dict[str, str]] = []

    # Pydantic Settings 配置
    model_config = SettingsConfigDict(
        env_file=DOTENV_PATH,  # 明确指定 .env 文件路径
        extra='ignore'         # 忽略 .env 或环境变量中未在 Settings 类中定义的额外字段
    )

# --- 辅助函数：加载 YAML 配置 ---
def load_yaml_config(yaml_path: str) -> Dict[str, Any]:
    """从 YAML 文件加载配置。"""
    if not os.path.exists(yaml_path):
        config_logger.warning(f"在 {yaml_path} 未找到 YAML 配置文件。返回空配置。")
        return {}
    try:
        with open(yaml_path, 'r', encoding='utf-8') as f:
            config_data = yaml.safe_load(f)
            if config_data is None:
                config_logger.warning(f"位于 {yaml_path} 的 YAML 配置文件为空。返回空配置。")
                return {}
            config_logger.info(f"成功从 {yaml_path} 加载配置。")
            return config_data
    except Exception as e:
        config_logger.error(f"从 {yaml_path} 加载 YAML 配置时出错: {e}", exc_info=True)
        return {}

# --- 辅助函数：从 JSON 加载百科全书 ---
def load_encyclopedia_from_json(encyclopedia_path: str) -> List[Dict[str, str]]:
    """从 JSON 文件加载百科条目列表，并进行基本验证。"""
    if not os.path.exists(encyclopedia_path):
        config_logger.warning(f"百科文件未找到: {encyclopedia_path}。返回空列表。")
        return []
    try:
        with open(encyclopedia_path, 'r', encoding='utf-8') as f:
            entries_list = json.load(f)
            # 验证根元素是否为列表
            if not isinstance(entries_list, list):
                config_logger.error(f"百科文件 {encyclopedia_path} 格式错误，根元素不是列表。")
                return []

            valid_entries = []
            required_keys = {"category", "title", "content"} # 每个条目必需的键
            for i, entry in enumerate(entries_list):
                # 验证条目是否为字典且包含所有必需的键
                if isinstance(entry, dict) and required_keys.issubset(entry.keys()):
                    # 验证必需键的值是否为非空字符串
                    if all(isinstance(entry[key], str) and entry[key].strip() for key in required_keys):
                        # 添加清理过的条目
                        valid_entries.append({
                            "category": entry["category"].strip(),
                            "title": entry["title"].strip(),
                            "content": entry["content"].strip()
                        })
                    else:
                        config_logger.warning(f"百科文件 {encyclopedia_path} 中第 {i+1} 条记录的值无效 (非字符串或为空)，已跳过。")
                else:
                    config_logger.warning(f"百科文件 {encyclopedia_path} 中第 {i+1} 条记录格式错误或缺少必需的键 ({required_keys})，已跳过。")

            config_logger.info(f"成功从 {encyclopedia_path} 加载 {len(valid_entries)} 条有效的百科条目。")
            return valid_entries
    except json.JSONDecodeError as e:
        config_logger.error(f"解析百科 JSON 文件 {encyclopedia_path} 时出错: {e}", exc_info=True)
        return []
    except Exception as e:
        config_logger.error(f"加载百科文件 {encyclopedia_path} 时发生意外错误: {e}", exc_info=True)
        return []
# ---------------------------------------------------------

# --- 实例化设置 (首先从 .env 加载) ---
try:
    settings = Settings()
except Exception as e:
    # 如果在 Pydantic 模型验证或 .env 文件读取期间发生严重错误
    config_logger.critical(f"在 Settings 初始化期间发生严重错误: {e}")
    traceback.print_exc() # 打印详细的错误堆栈
    sys.exit(1) # 关键配置失败，退出程序

# --- 关键安全检查：默认 SECRET_KEY ---
if settings.SECRET_KEY == "a_very_unsafe_default_secret_key_please_change_in_dotenv":
    config_logger.critical("="*30 + " 关键安全警告 " + "="*30)
    config_logger.critical("SECRET_KEY 正在使用默认的不安全值！")
    config_logger.critical("请生成一个强密钥并将其设置在 .env 文件中。")
    config_logger.critical("示例生成命令: openssl rand -hex 32")
    config_logger.critical("="*80 + "\n")
    # 生产环境中建议取消注释下一行，强制要求设置密钥
    # sys.exit(1)

# --- 加载并合并 YAML 配置 ---
yaml_config_data = load_yaml_config(CONFIG_YAML_PATH)
settings.YAML_CONFIG = yaml_config_data # 存储原始 YAML 数据

# --- 如果 .env 中未设置，则从 YAML 加载特定设置作为备选 ---
# 检查 DASHSCOPE_API_KEY 是否已从 .env 加载，如果没有，则尝试从 YAML 加载
if settings.DASHSCOPE_API_KEY is None:
    yaml_api_key = yaml_config_data.get("api_key") # 假设 YAML 中的键是 'api_key'
    if yaml_api_key:
        settings.DASHSCOPE_API_KEY = yaml_api_key
        config_logger.warning("从 YAML 加载了 DASHSCOPE_API_KEY (推荐使用 .env)。")

# 如果模型设置仍为默认值，则尝试从 YAML 加载
if settings.TEXT_MODEL == "qwen-plus": # 检查是否仍是类定义中的默认值
    settings.TEXT_MODEL = yaml_config_data.get("text_model", settings.TEXT_MODEL)
if settings.VISION_MODEL == "qwen-vl-plus": # 检查是否仍是类定义中的默认值
    settings.VISION_MODEL = yaml_config_data.get("vision_model", settings.VISION_MODEL)

# 如果报告模板未从 .env 加载，则尝试从 YAML 加载
if settings.REPORT_PROMPT_TEMPLATE is None:
    settings.REPORT_PROMPT_TEMPLATE = yaml_config_data.get("REPORT_PROMPT_TEMPLATE", settings.REPORT_PROMPT_TEMPLATE)


# --- 加载心理学百科全书 ---
settings.PSYCHOLOGY_ENTRIES = load_encyclopedia_from_json(settings.PSYCHOLOGY_ENCYCLOPEDIA_FILE)
if not settings.PSYCHOLOGY_ENTRIES:
    config_logger.warning("未能加载任何心理百科条目，相关功能可能受影响。")

# --- 构造数据库 URL (主要用于日志记录和确认) ---
# 实际的 URL 在 Settings 类中已基于 DB_PATH_SQLITE 构建
config_logger.info(f"使用的数据库 URL: {settings.DATABASE_URL}")

# --- 确保必要的目录存在 ---
try:
    # exist_ok=True 表示如果目录已存在则不引发错误
    os.makedirs(settings.UPLOADS_DIR, exist_ok=True)
    os.makedirs(settings.LOGS_DIR, exist_ok=True)
    config_logger.info(f"确保目录存在: 上传='{settings.UPLOADS_DIR}', 日志='{settings.LOGS_DIR}'")
except OSError as e:
     # 如果创建目录时出错 (例如权限问题)
     config_logger.error(f"创建必要目录时出错: {e}", exc_info=True)

# --- 检查关键的 API 密钥是否已加载 ---
if not settings.DASHSCOPE_API_KEY:
    config_logger.critical("="*30 + " 关键警告 " + "="*30)
    config_logger.critical("DASHSCOPE_API_KEY 未在 .env 或 config.yaml 中设置！")
    config_logger.critical("AI 相关功能很可能会失败。")
    config_logger.critical("请在 .env 文件 (推荐) 或 config/config.yaml 中设置它。")
    config_logger.critical("="*80 + "\n")

# --- 手动解析 CORS 源字符串 ---
def parse_cors_origins(origins_str: str) -> List[str]:
    """将逗号分隔的源字符串解析为字符串列表。"""
    if not origins_str or not isinstance(origins_str, str):
        # 如果字符串为空或无效，使用包含 Vite 端口的更新后默认值
        default_origins = ["http://localhost:8080", "http://127.0.0.1:8080", "http://localhost:5173", "http://127.0.0.1:5173","http://192.168.43.190:5173"]
        config_logger.warning(f"BACKEND_CORS_ORIGINS_STR 为空或无效 ('{origins_str}')。使用默认值: {default_origins}")
        return default_origins
    try:
        # 分割字符串，去除空白，并过滤掉空字符串
        parsed = [origin.strip() for origin in origins_str.split(",") if origin.strip()]
        if not parsed:
             # 如果解析后列表为空 (例如，字符串只包含逗号或空格)
             default_origins = ["http://localhost:8080", "http://127.0.0.1:8080", "http://localhost:5173", "http://127.0.0.1:5173","http://192.168.43.190:5173"]
             config_logger.warning(f"解析 BACKEND_CORS_ORIGINS_STR '{origins_str}' 得到空列表。使用默认值: {default_origins}")
             return default_origins
        config_logger.info(f"成功解析 CORS 源: {parsed}")
        return parsed
    except Exception as e:
        # 捕获解析过程中可能出现的其他异常
        default_origins = ["http://localhost:8080", "http://127.0.0.1:8080", "http://localhost:5173", "http://127.0.0.1:5173","http://192.168.43.190:5173"]
        config_logger.error(f"解析 BACKEND_CORS_ORIGINS_STR '{origins_str}' 时出错: {e}。使用默认值: {default_origins}", exc_info=True)
        return default_origins

# 解析 CORS 源并存储结果
parsed_cors_origins: List[str] = parse_cors_origins(settings.BACKEND_CORS_ORIGINS_STR)

# --- 记录最终生效的设置 ---
config_logger.info("--- 生效的应用程序设置 ---")
config_logger.info(f"应用名称: {settings.APP_NAME}")
config_logger.info(f"运行环境: {settings.ENVIRONMENT}")
config_logger.info(f"日志级别: {settings.LOG_LEVEL}")
config_logger.info(f"API V1 前缀: {settings.API_V1_STR}")
config_logger.info(f"数据库 URL: {settings.DATABASE_URL}")
config_logger.info(f"Redis URL: {settings.REDIS_URL}") # <--- 添加 Redis URL 日志记录
config_logger.info(f"上传目录: {settings.UPLOADS_DIR}")
config_logger.info(f"日志目录: {settings.LOGS_DIR}")
config_logger.info(f"CORS 源 (已解析): {parsed_cors_origins}")
config_logger.info(f"JWT 算法: {settings.ALGORITHM}")
config_logger.info(f"令牌过期时间 (分钟): {settings.ACCESS_TOKEN_EXPIRE_MINUTES}")
# 提示密钥是否已从默认值更改
config_logger.info(f"SECRET_KEY 已加载: {'是' if settings.SECRET_KEY != 'a_very_unsafe_default_secret_key_please_change_in_dotenv' else '否 (使用默认值 - 不安全!)'}")
# 提示 API 密钥是否已加载
config_logger.info(f"DASHSCOPE_API_KEY 已加载: {'是' if settings.DASHSCOPE_API_KEY else '否 - 关键警告!'}")
config_logger.info(f"文本模型: {settings.TEXT_MODEL}")
config_logger.info(f"视觉模型: {settings.VISION_MODEL}")
config_logger.info(f"已加载百科条目数: {len(settings.PSYCHOLOGY_ENTRIES)}")
config_logger.info("------------------------------------")

# +++ 添加: 打印最终确定的数据库绝对路径 (用于调试) +++
try:
    abs_db_path = os.path.abspath(settings.DB_PATH_SQLITE)
    config_logger.info(f"!!! Settings 使用的绝对数据库路径: {abs_db_path}")
except Exception as e_path:
    config_logger.error(f"!!! 无法确定绝对数据库路径: {e_path}")
# ++++++++++++++++++++++++++++++++++++++++++

# `settings` 实例现在可以被其他模块导入使用:
# from app.core.config import settings

================================================================================

--- File: PsychologyAnalysis\app\core\deps.py ---
# FILE: app/core/deps.py (修改后，添加 get_current_active_superuser)
import logging
from typing import AsyncGenerator, Optional # Use AsyncGenerator for async yield
from fastapi import Depends, HTTPException, status
from fastapi.security import OAuth2PasswordBearer
from sqlalchemy.ext.asyncio import AsyncSession # Import AsyncSession

# --- Core App Imports ---
from app.core.config import settings
from app.core.security import decode_access_token # Your JWT decoding function

# --- Database and CRUD Imports ---
from app.db.session import AsyncSessionLocal # Import the async session maker
from app import crud, models, schemas # Adjust imports based on your project structure

logger = logging.getLogger(settings.APP_NAME) # Use the main app logger

# --- OAuth2 Scheme Definition ---
# Define the URL where clients will send username/password to get a token.
# This should match the path operation of your login endpoint.
oauth2_scheme = OAuth2PasswordBearer(tokenUrl=f"{settings.API_V1_STR}/auth/token")

# --- Asynchronous Database Session Dependency ---
async def get_db() -> AsyncGenerator[AsyncSession, None]:
    """
    Dependency that provides an asynchronous database session per request.
    It ensures the session is properly closed afterwards.
    """
    async with AsyncSessionLocal() as session:
        try:
            yield session
            # Optional: You could uncomment the next line if you want commits
            # to happen automatically at the end of successful requests,
            # but manual commits in CRUD functions are generally preferred
            # for better control.
            # await session.commit()
        except Exception as e:
            # Rollback in case of exceptions during the request handling
            logger.error(f"数据库会话错误: {e}", exc_info=True)
            await session.rollback()
            # Re-raise the exception so FastAPI can handle it
            raise
        # Session is automatically closed when exiting the 'async with' block

# --- Asynchronous Current User Dependency ---
async def get_current_user(
    db: AsyncSession = Depends(get_db),          # Depend on the async get_db
    token: str = Depends(oauth2_scheme)          # Get token from Authorization header
) -> models.User:                                # Return the SQLAlchemy User model
    """
    Decodes the JWT token, validates it, and retrieves the current user
    from the database asynchronously. Raises HTTPException if invalid.
    """
    credentials_exception = HTTPException(
        status_code=status.HTTP_401_UNAUTHORIZED,
        detail="无法验证凭据", # "Could not validate credentials"
        headers={"WWW-Authenticate": "Bearer"},
    )

    # Decode the token using your security utility
    token_data = decode_access_token(token)
    if token_data is None or token_data.username is None:
        logger.warning("Token 解码失败或 Token 负载中缺少用户名。")
        raise credentials_exception

    # Retrieve the user from the database asynchronously using the async CRUD function
    try:
        # Ensure crud.user.get_user_by_username is an async function
        user = await crud.user.get_user_by_username(db, username=token_data.username)
    except Exception as e:
        logger.error(f"获取用户 '{token_data.username}' 时发生数据库错误: {e}", exc_info=True)
        # Don't expose internal DB errors directly, raise the standard credentials exception
        raise credentials_exception

    if user is None:
        logger.warning(f"用户 '{token_data.username}' 在 Token 中找到但在数据库中未找到。")
        raise credentials_exception

    # Return the validated user object
    return user

# --- Asynchronous Active User Dependency ---
async def get_current_active_user(
    current_user: models.User = Depends(get_current_user), # Depend on get_current_user
) -> models.User:
    """
    Ensures the user retrieved from the token is marked as active.
    """
    if not current_user.is_active:
        logger.warning(f"非活动用户尝试认证: {current_user.username}")
        raise HTTPException(status_code=status.HTTP_400_BAD_REQUEST, detail="非活动用户") # "Inactive user"
    return current_user

# +++ 新增：超级用户依赖项 +++
async def get_current_active_superuser(
    current_user: models.User = Depends(get_current_active_user), # 首先确保用户是活动的
) -> models.User:
    """
    确保当前用户是活动的 **并且** 是超级用户。
    如果不是超级用户，则引发 HTTPException。
    此依赖项应用于所有需要管理员权限的接口。
    """
    if not current_user.is_superuser:
        logger.warning(f"非超级用户拒绝访问管理接口: {current_user.username}")
        raise HTTPException(
            status_code=status.HTTP_403_FORBIDDEN, # 403 Forbidden 表示权限不足
            detail="用户权限不足", # "The user doesn't have enough privileges"
        )
    # 如果检查通过，记录调试信息并返回用户对象
    logger.debug(f"超级用户访问已授权: {current_user.username}")
    return current_user

================================================================================

--- File: PsychologyAnalysis\app\core\redis_client.py ---


================================================================================

--- File: PsychologyAnalysis\app\core\security.py ---
# app/core/security.py
from datetime import datetime, timedelta, timezone
from typing import Any, Union, Optional
from jose import jwt, JWTError
from passlib.context import CryptContext
from app.core.config import settings
from app.schemas.token import TokenData # 导入令牌数据模式

# 使用 bcrypt 哈希算法
pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")

ALGORITHM = settings.ALGORITHM
SECRET_KEY = settings.SECRET_KEY
ACCESS_TOKEN_EXPIRE_MINUTES = settings.ACCESS_TOKEN_EXPIRE_MINUTES

def verify_password(plain_password: str, hashed_password: str) -> bool:
    """验证明文密码与哈希密码是否匹配"""
    return pwd_context.verify(plain_password, hashed_password)

def get_password_hash(password: str) -> str:
    """生成密码的哈希值"""
    return pwd_context.hash(password)

def create_access_token(
    subject: Union[str, Any], expires_delta: Optional[timedelta] = None
) -> str:
    """创建 JWT 访问令牌"""
    if expires_delta:
        expire = datetime.now(timezone.utc) + expires_delta
    else:
        # 使用配置中的过期时间
        expire = datetime.now(timezone.utc) + timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)
    # 令牌中至少包含过期时间和主题 (subject, 通常是用户名)
    to_encode = {"exp": expire, "sub": str(subject)}
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)
    return encoded_jwt

def decode_access_token(token: str) -> Optional[TokenData]:
    """解码访问令牌，验证其有效性"""
    try:
        # 解码 JWT
        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])
        # 提取用户名
        username: str | None = payload.get("sub")
        if username is None:
            # 令牌中没有 'sub' 字段
            return None
        # 你可以在这里添加更多的载荷验证逻辑 (例如：检查 scopes)
        # 返回包含用户名的 TokenData 对象
        return TokenData(username=username)
    except JWTError:
        # 令牌无效 (格式错误、签名不匹配、已过期等)
        return None

================================================================================

--- File: PsychologyAnalysis\app\crud\__init__.py ---
# FILE: app/crud/__init__.py (更新后)
from . import user          # 用户相关 CRUD
from . import assessment    # 评估相关 CRUD
from . import interrogation # 审讯记录相关 CRUD
from . import stats         # 统计相关 CRUD
from . import attribute     # +++ 属性相关 CRUD +++

# (可选) 可以在这里定义 __all__
__all__ = [
    "user",
    "assessment",
    "interrogation",
    "stats",
    "attribute", # <--- 添加 attribute
]

================================================================================

--- File: PsychologyAnalysis\app\crud\assessment.py ---
# -*- coding: utf-8 -*-
# FILE: app/crud/assessment.py (修改后，包含属性关联操作)
import logging
import traceback
from typing import Optional, Dict, Any, List
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy.future import select
from sqlalchemy import desc
from sqlalchemy.exc import SQLAlchemyError, IntegrityError
import sqlite3

# --- 模型和配置导入 ---
from app.models.assessment import Assessment, STATUS_COMPLETE, STATUS_PENDING, STATUS_PROCESSING, STATUS_FAILED
# +++ 导入 Attribute 模型 +++
from app.models.attribute import Attribute
# ++++++++++++++++++++++++
from app.core.config import settings

logger = logging.getLogger(settings.APP_NAME)

# --- 评估记录 (Assessment) 的 CRUD 操作 ---

async def get(db: AsyncSession, id: int) -> Optional[Assessment]:
    """
    异步根据 ID 获取评估记录。
    """
    logger.debug(f"CRUD GET: 尝试查找 ID 为 {id} 的评估记录")
    try:
        # 使用 SQLAlchemy 2.0 风格的 select
        result = await db.execute(select(Assessment).filter(Assessment.id == id))
        found_obj = result.scalar_one_or_none()
        if found_obj:
            logger.debug(f"CRUD GET: 已找到 ID 为 {id} 的评估记录")
        else:
            logger.debug(f"CRUD GET: 在数据库中未找到 ID 为 {id} 的评估记录")
        return found_obj
    except SQLAlchemyError as e:
        logger.error(f"CRUD GET: 获取评估记录 ID {id} 时发生数据库错误: {e}", exc_info=True)
        # 不在 CRUD 层抛出 HTTPException，让上层调用者处理
        raise e # 或者根据调用者期望返回 None

async def create(db: AsyncSession, **kwargs: Any) -> Assessment:
    """
    异步创建一条新的评估记录。
    kwargs 应包含 Assessment 模型所需的所有字段（除了自动生成的 id, created_at, updated_at）。
    确保在成功时返回带有 ID 的对象，否则引发异常。
    """
    logger.info(f"CRUD CREATE: 准备为 '{kwargs.get('subject_name', '未知主题')}' 创建评估记录")
    try:
        # 移除不允许由用户指定的字段，或由数据库自动处理的字段
        kwargs.pop('id', None)
        kwargs.pop('created_at', None)
        kwargs.pop('updated_at', None)
        # 确保 status 使用默认值 'pending'
        if 'status' in kwargs:
            logger.warning("CRUD CREATE: 在参数中提供了 'status' 字段，将忽略并使用模型默认值。")
            kwargs.pop('status', None)
        # --- 移除 attributes 字段，关联应单独处理 ---
        if 'attributes' in kwargs:
             logger.warning("CRUD CREATE: 在参数中提供了 'attributes' 字段，应通过关联函数处理，已忽略。")
             kwargs.pop('attributes', None)
        # -----------------------------------------

        db_obj = Assessment(**kwargs)
        logger.debug("CRUD CREATE: 评估对象已在内存中创建。")
    except TypeError as te:
        logger.error(f"CRUD CREATE: 创建 Assessment 实例时发生 TypeError。提供的参数: {kwargs}", exc_info=True)
        raise TypeError(f"模型初始化字段不匹配或类型错误: {te}") from te

    db.add(db_obj)
    logger.debug("CRUD CREATE: 评估对象已添加到 SQLAlchemy 会话中。")

    try:
        logger.info("CRUD CREATE: 尝试提交数据库事务以保存新的评估记录...")
        await db.commit()
        logger.info("CRUD CREATE: 数据库提交成功。")

        # 验证对象是否仍在会话中（健全性检查）
        if db_obj not in db and hasattr(db, 'is_active') and db.is_active:
             logger.error("CRUD CREATE: 严重错误 - 对象在成功提交后意外地从会话中移除！")
             await db.rollback() # 尽管提交成功，但状态异常，回滚可能意义不大，但记录错误
             raise SQLAlchemyError("对象在提交后从会话中丢失")

        logger.debug(f"CRUD CREATE: 尝试刷新对象状态。刷新前的对象 ID (如果内存中存在): {getattr(db_obj, 'id', 'N/A')}")
        await db.refresh(db_obj)
        logger.info(f"CRUD CREATE: 评估对象已成功刷新。")

        # 验证 ID 是否已分配
        if db_obj.id is None:
            logger.critical(f"CRUD CREATE: 严重错误 - 对象已刷新但其 ID 仍为 None！回滚可能无效，需检查数据库。")
            # 回滚可能无法撤销已提交的更改，但尝试一下
            try: await db.rollback()
            except: pass
            raise SQLAlchemyError("数据库在提交和刷新操作后未能成功分配 ID")

        logger.info(f"CRUD CREATE: 成功创建并刷新评估记录，最终 ID: {db_obj.id}")
        return db_obj

    except (IntegrityError, sqlite3.IntegrityError) as ie:
        error_msg = f"数据库完整性错误: {ie}"
        logger.error(f"CRUD CREATE: {error_msg}", exc_info=False) # 通常不需要完整堆栈
        logger.info("CRUD CREATE: 由于发生完整性错误，正在回滚会话...")
        await db.rollback()
        # 抛出更具体的错误给上层
        raise IntegrityError(f"数据保存冲突或违反约束: {ie}", orig=ie, params=kwargs) from ie
    except (SQLAlchemyError, sqlite3.OperationalError) as db_err: # 捕获更广泛的 DB 错误
        error_msg = f"数据库操作错误: {type(db_err).__name__} - {db_err}"
        logger.error(f"CRUD CREATE: {error_msg}", exc_info=True)
        logger.info("CRUD CREATE: 由于发生数据库错误，正在回滚会话...")
        await db.rollback()
        raise SQLAlchemyError(f"数据库操作失败: {db_err}") from db_err
    except Exception as e: # 捕获其他意外错误
        error_msg = f"创建评估记录期间发生意外错误: {e}"
        logger.error(f"CRUD CREATE: {error_msg}", exc_info=True)
        logger.info("CRUD CREATE: 由于发生一般错误，正在回滚会话...")
        try:
            await db.rollback()
        except Exception as rollback_err:
            logger.error(f"CRUD CREATE: 在错误处理中尝试回滚会话时再次发生错误: {rollback_err}", exc_info=True)
        raise e # 重新抛出原始错误

async def update_status(db: AsyncSession, assessment_id: int, new_status: str) -> Optional[Assessment]:
    """仅更新指定评估记录的状态。"""
    logger.info(f"CRUD UPDATE STATUS: 尝试将评估记录 ID {assessment_id} 的状态更新为 '{new_status}'")
    db_obj = await get(db, id=assessment_id)
    if not db_obj:
        logger.warning(f"CRUD UPDATE STATUS: 未找到评估记录 ID {assessment_id}。无法更新状态。")
        return None

    if db_obj.status == new_status:
        logger.info(f"CRUD UPDATE STATUS: 评估记录 ID {assessment_id} 的状态已经是 '{new_status}'，无需更新。")
        return db_obj

    logger.debug(f"CRUD UPDATE STATUS: 找到评估记录 ID {assessment_id}。当前状态: '{db_obj.status}'。正在更新为 '{new_status}'。")
    db_obj.status = new_status
    db.add(db_obj) # 将更改添加到会话

    try:
        logger.info(f"CRUD UPDATE STATUS: 尝试提交数据库事务以更新状态 (ID: {assessment_id}, 新状态: {new_status})...")
        await db.commit()
        logger.info(f"CRUD UPDATE STATUS: 数据库提交成功，状态已更新 (ID: {assessment_id})。")
        await db.refresh(db_obj)
        logger.info(f"CRUD UPDATE STATUS: 评估记录对象 ID {assessment_id} 在状态更新后已刷新。")
        return db_obj
    except (sqlite3.OperationalError, sqlite3.IntegrityError, SQLAlchemyError) as db_err: # 捕获可能的数据库错误
        error_msg = f"更新状态时数据库错误 (ID: {assessment_id}): {type(db_err).__name__} - {db_err}"
        logger.error(f"CRUD UPDATE STATUS: {error_msg}", exc_info=True)
        logger.info(f"CRUD UPDATE STATUS: 由于数据库错误，正在回滚会话 (ID: {assessment_id})...")
        await db.rollback()
        raise db_err # 重新抛出错误
    except Exception as e:
        error_msg = f"更新状态期间发生一般错误 (ID: {assessment_id}): {e}"
        logger.error(f"CRUD UPDATE STATUS: {error_msg}", exc_info=True)
        logger.info(f"CRUD UPDATE STATUS: 由于一般错误，正在回滚会话 (ID: {assessment_id})...")
        await db.rollback()
        raise e

async def update_report_text(db: AsyncSession, assessment_id: int, report_text: str) -> Optional[Assessment]:
    """仅更新指定评估记录的 report_text 字段。"""
    logger.info(f"CRUD UPDATE REPORT TEXT: 尝试更新评估记录 ID: {assessment_id} 的报告文本")
    db_obj = await get(db, id=assessment_id)
    if not db_obj:
        logger.warning(f"CRUD UPDATE REPORT TEXT: 未找到评估记录 ID {assessment_id}。无法更新报告。")
        return None

    # 比较之前，确保两个值都是字符串类型（如果 report_text 可能为 None）
    current_report = db_obj.report_text if db_obj.report_text is not None else ""
    new_report = report_text if report_text is not None else ""

    if current_report == new_report:
         logger.info(f"CRUD UPDATE REPORT TEXT: 评估记录 ID {assessment_id} 的报告文本未更改，无需更新。")
         return db_obj

    logger.debug(f"CRUD UPDATE REPORT TEXT: 找到评估记录 ID {assessment_id}。正在更新 report_text。")
    db_obj.report_text = report_text # 更新为传入的值，可以是 None
    db.add(db_obj) # 将更改添加到会话

    try:
        logger.info(f"CRUD UPDATE REPORT TEXT: 尝试提交数据库事务以更新报告文本 (ID: {assessment_id})...")
        await db.commit()
        logger.info(f"CRUD UPDATE REPORT TEXT: 数据库提交成功，报告文本已更新 (ID: {assessment_id})。")
        await db.refresh(db_obj)
        logger.info(f"CRUD UPDATE REPORT TEXT: 评估记录对象 ID {assessment_id} 在报告更新后已刷新。")
        return db_obj
    except (sqlite3.OperationalError, sqlite3.IntegrityError, SQLAlchemyError) as db_err:
        error_msg = f"更新报告文本时数据库错误 (ID: {assessment_id}): {type(db_err).__name__} - {db_err}"
        logger.error(f"CRUD UPDATE REPORT TEXT: {error_msg}", exc_info=True)
        logger.info(f"CRUD UPDATE REPORT TEXT: 由于数据库错误，正在回滚会话 (ID: {assessment_id})...")
        await db.rollback()
        raise db_err
    except Exception as e:
        error_msg = f"更新报告文本期间发生一般错误 (ID: {assessment_id}): {e}"
        logger.error(f"CRUD UPDATE REPORT TEXT: {error_msg}", exc_info=True)
        logger.info(f"CRUD UPDATE REPORT TEXT: 由于一般错误，正在回滚会话 (ID: {assessment_id})...")
        await db.rollback()
        raise e

# --- 后台管理查询函数 ---

async def get_assessments_by_id_card(db: AsyncSession, id_card: str) -> List[Assessment]:
    """
    异步根据身份证号获取所有相关的评估记录列表，按创建时间降序排列。
    """
    logger.info(f"CRUD: 尝试按身份证号 '{id_card}' 查找评估记录")
    if not id_card:
        logger.warning("CRUD: 尝试按空身份证号查询，返回空列表。")
        return []
    try:
        stmt = select(Assessment).filter(Assessment.id_card == id_card).order_by(desc(Assessment.created_at))
        result = await db.execute(stmt)
        assessments = result.scalars().all()
        logger.info(f"CRUD: 找到 {len(assessments)} 条身份证号为 '{id_card}' 的评估记录")
        return list(assessments) # 确保返回列表
    except SQLAlchemyError as e:
        logger.error(f"CRUD: 按身份证号 '{id_card}' 获取评估记录时发生数据库错误: {e}", exc_info=True)
        raise e

async def get_latest_completed_by_id_card(db: AsyncSession, id_card: str) -> Optional[Assessment]:
    """
    异步根据身份证号获取最新一条状态为 'complete' 的评估记录。
    """
    logger.info(f"CRUD: 尝试按身份证号 '{id_card}' 查找最新的已完成评估记录")
    if not id_card:
         logger.warning("CRUD: 尝试按空身份证号查询最新完成记录，返回 None。")
         return None
    try:
        stmt = (
            select(Assessment)
            .filter(Assessment.id_card == id_card)
            .filter(Assessment.status == STATUS_COMPLETE) # 使用导入的状态常量
            .order_by(desc(Assessment.created_at)) # 按创建时间降序排列
            .limit(1) # 只取最新的一条
        )
        result = await db.execute(stmt)
        assessment = result.scalar_one_or_none()
        if assessment:
            logger.info(f"CRUD: 找到身份证号 '{id_card}' 的最新已完成评估记录 ID: {assessment.id}")
        else:
            logger.info(f"CRUD: 未找到身份证号 '{id_card}' 的已完成评估记录")
        return assessment
    except SQLAlchemyError as e:
        logger.error(f"CRUD: 按身份证号 '{id_card}' 获取最新已完成评估时发生数据库错误: {e}", exc_info=True)
        raise e

# --- +++ 新增：处理评估与属性关联的 CRUD 函数 +++ ---

async def add_attribute_to_assessment(
    db: AsyncSession, *, assessment_id: int, attribute_id: int
) -> Optional[Assessment]:
    """
    将一个属性关联到一个评估记录（通过 ID）。

    Args:
        db: 数据库会话。
        assessment_id: 评估记录的 ID。
        attribute_id: 要关联的属性的 ID。

    Returns:
        更新后的 Assessment 对象 (如果成功) 或 None (如果任一 ID 未找到)。
    """
    logger.info(f"CRUD Assoc: 尝试将属性 ID {attribute_id} 添加到评估 ID {assessment_id}")
    # 1. 获取评估对象
    assessment = await get(db, id=assessment_id)
    if not assessment:
        logger.warning(f"CRUD Assoc: 未找到评估 ID {assessment_id}，无法添加属性。")
        return None

    # 2. 获取属性对象 (需要导入 crud.attribute)
    try:
        from app.crud import attribute as crud_attribute # 在函数内部导入以避免循环依赖问题
    except ImportError:
         logger.error("CRUD Assoc: 无法导入 crud.attribute 模块！")
         raise RuntimeError("Attribute CRUD module is not available.")

    attribute = await crud_attribute.get_attribute(db, attribute_id=attribute_id)
    if not attribute:
        logger.warning(f"CRUD Assoc: 未找到属性 ID {attribute_id}，无法添加到评估 {assessment_id}。")
        return None # 返回 None 表示属性未找到，或者可以返回 assessment 让调用者知道

    # 3. 检查是否已关联
    #    注意：直接检查 assessment.attributes 需要 ORM 加载关联数据，
    #    对于仅添加操作，可以直接尝试添加，让数据库处理唯一性约束（如果有）。
    #    或者，先查询关联表是否存在记录 (更安全但多一次查询)。
    #    这里我们直接尝试添加，依赖于数据库的复合主键或唯一约束。
    if attribute in assessment.attributes: # 如果已加载，可以检查
        logger.debug(f"CRUD Assoc: 属性 ID {attribute.id} 已关联到评估 ID {assessment.id}，无需重复添加。")
        return assessment

    # 4. 添加关联
    assessment.attributes.append(attribute) # SQLAlchemy 会在 commit 时处理关联表的插入
    db.add(assessment) # 标记 assessment 对象已更改（虽然 append 通常会自动标记）

    try:
        await db.commit()
        # 提交后，assessment.attributes 应该会包含新添加的属性 (如果 lazy loading 策略允许或 refresh)
        # await db.refresh(assessment) # 刷新以确保看到最新的关联列表
        logger.info(f"CRUD Assoc: 成功将属性 ID {attribute.id} 添加到评估 ID {assessment.id}")
        return assessment
    except (IntegrityError, sqlite3.IntegrityError) as e: # 捕获可能的复合主键冲突
        await db.rollback()
        logger.error(f"CRUD Assoc: 添加属性关联时发生完整性错误 (评估ID: {assessment_id}, 属性ID: {attribute.id}): {e}", exc_info=False)
        # 这种情况通常意味着关联已存在，即使上面的 `if attribute in assessment.attributes` 检查没发现（可能因为未加载）
        logger.warning(f"CRUD Assoc: 属性 ID {attribute_id} 可能已关联到评估 ID {assessment.id} (数据库层面)。")
        # 可以选择返回 assessment，表示操作幂等完成
        return assessment # 或者抛出异常 raise ValueError(...)
    except SQLAlchemyError as e:
        await db.rollback()
        logger.error(f"CRUD Assoc: 添加属性关联时发生数据库错误 (评估ID: {assessment_id}, 属性ID: {attribute.id}): {e}", exc_info=True)
        raise e

async def remove_attribute_from_assessment(
    db: AsyncSession, *, assessment_id: int, attribute_id: int
) -> Optional[Assessment]:
    """
    从评估记录解除一个属性的关联（通过 ID）。

    Args:
        db: 数据库会话。
        assessment_id: 评估记录的 ID。
        attribute_id: 要解除关联的属性的 ID。

    Returns:
        更新后的 Assessment 对象 (如果成功) 或 None (如果任一 ID 未找到)。
    """
    logger.info(f"CRUD Assoc: 尝试从评估 ID {assessment_id} 移除属性 ID {attribute_id}")
    # 1. 获取评估对象
    assessment = await get(db, id=assessment_id)
    if not assessment:
        logger.warning(f"CRUD Assoc: 未找到评估 ID {assessment_id}，无法移除属性。")
        return None

    # 2. 获取属性对象 (确保它存在，虽然移除时理论上可以不获取，但获取更安全)
    try:
        from app.crud import attribute as crud_attribute
    except ImportError:
        logger.error("CRUD Assoc: 无法导入 crud.attribute 模块！")
        raise RuntimeError("Attribute CRUD module is not available.")

    attribute = await crud_attribute.get_attribute(db, attribute_id=attribute_id)
    if not attribute:
        logger.warning(f"CRUD Assoc: 未找到属性 ID {attribute_id}，无法从评估 {assessment_id} 移除。")
        return None

    # 3. 检查关联是否存在并移除
    #    同样，依赖于 assessment.attributes 是否已加载
    if attribute in assessment.attributes:
        assessment.attributes.remove(attribute) # SQLAlchemy 处理关联表的删除
        db.add(assessment) # 标记对象已更改
        try:
            await db.commit()
            # 移除后通常不需要 refresh
            logger.info(f"CRUD Assoc: 成功从评估 ID {assessment_id} 移除属性 ID {attribute_id}")
            return assessment
        except SQLAlchemyError as e:
            await db.rollback()
            logger.error(f"CRUD Assoc: 移除属性关联时发生数据库错误 (评估ID: {assessment_id}, 属性ID: {attribute.id}): {e}", exc_info=True)
            raise e
    else:
        # 如果关系未加载，或者属性确实未关联
        # 可以尝试直接查询关联表判断是否存在，但通常直接返回表示“已完成”或“无操作”即可
        logger.warning(f"CRUD Assoc: 属性 ID {attribute.id} 未关联到评估 ID {assessment.id} 或关联未加载，无法移除。")
        return assessment # 返回未修改的对象

async def set_assessment_attributes(
    db: AsyncSession, *, assessment_id: int, attribute_ids: List[int]
) -> Optional[Assessment]:
    """
    设置评估记录的属性列表，移除不再包含的属性，添加新增的属性。

    Args:
        db: 数据库会话。
        assessment_id: 评估记录的 ID。
        attribute_ids: 要设置的属性 ID 列表。

    Returns:
        更新后的 Assessment 对象或 None。
    """
    logger.info(f"CRUD Assoc: 正在设置评估 ID {assessment_id} 的属性列表为: {attribute_ids}")
    assessment = await get(db, id=assessment_id)
    if not assessment:
        logger.warning(f"CRUD Assoc: 未找到评估 ID {assessment_id}，无法设置属性。")
        return None

    try:
        from app.crud import attribute as crud_attribute
    except ImportError:
        logger.error("CRUD Assoc: 无法导入 crud.attribute 模块！")
        raise RuntimeError("Attribute CRUD module is not available.")

    # 1. 获取目标属性对象列表
    target_attributes = []
    invalid_ids = []
    if attribute_ids: # 只有当列表不为空时才查询
        stmt = select(Attribute).filter(Attribute.id.in_(attribute_ids))
        result = await db.execute(stmt)
        target_attributes = list(result.scalars().all()) # 获取所有有效的属性对象
        found_ids = {attr.id for attr in target_attributes}
        invalid_ids = [id for id in attribute_ids if id not in found_ids]
        if invalid_ids:
             logger.warning(f"CRUD Assoc: 尝试关联到评估 {assessment_id} 时，发现无效/不存在的属性 IDs: {invalid_ids}")

    # 2. 使用集合操作计算差异 (需要确保 assessment.attributes 已加载)
    #    为确保加载，可以重新查询评估并指定加载策略
    #    或者直接覆盖关系列表 (SQLAlchemy 通常能处理好)
    logger.debug(f"CRUD Assoc: 将评估 {assessment_id} 的属性更新为 ID 列表对应的对象 (找到 {len(target_attributes)} 个)")
    assessment.attributes = target_attributes # 直接将关系列表设置为新的对象列表

    db.add(assessment) # 标记对象已更改
    try:
        await db.commit()
        # await db.refresh(assessment) # 刷新以获取最新状态
        logger.info(f"CRUD Assoc: 成功设置评估 ID {assessment_id} 的属性列表。")
        if invalid_ids:
             logger.warning(f"CRUD Assoc: 在设置评估 {assessment_id} 属性时，以下无效 ID 已被忽略: {invalid_ids}")
        return assessment
    except SQLAlchemyError as e:
        await db.rollback()
        logger.error(f"CRUD Assoc: 设置评估 {assessment_id} 属性列表时发生数据库错误: {e}", exc_info=True)
        raise e

async def get_multi(db: AsyncSession, *, skip: int = 0, limit: int = 100) -> List[Assessment]:
    """
    异步获取评估记录列表，按创建时间降序排列。
    """
    logger.info(f"CRUD: 获取评估记录列表 (skip={skip}, limit={limit})")
    try:
        stmt = (
            select(Assessment)
            .order_by(desc(Assessment.created_at))
            .offset(skip)
            .limit(limit)
        )
        result = await db.execute(stmt)
        assessments = result.scalars().all()
        logger.info(f"CRUD: 找到 {len(assessments)} 条评估记录")
        return list(assessments)
    except SQLAlchemyError as e:
        logger.error(f"CRUD: 获取评估记录列表时发生数据库错误: {e}", exc_info=True)
        raise e
# --- 结束文件 ---

================================================================================

--- File: PsychologyAnalysis\app\crud\attribute.py ---
# FILE: app/crud/attribute.py
import logging
from typing import List, Optional, Sequence # 导入 Sequence
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy.future import select
from sqlalchemy import func
from sqlalchemy.exc import SQLAlchemyError, IntegrityError
import sqlite3

from app.models.attribute import Attribute # 导入 Attribute 模型
from app.schemas.attribute import AttributeCreate, AttributeUpdate # 导入 Pydantic Schemas
from app.core.config import settings

logger = logging.getLogger(settings.APP_NAME)

async def get_attribute(db: AsyncSession, attribute_id: int) -> Optional[Attribute]:
    """根据 ID 异步获取单个属性。"""
    logger.debug(f"CRUD: 尝试获取属性 ID: {attribute_id}")
    result = await db.execute(select(Attribute).filter(Attribute.id == attribute_id))
    attribute = result.scalar_one_or_none()
    if attribute:
        logger.debug(f"CRUD: 找到属性 ID: {attribute_id}, Name: {attribute.name}")
    else:
        logger.warning(f"CRUD: 未找到属性 ID: {attribute_id}")
    return attribute

async def get_attribute_by_name(db: AsyncSession, name: str) -> Optional[Attribute]:
    """根据名称异步获取单个属性 (大小写敏感)。"""
    logger.debug(f"CRUD: 尝试按名称获取属性: {name}")
    # 可以考虑使用 func.lower() 实现不区分大小写查找，但需确保数据库支持且有索引
    # result = await db.execute(select(Attribute).filter(func.lower(Attribute.name) == name.lower()))
    result = await db.execute(select(Attribute).filter(Attribute.name == name))
    attribute = result.scalar_one_or_none()
    if attribute:
        logger.debug(f"CRUD: 找到属性 Name: {name}, ID: {attribute.id}")
    else:
        logger.debug(f"CRUD: 未找到属性 Name: {name}")
    return attribute

async def get_attributes(
    db: AsyncSession, skip: int = 0, limit: int = 100, category: Optional[str] = None
) -> Sequence[Attribute]: # 返回模型序列
    """
    异步获取属性列表，支持分页和按分类过滤。
    返回 Attribute ORM 对象列表。
    """
    logger.info(f"CRUD: 获取属性列表, skip={skip}, limit={limit}, category={category}")
    stmt = select(Attribute).order_by(Attribute.name).offset(skip).limit(limit)
    if category:
        stmt = stmt.filter(Attribute.category == category)

    result = await db.execute(stmt)
    attributes = result.scalars().all()
    logger.info(f"CRUD: 获取到 {len(attributes)} 个属性")
    return attributes # 直接返回 ORM 对象列表

async def create_attribute(db: AsyncSession, *, attribute_in: AttributeCreate) -> Attribute:
    """异步创建新属性。"""
    logger.info(f"CRUD: 尝试创建属性: Name='{attribute_in.name}', Category='{attribute_in.category}'")
    # 检查名称是否已存在
    existing_attribute = await get_attribute_by_name(db, name=attribute_in.name)
    if existing_attribute:
        logger.warning(f"CRUD: 属性名称 '{attribute_in.name}' 已存在，无法创建。")
        raise ValueError(f"属性名称 '{attribute_in.name}' 已存在。") # 抛出 ValueError

    db_attribute = Attribute(**attribute_in.model_dump()) # 从 Pydantic 创建模型实例
    db.add(db_attribute)
    try:
        await db.commit()
        await db.refresh(db_attribute)
        logger.info(f"CRUD: 成功创建属性 ID: {db_attribute.id}, Name: {db_attribute.name}")
        return db_attribute
    except (IntegrityError, sqlite3.IntegrityError) as e: # 捕获唯一约束错误
        await db.rollback()
        logger.error(f"CRUD: 创建属性 '{attribute_in.name}' 时发生数据库完整性错误: {e}", exc_info=False)
        raise ValueError(f"属性名称 '{attribute_in.name}' 可能已存在或违反数据库约束。") from e
    except SQLAlchemyError as e:
        await db.rollback()
        logger.error(f"CRUD: 创建属性 '{attribute_in.name}' 时发生数据库错误: {e}", exc_info=True)
        raise e # 重新抛出原始 SQLAlchemy 错误

async def update_attribute(
    db: AsyncSession, *, db_attribute: Attribute, attribute_in: AttributeUpdate
) -> Attribute:
    """异步更新属性。"""
    logger.info(f"CRUD: 尝试更新属性 ID: {db_attribute.id}, Name: {db_attribute.name}")
    update_data = attribute_in.model_dump(exclude_unset=True)

    if not update_data:
        logger.info(f"CRUD: 没有提供更新数据，属性 ID {db_attribute.id} 未更改。")
        return db_attribute

    # 检查新名称是否与现有其他属性冲突
    new_name = update_data.get("name")
    if new_name and new_name != db_attribute.name:
        existing_attribute = await get_attribute_by_name(db, name=new_name)
        if existing_attribute:
            logger.warning(f"CRUD: 更新失败，新的属性名称 '{new_name}' 已被 ID {existing_attribute.id} 使用。")
            raise ValueError(f"属性名称 '{new_name}' 已存在。")

    for field, value in update_data.items():
        setattr(db_attribute, field, value)

    db.add(db_attribute)
    try:
        await db.commit()
        await db.refresh(db_attribute)
        logger.info(f"CRUD: 成功更新属性 ID: {db_attribute.id}")
        return db_attribute
    except (IntegrityError, sqlite3.IntegrityError) as e:
        await db.rollback()
        logger.error(f"CRUD: 更新属性 ID {db_attribute.id} 时发生数据库完整性错误: {e}", exc_info=False)
        raise ValueError(f"更新属性时名称 '{update_data.get('name')}' 可能已存在或违反数据库约束。") from e
    except SQLAlchemyError as e:
        await db.rollback()
        logger.error(f"CRUD: 更新属性 ID {db_attribute.id} 时发生数据库错误: {e}", exc_info=True)
        raise e

async def delete_attribute(db: AsyncSession, attribute_id: int) -> bool:
    """异步删除属性 (需要注意关联关系)。"""
    logger.warning(f"CRUD: 尝试删除属性 ID: {attribute_id}")
    db_attribute = await get_attribute(db, attribute_id=attribute_id)
    if not db_attribute:
        logger.error(f"CRUD: 无法删除，未找到属性 ID: {attribute_id}")
        return False

    # 警告：直接删除可能导致 assessment_attributes 表中的外键约束失败（如果数据库强制执行）
    # 或留下孤立的关联记录。最佳实践是先解除关联。
    # 在这里，我们先尝试直接删除，如果失败则提示需要先解除关联。
    # 更安全的做法是先查询是否有评估关联了此属性。
    # stmt_count = select(func.count()).select_from(assessment_attributes_table).where(assessment_attributes_table.c.attribute_id == attribute_id)
    # count_result = await db.execute(stmt_count)
    # associated_count = count_result.scalar_one_or_none()
    # if associated_count and associated_count > 0:
    #     logger.error(f"CRUD: 无法删除属性 ID {attribute_id}，因为它仍关联着 {associated_count} 个评估记录。")
    #     raise ValueError(f"无法删除属性，因为它仍被 {associated_count} 个评估使用。请先解除关联。")

    try:
        await db.delete(db_attribute)
        await db.commit()
        logger.info(f"CRUD: 成功删除属性 ID: {attribute_id}")
        return True
    except (IntegrityError, sqlite3.IntegrityError) as e: # 特别是外键约束错误
         await db.rollback()
         logger.error(f"CRUD: 删除属性 ID {attribute_id} 时发生完整性错误（可能仍被评估使用）: {e}", exc_info=False)
         raise ValueError(f"无法删除属性，可能它仍被某些评估使用。错误: {e}") from e
    except SQLAlchemyError as e:
        await db.rollback()
        logger.error(f"CRUD: 删除属性 ID {attribute_id} 时发生数据库错误: {e}", exc_info=True)
        raise e

================================================================================

--- File: PsychologyAnalysis\app\crud\interrogation.py ---
# 文件路径: PsychologyAnalysis/app/crud/interrogation.py

import logging
from typing import Optional, Dict, Any, List, Tuple
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy.future import select
from sqlalchemy import func, desc  # 确保导入 func 和 desc
from sqlalchemy.exc import SQLAlchemyError

from app.models.interrogation import InterrogationRecord
from app.schemas.interrogation import InterrogationRecordUpdate
from app.core.config import settings

logger = logging.getLogger(settings.APP_NAME)

async def create_interrogation(
    db: AsyncSession, *, interrogator_id: int, basic_info: Dict[str, Any], qas: List[Dict[str, str]]
) -> InterrogationRecord:
    """异步创建一条新的审讯记录。"""
    logger.info(f"CRUD: 准备为审讯员 ID {interrogator_id} 创建新的审讯记录")
    try:
        db_obj = InterrogationRecord(
            interrogator_id=interrogator_id,
            basic_info=basic_info,
            qas=qas,
            status="ongoing"
        )
        db.add(db_obj)
        await db.commit()
        await db.refresh(db_obj)
        logger.info(f"CRUD: 成功创建审讯记录 ID: {db_obj.id}")
        return db_obj
    except SQLAlchemyError as e:
        await db.rollback()
        logger.error(f"CRUD: 创建审讯记录时发生数据库错误: {e}", exc_info=True)
        raise e
    except Exception as e:
        await db.rollback()
        logger.error(f"CRUD: 创建审讯记录时发生意外错误: {e}", exc_info=True)
        raise e

async def get_interrogation(db: AsyncSession, record_id: int) -> Optional[InterrogationRecord]:
    """异步根据 ID 获取审讯记录。"""
    logger.debug(f"CRUD: 尝试查找审讯记录 ID: {record_id}")
    try:
        result = await db.execute(select(InterrogationRecord).filter(InterrogationRecord.id == record_id))
        found_obj = result.scalar_one_or_none()
        if found_obj:
            logger.debug(f"CRUD: 已找到审讯记录 ID: {record_id}")
        else:
            logger.debug(f"CRUD: 未找到审讯记录 ID: {record_id}")
        return found_obj
    except SQLAlchemyError as e:
        logger.error(f"CRUD: 获取审讯记录 ID {record_id} 时发生数据库错误: {e}", exc_info=True)
        raise e

async def update_interrogation(
    db: AsyncSession, *, record_id: int, update_data: InterrogationRecordUpdate
) -> Optional[InterrogationRecord]:
    """异步更新指定的审讯记录。"""
    logger.info(f"CRUD: 准备更新审讯记录 ID: {record_id}")
    db_obj = await get_interrogation(db, record_id=record_id)
    if not db_obj:
        logger.warning(f"CRUD: 更新审讯记录失败，未找到 ID: {record_id}")
        return None
        
    update_dict = update_data.model_dump(exclude_unset=True)
    if not update_dict:
         logger.info(f"CRUD: 没有提供需要更新的字段，审讯记录 ID: {record_id} 未更改。")
         return db_obj

    logger.debug(f"CRUD: 将要更新的字段 (ID: {record_id}): {list(update_dict.keys())}")

    for field, value in update_dict.items():
        setattr(db_obj, field, value)

    db.add(db_obj)
    try:
        await db.commit()
        await db.refresh(db_obj)
        logger.info(f"CRUD: 成功更新审讯记录 ID: {record_id}")
        return db_obj
    except SQLAlchemyError as e:
        await db.rollback()
        logger.error(f"CRUD: 更新审讯记录 ID {record_id} 时发生数据库错误: {e}", exc_info=True)
        raise e
    except Exception as e:
        await db.rollback()
        logger.error(f"CRUD: 更新审讯记录 ID {record_id} 时发生意外错误: {e}", exc_info=True)
        raise e

# [+] 新增: 获取审讯记录列表的函数
async def get_multi(db: AsyncSession, *, skip: int = 0, limit: int = 100) -> Tuple[List[InterrogationRecord], int]:
    """
    异步获取审讯记录列表，支持分页，并返回总数。
    """
    logger.info(f"CRUD: 获取审讯记录列表, skip={skip}, limit={limit}")
    try:
        # 查询当前页的记录
        stmt_records = select(InterrogationRecord).order_by(desc(InterrogationRecord.updated_at)).offset(skip).limit(limit)
        result_records = await db.execute(stmt_records)
        records = result_records.scalars().all()
        
        # 查询总记录数
        stmt_count = select(func.count()).select_from(InterrogationRecord)
        result_count = await db.execute(stmt_count)
        total_count = result_count.scalar_one()
        
        logger.info(f"CRUD: 找到 {len(records)} 条审讯记录，总数: {total_count}")
        return list(records), total_count
    except SQLAlchemyError as e:
        logger.error(f"CRUD: 获取审讯记录列表时发生数据库错误: {e}", exc_info=True)
        raise e

================================================================================

--- File: PsychologyAnalysis\app\crud\stats.py ---
# FILE: app/crud/stats.py (新建)
import logging
from typing import Dict, List, Any
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy.future import select
from sqlalchemy import func # 导入 SQL 函数

from app.models.user import User # 导入 User 模型 (如果按性别统计需要 User 表)
from app.models.assessment import Assessment # 导入 Assessment 模型 (如果按年龄统计需要 Assessment 表)
from app.core.config import settings

logger = logging.getLogger(settings.APP_NAME)

async def get_age_distribution(db: AsyncSession) -> Dict[str, List[Any]]:
    """
    异步获取评估记录中的年龄分布统计数据。
    注意: 这依赖于 Assessment 模型中 'age' 列有数据。
    """
    logger.info("CRUD Stats: 计算年龄分布")
    # 定义年龄段
    age_bins = {
        '<18': (0, 17),
        '18-25': (18, 25),
        '26-35': (26, 35),
        '36-45': (36, 45),
        '46-55': (46, 55),
        '56+': (56, 999), # 使用一个较大的上限
        '未知': (None, None) # 处理空值
    }
    labels = list(age_bins.keys())
    values = [0] * len(labels)

    try:
        # 查询所有有效的年龄
        stmt = select(Assessment.age)
        result = await db.execute(stmt)
        ages = result.scalars().all()

        # 在 Python 中进行分组计数
        for age in ages:
            found = False
            for i, (label, (min_age, max_age)) in enumerate(age_bins.items()):
                 if label == '未知': continue # 跳过未知标签的 bin 定义
                 if age is None:
                     if label == '未知': # 应该不会执行到这里，但作为后备
                         values[labels.index('未知')] += 1
                         found = True
                         break
                     continue # 非未知标签不匹配 None age

                 # 确保 age 是数字类型
                 if isinstance(age, (int, float)):
                     if min_age is not None and max_age is not None and min_age <= age <= max_age:
                         values[i] += 1
                         found = True
                         break
                 else:
                      logger.warning(f"CRUD Stats: 在年龄分布计算中遇到非数字年龄值: {age} (类型: {type(age)})，已忽略。")

            if not found: # 处理 None 和未匹配的年龄
                 if age is None:
                    values[labels.index('未知')] += 1
                 else:
                    logger.warning(f"CRUD Stats: 年龄 {age} 未落入任何定义的区间，已忽略。")

        logger.info(f"CRUD Stats: 年龄分布计算完成 - Labels: {labels}, Values: {values}")
        return {"labels": labels, "values": values}

    except Exception as e:
        logger.error(f"CRUD Stats: 计算年龄分布时出错: {e}", exc_info=True)
        # 返回空或默认值，避免 API 失败
        return {"labels": labels, "values": [0] * len(labels)}


async def get_gender_distribution(db: AsyncSession) -> Dict[str, List[Any]]:
    """
    异步获取评估记录中的性别分布统计数据。
    注意: 这依赖于 Assessment 模型中 'gender' 列有数据。
    """
    logger.info("CRUD Stats: 计算性别分布")
    labels = []
    values = []
    try:
        # 使用 SQLAlchemy 的 func.count 和 group_by 进行聚合查询
        stmt = (
            select(Assessment.gender, func.count(Assessment.id).label('count'))
            .group_by(Assessment.gender)
            .order_by(Assessment.gender) # 按性别排序以保持一致
        )
        result = await db.execute(stmt)
        rows = result.all() # 获取所有 (gender, count) 对

        # 处理结果
        if not rows:
            logger.info("CRUD Stats: 性别分布数据为空。")
            return {"labels": ["无数据"], "values": [0]}

        for row in rows:
            gender = row.gender if row.gender else "未知" # 处理 NULL 值
            count = row.count
            labels.append(gender)
            values.append(count)

        logger.info(f"CRUD Stats: 性别分布计算完成 - Labels: {labels}, Values: {values}")
        return {"labels": labels, "values": values}

    except Exception as e:
        logger.error(f"CRUD Stats: 计算性别分布时出错: {e}", exc_info=True)
        return {"labels": ["错误"], "values": [0]}

# --- (可选) 其他统计函数 ---
# async def get_scale_usage(db: AsyncSession) -> Dict[str, List[Any]]: ...
# async def get_assessment_status_distribution(db: AsyncSession) -> Dict[str, List[Any]]: ...

================================================================================

--- File: PsychologyAnalysis\app\crud\user.py ---
# 文件路径: PsychologyAnalysis/app/crud/user.py

import logging
from typing import Tuple, List, Optional
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy.future import select
from sqlalchemy import func

# --- 核心应用导入 ---
from app.core.security import get_password_hash, verify_password
from app.core.config import settings
from app.models.user import User
from app.schemas.user import UserCreate, UserUpdate, UserUpdateAdmin

# --- 日志设置 ---
logger = logging.getLogger(settings.APP_NAME)


# --- 用户认证 ---

async def authenticate(db: AsyncSession, *, username: str, password: str) -> Optional[User]:
    """
    通过用户名和密码对用户进行身份验证。
    这是登录流程的核心数据库操作。

    Args:
        db (AsyncSession): 数据库会话。
        username (str): 需要认证的用户名。
        password (str): 用户提供的明文密码。

    Returns:
        Optional[User]: 如果认证成功，返回 User ORM 对象；否则返回 None。
    """
    logger.debug(f"CRUD: 正在尝试认证用户 '{username}'")
    
    # 步骤1: 根据用户名查找用户
    user = await get_user_by_username(db, username=username)
    if not user:
        logger.debug(f"CRUD: 认证失败，用户 '{username}' 未在数据库中找到。")
        return None
        
    # 步骤2: 验证密码是否匹配
    if not verify_password(password, user.hashed_password):
        logger.debug(f"CRUD: 认证失败，用户 '{username}' 的密码不正确。")
        return None
        
    logger.debug(f"CRUD: 用户 '{username}' 认证成功。")
    return user


# --- 用户查询 (Getters) ---

async def get_user(db: AsyncSession, user_id: int) -> Optional[User]:
    """根据用户ID异步获取单个用户。"""
    result = await db.execute(select(User).filter(User.id == user_id))
    return result.scalar_one_or_none()

async def get_user_by_username(db: AsyncSession, username: str) -> Optional[User]:
    """根据用户名异步获取单个用户，用于登录和注册检查。"""
    result = await db.execute(select(User).filter(User.username == username))
    return result.scalar_one_or_none()

async def get_user_by_email(db: AsyncSession, email: str) -> Optional[User]:
    """根据邮箱异步获取单个用户，用于注册时检查邮箱是否已被使用。"""
    result = await db.execute(select(User).filter(User.email == email))
    return result.scalar_one_or_none()

async def get_users(db: AsyncSession, skip: int = 0, limit: int = 100) -> Tuple[List[User], int]:
    """
    分页获取用户列表以及用户总数。
    主要用于后台管理界面。

    Args:
        db (AsyncSession): 数据库会话。
        skip (int): 跳过的记录数。
        limit (int): 返回的最大记录数。

    Returns:
        Tuple[List[User], int]: 一个包含用户列表和总用户数的元组。
    """
    # 查询指定范围的用户列表
    stmt_users = select(User).offset(skip).limit(limit).order_by(User.id)
    result_users = await db.execute(stmt_users)
    users = list(result_users.scalars().all())
    
    # 查询用户总数，用于前端分页计算
    stmt_count = select(func.count()).select_from(User)
    result_count = await db.execute(stmt_count)
    total_count = result_count.scalar_one()
    
    return users, total_count


# --- 用户创建与更新 (Create/Update) ---

async def create_user(db: AsyncSession, *, user_in: UserCreate) -> User:
    """
    异步创建新用户。

    Args:
        db (AsyncSession): 数据库会话。
        user_in (UserCreate): 包含新用户信息的Pydantic模型。

    Returns:
        User: 创建成功后的 User ORM 对象。
    """
    # 将明文密码哈希化处理，确保数据库中不存储明文密码
    hashed_password = get_password_hash(user_in.password)
    
    # 创建User模型实例
    db_user = User(
        username=user_in.username,
        email=user_in.email,
        full_name=user_in.full_name,
        hashed_password=hashed_password,
        is_active=user_in.is_active,
        is_superuser=user_in.is_superuser,
    )
    
    # 将新用户添加到会话、提交到数据库并刷新以获取ID等信息
    db.add(db_user)
    await db.commit()
    await db.refresh(db_user)
    
    return db_user

async def update_user(db: AsyncSession, *, db_user: User, user_in: UserUpdate) -> User:
    """
    异步更新普通用户信息（通常由用户自己操作）。

    Args:
        db (AsyncSession): 数据库会话。
        db_user (User): 从数据库中获取的、要被更新的User对象。
        user_in (UserUpdate): 包含待更新字段的Pydantic模型。

    Returns:
        User: 更新后的 User ORM 对象。
    """
    # model_dump(exclude_unset=True) 仅包含在请求中明确提供的字段
    update_data = user_in.model_dump(exclude_unset=True)
    
    # 如果请求中包含密码，则进行哈希处理并更新
    if "password" in update_data and update_data["password"]:
        hashed_password = get_password_hash(update_data["password"])
        db_user.hashed_password = hashed_password
    
    # 遍历其他字段并更新
    for field, value in update_data.items():
        if field != "password":
            setattr(db_user, field, value)
            
    db.add(db_user)
    await db.commit()
    await db.refresh(db_user)
    
    return db_user

async def update_user_admin(db: AsyncSession, *, db_user: User, user_in: UserUpdateAdmin) -> User:
    """
    异步更新用户信息（由管理员操作，权限更高）。

    Args:
        db (AsyncSession): 数据库会话。
        db_user (User): 要被更新的User对象。
        user_in (UserUpdateAdmin): 包含待更新字段的管理员专用Pydantic模型。

    Returns:
        User: 更新后的 User ORM 对象。
    """
    # 逻辑与 update_user 类似，但使用 UserUpdateAdmin schema，可能包含更多可修改字段
    update_data = user_in.model_dump(exclude_unset=True)
    
    if "password" in update_data and update_data["password"]:
        hashed_password = get_password_hash(update_data["password"])
        db_user.hashed_password = hashed_password
        
    for field, value in update_data.items():
        if field != "password":
            setattr(db_user, field, value)
            
    db.add(db_user)
    await db.commit()
    await db.refresh(db_user)
    
    return db_user

================================================================================

--- File: PsychologyAnalysis\app\db\__init__.py ---
# 可以为空，或者导入 Base 和 SessionLocal 以便更容易访问
from .base_class import Base
#from .session import SessionLocal, engine

================================================================================

--- File: PsychologyAnalysis\app\db\base_class.py ---
from sqlalchemy.orm import declarative_base

# 创建所有 ORM 模型将继承的基类
Base = declarative_base()

================================================================================

--- File: PsychologyAnalysis\app\db\init_db.py ---
# app/db/init_db.py (使用 run_sync 修正)
import logging
import asyncio  # 1. 导入 asyncio 库
from app.db.session import async_engine # 确保你导入的是 async_engine
# 导入所有需要创建表的模型，以及 Base
from app.db.base_class import Base
from app.models.user import User # 导入 User 模型
# from app.models.assessment import Assessment # 如果有其他模型，也导入

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# 2. 将 init_db 函数改为异步函数 (async def)
async def init_db() -> None:
    """
    根据 SQLAlchemy 模型异步地创建数据库表。
    """
    logger.info("Attempting to create database tables asynchronously...")
    try:
        # 3. 使用异步上下文管理器获取连接
        async with async_engine.begin() as conn:
            logger.info("Acquired async connection. Running create_all synchronously...")
            # 4. 在异步连接上，使用 run_sync 来执行同步的 create_all 方法
            # 这会将 create_all 的执行委托给事件循环的线程池
            await conn.run_sync(Base.metadata.create_all)
            logger.info("Base.metadata.create_all executed via run_sync.")

        logger.info("Database tables created successfully (if they didn't exist).")
    except Exception as e:
        logger.error(f"Error creating database tables: {e}", exc_info=True)
        raise e
    # finally:
        # 通常不需要手动 dispose，async with 会处理好连接释放
        # 如果需要确保引擎完全关闭（比如脚本结束时），可以取消注释下面两行
        # await async_engine.dispose()
        # logger.info("Async engine disposed.")

if __name__ == "__main__":
    print("Running database initialization...")
    # 5. 使用 asyncio.run() 来运行顶层的异步函数 init_db
    try:
        asyncio.run(init_db())
        print("Database initialization finished successfully.")
    except Exception as e:
        # 捕获在 init_db 中可能重新抛出的异常
        print(f"Database initialization failed: {e}")

================================================================================

--- File: PsychologyAnalysis\app\db\session.py ---
# app/db/session.py
import logging
from sqlalchemy.ext.asyncio import create_async_engine, async_sessionmaker, AsyncSession
from app.core.config import settings # 导入你的设置

logger = logging.getLogger(settings.APP_NAME) # Or use a specific logger

# --- Asynchronous Database Engine ---
# Create an asynchronous engine using the DATABASE_URL from settings.
# Ensure settings.DATABASE_URL is like "sqlite+aiosqlite:///path/to/your.db"
logger.info(f"Creating async engine for database: {settings.DATABASE_URL}")
try:
    async_engine = create_async_engine(
        settings.DATABASE_URL,
        # echo=True,  # Uncomment for debugging SQL statements
        future=True  # Enables SQLAlchemy 2.0 style features
        # connect_args can be added here if needed, but typically not for aiosqlite
    )
    logger.info("Async engine created successfully.")
except Exception as e:
    logger.critical(f"Failed to create async engine: {e}", exc_info=True)
    raise e # Re-raise the exception to stop application startup if engine fails

# --- Asynchronous Database Session Maker ---
# Create an asynchronous session factory configured to use the async engine.
# expire_on_commit=False is recommended for FastAPI dependency usage,
# preventing attributes from being expired after commit within a request.
AsyncSessionLocal = async_sessionmaker(
    bind=async_engine,
    class_=AsyncSession,       # Specify the use of AsyncSession
    expire_on_commit=False,    # Keep objects accessible after commit within the session scope
    autocommit=False,          # Standard setting, commits are manual
    autoflush=False            # Standard setting, flushing is manual or on commit
)
logger.info("AsyncSessionLocal (async session maker) configured.")

# Note: You will typically use this AsyncSessionLocal in your dependency
# injection function (e.g., get_db in deps.py) to get session instances.

================================================================================

--- File: PsychologyAnalysis\app\models\__init__.py ---
from .user import User
from .assessment import Assessment
from .interrogation import InterrogationRecord
from .attribute import Attribute # <--- 新增导入
# 关联表通常不需要在这里导出，除非你直接使用它

__all__ = [
    "User",
    "Assessment",
    "InterrogationRecord",
    "Attribute", # <--- 添加到列表
]

================================================================================

--- File: PsychologyAnalysis\app\models\assessment.py ---
# FILE: app/models/assessment.py (修改后，添加与 Attribute 的多对多关系)
from sqlalchemy import ( # 按字母顺序或分组导入，更清晰
    Table, # <--- 新增: 用于定义关联表
    Column,
    Integer,
    String,
    Boolean,
    Text,
    TIMESTAMP,
    ForeignKey,
    Index
)
from sqlalchemy.orm import relationship # <--- 新增: 用于定义 ORM 关系
from sqlalchemy.sql import func
from .association_tables import assessment_attributes_table
from app.db.base_class import Base # 确保从正确的路径导入 Base
# 注意: Attribute 模型将在 app/models/attribute.py 中定义

# --- 关联表定义 (多对多: Assessment <-> Attribute) ---
# 这个表不需要自己的模型类，SQLAlchemy 会通过 relationship 处理它
# assessment_attributes_table = Table(
#     "assessment_attributes", # 数据库中的关联表名
#     Base.metadata, # 关联到 Base 的元数据
#     Column("assessment_id", Integer, ForeignKey("analysis_data.id"), primary_key=True), # 外键指向 Assessment 表，是复合主键的一部分
#     Column("attribute_id", Integer, ForeignKey("attributes.id"), primary_key=True)   # 外键指向 Attribute 表，是复合主键的一部分
#     # 注意: ForeignKey("attributes.id") 假设你将在 attribute.py 中创建名为 "attributes" 的表
# )
# --- 关联表定义结束 ---

# 定义状态常量 (可选，但推荐)
STATUS_PENDING = "pending"
STATUS_PROCESSING = "processing"
STATUS_COMPLETE = "complete"
STATUS_FAILED = "failed"

class Assessment(Base):
    __tablename__ = "analysis_data" # 数据库中的表名

    id = Column(Integer, primary_key=True, index=True) # 主键，自动索引
    image_path = Column(Text, nullable=True) # 图片文件相对路径或标识符
    subject_name = Column(String(200), index=True) # 被测者姓名，添加索引便于查询
    age = Column(Integer) # 年龄
    gender = Column(String(10)) # 性别
    questionnaire_type = Column(String(100), nullable=True) # 使用的量表类型代码
    questionnaire_data = Column(Text, nullable=True) # 存储量表答案的 JSON 字符串
    report_text = Column(Text, nullable=True) # 存储生成的报告文本

    # 时间戳
    created_at = Column(TIMESTAMP, server_default=func.now(), nullable=False) # 创建时间，数据库自动设置
    updated_at = Column(TIMESTAMP, server_default=func.now(), onupdate=func.now(), nullable=False) # 更新时间

    # 详细信息字段
    id_card = Column(String(50), unique=True, index=True, nullable=True) # 身份证号，唯一且有索引
    occupation = Column(String(100), nullable=True) # 职业
    case_name = Column(String(200), nullable=True) # 案件名称
    case_type = Column(String(100), nullable=True) # 案件类型
    identity_type = Column(String(100), nullable=True) # 人员身份
    person_type = Column(String(100), nullable=True) # 人员类型
    marital_status = Column(String(50), nullable=True) # 婚姻状况
    children_info = Column(Text, nullable=True) # 子女情况 (文本描述)
    criminal_record = Column(Integer, default=0, nullable=False) # 有无犯罪前科 (0:无, 1:有)
    health_status = Column(Text, nullable=True) # 健康情况 (文本描述)
    phone_number = Column(String(50), nullable=True) # 手机号
    domicile = Column(String(200), nullable=True) # 归属地

    # 外键，链接到提交此评估的用户
    submitter_id = Column(Integer, ForeignKey("users.id"), nullable=True, index=True) # 提交者用户ID，允许为空，添加索引

    # 评估状态字段
    status = Column(
        String(30),
        nullable=False,
        default=STATUS_PENDING,
        server_default=STATUS_PENDING,
        index=True
    )

    # --- 新增的多对多关系 ---
    # 定义与 Attribute 模型的关系
    # secondary=assessment_attributes_table 指定了用于连接的关联表
    # back_populates="assessments" 用于在 Attribute 模型中建立反向关系，
    #   假设 Attribute 模型中会有一个名为 'assessments' 的关系指向 Assessment
    # lazy="selectin" 是一种推荐的加载策略，可以在访问 assessment.attributes 时高效加载关联的属性
    attributes = relationship(
        "Attribute", # 指向关联的模型类名 (字符串形式，避免循环导入)
        secondary=assessment_attributes_table, # 指定关联表
        back_populates="assessments", # 指定对方模型中的反向关系属性名
        lazy="selectin" # 推荐的加载策略
    )
    # --- 关系定义结束 ---

    # --- (可选) 与 User 的关系 ---
    # 如果 User 模型中定义了 back_populates="assessments"
    # submitter = relationship("User", back_populates="assessments", lazy="selectin")
    # --- 关系定义结束 ---

    # (可选) 定义表级索引，如果需要复合索引
    # __table_args__ = (
    #     Index('ix_assessment_id_card_status', 'id_card', 'status'), # 示例复合索引
    # )

    def __repr__(self):
        """提供一个方便调试的对象表示"""
        return (f"<Assessment(id={self.id}, subject='{self.subject_name}', "
                f"type='{self.questionnaire_type}', status='{self.status}')>")

================================================================================

--- File: PsychologyAnalysis\app\models\association_tables.py ---
# FILE: app/models/association_tables.py
from sqlalchemy import Table, Column, Integer, ForeignKey
from app.db.base_class import Base # 导入 Base 以获取 metadata

# 定义评估与属性的关联表
assessment_attributes_table = Table(
    "assessment_attributes", # 表名
    Base.metadata,           # 关联到 Base 的元数据
    Column("assessment_id", Integer, ForeignKey("analysis_data.id"), primary_key=True), # 外键关联 analysis_data 表的 id
    Column("attribute_id", Integer, ForeignKey("attributes.id"), primary_key=True)     # 外键关联 attributes 表的 id
)

================================================================================

--- File: PsychologyAnalysis\app\models\attribute.py ---
# FILE: app/models/attribute.py
from sqlalchemy import Column, Integer, String, Text, Index
from sqlalchemy.orm import relationship
from app.db.base_class import Base
from .association_tables import assessment_attributes_table # 稍后创建这个文件

class Attribute(Base):
    __tablename__ = "attributes"

    id = Column(Integer, primary_key=True, index=True)
    name = Column(String(100), unique=True, index=True, nullable=False) # 属性名称，唯一且索引
    description = Column(Text, nullable=True)                          # 属性描述
    category = Column(String(50), index=True, nullable=True)           # 属性分类（可选）

    # 定义与 Assessment 的多对多关系
    # 'assessments' 是在 Attribute 实例上访问关联 Assessment 对象的属性名
    # secondary 指向我们即将定义的关联表
    # back_populates 用于双向关系，需要在 Assessment 模型中定义 'attributes'
    assessments = relationship(
        "Assessment",
        secondary=assessment_attributes_table,
        back_populates="attributes" # 与 Assessment 模型中的关系名对应
    )

    def __repr__(self):
        return f"<Attribute(id={self.id}, name='{self.name}', category='{self.category}')>"

# 可以添加表级索引
# __table_args__ = (
#     Index('ix_attribute_category_name', 'category', 'name'),
# )

================================================================================

--- File: PsychologyAnalysis\app\models\interrogation.py ---
# FILE: app/models/interrogation.py (新建)
from sqlalchemy import Column, Integer, String, JSON, TIMESTAMP, ForeignKey, Text
from sqlalchemy.sql import func
from app.db.base_class import Base

class InterrogationRecord(Base):
    __tablename__ = "interrogation_records"

    id = Column(Integer, primary_key=True, index=True)
    # 关联进行审讯的管理员 (假设 User 模型已存在)
    interrogator_id = Column(Integer, ForeignKey("users.id"), nullable=False, index=True)
    # 存储 JSON 格式的基础信息
    basic_info = Column(JSON, nullable=True)
    # 存储 JSON 格式的问答对列表 [{'q': '...', 'a': '...'}, ...]
    qas = Column(JSON, nullable=True)
    # 记录状态: ongoing, completed, cancelled
    status = Column(String(50), nullable=False, default="ongoing", index=True)
    # 完整的审讯文本 (可选，如果需要存储最终格式化文本)
    full_text = Column(Text, nullable=True)

    created_at = Column(TIMESTAMP, server_default=func.now(), nullable=False)
    updated_at = Column(TIMESTAMP, server_default=func.now(), onupdate=func.now(), nullable=False)

    def __repr__(self):
        person_name = self.basic_info.get("person_name", "未知") if isinstance(self.basic_info, dict) else "未知"
        return f"<InterrogationRecord(id={self.id}, person='{person_name}', status='{self.status}')>"

# --- 如果使用 SQLite，可能需要为 JSON 列添加索引（取决于具体查询需求） ---
# from sqlalchemy import Index
# Index('ix_interrogation_basic_info_name', InterrogationRecord.basic_info['person_name']) # 示例

================================================================================

--- File: PsychologyAnalysis\app\models\user.py ---
from sqlalchemy import Column, Integer, String, Boolean
from app.db.base_class import Base # 从我们创建的基类导入

class User(Base):
    __tablename__ = "users" # 数据库中的表名

    id = Column(Integer, primary_key=True, index=True)
    # 用户名，唯一且加索引，不允许为空
    username = Column(String(100), unique=True, index=True, nullable=False)
    # 邮箱，唯一且加索引，可以为空
    email = Column(String(255), unique=True, index=True, nullable=True)
    # 存储哈希后的密码，不允许为空
    hashed_password = Column(String(255), nullable=False)
    # 全名，可以为空
    full_name = Column(String(100), nullable=True)
    # 是否激活，默认为 True
    is_active = Column(Boolean(), default=True, nullable=False)
    # 是否为超级管理员，默认为 False
    is_superuser = Column(Boolean(), default=False, nullable=False)

    # __repr__ 方法用于方便调试时打印对象信息
    def __repr__(self):
        return f"<User(id={self.id}, username='{self.username}', email='{self.email}')>"

# 你可以在这里定义其他模型，如 Assessment, Report 等
# 它们都需要继承自 Base

================================================================================

--- File: PsychologyAnalysis\app\routers\__init__.py ---


================================================================================

--- File: PsychologyAnalysis\app\routers\admin.py ---
# 文件路径: PsychologyAnalysis/app/routers/admin.py

import logging
from typing import List, Optional, Dict, Any
from datetime import datetime

from fastapi import APIRouter, Depends, HTTPException, status, Query, Body, Response
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy.orm import class_mapper
from pydantic import BaseModel, Field
from openai import OpenAI

# --- 核心应用导入 ---
from app.core.config import settings
from app.core.deps import get_db, get_current_active_superuser
from app import crud, models, schemas
# --- 导入专项指导方案的响应模型 ---
from app.schemas.guidance import GuidanceWithReportResponse, ReportDataForGuidance

# --- AI & 工具函数导入 ---
try:
    from src.guidance_generator import generate_guidance
except ImportError:
    generate_guidance = None
    logging.getLogger(settings.APP_NAME).warning("未能导入 src.guidance_generator.generate_guidance，相关功能将不可用。")

try:
    from src.interrogation_ai import suggest_next_question
except ImportError:
    suggest_next_question = None
    logging.getLogger(settings.APP_NAME).warning("未能导入 src.interrogation_ai.suggest_next_question，相关功能将不可用。")

# --- 日志和路由设置 ---
logger = logging.getLogger(settings.APP_NAME)
router = APIRouter(
    prefix="/admin",
    tags=["后台管理 (Admin)"],
    dependencies=[Depends(get_current_active_superuser)]
)


# --- 辅助函数 ---
def alchemy_to_dict(obj: Any) -> Dict[str, Any]:
    """将SQLAlchemy对象转换为字典。"""
    if not obj:
        return {}
    column_names = [c.key for c in class_mapper(obj.__class__).columns]
    return {c: getattr(obj, c) for c in column_names}

def get_ai_client():
    """依赖注入函数：获取一个配置好的AI客户端实例。"""
    if not settings.DASHSCOPE_API_KEY:
        logger.error("AI服务未配置：环境变量 DASHSCOPE_API_KEY 未设置。")
        raise HTTPException(status_code=503, detail="AI服务未配置 (缺少API Key)")
    return OpenAI(api_key=settings.DASHSCOPE_API_KEY, base_url="https://dashscope.aliyuncs.com/compatible-mode/v1")


# ====================================================================
# --- 评估记录管理 ---
# ====================================================================

@router.get(
    "/assessments/search",
    response_model=List[schemas.AssessmentSummary],
    summary="查询评估记录"
)
async def search_assessments(
    id_card: Optional[str] = Query(None, description="要查询的身份证号 (可选，不填则返回所有)"),
    db: AsyncSession = Depends(get_db)
):
    """
    根据身份证号查询评估记录。如果未提供身份证号，则返回最近的100条评估记录。
    """
    try:
        if id_card:
            logger.info(f"管理员正在按身份证号 '{id_card}' 查询评估记录")
            assessments = await crud.assessment.get_assessments_by_id_card(db, id_card=id_card)
        else:
            logger.info("管理员正在获取所有评估记录")
            assessments = await crud.assessment.get_multi(db, limit=100)
        
        if not assessments:
            return []
            
        logger.info(f"查询到 {len(assessments)} 条评估记录")
        return [schemas.AssessmentSummary.model_validate(a, from_attributes=True) for a in assessments]
    except Exception as e:
        logger.error(f"查询评估时出错 (ID卡: '{id_card}'): {e}", exc_info=True)
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail="查询评估记录时发生错误")


# ====================================================================
# --- 数据统计与AI分析 ---
# ====================================================================

@router.get(
    "/stats/demographics",
    response_model=schemas.DemographicsStats,
    summary="获取用户人口统计数据"
)
async def get_demographics_stats(db: AsyncSession = Depends(get_db)):
    """
    获取系统中所有已完成评估用户的年龄和性别分布数据。
    """
    logger.info("管理员请求人口统计数据")
    try:
        age_data = await crud.stats.get_age_distribution(db)
        gender_data = await crud.stats.get_gender_distribution(db)
        return schemas.DemographicsStats(ageData=age_data, genderData=gender_data)
    except Exception as e:
        logger.error(f"获取人口统计数据时出错: {e}", exc_info=True)
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail="获取统计数据时发生错误")

@router.post("/stats/ai-analysis", response_model=schemas.AIAnalysisResponse, summary="对统计数据进行AI智能分析")
async def perform_ai_analysis(
    request_data: schemas.AIAnalysisRequest,
    ai_client: OpenAI = Depends(get_ai_client),
    current_user: models.User = Depends(get_current_active_superuser)
):
    """
    接收人口统计数据，调用大语言模型生成专业的分析报告和洞察。
    """
    logger.info(f"管理员 {current_user.username} 请求对统计数据进行AI分析")
    age_data = request_data.demographics.ageData
    gender_data = request_data.demographics.genderData
    age_distribution_str = ", ".join([f"'{label}': {value}人" for label, value in zip(age_data.labels, age_data.values)])
    gender_distribution_str = ", ".join([f"'{label}': {value}人" for label, value in zip(gender_data.labels, gender_data.values)])
    
    prompt = f"""
    作为一名资深的警务数据分析专家，请根据以下系统用户的人口统计数据，撰写一份简洁、深刻的分析报告。
    **任务要求:**
    1.  **解读数据**: 不要仅仅复述数据，要解读数据背后可能反映的现象。
    2.  **识别特征**: 指出用户群体的主要特征。
    3.  **提出洞察**: 结合警务工作场景，提出1-2个基于这些数据特征的潜在洞察或管理建议。
    4.  **语言专业**: 使用专业、客观的分析语言。
    5.  **格式简洁**: 直接输出分析报告正文，无需标题。
    **原始数据:**
    - **年龄分布**: {age_distribution_str}
    - **性别分布**: {gender_distribution_str}
    **分析报告:**
    """
    messages = [{"role": "system", "content": "你是一位数据分析专家，擅长从数据中挖掘警务相关的洞察。"}, {"role": "user", "content": prompt}]
    
    try:
        completion = ai_client.chat.completions.create(model=settings.TEXT_MODEL, messages=messages, temperature=0.5, max_tokens=1000)
        analysis_text = completion.choices[0].message.content
        logger.info("AI 数据分析成功完成")
        return schemas.AIAnalysisResponse(analysis_text=analysis_text)
    except Exception as e:
        logger.error(f"调用AI进行数据分析时出错: {e}", exc_info=True)
        raise HTTPException(status_code=500, detail=f"AI分析服务出错: {e}")


# ====================================================================
# --- 辅助智能审讯笔录 ---
# ====================================================================

@router.post("/interrogation/start", response_model=schemas.InterrogationRecordRead, status_code=status.HTTP_201_CREATED, summary="开始新的审讯")
async def start_interrogation(basic_info: schemas.InterrogationBasicInfo = Body(...), db: AsyncSession = Depends(get_db), current_admin: models.User = Depends(get_current_active_superuser)):
    """
    根据前端提供的基本信息，创建一个新的审讯记录。
    """
    logger.info(f"管理员 {current_admin.username} 正在为 '{basic_info.person_name}' 开始新的审讯")
    filled_basic_info = basic_info.model_dump()
    initial_qas = []
    try:
        new_record = await crud.interrogation.create_interrogation(db=db, interrogator_id=current_admin.id, basic_info=filled_basic_info, qas=initial_qas)
        return schemas.InterrogationRecordRead.model_validate(new_record, from_attributes=True)
    except Exception as e:
        logger.error(f"创建审讯记录时出错: {e}", exc_info=True)
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail="无法开始新的审讯记录")

@router.post("/interrogation/{record_id}/suggest", response_model=List[str], summary="获取下一个审讯问题的 AI 建议")
async def suggest_interrogation_question(record_id: int, current_qas: List[schemas.InterrogationQAInput] = Body(...), db: AsyncSession = Depends(get_db)):
    """
    根据当前的审讯历史，调用AI生成下一步的建议问题。
    """
    logger.info(f"管理员请求审讯记录 ID: {record_id} 的下一个问题建议")
    if not suggest_next_question:
        raise HTTPException(status_code=status.HTTP_501_NOT_IMPLEMENTED, detail="AI 建议功能未配置")
    record = await crud.interrogation.get_interrogation(db, record_id=record_id)
    if not record:
        raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="审讯记录未找到")
    
    basic_info = record.basic_info or {}
    try:
        history_dicts = [qa.model_dump() for qa in current_qas]
        suggestions = suggest_next_question(basic_info=basic_info, history=history_dicts)
        return suggestions
    except Exception as e:
        logger.error(f"生成审讯建议时出错 (ID: {record_id}): {e}", exc_info=True)
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail="获取 AI 建议时出错")

@router.put("/interrogation/{record_id}", response_model=schemas.InterrogationRecordRead, summary="保存更新后的审讯笔录")
async def save_interrogation(record_id: int, record_update: schemas.InterrogationRecordUpdate = Body(...), db: AsyncSession = Depends(get_db)):
    """
    保存对审讯记录的更改，包括基本信息和问答对。
    """
    logger.info(f"管理员正在保存审讯记录 ID: {record_id}")
    try:
        updated_record = await crud.interrogation.update_interrogation(db=db, record_id=record_id, update_data=record_update)
        if not updated_record:
            raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="审讯记录未找到")
        return schemas.InterrogationRecordRead.model_validate(updated_record, from_attributes=True)
    except HTTPException as http_exc:
        raise http_exc
    except Exception as e:
        logger.error(f"保存审讯记录时出错 (ID: {record_id}): {e}", exc_info=True)
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail="保存审讯记录时发生错误")

@router.get("/interrogations/{record_id}", response_model=schemas.InterrogationRecordRead, summary="获取单个审讯记录详情")
async def get_interrogation_record(record_id: int, db: AsyncSession = Depends(get_db)):
    """
    根据ID获取单个完整的审讯记录详情。
    """
    logger.info(f"管理员请求审讯记录详情，ID: {record_id}")
    record = await crud.interrogation.get_interrogation(db, record_id=record_id)
    if not record:
        raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail=f"未找到 ID 为 {record_id} 的审讯记录")
    return record

@router.get("/interrogations", response_model=schemas.InterrogationListResponse, summary="获取审讯记录列表")
async def list_interrogations(db: AsyncSession = Depends(get_db), skip: int = Query(0, ge=0), limit: int = Query(10, ge=1, le=100)):
    """
    分页获取审讯记录列表的摘要信息。
    """
    logger.info(f"管理员请求审讯记录列表，skip={skip}, limit={limit}")
    try:
        records, total_count = await crud.interrogation.get_multi(db=db, skip=skip, limit=limit)
        summaries = [schemas.InterrogationSummary.from_orm(rec) for rec in records]
        return schemas.InterrogationListResponse(total=total_count, records=summaries)
    except Exception as e:
        logger.error(f"获取审讯记录列表时出错: {e}", exc_info=True)
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail="获取审讯记录列表失败")


# ====================================================================
# --- 专项指导方案 ---
# ====================================================================

async def get_guidance_for_person(
    db: AsyncSession,
    id_card: str,
    guidance_type: str
) -> GuidanceWithReportResponse:
    """
    为特定人员生成指导方案的内部核心函数。
    它会查找最新的评估报告，并调用AI生成指导方案，最终返回一个结构化的响应。
    """
    logger.info(f"为身份证号 '{id_card}' 生成 '{guidance_type}' 指导方案")
    if not generate_guidance:
        raise HTTPException(status_code=status.HTTP_501_NOT_IMPLEMENTED, detail="指导方案生成功能未配置")

    assessment = await crud.assessment.get_latest_completed_by_id_card(db, id_card=id_card)
    if not assessment:
        raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="未找到该身份证号对应的已完成评估报告")
    if not assessment.report_text:
        raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="找到评估记录，但报告内容为空")

    try:
        guidance_text = generate_guidance(report_text=assessment.report_text, scenario=guidance_type)
        if not guidance_text:
            raise ValueError("AI未能生成指导方案文本")
        
        logger.info(f"成功为身份证号 '{id_card}' 生成 '{guidance_type}' 指导方案")

        # 使用 ReportDataForGuidance 模型来验证和构造报告部分
        # from_attributes=True 会自动处理 SQLAlchemy ORM 对象到 Pydantic 模型的转换
        report_data_for_response = ReportDataForGuidance.model_validate(assessment, from_attributes=True)

        return GuidanceWithReportResponse(
            report=report_data_for_response,
            guidance=guidance_text
        )

    except ValueError as ve:
        logger.error(f"生成指导方案时值错误: {ve}", exc_info=True)
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail=f"生成指导方案失败: {ve}")
    except Exception as e:
        logger.error(f"生成指导方案时发生未知错误: {e}", exc_info=True)
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail="生成指导方案时发生内部错误")

@router.get(
    "/guidance/{scenario}",
    response_model=GuidanceWithReportResponse,
    summary="获取专项指导方案"
)
async def get_specific_guidance(
    scenario: str,
    id_card: str = Query(..., description="查询对象的身份证号"),
    db: AsyncSession = Depends(get_db)
):
    """
    统一的专项指导方案生成接口。
    - scenario: 'petitioner' (上访户), 'juvenile' (未成年人), 'police' (民辅警)
    """
    if scenario not in ["petitioner", "juvenile", "police"]:
        raise HTTPException(status_code=status.HTTP_400_BAD_REQUEST, detail="无效的指导方案场景。有效值为: petitioner, juvenile, police")
    return await get_guidance_for_person(db, id_card, scenario)


# ====================================================================
# --- 用户管理 ---
# ====================================================================

@router.get("/users", response_model=schemas.UserListResponse, summary="获取用户列表")
async def list_users(db: AsyncSession = Depends(get_db), skip: int = Query(0, ge=0), limit: int = Query(100, ge=1, le=200)):
    """
    分页获取系统中的所有用户列表。
    """
    logger.info(f"管理员请求用户列表，skip={skip}, limit={limit}")
    try:
        users, total_count = await crud.user.get_users(db, skip=skip, limit=limit)
        return schemas.UserListResponse(total=total_count, users=[schemas.User.model_validate(u, from_attributes=True) for u in users])
    except Exception as e:
        logger.error(f"获取用户列表时出错: {e}", exc_info=True)
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail="获取用户列表失败")

@router.patch("/users/{user_id}", response_model=schemas.User, summary="更新用户信息 (管理员)")
async def update_user_admin(user_id: int, user_in: schemas.UserUpdateAdmin = Body(...), db: AsyncSession = Depends(get_db), current_admin: models.User = Depends(get_current_active_superuser)):
    """
    管理员更新指定用户的部分或全部信息，如用户名、角色等。
    """
    logger.info(f"管理员 {current_admin.username} 正在更新用户 ID: {user_id}")
    db_user = await crud.user.get_user(db, user_id=user_id)
    if not db_user:
        raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="用户未找到")
    try:
        updated_user = await crud.user.update_user_admin(db=db, db_user=db_user, user_in=user_in)
        return schemas.User.model_validate(updated_user, from_attributes=True)
    except Exception as e:
        logger.error(f"管理员更新用户 ID {user_id} 时出错: {e}", exc_info=True)
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail="更新用户信息失败")


# ====================================================================
# --- 属性标签管理 (CRUD) ---
# ====================================================================

@router.post("/attributes", response_model=schemas.AttributeRead, status_code=status.HTTP_201_CREATED, summary="创建新属性标签")
async def create_new_attribute(attribute_in: schemas.AttributeCreate, db: AsyncSession = Depends(get_db)):
    """
    创建一个新的属性标签，用于后续给评估记录打标。
    """
    logger.info(f"管理员尝试创建属性: Name='{attribute_in.name}', Category='{attribute_in.category}'")
    try:
        return await crud.attribute.create_attribute(db=db, attribute_in=attribute_in)
    except ValueError as ve:
        raise HTTPException(status_code=status.HTTP_409_CONFLICT, detail=str(ve))
    except Exception as e:
        logger.error(f"创建属性时发生意外错误: {e}", exc_info=True)
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail="创建属性失败")

@router.get("/attributes", response_model=List[schemas.AttributeRead], summary="获取属性标签列表")
async def list_attributes(db: AsyncSession = Depends(get_db), skip: int = 0, limit: int = 100, category: Optional[str] = None):
    """
    获取所有属性标签，可按分类进行筛选。
    """
    logger.info(f"管理员获取属性列表, skip={skip}, limit={limit}, category={category}")
    return await crud.attribute.get_attributes(db=db, skip=skip, limit=limit, category=category)

@router.get("/attributes/{attribute_id}", response_model=schemas.AttributeRead, summary="获取单个属性详情")
async def read_attribute(attribute_id: int, db: AsyncSession = Depends(get_db)):
    """
    获取指定ID的属性标签的详细信息。
    """
    logger.info(f"管理员请求属性详情 ID: {attribute_id}")
    db_attribute = await crud.attribute.get_attribute(db, attribute_id=attribute_id)
    if db_attribute is None:
        logger.warning(f"管理员请求的属性 ID: {attribute_id} 未找到")
        raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="属性未找到")
    return db_attribute

@router.put("/attributes/{attribute_id}", response_model=schemas.AttributeRead, summary="更新属性标签")
async def update_existing_attribute(attribute_id: int, attribute_in: schemas.AttributeUpdate, db: AsyncSession = Depends(get_db)):
    """
    更新一个已存在的属性标签的名称或分类。
    """
    logger.info(f"管理员尝试更新属性 ID: {attribute_id}")
    db_attribute = await crud.attribute.get_attribute(db, attribute_id=attribute_id)
    if not db_attribute:
        raise HTTPException(status_code=404, detail="属性未找到")
    try:
        return await crud.attribute.update_attribute(db=db, db_attribute=db_attribute, attribute_in=attribute_in)
    except ValueError as ve:
        raise HTTPException(status_code=409, detail=str(ve))

@router.delete("/attributes/{attribute_id}", status_code=status.HTTP_204_NO_CONTENT, summary="删除属性标签")
async def delete_existing_attribute(attribute_id: int, db: AsyncSession = Depends(get_db)):
    """
    删除一个属性标签。如果该标签已被使用，可能会删除失败。
    """
    logger.warning(f"管理员尝试删除属性 ID: {attribute_id}")
    deleted = await crud.attribute.delete_attribute(db=db, attribute_id=attribute_id)
    if not deleted:
        raise HTTPException(status_code=404, detail="属性未找到或无法删除")
    return Response(status_code=status.HTTP_204_NO_CONTENT)


# ====================================================================
# --- 评估与属性关联管理 ---
# ====================================================================

class AssessmentAttributesUpdate(BaseModel):
    attribute_ids: List[int] = Field(..., description="要为评估记录设置的完整属性ID列表，此操作将覆盖所有现有属性关联。")

@router.put("/assessments/{assessment_id}/attributes", response_model=schemas.AssessmentSummary, summary="设置评估记录的所有属性标签")
async def set_assessment_attributes_endpoint(assessment_id: int, attributes_in: AssessmentAttributesUpdate = Body(...), db: AsyncSession = Depends(get_db)):
    """
    一次性设置某条评估记录的所有属性标签。前端发送一个包含所有期望关联的属性ID的列表。
    """
    logger.info(f"管理员正在为评估 ID {assessment_id} 设置属性列表: {attributes_in.attribute_ids}")
    updated_assessment = await crud.assessment.set_assessment_attributes(db=db, assessment_id=assessment_id, attribute_ids=attributes_in.attribute_ids)
    if updated_assessment is None:
        raise HTTPException(status_code=404, detail="评估记录未找到")
    return schemas.AssessmentSummary.model_validate(updated_assessment, from_attributes=True)

================================================================================

--- File: PsychologyAnalysis\app\routers\assessments.py ---
# FILE: app/routers/assessments.py (修改后)
import logging
import os
import json
from datetime import datetime
from fastapi import APIRouter, HTTPException, Depends, File, UploadFile, Form, Request, status
from typing import Dict, Any, Optional
from sqlalchemy.ext.asyncio import AsyncSession
# --- 修改: 导入更具体的数据库异常 ---
from sqlalchemy.exc import IntegrityError, SQLAlchemyError

# --- 核心应用导入 ---
from app.core.config import settings
from app.schemas.assessment import AssessmentSubmitResponse
# 确保 Celery 任务可导入
try:
    from app.tasks.analysis import run_ai_analysis
except ImportError:
    run_ai_analysis = None # 如果导入失败，定义为 None
    logging.getLogger(settings.APP_NAME or "FallbackLogger").error("未能导入 Celery 任务 'run_ai_analysis'。后台处理已禁用。")

# --- 认证与数据库导入 ---
from app.core.deps import get_current_active_user, get_db # 使用异步 get_db
from app import models, schemas # 导入 schemas 供潜在使用
# 导入主 crud 包 (确保 app/crud/__init__.py 导入了 assessment)
from app import crud

# --- 工具函数 ---
try:
    from werkzeug.utils import secure_filename
except ImportError:
    import re
    def secure_filename(filename: str) -> str:
        """
        一个 werkzeug.utils.secure_filename 的基本替代实现。
        限制字符集并防止路径遍历。
        """
        if not filename:
            return "invalid_filename"
        # 移除不安全的字符
        filename = re.sub(r'[^a-zA-Z0-9_.-]', '_', filename)
        # 移除开头/结尾的点或下划线
        filename = filename.strip('._')
        # 防止文件名变为空
        return filename if filename else "invalid_filename"
    # 安全地获取 logger
    logging.getLogger(settings.APP_NAME or "FallbackLogger").warning("未安装 werkzeug。使用基本的 secure_filename 备用方案。")

# 使用配置的应用 logger
logger = logging.getLogger(settings.APP_NAME)
router = APIRouter()

# --- API 端点 ---
@router.post(
    "/assessments/submit",
    response_model=AssessmentSubmitResponse,
    tags=["Assessments"],
    status_code=status.HTTP_202_ACCEPTED # 成功时返回 202 Accepted
)
async def submit_assessment(
    # --- 依赖 ---
    db: AsyncSession = Depends(get_db),
    request: Request = None, # 保留用于解析表单数据
    current_user: models.User = Depends(get_current_active_user), # 认证依赖

    # --- 表单字段 (名称需与 JS 中的 FormData 匹配) ---
    name: str = Form(..., description="姓名"),
    gender: str = Form(..., description="性别"),
    age: int = Form(..., gt=0, description="年龄"),
    id_card: Optional[str] = Form(None, description="身份证号"),
    occupation: Optional[str] = Form(None, description="职业"),
    case_name: Optional[str] = Form(None, description="案件名称"),
    case_type: Optional[str] = Form(None, description="案件类型"),
    identity_type: Optional[str] = Form(None, description="人员身份"),
    person_type: Optional[str] = Form(None, description="人员类型"),
    marital_status: Optional[str] = Form(None, description="婚姻状况"),
    children_info: Optional[str] = Form(None, description="子女情况"),
    criminal_record: Optional[int] = Form(0, ge=0, le=1, description="有无犯罪前科 (0:无, 1:有)"),
    health_status: Optional[str] = Form(None, description="健康情况"),
    phone_number: Optional[str] = Form(None, description="手机号"),
    domicile: Optional[str] = Form(None, description="归属地"),
    scale_type: Optional[str] = Form(None, description="选择的量表代码"),
    # 确保 'image' 匹配 HTML/JS 中文件输入的 name 属性
    image: Optional[UploadFile] = File(None, description="上传的绘画图片")
):
    """
    接收来自已认证用户的评估数据。
    保存数据并排队等待后台 AI 分析任务。
    """
    # +++ 在潜在的数据库错误发生前获取用户名和 ID +++
    submitter_username = current_user.username
    submitter_id = current_user.id
    logger.info(f"用户 '{submitter_username}' (ID: {submitter_id}) 正在提交新的评估，主体姓名: {name}")

    # --- 1. 收集基础信息 (将表单字段映射到数据库模型字段) ---
    basic_info: Dict[str, Any] = {
        "subject_name": name, # 将表单的 'name' 映射到数据库模型的 'subject_name'
        "gender": gender,
        "age": age,
        "id_card": id_card,
        "occupation": occupation,
        "case_name": case_name,
        "case_type": case_type,
        "identity_type": identity_type,
        "person_type": person_type,
        "marital_status": marital_status,
        "children_info": children_info,
        "criminal_record": criminal_record, # 已经是 int 0 或 1
        "health_status": health_status,
        "phone_number": phone_number,
        "domicile": domicile,
        "submitter_id": submitter_id # 添加认证用户的 ID
    }
    logger.debug(f"收集的基础信息 (待存入数据库): {basic_info}")

    # --- 2. 处理图片上传 ---
    image_relative_path: Optional[str] = None
    image_full_path: Optional[str] = None # 跟踪完整路径以备保存
    image_was_saved_to_disk: bool = False # 标记，以便在出错时清理

    if image and image.filename:
        # 清理文件名
        original_filename = secure_filename(image.filename)
        if original_filename == "invalid_filename":
             logger.warning(f"用户 {submitter_username} 上传了无效的文件名 '{image.filename}'。")
             # 可选择抛出 HTTPException 或在没有图片的情况下继续
             # raise HTTPException(status_code=status.HTTP_400_BAD_REQUEST, detail="无效的文件名。")
             image = None # 视为未上传图片

        if image: # 再次检查文件名检查后 image 是否仍然有效
            timestamp = datetime.now().strftime("%Y%m%d%H%M%S")
            # 使用身份证号（如果提供）或姓名（如果提供）或 'UnknownID' 作为文件名的一部分
            id_part = secure_filename(id_card if id_card else (name if name else 'UnknownID'))
            base, ext = os.path.splitext(original_filename)
            safe_base = base[:50] # 限制基本文件名长度
            # 标准化扩展名为小写
            ext_lower = ext.lower()
            # 允许的文件类型示例
            allowed_extensions = {'.png', '.jpg', '.jpeg', '.gif', '.webp'}
            if ext_lower not in allowed_extensions:
                logger.warning(f"用户 {submitter_username} 上传了不允许的文件类型: {ext_lower}")
                raise HTTPException(
                    status_code=status.HTTP_400_BAD_REQUEST,
                    detail=f"不允许的文件类型: {ext}. 请上传 {', '.join(allowed_extensions)} 格式的文件。"
                )

            # 构建用于保存的安全文件名
            image_filename_to_save = f"{id_part}_{timestamp}_{safe_base}{ext_lower}"
            image_full_path = os.path.join(settings.UPLOADS_DIR, image_filename_to_save)
            # 在数据库中存储相对路径（或仅文件名）
            image_relative_path = image_filename_to_save # 或根据你提供文件的方式进行调整

            try:
                # 确保上传目录存在
                os.makedirs(settings.UPLOADS_DIR, exist_ok=True)
                # 异步读取文件内容并保存
                file_content = await image.read()
                with open(image_full_path, "wb") as buffer:
                    buffer.write(file_content)
                image_was_saved_to_disk = True # 标记为已保存，以备潜在清理
                logger.info(f"图片由用户 {submitter_username} 保存至: {image_full_path}")
            except OSError as e: # 捕获文件系统相关的错误
                logger.error(f"用户 {submitter_username} 保存上传图片至 {image_full_path} 时发生文件系统错误: {e}", exc_info=True)
                # 如果保存失败则不继续，通知用户
                raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail=f"保存上传文件时发生服务器错误。")
            except Exception as e:
                logger.error(f"用户 {submitter_username} 保存上传图片至 {image_full_path} 时发生未知错误: {e}", exc_info=True)
                raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail=f"处理上传文件时发生意外错误。")
            finally:
                 # 确保文件被关闭 (UploadFile 应该会处理这个，但这是好习惯)
                 await image.close()
    else:
        logger.info(f"用户 {submitter_username} 未上传图片。")

    # --- 3. 收集量表答案 (从动态表单字段 q1, q2...) ---
    scale_answers_dict: Dict[str, Any] = {}
    scale_answers_json: Optional[str] = None
    if scale_type:
        if request is None:
             logger.error("未注入 Request 对象，无法解析量表答案。这是一个服务器配置问题。")
             # 这表示服务器端设置问题
             raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail="内部服务器错误: 无法访问请求对象。")
        try:
            # 异步获取所有表单数据
            form_data = await request.form()
            for key, value in form_data.items():
                # 检查 key 是否以 'q' 开头后跟数字
                if key.startswith('q') and key[1:].isdigit():
                    # 尝试将值转换为数字（如果可能），否则保持字符串
                    try:
                        scale_answers_dict[key] = int(value)
                    except ValueError:
                        try:
                            scale_answers_dict[key] = float(value)
                        except ValueError:
                            scale_answers_dict[key] = value # 保留为字符串

            if scale_answers_dict:
                # 将收集到的答案转换为 JSON 字符串以便数据库存储
                scale_answers_json = json.dumps(scale_answers_dict, ensure_ascii=False, sort_keys=True) # 排序以保证一致性
                logger.info(f"用户 {submitter_username} 为量表 '{scale_type}' 收集到的答案: {len(scale_answers_dict)} 条")
                logger.debug(f"量表答案 (JSON): {scale_answers_json}")
            else:
                logger.warning(f"用户 {submitter_username} 提供了量表类型 '{scale_type}', 但未在表单中找到以 'q' 开头的答案。")
                # 根据需求，你可能需要抛出错误或允许提交时没有答案
                # raise HTTPException(status_code=status.HTTP_400_BAD_REQUEST, detail=f"选择了量表 '{scale_type}' 但未提供答案。")
        except Exception as e:
             logger.error(f"用户 {submitter_username} 解析量表答案时出错: {e}", exc_info=True)
             # 在没有量表数据的情况下继续或抛出错误
             scale_answers_json = None # 确保如果解析失败则为 None
             # raise HTTPException(status_code=status.HTTP_400_BAD_REQUEST, detail=f"解析量表答案时出错: {e}")

    # --- 4. 使用异步 CRUD 保存初始数据 ---
    assessment_id: Optional[int] = None
    new_assessment: Optional[models.Assessment] = None # 初始化为 None
    try:
        # --- *** 通过导入的 crud 包访问 assessment CRUD *** ---
        # 现在需要 app/crud/__init__.py 包含 `from . import assessment`
        new_assessment = await crud.assessment.create(
            db=db,
            # 使用与 Assessment 模型字段匹配的关键字参数传递收集的数据
            **basic_info, # 解包基础信息字典
            image_path=image_relative_path, # 存储相对路径/文件名
            questionnaire_type=scale_type,
            questionnaire_data=scale_answers_json, # 存储 JSON 字符串
            report_text=None # 初始报告文本为空
        )
        # --- 移除这里的检查，因为 CRUD 函数现在保证返回有效对象或抛出异常 ---
        # if not new_assessment or not hasattr(new_assessment, 'id'):
        #     raise ValueError("数据保存操作未返回有效的评估对象ID。")

        # 现在可以安全获取 ID (假设 create 成功时总会提交并刷新对象)
        # 注意: 如果 create 内部没有 commit/refresh, ID 可能还是 None
        # 确保 crud.assessment.create 在成功时返回带有 ID 的对象
        if new_assessment and new_assessment.id:
            assessment_id = new_assessment.id
            logger.info(f"评估数据由用户 {submitter_username} 保存成功。评估 ID: {assessment_id}")
        else:
             # 这是一个异常情况，如果 CRUD 成功但没有 ID
             logger.error(f"用户 {submitter_username} 的评估数据似乎已保存，但未能获取 ID。CRUD 实现可能需要检查。")
             raise SQLAlchemyError("数据库操作成功，但未能检索到新记录的 ID。") # 抛出一个通用的 DB 错误

    except IntegrityError as ie: # --- 捕获 IntegrityError (例如，唯一约束冲突) ---
        logger.warning(f"用户 {submitter_username} 保存评估数据时发生数据库完整性错误: {ie}", exc_info=True)
        await db.rollback() # 回滚数据库事务
        # 清理可能已保存的图片
        if image_was_saved_to_disk and image_full_path and os.path.exists(image_full_path):
            try:
                os.remove(image_full_path)
                logger.info(f"因数据库完整性错误清理了文件 {image_full_path}")
            except Exception as rm_err:
                logger.warning(f"数据库完整性错误后无法移除文件 {image_full_path}: {rm_err}")
        # 返回 409 Conflict 状态码
        # 可以根据具体错误 (ie.args) 提供更具体的 detail，但要小心暴露内部信息
        error_detail = "数据保存冲突。可能某个唯一字段（如身份证号）已存在。"
        # 检查是否是特定的唯一约束错误，例如，如果你的身份证字段有唯一约束 'uq_assessment_id_card'
        # if "uq_assessment_id_card" in str(ie).lower():
        #     error_detail = "保存失败：该身份证号已被使用。"
        raise HTTPException(status_code=status.HTTP_409_CONFLICT, detail=error_detail)

    except TypeError as te: # --- 捕获 TypeError (通常来自模型初始化时字段类型不匹配) ---
        logger.warning(f"用户 {submitter_username} 提交的数据字段与预期模型类型不匹配: {te}", exc_info=True)
        await db.rollback() # 尽管可能还没到数据库操作，回滚以防万一
        # 清理可能已保存的图片
        if image_was_saved_to_disk and image_full_path and os.path.exists(image_full_path):
             try:
                 os.remove(image_full_path)
                 logger.info(f"因类型错误清理了文件 {image_full_path}")
             except Exception as rm_err:
                 logger.warning(f"类型错误后无法移除文件 {image_full_path}: {rm_err}")
        # 返回 422 Unprocessable Entity 状态码，表示数据无法处理
        raise HTTPException(status_code=status.HTTP_422_UNPROCESSABLE_ENTITY, detail=f"提交的数据字段无效或类型错误: {te}")

    except SQLAlchemyError as dbe: # --- 捕获其他 SQLAlchemy 相关错误 (连接、其他约束等) ---
         logger.error(f"用户 {submitter_username} 保存评估数据时发生数据库操作错误: {dbe}", exc_info=True)
         await db.rollback() # 回滚数据库事务
         # 清理可能已保存的图片
         if image_was_saved_to_disk and image_full_path and os.path.exists(image_full_path):
             try:
                 os.remove(image_full_path)
                 logger.info(f"因数据库操作错误清理了文件 {image_full_path}")
             except Exception as rm_err:
                 logger.warning(f"数据库操作错误后无法移除文件 {image_full_path}: {rm_err}")
         # 返回 500 Internal Server Error
         raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail=f"数据库操作失败。请稍后重试或联系管理员。")

    except Exception as e: # --- 捕获所有其他意外错误 ---
        logger.error(f"用户 {submitter_username} 处理评估提交时发生意外错误: {e}", exc_info=True)
        await db.rollback() # 尝试回滚以防万一
        # 清理可能已保存的图片
        if image_was_saved_to_disk and image_full_path and os.path.exists(image_full_path):
            try:
                os.remove(image_full_path)
                logger.info(f"因意外错误清理了文件 {image_full_path}")
            except Exception as rm_err:
                logger.warning(f"意外错误后无法移除文件 {image_full_path}: {rm_err}")
        # 返回 500 Internal Server Error
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail=f"处理请求时发生内部服务器错误。")

    # --- 5. 触发 Celery 任务 (仅当 assessment_id 成功获取后执行) ---
    task_id: Optional[str] = None
    if assessment_id: # 只有在数据成功保存并获取 ID 后才排队
        if run_ai_analysis:
            try:
                # 仅传递任务所需的 ID
                task = run_ai_analysis.delay(assessment_id)
                task_id = task.id
                logger.info(f"已为评估 ID: {assessment_id} (提交者: {submitter_username}) 排队 AI 分析任务。任务 ID: {task_id}")
            except Exception as celery_err:
                 # 记录错误，但请求本身是成功的（数据已保存）
                 logger.error(f"为评估 ID {assessment_id} (提交者: {submitter_username}) 排队 Celery 任务失败: {celery_err}", exc_info=True)
                 # 不要在此处引发 HTTPException，因为主要操作（保存数据）已成功。
                 # 响应消息将指示排队失败。
        else:
             logger.warning(f"Celery 任务 'run_ai_analysis' 未加载或不可用。评估 ID: {assessment_id} 的后台处理将不会运行。")

    # --- 6. 构建 API 响应 (基于成功保存和任务排队状态) ---
    if assessment_id:
        status_code_resp: str
        message: str
        if task_id:
            message = "评估数据已接收，正在后台进行 AI 分析。"
            status_code_resp = "processing_queued" # 状态码：处理已排队
        elif run_ai_analysis is None: # 检查任务函数本身是否为 None
            message = f"评估数据已接收 (ID: {assessment_id})，但后台分析任务未配置或导入失败。"
            status_code_resp = "warning_task_unavailable" # 状态码：警告，任务不可用
        else: # 任务函数存在但 .delay() 失败
            message = f"评估数据已接收 (ID: {assessment_id})，但启动后台处理任务时出错。"
            status_code_resp = "warning_queueing_failed" # 状态码：警告，排队失败

        return AssessmentSubmitResponse(
            status=status_code_resp,
            message=message,
            submission_id=assessment_id
            # task_id=task_id # 可选地在响应中包含 task_id
        )
    else:
        # 理论上，如果上面的异常处理正确，这个情况不应该发生
        logger.error(f"评估 ID 未能生成，但未捕获到明确异常。提交者: {submitter_username}。这可能表示 CRUD 函数实现有问题。")
        # 即使没有 assessment_id，如果代码执行到这里，意味着没有抛出预期的异常
        # 但这仍然是一个错误状态，因为我们期望有 ID
        raise HTTPException(status_code=status.HTTP_500_INTERNAL_SERVER_ERROR, detail="数据似乎已保存，但在获取确认 ID 时遇到问题。")

================================================================================

--- File: PsychologyAnalysis\app\routers\auth.py ---
# 文件路径: PsychologyAnalysis/app/routers/auth.py (最终修复版)
import logging
from fastapi import APIRouter, Depends, HTTPException, status, Body
from fastapi.security import OAuth2PasswordRequestForm
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy.exc import IntegrityError

from app.core.config import settings
from app.core import security
from app import crud, models, schemas
from app.core.deps import get_db, get_current_active_user, get_current_user # 确保 get_current_user 也被导入

logger = logging.getLogger(settings.APP_NAME)
router = APIRouter(
    prefix="/api/v1/auth",  # [->] 建议为认证路由也加上统一前缀
    tags=["认证 (Authentication)"]
)

@router.post("/token", response_model=schemas.Token)
async def login_for_access_token(
    db: AsyncSession = Depends(get_db),
    form_data: OAuth2PasswordRequestForm = Depends()
):
    """
    OAuth2 兼容的令牌登录，为将来的请求获取访问令牌。
    """
    logger.info(f"用户登录尝试: {form_data.username}")
    
    # [->] 关键检查点: 确认 crud.user.authenticate 是一个 async 函数
    user = await crud.user.authenticate(
        db, username=form_data.username, password=form_data.password
    )
    
    if not user:
        logger.warning(f"为用户 '{form_data.username}' 登录失败：用户名或密码不正确。")
        raise HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail="用户名或密码不正确",
            headers={"WWW-Authenticate": "Bearer"},
        )

    if not user.is_active:
        logger.warning(f"非活动用户尝试登录: {form_data.username}")
        raise HTTPException(status_code=status.HTTP_400_BAD_REQUEST, detail="该用户已被禁用")

    access_token = security.create_access_token(subject=user.username)
    logger.info(f"用户 '{form_data.username}' 登录成功。")
    return {"access_token": access_token, "token_type": "bearer"}


@router.post("/register", response_model=schemas.User, status_code=status.HTTP_201_CREATED)
async def register_user(
    *,
    db: AsyncSession = Depends(get_db),
    user_in: schemas.UserCreate = Body(...)
):
    """
    创建新用户。
    """
    logger.info(f"用户注册尝试: {user_in.username}")
    
    # 检查用户名是否存在
    existing_user = await crud.user.get_user_by_username(db, username=user_in.username)
    if existing_user:
        logger.warning(f"用户名 '{user_in.username}' 已被注册。")
        raise HTTPException(
            status_code=status.HTTP_400_BAD_REQUEST,
            detail="用户名已被注册",
        )
        
    # [->] 可选但推荐: 检查邮箱是否存在
    if user_in.email:
        existing_email = await crud.user.get_user_by_email(db, email=user_in.email)
        if existing_email:
            logger.warning(f"邮箱 '{user_in.email}' 已被注册。")
            raise HTTPException(
                status_code=status.HTTP_400_BAD_REQUEST,
                detail="该邮箱已被注册",
            )
            
    try:
        user = await crud.user.create_user(db=db, user_in=user_in)
        logger.info(f"用户 '{user.username}' (ID: {user.id}) 注册成功。")
        return user
    except IntegrityError: # 捕获可能的数据库唯一性冲突（例如，并发注册）
        await db.rollback()
        logger.error(f"为 {user_in.username} 注册时发生数据库完整性错误。", exc_info=True)
        raise HTTPException(
            status_code=status.HTTP_409_CONFLICT,
            detail="用户名或邮箱可能已被注册，请更换后重试。",
        )
    except Exception as e:
        await db.rollback()
        logger.error(f"为 {user_in.username} 注册时发生未知错误: {e}", exc_info=True)
        raise HTTPException(
            status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
            detail="注册过程中发生内部错误。",
        )

# [->] 关键修改: 修复 API 路径，将 /users/me 移到 auth 路由下
@router.get("/users/me", response_model=schemas.User)
async def read_users_me(
    current_user: models.User = Depends(get_current_active_user)
):
    """
    获取当前登录用户的详细信息。
    """
    return current_user

================================================================================

--- File: PsychologyAnalysis\app\routers\encyclopedia.py ---
# 文件: app/routers/encyclopedia.py
import logging
import random
from typing import Optional, List, Dict
from fastapi import APIRouter, HTTPException, Query, status

from app.core.config import settings
from app.schemas.encyclopedia import EncyclopediaEntry, CategoriesResponse, EntriesResponse # 导入模型

logger = logging.getLogger(settings.APP_NAME)
router = APIRouter()

# --- 辅助函数：从加载的条目中获取数据 ---
def get_all_entries() -> List[Dict[str, str]]:
    """安全地获取配置中的百科条目列表"""
    entries = settings.PSYCHOLOGY_ENTRIES
    if not isinstance(entries, list):
        logger.error("配置中的 PSYCHOLOGY_ENTRIES 不是列表！")
        return []
    return entries

# --- 端点 1: 获取分类 ---
@router.get(
    "/encyclopedia/categories",
    response_model=CategoriesResponse,
    tags=["Encyclopedia"],
    summary="获取所有心理百科分类"
)
async def get_encyclopedia_categories():
    """
    返回所有心理百科条目的唯一分类名称列表。
    """
    all_entries = get_all_entries()
    if not all_entries:
        return CategoriesResponse(categories=[])

    # 提取所有分类并去重，然后排序
    try:
        categories = sorted(list(set(entry.get("category", "未分类") for entry in all_entries)))
        return CategoriesResponse(categories=categories)
    except Exception as e:
         logger.error(f"提取百科分类时出错: {e}", exc_info=True)
         raise HTTPException(status_code=500, detail="处理分类列表时出错")


# --- 端点 2: 获取条目 (包含过滤和随机功能) ---
@router.get(
    "/encyclopedia/entries",
    # 响应模型根据情况可能是列表或单个条目，用 Union 或 Any，或者为随机单独建模型/端点
    # 为清晰起见，我们让它主要返回列表，随机情况特殊处理返回单个条目模型
    response_model=EntriesResponse, # 主要返回列表
    tags=["Encyclopedia"],
    summary="获取心理百科条目"
)
async def get_encyclopedia_entries(
    category: Optional[str] = Query(None, description="按分类过滤条目"),
    random_tip: Optional[bool] = Query(False, description="是否从'心理小贴士'分类中随机获取一条") # 参数名改为 random_tip
    # 可以添加分页参数: page: int = Query(1, ge=1), size: int = Query(10, ge=1, le=100)
):
    """
    获取心理百科条目。
    - 提供 `category` 参数以按分类过滤。
    - 提供 `random_tip=true` 以获取一条随机的“心理小贴士”。(此时忽略 category 参数)
    """
    all_entries = get_all_entries()
    if not all_entries:
        if random_tip:
             # 返回一个默认的 EncyclopediaEntry 结构
             return EntriesResponse(entries=[EncyclopediaEntry(category="心理小贴士", title="提示", content="暂无可用小贴士。")])
        else:
             return EntriesResponse(entries=[]) # 返回空列表

    target_entries = all_entries

    # --- 处理随机小贴士逻辑 ---
    if random_tip:
        tips_category_name = "心理小贴士" # 明确指定分类名称
        tip_entries = [entry for entry in all_entries if entry.get("category") == tips_category_name]

        if not tip_entries:
            logger.warning("请求随机小贴士，但 '心理小贴士' 分类下没有条目。")
            # 返回一个默认的 EncyclopediaEntry 结构，放入列表中
            return EntriesResponse(entries=[EncyclopediaEntry(category=tips_category_name, title="提示", content="暂无可用小贴士。")])

        selected_entry_dict = random.choice(tip_entries)
        # 将选中的字典包装在列表中返回，以匹配 EntriesResponse
        selected_entry_model = EncyclopediaEntry(**selected_entry_dict)
        return EntriesResponse(entries=[selected_entry_model]) # 返回包含单个随机条目的列表

    # --- 处理按分类过滤逻辑 (如果不是请求随机小贴士) ---
    if category:
        target_entries = [entry for entry in all_entries if entry.get("category") == category]
        if not target_entries:
             # 如果指定了分类但找不到，返回空列表是合理的
             logger.info(f"请求分类 '{category}'，但未找到条目。")
             return EntriesResponse(entries=[])

    # --- (可选) 实现分页 ---
    # total = len(target_entries)
    # start = (page - 1) * size
    # end = start + size
    # paged_entries_dicts = target_entries[start:end]

    # --- 将字典列表转换为 Pydantic 模型列表 ---
    # 如果没有分页，直接使用 target_entries
    try:
        result_entries = [EncyclopediaEntry(**entry_dict) for entry_dict in target_entries]
    except Exception as e:
         logger.error(f"将百科条目字典转换为 Pydantic 模型时出错: {e}", exc_info=True)
         raise HTTPException(status_code=500, detail="处理百科条目数据时出错")

    # 返回结果
    return EntriesResponse(entries=result_entries) # , total=total, page=page, size=size) 如果实现分页

================================================================================

--- File: PsychologyAnalysis\app\routers\reports.py ---
# app/routers/reports.py
import logging
import json
import asyncio
from fastapi import APIRouter, HTTPException, Depends, status
from sqlalchemy.ext.asyncio import AsyncSession
from pydantic import ValidationError # 确保导入 ValidationError

# --- Core App Imports ---
from app.core.config import settings
from app.schemas.report import ReportResponse, ReportData, ReportStatusResponse

# --- Authentication & Database Imports ---
from app.core.deps import get_current_active_user, get_db
from app import models
from app import crud
from app.models.assessment import STATUS_COMPLETE, STATUS_FAILED, STATUS_PENDING, STATUS_PROCESSING

logger = logging.getLogger(settings.APP_NAME)
router = APIRouter()

@router.get(
    "/{assessment_id}",
    response_model=ReportResponse,
    summary="获取指定评估的分析报告 (仅在完成后)",
    tags=["Reports"],
    responses={
        status.HTTP_200_OK: {"description": "成功获取报告，或报告尚未完成/失败"},
        status.HTTP_404_NOT_FOUND: {"description": "评估记录未找到"},
        status.HTTP_403_FORBIDDEN: {"description": "无权访问此报告"},
        status.HTTP_500_INTERNAL_SERVER_ERROR: {"description": "服务器内部错误"},
    }
)
async def get_report_by_id(
    assessment_id: int,
    db: AsyncSession = Depends(get_db),
    current_user: models.User = Depends(get_current_active_user)
):
    """
    根据评估 ID 获取单个评估报告的详细信息。
    """
    logger.info(f"[Reports Router - Full] User {current_user.username} requesting full report for ID: {assessment_id}")

    try:
        logger.debug(f"[Reports Router - Full] Fetching assessment ID {assessment_id} using crud.assessment.get")
        assessment: models.Assessment | None = await crud.assessment.get(db=db, id=assessment_id)

        if not assessment:
            logger.warning(f"[Reports Router - Full] Assessment ID {assessment_id} NOT FOUND. Raising 404.")
            raise HTTPException(
                status_code=status.HTTP_404_NOT_FOUND,
                detail=f"评估 ID {assessment_id} 不存在。",
            )

        logger.info(f"[Reports Router - Full] Found assessment ID {assessment_id}. Current status: '{assessment.status}'.")

        # --- 权限检查 (根据需要启用) ---
        # if not current_user.is_superuser and assessment.submitter_id != current_user.id:
        #     logger.warning(...)
        #     raise HTTPException(...)

        # --- 检查状态 ---
        if assessment.status != STATUS_COMPLETE:
            status_message_map = {
                STATUS_PENDING: "报告正在等待处理。",
                STATUS_PROCESSING: "报告正在生成中，请稍后。",
                STATUS_FAILED: "报告生成失败。",
            }
            message = status_message_map.get(assessment.status, "报告处于未知或非完成状态。")
            logger.info(f"[Reports Router - Full] Assessment ID {assessment_id} status is '{assessment.status}'. Returning message: '{message}'")
            return ReportResponse(report=None, message=message)

        # --- 状态是 COMPLETE，检查报告文本 ---
        logger.debug(f"[Reports Router - Full] Status is COMPLETE for ID {assessment_id}. Checking report_text.")
        if not assessment.report_text or assessment.report_text.strip() == "":
            logger.error(f"[Reports Router - Full] CRITICAL: Assessment ID {assessment_id} has status COMPLETE but report_text is empty!")
            raise HTTPException(
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                detail="报告状态与内容不一致，请联系管理员。"
            )

        # --- 状态是 COMPLETE 且文本存在，准备返回数据 ---
        logger.info(f"[Reports Router - Full] Report text found for completed assessment ID {assessment_id}. Preparing response data.")

        # +++ 修改点：在验证前准备数据，并解析 JSON +++
        data_for_validation = assessment.__dict__.copy() # 复制模型属性到字典
        parsed_q_data = None # 初始化为 None
        q_data_str = data_for_validation.get('questionnaire_data')

        if isinstance(q_data_str, str):
            logger.debug("[Reports Router - Full] Attempting to parse questionnaire_data JSON string before validation.")
            try:
                parsed_q_data = json.loads(q_data_str)
                if not isinstance(parsed_q_data, dict): # 确保解析结果是字典
                    logger.warning(f"[Reports Router - Full] Parsed questionnaire_data is not a dictionary (type: {type(parsed_q_data)}). Setting to None.")
                    parsed_q_data = None
                else:
                    logger.debug("[Reports Router - Full] Successfully parsed questionnaire_data into a dictionary.")
            except json.JSONDecodeError:
                logger.error(f"[Reports Router - Full] Failed to decode questionnaire_data JSON string: {q_data_str[:100]}... Setting to None.")
                parsed_q_data = None # 解析失败则设为 None
        elif q_data_str is not None:
            # 如果数据库中不是字符串也不是 None，记录警告
            logger.warning(f"[Reports Router - Full] questionnaire_data from DB is not a string or None (type: {type(q_data_str)}). Attempting to use as is if schema allows, otherwise will be None.")
            # 尝试直接使用，如果 Pydantic 允许的话，否则保持 None
            parsed_q_data = q_data_str if isinstance(q_data_str, dict) else None

        # 将解析后的（或原始的 None）值放回待验证的数据字典中
        data_for_validation['questionnaire_data'] = parsed_q_data
        # +++ 修改结束 +++

        try:
            # --- 修改点：使用准备好的字典进行验证 ---
            # 不再需要 from_attributes=True，因为我们传入的是字典
            report_data = ReportData.model_validate(data_for_validation)
            # --- 修改结束 ---

            # --- 移除这里冗余的 questionnaire_data 解析逻辑 ---
            # if isinstance(assessment.questionnaire_data, str):
            #    ... (这部分逻辑已移到 model_validate 之前) ...
            # --- 移除结束 ---

            logger.info(f"[Reports Router - Full] Successfully built ReportData for ID {assessment_id}.")
            return ReportResponse(report=report_data, message="报告获取成功。")

        except ValidationError as pydantic_err:
            # 捕获 Pydantic 验证错误 (理论上现在不应该因为 questionnaire_data 类型错误了，但可能还有其他字段问题)
            logger.error(f"[Reports Router - Full] Pydantic validation error creating ReportData for ID {assessment_id}: {pydantic_err}", exc_info=True)
            # 记录导致错误的原始数据 (字典形式)
            logger.debug(f"[Reports Router - Full] Data causing validation error: {data_for_validation}")
            raise HTTPException(
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                detail="处理报告数据格式时出错。"
            )

    except HTTPException as http_exc:
         logger.warning(f"[Reports Router - Full] Raising known HTTPException for ID {assessment_id}: Status={http_exc.status_code}, Detail={http_exc.detail}")
         raise http_exc
    except Exception as e:
        logger.exception(f"[Reports Router - Full] Unexpected error processing request for ID {assessment_id}. User: {current_user.username}", exc_info=True)
        raise HTTPException(
            status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
            detail="获取报告时发生未知错误。",
        )

# --- get_report_status 函数 (保持不变) ---
@router.get(
    "/{assessment_id}/status",
    response_model=ReportStatusResponse,
    summary="获取指定评估的处理状态",
    tags=["Reports"],
    responses={
        status.HTTP_200_OK: {"description": "成功获取状态"},
        status.HTTP_404_NOT_FOUND: {"description": "评估记录未找到"},
        status.HTTP_403_FORBIDDEN: {"description": "无权访问此评估状态"},
        status.HTTP_500_INTERNAL_SERVER_ERROR: {"description": "服务器内部错误"}
    }
)
async def get_report_status(
    assessment_id: int,
    db: AsyncSession = Depends(get_db),
    current_user: models.User = Depends(get_current_active_user)
):
    """获取指定评估 ID 的当前处理状态。包含短暂重试以处理可见性延迟。"""
    logger.info(f"[Reports Router - Status] User {current_user.username} requesting status for ID: {assessment_id}")
    max_retries = 2
    retry_delay = 0.5
    for attempt in range(max_retries):
        try:
            logger.debug(f"[Reports Router - Status] Attempt {attempt + 1}/{max_retries}: Fetching assessment ID {assessment_id}")
            assessment = await crud.assessment.get(db=db, id=assessment_id)
            if assessment:
                logger.info(f"[Reports Router - Status] Attempt {attempt + 1}: Found status '{assessment.status}' for ID: {assessment_id}")
                return ReportStatusResponse(status=assessment.status)
            else:
                logger.warning(f"[Reports Router - Status] Attempt {attempt + 1}: crud.assessment.get returned None for ID {assessment_id}.")
                if attempt < max_retries - 1:
                    logger.info(f"[Reports Router - Status] Waiting {retry_delay}s before retrying fetch for ID {assessment_id}...")
                    await asyncio.sleep(retry_delay)
                else:
                    logger.error(f"[Reports Router - Status] All {max_retries} attempts failed to find assessment ID {assessment_id}. Raising 404.")
                    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="评估记录未找到或暂不可见")
        except HTTPException as http_exc:
             if http_exc.status_code == 404 and attempt == max_retries - 1:
                 raise http_exc
             if http_exc.status_code == 403:
                 raise http_exc
             logger.warning(f"[Reports Router - Status] Caught handled HTTPException during attempt {attempt + 1}: {http_exc.status_code}, Detail: {http_exc.detail}")
             if attempt == max_retries - 1: raise http_exc
        except Exception as e:
            logger.exception(f"[Reports Router - Status] Unexpected error during attempt {attempt + 1} for ID {assessment_id}", exc_info=True)
            raise HTTPException(
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                detail="获取报告状态时发生内部错误"
            )
    logger.error(f"[Reports Router - Status] Reached end of function unexpectedly after retries for ID {assessment_id}.")
    raise HTTPException(status_code=500, detail="处理状态请求时发生意外流程错误。")

================================================================================

--- File: PsychologyAnalysis\app\routers\scales.py ---
# app/routers/scales.py
import logging
import json # Ensure json is imported
from fastapi import APIRouter, HTTPException, Depends

# Import Pydantic models and other necessary components
from app.schemas.scale import ScaleInfo, ScaleQuestion, ScaleOption, AvailableScalesResponse, ScaleQuestionsResponse
from src.data_handler import DataHandler
from app.core.config import settings

# Get the logger instance configured in main.py
# Ensure the logger name matches the one used in main.py's setup_logging call
logger = logging.getLogger(settings.APP_NAME)

# Create an APIRouter instance
router = APIRouter()

# --- Dependency Injection ---
# def get_data_handler():
#     """Dependency function to get a DataHandler instance."""
#     try:
#         # Use the database path from the application settings
#         return DataHandler(db_path=settings.DB_PATH)
#     except Exception as e:
#         # Log the error and raise an HTTP exception if DataHandler fails to initialize
#         logger.error(f"Failed to initialize DataHandler: {e}", exc_info=True)
#         raise HTTPException(status_code=500, detail="Database handler initialization failed.")
def get_data_handler():
    try:
        # <<< FIX: 使用 DB_PATH_SQLITE >>>
        return DataHandler(db_path=settings.DB_PATH_SQLITE)
    except Exception as e:
        logger.error(f"Failed to initialize DataHandler: {e}", exc_info=True)
        raise HTTPException(status_code=500, detail=f"数据库处理程序初始化失败: {e}")

# --- API Endpoints ---

@router.get(
    "/scales",
    response_model=AvailableScalesResponse, # Use keyword argument for response_model
    tags=["Scales"]                          # Use keyword argument for tags
)
async def get_available_scales(dh: DataHandler = Depends(get_data_handler)):
    """
    Retrieves a list of all available scale types (code and name).
    """
    logger.info("Request received for available scales.")
    try:
        # Fetch scale types from the data handler
        scales = dh.get_all_scale_types() # This should return List[Dict] e.g. [{'code': 'SAS', 'name': '...'}, ...]

        # Convert the list of dictionaries to a list of Pydantic models
        scale_infos = [ScaleInfo(code=s["code"], name=s["name"]) for s in scales]

        # Return the response using the Pydantic response model
        return AvailableScalesResponse(scales=scale_infos)
    except Exception as e:
        # Log any unexpected errors during the process
        logger.error(f"Error fetching available scales: {e}", exc_info=True)
        # Raise a generic 500 error to the client
        raise HTTPException(status_code=500, detail="Failed to fetch scale types from database.")


@router.get(
    "/scales/{scale_code}/questions",
    response_model=ScaleQuestionsResponse, # Use keyword argument
    tags=["Scales"]                          # Use keyword argument
)
async def get_scale_questions(scale_code: str, dh: DataHandler = Depends(get_data_handler)):
    """
    Retrieves all questions for a specific scale based on its code.
    """
    logger.info(f"Request received for questions of scale: {scale_code}")
    try:
        # Load question data using the data handler
        # This method should return List[Dict] or None
        questions_data = dh.load_questions_by_type(scale_code)

        # Handle case where no questions are found for the given scale code
        if questions_data is None:
            logger.warning(f"No questions found for scale code: {scale_code}")
            raise HTTPException(status_code=404, detail=f"Scale with code '{scale_code}' not found or has no questions.")

        questions_list = []
        # Iterate through the raw question data from the database
        for q_data in questions_data:
            # --- Data Validation and Transformation ---
            # Ensure the basic structure of question data is present
            if not all(k in q_data for k in ('number', 'text', 'options')):
                logger.warning(f"Skipping question data due to missing keys: {q_data}")
                continue # Skip this malformed question data

            options_list = []
            options_data_from_db = q_data.get('options', [])

            # Ensure options data is a list before processing
            if not isinstance(options_data_from_db, list):
                logger.warning(f"Options data for Q{q_data['number']} is not a list, skipping options. Data: {options_data_from_db}")
            else:
                # Iterate through options for the current question
                for opt in options_data_from_db:
                    # Ensure option structure is correct
                    if not isinstance(opt, dict) or not all(k in opt for k in ('text', 'score')):
                        logger.warning(f"Skipping invalid option data for Q{q_data['number']}: {opt}")
                        continue # Skip malformed option data

                    text_val = opt['text']
                    score_val_raw = opt['score']
                    score_val_numeric = None

                    # Explicitly convert score to a numeric type (int or float)
                    try:
                        if isinstance(score_val_raw, (int, float)):
                            score_val_numeric = score_val_raw
                        elif isinstance(score_val_raw, str):
                            # Attempt conversion from string
                            try:
                                score_float = float(score_val_raw)
                                score_val_numeric = int(score_float) if score_float.is_integer() else score_float
                            except ValueError:
                                logger.error(f"Could not convert score string '{score_val_raw}' to number for Q{q_data['number']}, option '{text_val}'. Skipping option.")
                                continue # Skip this option if conversion fails
                        else:
                            # Handle unexpected score types
                            logger.warning(f"Unexpected type for score ({type(score_val_raw)}) for Q{q_data['number']}, option '{text_val}'. Using 0 as fallback.")
                            score_val_numeric = 0

                    except Exception as conv_err:
                         logger.error(f"Error converting score '{score_val_raw}' for Q{q_data['number']}, option '{text_val}': {conv_err}", exc_info=True)
                         continue # Skip option on unexpected conversion error

                    # Only create ScaleOption if score conversion was successful
                    if score_val_numeric is not None:
                        try:
                            # Create Pydantic model instance for the option
                            options_list.append(ScaleOption(text=str(text_val), score=score_val_numeric))
                        except Exception as pydantic_option_err:
                            # Catch potential errors during Pydantic model instantiation
                            logger.error(f"Pydantic error creating ScaleOption for Q{q_data['number']}, option '{text_val}': {pydantic_option_err}", exc_info=True)
                            continue # Skip option if it fails validation

            # Create Pydantic model instance for the question
            try:
                questions_list.append(ScaleQuestion(
                    number=int(q_data['number']), # Ensure number is integer
                    text=str(q_data['text']),    # Ensure text is string
                    options=options_list
                ))
            except Exception as pydantic_q_err:
                # Catch potential errors during Pydantic model instantiation
                logger.error(f"Pydantic error creating ScaleQuestion for Q{q_data.get('number', 'N/A')}: {pydantic_q_err}", exc_info=True)
                continue # Skip this question if it fails validation

        # Log successful processing and return the validated response
        logger.info(f"Successfully processed {len(questions_list)} questions for scale {scale_code}.")
        return ScaleQuestionsResponse(questions=questions_list)

    except HTTPException as http_exc:
        # Re-raise known HTTP exceptions (like 404)
        raise http_exc
    except Exception as e:
        # Log unexpected errors and return a generic 500 response
        logger.error(f"Unexpected error fetching/processing questions for scale {scale_code}: {e}", exc_info=True)
        raise HTTPException(status_code=500, detail=f"Failed to fetch questions for scale {scale_code}.")

================================================================================

--- File: PsychologyAnalysis\app\routers\sse.py ---
# app/routers/sse.py
import asyncio
import json
import logging
from fastapi import APIRouter, Depends, HTTPException, Request, status
from sse_starlette.sse import EventSourceResponse
import redis.asyncio as redis # 导入异步 redis 客户端

from app.core.config import settings
from app.core.deps import get_current_active_user # 保护 SSE 端点
from app import models

logger = logging.getLogger(settings.APP_NAME)
router = APIRouter()

# 全局（或更健壮的作用域）Redis 连接池
# 注意：在生产环境中，连接池管理应更完善
redis_pool = None

async def get_redis_pool():
    """获取或创建 Redis 连接池"""
    global redis_pool
    if redis_pool is None:
        try:
            # 使用 from_url 创建连接池
            redis_pool = redis.ConnectionPool.from_url(
                settings.REDIS_URL,
                decode_responses=True, # 自动解码响应为字符串
                max_connections=20     # 示例连接池大小
            )
            logger.info(f"成功创建 Redis 连接池，目标: {settings.REDIS_URL}")
        except Exception as e:
            logger.critical(f"创建 Redis 连接池失败: {e}", exc_info=True)
            raise HTTPException(status_code=503, detail="无法连接到实时通知服务。")
    return redis_pool

@router.get(
    "/sse/report-status/{submission_id}",
    tags=["SSE"],
    summary="订阅报告生成状态更新"
)
async def report_status_stream(
    submission_id: int,
    request: Request, # 用于检测客户端断开连接
    current_user: models.User = Depends(get_current_active_user), # 保护端点
    pool: redis.ConnectionPool = Depends(get_redis_pool) # 注入连接池
):
    """
    为指定提交 ID 创建 SSE 连接，等待报告就绪事件。
    需要用户已登录。
    """
    logger.info(f"用户 '{current_user.username}' (ID: {current_user.id}) 订阅评估 ID: {submission_id} 的状态更新。")

    channel_name = f"report-ready:{submission_id}"

    async def event_generator():
        # 从连接池获取单个连接
        async with redis.Redis(connection_pool=pool) as redis_client:
            # 创建 PubSub 客户端
            pubsub = redis_client.pubsub(ignore_subscribe_messages=True) # 忽略订阅确认消息
            try:
                # 订阅特定频道
                await pubsub.subscribe(channel_name)
                logger.info(f"SSE: 已订阅频道 '{channel_name}'")

                while True:
                    # 检查客户端是否已断开连接
                    if await request.is_disconnected():
                        logger.info(f"SSE: 客户端断开连接，取消订阅频道 '{channel_name}'。")
                        break

                    # 等待来自 Redis 的消息 (带超时)
                    try:
                        # 使用 asyncio.timeout 防止永久阻塞
                        async with asyncio.timeout(60): # 例如，每 60 秒检查一次连接
                            message = await pubsub.get_message() # timeout=None 已移除，由 asyncio.timeout 控制
                        if message:
                            logger.info(f"SSE: 从频道 '{channel_name}' 收到消息: {message}")
                            data = message.get("data")
                            if data:
                                try:
                                    # 假设消息是 JSON 字符串 {"status": "success"} 或 {"status": "failed", "error": "..."}
                                    payload = json.loads(data)
                                    if payload.get("status") == "success":
                                        logger.info(f"SSE: 报告 ID {submission_id} 已就绪，发送 'report_ready' 事件。")
                                        yield json.dumps({"event": "report_ready", "data": json.dumps({"submission_id": submission_id})})
                                        break # 报告就绪，结束此 SSE 流
                                    elif payload.get("status") == "failed":
                                         logger.warning(f"SSE: 报告 ID {submission_id} 生成失败，发送 'report_failed' 事件。 Error: {payload.get('error')}")
                                         yield json.dumps({"event": "report_failed", "data": json.dumps({"submission_id": submission_id, "error": payload.get('error', '未知错误')})})
                                         break # 任务失败，也结束流
                                    else:
                                         logger.warning(f"SSE: 从频道 '{channel_name}' 收到未知状态的消息: {payload}")
                                except json.JSONDecodeError:
                                     logger.error(f"SSE: 无法解码来自频道 '{channel_name}' 的消息: {data}")
                                except Exception as parse_err:
                                     logger.error(f"SSE: 解析消息时出错 ('{channel_name}'): {parse_err}", exc_info=True)
                        # else:
                            # 没有消息，继续等待 (asyncio.timeout 会处理超时)
                            # logger.debug(f"SSE: 频道 '{channel_name}' 无新消息。")
                            # 可以发送 keep-alive 注释
                            # yield ":" # 发送 SSE 注释以保持连接活跃

                    except asyncio.TimeoutError:
                         # 超时期间没有收到消息，发送 keep-alive 并继续循环
                         logger.debug(f"SSE: 频道 '{channel_name}' 等待超时，发送 keep-alive。")
                         yield ":"
                    except Exception as e:
                         logger.error(f"SSE: 处理频道 '{channel_name}' 消息时发生错误: {e}", exc_info=True)
                         # 发生错误时也考虑结束流，防止无限循环
                         break

            finally:
                # 确保取消订阅
                try:
                    if pubsub.connection: # 检查连接是否存在
                         await pubsub.unsubscribe(channel_name)
                         # 关闭 pubsub 连接 (通常由 Redis 客户端的 __aexit__ 处理)
                         # await pubsub.close()
                         logger.info(f"SSE: 已取消订阅频道 '{channel_name}'")
                except Exception as unsub_err:
                     logger.warning(f"SSE: 取消订阅频道 '{channel_name}' 时出错: {unsub_err}")

    # 返回 EventSourceResponse
    return EventSourceResponse(event_generator())

================================================================================

--- File: PsychologyAnalysis\app\schemas\__init__.py ---
# 文件路径: PsychologyAnalysis/app/schemas/__init__.py (最终修复版)

# --- 用户相关 ---
from .user import (
    User, UserCreate, UserUpdate, UserUpdateAdmin, UserListResponse, UserInDB, UserBase
)
# --- 认证相关 ---
from .token import Token, TokenData
# --- 量表相关 ---
from .scale import (
    ScaleOption, ScaleQuestion, ScaleInfo, ScaleQuestionsResponse, AvailableScalesResponse
)
# --- 评估相关 ---
from .assessment import AssessmentSubmitResponse, AssessmentSummary
# --- 报告相关 ---
from .report import ReportData, ReportResponse, ReportStatusResponse
# --- 百科相关 ---
from .encyclopedia import EncyclopediaEntry, CategoriesResponse, EntriesResponse
# --- 统计相关 ---
from .stats import DemographicsStats, ChartData, AIAnalysisRequest, AIAnalysisResponse
# --- 审讯相关 ---
from .interrogation import (
    InterrogationBasicInfo, InterrogationQAInput, InterrogationRecordCreate,
    InterrogationRecordUpdate, InterrogationRecordRead, InterrogationSummary,
    InterrogationListResponse
)
# --- 属性相关 ---
from .attribute import AttributeRead, AttributeCreate, AttributeUpdate

# --- [核心修复] 指导方案相关 ---
# 我们从 guidance.py 中导入新的、正确的模型名称
from .guidance import GuidanceWithReportResponse

# --- 定义公开接口 (__all__) ---
__all__ = [
    # User
    "User", "UserCreate", "UserUpdate", "UserUpdateAdmin", "UserListResponse", "UserInDB", "UserBase",
    # Token
    "Token", "TokenData",
    # Scale
    "ScaleOption", "ScaleQuestion", "ScaleInfo", "ScaleQuestionsResponse", "AvailableScalesResponse",
    # Assessment
    "AssessmentSubmitResponse", "AssessmentSummary",
    # Report
    "ReportData", "ReportResponse", "ReportStatusResponse",
    # Encyclopedia
    "EncyclopediaEntry", "CategoriesResponse", "EntriesResponse",
    # Stats
    "DemographicsStats", "ChartData", "AIAnalysisRequest", "AIAnalysisResponse",
    # Interrogation
    "InterrogationBasicInfo", "InterrogationQAInput", "InterrogationRecordCreate",
    "InterrogationRecordUpdate", "InterrogationRecordRead",
    "InterrogationSummary", "InterrogationListResponse",
    # Attribute
    "AttributeRead", "AttributeCreate", "AttributeUpdate",
    # [核心修复] Guidance
    "GuidanceWithReportResponse",
]

================================================================================

--- File: PsychologyAnalysis\app\schemas\assessment.py ---
#评估提交相关
# app/schemas/assessment.py
from pydantic import BaseModel, Field
from typing import Dict, Any, Optional
from datetime import datetime

# --- 用于 POST /api/assessments/submit 的请求体 (部分数据将来自 Form) ---
# Pydantic 模型通常用于 JSON body，但 FastAPI 也能从 Form 字段映射
# 这里定义基础信息字段，方便验证和文档化，实际接收用 Form(...)
class BasicInfoSubmit(BaseModel):
    name: str = Field(..., description="姓名")
    gender: str = Field(..., description="性别")
    id_card: Optional[str] = Field(None, description="身份证号")
    age: int = Field(..., gt=0, description="年龄")
    occupation: Optional[str] = Field(None, description="职业")
    case_name: Optional[str] = Field(None, description="案件名称")
    case_type: Optional[str] = Field(None, description="案件类型")
    identity_type: Optional[str] = Field(None, description="人员身份")
    person_type: Optional[str] = Field(None, description="人员类型")
    marital_status: Optional[str] = Field(None, description="婚姻状况")
    children_info: Optional[str] = Field(None, description="子女情况")
    criminal_record: Optional[int] = Field(0, ge=0, le=1, description="有无犯罪前科 (0:无, 1:有)")
    health_status: Optional[str] = Field(None, description="健康情况")
    phone_number: Optional[str] = Field(None, description="手机号")
    domicile: Optional[str] = Field(None, description="归属地")
    # 注意：scale_type 和 scale_answers 会作为独立的 Form 字段传入

# --- 用于 POST /api/assessments/submit 的响应 ---
class AssessmentSubmitResponse(BaseModel):
    status: str = "success" # "success" or "error"
    message: str
    submission_id: Optional[int] = None # 成功时返回 ID
    
class AssessmentSummary(BaseModel):
    """用于在列表中显示的评估摘要信息"""
    id: int
    subject_name: Optional[str] = None
    questionnaire_type: Optional[str] = None
    status: str
    created_at: datetime
    submitter_id: Optional[int] = None # 关联提交者ID

    class Config:
        from_attributes = True

================================================================================

--- File: PsychologyAnalysis\app\schemas\attribute.py ---
# FILE: app/schemas/attribute.py
from pydantic import BaseModel, Field
from typing import Optional

class AttributeBase(BaseModel):
    """属性的基础模型，包含通用字段"""
    name: str = Field(..., max_length=100, description="属性名称 (e.g., 焦虑, 抑郁)")
    description: Optional[str] = Field(None, description="属性的详细描述")
    category: Optional[str] = Field(None, max_length=50, description="属性分类 (e.g., 情绪状态, 行为风险)")

class AttributeCreate(AttributeBase):
    """创建新属性时使用的模型"""
    pass # 继承 Base 即可

class AttributeUpdate(AttributeBase):
    """更新属性时使用的模型 (允许部分更新)"""
    name: Optional[str] = Field(None, max_length=100) # 更新时名称也可能可选

class AttributeRead(AttributeBase):
    """从数据库读取属性时使用的模型，包含 ID"""
    id: int

    class Config:
        from_attributes = True # Pydantic v2: orm_mode = True

================================================================================

--- File: PsychologyAnalysis\app\schemas\encyclopedia.py ---
# 文件: app/schemas/encyclopedia.py
from pydantic import BaseModel
from typing import List, Optional

class EncyclopediaEntry(BaseModel):
    """单个百科条目的结构"""
    category: str
    title: str
    content: str

class CategoriesResponse(BaseModel):
    """获取分类列表的响应"""
    categories: List[str]

class EntriesResponse(BaseModel):
    """获取条目列表的响应"""
    entries: List[EncyclopediaEntry]
    # 可以添加分页信息 (如果需要)
    # total: Optional[int] = None
    # page: Optional[int] = None
    # size: Optional[int] = None

# 可以复用 EncyclopediaEntry 作为随机条目的响应，或者定义一个更简单的
# class RandomTipResponse(BaseModel):
#     tip: str

================================================================================

--- File: PsychologyAnalysis\app\schemas\guidance.py ---
# 文件路径: PsychologyAnalysis/app/schemas/guidance.py (请确认或替换)

from pydantic import BaseModel, Field
from typing import Optional, Dict, Any, List

class AttributeRead(BaseModel):
    id: int
    name: str = Field(..., description="属性名称")
    class Config:
        from_attributes = True

class ReportDataForGuidance(BaseModel):
    id: int
    subject_name: Optional[str] = None
    report_text: Optional[str] = None
    created_at: Optional[Any] = None
    attributes: List[AttributeRead] = []
    class Config:
        from_attributes = True

# [->] 关键：我们定义的是这个名称
class GuidanceWithReportResponse(BaseModel):
    report: ReportDataForGuidance
    guidance: str
    error: Optional[str] = None
    class Config:
        from_attributes = True

================================================================================

--- File: PsychologyAnalysis\app\schemas\interrogation.py ---
# 文件路径: PsychologyAnalysis/app/schemas/interrogation.py

from pydantic import BaseModel, Field
from typing import List, Dict, Any, Optional
from datetime import datetime

class InterrogationBasicInfo(BaseModel):
    """审讯笔录 - 开始时输入的基础信息"""
    person_name: str = Field(..., description="被讯问人姓名")
    person_gender: Optional[str] = Field(None, description="性别")
    person_id_type_number: Optional[str] = Field(None, description="身份证号")
    person_address: Optional[str] = Field(None, description="家庭住址")
    person_contact: Optional[str] = Field(None, description="联系方式")
    person_age: Optional[int] = Field(None, description="年龄")
    is_minor: Optional[bool] = Field(None, description="是否未成年")
    person_dob: Optional[str] = Field(None, description="出生日期")
    person_hukou: Optional[str] = Field(None, description="户籍所在地")
    case_type: Optional[str] = Field(None, description="涉及案件类型")
    interrogation_location: Optional[str] = Field(None, description="讯问地点")
    interrogator_count: Optional[int] = Field(None, description="讯问人员数量")
    interrogator_ids: Optional[str] = Field(None, description="讯问人员警号 (逗号分隔)")


class InterrogationQAInput(BaseModel):
    """单个问答对 (用于 AI 建议输入和最终保存)"""
    q: str = Field(..., description="问题文本")
    a: str = Field(..., description="回答文本")

class InterrogationRecordCreate(BaseModel):
    """创建审讯记录的内部数据模型"""
    interrogator_id: int
    basic_info: Dict[str, Any]
    qas: List[Dict[str, str]]

class InterrogationRecordUpdate(BaseModel):
    """更新审讯记录的数据模型"""
    basic_info: Optional[Dict[str, Any]] = Field(None, description="更新后的基本信息 (可选)")
    qas: Optional[List[InterrogationQAInput]] = Field(None, description="完整的问答列表 (覆盖旧的)")
    status: Optional[str] = Field(None, description="状态 (e.g., 'ongoing', 'completed', 'cancelled')")
    full_text: Optional[str] = Field(None, description="最终生成的完整笔录文本 (可选)")

class InterrogationRecordRead(BaseModel):
    """读取或响应审讯记录的数据模型"""
    id: int
    interrogator_id: int
    basic_info: Optional[Dict[str, Any]] = Field(None, description="基础信息")
    qas: Optional[List[InterrogationQAInput]] = Field(None, description="问答对列表")
    status: str = Field(..., description="记录状态")
    full_text: Optional[str] = Field(None, description="完整笔录文本")
    created_at: datetime = Field(..., description="创建时间")
    updated_at: datetime = Field(..., description="最后更新时间")

    class Config:
        from_attributes = True

# [+] 新增: 用于列表展示的摘要模型
class InterrogationSummary(BaseModel):
    id: int
    person_name: Optional[str] = Field(None, description="被讯问人姓名")
    case_type: Optional[str] = Field(None, description="案件类型")
    status: str
    created_at: datetime
    updated_at: datetime
    interrogator_id: int

    # 从 basic_info 中提取 person_name 和 case_type
    @classmethod
    def from_orm(cls, obj: Any) -> 'InterrogationSummary':
        basic_info = obj.basic_info if isinstance(obj.basic_info, dict) else {}
        return cls(
            id=obj.id,
            person_name=basic_info.get("person_name"),
            case_type=basic_info.get("case_type"),
            status=obj.status,
            created_at=obj.created_at,
            updated_at=obj.updated_at,
            interrogator_id=obj.interrogator_id
        )

# [+] 新增: 审讯记录列表的响应模型
class InterrogationListResponse(BaseModel):
    total: int = Field(..., description="记录总数")
    records: List[InterrogationSummary] = Field(..., description="当前页的审讯记录列表")

================================================================================

--- File: PsychologyAnalysis\app\schemas\report.py ---
# FILE: app/schemas/report.py (修改后，添加 attributes 字段)
from pydantic import BaseModel, Field # 确保 Field 已导入
from typing import Optional, Dict, Any, List # <--- 导入 List
from datetime import datetime

# +++ 新增：定义用于在报告中展示的属性信息 Schema +++
# （理想情况下，这个模型应该在 app/schemas/attribute.py 中定义并从那里导入）
class AttributeRead(BaseModel):
    id: int
    name: str = Field(..., description="属性名称，例如'焦虑'、'高风险'")
    # 可以选择性地包含 description 或 category
    # description: Optional[str] = None
    # category: Optional[str] = None

    class Config:
        from_attributes = True # 允许从 ORM 对象属性创建
# +++ 属性 Schema 定义结束 +++


class ReportData(BaseModel):
    """报告详情的响应模型 (包含关联属性)"""
    id: int
    image_path: Optional[str] = None
    subject_name: Optional[str] = None
    age: Optional[int] = None
    gender: Optional[str] = None
    questionnaire_type: Optional[str] = None
    questionnaire_data: Optional[Dict[str, Any]] = None # 解析后的 JSON
    report_text: Optional[str] = None
    created_at: Optional[datetime] = None
    updated_at: Optional[datetime] = None
    id_card: Optional[str] = None
    occupation: Optional[str] = None
    case_name: Optional[str] = None
    case_type: Optional[str] = None
    identity_type: Optional[str] = None
    person_type: Optional[str] = None
    marital_status: Optional[str] = None
    children_info: Optional[str] = None
    criminal_record: Optional[int] = None
    health_status: Optional[str] = None
    phone_number: Optional[str] = None
    domicile: Optional[str] = None
    status: Optional[str] = None # 报告状态

    # +++ 新增：关联的属性列表 +++
    # 这个字段将包含与此评估关联的所有属性对象的信息
    # 默认值为 None 或空列表 [] 都可以，取决于你的偏好
    attributes: Optional[List[AttributeRead]] = Field(default_factory=list, description="与此评估关联的属性标签列表")
    # +++ 属性字段添加结束 +++

    class Config: # Pydantic V2 使用 ConfigDict 或直接设置
        from_attributes = True # 保持不变，以便从 Assessment ORM 对象加载数据
    # ... 可以添加未来需要的其他报告字段 ...

class ReportResponse(BaseModel):
    """获取报告的 API 响应"""
    report: Optional[ReportData] = None
    message: Optional[str] = None # 用于传递状态信息（如处理中）或错误
    # error 字段可以移除，统一使用 message 字段

# 状态响应模型保持不变
class ReportStatusResponse(BaseModel):
    status: str

================================================================================

--- File: PsychologyAnalysis\app\schemas\scale.py ---
# 量表相关
# app/schemas/scale.py
from pydantic import BaseModel
from typing import List, Dict, Any, Optional

class ScaleOption(BaseModel):
    """量表问题的选项"""
    text: str
    score: int | float # 分数可能是整数或浮点数

class ScaleQuestion(BaseModel):
    """量表问题结构"""
    number: int
    text: str
    options: List[ScaleOption]

class ScaleInfo(BaseModel):
    """量表基本信息 (用于列表显示)"""
    code: str # 量表代码 (e.g., 'SAS', 'Personality')
    name: str # 量表显示名称

# --- 用于 /api/scales/{scale_code}/questions 的响应 ---
class ScaleQuestionsResponse(BaseModel):
    questions: Optional[List[ScaleQuestion]] = None
    error: Optional[str] = None # 如果找不到问题，可以返回错误信息

# --- 用于 /api/scales 的响应 ---
class AvailableScalesResponse(BaseModel):
    scales: List[ScaleInfo]

================================================================================

--- File: PsychologyAnalysis\app\schemas\stats.py ---
# 文件路径: PsychologyAnalysis/app/schemas/stats.py

from pydantic import BaseModel, Field
from typing import List, Dict, Any

class ChartData(BaseModel):
    """用于图表展示的数据结构"""
    labels: List[str]
    values: List[int | float]

class DemographicsStats(BaseModel):
    """人口统计数据的响应模型"""
    ageData: ChartData
    genderData: ChartData

# [+] 新增: AI 分析请求体模型
class AIAnalysisRequest(BaseModel):
    demographics: DemographicsStats = Field(..., description="要分析的人口统计数据")
    # 未来可以添加更多数据，例如：
    # assessment_trends: Optional[ChartData] = None

# [+] 新增: AI 分析响应模型
class AIAnalysisResponse(BaseModel):
    analysis_text: str = Field(..., description="由AI生成的分析文本")

================================================================================

--- File: PsychologyAnalysis\app\schemas\token.py ---
# app/schemas/token.py
from pydantic import BaseModel
from typing import Optional

class Token(BaseModel):
    """响应模型：登录成功后返回给客户端的令牌"""
    access_token: str
    token_type: str = "bearer" # 标准 OAuth2 类型

class TokenData(BaseModel):
    """内部模型：JWT 令牌载荷 (Payload) 的数据结构"""
    username: Optional[str] = None
    # 你未来可以在这里添加其他需要存储在令牌中的信息，
    # 例如用户 ID 或角色/权限 (scopes)
    # scopes: List[str] = []

================================================================================

--- File: PsychologyAnalysis\app\schemas\user.py ---
# FILE: app/schemas/user.py (添加 UserUpdateAdmin 和 UserListResponse)
from pydantic import BaseModel, EmailStr, Field
from typing import Optional, List # 添加 List 导入

class UserBase(BaseModel):
    username: str = Field(..., min_length=3, max_length=50, description="用户名")
    email: Optional[EmailStr] = Field(None, description="邮箱")
    full_name: Optional[str] = Field(None, max_length=100, description="全名")
    # 允许创建/更新时指定，但如果未指定，CRUD 层会使用默认值
    is_active: Optional[bool] = Field(True, description="是否激活")
    is_superuser: Optional[bool] = Field(False, description="是否超级用户")

class UserCreate(UserBase):
    password: str = Field(..., min_length=6, description="登录密码 (明文)")

class UserUpdate(UserBase):
    password: Optional[str] = Field(None, min_length=6, description="新密码 (可选，用于用户自我更新)")
    # 用户自我更新时不应能修改 is_active 和 is_superuser
    is_active: Optional[bool] = Field(None, description="不允许用户自我修改") # 阻止用户自己设置
    is_superuser: Optional[bool] = Field(None, description="不允许用户自我修改") # 阻止用户自己设置


# +++ 新增：管理员更新用户时使用的 Schema +++
class UserUpdateAdmin(BaseModel):
    """管理员更新用户信息时使用，允许修改激活和超管状态，密码可选"""
    email: Optional[EmailStr] = Field(None, description="新邮箱 (可选)")
    full_name: Optional[str] = Field(None, max_length=100, description="新全名 (可选)")
    is_active: Optional[bool] = Field(None, description="设置激活状态 (可选)") # 允许管理员修改
    is_superuser: Optional[bool] = Field(None, description="设置超级用户状态 (可选)") # 允许管理员修改
    password: Optional[str] = Field(None, min_length=6, description="设置新密码 (可选)")

class UserInDBBase(UserBase):
    id: int
    class Config:
        from_attributes = True # Pydantic V2 风格

class User(UserInDBBase):
    """用于 API 响应的用户模型 (不含密码)"""
    pass

# +++ 新增：用户列表响应 Schema +++
class UserListResponse(BaseModel):
    """用户列表接口的响应结构"""
    total: int = Field(..., description="符合条件的用户总数")
    users: List[User] = Field(..., description="当前页的用户列表")

# 内部数据库表示（通常不在 API 中直接暴露）
class UserInDB(UserInDBBase):
    hashed_password: str

================================================================================

--- File: PsychologyAnalysis\app\tasks\__init__.py ---


================================================================================

--- File: PsychologyAnalysis\app\tasks\analysis.py ---
# app/tasks/analysis.py
import logging
import os
import sys
import asyncio
import json
# --- 使用异步和同步 Redis 客户端 ---
import redis.asyncio as aredis # 异步别名
import redis # 标准同步客户端

# --- 路径设置 (保持不变) ---
TASK_DIR = os.path.dirname(os.path.abspath(__file__))
APP_ROOT_FROM_TASK = os.path.dirname(TASK_DIR) # app/
PROJECT_ROOT_FROM_TASK = os.path.dirname(APP_ROOT_FROM_TASK) # PsychologyAnalysis/
if PROJECT_ROOT_FROM_TASK not in sys.path:
    sys.path.insert(0, PROJECT_ROOT_FROM_TASK)
    print(f"[Celery Task Init] 已添加 {PROJECT_ROOT_FROM_TASK} 到 sys.path 以供 worker 使用")

# --- 核心导入 (添加 STATUS_PENDING, STATUS_PROCESSING) ---
try:
    from app.core.celery_app import celery_app
    from app.core.config import settings
    from app.db.session import AsyncSessionLocal
    from app.crud import assessment as crud_assessment
    # +++ 导入所有需要的状态常量 +++
    from app.models.assessment import STATUS_COMPLETE, STATUS_FAILED, STATUS_PENDING, STATUS_PROCESSING
    # +++++++++++++++++++++++++++++++
    from src.ai_utils import generate_report_content
    from src.utils import setup_logging
    WORKER_LOGGER_NAME = f"{settings.APP_NAME}_Worker"
    setup_logging(log_level_str=settings.LOG_LEVEL,
                    log_dir_name=os.path.basename(settings.LOGS_DIR),
                    logger_name=WORKER_LOGGER_NAME)
    logger = logging.getLogger(WORKER_LOGGER_NAME)
    print(f"[Celery Task Init] Logger '{WORKER_LOGGER_NAME}' 配置完成。")
except ImportError as e:
        print(f"[Celery Task Init] CRITICAL: 无法导入 src 模块或状态常量: {e}", exc_info=True)
        generate_report_content = None
        # --- 添加后备定义 ---
        STATUS_COMPLETE = "complete"
        STATUS_FAILED = "failed"
        STATUS_PENDING = "pending"
        STATUS_PROCESSING = "processing"
        # ---------------------
        logger = logging.getLogger(__name__)
        if not logger.hasHandlers(): logging.basicConfig(level=logging.INFO)
        logger.critical(f"CRITICAL: 核心处理函数 (generate_report_content) 或状态常量导入失败: {e}")
except Exception as setup_err:
        print(f"[Celery Task Init] CRITICAL: 初始化失败: {setup_err}", exc_info=True)
        generate_report_content = None
        # --- 添加后备定义 ---
        STATUS_COMPLETE = "complete"
        STATUS_FAILED = "failed"
        STATUS_PENDING = "pending"
        STATUS_PROCESSING = "processing"
        # ---------------------
        logger = logging.getLogger(__name__)
        if not logger.hasHandlers(): logging.basicConfig(level=logging.INFO)
        logger.critical(f"CRITICAL: 初始化失败: {setup_err}")

# --- Redis Publish Function (保持不变) ---
def publish_report_status_sync(assessment_id: int, status: str, error_msg: str = None):
    """同步地将报告状态发布到 Redis。"""
    global logger
    if not hasattr(settings, 'REDIS_URL'):
         logger.error(f"Worker (Sync): settings 对象缺少 REDIS_URL，无法发布 ID {assessment_id} 的状态 '{status}'。")
         return
    channel_name = f"report-ready:{assessment_id}"
    message_payload = {"status": status}
    if error_msg:
        message_payload["error"] = error_msg
    message_json = json.dumps(message_payload)
    redis_client = None
    try:
        redis_client = redis.Redis.from_url(
            settings.REDIS_URL,
            decode_responses=True
        )
        redis_client.publish(channel_name, message_json)
        logger.info(f"Worker (Sync): 已向频道 '{channel_name}' 发布消息: {message_json}")
    except Exception as e:
        logger.error(f"Worker (Sync): 向频道 '{channel_name}' 发布消息时出错: {e}", exc_info=True)
    finally:
         if redis_client:
              try:
                   redis_client.close()
                   logger.debug(f"Worker (Sync): Redis client for publish ID {assessment_id} closed.")
              except Exception as close_err:
                   logger.warning(f"Worker (Sync): 关闭 Redis publish client 时出错: {close_err}")

# --- Celery 任务定义 (更新 global 声明) ---
@celery_app.task(bind=True, name='tasks.run_ai_analysis')
def run_ai_analysis(self, assessment_id: int):
    """
    Celery 任务：异步运行 AI 分析、更新报告文本和状态，完成后 *同步* 发布 Redis 消息。
    """
    # +++ 确保所有使用的状态常量都在 global 声明中 +++
    global logger, STATUS_COMPLETE, STATUS_FAILED, STATUS_PENDING, STATUS_PROCESSING
    # +++++++++++++++++++++++++++++++++++++++++++++++
    if logger is None:
        print("CRITICAL ERROR: Logger 在 run_ai_analysis 任务中不可用!")
        logging.basicConfig(level=logging.INFO)
        logger = logging.getLogger(__name__)

    task_id_str = f"[Celery Task {self.request.id}]"
    logger.info(f"{task_id_str} 收到任务，评估 ID: {assessment_id}")

    if generate_report_content is None:
        error_msg = "核心处理函数导入失败"
        logger.error(f"{task_id_str} {error_msg}，中止任务 ID {assessment_id}。")
        try:
            async def update_fail_status():
                async with AsyncSessionLocal() as session:
                    # 使用 STATUS_FAILED 常量
                    await crud_assessment.update_status(db=session, assessment_id=assessment_id, new_status=STATUS_FAILED)
                    logger.info(f"{task_id_str} 已尝试将 ID {assessment_id} 状态更新为失败 (导入错误)。")
            asyncio.run(update_fail_status())
        except Exception as db_err:
             logger.error(f"{task_id_str} 在更新失败状态时出错 (导入错误)，ID {assessment_id}: {db_err}")
        publish_report_status_sync(assessment_id, "failed", error_msg) # 这里仍然用字符串 "failed" 发布
        return {"status": "failure", "assessment_id": assessment_id, "error": error_msg}

    async def _run_analysis_async():
        nonlocal assessment_id
        report_text_to_save = "处理失败：发生未知错误"
        # 使用状态常量初始化
        final_status = STATUS_FAILED
        error_detail = None
        updated_to_complete = False

        async with AsyncSessionLocal() as session:
            try:
                logger.info(f"{task_id_str} 正在异步加载评估数据 ID: {assessment_id}")
                assessment_record = await crud_assessment.get(db=session, id=assessment_id)

                if not assessment_record:
                    logger.error(f"{task_id_str} 无法找到评估记录 ID: {assessment_id}")
                    error_detail = f"评估记录 ID {assessment_id} 未找到"
                    # 使用状态常量返回
                    return {"status": STATUS_FAILED, "assessment_id": assessment_id, "error": error_detail}

                # +++ 更新状态为 processing (使用常量) +++
                if assessment_record.status == STATUS_PENDING:
                    # 使用常量进行比较和更新
                    logger.info(f"{task_id_str} 将评估 ID {assessment_id} 状态更新为 '{STATUS_PROCESSING}'")
                    try:
                        await crud_assessment.update_status(db=session, assessment_id=assessment_id, new_status=STATUS_PROCESSING)
                    except Exception as status_update_err:
                         logger.error(f"{task_id_str} 更新状态为 processing 时出错 (ID: {assessment_id}): {status_update_err}", exc_info=True)
                # +++++++++++++++++++++++++++++++++++++++

                submission_data = {}
                for column in assessment_record.__table__.columns:
                    submission_data[column.name] = getattr(assessment_record, column.name)

                logger.debug(f"{task_id_str} 已加载数据，准备调用核心处理函数，ID: {assessment_id}")
                generated_text = generate_report_content(
                    submission_data=submission_data,
                    config=settings.model_dump(),
                    task_logger=logger
                )

                if generated_text is None:
                    logger.error(f"{task_id_str} 核心处理函数返回 None，ID: {assessment_id}")
                    report_text_to_save = "错误：报告生成意外返回空"
                    error_detail = "报告生成返回空"
                    final_status = STATUS_FAILED
                elif "错误" in generated_text or "Error" in generated_text or "失败" in generated_text:
                    logger.error(f"{task_id_str} 核心处理函数返回错误信息，ID {assessment_id}: {generated_text[:200]}...")
                    report_text_to_save = generated_text
                    error_detail = f"AI 处理失败: {generated_text[:150]}"
                    final_status = STATUS_FAILED
                else:
                    logger.info(f"{task_id_str} 报告内容生成成功，ID: {assessment_id}")
                    report_text_to_save = generated_text
                    # 使用状态常量
                    final_status = STATUS_COMPLETE
                    error_detail = None

                logger.info(f"{task_id_str} 尝试异步更新报告文本到数据库，ID: {assessment_id}")
                report_to_save_str = str(report_text_to_save)
                updated_record = await crud_assessment.update_report_text(
                    db=session,
                    assessment_id=assessment_id,
                    report_text=report_to_save_str
                )

                if not updated_record:
                    logger.error(f"{task_id_str} 尝试更新数据库时记录 ID {assessment_id} 未找到！")
                    if final_status == STATUS_COMPLETE: final_status = STATUS_FAILED # 使用常量
                    error_detail = f"数据库更新失败 (更新时 ID: {assessment_id} 未找到)"
                else:
                    logger.info(f"{task_id_str} 数据库报告文本更新成功，ID: {assessment_id}")
                    # +++++++ 如果报告文本更新成功，并且预期状态是 complete，则更新状态 (使用常量) +++++++
                    if final_status == STATUS_COMPLETE:
                        logger.info(f"{task_id_str} 尝试异步更新评估状态为 '{STATUS_COMPLETE}'，ID: {assessment_id}")
                        try:
                            status_updated_record = await crud_assessment.update_status(
                                db=session,
                                assessment_id=assessment_id,
                                new_status=STATUS_COMPLETE # 使用常量
                            )
                            if status_updated_record:
                                logger.info(f"{task_id_str} 数据库状态更新为 '{STATUS_COMPLETE}' 成功，ID: {assessment_id}")
                                updated_to_complete = True
                            else:
                                logger.error(f"{task_id_str} 更新状态为 '{STATUS_COMPLETE}' 时记录 ID {assessment_id} 未找到！")
                                final_status = STATUS_FAILED # 使用常量
                                error_detail = f"数据库状态更新失败 (更新时 ID: {assessment_id} 未找到)"
                        except Exception as status_update_err:
                            logger.error(f"{task_id_str} 更新状态为 '{STATUS_COMPLETE}' 时出错，ID {assessment_id}: {status_update_err}", exc_info=True)
                            error_detail = f"数据库状态更新时出错: {status_update_err}"
                    # +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

            except Exception as e:
                logger.error(f"{task_id_str} 在 _run_analysis_async 中发生意外错误，ID {assessment_id}: {e}", exc_info=True)
                error_message = f"任务执行失败: {type(e).__name__} - {str(e)}"
                report_text_to_save = error_message[:2000]
                final_status = STATUS_FAILED # 使用常量
                error_detail = error_message[:150]
                try:
                    logger.info(f"{task_id_str} 尝试将错误信息和失败状态写入数据库，ID {assessment_id}")
                    await crud_assessment.update_report_text(
                         db=session,
                         assessment_id=assessment_id,
                         report_text=report_text_to_save
                     )
                    # 使用常量更新状态
                    await crud_assessment.update_status(
                         db=session,
                         assessment_id=assessment_id,
                         new_status=STATUS_FAILED
                     )
                    logger.info(f"{task_id_str} 已将最终错误信息和失败状态写入数据库，ID {assessment_id}")
                except Exception as db_err_on_fail:
                    logger.error(f"{task_id_str} 在失败处理中写入数据库也失败了，ID {assessment_id}: {db_err_on_fail}")

        # 返回最终状态 (常量)，以及其他信息
        return {"status": final_status, "report_text": report_text_to_save, "error": error_detail, "updated_to_complete": updated_to_complete}

    # --- 运行异步块并发布状态 (使用常量) ---
    result = None
    final_task_status = STATUS_FAILED # 使用常量
    report_length = 0
    error_for_publish = "任务执行期间发生未知错误"
    publish_status_str = "failed" # 用于发布到 Redis 的状态字符串，保持 success/failed

    try:
        result = asyncio.run(_run_analysis_async())
        final_task_status = result.get("status", STATUS_FAILED)
        error_for_publish = result.get("error")

        if final_task_status == STATUS_COMPLETE and result.get("updated_to_complete"):
            report_length = len(result.get("report_text", ""))
            error_for_publish = None
            publish_status_str = "success" # Redis 发布 success
        elif final_task_status == STATUS_COMPLETE and not result.get("updated_to_complete"):
             logger.warning(f"{task_id_str} 任务成功完成但状态更新至DB失败，ID {assessment_id}。错误: {error_for_publish}")
             error_for_publish = "报告已生成，但最终状态更新至数据库时出错。"
             publish_status_str = "success" # 核心完成，仍发布 success
        else: # 任务失败
             logger.error(f"{task_id_str} 任务处理失败，ID {assessment_id}。错误: {error_for_publish}")
             publish_status_str = "failed" # Redis 发布 failed

        # *** 同步发布最终状态到 Redis (使用 "success" 或 "failed" 字符串) ***
        publish_report_status_sync(assessment_id, publish_status_str, error_for_publish)

    except Exception as task_exec_err:
        logger.critical(f"{task_id_str} Celery 任务执行期间发生顶层错误，ID {assessment_id}: {task_exec_err}", exc_info=True)
        error_msg = f"任务执行错误: {type(task_exec_err).__name__} - {str(task_exec_err)}"
        error_for_publish = error_msg[:150]
        final_task_status = STATUS_FAILED # 使用常量
        publish_status_str = "failed"     # Redis 发布 failed

        try:
            from src.data_handler import DataHandler
            sync_db_path = settings.DB_PATH_SQLITE
            sync_handler = DataHandler(db_path=sync_db_path)
            sync_handler.update_report_text(assessment_id, error_msg[:2000])
            # sync_handler.update_status(assessment_id, STATUS_FAILED) # 假设有同步更新状态方法
            logger.info(f"{task_id_str} 已尝试同步记录顶层错误到数据库，ID {assessment_id}")
        except Exception as sync_db_err:
            logger.error(f"{task_id_str} 同步记录顶层错误到数据库失败，ID {assessment_id}: {sync_db_err}")
        finally:
             publish_report_status_sync(assessment_id, publish_status_str, error_for_publish)

    # --- 返回任务结果 (使用 "success" 或 "failure" 字符串，与 Redis 发布一致) ---
    logger.info(f"{task_id_str} 任务处理完成，ID {assessment_id}, 结果: {final_task_status}")
    if final_task_status == STATUS_COMPLETE:
        return {"status": "success", "assessment_id": assessment_id, "report_length": report_length, "db_status_updated": result.get("updated_to_complete", False)}
    else:
        return {"status": "failure", "assessment_id": assessment_id, "error": error_for_publish}

================================================================================

--- File: PsychologyAnalysis\config\config.yaml ---
api_key: "sk-0ffc64dd9d614c0088ee28e3a072420a" # 确保这个也配置正确
text_model: "qwen-plus"
vision_model: "qwen-vl-plus" # 或者你选择的其他模型

# 确保下面这部分存在且格式正确
REPORT_PROMPT_TEMPLATE: |
  请根据以下信息生成一份详细的心理分析报告，服务于警务工作场景。

  **I. 被测者基础信息:**
  姓名: {subject_info[name]}
  性别: {subject_info[gender]}
  身份证号: {subject_info[id_card]}
  年龄: {subject_info[age]}
  职业: {subject_info[occupation]}
  案件名称: {subject_info[case_name]}
  案件类型: {subject_info[case_type]}
  人员身份: {subject_info[identity_type]}
  人员类型: {subject_info[person_type]}
  婚姻状况: {subject_info[marital_status]}
  子女情况: {subject_info[children_info]}
  有无犯罪前科: {criminal_record_text}
  健康情况: {subject_info[health_status]}
  手机号: {subject_info[phone_number]}
  归属地: {subject_info[domicile]}

  **II. 绘画分析 (基于AI对图片的描述):**
  {description}

  **III. 量表分析:**
  量表类型: {questionnaire_type}
  量表得分: {score}
  量表答案详情 (JSON):
  {questionnaire}
  初步解释: {scale_interpretation}

  **IV. 综合心理状态分析与建议:**
  请结合以上所有信息（基础信息、绘画分析、量表结果），进行深入的心理状态评估，提取关键人格特征，并针对警务工作场景（如未成年人犯罪预防、在押人员管理、上访户调解、民辅警关怀等，根据人员类型判断侧重点）给出具体的风险评估、干预建议或沟通策略。分析需专业、客观、有条理。报告应直接开始分析内容，无需重复引言。

  --- 分析报告正文 ---

================================================================================

--- File: PsychologyAnalysis\config\psychology_encyclopedia.json ---

[
    {
      "category": "心理小贴士",
      "title": "深呼吸缓解压力",
      "content": "每天花几分钟进行深呼吸练习，有助于放松神经系统，缓解积累的压力和焦虑感。"
    },
    {
      "category": "心理小贴士",
      "title": "积极自我对话",
      "content": "有意识地用积极、鼓励的语言与自己对话，可以显著提升情绪状态和自信心。"
    },
    {
      "category": "心理小贴士",
      "title": "充足睡眠的重要性",
      "content": "保证每晚7-9小时的高质量睡眠，是维护身心健康、巩固记忆和情绪调节的基础。"
    },
    {
      "category": "常见心理现象",
      "title": "确认偏误 (Confirmation Bias)",
      "content": "人们倾向于寻找、解释和记住那些证实自己已有信念或假设的信息，而忽略矛盾的证据。"
    },
    {
      "category": "常见心理现象",
      "title": "安慰剂效应 (Placebo Effect)",
      "content": "指病人虽然获得无效的治疗，但却“预料”或“相信”治疗有效，而让病患症状得到舒缓的现象。"
    },
    {
      "category": "情绪管理",
      "title": "情绪标签化",
      "content": "尝试识别并命名你正在经历的情绪（例如，“我感到有些焦虑”），这有助于更好地理解和管理它。"
    },
    {
      "category": "情绪管理",
      "title": "ABC模型",
      "content": "由心理学家阿尔伯特·艾利斯提出，指事件(A)本身不直接导致情绪后果(C)，而是我们对事件的信念(B)导致了情绪后果。"
    }
    
  ]

================================================================================

--- File: PsychologyAnalysis\input\questionnaires\1测你性格最真实的一面.json ---
{
  "title": "测你性格最真实的一面",
  "description": "面具下的个人才最真实。社会心理学家笑侃每个人的家里都置有一个面具衣柜，以扮演不同的角色，应对不同的需要和责任。所以，当你摘下所有的面具，你的性格呈现哪种特质呢？本题告诉你答案。",
  "questions": [
    {
      "number": 1,
      "text": "若有块地是养老用的房子，你会盖在哪？",
      "options": [
        {"text": "靠近湖边", "score": 8},
        {"text": "靠近河边", "score": 15},
        {"text": "深山内", "score": 6},
        {"text": "森林", "score": 10}
      ]
    },
    {
      "number": 2,
      "text": "吃西餐最先动那一道？",
      "options": [
        {"text": "面包", "score": 6},
        {"text": "肉类", "score": 15},
        {"text": "沙拉", "score": 6},
        {"text": "饮料", "score": 6}
      ]
    },
    {
      "number": 3,
      "text": "如果节庆要喝点饮料，你认为如何搭配最适当呢？",
      "options": [
        {"text": "耶诞节／香槟", "score": 15},
        {"text": "新年／牛奶", "score": 6},
        {"text": "情人节／葡萄酒", "score": 1},
        {"text": "国庆日／威士忌", "score": 6}
      ]
    },
    {
      "number": 4,
      "text": "你通常什么时候洗澡？",
      "options": [
        {"text": "吃完晚饭後", "score": 10},
        {"text": "吃晚饭前", "score": 15},
        {"text": "看完电视後", "score": 6},
        {"text": "上床前", "score": 8},
        {"text": "早上起床才洗", "score": 3},
        {"text": "没有特定时间", "score": 6}
      ]
    },
    {
      "number": 5,
      "text": "如果你可以化为天空的一隅，希望自己成为什么呢？",
      "options": [
        {"text": "太阳", "score": 1},
        {"text": "月亮", "score": 1},
        {"text": "星星", "score": 8},
        {"text": "云", "score": 15}
      ]
    },
    {
      "number": 6,
      "text": "你觉得用红色笔写的［爱］字比用绿色笔更能代表真爱吗？",
      "options": [
        {"text": "是", "score": 1},
        {"text": "否", "score": 3}
      ]
    },
    {
      "number": 7,
      "text": "如果你在选择窗帘的颜色，你会选择。。。？",
      "options": [
        {"text": "红色", "score": 15},
        {"text": "蓝色", "score": 6},
        {"text": "绿色", "score": 6},
        {"text": "白色", "score": 8},
        {"text": "黄色", "score": 1},
        {"text": "橙色", "score": 3},
        {"text": "黑色", "score": 1},
        {"text": "紫色", "score": 10}
      ]
    },
    {
      "number": 8,
      "text": "挑选一种你最喜爱的水果吧！",
      "options": [
        {"text": "葡萄", "score": 1},
        {"text": "水梨", "score": 6},
        {"text": "橘子", "score": 8},
        {"text": "香蕉", "score": 15},
        {"text": "樱桃", "score": 3},
        {"text": "苹果", "score": 10},
        {"text": "葡萄柚", "score": 8},
        {"text": "哈密瓜", "score": 6},
        {"text": "柿子", "score": 3},
        {"text": "木瓜", "score": 10},
        {"text": "凤梨", "score": 15}
      ]
    },
    {
      "number": 9,
      "text": "若你是动物，你希望身上搭配什么颜色的毛？",
      "options": [
        {"text": "狮子／红毛", "score": 15},
        {"text": "猫咪／蓝毛", "score": 6},
        {"text": "大象／绿毛", "score": 1},
        {"text": "狐狸／黄毛", "score": 6}
      ]
    },
    {
      "number": 10,
      "text": "你会为名利权位，刻意讨好上司或朋友吗？",
      "options": [
        {"text": "会", "score": 3},
        {"text": "不会", "score": 1}
      ]
    },
    {
      "number": 11,
      "text": "你认为朋友比家人更重要吗？",
      "options": [
        {"text": "是", "score": 15},
        {"text": "否", "score": 6}
      ]
    },
    {
      "number": 12,
      "text": "若你是只白蝴蝶，会停在那一种颜色的花上咧？",
      "options": [
        {"text": "红色", "score": 15},
        {"text": "粉红色", "score": 8},
        {"text": "黄色", "score": 3},
        {"text": "紫色", "score": 6}
      ]
    },
    {
      "number": 13,
      "text": "假日无聊时，你会选择什么电视节目来看？",
      "options": [
        {"text": "综艺节目", "score": 10},
        {"text": "新闻节目", "score": 15},
        {"text": "连续剧", "score": 6},
        {"text": "体育转播", "score": 15},
        {"text": "电影频道", "score": 10}
      ]
    }
  ],
  "results": [
    {
      "range": {"min": 101, "max": 195},
      "conclusion": "【积极热情】个性开放，觉得助人为快乐之本。做事乾脆俐落，有时会过度激动，但又富有强烈的同情心，令人莫明的想和他们亲近。也因为他们的复原力很强，我们能轻易感觉一股够劲的行动力，和他们在一起就像有了一股生命的泉源，不会有想放弃的念头，因为他们总是抱持著乐观进取的态度。 ◎积极人：勇於追求目标理想，不会放弃任何希望，也具有越挫越勇的特质和困难环境中越不易击败的精神。 ◎热情人：生活圈广泛五彩缤纷，比较不拘小节，因此造成他们的个性坦率直来直往活泼好动的性格，也常有孩子气的举动。"
    },
    {
      "range": {"min": 90, "max": 100},
      "conclusion": "【领导人】做事慢条斯理，喜欢思考、沉淀思绪，爱好命令别人，讨厌别人的反抗与被质疑的态度，不容许也不容许自己输给别人。喜爱学习，想让自己成为最好的。而达不到目标时，会不分青红皂白的生闷气。"
    },
    {
      "range": {"min": 79, "max": 89},
      "conclusion": "【感性人】表达能力丰富，想像空间大，因此常胡思乱想而变的多愁善感，容易沉醉在罗曼蒂克与甜言蜜语渔，对爱情总是既期待又怕受伤，常无厘头又莫明的对号入坐。个性属於优柔寡断型，通不顾现实只跟著感觉走，让人猜不著他的想法与思考逻辑。"
    },
    {
      "range": {"min": 60, "max": 78},
      "conclusion": "【理性＆淡定】做事总是深思熟虑考虑再三，谨慎小心，冷静且也当个容易妥协的人，有时候宁愿自己承受舆论与压力，也不愿说出来和好友谈谈，因为他们总是认为自己能熬过那么不堪苦的日子，痕都只是在逞强罢了。他们通常讨厌被束缚，更市酷爱自由！ ◎理性人：深思熟虑为第一原则，凡事要求公私分明，生活可能较拘谨严肃，对於赞美悲伤或开心等没什么差异性。 ◎淡定人：与世无争恬定主意者，内心没什么波澜，就像温驯的绵羊，只要能够生活就好，不必计较太多，成为只羡鸳鸯不羡仙的那一类人。"
    },
    {
      "range": {"min": 40, "max": 59},
      "conclusion": "【双重＆孤寂】环境的因素会让你不知道该怎么表现你自己，所以你可能有见人说人话的习惯，其实你热爱人多的时候，只是有时会导致你慌乱，不过你还会因为现实的需要而委屈自己，配合他人！通常会得不到满足而受挫，造成自闭。 ◎双重人：不会适时表达情感，压抑情绪总是他们碰到阻碍和困难时的第一个反应，学习如何发泄情绪与传达自己的意见，市必须优先学习的。 ◎孤寂人：对於现实不满，不易与人相处，难以找到生活的目标与重心，觉得没人了解自己，常引发强烈的自我防卫意识，就算与人交往，心中仍有一份挥之不去的孤单。"
    },
    {
      "range": {"min": 0, "max": 39},
      "conclusion": "【现实＆自我】喜欢多变刺激的事，是个很有心机的人，而且计划周详，别人对你难以揣测，对任何事你都充满企图心，刚愎自用，想突显求表现。常追求遥不可及的梦想，造成不平衡的心态，隐瞒自己也欺骗别人。 ◎现实人：为了讨好上司、朋友，让人觉得墙头草两边倒，心机重，心眼小，自私又自利，但往往能为自己打算未来，为自己创造一番天地。 ◎自我人：常透过主观的感受来表达意见，然而，人际关系的走样，或许是造成压力的来源。不自觉的划地自限压抑情绪，也不愿被外在所影响而尝试改变，更不会考虑别人的感受，即便经历了挫折？仍然固执自己的理念。"
    }
  ]
}

================================================================================

--- File: PsychologyAnalysis\input\questionnaires\2亲子关系问卷量表.json ---
{
    "title": "亲子关系问卷量表",
    "description": "该量表主要在于测量您和孩子的关系如何。家长您好：请根据你的实际情况（实际感受）作答。答案没有对错之分，对每一个句子无须多考虑。",
    "questions": [
      {
        "number": 1,
        "text": "不管我的工作或生活再忙碌，每一天我都会留一些时间给子女",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 2,
        "text": "我能经常保持愉快的心情和孩子相处",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 3,
        "text": "我认为孩子是有理性的，能自己面对和解决问题",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 4,
        "text": "和孩子对话时，我甚少使用「你应该…」、「你最好…否则…」、「你再不… 我就…」的语气和孩子交谈",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 5,
        "text": "我觉得孩子能欢喜的生活，比成绩好更重要",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 6,
        "text": "我觉得孩子犯错和惹麻烦是成长必经的过程",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 7,
        "text": "孩子说话时，我能耐心专注的听完",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 8,
        "text": "我能经常和孩子有亲密的接触（如摸头、拍肩、拍手、相互拥抱……）",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 9,
        "text": "即使孩子犯了错，我也不会因此就认为他（她）是个坏孩子",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 10,
        "text": "我经常给自己和孩子充裕的时间，避免催促孩子",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 11,
        "text": "不论孩子发生什么事，我都能以孩子的立场，分析孩子内心的感受",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 12,
        "text": "亲子间有冲突时，我不认为一定是孩子的错",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 13,
        "text": "我能给孩子充分的自主空间，决定自己的事",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 14,
        "text": "我要求孩子做的事情，我自己都能做到",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 15,
        "text": "我答应孩子的事情，我一定都会履行",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 16,
        "text": "我与孩子谈话时，我能了解孩子内心真正的感受",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 17,
        "text": "我了解孩子内心的喜好和厌恶",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 18,
        "text": "孩子愿意主动的告诉我，他在外面发生的事情和内心感受",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 19,
        "text": "和孩子谈完话，我甚少批评或指责孩子的想法",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      },
      {
        "number": 20,
        "text": "我满意我目前的家庭和孩子的状况",
        "options": [
          {"text": "很不符合", "score": 1},
          {"text": "不符合", "score": 2},
          {"text": "一般", "score": 3},
          {"text": "符合", "score": 4},
          {"text": "非常符合", "score": 5}
        ]
      }
    ],
    "results": [
      {
        "range": {"min": 20, "max": 59},
        "conclusion": "亲子关系已有了危机，须马上调整。 建议：您需要缓和与孩子之间的关系，可以尝试与孩子多聊聊学校里的生活，每天有哪些开心和不开心的事情，试着去倾听孩子的声音，像对待朋友般给出建议而不是严厉地去指责孩子。平常的时候可以尝试与孩子一同参与一些户外活动，增进彼此间的联系。"
      },
      {
        "range": {"min": 60, "max": 79},
        "conclusion": "你们的相处还算良好。 建议：您和孩子相处的较好，继续保持这样的状况，尝试进一步地去与孩子沟通内心的想法和观念，您和孩子的关系可以更进一步。"
      },
      {
        "range": {"min": 80, "max": 100},
        "conclusion": "恭喜你，你们的亲子关系很好 建议：您和孩子相处的非常好，请继续保持下去。"
      }
    ]
  }

================================================================================

--- File: PsychologyAnalysis\input\questionnaires\3焦虑症自评量表 (SAS).json ---
{
  "title": "焦虑症自评量表 (SAS)",
  "description": "如果你最近总是感到惶恐、不安，患得患失，无法安心做事情，似乎身后总有一头怪兽追着你跑，那么，测测你的焦虑程度水平，了解自己的焦虑程度，我们需要更加清晰地去觉察自己内在的情绪状态。本焦虑自评量表 Self-Rating Anxiety Scale（SAS）由华裔教授Zung于1971年编制，含有20个条目，用于评出焦虑的主观感受。下面请根据您最近一周的感受进行选择。",
  "questions": [
    {
      "number": 1,
      "text": "我感到比往常更加神经过敏的焦虑",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 2,
      "text": "我无缘无故感到担心",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 3,
      "text": "我容易心烦意乱或感到恐慌",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 4,
      "text": "我感到我的身体好像被分成几块，支离破碎",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 5,
      "text": "我感到事事都很顺利，不会有倒霉的事情发生",
      "options": [
        {"text": "很少有", "score": 4},
        {"text": "有时有", "score": 3},
        {"text": "大部分时间有", "score": 2},
        {"text": "绝大部分时间有", "score": 1}
      ]
    },
    {
      "number": 6,
      "text": "我的四肢拌动和震颤",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 7,
      "text": "我因头痛、颈痛和背痛而烦恼",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 8,
      "text": "我感到无力而且容易疲劳",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 9,
      "text": "我感到平静，能安静坐下来",
      "options": [
        {"text": "很少有", "score": 4},
        {"text": "有时有", "score": 3},
        {"text": "大部分时间有", "score": 2},
        {"text": "绝大部分时间有", "score": 1}
      ]
    },
    {
      "number": 10,
      "text": "我感到我的心跳较快",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 11,
      "text": "我因阵阵的眩晕而不舒服",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 12,
      "text": "我有阵阵要晕倒的感觉",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 13,
      "text": "我呼吸时进气和出气都不费力",
      "options": [
        {"text": "很少有", "score": 4},
        {"text": "有时有", "score": 3},
        {"text": "大部分时间有", "score": 2},
        {"text": "绝大部分时间有", "score": 1}
      ]
    },
    {
      "number": 14,
      "text": "我的手指和脚趾感到麻木和刺激",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 15,
      "text": "我因胃痛和消化不良而苦恼",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 16,
      "text": "我必须频繁排尿",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 17,
      "text": "我的手总是温暖而干燥",
      "options": [
        {"text": "很少有", "score": 4},
        {"text": "有时有", "score": 3},
        {"text": "大部分时间有", "score": 2},
        {"text": "绝大部分时间有", "score": 1}
      ]
    },
    {
      "number": 18,
      "text": "我觉得脸发烧发红",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    },
    {
      "number": 19,
      "text": "我容易入睡，晚上休息很好",
      "options": [
        {"text": "很少有", "score": 4},
        {"text": "有时有", "score": 3},
        {"text": "大部分时间有", "score": 2},
        {"text": "绝大部分时间有", "score": 1}
      ]
    },
    {
      "number": 20,
      "text": "我做恶梦",
      "options": [
        {"text": "很少有", "score": 1},
        {"text": "有时有", "score": 2},
        {"text": "大部分时间有", "score": 3},
        {"text": "绝大部分时间有", "score": 4}
      ]
    }
  ],
  "results": [
    {
      "range": {"min": 0, "max": 49},
      "conclusion": "您的焦虑水平在正常范围之内，正常范围内的焦虑水平，不意味着您此刻没有焦虑情绪，可能您正感到轻微的不适、不安，我们将此称为适度焦虑。适度焦虑是一种“合理情绪”，也就是我们平常会感受到的一些情绪，比如考试前的紧张，上台演讲之前的焦虑，重大抉择之前的恐慌，适度焦虑有助于我们认清自身状态，抱持警惕和刺激，化焦虑为动力，激发人的行动力。如果您为此感到困扰，让我们以“不评判”为目的去观察自己的情绪、想法，不与它较劲，观察它，品味它，体会它，从而去接纳它，也许你会发现，接纳焦虑情绪，比逃避焦虑，会让你感到更轻松，更舒适。如果你感到轻松，继续保持愉快心情吧！（以上测试结果仅供参考）"
    },
    {
      "range": {"min": 50, "max": 59},
      "conclusion": "您的焦虑水平为轻度，也许焦虑情绪已经让你感到困扰，甚至有时感到肌肉紧张，呼吸不畅，过度思索感到无法停止思考，让你的生活受到了一定的影响，缓解焦虑小建议： 1.接纳自己的情绪，当你对抗、或者回避焦虑的时候，也许你会发现自己感到更加的不自在。我们不需要“克服”焦虑，我们需要的是学会与焦虑共存。可尝试了解“森田疗法”，也许会让您有收获； 2.去跑步吧！坚持每天做有氧运动可以起到避免焦虑的作用，运动也可以给我们提供时间寻求有效的解决问题的方法，还可以缓解紧张情绪； 3.体验深度放松：冥想、瑜伽、正念等方式是经过验证过的有助于人们深度放松的方法，这种深度放松的方式可以让人养成遇事平和冷静的习惯； 4.如果做了诸多尝试与调整，依然存在困扰，建议寻找平台的专业心理咨询师寻求心理帮助。祝好。【温馨提示：在本量表中得分并不能作为焦虑症的诊断标准，仅供你了解自己使用。焦虑症的诊断和治疗，只有精神科医生才能进行哦】"
    },
    {
      "range": {"min": 60, "max": 69},
      "conclusion": "您的焦虑水平为中度，引起你焦虑的原因，可能不只是当下生活中的实际困扰，还包括对未来无名的担心，甚至是模糊的、不明原因的焦虑和担心，而且焦虑情绪似乎已经不只是影响到了你的心态、正常生活，你的身体也感受到了焦虑，身体过分紧张，肌肉过于紧绷，呼吸不够轻松，过分机警等等，在此情况下，可尝试运动、呼吸法、肌肉渐进放松法、正念、冥想、瑜伽等方式缓解情绪，如果感到靠自己的调整依然无法摆脱焦虑情绪，建议寻找本平台专业的心理咨询师寻求专业帮助，同时，建议到精神科或心理科做进一步检查，明确的焦虑症诊断需要到精神科进行，对于较严重的焦虑症，尽早进行药物治疗才是关键。多多关爱自己的心，祝好。【温馨提示：在本量表中得分并不能作为焦虑症的诊断标准，仅供你了解自己使用。焦虑症的诊断和治疗，只有精神科医生才能进行哦】"
    },
    {
      "range": {"min": 70, "max": 80},
      "conclusion": "您的焦虑水平较高，可尝试运动、呼吸法、肌肉渐进放松法、正念、冥想、瑜伽等方式缓解情绪，如果感到靠自己的调整依然无法摆脱焦虑情绪，建议寻找本平台专业的心理咨询师寻求专业帮助，同时，建议到精神科或心理科做进一步检查，明确的焦虑症诊断需要到精神科进行，对于较严重的焦虑症，尽早进行药物治疗才是关键。焦虑症的主要症状是，内心充满了过度的、长久的、模糊的、不明原因的焦虑和担心。其具体症状包括以下四类：身体紧张、自主神经系统反应性过强、对未来无名的担心、过分机警。这些症状有时单独存在，也可同时出现。多多关爱自己的心，祝好。【温馨提示：在本量表中得分并不能作为焦虑症的诊断标准，仅供你了解自己使用。焦虑症的诊断和治疗，只有精神科医生才能进行哦】"
    }
  ]
}

================================================================================

--- File: PsychologyAnalysis\input\questionnaires\4标准量表：抑郁症自测量表 (SDS).json ---
{
  "title": "标准量表：抑郁症自测量表 (SDS)",
  "description": "抑郁自评量表 Self-Rating Depression Scale（SDS）是由美国杜克大学医学院的William W.K.Zung于1965年编制的，是目前应用最广泛的抑郁自评量表之一。整个量表共20个条目，用于衡量抑郁状态的轻重程度及其在治疗中的变化，适用于具有抑郁症状的成年人。下面请根据您最近一周的感受进行选择。",
  "questions": [
    {
      "number": 1,
      "text": "我觉得闷闷不乐，情绪低沉",
      "options": [
        {"text": "没有或很少时间", "score": 1},
        {"text": "小部分时间", "score": 2},
        {"text": "相当多时间", "score": 3},
        {"text": "绝大部分或全部时间", "score": 4}
      ]
    },
    {
      "number": 2,
      "text": "我觉得一天之中早晨最好",
      "options": [
        {"text": "没有或很少时间", "score": 4},
        {"text": "小部分时间", "score": 3},
        {"text": "相当多时间", "score": 2},
        {"text": "绝大部分或全部时间", "score": 1}
      ]
    },
    {
      "number": 3,
      "text": "我一阵阵地哭出来或是想哭",
      "options": [
        {"text": "没有或很少时间", "score": 1},
        {"text": "小部分时间", "score": 2},
        {"text": "相当多时间", "score": 3},
        {"text": "绝大部分或全部时间", "score": 4}
      ]
    },
    {
      "number": 4,
      "text": "我夜间睡眠不好",
      "options": [
        {"text": "没有或很少时间", "score": 1},
        {"text": "小部分时间", "score": 2},
        {"text": "相当多时间", "score": 3},
        {"text": "绝大部分或全部时间", "score": 4}
      ]
    },
    {
      "number": 5,
      "text": "我吃的和平时一样多",
      "options": [
        {"text": "没有或很少时间", "score": 4},
        {"text": "小部分时间", "score": 3},
        {"text": "相当多时间", "score": 2},
        {"text": "绝大部分或全部时间", "score": 1}
      ]
    },
    {
      "number": 6,
      "text": "我与异性接触时和以往一样感到愉快",
      "options": [
        {"text": "没有或很少时间", "score": 4},
        {"text": "小部分时间", "score": 3},
        {"text": "相当多时间", "score": 2},
        {"text": "绝大部分或全部时间", "score": 1}
      ]
    },
    {
      "number": 7,
      "text": "我发觉我的体重在下降",
      "options": [
        {"text": "没有或很少时间", "score": 1},
        {"text": "小部分时间", "score": 2},
        {"text": "相当多时间", "score": 3},
        {"text": "绝大部分或全部时间", "score": 4}
      ]
    },
    {
      "number": 8,
      "text": "我有便秘的苦恼",
      "options": [
        {"text": "没有或很少时间", "score": 1},
        {"text": "小部分时间", "score": 2},
        {"text": "相当多时间", "score": 3},
        {"text": "绝大部分或全部时间", "score": 4}
      ]
    },
    {
      "number": 9,
      "text": "我心跳比平时快",
      "options": [
        {"text": "没有或很少时间", "score": 1},
        {"text": "小部分时间", "score": 2},
        {"text": "相当多时间", "score": 3},
        {"text": "绝大部分或全部时间", "score": 4}
      ]
    },
    {
      "number": 10,
      "text": "我无缘无故感到疲乏",
      "options": [
        {"text": "没有或很少时间", "score": 1},
        {"text": "小部分时间", "score": 2},
        {"text": "相当多时间", "score": 3},
        {"text": "绝大部分或全部时间", "score": 4}
      ]
    },
    {
      "number": 11,
      "text": "我的头脑和平时一样清楚",
      "options": [
        {"text": "没有或很少时间", "score": 4},
        {"text": "小部分时间", "score": 3},
        {"text": "相当多时间", "score": 2},
        {"text": "绝大部分或全部时间", "score": 1}
      ]
    },
    {
      "number": 12,
      "text": "我觉得经常做的事情并没有困难",
      "options": [
        {"text": "没有或很少时间", "score": 4},
        {"text": "小部分时间", "score": 3},
        {"text": "相当多时间", "score": 2},
        {"text": "绝大部分或全部时间", "score": 1}
      ]
    },
    {
      "number": 13,
      "text": "我觉得不安而平静不下来",
      "options": [
        {"text": "没有或很少时间", "score": 1},
        {"text": "小部分时间", "score": 2},
        {"text": "相当多时间", "score": 3},
        {"text": "绝大部分或全部时间", "score": 4}
      ]
    },
    {
      "number": 14,
      "text": "我对将来抱有希望",
      "options": [
        {"text": "没有或很少时间", "score": 4},
        {"text": "小部分时间", "score": 3},
        {"text": "相当多时间", "score": 2},
        {"text": "绝大部分或全部时间", "score": 1}
      ]
    },
    {
      "number": 15,
      "text": "我比平常容易激动",
      "options": [
        {"text": "没有或很少时间", "score": 1},
        {"text": "小部分时间", "score": 2},
        {"text": "相当多时间", "score": 3},
        {"text": "绝大部分或全部时间", "score": 4}
      ]
    },
    {
      "number": 16,
      "text": "我觉得做出决定是容易的",
      "options": [
        {"text": "没有或很少时间", "score": 4},
        {"text": "小部分时间", "score": 3},
        {"text": "相当多时间", "score": 2},
        {"text": "绝大部分或全部时间", "score": 1}
      ]
    },
    {
      "number": 17,
      "text": "我觉得自己是个有用的人，有人需要我",
      "options": [
        {"text": "没有或很少时间", "score": 4},
        {"text": "小部分时间", "score": 3},
        {"text": "相当多时间", "score": 2},
        {"text": "绝大部分或全部时间", "score": 1}
      ]
    },
    {
      "number": 18,
      "text": "我的生活过得很有意思",
      "options": [
        {"text": "没有或很少时间", "score": 4},
        {"text": "小部分时间", "score": 3},
        {"text": "相当多时间", "score": 2},
        {"text": "绝大部分或全部时间", "score": 1}
      ]
    },
    {
      "number": 19,
      "text": "我认为如果我死了别人会生活的更好些",
      "options": [
        {"text": "没有或很少时间", "score": 1},
        {"text": "小部分时间", "score": 2},
        {"text": "相当多时间", "score": 3},
        {"text": "绝大部分或全部时间", "score": 4}
      ]
    },
    {
      "number": 20,
      "text": "平常感兴趣的事我仍然照样感兴趣",
      "options": [
        {"text": "没有或很少时间", "score": 4},
        {"text": "小部分时间", "score": 3},
        {"text": "相当多时间", "score": 2},
        {"text": "绝大部分或全部时间", "score": 1}
      ]
    }
  ],
  "results": [
    {
      "range": {"min": 0, "max": 40},
      "conclusion": "经过检测您【无抑郁】，希望您继续保持良好的心情。（以上测试结果仅供参考）"
    },
    {
      "range": {"min": 40, "max": 47},
      "conclusion": "经过检测您为【轻微至轻度抑郁】，为了您和家人的幸福，建议您联系我们，进行更专业的检测。（以上测试结果仅供参考）"
    },
    {
      "range": {"min": 48, "max": 55},
      "conclusion": "经过检测您为【中至重度抑郁】，为了您和家人的幸福，建议您联系我们，进行更专业的检测。（以上测试结果仅供参考）"
    },
    {
      "range": {"min": 56, "max": 80},
      "conclusion": "经过检测您为【重度抑郁】，为了您和家人的幸福，建议您联系我们，进行更专业的检测。（以上测试结果仅供参考）"
    }
  ]
}

================================================================================

--- File: PsychologyAnalysis\input\questionnaires\5人际关系综合诊断量表.json ---
{
    "title": "人际关系综合诊断量表",
    "description": "这是一份人际关系行为困扰的诊断量表，共28个问题，每个问题做“是”（打 √）或“非”（打×）两种回答。请你根究自己的实际情况如实回答，答案没有对错之分：",
    "questions": [
      {
        "number": 1,
        "text": "关于自己的烦恼有口难言。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 2,
        "text": "和生人见面感觉不自然。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 3,
        "text": "过分地羡慕和妒忌别人。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 4,
        "text": "与异性交往太少。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 5,
        "text": "对连续不断地会谈感到困难。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 6,
        "text": "在社交场合，感到紧张。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 7,
        "text": "时常伤害别人。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 8,
        "text": "与异性来往感觉不自然。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 9,
        "text": "与一大群朋友在一起，常感到孤寂或失落。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 10,
        "text": "极易受窘。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 11,
        "text": "与别人不能和睦相处。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 12,
        "text": "不知道与异性相处如何适可而止。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 13,
        "text": "当不熟悉的人对自己倾诉他的生平遭遇以求同情时，自己常感到不知所措。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 14,
        "text": "担心别人对自己有什么坏印象。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 15,
        "text": "总是尽力使别人赏识自己。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 16,
        "text": "暗自思慕异性。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 17,
        "text": "时常避免表达自己的感受。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 18,
        "text": "对自己的仪表（容貌）缺乏信心。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 19,
        "text": "讨厌某人或被某人所讨厌。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 20,
        "text": "瞧不起异性。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 21,
        "text": "不能专注地倾听。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 22,
        "text": "自己的烦恼无人可倾诉。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 23,
        "text": "受别人排斥与冷漠。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 24,
        "text": "被异性瞧不起。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 25,
        "text": "不能广泛地听取各种各样意见、看法。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 26,
        "text": "自己常因受伤害而暗自伤心。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 27,
        "text": "常被别人谈论、愚弄。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      },
      {
        "number": 28,
        "text": "与异性交往不知如何更好相处。",
        "options": [
          {"text": "是", "score": 1},
          {"text": "非", "score": 0}
        ]
      }
    ],
    "results": [
      {
        "range": {"min": 0, "max": 8},
        "conclusion": "说明你在与朋友相处上的困扰较少。你善于交谈，性格比较开朗，主动，关心别人，你对周围的朋友都比较好，愿意和他们在一起，他们也都喜欢你，你们相处得不错。而且，你能够从与朋友相处中，得到乐趣。你的生活是比较充实而且丰富多彩的，你与异性朋友也相处得比较好。一句话，你不存在或较少存在交友方面的困扰，你善于与朋友相处，人缘很好，获得许多的好感与赞同。"
      },
      {
        "range": {"min": 9, "max": 14},
        "conclusion": "你与朋友相处存在一定程度的困扰。你的人缘很一般，换句话说，你和朋友的关系并不牢固，时好时坏，经常处在一种起伏波动之中。"
      },
      {
        "range": {"min": 15, "max": 28},
        "conclusion": "表明你在同朋友相处上的行为困扰较严重，分数超过20分，则表明你的人际关系困扰程度很严重，而且在心理上出现较为明显得障碍。你可能不善于交谈，也可能是一个性格孤僻的人，不开朗，或者有明显得自高自大、讨人嫌的行为。"
      }
    ]
  }

================================================================================

--- File: PsychologyAnalysis\input\questionnaires\6情绪稳定性测验量表.json ---
{
    "title": "情绪稳定性测验量表",
    "description": "请根据您的实际情况回答以下问题。",
    "questions": [
      {
        "number": 1,
        "text": "看到自己最近一次拍摄的照片，你有何想法？",
        "options": [
          {"text": "觉得不称心", "score": 2},
          {"text": "觉得很好", "score": 0},
          {"text": "觉得可以", "score": 1}
        ]
      },
      {
        "number": 2,
        "text": "你是否想到若干年后有什么使自己极为不安的事？",
        "options": [
          {"text": "经常想到", "score": 2},
          {"text": "从来没想到", "score": 0},
          {"text": "偶而想到", "score": 1}
        ]
      },
      {
        "number": 3,
        "text": "你是否被朋友、同事、同学起过绰号、挖苦过？",
        "options": [
          {"text": "这是常有的事", "score": 2},
          {"text": "从来没有", "score": 0},
          {"text": "偶尔有过", "score": 1}
        ]
      },
      {
        "number": 4,
        "text": "你上床以后，是否经常再起来一次，看看门窗是否关好。",
        "options": [
          {"text": "经常如此", "score": 2},
          {"text": "从不如此", "score": 0},
          {"text": "偶尔如此", "score": 1}
        ]
      },
      {
        "number": 5,
        "text": "你对与你关系最密切的人是否满意？",
        "options": [
          {"text": "不满意", "score": 2},
          {"text": "非常满意", "score": 0},
          {"text": "基本满意", "score": 1}
        ]
      },
      {
        "number": 6,
        "text": "你在半夜的时候，是否经常觉得有什么值得害怕的事？",
        "options": [
          {"text": "经常", "score": 2},
          {"text": "从来没有", "score": 0},
          {"text": "极少有这种情况", "score": 1}
        ]
      },
      {
        "number": 7,
        "text": "你是否经常梦见什么可怕的事而惊醒？",
        "options": [
          {"text": "经常", "score": 2},
          {"text": "没有", "score": 0},
          {"text": "极少", "score": 1}
        ]
      },
      {
        "number": 8,
        "text": "你是否曾经多次做同一个梦的情况？",
        "options": [
          {"text": "有", "score": 2},
          {"text": "没有", "score": 0},
          {"text": "记不清", "score": 1}
        ]
      },
      {
        "number": 9,
        "text": "有没有一种食物使你吃后呕吐？",
        "options": [
          {"text": "有", "score": 2},
          {"text": "没有", "score": 0},
          {"text": "记不清", "score": 1}
        ]
      },
      {
        "number": 10,
        "text": "除去看见的世界外，你心理有没有另一种世界？",
        "options": [
          {"text": "有", "score": 2},
          {"text": "没有", "score": 0},
          {"text": "记不清", "score": 1}
        ]
      },
      {
        "number": 11,
        "text": "你心里是否时常觉得你不是现在的父母所生？",
        "options": [
          {"text": "时常", "score": 2},
          {"text": "没有", "score": 0},
          {"text": "偶尔有", "score": 1}
        ]
      },
      {
        "number": 12,
        "text": "你是否曾经觉得有一个人爱你或尊敬你?",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "说不清", "score": 1}
        ]
      },
      {
        "number": 13,
        "text": "你是否常常觉得你的家庭对你不好，但是你又确知他们的确对你好？",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "偶尔", "score": 1}
        ]
      },
      {
        "number": 14,
        "text": "你是否觉得没有人十分了解你？",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "偶尔", "score": 1}
        ]
      },
      {
        "number": 15,
        "text": "你在早晨起来的时候最经常的感觉是什么？",
        "options": [
          {"text": "秋雨霏霏或枯叶遍地", "score": 2},
          {"text": "秋高气爽或艳阳天", "score": 0},
          {"text": "不清楚", "score": 1}
        ]
      },
      {
        "number": 16,
        "text": "你在高处的时候，是否觉得站不稳？",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "有时是这样", "score": 1}
        ]
      },
      {
        "number": 17,
        "text": "你平时是否觉得自己很强健？",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "不清楚", "score": 1}
        ]
      },
      {
        "number": 18,
        "text": "你是否一回家就立刻把门关上？",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "不清楚", "score": 1}
        ]
      },
      {
        "number": 19,
        "text": "你坐在小房间里把门关上后，是否觉得心理不安？",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "偶尔是", "score": 1}
        ]
      },
      {
        "number": 20,
        "text": "当一件事需要你做决定时，你是否觉得很难？",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "偶尔是", "score": 1}
        ]
      },
      {
        "number": 21,
        "text": "你是否常常用抛硬币、玩纸牌、抽签之类的游戏来测凶吉？",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "偶尔", "score": 1}
        ]
      },
      {
        "number": 22,
        "text": "你是否常常因为碰到东西而跌到？",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "偶尔", "score": 1}
        ]
      },
      {
        "number": 23,
        "text": "你是否需要一个多小时才能入睡，或醒的比你希望的早一个小时？",
        "options": [
          {"text": "经常这样", "score": 2},
          {"text": "从不这样", "score": 0},
          {"text": "偶尔这样", "score": 1}
        ]
      },
      {
        "number": 24,
        "text": "你是否经常看到、听到或感觉到别人觉察不到的东西？",
        "options": [
          {"text": "经常这样", "score": 2},
          {"text": "从不这样", "score": 0},
          {"text": "偶尔这样", "score": 1}
        ]
      },
      {
        "number": 25,
        "text": "你是否觉得自己有超越常人的能力？",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "不清楚", "score": 1}
        ]
      },
      {
        "number": 26,
        "text": "你是否曾经觉得因有人跟你走而心理不安？",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "不清楚", "score": 1}
        ]
      },
      {
        "number": 27,
        "text": "你是否觉得有人在注意你的言行？",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "不清楚", "score": 1}
        ]
      },
      {
        "number": 28,
        "text": "当你一个人走夜路时，是否觉得前面潜藏着危险？",
        "options": [
          {"text": "是", "score": 2},
          {"text": "否", "score": 0},
          {"text": "偶尔", "score": 1}
        ]
      },
      {
        "number": 29,
        "text": "你对别人自杀有什么想法？",
        "options": [
          {"text": "可以理解", "score": 2},
          {"text": "不可思议", "score": 0},
          {"text": "不清楚", "score": 1}
        ]
      }
    ],
    "results": [
      {
        "range": {"min": 0, "max": 20},
        "conclusion": "表明你情绪稳定，自信心强，具有较强的美感、道德感和理智感。你有一定的社会活动能力，能理解周围人们的心情，顾全大局。你一定是个性爽朗、受人欢迎得人。"
      },
      {
        "range": {"min": 21, "max": 40},
        "conclusion": "说明你情绪基本稳定，但较为深沉，对事情的考虑过于冷静，处世淡漠消极，不善于发挥自己的个性。你的自信心受到压抑，办事热情忽高忽低，瞻前顾后，踌躇不前。"
      },
      {
        "range": {"min": 41, "max": 58},
        "conclusion": "说明你的情绪极不稳定，日常烦恼太多，使自己的心情处于紧张和矛盾中。如果你得分在50分以上，则是一种危险信号，你务必请心理医生进一步诊断。"
      }
    ]
  }

================================================================================

--- File: PsychologyAnalysis\input\questionnaires\7汉密尔顿抑郁量表HAMD24.json ---
{
    "title": "汉密尔顿抑郁量表 (HAMD-24)",
    "description": "汉密顿抑郁量表由汉密尔顿于1960年编制，是临床上评定抑郁状态时应用得最为普遍的量表。本量表有17项、21项和24项等3种版本，这里介绍的是24项版本。这些项目包括抑郁所涉及的各种症状。适用于有抑郁症状的成年病人。下面请根据您一周以来的感受进行选择。",
    "questions": [
      {
        "number": 1,
        "text": "抑郁情绪",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "只在问到时才诉述", "score": 1},
          {"text": "在访谈中自发地表达", "score": 2},
          {"text": "不用言语也可以从表情-姿势-声音或欲哭中流露出这种情绪", "score": 3},
          {"text": "病人的自发言语和非语言表达几乎完全表现为这种情绪", "score": 4}
        ]
      },
      {
        "number": 2,
        "text": "有罪感",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "责备自己,感到自己已连累他人", "score": 1},
          {"text": "认为自己犯了罪,或反复思考以往的过失和错误", "score": 2},
          {"text": "认为目前的疾病,是对自己错误的惩罚,或有罪恶妄想", "score": 3},
          {"text": "罪恶妄想伴有指责或威胁性幻觉", "score": 4}
        ]
      },
      {
        "number": 3,
        "text": "自杀",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "觉得活着没有意义", "score": 1},
          {"text": "希望自己已经死去,或常想到与死有关的事", "score": 2},
          {"text": "消极观念自杀念头", "score": 3},
          {"text": "有严重自杀行为", "score": 4}
        ]
      },
      {
        "number": 4,
        "text": "入睡困难（初段失眠）",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "主诉有入睡困难,上床半小时后仍不能入睡", "score": 1},
          {"text": "主诉每晚均有入睡困难", "score": 2}
        ]
      },
      {
        "number": 5,
        "text": "睡眠不深（中段失眠）",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "睡眠浅,多恶梦", "score": 1},
          {"text": "半夜（晚12点钟以前）曾醒来（不包括上厕所）", "score": 2}
        ]
      },
      {
        "number": 6,
        "text": "早醒（末段失眠）",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "有早醒,比平时早醒1小时,但能重新入睡", "score": 1},
          {"text": "早醒后无法重新入睡", "score": 2}
        ]
      },
      {
        "number": 7,
        "text": "工作和兴趣",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "提问时才诉述", "score": 1},
          {"text": "自发地直接或间接表达对活动-工作或学习失去兴趣", "score": 2},
          {"text": "活动时间减少或成效下降,住院病人每天参加病房劳动或娱乐不满3小时", "score": 3},
          {"text": "因目前的疾病而停止工作,住院者不参加任何活动或者没有他人帮助便不能完成病室日常事务", "score": 4}
        ]
      },
      {
        "number": 8,
        "text": "阻滞（指思维和言语缓慢,注意力难以集中,主动性减退）",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "精神检查中发现轻度阻滞", "score": 1},
          {"text": "精神检查中发现明显阻滞", "score": 2},
          {"text": "精神检查进行困难", "score": 3},
          {"text": "完全不能回答问题木僵", "score": 4}
        ]
      },
      {
        "number": 9,
        "text": "激越",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "检查时有些心神不定", "score": 1},
          {"text": "明显心神不定或小动作多", "score": 2},
          {"text": "不能静坐,检查中曾起立", "score": 3},
          {"text": "搓手、咬手指、扯头发、咬嘴唇", "score": 4}
        ]
      },
      {
        "number": 10,
        "text": "精神性焦虑",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "问及时诉述", "score": 1},
          {"text": "自发地表达", "score": 2},
          {"text": "表情和言谈流露出明显忧虑", "score": 3},
          {"text": "明显惊恐", "score": 4}
        ]
      },
      {
        "number": 11,
        "text": "躯体性焦虑（指焦虑的生理症状）",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "轻度", "score": 1},
          {"text": "中度,有肯定的症状", "score": 2},
          {"text": "重度,症状严重,影响生活或需要处理", "score": 3},
          {"text": "严重影响生活和活动", "score": 4}
        ]
      },
      {
        "number": 12,
        "text": "胃肠道症状",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "食欲减退,但不需他人鼓励便自行进食", "score": 1},
          {"text": "进食需他人催促或请求和需要应用泻药或助消化药", "score": 2}
        ]
      },
      {
        "number": 13,
        "text": "全身症状",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "四肢,背部或颈部沉重感,背痛、头痛、肌肉疼痛、全身乏力或疲倦", "score": 1},
          {"text": "症状明显", "score": 2}
        ]
      },
      {
        "number": 14,
        "text": "性症状（指性欲减退,月经紊乱等）",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "轻度", "score": 1},
          {"text": "重度", "score": 2}
        ]
      },
      {
        "number": 15,
        "text": "疑病",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "对身体过分关注", "score": 1},
          {"text": "反复考虑健康问题", "score": 2},
          {"text": "有疑病妄想", "score": 3},
          {"text": "伴幻觉的疑病妄想", "score": 4}
        ]
      },
      {
        "number": 16,
        "text": "体重减轻:按病史评定",
        "options": [
          {"text": "体重没有减轻", "score": 0},
          {"text": "患者诉述可能有体重减轻", "score": 1},
          {"text": "肯定体重减轻", "score": 2},
          {"text": "一周内体重减轻超过0.5公斤", "score": 1},
          {"text": "一周内体重减轻超过1公斤", "score": 2}
        ]
      },
      {
        "number": 17,
        "text": "自知力",
        "options": [
          {"text": "知道自己有病,表现为抑郁", "score": 0},
          {"text": "知道自己有病,但归咎伙食太差,环境问题,工作过忙,病毒感染或需要休息", "score": 1},
          {"text": "完全否认有病", "score": 2}
        ]
      },
      {
        "number": 18,
        "text": "日夜变化（症状加重情况）",
        "options": [
          {"text": "早晚情绪无区别", "score": 0},
          {"text": "早晨或傍晚轻度加重", "score": 1},
          {"text": "早晨或傍晚严重加重", "score": 2}
        ]
      },
      {
        "number": 19,
        "text": "人格解体或现实解体（指非真实感或虚无妄想）",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "问及时才诉述", "score": 1},
          {"text": "自然诉述", "score": 2},
          {"text": "有虚无妄想", "score": 3},
          {"text": "伴幻觉的虚无妄想", "score": 4}
        ]
      },
      {
        "number": 20,
        "text": "偏执症状",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "有猜疑", "score": 1},
          {"text": "有牵连观念", "score": 2},
          {"text": "有关系妄想或被害妄想", "score": 3},
          {"text": "伴有幻觉的关系妄想或被害妄想", "score": 4}
        ]
      },
      {
        "number": 21,
        "text": "强迫症状（指强迫思维和强迫行为）",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "问及时才诉述", "score": 1},
          {"text": "自发诉述", "score": 2}
        ]
      },
      {
        "number": 22,
        "text": "能力减退感",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "仅于提问时方引出主观体验", "score": 1},
          {"text": "病人主动表示有能力减退感", "score": 2},
          {"text": "需鼓励-指导和安慰才能完成病室日常事务或个人卫生", "score": 3},
          {"text": "穿衣、梳洗、进食、铺床或个人卫生均需他人协助", "score": 4}
        ]
      },
      {
        "number": 23,
        "text": "绝望感",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "有时怀疑情况是否会好转,但解释后能接受", "score": 1},
          {"text": "持续感到没有希望,但解释后能接受", "score": 2},
          {"text": "对未来感到灰心-悲观和失望,解释后不能解除", "score": 3},
          {"text": "自动地反复诉述“我的病好不了啦” 或诸如此类的情况", "score": 4}
        ]
      },
      {
        "number": 24,
        "text": "自卑感",
        "options": [
          {"text": "没有", "score": 0},
          {"text": "仅在询问时诉述有自卑感不如他人", "score": 1},
          {"text": "自动地诉述有自卑感", "score": 2},
          {"text": "病人主动诉述自己一无是处或低人一等", "score": 3},
          {"text": "自卑感达妄想的程度,如“我是废物”等类似情况", "score": 4}
        ]
      }
    ],
    "results": [
      {
        "range": {"min": 0, "max": 7},
        "conclusion": "经过检测您【无抑郁症状】，希望您继续保持良好的心情。 （以上测试结果仅供参考）"
      },
      {
        "range": {"min": 8, "max": 20},
        "conclusion": "经过检测您【可能有抑郁】，为了您和家人的幸福，建议您联系我们，进行更专业的检测。（以上测试结果仅供参考）"
      },
      {
        "range": {"min": 21, "max": 35},
        "conclusion": "经过检测您【肯定有抑郁】，为了您和家人的幸福，建议您联系我们，进行更专业的检测。（以上测试结果仅供参考）"
      },
      {
        "range": {"min": 36, "max": 80},
        "conclusion": "经过检测您为【严重抑郁】，为了您和家人的幸福，建议您联系我们，进行更专业的检测。（以上测试结果仅供参考）"
      }
    ]
  }

================================================================================

--- File: PsychologyAnalysis\input\questionnaires\8艾森克人格问卷EPQ85成人版.json ---
{
    "title": "艾森克人格问卷 (EPQ-85成人版)",
    "description": "指导语：请对下列每一题目进行回答，在“是”或“否”字上打“√”，回答无所谓对错，这里没有对你不利的题目，请尽快回答，不要对每题的含义进行过多的思考。每题都要回答。",
    "questions": [
      {
        "number": 1,
        "text": "你是否有广泛的爱好",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 2,
        "text": "再做任何事情之前你是否都要先考虑一番",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 3,
        "text": "你的情绪时常波动么？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 4,
        "text": "当别人做了好事周围人却认为是你做的，你是否感到洋洋得意？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 5,
        "text": "你是一个健谈的人吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 6,
        "text": "你曾经无缘无故的感到自己可怜吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 7,
        "text": "你曾经有过因为贪心而获得分外的物质利益吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 8,
        "text": "晚上你是否会小心的把门锁好？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 9,
        "text": "你认为自己活泼吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 10,
        "text": "当你看到小孩或（动物）受折磨时是否会感到很难受？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 11,
        "text": "你是否时常担心你会说出（或做出）不应该说（或做）的事情？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 12,
        "text": "若你说过要做某件事，是否不管遇到什么困难都要把它做成？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 13,
        "text": "在愉快的聚会中，你是否尽情享受？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 14,
        "text": "你是一位易激怒的人吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 15,
        "text": "你是否有过自己做错了事反倒责备别人的时候？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 16,
        "text": "你喜欢会见陌生人么？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 17,
        "text": "你是否相信参加储蓄是一种好办法？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 18,
        "text": "你的感情是否容易受到伤害？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 19,
        "text": "你想服用有奇特效果或是有危险性的药物么？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 20,
        "text": "你是否时常感到“及其厌烦”？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 21,
        "text": "你曾多占、多得别人的东西(甚至是一针一线)吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 22,
        "text": "如果条件允许，你喜欢经常外出（旅行）么？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 23,
        "text": "对你所喜欢的人，你是否为取乐开过过头的玩笑么？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 24,
        "text": "你是否常因“自罪感”而烦恼？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 25,
        "text": "你是否谈论一些你自己毫无所知的事情？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 26,
        "text": "你是否宁愿看些书而不想去会见别人？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 27,
        "text": "有坏人想要害你么？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 28,
        "text": "你认为自己“神经过敏”吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 29,
        "text": "你的朋友多吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 30,
        "text": "你是个忧虑重重的人吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 31,
        "text": "你在儿童时代是否立即听从大人的吩咐而毫无怨言吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 32,
        "text": "你是一个无忧无虑，逍遥自在的人吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 33,
        "text": "有礼貌、爱整洁对你很重要吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 34,
        "text": "你是否担心将会发生可怕的事情？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 35,
        "text": "在结识新朋友时你通常是主动的吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 36,
        "text": "你觉得自己是一个非常敏感的人吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 37,
        "text": "和别人在一起的时候你是否不常说话？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 38,
        "text": "你是否觉得结婚是个框框，应该废除？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 39,
        "text": "你有时有点自吹自擂吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 40,
        "text": "在一个沉闷的场合，你能给大家添点生气吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 41,
        "text": "慢腾腾开车的司机是否使你讨厌？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 42,
        "text": "你担心自己的健康吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 43,
        "text": "你是否喜欢说笑话和谈论有趣的事情？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 44,
        "text": "你是否觉得大多数事情对你来说都是无所谓的？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 45,
        "text": "你小时候是否有过对待父母鲁莽、无礼的行为吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 46,
        "text": "你喜欢和别人打成一片、整天相处在一起吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 47,
        "text": "你失眠吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 48,
        "text": "你饭前必定先洗手吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 49,
        "text": "当别人问你话时你是否对答如流？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 50,
        "text": "你是否宁愿有富裕时间而早点动身去赴约会吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 51,
        "text": "你经常无缘无故感到疲倦或无精打采吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 52,
        "text": "在游戏或打牌时你经常作弊吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 53,
        "text": "你喜欢紧张的工作吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 54,
        "text": "你时常觉得自己的生活很单调吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 55,
        "text": "你曾经为了自己而利用过别人吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 56,
        "text": "你是否参加的活动太多而超过自己可能分配的时间？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 57,
        "text": "你是否有那么几个人时常躲着你?",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 58,
        "text": "你是否认为人们为保障自己的将来而精打细算勤俭时间太多了？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 59,
        "text": "你是否曾经想过去死吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 60,
        "text": "若你确知不会被发现时你会少付给人家钱吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 61,
        "text": "你能使一个联欢会开成功吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 62,
        "text": "你是否尽力使自己不粗鲁？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 63,
        "text": "一件使你为难的事情过去之后是否会使你烦恼好久？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 64,
        "text": "你是否坚持要按照你的想法办事？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 65,
        "text": "当你去乘火车时，你是否会最后一分钟到达？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 66,
        "text": "你是否神经质？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 67,
        "text": "你常感到寂寞吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 68,
        "text": "你的言行总是一致的吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 69,
        "text": "你有时喜欢玩弄动物吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 70,
        "text": "有人对你或你的工作吹毛求疵时，是否容易伤害你的积极性？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 71,
        "text": "你去赴约会或上班时，曾否迟到？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 72,
        "text": "你是否喜欢在你的周围有许多热闹和高兴的事情？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 73,
        "text": "你愿意让别人怕你吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 74,
        "text": "你是否有时兴致勃勃，有时却很慵懒不想动弹？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 75,
        "text": "你有时会把今天应做的事情拖到明天吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 76,
        "text": "别人是否认为你是生气勃勃的？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 77,
        "text": "别人是否对你说过许多谎话？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 78,
        "text": "你是否对有些事情易性急生气？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 79,
        "text": "若你有错误，是否愿意承认？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 80,
        "text": "你是一个整洁严谨，有条不紊的人吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 81,
        "text": "在公园里或马路上，你是否总把果皮或废纸扔到垃圾箱里？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 82,
        "text": "遇到为难的事情，你是否拿不定主意？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 83,
        "text": "你是否有过随口骂人的时候？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 84,
        "text": "若你乘车或坐飞机外出时，你是否担心会碰撞或出意外？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      },
      {
        "number": 85,
        "text": "你是一个爱交往的人吗？",
        "options": [
          {"text": "是", "value": "yes"},
          {"text": "否", "value": "no"}
        ]
      }
    ],
    "scoring_rules": {
      "E": {
        "yes": [1, 5, 9, 13, 16, 22, 29, 32, 35, 40, 43, 46, 49, 53, 56, 61, 72, 76, 85],
        "no": [26, 37]
      },
      "N": {
        "yes": [3, 6, 11, 14, 18, 20, 24, 28, 30, 34, 36, 42, 47, 51, 54, 59, 63, 66, 67, 70, 74, 78, 82, 84],
        "no": []
      },
      "P": {
        "yes": [19, 23, 27, 38, 41, 44, 57, 58, 65, 69, 73, 77],
        "no": [2, 8, 10, 17, 33, 50, 62, 80]
      },
      "L": {
        "yes": [12, 31, 48, 68, 79, 81],
        "no": [4, 7, 15, 21, 25, 39, 45, 52, 55, 60, 64, 71, 75, 83]
      }
    },
    "interpretation_rules": {
      "E": [
        {"range": {"min": 15, "max": 21}, "conclusion": "人格外向型：可能是好交际，渴望刺激和冒险，情感易于冲动。在多人环境中表现活跃。"},
        {"range": {"min": 0, "max": 8}, "conclusion": "人格内向型：如好静，富于内省，不喜欢刺激，喜欢有秩序的生活方式，情绪比较稳定。"}
      ],
      "N": [
        {"range": {"min": 14, "max": 24}, "conclusion": "高神经质：表示情绪不稳定型，焦虑、忧心忡忡、常郁郁不乐，有强烈情绪反应，甚至出现不够理智的行为。"},
        {"range": {"min": 0, "max": 9}, "conclusion": "情绪稳定型：冷静，平和，情绪调节能力强。"}
      ],
      "P": [
        {"range": {"min": 8, "max": 20}, "conclusion": "高精神质：表示可能是精神质，孤独、不关心他人，攻击性，反社会倾向，缺乏同理心与非传统思维，难以适应外部环境，不近人情，与别人不友好，喜欢寻衅搅扰，喜欢干奇特的事情，并且不顾危险。"},
        {"range": {"min": 0, "max": 7}, "conclusion": "低精神质：温和，富有同情心、遵守规范。"}
      ],
      "L": [
        {"range": {"min": 18, "max": 20}, "conclusion": "高掩饰性：表示被试有掩饰倾向，测验结果可能失真。"}
      ]
    },
    "combinations_interpretation": [
       {"type": "盗窃案-外向不稳定攻击焦虑", "description": "针对盗窃案，外向的，情绪不稳定型，攻击性，焦虑的人的讯问策略..."},
       {"type": "盗窃案-外向稳定温和", "description": "针对盗窃案，外向的，情绪稳定的，情绪调节能力强，温和，富有同情心的人的讯问策略..."},
       {"type": "盗窃案-内向不稳定反社会", "description": "针对盗窃案，内向的，情绪不稳定型，孤独的，反社会倾向，与别人不友好，喜欢寻衅的人的讯问策略..."},
       {"type": "盗窃案-内向稳定温和", "description": "针对盗窃案，内向的，情绪比较稳定，温和，富有同情心，喜欢有秩序的生活方式的人的讯问策略..."},
       {"type": "盗窃案-逃避不稳定攻击焦虑", "description": "针对盗窃案，逃避的，情绪不稳定型，攻击性，焦虑的人的讯问策略..."},
       {"type": "盗窃案-逃避稳定反社会", "description": "针对盗窃案，逃避的，情绪比较稳定，孤独的，反社会倾向，与别人不友好的人的讯问策略..."}
       
    ]
  }

================================================================================

--- File: PsychologyAnalysis\input\questionnaires\9开心测试.json ---
{
    "title": "开心测试",
    "questions": [
      {
        "number": 1,
        "text": "你今天开心吗？",
        "options": [
          {
            "text": "开心",
            "score": 1
          },
          {
            "text": "悲伤",
            "score": 0
          }
        ]
      }
    ]
  }

================================================================================

--- File: PsychologyAnalysis\src\ai_utils.py ---
# src/ai_utils.py
import os
import json
# 移除了 import sqlite3
from datetime import datetime
import sys
import logging

# --- 路径设置和模块导入 (保持不变) ---
SRC_DIR = os.path.dirname(os.path.abspath(__file__))
PROJECT_ROOT_FROM_SRC = os.path.dirname(SRC_DIR)
if PROJECT_ROOT_FROM_SRC not in sys.path:
    sys.path.insert(0, PROJECT_ROOT_FROM_SRC)

try:
    # 移除了 from .data_handler import DataHandler 的导入，因为此文件不再直接使用它
    # 修正：确认导入路径
    from src.image_processor import ImageProcessor
    from src.report_generator import ReportGenerator
    print("[ai_utils] 成功相对导入 ImageProcessor 和 ReportGenerator。")
except ImportError:
    try:
        # 移除了 from data_handler import DataHandler 的导入
        from image_processor import ImageProcessor
        from report_generator import ReportGenerator
        print("[ai_utils] 成功直接导入 ImageProcessor 和 ReportGenerator (后备)。")
    except ImportError as e:
        print(f"[ai_utils] CRITICAL ERROR: 无法导入必要的同级模块: {e}", file=sys.stderr)
        # 如果在 Celery 任务中，这可能导致任务失败
        raise e

# --- calculate_score_and_interpret 函数 (添加 HappyTest 逻辑) ---
def calculate_score_and_interpret(scale_type, scale_answers, task_logger=None):
    """
    根据量表答案计算分数，并根据量表类型提供基本解释。
    使用提供的 logger 实例进行日志记录。

    Args:
        scale_type (str): 表示量表类型的代码 (例如, 'SAS', 'SDS').
        scale_answers (dict): 问题答案字典 { 'q1': 'score_value', ... }.
        task_logger (logging.Logger, optional): 要使用的 Logger 实例. 默认为 None.

    Returns:
        tuple: (calculated_score, interpretation_string)
    """
    # 获取 logger，如果未提供则使用默认 logger
    current_logger = task_logger or logging.getLogger(__name__)
    if task_logger is None:
        current_logger.warning("未向 calculate_score_and_interpret 提供 task_logger，使用默认日志记录器。")
        # 确保有基本的日志处理器，以防万一
        if not logging.getLogger().hasHandlers():
            logging.basicConfig(level=logging.INFO)

    # 处理没有答案的情况
    if not scale_answers:
        current_logger.info(f"量表类型 '{scale_type}' 的答案为空。")
        return 0, "无量表答案"

    calculated_score = 0
    try:
        # 确保值存在且可以转换为数字
        valid_scores = []
        for key, value in scale_answers.items():
            if value is not None:
                try:
                    # 尝试转换为浮点数，然后转整数（如果可能）
                    score_float = float(value)
                    # 检查是否为整数
                    if score_float.is_integer():
                         valid_scores.append(int(score_float))
                    else:
                         valid_scores.append(score_float)
                except (ValueError, TypeError):
                    current_logger.warning(f"无法将答案 '{key}':'{value}' 转换为数字，已忽略。")

        # 如果没有任何有效分数
        if not valid_scores:
             current_logger.warning(f"在类型 {scale_type} 的量表答案中未找到有效的数字分数: {scale_answers}")
             return 0, f"量表 '{scale_type}' 无有效得分项"

        # 计算总分
        calculated_score = sum(valid_scores)
        current_logger.debug(f"计算得到的分数: {calculated_score} (来自: {valid_scores})")
    except Exception as e:
        current_logger.error(f"从答案 {scale_answers} 计算分数时出错: {e}", exc_info=True)
        # 返回错误标记和信息
        return "计算错误", f"分数计算出错: {e}"

    # --- 量表解释逻辑 ---
    interpretation = f"量表 '{scale_type}' 总得分: {calculated_score}."
    current_logger.info(f"开始为量表 '{scale_type}' (得分: {calculated_score}) 生成解释。")

    try:
        # --- 添加或更新解释逻辑 ---
        if scale_type == 'SAS': # Anxiety Self-Rating Scale
            standard_score = int(calculated_score * 1.25)
            interpretation = f"量表 '{scale_type}' 原始得分: {calculated_score}, 标准分: {standard_score}."
            if standard_score >= 70: interpretation += " (重度焦虑水平)"
            elif standard_score >= 60: interpretation += " (中度焦虑水平)"
            elif standard_score >= 50: interpretation += " (轻度焦虑水平)"
            else: interpretation += " (焦虑水平在正常范围)"
        elif scale_type == 'SDS': # Depression Self-Rating Scale
             standard_score = int(calculated_score * 1.25)
             interpretation = f"量表 '{scale_type}' 原始得分: {calculated_score}, 标准分: {standard_score}."
             if standard_score >= 73: interpretation += " (重度抑郁水平)" # 按量表文件界限
             elif standard_score >= 63: interpretation += " (中度抑郁水平)"
             elif standard_score >= 53: interpretation += " (轻度抑郁水平)"
             else: interpretation += " (抑郁水平在正常范围)"
        elif scale_type == 'ParentChild':
            if calculated_score >= 80: interpretation += " (亲子关系非常和谐)"
            elif calculated_score >= 60: interpretation += " (亲子关系良好)"
            else: interpretation += " (亲子关系可能存在挑战，建议关注)"
        elif scale_type == 'Personality':
            if calculated_score >= 101: interpretation += " (倾向：积极热情)"
            elif calculated_score >= 90: interpretation += " (倾向：领导人特质)"
            elif calculated_score >= 79: interpretation += " (倾向：感性)"
            elif calculated_score >= 60: interpretation += " (倾向：理性&淡定)"
            elif calculated_score >= 40: interpretation += " (倾向：双重&孤寂)"
            else: interpretation += " (倾向：现实&自我)"
            interpretation += " (具体解释需参考原始量表得分范围)"
        elif scale_type == 'InterpersonalRelationship':
            if calculated_score <= 8: interpretation += " (人际关系困扰较少)"
            elif calculated_score <= 14: interpretation += " (人际关系存在一定困扰)"
            else: interpretation += " (人际关系困扰较严重)"
        elif scale_type == 'EmotionalStability':
             if calculated_score <= 20: interpretation += " (情绪稳定，自信心强)"
             elif calculated_score <= 40: interpretation += " (情绪基本稳定，但可能较为深沉或消极)"
             else: interpretation += " (情绪不稳定，可能需要关注)"
        elif scale_type == 'HAMD24':
            if calculated_score >= 36: interpretation += " (重度抑郁)"
            elif calculated_score >= 21: interpretation += " (肯定有抑郁)"
            elif calculated_score >= 8: interpretation += " (可能有抑郁)"
            else: interpretation += " (无抑郁症状)"
        elif scale_type == 'EPQ85':
             interpretation = f"艾森克人格问卷 (EPQ-85)，总得分无直接意义，需分析 P, E, N, L 各维度得分。"
             # 实际分析需要在 generate_report_content 中单独处理 EPQ85
        # +++ 添加 HappyTest 的解释 +++
        elif scale_type == 'HappyTest':
             if calculated_score == 1:
                  interpretation += " (初步判断：用户表示今天很开心。)"
             elif calculated_score == 0:
                  interpretation += " (初步判断：用户表示今天感到悲伤。)"
             else:
                  interpretation += " (得分异常，无法解释。)" # 处理意外得分
        # --- HappyTest 解释结束 ---
        else:
            # 未知量表类型
            current_logger.warning(f"未找到量表类型 '{scale_type}' 的特定解释规则。")
            interpretation += " (无特定解释规则)"

    except Exception as e:
        current_logger.error(f"量表 {scale_type} 解释过程中出错: {e}", exc_info=True)
        interpretation += " (解释规则应用出错)"

    current_logger.info(f"量表 '{scale_type}' 解释完成: '{interpretation}'")
    return calculated_score, interpretation


# --- 重命名并重构核心函数 ---
def generate_report_content(submission_data: dict, config: dict, task_logger: logging.Logger) -> str:
    """
    根据传入的评估数据和配置，生成报告文本。不再直接操作数据库。

    Args:
        submission_data (dict): 从数据库异步加载的评估数据字典.
        config (dict): 应用程序配置字典 (来自 settings.model_dump()).
        task_logger (logging.Logger): 用于记录日志的 logger 实例.

    Returns:
        str: 生成的报告文本或错误信息字符串.
    """
    logger = task_logger
    submission_id = submission_data.get("id", "未知ID")
    logger.info(f"开始为评估 ID: {submission_id} 生成报告内容")

    # --- 提取数据 ---
    image_filename = submission_data.get('image_path') # 这是存储在 DB 中的相对路径或文件名
    image_full_path = None
    if image_filename:
        # 从配置中获取上传目录
        uploads_dir = config.get("UPLOADS_DIR")
        if uploads_dir and os.path.isdir(uploads_dir):
            image_full_path = os.path.join(uploads_dir, image_filename)
            logger.info(f"将使用的图片文件路径: {image_full_path}")
        elif not uploads_dir:
            logger.warning(f"配置中未找到 UPLOADS_DIR，无法定位图片文件: {image_filename}")
        else: # uploads_dir 存在但不是目录
             logger.warning(f"配置的 UPLOADS_DIR '{uploads_dir}' 不是有效目录，无法定位图片文件: {image_filename}")

    scale_type = submission_data.get('questionnaire_type')
    scale_answers_json = submission_data.get('questionnaire_data')
    # 确保 basic_info 包含所有可能的键，并提供默认值
    basic_info = {
        "subject_name": submission_data.get("subject_name", '未提供'),
        "gender": submission_data.get("gender", '未提供'),
        "id_card": submission_data.get("id_card", '未提供'),
        "age": submission_data.get("age", '未提供'),
        "occupation": submission_data.get("occupation", '未提供'),
        "case_name": submission_data.get("case_name", '未提供'),
        "case_type": submission_data.get("case_type", '未提供'),
        "identity_type": submission_data.get("identity_type", '未提供'),
        "person_type": submission_data.get("person_type", '未提供'),
        "marital_status": submission_data.get("marital_status", '未提供'),
        "children_info": submission_data.get("children_info", '未提供'),
        "criminal_record": submission_data.get("criminal_record", 0), # 默认 0 (无)
        "health_status": submission_data.get("health_status", '未提供'),
        "phone_number": submission_data.get("phone_number", '未提供'),
        "domicile": submission_data.get("domicile", '未提供')
    }
    # 确保 'name' 键存在，用于报告模板
    basic_info['name'] = basic_info.get('subject_name', '未知')

    logger.debug(f"用于报告生成的基础信息 (ID {submission_id}): {basic_info}")

    # --- 准备 AI 配置 ---
    ai_config = config.copy()
    # 确保 api_key 存在
    if 'api_key' not in ai_config:
        api_key_from_env = config.get('DASHSCOPE_API_KEY')
        if api_key_from_env:
            logger.info("复制 DASHSCOPE_API_KEY 到 'api_key' 以供 AI 处理器使用。")
            ai_config['api_key'] = api_key_from_env
        else:
             logger.error(f"CRITICAL: AI 处理器的 API Key 未在配置中找到! (ID: {submission_id})")
             # 返回错误信息，因为无法继续
             return "错误：AI 服务配置不完整 (缺少 API Key)"

    # --- 处理图片 ---
    image_description = "未提供图片"
    if image_full_path:
        if os.path.exists(image_full_path):
            logger.info(f"开始处理图片: {image_full_path}")
            try:
                # 使用配置初始化 ImageProcessor
                image_processor = ImageProcessor(ai_config)
                image_description = image_processor.process_image(image_full_path)
                logger.info(f"图片描述生成成功 (ID {submission_id})。描述片段: {image_description[:100]}...")
            except FileNotFoundError:
                 logger.error(f"图片文件在处理时未找到: {image_full_path}")
                 image_description = "图片文件未找到"
            except Exception as img_err:
                logger.error(f"图片处理失败 (ID {submission_id}): {img_err}", exc_info=True)
                image_description = f"图片处理错误: {img_err}"
        else:
            logger.warning(f"图片路径存在但文件在处理时未找到: {image_full_path}")
            image_description = "图片文件未找到"
    else:
        logger.info(f"评估 ID {submission_id} 未提供图片路径。")

    # --- 处理量表数据 ---
    scale_answers = None
    calculated_score = 0 # Default score
    scale_interpretation = "无量表数据" # Default interpretation

    if scale_type and scale_answers_json:
        logger.info(f"开始处理量表数据，类型: {scale_type} (ID {submission_id})")
        try:
            # 尝试解析 JSON 字符串
            scale_answers = json.loads(scale_answers_json) # 期望是字典 {'q1': 'score', ...}

            # 检查解析结果是否为字典
            if isinstance(scale_answers, dict):
                 # 特殊处理 EPQ85，因为它需要计算四个维度
                 if scale_type == 'EPQ85':
                      # TODO: 实现 EPQ85 的计分逻辑
                      # 这需要访问 EPQ85 的 JSON 文件来获取计分规则
                      # 假设有一个辅助函数 `calculate_epq85_scores(scale_answers)`
                      # 返回 {'P': score_p, 'E': score_e, 'N': score_n, 'L': score_l, 'interpretation': '...'}
                      # epq_results = calculate_epq85_scores(scale_answers, logger)
                      # calculated_score = epq_results # 或者只用某个主维度
                      # scale_interpretation = epq_results['interpretation']
                      logger.warning(f"EPQ85 量表计分逻辑尚未在此函数中完全实现 (ID: {submission_id})。")
                      calculated_score = "N/A" # 标记为不适用总分
                      scale_interpretation = "EPQ85 量表结果需单独分析各维度。"
                 else:
                     # 对于其他量表，使用通用计分函数
                     calculated_score, scale_interpretation = calculate_score_and_interpret(
                         scale_type, scale_answers, task_logger=logger
                     )
                 logger.info(f"量表处理完成: Score={calculated_score}, Interpretation='{scale_interpretation}' (ID {submission_id})")
            else:
                 # 如果 JSON 解析后不是字典
                 logger.error(f"解析后的量表答案不是字典类型 (ID {submission_id}): {type(scale_answers)}")
                 scale_interpretation = "量表答案格式错误 (非字典)"
                 scale_answers = None # 重置为 None，以免传递错误类型给报告生成器

        except json.JSONDecodeError as json_err:
            # JSON 字符串本身格式错误
            logger.error(f"量表答案 JSON 解析失败 (ID {submission_id}): {json_err}. JSON: {scale_answers_json[:200]}...")
            scale_interpretation = "量表答案格式错误 (JSON 解析失败)"
            scale_answers = None
        except Exception as scale_err:
            # 其他处理错误（如计分函数内部错误）
            logger.error(f"量表数据处理失败 (ID {submission_id}): {scale_err}", exc_info=True)
            scale_interpretation = f"量表处理错误: {scale_err}"
            scale_answers = None # 重置
    elif scale_type:
         # 有类型但无答案数据
         logger.warning(f"提供了量表类型 '{scale_type}' 但无答案数据 (ID {submission_id}).")
         scale_interpretation = f"量表 '{scale_type}' 未提供答案"
    else:
         # 没有提供量表类型
         logger.info(f"评估 ID {submission_id} 未提供量表类型.")

    # --- 调用 LLM 生成报告 ---
    logger.info(f"开始调用 LLM 生成报告 (ID {submission_id})")
    final_report_text = None
    try:
        # 使用配置初始化 ReportGenerator
        report_generator = ReportGenerator(ai_config)
        final_report_text = report_generator.generate_report(
             description=image_description,
             questionnaire=scale_answers, # 传递解析后的字典或 None
             subject_info=basic_info,
             questionnaire_type=scale_type if scale_type else "未指定", # 提供默认值
             score=calculated_score, # 可能是数字，也可能是 "N/A" (如 EPQ)
             scale_interpretation=scale_interpretation # 使用上面处理后的解释
         )
        # 检查 ReportGenerator 的返回值
        if final_report_text is None:
             # ReportGenerator 应该返回字符串，即使是错误信息
             logger.error(f"报告生成器意外返回了 None (ID: {submission_id})")
             raise ValueError("报告生成器意外返回了 None") # 抛出错误以便捕获
        logger.info(f"LLM 报告生成成功 (ID {submission_id}, 长度: {len(final_report_text)})")

    except Exception as report_err:
        logger.error(f"LLM 报告生成失败 (ID {submission_id}): {report_err}", exc_info=True)
        # 返回具体的错误信息，而不是仅仅标记失败
        final_report_text = f"报告生成错误: {type(report_err).__name__} - {str(report_err)}"

    # --- 返回最终文本 ---
    # 注意：此函数不再负责数据库更新
    return final_report_text

# 移除旧的 process_data_and_generate_report_sync 函数定义（如果它还存在）

================================================================================

--- File: PsychologyAnalysis\src\api_tester.py ---
# 文件路径: src/api_tester.py
import base64
import os
import sqlite3
import json
from openai import OpenAI
from src.utils import setup_logging
from src.image_processor import ImageProcessor
from src.report_generator import ReportGenerator

class APITester:
    def __init__(self, config):
        """初始化 API 测试模块"""
        self.logger = setup_logging()
        self.config = config
        
        # 统一客户端配置
        self.api_key = config["api_key"]
        self.base_url = "https://dashscope.aliyuncs.com/compatible-mode/v1"
        self.client = OpenAI(
            api_key=self.api_key,
            base_url=self.base_url,
        )
        
        # 模型名称
        self.vision_model = "qwen-vl-max-latest"
        self.text_model = config["text_model"]  # 从配置中读取，例如 "qwen-plus"
        
        # 初始化数据库路径
        self.db_path = "psychology_analysis.db"
        self.project_root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
        
        # 初始化测试用模块
        self.image_processor = ImageProcessor(config)
        self.report_generator = ReportGenerator(config)

    def setup_test_data(self):
        """为测试准备数据，插入测试用图片路径和量表数据"""
        self.logger.info("准备测试数据...")
        
        # 连接数据库
        with sqlite3.connect(self.db_path) as conn:
            cursor = conn.cursor()
            
            # 清空现有数据（仅用于测试）
            cursor.execute("DELETE FROM analysis_data")
            
            # 插入测试数据
            test_image_path = os.path.join(self.project_root, "input", "images", "TestPic.jpg")
            subject_info = {"name": "测试用户", "age": 20, "gender": "男"}
            questionnaire_data = {"q1": "yes", "q2": "no", "q3": "sometimes"}
            
            cursor.execute('''
                INSERT INTO analysis_data (image_path, subject_name, age, gender, questionnaire_data)
                VALUES (?, ?, ?, ?, ?)
            ''', (
                test_image_path,
                subject_info["name"],
                subject_info["age"],
                subject_info["gender"],
                json.dumps(questionnaire_data)
            ))
            
            # 插入只有量表数据的记录（无对应图片）
            cursor.execute('''
                INSERT INTO analysis_data (image_path, subject_name, age, gender, questionnaire_data)
                VALUES (?, ?, ?, ?, ?)
            ''', (
                "no_image.jpg",  # 虚拟图片路径
                "无图片用户",
                25,
                "女",
                json.dumps({"q1": "no", "q2": "yes", "q3": "often"})
            ))
            
            conn.commit()
        self.logger.info("测试数据准备完成")

    def cleanup_test_data(self):
        """清理测试数据"""
        self.logger.info("清理测试数据...")
        with sqlite3.connect(self.db_path) as conn:
            cursor = conn.cursor()
            cursor.execute("DELETE FROM analysis_data")
            conn.commit()
        self.logger.info("测试数据清理完成")

    def test_vision_api(self):
        """测试图像处理模型的 API 连通性"""
        self.logger.info("开始测试图像处理模型 API...")
        
        # 使用 input/images/TestPic.jpg 进行测试
        test_image_path = os.path.join(self.project_root, "input", "images", "TestPic.jpg")
        
        if not os.path.exists(test_image_path):
            self.logger.error(f"测试图片 {test_image_path} 不存在，请确保文件已放置在正确位置")
            return False
        
        # 将图片转为 base64 编码
        with open(test_image_path, "rb") as image_file:
            image_base64 = base64.b64encode(image_file.read()).decode("utf-8")

        # 构造消息内容
        messages = [
            {"role": "system", "content": [{"type": "text", "text": "You are a helpful assistant."}]},
            {
                "role": "user",
                "content": [
                    {"type": "image_url", "image_url": {"url": f"data:image/jpeg;base64,{image_base64}"}},
                    {"type": "text", "text": "请简要描述这张图片的内容，用于API测试。"}
                ]
            }
        ]

        try:
            completion = self.client.chat.completions.create(
                model=self.vision_model,
                messages=messages,
            )
            description = completion.choices[0].message.content
            self.logger.info("图像模型 API 测试成功！")
            self.logger.info(f"测试图片描述: {description}")
            return True
        except Exception as e:
            self.logger.error(f"图像模型 API 测试失败: {str(e)}")
            return False

    def test_text_api(self):
        """测试文本生成模型的 API 连通性"""
        self.logger.info("开始测试文本生成模型 API...")
        
        # 构造测试消息
        messages = [
            {"role": "system", "content": "You are a helpful assistant."},
            {"role": "user", "content": "这是一个API连通性测试，请回复‘测试成功’。"}
        ]

        try:
            completion = self.client.chat.completions.create(
                model=self.text_model,
                messages=messages,
            )
            text_output = completion.choices[0].message.content
            self.logger.info("文本生成模型 API 测试成功！")
            self.logger.info(f"测试输出: {text_output}")
            return True
        except Exception as e:
            self.logger.error(f"文本生成模型 API 测试失败: {str(e)}")
            return False

    def test_report_with_questionnaire_only(self):
        """测试只有量表数据时是否能生成报告"""
        self.logger.info("开始测试只有量表数据时的报告生成...")
        
        # 从数据库加载只有量表数据的记录
        with sqlite3.connect(self.db_path) as conn:
            cursor = conn.cursor()
            cursor.execute("SELECT subject_name, age, gender, questionnaire_data FROM analysis_data WHERE image_path = ?", ("no_image.jpg",))
            result = cursor.fetchone()
            if not result:
                self.logger.error("未找到只有量表数据的测试记录")
                return False
            
            subject_info = {"name": result[0], "age": result[1], "gender": result[2]}
            questionnaire_data = json.loads(result[3]) if result[3] else None
            
            if not questionnaire_data:
                self.logger.error("量表数据为空，无法生成报告")
                return False

        # 使用空描述生成报告
        description = "无图片输入，仅基于量表数据生成报告"
        try:
            report = self.report_generator.generate_report(description, questionnaire_data, subject_info)
            self.logger.info("仅使用量表数据生成报告成功！")
            self.logger.info(f"生成的报告片段: {report[:100]}...")  # 只打印前100个字符
            return True
        except Exception as e:
            self.logger.error(f"仅使用量表数据生成报告失败: {str(e)}")
            return False

    def test_full_pipeline(self):
        """测试完整流程：图像 + 量表数据"""
        self.logger.info("开始测试完整流程（图像 + 量表数据）...")
        
        # 使用 TestPic.jpg 进行测试
        test_image_path = os.path.join(self.project_root, "input", "images", "TestPic.jpg")
        
        if not os.path.exists(test_image_path):
            self.logger.error(f"测试图片 {test_image_path} 不存在，请确保文件已放置在正确位置")
            return False
        
        # 步骤1: 图像识别
        try:
            description = self.image_processor.process_image(test_image_path)
            self.logger.info("图像描述生成成功")
            self.logger.info(f"描述片段: {description[:100]}...")  # 只打印前100个字符
        except Exception as e:
            self.logger.error(f"图像描述生成失败: {str(e)}")
            return False
        
        # 步骤2: 从数据库加载量表数据
        with sqlite3.connect(self.db_path) as conn:
            cursor = conn.cursor()
            cursor.execute("SELECT subject_name, age, gender, questionnaire_data FROM analysis_data WHERE image_path = ?", (test_image_path,))
            result = cursor.fetchone()
            if not result:
                self.logger.error(f"图片 {test_image_path} 无对应量表数据")
                return False
            
            subject_info = {"name": result[0], "age": result[1], "gender": result[2]}
            questionnaire_data = json.loads(result[3]) if result[3] else None
            
            if not questionnaire_data:
                self.logger.error("量表数据为空，无法生成报告")
                return False

        # 步骤3: 生成报告
        try:
            report = self.report_generator.generate_report(description, questionnaire_data, subject_info)
            self.logger.info("完整流程生成报告成功！")
            self.logger.info(f"生成的报告片段: {report[:100]}...")  # 只打印前100个字符
            return True
        except Exception as e:
            self.logger.error(f"完整流程生成报告失败: {str(e)}")
            return False

    def run_all_tests(self):
        """运行所有 API 测试"""
        self.logger.info("开始运行所有 API 测试...")
        
        # 准备测试数据
        self.setup_test_data()
        
        # 执行所有测试
        vision_result = self.test_vision_api()
        text_result = self.test_text_api()
        questionnaire_only_result = self.test_report_with_questionnaire_only()
        full_pipeline_result = self.test_full_pipeline()
        
        # 清理测试数据
        self.cleanup_test_data()
        
        # 汇总测试结果
        if all([vision_result, text_result, questionnaire_only_result, full_pipeline_result]):
            self.logger.info("所有 API 测试通过！")
            return True
        else:
            self.logger.error("部分或全部 API 测试未通过，请检查日志")
            self.logger.error(f"测试结果 - 图像API: {vision_result}, 文本API: {text_result}, 仅量表: {questionnaire_only_result}, 完整流程: {full_pipeline_result}")
            return False

if __name__ == "__main__":
    import yaml
    project_root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
    config_path = os.path.join(project_root, "config", "config.yaml")
    with open(config_path, "r", encoding='utf-8') as f:
        config = yaml.safe_load(f)
    
    tester = APITester(config)
    tester.run_all_tests()

================================================================================

--- File: PsychologyAnalysis\src\data_entry.py ---
# 文件路径: src/data_entry.py
import os
import sys

# 获取项目根目录（PsychologyAnalysis/）
project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), ".."))
# 将项目根目录添加到模块搜索路径
sys.path.append(project_root)

from src.data_handler import DataHandler

def main():
    # 初始化 DataHandler
    handler = DataHandler(db_path=os.path.join(project_root, "psychology_analysis.db"))

    # 定义测试数据
    data_entries = [
        {
            "image_path": os.path.join(project_root, "input\images\image1.jpg"),
            "subject_info": {"name": "张三", "age": 13, "gender": "男"},
            "questionnaire_data": {"q1": "yes", "q2": "no", "q3": "sometimes"}
        },
        {
            "image_path": os.path.join(project_root, "input\images\TestPic.jpg"),
            "subject_info": {"name": "李四", "age": 15, "gender": "女"},
            "questionnaire_data": {"q1": "no", "q2": "yes", "q3": "often"}
        },
        {
            "image_path": "no_image.jpg",  # 没有对应图片，仅量表数据
            "subject_info": {"name": "王五", "age": 20, "gender": "男"},
            "questionnaire_data": {"q1": "yes", "q2": "yes", "q3": "rarely"}
        }
    ]

    # 录入数据
    for entry in data_entries:
        image_path = entry["image_path"]
        subject_info = entry["subject_info"]
        questionnaire_data = entry["questionnaire_data"]

        # 检查图片文件是否存在（如果 image_path 不是虚拟路径）
        if image_path != "no_image.jpg" and not os.path.exists(image_path):
            print(f"警告: 图片文件 {image_path} 不存在，跳过录入")
            continue

        try:
            handler.save_data(image_path, subject_info, questionnaire_data)
            print(f"成功录入数据: 图片路径 {image_path}, 被测者 {subject_info['name']}")
        except Exception as e:
            print(f"录入数据失败: 图片路径 {image_path}, 错误: {str(e)}")

if __name__ == "__main__":
    main()
    from src.data_handler import check_db_content
    check_db_content(os.path.join(project_root, "psychology_analysis.db"))
    
    

================================================================================

--- File: PsychologyAnalysis\src\data_handler.py ---
# 文件路径: src/data_handler.py
import sqlite3
import json
import os
from datetime import datetime

class DataHandler:
    def __init__(self, db_path="psychology_analysis.db"):
        self.db_path = db_path
        self._init_db()

    def _init_db(self):
        """Initializes the database schema more robustly."""
        print(f"Initializing database schema at: {self.db_path}")
        required_columns_analysis = {
            # 列名: 列类型 (不包含约束和复杂默认值，这些在CREATE TABLE中处理)
            "image_path": "TEXT",
            "subject_name": "TEXT",
            "age": "INTEGER",
            "gender": "TEXT",
            "questionnaire_type": "TEXT",
            "questionnaire_data": "TEXT", # JSON
            "report_text": "TEXT",
            "updated_at": "TIMESTAMP", # 类型即可，默认值由触发器处理
            "id_card": "TEXT", # 类型即可，UNIQUE在CREATE TABLE中处理
            "occupation": "TEXT",
            "case_name": "TEXT",
            "case_type": "TEXT",
            "identity_type": "TEXT",
            "person_type": "TEXT",
            "marital_status": "TEXT",
            "children_info": "TEXT",
            "criminal_record": "INTEGER",
            "health_status": "TEXT",
            "phone_number": "TEXT",
            "domicile": "TEXT"
        }
        # questionnaire_questions 列
        required_columns_questions = {
            "scale_name": "TEXT"
        }


        with sqlite3.connect(self.db_path) as conn:
            cursor = conn.cursor()

            # --- Handle analysis_data Table ---
            cursor.execute("SELECT name FROM sqlite_master WHERE type='table' AND name='analysis_data';")
            table_exists = cursor.fetchone()

            if not table_exists:
                print("Table 'analysis_data' does not exist. Creating new table with full schema...")
                # Create table with all columns and constraints if it doesn't exist
                create_table_sql = """
                CREATE TABLE analysis_data (
                    id INTEGER PRIMARY KEY AUTOINCREMENT,
                    image_path TEXT,
                    subject_name TEXT,
                    age INTEGER,
                    gender TEXT,
                    questionnaire_type TEXT,
                    questionnaire_data TEXT,
                    report_text TEXT,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, -- Initial value
                    id_card TEXT , 
                    occupation TEXT,
                    case_name TEXT,
                    case_type TEXT,
                    identity_type TEXT,
                    person_type TEXT,
                    marital_status TEXT,
                    children_info TEXT,
                    criminal_record INTEGER DEFAULT 0,
                    health_status TEXT,
                    phone_number TEXT,
                    domicile TEXT
                );
                """
                cursor.execute(create_table_sql)
                print("Table 'analysis_data' created successfully.")
            else:
                print("Table 'analysis_data' exists. Checking for missing columns...")
                # If table exists, check and add missing columns without problematic constraints/defaults
                cursor.execute("PRAGMA table_info(analysis_data)")
                existing_columns = {info[1] for info in cursor.fetchall()}

                for col_name, col_type in required_columns_analysis.items():
                    if col_name not in existing_columns:
                        try:
                            # Add column with only the type, no complex defaults or UNIQUE constraints here
                            cursor.execute(f"ALTER TABLE analysis_data ADD COLUMN {col_name} {col_type}")
                            print(f"Added column '{col_name}' to analysis_data table.")
                        except sqlite3.OperationalError as e:
                            print(f"Warning: Could not add column '{col_name}': {e}")

            # --- Handle questionnaire_questions Table ---
            cursor.execute("SELECT name FROM sqlite_master WHERE type='table' AND name='questionnaire_questions';")
            q_table_exists = cursor.fetchone()
            if not q_table_exists:
                 print("Table 'questionnaire_questions' does not exist. Creating new table...")
                 cursor.execute('''CREATE TABLE questionnaire_questions (
                    id INTEGER PRIMARY KEY AUTOINCREMENT,
                    questionnaire_type TEXT NOT NULL,
                    question_number INTEGER NOT NULL,
                    question_text TEXT NOT NULL,
                    options TEXT NOT NULL, -- JSON string
                    scale_name TEXT, -- User-friendly name
                    UNIQUE(questionnaire_type, question_number)
                )''')
                 print("Table 'questionnaire_questions' created successfully.")
            else:
                 print("Table 'questionnaire_questions' exists. Checking for missing columns...")
                 cursor.execute("PRAGMA table_info(questionnaire_questions)")
                 existing_q_columns = {info[1] for info in cursor.fetchall()}
                 for col_name, col_type in required_columns_questions.items():
                      if col_name not in existing_q_columns:
                           try:
                                cursor.execute(f"ALTER TABLE questionnaire_questions ADD COLUMN {col_name} {col_type}")
                                print(f"Added column '{col_name}' to questionnaire_questions table.")
                           except sqlite3.OperationalError as e:
                                print(f"Warning: Could not add column '{col_name}' to questionnaire_questions: {e}")


            # --- Ensure Triggers Exist ---
            # Trigger to update 'updated_at' timestamp (safe to run even if exists)
            try:
                 cursor.execute('''
                    CREATE TRIGGER IF NOT EXISTS update_analysis_data_updated_at
                    AFTER UPDATE ON analysis_data
                    FOR EACH ROW
                    WHEN OLD.updated_at = NEW.updated_at OR OLD.updated_at IS NULL -- Avoid infinite loops if trigger itself updates
                    BEGIN
                        UPDATE analysis_data SET updated_at = CURRENT_TIMESTAMP WHERE id = OLD.id;
                    END;
                ''')
                 print("Ensured 'updated_at' trigger exists.")
            except sqlite3.OperationalError as e:
                 print(f"Warning: Could not create/verify 'updated_at' trigger: {e}")


            conn.commit()
        print("Database schema initialization process completed.")
    def normalize_path(self, path):
        """Normalizes file path for consistency, returns None if path is None."""
        if path is None:
            return None
        return os.path.normpath(path).replace('\\', '/')

    def save_data(self, image_path, basic_info, scale_type, scale_answers_json):
        """Saves comprehensive data to the analysis_data table."""
        normalized_image_path = self.normalize_path(image_path) # Can be None

        with sqlite3.connect(self.db_path) as conn:
            cursor = conn.cursor()
            # Prepare column names and placeholders dynamically based on basic_info keys
            # Always include mandatory fields
            columns = ['image_path', 'questionnaire_type', 'questionnaire_data']
            placeholders = ['?', '?', '?']
            values = [normalized_image_path, scale_type, scale_answers_json]

            # Add fields from basic_info
            for key, value in basic_info.items():
                # Map form names to DB column names if necessary
                db_key = key # Assume direct mapping for now
                # Handle specific fields like subject_name, age, gender if they are part of basic_info
                if db_key == "name": db_key = "subject_name"

                # Ensure the key is a valid column name (check against required_columns keys)
                # This is a basic check; more robust validation might be needed
                valid_columns = { "subject_name", "age", "gender", "id_card", "occupation", "case_name", "case_type", "identity_type", "person_type", "marital_status", "children_info", "criminal_record", "health_status", "phone_number", "domicile"}
                if db_key in valid_columns:
                    columns.append(db_key)
                    placeholders.append('?')
                    # Special handling for criminal_record (assuming 1 for Yes, 0 for No from form)
                    if db_key == 'criminal_record':
                        values.append(1 if str(value).lower() in ['1', 'yes', 'true'] else 0)
                    else:
                        values.append(value)

            columns_str = ", ".join(columns)
            placeholders_str = ", ".join(placeholders)

            sql = f'''INSERT INTO analysis_data ({columns_str})
                      VALUES ({placeholders_str})'''

            try:
                cursor.execute(sql, values)
                submission_id = cursor.lastrowid
                conn.commit()
                print(f"Data saved successfully. Submission ID: {submission_id}")
                return submission_id
            except sqlite3.IntegrityError as e:
                 print(f"Error saving data: {e}. Possible duplicate entry (e.g., ID card)?")
                 # Depending on requirements, you might want to update instead of insert
                 # Or simply report the error
                 raise e # Re-raise the exception
            except Exception as e:
                 print(f"An unexpected error occurred during save: {e}")
                 raise e


    def load_data_by_id(self, submission_id):
        """Loads a submission's data by its ID, returning a dictionary."""
        with sqlite3.connect(self.db_path) as conn:
            conn.row_factory = sqlite3.Row # Return rows as dictionary-like objects
            cursor = conn.cursor()
            cursor.execute("SELECT * FROM analysis_data WHERE id = ?", (submission_id,))
            result = cursor.fetchone()
            if result:
                return dict(result) # Convert Row object to a standard dictionary
            return None

    def update_report_text(self, submission_id, report_text):
        """Updates the report_text for a given submission ID."""
        with sqlite3.connect(self.db_path) as conn:
            cursor = conn.cursor()
            cursor.execute("UPDATE analysis_data SET report_text = ? WHERE id = ?",
                           (report_text, submission_id))
            conn.commit()
            print(f"Report text updated for submission ID: {submission_id}")

    def load_questions_by_type(self, questionnaire_type_code):
        """Loads questions based on the questionnaire type code (e.g., 'SAS')."""
        with sqlite3.connect(self.db_path) as conn:
            cursor = conn.cursor()
            cursor.execute('''SELECT question_number, question_text, options
                            FROM questionnaire_questions
                            WHERE questionnaire_type = ?
                            ORDER BY question_number''', (questionnaire_type_code,))
            results = cursor.fetchall()
            questions = []
            if not results:
                 print(f"Warning: No questions found for type code '{questionnaire_type_code}'")
                 return None # Return None or empty list based on how you want to handle this
            for row in results:
                try:
                    options_list = json.loads(row[2])
                    # Ensure options have 'text' (or 'name') and 'score' keys
                    formatted_options = [
                        {"text": opt.get("text", opt.get("name", "N/A")), "score": opt.get("score", 0)}
                        for opt in options_list
                    ]
                    question = {
                        "number": row[0],
                        "text": row[1],
                        "options": formatted_options
                    }
                    questions.append(question)
                except json.JSONDecodeError:
                    print(f"Warning: Could not decode options for question {row[0]} of type {questionnaire_type_code}")
                except Exception as e:
                     print(f"Error processing question {row[0]} options: {e}")
            return questions


    def insert_question(self, questionnaire_type, question_number, question_text, options_json_str, scale_name=None):
        """Inserts a single question into the database."""
        # The options should already be a JSON string here if coming from import_questions
        with sqlite3.connect(self.db_path) as conn:
            cursor = conn.cursor()
            try:
                cursor.execute('''INSERT OR REPLACE INTO questionnaire_questions
                                (questionnaire_type, question_number, question_text, options, scale_name)
                                VALUES (?, ?, ?, ?, ?)''', (
                    questionnaire_type,
                    question_number,
                    question_text,
                    options_json_str, # Store as JSON string
                    scale_name if scale_name else questionnaire_type # Default scale_name to type if not provided
                ))
                conn.commit()
                # print(f"Inserted/Replaced question: {questionnaire_type} - Q{question_number}")
            except Exception as e:
                 print(f"Error inserting question {questionnaire_type}-Q{question_number}: {e}")

    def get_all_scale_types(self):
        """Retrieves distinct scale types (code and name) from the database."""
        with sqlite3.connect(self.db_path) as conn:
            cursor = conn.cursor()
            # Use COALESCE to provide the type code if name is NULL
            cursor.execute('''SELECT DISTINCT questionnaire_type, COALESCE(scale_name, questionnaire_type) as display_name
                            FROM questionnaire_questions
                            ORDER BY questionnaire_type''')
            results = cursor.fetchall()
            # Return as a list of dictionaries
            return [{"code": row[0], "name": row[1]} for row in results]


def check_db_content(db_path="psychology_analysis.db"):
    """Utility function to print the content of the analysis_data table."""
    print(f"\n--- Checking content of {db_path} ---")
    if not os.path.exists(db_path):
        print("Database file does not exist.")
        return

    try:
        with sqlite3.connect(db_path) as conn:
            conn.row_factory = sqlite3.Row
            cursor = conn.cursor()

            print("\n[analysis_data Table Content]")
            try:
                cursor.execute("SELECT * FROM analysis_data LIMIT 10") # Limit output for brevity
                rows = cursor.fetchall()
                if not rows:
                    print("Table is empty.")
                else:
                    # Print header
                    print(" | ".join(rows[0].keys()))
                    print("-" * (len(" | ".join(rows[0].keys())) + 10))
                    # Print rows
                    for row in rows:
                        print(" | ".join(map(str, row)))
            except sqlite3.OperationalError as e:
                print(f"Error querying analysis_data: {e}")


            print("\n[questionnaire_questions Table Content]")
            try:
                cursor.execute("SELECT DISTINCT questionnaire_type, scale_name FROM questionnaire_questions")
                scales = cursor.fetchall()
                if not scales:
                    print("Table is empty or contains no distinct scales.")
                else:
                    print("Available Scales (Type | Name):")
                    for scale in scales:
                        print(f"{scale['questionnaire_type']} | {scale['scale_name']}")

                # Optionally print a few questions per scale
                if scales:
                     print("\nSample Questions:")
                     for scale in scales[:2]: # Limit to first 2 scales for brevity
                         print(f"--- Scale: {scale['questionnaire_type']} ---")
                         cursor.execute("SELECT question_number, question_text FROM questionnaire_questions WHERE questionnaire_type = ? ORDER BY question_number LIMIT 3", (scale['questionnaire_type'],))
                         questions = cursor.fetchall()
                         for q in questions:
                             print(f"  Q{q['question_number']}: {q['question_text'][:50]}...") # Truncate long text

            except sqlite3.OperationalError as e:
                print(f"Error querying questionnaire_questions: {e}")

    except sqlite3.Error as e:
        print(f"An error occurred connecting to or reading the database: {e}")
    print("--- End of content check ---\n")


# Example usage (can be run directly to check DB)
if __name__ == "__main__":
     # Assume db is in the project root relative to this file's location (src/)
     project_root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
     db_file_path = os.path.join(project_root, "psychology_analysis.db")
     # Initialize schema first (important if DB or tables don't exist)
     print("Initializing DataHandler to ensure schema exists...")
     try:
         handler = DataHandler(db_path=db_file_path)
         print("DataHandler initialized.")
         # Now check content
         check_db_content(db_file_path)
         print("\nAvailable scale types:")
         print(handler.get_all_scale_types())
     except Exception as e:
          print(f"Error during DataHandler initialization or check: {e}")

================================================================================

--- File: PsychologyAnalysis\src\guidance_generator.py ---
# FILE: src/guidance_generator.py (修正版)
import logging
from typing import Optional, Dict, Any # <--- 添加 Any 导入
from openai import OpenAI
import os
import sys # 添加sys导入

# --- 导入 settings ---
# 确保路径正确，以便能够导入 settings
SRC_DIR_GUIDANCE = os.path.dirname(os.path.abspath(__file__))
PROJECT_ROOT_GUIDANCE = os.path.dirname(SRC_DIR_GUIDANCE) # PsychologyAnalysis/
if PROJECT_ROOT_GUIDANCE not in sys.path:
    sys.path.insert(0, PROJECT_ROOT_GUIDANCE)

try:
    from app.core.config import settings
except ImportError as e:
    # 如果无法导入 settings，则使用一个默认的空对象来避免崩溃
    class MockSettings:
        DASHSCOPE_API_KEY = None
        APP_NAME = "FallbackApp"
    settings = MockSettings()
    print(f"警告: 无法在 guidance_generator.py 中导入 app.core.config.settings: {e}", file=sys.stderr)

# --- 获取 logger 和配置 ---
logger = logging.getLogger(settings.APP_NAME) # 使用统一的 APP_NAME
if not logger.hasHandlers():
    logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(name)s - %(levelname)s - %(message)s')

# --- AI 客户端初始化 ---
DASHSCOPE_API_KEY_GUIDANCE = settings.DASHSCOPE_API_KEY # 从 settings 获取
if not DASHSCOPE_API_KEY_GUIDANCE:
    logger.error("CRITICAL: Dashscope API Key 未配置，指导方案生成功能将失败！")

ai_client = None
if DASHSCOPE_API_KEY_GUIDANCE:
    try:
        safe_headers = {
            "User-Agent": "MyPsychologyApp-GuidanceGenerator/1.0",
            "Accept": "application/json",
        }
        ai_client = OpenAI(
            api_key=DASHSCOPE_API_KEY_GUIDANCE,
            base_url="https://dashscope.aliyuncs.com/compatible-mode/v1",
            default_headers=safe_headers
        )
        logger.info("Guidance Generator AI client initialized.")
    except Exception as e:
        logger.error(f"Failed to initialize OpenAI client for Guidance Generator: {e}", exc_info=True)
        ai_client = None

# --- 指导方案 Prompt 设计 (保持不变) ---
PROMPT_TEMPLATES: Dict[str, str] = {
    "petitioner": """
    **任务:** 你是一位经验丰富的警务心理疏导专家。请基于以下心理评估报告，为该上访户制定一份简洁、实用、具有针对性的情绪疏导与沟通建议方案。方案应侧重于理解其核心诉求背后的心理动机，识别潜在的情绪风险点，并提供具体的沟通技巧和安抚策略，旨在缓和其激动情绪，建立信任，引导其理性表达诉求。请直接输出疏导方案内容。

    **心理评估报告摘要:**
    ```
    {report_text}
    ```

    **情绪疏导与沟通建议方案:**
    """,

    "juvenile": """
    **任务:** 你是一位青少年心理辅导专家，专长于未成年人行为矫正与心理成长。请根据下方提供的心理评估报告，为这名未成年人设计一份初步的心理辅导概要方案。方案应关注报告中揭示的风险因素和保护性因素，提出符合其年龄特点的干预目标和策略，例如提升自我认知、情绪管理能力、社交技能、家庭关系改善等。请着重考虑预防其再次触犯法律的可能性。请直接输出辅导方案概要。

    **心理评估报告摘要:**
    ```    {report_text}
    ```

    **未成年人心理辅导方案概要:**
    """,

    "police": """
    **任务:** 你是一位专门为警务人员提供心理支持的专家。请分析以下民（辅）警的心理评估报告，并据此提供一份保密、实用、富有同理心的心理调适与关怀建议。建议应聚焦于报告中反映出的压力来源、潜在的职业倦怠风险或心理困扰，提出具体的自我调适方法（如压力应对技巧、情绪调节练习）、寻求支持的途径（如内部心理服务、外部资源）以及组织层面可以提供的关怀措施建议。请直接输出调适与关怀建议。

    **心理评估报告摘要:**
    ```
    {report_text}
    ```

    **民（辅）警心理调适与关怀建议:**
    """
}

def generate_guidance(report_text: str, scenario: str, model_name: str = "qwen-plus") -> Optional[str]:
    """
    根据评估报告和场景生成指导方案。

    Args:
        report_text (str): 评估报告的核心内容。
        scenario (str): 场景类型 ('petitioner', 'juvenile', 'police')。
        model_name (str): 使用的 Dashscope 模型。

    Returns:
        Optional[str]: 生成的指导方案文本，或在错误时返回包含错误信息的字符串。
    """
    global logger, ai_client # 引用全局（模块级）变量

    logger.info(f"Guidance Gen: 开始为场景 '{scenario}' 生成指导方案")
    if ai_client is None:
        logger.error("Guidance Gen: AI 客户端未初始化，无法生成指导方案。")
        return f"错误：AI 服务未配置，无法生成场景 '{scenario}' 的指导方案。"

    if scenario not in PROMPT_TEMPLATES:
        logger.error(f"Guidance Gen: 未知的指导方案场景类型: '{scenario}'")
        return f"错误：未知的指导方案场景类型 '{scenario}'。"

    # 格式化 Prompt
    try:
        prompt = PROMPT_TEMPLATES[scenario].format(report_text=report_text)
    except KeyError as e:
        logger.error(f"Guidance Gen: Prompt 模板格式化错误，缺少键 '{e}'。模板: {PROMPT_TEMPLATES[scenario][:100]}...")
        return f"错误：内部模板格式错误，无法生成场景 '{scenario}' 的指导方案。"
    except Exception as fmt_e:
        logger.error(f"Guidance Gen: Prompt 格式化时发生意外错误: {fmt_e}", exc_info=True)
        return f"错误：准备请求时出错，无法生成场景 '{scenario}' 的指导方案。"


    messages = [
        # 可以添加一个通用的 System Prompt
        {"role": "system", "content": "你是一位专业的心理与策略顾问，请根据提供的报告和任务要求，生成具体、可行的建议方案。"},
        {"role": "user", "content": prompt}
    ]

    try:
        logger.debug(f"Guidance Gen: 调用模型 '{model_name}'，场景: {scenario}")
        completion = ai_client.chat.completions.create(
            model=model_name,
            messages=messages,
            max_tokens=1000, # 允许生成较长的方案
            temperature=0.7 # 允许一定的创造性
        )
        # 检查是否有有效的响应内容
        if completion.choices and completion.choices[0].message and completion.choices[0].message.content:
            guidance_text = completion.choices[0].message.content.strip()
            if not guidance_text:
                logger.warning(f"Guidance Gen: 模型返回空内容，场景: {scenario}")
                return "AI 未能生成有效的指导方案。" # 返回提示信息
            logger.info(f"Guidance Gen: 成功为场景 '{scenario}' 生成指导方案。")
            return guidance_text
        else:
            logger.error(f"Guidance Gen: 模型响应无效或内容为空，场景: {scenario}。响应对象: {completion}")
            return "错误：AI 模型返回了无效的响应。"

    except Exception as e:
        logger.error(f"Guidance Gen: 调用 AI 模型时出错 (场景: {scenario}): {e}", exc_info=True)
        return f"错误：生成指导方案时发生错误 ({type(e).__name__})"

================================================================================

--- File: PsychologyAnalysis\src\image_processor.py ---
# src/image_processor.py
import os
import base64
from openai import OpenAI
import logging
import sys # 添加sys导入

# --- 导入 settings ---
# 确保路径正确，以便能够导入 settings
SRC_DIR_IMAGE_PROC = os.path.dirname(os.path.abspath(__file__))
PROJECT_ROOT_IMAGE_PROC = os.path.dirname(SRC_DIR_IMAGE_PROC) # PsychologyAnalysis/
if PROJECT_ROOT_IMAGE_PROC not in sys.path:
    sys.path.insert(0, PROJECT_ROOT_IMAGE_PROC)

try:
    from app.core.config import settings
except ImportError as e:
    # 如果无法导入 settings，则使用一个默认的空对象来避免崩溃
    class MockSettings:
        DASHSCOPE_API_KEY = None
        VISION_MODEL = "qwen-vl-plus"
        APP_NAME = "FallbackApp"
    settings = MockSettings()
    print(f"警告: 无法在 image_processor.py 中导入 app.core.config.settings: {e}", file=sys.stderr)

# Get the logger instance setup in app.py or utils.py
logger = logging.getLogger(settings.APP_NAME) # 使用统一的 APP_NAME
if not logger.hasHandlers():
    logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(name)s - %(levelname)s - %(message)s')


class ImageProcessor:
    def __init__(self, config):
        """Initializes ImageProcessor with configuration and explicit safe headers."""
        # 从 settings 获取 API Key 和模型名称，不再直接从 config.get() 优先
        self.api_key = settings.DASHSCOPE_API_KEY
        if not self.api_key:
            logger.error("CRITICAL: API Key not found in settings for ImageProcessor.")
            raise ValueError("API Key missing for ImageProcessor.")

        self.model = settings.VISION_MODEL # 从 settings 获取视觉模型
        self.base_url = config.get("base_url", "https://dashscope.aliyuncs.com/compatible-mode/v1") # base_url 仍然可以从传入的 config 获取

        # --- Explicitly set safe default headers ---
        safe_headers = {
            "User-Agent": "MyPsychologyApp-ImageProcessor/1.0",
            "Accept": "application/json",
        }

        try:
            self.client = OpenAI(
                api_key=self.api_key,
                base_url=self.base_url,
                default_headers=safe_headers
            )
            logger.info(f"ImageProcessor OpenAI client initialized. Base URL: {self.base_url}. Using explicit safe headers.")
        except Exception as e:
            logger.error(f"Failed to initialize OpenAI client in ImageProcessor: {e}", exc_info=True)
            raise

    def process_image(self, image_path):
        """Processes an image using the configured vision model."""
        logger.info(f"Processing image: {image_path}")
        try:
            with open(image_path, "rb") as image_file:
                image_base64 = base64.b64encode(image_file.read()).decode("utf-8")
        except FileNotFoundError:
            logger.error(f"Image file not found: {image_path}")
            raise FileNotFoundError(f"图片文件未找到: {image_path}")
        except Exception as e:
            logger.error(f"Error reading or encoding image {image_path}: {e}", exc_info=True)
            raise Exception(f"读取或编码图片时出错: {e}") from e

        messages = [
            {
                "role": "system",
                "content": [{"type": "text", "text": "You are a helpful assistant focused on image description."}]
            },
            {
                "role": "user",
                "content": [
                    {
                        "type": "image_url",
                        "image_url": {"url": f"data:image/jpeg;base64,{image_base64}"}
                    },
                    {"type": "text", "text": "请详细描述这张图片的内容，包括物体、人物（如有）、场景氛围、颜色和构图等。"}
                ]
            }
        ]

        try:
            logger.debug(f"Calling vision model '{self.model}' for image {os.path.basename(image_path)}")
            completion = self.client.chat.completions.create(
                model=self.model,
                messages=messages,
            )
            description = completion.choices[0].message.content
            logger.info(f"Image description received successfully for {os.path.basename(image_path)}.")
            return description
        except Exception as e:
            logger.error(f"Error calling vision API for {os.path.basename(image_path)}: {type(e).__name__} - {e}", exc_info=True)
            raise Exception(f"图像识别失败: {str(e)}") from e

================================================================================

--- File: PsychologyAnalysis\src\import_questions.py ---
# 文件路径: src/import_questions.py
import os
import json
import sqlite3
# Correct import assuming data_handler.py is in the same directory (src)
try:
    from data_handler import DataHandler
except ImportError:
    print("Error: data_handler.py not found in the same directory.")
    # Fallback for running directly from PsychologyAnalysis root
    try:
        # 修正：从 src 包导入
        from src.data_handler import DataHandler
    except ImportError:
         print("Error: Could not import DataHandler. Make sure you run this script correctly.")
         exit(1)


def import_questions_from_json():
    """Loads scale questions from JSON files in input/questionnaires/ into the SQLite DB."""
    # 获取项目根目录（假设此脚本在 src 下，根目录是上一级）
    project_root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
    db_path = os.path.join(project_root, "psychology_analysis.db") # 数据库文件在根目录
    handler = DataHandler(db_path=db_path)
    questionnaire_dir = os.path.join(project_root, "input", "questionnaires") # 问卷目录

    print(f"Scanning for JSON questionnaires in: {questionnaire_dir}")

    # 确保目录存在
    if not os.path.isdir(questionnaire_dir):
        print(f"Error: Questionnaire directory not found: {questionnaire_dir}")
        return

    json_files = [f for f in os.listdir(questionnaire_dir) if f.endswith('.json')]
    if not json_files:
        print(f"No .json files found in {questionnaire_dir}")
        return

    imported_count = 0
    error_count = 0

    # --- 更新映射 ---
    # Define mapping from filename (or title) to scale type code and name
    # Prioritize title if available, otherwise use filename mapping
    scale_mapping = {
        "1测你性格最真实的一面.json": {"code": "Personality", "name": "测你性格最真实的一面"},
        "2亲子关系问卷量表.json": {"code": "ParentChild", "name": "亲子关系问卷量表"},
        "3焦虑症自评量表 (SAS).json": {"code": "SAS", "name": "焦虑症自评量表 (SAS)"},
        "4标准量表：抑郁症自测量表 (SDS).json": {"code": "SDS", "name": "抑郁症自测量表 (SDS)"},
        "5人际关系综合诊断量表.json": {"code": "InterpersonalRelationship", "name": "人际关系综合诊断量表"},
        "6情绪稳定性测验量表.json": {"code": "EmotionalStability", "name": "情绪稳定性测验量表"},
        "7汉密尔顿抑郁量表HAMD24.json": {"code": "HAMD24", "name": "汉密尔顿抑郁量表 (HAMD-24)"},
        "8艾森克人格问卷EPQ85成人版.json": {"code": "EPQ85", "name": "艾森克人格问卷 (EPQ-85成人版)"},
        # +++ 添加新量表的映射 +++
        "9开心测试.json": {"code": "HappyTest", "name": "开心测试"},
        # Add more mappings as needed
    }
    # 也可以基于 title 映射，如果 JSON 文件中有 title 字段
    title_mapping = {
        "测你性格最真实的一面": {"code": "Personality", "name": "测你性格最真实的一面"},
        "亲子关系问卷量表": {"code": "ParentChild", "name": "亲子关系问卷量表"},
        "焦虑症自评量表 (SAS)": {"code": "SAS", "name": "焦虑症自评量表 (SAS)"},
        "标准量表：抑郁症自测量表 (SDS)": {"code": "SDS", "name": "抑郁症自测量表 (SDS)"},
        "人际关系综合诊断量表": {"code": "InterpersonalRelationship", "name": "人际关系综合诊断量表"},
        "情绪稳定性测验量表": {"code": "EmotionalStability", "name": "情绪稳定性测验量表"},
        "汉密尔顿抑郁量表HAMD24": {"code": "HAMD24", "name": "汉密尔顿抑郁量表 (HAMD-24)"}, # 移除 .json
        "艾森克人格问卷EPQ85成人版": {"code": "EPQ85", "name": "艾森克人格问卷 (EPQ-85成人版)"}, # 移除 .json
        # +++ 添加新量表的 title 映射 +++
        "开心测试": {"code": "HappyTest", "name": "开心测试"},
    }
    # --- 映射结束 ---


    for json_file in json_files:
        file_path = os.path.join(questionnaire_dir, json_file)
        print(f"\nProcessing file: {json_file}")
        try:
            with open(file_path, 'r', encoding='utf-8') as f:
                data = json.load(f)

            # Determine scale type code and name
            title = data.get("title")
            scale_info = None
            # 优先使用 title 映射
            if title and title in title_mapping:
                scale_info = title_mapping[title]
            # 其次使用文件名映射
            elif json_file in scale_mapping:
                 scale_info = scale_mapping[json_file]
            # 最后使用后备方案
            else:
                # Fallback: use filename without extension as code and title as name
                scale_code = os.path.splitext(json_file)[0]
                scale_name = title if title else scale_code # Use title if present, else filename part
                scale_info = {"code": scale_code, "name": scale_name}
                print(f"  Warning: No specific mapping found for file '{json_file}' or title '{title}'. Using fallback code='{scale_code}', name='{scale_name}'.")

            questionnaire_type = scale_info["code"]
            scale_display_name = scale_info["name"]

            print(f"  Identified as: Code='{questionnaire_type}', Name='{scale_display_name}'")

            # Clear old questions for this type before inserting new ones (optional but recommended)
            with sqlite3.connect(handler.db_path) as conn:
                cursor = conn.cursor()
                cursor.execute("DELETE FROM questionnaire_questions WHERE questionnaire_type = ?", (questionnaire_type,))
                conn.commit()
            print(f"  Cleared existing questions for type '{questionnaire_type}'.")


            # Insert questions
            questions_in_file = data.get("questions", [])
            if not questions_in_file:
                 print(f"  Warning: No 'questions' array found in {json_file}")
                 error_count += 1
                 continue

            for question in questions_in_file:
                try:
                    q_num = question["number"]
                    q_text = question["text"]
                    # Prepare options as JSON string, ensuring 'text' and 'score' keys exist
                    # Provide defaults if keys are missing in the source JSON
                    options_list = []
                    raw_options = question.get("options", [])
                    if isinstance(raw_options, list): # Check if options is actually a list
                        options_list = [
                            {"text": opt.get("text", "N/A"), "score": opt.get("score", 0)}
                            for opt in raw_options
                            if isinstance(opt, dict) # Ensure each option is a dictionary
                        ]
                    else:
                        print(f"    Warning: 'options' for question {q_num} is not a list, skipping options.")

                    options_json = json.dumps(options_list, ensure_ascii=False)

                    # Use the enhanced insert_question method
                    handler.insert_question(
                        questionnaire_type,
                        q_num,
                        q_text,
                        options_json, # Pass JSON string directly
                        scale_display_name # Pass the scale name
                        )
                    imported_count += 1
                except KeyError as ke:
                     print(f"    Error processing question in {json_file}: Missing key {ke}")
                     error_count += 1
                except TypeError as te:
                    print(f"    Error processing options for question {question.get('number', 'N/A')} in {json_file}: Likely not a list of dicts. Details: {te}")
                    error_count += 1
                except Exception as e_inner:
                     print(f"    Error processing question {question.get('number', 'N/A')} in {json_file}: {e_inner}")
                     error_count += 1

        except json.JSONDecodeError as jde:
            print(f"  Error decoding JSON from {json_file}: {jde}")
            error_count += 1
        except Exception as e_outer:
            print(f"  Error processing file {json_file}: {e_outer}")
            error_count += 1

    print(f"\nImport finished. Successfully imported {imported_count} questions.")
    if error_count > 0:
        print(f"Encountered {error_count} errors during import.")

if __name__ == "__main__":
    import_questions_from_json()
    # Optional: Check DB content after import
    project_root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
    db_file_path = os.path.join(project_root, "psychology_analysis.db")
    try:
        # 修正：从 src 包导入
        from src.data_handler import check_db_content
        check_db_content(db_file_path)
    except ImportError:
         print("\nRun `python src/data_handler.py` to check database content.")
    except Exception as e:
        print(f"\nError checking DB content after import: {e}")

================================================================================

--- File: PsychologyAnalysis\src\interrogation_ai.py ---
import logging
import os
import sys
import json
from typing import List, Dict, Any
from openai import OpenAI

# --- Import settings ---
SRC_DIR = os.path.dirname(os.path.abspath(__file__))
PROJECT_ROOT = os.path.dirname(SRC_DIR)
if PROJECT_ROOT not in sys.path:
    sys.path.insert(0, PROJECT_ROOT)

try:
    from app.core.config import settings
except ImportError as e:
    class MockSettings:
        DASHSCOPE_API_KEY = None
        TEXT_MODEL = "qwen-plus"
        APP_NAME = "FallbackApp"
    settings = MockSettings()
    print(f"Warning: Unable to import app.core.config.settings in interrogation_ai.py: {e}", file=sys.stderr)

# --- Configure logging ---
logger = logging.getLogger(settings.APP_NAME)
if not logger.hasHandlers():
    logging.basicConfig(
        level=logging.INFO,
        format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
    )

# --- Initialize AI client ---
ai_client = None
if settings.DASHSCOPE_API_KEY:
    try:
        ai_client = OpenAI(
            api_key=settings.DASHSCOPE_API_KEY,
            base_url="https://dashscope.aliyuncs.com/compatible-mode/v1",
            default_headers={
                "User-Agent": "MyPsychologyApp-InterrogationAI/1.0",
                "Accept": "application/json"
            }
        )
        logger.info("Interrogation AI client initialized successfully.")
    except Exception as e:
        logger.error(f"Failed to initialize OpenAI client: {e}", exc_info=True)

def format_history_for_prompt(history: List[Dict[str, str]]) -> str:
    """Format conversation history into a prompt string."""
    formatted = ""
    for i, qa in enumerate(history):
        formatted += f"Q{i+1}: {qa.get('q', 'No question text')}\nA{i+1}: {qa.get('a', 'No answer text')}\n\n"
    return formatted.strip()

def suggest_next_question(
    basic_info: Dict[str, Any],
    history: List[Dict[str, str]],
    model_name: str = "qwen-plus",
    num_suggestions: int = 3
) -> List[str]:
    """Generate suggested follow-up questions based on provided information and history."""
    if ai_client is None:
        logger.error("AI client not initialized, cannot generate suggestions.")
        return ["Error: AI service not configured"]

    model_name = settings.TEXT_MODEL if hasattr(settings, 'TEXT_MODEL') else model_name

    system_prompt = f"""You are a top-tier interrogation expert and psychological analyst skilled in strategic questioning.
Your task is to propose {num_suggestions} follow-up questions based on the subject's information and conversation history, each with a distinct strategic intent to guide the interrogation:
1. **Detail-oriented**: Focus on the last answer, requesting specific details like time, place, people, or methods.
2. **Motive/emotion exploration**: Probe the reasons, feelings, or intentions behind the behavior.
3. **Extension/contradiction challenge**: Introduce a related new topic or ask a challenging question to verify consistency.

Return exactly {num_suggestions} questions, each on a single line, without numbering, titles, or additional explanations."""

    history_str = format_history_for_prompt(history)
    basic_info_str = json.dumps(basic_info, ensure_ascii=False, indent=2)

    user_prompt = f"""
**Subject Information:**
```json
{basic_info_str}
```

**Conversation History:**
{history_str if history_str else "(No conversation history)"}

**Task:**
Generate {num_suggestions} distinct follow-up questions as per the system instructions.
"""

    messages = [
        {"role": "system", "content": system_prompt},
        {"role": "user", "content": user_prompt}
    ]

    try:
        logger.debug(f"Calling model '{model_name}' for suggestions...")
        completion = ai_client.chat.completions.create(
            model=model_name,
            messages=messages,
            max_tokens=200 * num_suggestions,
            temperature=0.75,
            n=1
        )
        response_content = completion.choices[0].message.content
        suggestions = [line.strip() for line in response_content.strip().split('\n') if line.strip()]

        if not suggestions:
            logger.warning("Model returned no valid suggestions.")
            return ["AI failed to generate suggestions"]

        logger.info(f"Successfully generated {len(suggestions)} suggestions.")
        return suggestions[:num_suggestions]

    except Exception as e:
        logger.error(f"Error calling AI model: {e}", exc_info=True)
        return [f"Error: Failed to retrieve AI suggestions ({type(e).__name__})"]

================================================================================

--- File: PsychologyAnalysis\src\report_generator.py ---
# src/report_generator.py
from openai import OpenAI
import json
import os
import logging
import sys # 添加sys导入

# --- 导入 settings ---
# 确保路径正确，以便能够导入 settings
SRC_DIR_REPORT_GEN = os.path.dirname(os.path.abspath(__file__))
PROJECT_ROOT_REPORT_GEN = os.path.dirname(SRC_DIR_REPORT_GEN) # PsychologyAnalysis/
if PROJECT_ROOT_REPORT_GEN not in sys.path:
    sys.path.insert(0, PROJECT_ROOT_REPORT_GEN)

try:
    from app.core.config import settings
except ImportError as e:
    class MockSettings:
        DASHSCOPE_API_KEY = None
        TEXT_MODEL = "qwen-plus"
        REPORT_PROMPT_TEMPLATE = None
        APP_NAME = "FallbackApp"
    settings = MockSettings()
    print(f"警告: 无法在 report_generator.py 中导入 app.core.config.settings: {e}", file=sys.stderr)


# Get the logger instance setup in app.py or utils.py
logger = logging.getLogger(settings.APP_NAME)
if not logger.hasHandlers():
    logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(name)s - %(levelname)s - %(message)s')


class ReportGenerator:
    def __init__(self, config):
        """Initializes ReportGenerator with configuration and explicit safe headers."""
        self.config = config # Store config if needed elsewhere
        # 从 settings 获取 API Key 和模型名称
        self.api_key = settings.DASHSCOPE_API_KEY
        if not self.api_key:
            logger.error("CRITICAL: API Key not found in settings for ReportGenerator.")
            raise ValueError("API Key missing for ReportGenerator.")

        self.model = settings.TEXT_MODEL # 从 settings 获取文本模型
        self.base_url = config.get("base_url", "https://dashscope.aliyuncs.com/compatible-mode/v1")

        # --- Explicitly set safe default headers ---
        safe_headers = {
            "User-Agent": "MyPsychologyApp-ReportGenerator/1.0",
            "Accept": "application/json",
        }

        try:
            self.client = OpenAI(
                api_key=self.api_key,
                base_url=self.base_url,
                default_headers=safe_headers
            )
            logger.info(f"ReportGenerator OpenAI client initialized. Base URL: {self.base_url}. Using explicit safe headers.")
        except Exception as e:
            logger.error(f"Failed to initialize OpenAI client in ReportGenerator: {e}", exc_info=True)
            raise

        # --- Default prompt template definition (moved inside init for clarity) ---
        self.default_prompt_template = """
请根据以下信息生成一份详细的心理分析报告，服务于警务工作场景。

**I. 被测者基础信息:**
姓名: {subject_info[name]}
性别: {subject_info[gender]}
身份证号: {subject_info[id_card]}
年龄: {subject_info[age]}
职业: {subject_info[occupation]}
案件名称: {subject_info[case_name]}
案件类型: {subject_info[case_type]}
人员身份: {subject_info[identity_type]}
人员类型: {subject_info[person_type]}
婚姻状况: {subject_info[marital_status]}
子女情况: {subject_info[children_info]}
有无犯罪前科: {criminal_record_text}
健康情况: {subject_info[health_status]}
手机号: {subject_info[phone_number]}
归属地: {subject_info[domicile]}

**II. 绘画分析 (基于AI对图片的描述):**
{description}

**III. 量表分析:**
量表类型: {questionnaire_type}
量表得分: {score}
量表答案详情 (JSON):
{questionnaire}
初步解释: {scale_interpretation}

**IV. 综合心理状态分析与建议:**
请结合以上所有信息（基础信息、绘画分析、量表结果），进行深入的心理状态评估，提取关键人格特征，并针对警务工作场景（如未成年人犯罪预防、在押人员管理、上访户调解、民辅警关怀等，根据人员类型判断侧重点）给出具体的风险评估、干预建议或沟通策略。分析需专业、客观、有条理。报告应直接开始分析内容，无需重复引言。

--- 分析报告正文 ---
"""
        # Use template from config if provided and is a string, otherwise use the default
        # 从 settings 中获取 REPORT_PROMPT_TEMPLATE
        config_template = settings.REPORT_PROMPT_TEMPLATE if hasattr(settings, 'REPORT_PROMPT_TEMPLATE') else None
        if isinstance(config_template, str) and config_template.strip():
            self.prompt_template = config_template
            logger.debug("Using prompt template from settings.")
        else:
            if config_template is not None:
                logger.warning("REPORT_PROMPT_TEMPLATE in settings is not a valid string. Using default.")
            else:
                logger.debug("REPORT_PROMPT_TEMPLATE not found in settings. Using default.")
            self.prompt_template = self.default_prompt_template


    # 确保 generate_report 方法也正确包含 self 和所有需要的参数
    def generate_report(self, description, questionnaire, subject_info, questionnaire_type, score, scale_interpretation):
        """Generates the report by formatting the prompt and calling the LLM API."""
        logger.info(f"Generating report for subject: {subject_info.get('name', 'N/A')}")

        # --- 在这里计算 criminal_record_text ---
        criminal_record_text = '是' if subject_info.get('criminal_record', 0) == 1 else '否'
        # ------------------------------------

        # Safely format questionnaire data (which should be a dictionary passed from ai_utils)
        questionnaire_str = "N/A"
        if questionnaire and isinstance(questionnaire, dict): # Check if it's a dict
            try:
                # Dump the dictionary to a pretty JSON string for the prompt
                questionnaire_str = json.dumps(questionnaire, ensure_ascii=False, indent=2)
            except Exception as json_err:
                logger.warning(f"Could not dump questionnaire dict to JSON: {json_err}. Using raw dict string.")
                questionnaire_str = str(questionnaire) # Fallback
        elif isinstance(questionnaire, str): # If it's already a string (e.g., JSON string)
            questionnaire_str = questionnaire
        elif questionnaire:
            logger.warning(f"Unexpected type for questionnaire data: {type(questionnaire)}. Using raw string.")
            questionnaire_str = str(questionnaire)


        # --- 构建 prompt_context，包含所有模板需要的键 ---
        prompt_context = {
            'description': description if description else "无",
            'questionnaire': questionnaire_str, # Use formatted string
            'subject_info': subject_info if subject_info else {}, # Ensure it's a dict
            'questionnaire_type': questionnaire_type if questionnaire_type else "未知",
            'score': score if score is not None else "N/A",
            'scale_interpretation': scale_interpretation if scale_interpretation else "无",
            'criminal_record_text': criminal_record_text # <--- 添加计算出的文本
        }
        # ---------------------------------------------

        # Ensure all required keys for the template exist in subject_info context
        default_keys = ["name", "gender", "id_card", "age", "occupation", "case_name", "case_type", "identity_type", "person_type", "marital_status", "children_info", "criminal_record", "health_status", "phone_number", "domicile"]
        # Ensure subject_info itself is a dict before iterating
        if isinstance(prompt_context['subject_info'], dict):
            for key in default_keys:
                prompt_context['subject_info'].setdefault(key, '未提供') # Set default if key missing
        else: # If subject_info is somehow not a dict, create a default one
            logger.warning(f"subject_info was not a dictionary (type: {type(prompt_context['subject_info'])}). Creating default context.")
            prompt_context['subject_info'] = {key: '未提供' for key in default_keys}


        try:
            # --- 使用 self.prompt_template 和构建好的 context 格式化 ---
            final_prompt = self.prompt_template.format(**prompt_context)
            logger.debug(f"Formatted Prompt (first 500 chars): {final_prompt[:500]}...")
        except KeyError as e:
            logger.error(f"Prompt template formatting error: Missing key {e}. Context keys available: {list(prompt_context.keys())}", exc_info=True)
            # Check if the missing key is expected in subject_info
            if str(e).strip("'") in default_keys:
                logger.error(f"Missing key '{e}' likely expected within subject_info dictionary: {prompt_context.get('subject_info')}")
            raise KeyError(f"Prompt template formatting error: Missing key {e}") from e
        except Exception as e_fmt:
            logger.error(f"Prompt template formatting error: {e_fmt}", exc_info=True)
            raise Exception(f"Prompt template formatting error: {e_fmt}") from e_fmt


        messages = [
            # Refined system prompt
            {"role": "system", "content": "你是一位专业的心理分析师。请根据用户提供的多维度信息（基础信息、绘画描述、量表结果与解释），结合心理学知识和警务场景，生成一份结构清晰、分析深入、建议具体的综合心理评估报告。"},
            {"role": "user", "content": final_prompt}
        ]

        try:
            logger.debug(f"Calling text model '{self.model}'...")
            completion = self.client.chat.completions.create(
                model=self.model, # 使用 self.model
                messages=messages,
            )
            report_content = completion.choices[0].message.content
            logger.info("Report content received successfully.")
            return report_content
        except Exception as e:
            logger.error(f"Error calling text generation API: {type(e).__name__} - {e}", exc_info=True)
            raise Exception(f"调用大模型 API 时出错 - {str(e)}") from e

================================================================================

--- File: PsychologyAnalysis\src\utils.py ---
# src/utils.py
import logging
import os
import sys
from logging.handlers import RotatingFileHandler # (可选) 使用轮转日志

# --------------------------------------------------------------------------
# 重要: 这个文件现在属于 'src' 包，
# 它将被 'app/main.py' 导入。
# 'app/main.py' 已经将项目根目录添加到了 sys.path,
# 所以这里理论上可以直接访问 'app' 包，但最好避免循环导入。
# 因此，日志配置的参数（如 level, dir）应该由调用者传入。
# --------------------------------------------------------------------------

# 获取项目根目录 (PsychologyAnalysis/)
# __file__ 指向当前文件 (utils.py)
# os.path.dirname(__file__) 指向 src 目录
# os.path.dirname(os.path.dirname(__file__)) 指向 PsychologyAnalysis 目录
PROJECT_ROOT = os.path.abspath(os.path.join(os.path.dirname(__file__), ".."))

# 修改 setup_logging 函数，添加 log_dir_base_path 参数
def setup_logging(log_level_str: str = "INFO", log_dir_name: str = "logs", log_dir_base_path: str = None, logger_name: str = "QingtingzheApp"):
    """
    配置应用程序的日志记录。

    Args:
        log_level_str (str): 日志级别字符串 (e.g., "DEBUG", "INFO", "WARNING").
        log_dir_name (str): 日志文件夹的名称 (例如 'logs').
        log_dir_base_path (str, optional): 日志文件夹的基路径。如果提供，日志文件夹将是 `log_dir_base_path/log_dir_name`。
                                           如果未提供，则默认为 `PROJECT_ROOT/log_dir_name`。
        logger_name (str): 要配置的日志记录器的名称.
    """
    # --- 1. 获取日志级别 ---
    log_level = getattr(logging, log_level_str.upper(), logging.INFO)
    print(f"[Logging Setup] Setting log level to: {logging.getLevelName(log_level)} ({log_level_str})")

    # --- 2. 计算日志文件路径 ---
    # 根据 log_dir_base_path 确定日志目录
    if log_dir_base_path:
        log_directory = os.path.join(log_dir_base_path, log_dir_name)
    else:
        log_directory = os.path.join(PROJECT_ROOT, log_dir_name)

    try:
        os.makedirs(log_directory, exist_ok=True)
        print(f"[Logging Setup] Ensured log directory exists: {log_directory}")
    except OSError as e:
        print(f"[Logging Setup] Error creating log directory {log_directory}: {e}", file=sys.stderr)
        log_directory = None # 标记目录不可用

    log_file_path = os.path.join(log_directory, "app.log") if log_directory else None
    print(f"[Logging Setup] Log file path set to: {log_file_path}")


    # --- 3. 获取或创建 Logger 实例 ---
    logger = logging.getLogger(logger_name)
    logger.setLevel(log_level) # 设置 Logger 的基础级别

    # --- 4. 清除旧的 Handlers (防止重复添加) ---
    if logger.hasHandlers():
        print("[Logging Setup] Clearing existing handlers for logger:", logger_name)
        # 复制列表，因为在迭代时删除会出问题
        for handler in list(logger.handlers):
            logger.removeHandler(handler)
            handler.close() # 关闭 handler 释放资源

    # --- 5. 创建 Formatter ---
    log_format = "%(asctime)s - %(name)s - %(levelname)s - [%(filename)s:%(lineno)d] - %(message)s"
    formatter = logging.Formatter(log_format)

    # --- 6. 创建并添加 Handlers ---

    # a) 控制台 Handler (总是添加)
    console_handler = logging.StreamHandler(sys.stdout) # 输出到标准输出
    console_handler.setLevel(log_level) # 控制台 Handler 也遵循设定的级别
    console_handler.setFormatter(formatter)
    logger.addHandler(console_handler)
    print(f"[Logging Setup] Added Console Handler (Level: {logging.getLevelName(console_handler.level)})")

    # b) 文件 Handler (如果路径有效)
    if log_file_path:
        try:
            file_handler = RotatingFileHandler(log_file_path, maxBytes=10*1024*1024, backupCount=5, encoding='utf-8')
            file_handler.setLevel(log_level) # 文件 Handler 也遵循设定的级别
            file_handler.setFormatter(formatter)
            logger.addHandler(file_handler)
            print(f"[Logging Setup] Added Rotating File Handler (Level: {logging.getLevelName(file_handler.level)})")
        except Exception as e:
            print(f"[Logging Setup] Failed to create/add file handler for {log_file_path}: {e}", file=sys.stderr)
            logger.error(f"Failed to set up file logging to {log_file_path}: {e}")

    # --- 7. (可选) 配置特定库的日志级别 ---
    logging.getLogger("uvicorn.access").setLevel(logging.WARNING)
    logging.getLogger("httpx").setLevel(logging.WARNING)
    logging.getLogger("sqlalchemy.engine").setLevel(logging.WARNING) # 减少SQLAlchemy的详细输出

    print(f"[Logging Setup] Configuration for logger '{logger_name}' complete.")

================================================================================

--- File: PsychologyAnalysis\文档部分\倾听者 心理学项目需求分析 (2).md ---


**“倾听者” AI 智能警务分析评估应用系统 - 需求分析 (V2.0 - 基于确认的技术栈和 AI 路径)**

**一、 项目概述与目标**

“倾听者”系统利用 AI 技术（结合自研 OCR、**预训练图像模型特征提取**、通义千问 VL 及大语言模型）和心理学评估方法（绘画、量表），对特定警务相关人群进行心理状态分析与评估。系统包含：

1.  **安卓 App (原生 Kotlin):** 用于数据采集。
2.  **后端 API 服务 (FastAPI + Python):** 处理业务逻辑、数据持久化、执行 AI 分析、提供接口。
3.  **数据库 (MySQL):** 存储所有系统数据。
4.  **后台管理系统 (Vue.js):** 用于数据查看、管理、分析和 AI 辅助功能交互。

**目标:** 为警务工作在未成年人犯罪预防、在押人员管理、上访户调解、民辅警关怀等方面提供数据驱动的决策支持、风险预警和智能辅助。

**二、 需求分析**

**A. 前端 - 安卓 App (原生 Kotlin)**

*   **用户认证 (FR-APP-01, 02):**
    *   提供符合 Material Design 的登录界面 (用户名/密码)。
    *   调用后端认证 API (`/auth/login`)，使用 Retrofit/OkHttp。
    *   安全存储 JWT Token (如 EncryptedSharedPreferences)。
*   **主界面 (FR-APP-03):**
    *   包含“分析评估”、“心理百科”（若实现）入口。
    *   采用 Bottom Navigation 或 Navigation Drawer 导航。
*   **分析评估模块 (核心流程):**
    *   **基本信息采集 (FR-APP-04):**
        *   使用标准 Android 控件 (EditText, Spinner, RadioButton, CheckBox) 构建表单。
        *   采集字段：姓名、性别、身份证号、年龄、职业、案件名称、案件类型（Spinner，数据源自 API `/lookups/case-types`）、人员身份（Spinner，数据源自 API `/lookups/identity-types`）、人员类型（Spinner，数据源自 API `/lookups/person-types`）、婚姻状况、子女情况、有无犯罪前科、健康情况、手机号、归属地（Spinner，数据源自 API `/lookups/domiciles`）。
        *   实现客户端输入校验。
    *   **绘画上传 (FR-APP-05):**
        *   集成 CameraX 或原生相机 Intent 拍照。
        *   集成 Activity Result API/相册 Intent 选择图片。
        *   提供图片预览。
    *   **量表测量 (FR-APP-06):**
        *   根据选择的量表类型，调用 API (`/scales/{scale_type}/questions`) 获取问题列表。
        *   使用 RecyclerView 动态展示问题和选项 (RadioGroup)。
        *   记录用户答案。
    *   **数据提交 (FR-APP-07):**
        *   将基础信息、量表答案（JSON 格式）、图片文件打包。
        *   调用后端数据提交 API (`/assessments/submit`)，使用 Retrofit/OkHttp 处理 `multipart/form-data` 上传。
        *   显示上传进度和结果反馈。
    *   **测评报告查看 (FR-APP-08):**
        *   提供查询接口（可能基于评估记录 ID 或用户关联记录）。
        *   调用后端报告查询 API (`/reports/{assessment_id}` 或类似接口)。
        *   解析并展示报告内容。

**B. 后端 - API 服务器 (FastAPI + Python)**

*   **API 接口 (RESTful, OpenAPI/Swagger 自动文档):**
    *   认证: `/auth/login`, `/auth/refresh`
    *   基础数据查询: `/lookups/{type}` (e.g., `/lookups/case-types`)
    *   量表: `/scales/{scale_type}/questions`
    *   评估提交: `POST /assessments/submit` (接收 App 数据)
    *   报告查询: `GET /reports`, `GET /reports/{id}`, `GET /reports/search`
    *   数据分析: `GET /analysis/stats` (带多维度查询参数)
    *   AI 辅助: `POST /ai/{assistance_type}` (e.g., `/ai/mediation_guidance`)
    *   用户管理: `GET /users`, `POST /users`, `PUT /users/{id}`, `DELETE /users/{id}` (及角色相关接口)
*   **核心业务逻辑:**
    *   **用户认证与授权 (FR-BE-CORE-01):** JWT 认证，基于角色的路径操作依赖项。
    *   **数据存储 (FR-BE-CORE-02):**
        *   使用 SQLAlchemy ORM 操作 MySQL 数据库。
        *   实现适配新 Schema 的数据保存逻辑（**重写 Demo 逻辑**）。
        *   图片存储至服务器指定路径或对象存储，路径存入数据库。
    *   **异步任务处理 (FR-BE-CORE-03):**
        *   使用 Celery + Redis/RabbitMQ。
        *   `/assessments/submit` 接口接收数据后，验证并存入数据库（标记状态为“处理中”），然后触发异步任务。
    *   **AI 分析与报告生成 (异步任务 - FR-BE-CORE-04):**
        *   **Input:** Assessment ID
        *   **Steps:**
            1.  从数据库加载评估数据 (图片路径、量表答案等)。
            2.  **本地图像处理 (运行于 CPU):**
                *   调用 OCR 服务/库获取图片文字信息。
                *   加载 **预训练轻量级图像模型 (如 MobileNetV2/V3, EfficientNet-B0)**，提取绘画图像的 **特征向量**。
            3.  调用 **通义千问 VL API**，可能结合 OCR 结果，获取图像的深层理解。
            4.  **量表处理:** 计算得分，根据规则库解释。
            5.  **整合分析:** 融合 OCR 结果、图像特征向量、VL 分析结果、量表解释。
            6.  **人格特征提取:** 实现基于整合分析结果生成人格特征的逻辑。
            7.  **报告生成:**
                *   构造包含所有分析结果的详细 **Prompt**。
                *   调用 **通义千问 LLM API** 生成报告文本。
                *   **持续进行 Prompt 调优** 以提升报告质量。
            8.  将生成的报告、特征向量、分析结果等存入数据库，更新评估记录状态为“完成”。
    *   **数据统计与分析 (FR-BE-CORE-05):** 实现基于 SQLAlchemy 的复杂查询和聚合逻辑。
    *   **AI 辅助模块 (FR-BE-CORE-06):**
        *   查询报告 -> 构造 Prompt -> 调用 LLM API -> 返回结果 -> 记录日志。
    *   **用户管理 (FR-BE-CORE-07):** 实现用户和角色的 CRUD 逻辑。

**C. 前端 - 后台管理系统 (Vue.js)**

*   **用户认证 (FR-ADM-01, 02):**
    *   登录页面，调用 `/auth/login`。
    *   使用 Axios 发送请求，Token 存入 localStorage/sessionStorage。
    *   配置 Vue Router 路由守卫。
*   **主界面/布局 (FR-ADM-03):**
    *   SPA 布局，使用 Element Plus / Naive UI / Ant Design Vue 组件库。
    *   侧边栏导航对应 7 大模块。
*   **模块 1: 查看测试报告 (FR-ADM-04, 05, 06):**
    *   查询表单 (姓名/身份证号)。
    *   使用 Table 组件展示分页结果 (调用 `/reports/search`)。
    *   点击查看详情 (Dialog/新页面，调用 `/reports/{id}`)。
*   **模块 2: 数据分析 (FR-ADM-07, 08):**
    *   筛选表单 (日期、多选框等)。
    *   调用 `/analysis/stats` API。
    *   使用 ECharts 或类似库展示图表，结合 Table。
*   **模块 3-6: AI 辅助功能 (FR-ADM-09 ~ 12 类推):**
    *   查询人员报告 -> 触发对应 AI 辅助 API (`/ai/{type}`) -> 展示返回结果。
*   **模块 7: 用户管理 (FR-ADM-13 ~ 16):**
    *   Table 展示用户列表 (调用 `/users`)。
    *   Dialog/页面 实现新增/编辑表单 (调用 `POST/PUT /users`)。
    *   操作按钮实现删除、角色分配 (调用 `DELETE /users`, `/users/{id}/role` 等)。

**三、 数据库数据结构 (MySQL + SQLAlchemy)**

*   采用上一轮分析中定义的表结构，使用 SQLAlchemy 定义数据模型 (Models)。
*   包括：`User`, `Role`, `Subject`, `Assessment`, `Scale`, `Question`, `Answer`, `Report`, `PersonalityTrait`, `AIAssistanceLog`, `Domicile`, `PersonType`, `IdentityType`, `CaseType` 等。
*   `Report` 表需要增加字段存储提取的图像特征向量 (可能序列化后存 TEXT/BLOB 或存文件路径) 和中间分析结果。
*   设计合适的索引以优化查询性能。
*   考虑敏感信息加密。

**四、 非功能性需求 (关键)**

*   **安全性:** API 权限控制、数据加密、防攻击、日志审计，满足警务系统安全标准。
*   **性能:** API 响应快，App 流畅，后台任务高效 (FastAPI, Kotlin Native, Celery 助力)。CPU 上的图像特征提取需确保性能可接受。
*   **可靠性:** 系统稳定，数据库备份恢复，AI 结果有一定稳定性。
*   **易用性:** App 和后台界面简洁直观，符合用户习惯。
*   **准确性:** 量表计分准确，**AI 分析（绘画、人格、辅助建议）的准确性和有效性是核心价值**。
*   **可维护性:** 代码结构清晰，FastAPI/Vue 模块化，类型提示，自动文档。
*   **合规性:** 遵守相关法律法规和警务规范。

**五、 基础设施要求**

*   需要服务器（云或本地）运行 FastAPI 应用、Celery Worker、MySQL 数据库、Redis/RabbitMQ 缓存/消息队列。
*   服务器 CPU 需要能承担轻量级图像模型（如 MobileNet）的推理负载（非实时）。
*   需要考虑网络带宽（图片上传、API 调用）。
*   需要部署 Nginx 等 Web 服务器/反向代理。
*   需要监控、日志、备份方案。

**六、 主要挑战与风险**

1.  **AI 效果:** 绘画分析（多模态融合）的准确性、人格特征提取的有效性、AI 辅助建议的实用性。
2.  **数据安全与合规:** 满足警务系统的高标准。
3.  **开发资源:** 团队需高效利用框架特性，合理安排优先级，进行迭代开发。
4.  **Prompt 工程:** 需要持续投入时间和精力优化 LLM 的 Prompt 以获得高质量输出。
5.  **本地模型性能:** 确保 CPU 上的图像特征提取性能满足后台任务需求。



================================================================================

--- File: PsychologyAnalysis\文档部分\倾听者 心理学项目需求分析.md ---
好的，我们来整合所有讨论和决策，重新生成一份更精确、面向后续开发的需求分析文档。

**“倾听者” AI 智能警务分析评估应用系统 - 需求分析 (V2.0 - 基于确认的技术栈和 AI 路径)**

**一、 项目概述与目标**

“倾听者”系统利用 AI 技术（结合自研 OCR、**预训练图像模型特征提取**、通义千问 VL 及大语言模型）和心理学评估方法（绘画、量表），对特定警务相关人群进行心理状态分析与评估。系统包含：

1.  **安卓 App (原生 Kotlin):** 用于数据采集。
2.  **后端 API 服务 (FastAPI + Python):** 处理业务逻辑、数据持久化、执行 AI 分析、提供接口。
3.  **数据库 (MySQL):** 存储所有系统数据。
4.  **后台管理系统 (Vue.js):** 用于数据查看、管理、分析和 AI 辅助功能交互。

**目标:** 为警务工作在未成年人犯罪预防、在押人员管理、上访户调解、民辅警关怀等方面提供数据驱动的决策支持、风险预警和智能辅助。

**二、 需求分析**

**A. 前端 - 安卓 App (原生 Kotlin)**

*   **用户认证 (FR-APP-01, 02):**
    *   提供符合 Material Design 的登录界面 (用户名/密码)。
    *   调用后端认证 API (`/auth/login`)，使用 Retrofit/OkHttp。
    *   安全存储 JWT Token (如 EncryptedSharedPreferences)。
*   **主界面 (FR-APP-03):**
    *   包含“分析评估”、“心理百科”（若实现）入口。
    *   采用 Bottom Navigation 或 Navigation Drawer 导航。
*   **分析评估模块 (核心流程):**
    *   **基本信息采集 (FR-APP-04):**
        *   使用标准 Android 控件 (EditText, Spinner, RadioButton, CheckBox) 构建表单。
        *   采集字段：姓名、性别、身份证号、年龄、职业、案件名称、案件类型（Spinner，数据源自 API `/lookups/case-types`）、人员身份（Spinner，数据源自 API `/lookups/identity-types`）、人员类型（Spinner，数据源自 API `/lookups/person-types`）、婚姻状况、子女情况、有无犯罪前科、健康情况、手机号、归属地（Spinner，数据源自 API `/lookups/domiciles`）。
        *   实现客户端输入校验。
    *   **绘画上传 (FR-APP-05):**
        *   集成 CameraX 或原生相机 Intent 拍照。
        *   集成 Activity Result API/相册 Intent 选择图片。
        *   提供图片预览。
    *   **量表测量 (FR-APP-06):**
        *   根据选择的量表类型，调用 API (`/scales/{scale_type}/questions`) 获取问题列表。
        *   使用 RecyclerView 动态展示问题和选项 (RadioGroup)。
        *   记录用户答案。
    *   **数据提交 (FR-APP-07):**
        *   将基础信息、量表答案（JSON 格式）、图片文件打包。
        *   调用后端数据提交 API (`/assessments/submit`)，使用 Retrofit/OkHttp 处理 `multipart/form-data` 上传。
        *   显示上传进度和结果反馈。
    *   **测评报告查看 (FR-APP-08):**
        *   提供查询接口（可能基于评估记录 ID 或用户关联记录）。
        *   调用后端报告查询 API (`/reports/{assessment_id}` 或类似接口)。
        *   解析并展示报告内容。

**B. 后端 - API 服务器 (FastAPI + Python)**

*   **API 接口 (RESTful, OpenAPI/Swagger 自动文档):**
    *   认证: `/auth/login`, `/auth/refresh`
    *   基础数据查询: `/lookups/{type}` (e.g., `/lookups/case-types`)
    *   量表: `/scales/{scale_type}/questions`
    *   评估提交: `POST /assessments/submit` (接收 App 数据)
    *   报告查询: `GET /reports`, `GET /reports/{id}`, `GET /reports/search`
    *   数据分析: `GET /analysis/stats` (带多维度查询参数)
    *   AI 辅助: `POST /ai/{assistance_type}` (e.g., `/ai/mediation_guidance`)
    *   用户管理: `GET /users`, `POST /users`, `PUT /users/{id}`, `DELETE /users/{id}` (及角色相关接口)
*   **核心业务逻辑:**
    *   **用户认证与授权 (FR-BE-CORE-01):** JWT 认证，基于角色的路径操作依赖项。
    *   **数据存储 (FR-BE-CORE-02):**
        *   使用 SQLAlchemy ORM 操作 MySQL 数据库。
        *   实现适配新 Schema 的数据保存逻辑（**重写 Demo 逻辑**）。
        *   图片存储至服务器指定路径或对象存储，路径存入数据库。
    *   **异步任务处理 (FR-BE-CORE-03):**
        *   使用 Celery + Redis/RabbitMQ。
        *   `/assessments/submit` 接口接收数据后，验证并存入数据库（标记状态为“处理中”），然后触发异步任务。
    *   **AI 分析与报告生成 (异步任务 - FR-BE-CORE-04):**
        *   **Input:** Assessment ID
        *   **Steps:**
            1.  从数据库加载评估数据 (图片路径、量表答案等)。
            2.  **本地图像处理 (运行于 CPU):**
                *   调用 OCR 服务/库获取图片文字信息。
                *   加载 **预训练轻量级图像模型 (如 MobileNetV2/V3, EfficientNet-B0)**，提取绘画图像的 **特征向量**。
            3.  调用 **通义千问 VL API**，可能结合 OCR 结果，获取图像的深层理解。
            4.  **量表处理:** 计算得分，根据规则库解释。
            5.  **整合分析:** 融合 OCR 结果、图像特征向量、VL 分析结果、量表解释。
            6.  **人格特征提取:** 实现基于整合分析结果生成人格特征的逻辑。
            7.  **报告生成:**
                *   构造包含所有分析结果的详细 **Prompt**。
                *   调用 **通义千问 LLM API** 生成报告文本。
                *   **持续进行 Prompt 调优** 以提升报告质量。
            8.  将生成的报告、特征向量、分析结果等存入数据库，更新评估记录状态为“完成”。
    *   **数据统计与分析 (FR-BE-CORE-05):** 实现基于 SQLAlchemy 的复杂查询和聚合逻辑。
    *   **AI 辅助模块 (FR-BE-CORE-06):**
        *   查询报告 -> 构造 Prompt -> 调用 LLM API -> 返回结果 -> 记录日志。
    *   **用户管理 (FR-BE-CORE-07):** 实现用户和角色的 CRUD 逻辑。

**C. 前端 - 后台管理系统 (Vue.js)**

*   **用户认证 (FR-ADM-01, 02):**
    *   登录页面，调用 `/auth/login`。
    *   使用 Axios 发送请求，Token 存入 localStorage/sessionStorage。
    *   配置 Vue Router 路由守卫。
*   **主界面/布局 (FR-ADM-03):**
    *   SPA 布局，使用 Element Plus / Naive UI / Ant Design Vue 组件库。
    *   侧边栏导航对应 7 大模块。
*   **模块 1: 查看测试报告 (FR-ADM-04, 05, 06):**
    *   查询表单 (姓名/身份证号)。
    *   使用 Table 组件展示分页结果 (调用 `/reports/search`)。
    *   点击查看详情 (Dialog/新页面，调用 `/reports/{id}`)。
*   **模块 2: 数据分析 (FR-ADM-07, 08):**
    *   筛选表单 (日期、多选框等)。
    *   调用 `/analysis/stats` API。
    *   使用 ECharts 或类似库展示图表，结合 Table。
*   **模块 3-6: AI 辅助功能 (FR-ADM-09 ~ 12 类推):**
    *   查询人员报告 -> 触发对应 AI 辅助 API (`/ai/{type}`) -> 展示返回结果。
*   **模块 7: 用户管理 (FR-ADM-13 ~ 16):**
    *   Table 展示用户列表 (调用 `/users`)。
    *   Dialog/页面 实现新增/编辑表单 (调用 `POST/PUT /users`)。
    *   操作按钮实现删除、角色分配 (调用 `DELETE /users`, `/users/{id}/role` 等)。

**三、 数据库数据结构 (MySQL + SQLAlchemy)**

*   采用上一轮分析中定义的表结构，使用 SQLAlchemy 定义数据模型 (Models)。
*   包括：`User`, `Role`, `Subject`, `Assessment`, `Scale`, `Question`, `Answer`, `Report`, `PersonalityTrait`, `AIAssistanceLog`, `Domicile`, `PersonType`, `IdentityType`, `CaseType` 等。
*   `Report` 表需要增加字段存储提取的图像特征向量 (可能序列化后存 TEXT/BLOB 或存文件路径) 和中间分析结果。
*   设计合适的索引以优化查询性能。
*   考虑敏感信息加密。

**四、 非功能性需求 (关键)**

*   **安全性:** API 权限控制、数据加密、防攻击、日志审计，满足警务系统安全标准。
*   **性能:** API 响应快，App 流畅，后台任务高效 (FastAPI, Kotlin Native, Celery 助力)。CPU 上的图像特征提取需确保性能可接受。
*   **可靠性:** 系统稳定，数据库备份恢复，AI 结果有一定稳定性。
*   **易用性:** App 和后台界面简洁直观，符合用户习惯。
*   **准确性:** 量表计分准确，**AI 分析（绘画、人格、辅助建议）的准确性和有效性是核心价值**。
*   **可维护性:** 代码结构清晰，FastAPI/Vue 模块化，类型提示，自动文档。
*   **合规性:** 遵守相关法律法规和警务规范。

**五、 基础设施要求**

*   需要服务器（云或本地）运行 FastAPI 应用、Celery Worker、MySQL 数据库、Redis/RabbitMQ 缓存/消息队列。
*   服务器 CPU 需要能承担轻量级图像模型（如 MobileNet）的推理负载（非实时）。
*   需要考虑网络带宽（图片上传、API 调用）。
*   需要部署 Nginx 等 Web 服务器/反向代理。
*   需要监控、日志、备份方案。

**六、 主要挑战与风险**

1.  **AI 效果:** 绘画分析（多模态融合）的准确性、人格特征提取的有效性、AI 辅助建议的实用性。
2.  **数据安全与合规:** 满足警务系统的高标准。
3.  **开发资源:** 团队需高效利用框架特性，合理安排优先级，进行迭代开发。
4.  **Prompt 工程:** 需要持续投入时间和精力优化 LLM 的 Prompt 以获得高质量输出。
5.  **本地模型性能:** 确保 CPU 上的图像特征提取性能满足后台任务需求。

这份 V2.0 的需求分析文档整合了所有已知信息和决策，应该可以作为后续开发工作的可靠依据。

================================================================================

--- File: qingtingzhe_prototype_backend\Combiner.py ---
import os
import sys
from tqdm import tqdm

# 定义允许被合并内容的文件扩展名
ALLOWED_EXTENSIONS_FOR_CONTENT = ('.py', '.txt', '.md', '.json', '.xml', '.html', '.css', '.js', '.csv')

# --- 恢复 generate_tree 到原始版本，以包含所有文件 ---
def generate_tree(root_dir):
    """生成类似 tree /f 的目录树字符串 (包含所有文件和目录)"""
    tree_output = [root_dir]
    # os.walk 会自然遍历所有子目录和文件
    for root, dirs, files in os.walk(root_dir):
        level = root.replace(root_dir, '').count(os.sep)
        indent = '    ' * level
        if level > 0:  # 避免重复输出根目录
            tree_output.append(f"{indent}{os.path.basename(root)}")
        
        # --- 在目录树中列出该目录下的所有文件 ---
        sub_indent = indent + '    '
        for file in files:
            # 不进行扩展名过滤，列出所有文件
            tree_output.append(f"{sub_indent}{file}")
            
    return "\n".join(tree_output)

def concatenate_files(root_dir, output_file):
    # 计算总文件数以初始化进度条 (反映遍历的所有文件)
    total_files = sum(len(files) for _, _, files in os.walk(root_dir))

    # 预计算将被合并内容的文件数（可选，如果你想让进度条只反映合并进度）
    # included_files_count = 0
    # for root, dirs, files in os.walk(root_dir):
    #     for file in files:
    #         _, ext = os.path.splitext(file)
    #         if ext.lower() in ALLOWED_EXTENSIONS_FOR_CONTENT:
    #             included_files_count += 1
    # print(f"找到 {included_files_count} 个符合条件的文件将被合并内容。")


    with open(output_file, 'w', encoding='utf-8') as outfile:
        # --- 写入完整的目录树 ---
        outfile.write("Full Project Directory Tree:\n") # 标题明确说明是完整树
        outfile.write(generate_tree(root_dir) + "\n") # 调用未经过滤的 generate_tree
        outfile.write("=====\n\n")
        outfile.write("Concatenated File Content (Filtered):\n") # 明确说明内容是过滤后的

        # 使用 tqdm 显示进度条 (total 仍然是所有文件数，反映遍历进度)
        # 如果使用上面的 included_files_count，这里改为 total=included_files_count
        with tqdm(total=total_files, desc="扫描文件并合并内容", unit="file") as pbar:
            for root, dirs, files in os.walk(root_dir):
                for file in files:
                    file_path = os.path.join(root, file)

                    # --- 核心过滤逻辑：只处理指定扩展名的文件内容 ---
                    _, ext = os.path.splitext(file)

                    # 检查扩展名是否在允许合并内容的列表中
                    if ext.lower() in ALLOWED_EXTENSIONS_FOR_CONTENT:
                        # --- 文件内容合并逻辑 ---
                        try:
                            with open(file_path, 'r', encoding='utf-8') as infile:
                                content = infile.read()
                                outfile.write("FILE: " + file_path + "\n")
                                outfile.write(content + "\n")
                                outfile.write("-----\n")
                            print(f"已合并内容: {file_path} - 成功")
                        except Exception as e:
                            # 即使读取失败，也记录下来
                            outfile.write(f"FILE: {file_path}\n")
                            outfile.write(f"读取文件出错 (尝试合并内容时): {str(e)}\n")
                            outfile.write("-----\n")
                            print(f"尝试合并内容失败: {file_path} - 错误: {str(e)}")
                    else:
                        # --- 文件类型不符，跳过内容合并 ---
                        # 不需要写入文件内容，只在控制台打印信息
                        print(f"已跳过内容合并 (类型不符): {file_path}")

                    # --- 更新进度条 ---
                    # 每个访问的文件都更新进度条
                    pbar.update(1)

if __name__ == "__main__":
    root_dir = sys.argv[1] if len(sys.argv) > 1 else os.getcwd()
    output_file = 'project_text1.txt'
    print(f"正在扫描目录: {root_dir}")
    print(f"将生成包含所有文件的目录树，并合并后缀为 {', '.join(ALLOWED_EXTENSIONS_FOR_CONTENT)} 的文件内容到: {output_file}")
    concatenate_files(root_dir, output_file)
    print(f"处理完成。输出文件: {output_file}")

================================================================================

--- File: qingtingzhe_prototype_backend\app.py ---
import os
import json
# Add copy for deep copying the template
import copy
from flask import (
    Flask, render_template, request, redirect, url_for, session,
    flash, jsonify, send_file, Response
)

# --- 配置 ---
app = Flask(__name__)
app.secret_key = os.environ.get('FLASK_SECRET_KEY', 'a_very_insecure_default_secret_key_for_prototype')

# --- 获取数据文件路径 ---
BASE_DIR = os.path.dirname(os.path.abspath(__file__))
DATA_DIR = os.path.join(BASE_DIR, 'data')
# --- 修改回 JSON 文件路径 ---
INTERROGATION_TEMPLATE_PATH = os.path.join(DATA_DIR, 'interrogation_template.json')
GUIDANCE_PLAN_PATH = os.path.join(DATA_DIR, 'guidance_plan.txt')

# --- 模拟数据加载 (恢复 JSON 加载) ---
try:
    with open(INTERROGATION_TEMPLATE_PATH, 'r', encoding='utf-8') as f:
        # --- 使用 json.load ---
        INTERROGATION_TEMPLATE = json.load(f)
except FileNotFoundError:
    print(f"警告: 审讯模板文件未找到: {INTERROGATION_TEMPLATE_PATH}")
    INTERROGATION_TEMPLATE = {"error": "模板文件丢失", "questions_answers": []} # Provide default structure
except json.JSONDecodeError:
     print(f"警告: 审讯模板文件 JSON 格式错误: {INTERROGATION_TEMPLATE_PATH}")
     INTERROGATION_TEMPLATE = {"error": "模板文件格式错误", "questions_answers": []} # Provide default structure
except Exception as e:
    print(f"加载审讯模板时发生未知错误: {e}")
    INTERROGATION_TEMPLATE = {"error": "加载模板时出错", "questions_answers": []}


try:
    with open(GUIDANCE_PLAN_PATH, 'r', encoding='utf-8') as f:
        GUIDANCE_PLAN_TEXT = f.read()
except FileNotFoundError:
    print(f"警告: 指导方案文件未找到: {GUIDANCE_PLAN_PATH}")
    GUIDANCE_PLAN_TEXT = "错误：指导方案文件丢失。"

# (Keep MOCK_REPORT_ID_20_TEXT and MOCK_USERS as they were)
MOCK_REPORT_ID_20_TEXT = """
综合心理状态分析与建议
... (rest of the text) ...
"""
MOCK_USERS = [
    {"id": 1, "username": "admin", "email": "admin@example.com", "full_name": "管理员", "is_active": True, "is_superuser": True},
    # ... (rest of the users) ...
    {"id": 100, "username": "tech_guan", "email": "guan.tech@example.com", "full_name": "关技术员", "is_active": True, "is_superuser": False},
]


# --- 辅助函数 ---
def login_required(f):
    import functools
    @functools.wraps(f)
    def decorated_function(*args, **kwargs):
        if 'logged_in' not in session:
            flash('请先登录', 'warning')
            return redirect(url_for('login'))
        return f(*args, **kwargs)
    return decorated_function

# --- 路由 ---

@app.route('/', methods=['GET', 'POST'])
@app.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        username = request.form.get('username')
        password = request.form.get('password')
        if username == 'admin' and password == 'password':
            session['logged_in'] = True
            session['username'] = username
            flash('登录成功!', 'success')
            return redirect(url_for('dashboard'))
        else:
            flash('用户名或密码错误', 'danger')
            return render_template('login.html', error="用户名或密码错误")
    if 'logged_in' in session:
        return redirect(url_for('dashboard'))
    return render_template('login.html')

@app.route('/logout')
def logout():
    session.pop('logged_in', None)
    session.pop('username', None)
    flash('您已成功退出登录', 'info')
    return redirect(url_for('login'))

@app.route('/dashboard')
@login_required
def dashboard():
    functions = [
        "查询报告", "数据分析", "辅助智能审讯笔录",
        "上访户情绪疏导", "未成年人犯罪心理辅导",
        "民辅警心理评估报告", "用户管理"
    ]
    return render_template('dashboard.html', functions=functions)

# --- 审讯笔录 ---
@app.route('/interrogation/input')
@login_required
def interrogation_input():
    return render_template('interrogation_input.html')

@app.route('/interrogation/generate', methods=['POST'])
@login_required
def generate_interrogation_record():
    """审讯笔录 - 生成可编辑的表单页面"""
    basic_info = {
        "name": request.form.get('name'),
        "gender": request.form.get('gender'),
        "id_card": request.form.get('id_card'),
        "phone": request.form.get('phone'),
        "address": request.form.get('address'),
        # --- 模拟或计算其他信息 ---
        "age": "未知", # TODO: Calculate from ID card if possible
        "dob": "未知", # TODO: Extract from ID card if possible
        "hukou": request.form.get('hukou', "未知"), # Add if hukou is in input form
    }

    # --- 使用深拷贝，避免修改原始模板 ---
    if "error" in INTERROGATION_TEMPLATE:
         flash(f"无法加载审讯模板: {INTERROGATION_TEMPLATE['error']}", "danger")
         # 可以重定向回输入页或显示错误页
         return redirect(url_for('interrogation_input'))

    template_data = copy.deepcopy(INTERROGATION_TEMPLATE)

    # --- 用 basic_info 填充 template_data ---
    template_data['person_name'] = basic_info.get('name', template_data.get('person_name', ''))
    template_data['person_gender'] = basic_info.get('gender', template_data.get('person_gender', ''))
    template_data['person_id_type_number'] = basic_info.get('id_card', template_data.get('person_id_type_number', ''))
    template_data['person_address'] = basic_info.get('address', template_data.get('person_address', ''))
    template_data['person_contact'] = basic_info.get('phone', template_data.get('person_contact', ''))
    template_data['person_age'] = basic_info.get('age', template_data.get('person_age', ''))
    template_data['person_dob'] = basic_info.get('dob', template_data.get('person_dob', ''))
    template_data['person_hukou'] = basic_info.get('hukou', template_data.get('person_hukou', ''))

    # --- 传递填充后的数据到新的编辑模板 ---
    return render_template('interrogation_edit.html',
                           template_data=template_data)

# --- 新增：处理编辑后提交的路由 ---
@app.route('/interrogation/save', methods=['POST'])
@login_required
def save_interrogation_record():
    """审讯笔录 - 保存编辑后的数据 (模拟)"""
    edited_data = {}
    # --- 重新构建数据结构 ---
    # 获取所有表单字段
    form_data = request.form.to_dict()

    # 简单地将所有表单字段放入 edited_data (这不够健壮，需要精确映射)
    # edited_data = form_data # 这会丢失 questions_answers 的结构

    # --- 更精确地重建 JSON 结构 ---
    # 1. 提取基本信息
    for key in INTERROGATION_TEMPLATE.keys(): # Use original keys as guide
        if key not in ['questions_answers', 'signature_section']:
             edited_data[key] = form_data.get(key) # Get simple fields directly

    # 2. 重建 questions_answers 列表
    edited_qas = []
    qa_indices = set()
    # Find submitted question/answer indices (more robust than assuming fixed count)
    for key in form_data:
        if key.startswith('questions_answers[') and key.endswith('][q]'):
            index = key.split('[')[1].split(']')[0]
            qa_indices.add(int(index))
        elif key.startswith('questions_answers[') and key.endswith('][a]'):
            index = key.split('[')[1].split(']')[0]
            qa_indices.add(int(index))

    for i in sorted(list(qa_indices)): # Process in order
         q_key = f'questions_answers[{i}][q]'
         a_key = f'questions_answers[{i}][a]'
         question = form_data.get(q_key, "") # Default to empty string if missing
         answer = form_data.get(a_key, "")   # Default to empty string if missing
         edited_qas.append({"q": question, "a": answer})
    edited_data['questions_answers'] = edited_qas

    # 3. 重建 signature_section 字典
    edited_data['signature_section'] = {}
    sig_template = INTERROGATION_TEMPLATE.get('signature_section', {})
    for key in sig_template.keys():
         # Naming convention in HTML should be signature_section[key_name]
         form_key = f'signature_section[{key}]'
         edited_data['signature_section'][key] = form_data.get(form_key, sig_template[key]) # Get from form or default

    # --- 模拟保存 ---
    print("--- RECEIVED EDITED RECORD DATA ---")
    print(json.dumps(edited_data, ensure_ascii=False, indent=2))
    # In a real app: save edited_data to a database or a new file

    flash('笔录已更新 (模拟保存成功)', 'success')
    # 可以重定向到查看页面，或者 dashboard
    return redirect(url_for('dashboard'))

# --- PDF 下载路由（保持不变，或修改为基于已保存数据生成） ---
@app.route('/interrogation/pdf')
@login_required
def download_interrogation_pdf():
    # TODO: Implement PDF generation based on saved/edited data
    return Response("PDF 生成功能待实现", mimetype='text/plain', status=501)

# --- 其他路由 (保持不变) ---
@app.route('/petitioner-guidance', methods=['GET', 'POST'])
@login_required
def view_petitioner_guidance():
    if request.method == 'POST':
        name = request.form.get('name')
        id_card = request.form.get('id_card')
        print(f"查询上访户: {name}, 身份证: {id_card}")
        report_text = MOCK_REPORT_ID_20_TEXT
        guidance_text = GUIDANCE_PLAN_TEXT
        return render_template('report_guidance_viewer.html',
                               title=f"{name} - 上访户情绪疏导",
                               report_text=report_text,
                               guidance_text=guidance_text,
                               guidance_title="上访户情绪疏导方案",
                               show_input_form=False,
                               back_link=url_for('view_petitioner_guidance'))
    return render_template('report_guidance_viewer.html',
                            title="上访户情绪疏导",
                            show_input_form=True)

@app.route('/juvenile-counseling', methods=['GET', 'POST'])
@login_required
def view_juvenile_counseling():
    if request.method == 'POST':
        name = request.form.get('name')
        id_card = request.form.get('id_card')
        print(f"查询未成年人: {name}, 身份证: {id_card}")
        report_text = MOCK_REPORT_ID_20_TEXT
        guidance_text = GUIDANCE_PLAN_TEXT
        return render_template('report_guidance_viewer.html',
                               title=f"{name} - 未成年人心理辅导",
                               report_text=report_text,
                               guidance_text=guidance_text,
                               guidance_title="未成年人犯罪心理辅导方案",
                               show_input_form=False,
                               back_link=url_for('view_juvenile_counseling'))
    return render_template('report_guidance_viewer.html',
                           title="未成年人犯罪心理辅导",
                           show_input_form=True)

@app.route('/police-report')
@login_required
def view_police_report():
    report_text = MOCK_REPORT_ID_20_TEXT
    guidance_text = """
    关于提升民辅警队伍心理健康水平的若干建议
    ... (rest of guidance text) ...
    """
    return render_template('report_guidance_viewer.html',
                           title="民辅警心理评估报告",
                           report_text=report_text,
                           guidance_text=guidance_text,
                           guidance_title="民辅警心理调适建议",
                           show_input_form=False)

@app.route('/data-analysis')
@login_required
def data_analysis():
    return render_template('data_analysis.html')

@app.route('/api/data-analysis')
def data_analysis_api():
    mock_data = {
        'ageData': {'labels': ['<18', '18-25', '26-35', '36-45', '46-55', '56+'], 'values': [8, 35, 50, 28, 18, 10]},
        'genderData': {'labels': ['男', '女', '其他'], 'values': [70, 45, 3]}
    }
    return jsonify(mock_data)

@app.route('/user-management')
@login_required
def user_management():
    return render_template('user_management.html', users=MOCK_USERS)


# --- 运行 ---
if __name__ == '__main__':
    os.makedirs(DATA_DIR, exist_ok=True)
    static_css_dir = os.path.join(BASE_DIR, 'static', 'css')
    static_js_dir = os.path.join(BASE_DIR, 'static', 'js')
    os.makedirs(static_css_dir, exist_ok=True)
    os.makedirs(static_js_dir, exist_ok=True)
    print(f"确保目录存在:\n  Data: {DATA_DIR}\n  Static CSS: {static_css_dir}\n  Static JS: {static_js_dir}")

    # --- 确保模板文件存在 (如果不存在，可以创建一个空的JSON) ---
    if not os.path.exists(INTERROGATION_TEMPLATE_PATH):
        print(f"创建空的审讯模板文件: {INTERROGATION_TEMPLATE_PATH}")
        empty_template = {
          "record_number": "第 N 次", "title": "讯问笔录", "time_start": "", "time_end": "", "location": "",
          "interrogator_signature": "", "interrogator_unit": "", "recorder_signature": "", "recorder_unit": "",
          "person_name": "", "person_gender": "", "person_age": "", "person_dob": "", "person_id_type_number": "",
          "person_address": "", "person_contact": "", "person_hukou": "", "arrival_departure_info": "",
          "questions_answers": [{"q": "问题示例1?", "a": "回答示例1"}, {"q": "问题示例2?", "a": ""}],
          "signature_section": {"person_signature": "被讯问人：", "date": "时    间：    年   月   日"}
        }
        try:
            with open(INTERROGATION_TEMPLATE_PATH, 'w', encoding='utf-8') as f:
                json.dump(empty_template, f, ensure_ascii=False, indent=2)
        except IOError as e:
            print(f"创建空模板文件失败: {e}")


    app.run(debug=True, host='0.0.0.0', port=5001)

================================================================================

--- File: qingtingzhe_prototype_backend\requirements.txt ---
# qingtingzhe_prototype_backend/requirements.txt
Flask>=2.0
python-dotenv>=0.15 # 可选，如果需要 .env 文件

================================================================================

--- File: qingtingzhe_prototype_backend\data\interrogation_template.json ---
{
    "record_number": "第 N 次",
    "title": "讯问笔录（帮信嫌疑人）",
    "time_start": "2025年4月1日00时00分",
    "time_end": "2025年4月1日01时00分",
    "location": "葫芦岛市执法办案管理中心询（讯）问室1",
    "interrogator_signature": " ",
    "interrogator_unit": "葫芦岛市公安局",
    "recorder_signature": " ",
    "recorder_unit": "葫芦岛市公安局",
    "person_name": "{姓名}",
    "person_gender": "{性别}",
    "person_age": "{年龄}",
    "person_dob": "{出生日期}",
    "person_id_type_number": "{身份证号}",
    "person_address": "{家庭住址}",
    "person_contact": "{手机号}",
    "person_hukou": "{户籍所在地}",
    "arrival_departure_info": "（口头传唤∕被扭送∕自动投案的被讯问人    月    日    时    分到达，    月    日   时    分离开，本人签名                        ）",
    "questions_answers": [
      {
        "q": "我们是葫芦岛市公安局的民警（出示人民警察证），现依法对你进行讯问，对我们的提问你应当如实回答，说假话作伪证要付法律责任。对与本案无关的问题，你有拒绝回答的权利，你听清楚了吗？",
        "a": "听清楚了。"
      },
      {
          "q": "因为你未满18周岁，现由你的母亲XXX陪同你进行讯问，你听明白了吗？",
          "a": "(仅适用于未成年人) 我听明白了。"
      },
      {
        "q": "这是一份《犯罪嫌疑人诉讼权利义务告知书》，你看一遍，是否理解上面的内容？",
        "a": "（看《犯罪嫌疑人诉讼权利义务告知书》约2分钟）我看过了，理解上面的内容。"
      },
      {
        "q": "你是否申请办案人员回避？",
        "a": "不申请。"
      },
      {
        "q": "你是否要求聘请律师？",
        "a": "我委托我的母亲XXX为我聘请律师。 (或: 不要求)"
      },
      {
        "q": "这是一份《葫芦岛市公安局认罪认罚从宽制度告知书》，你看一遍，是否理解上面的内容？",
        "a": "（看《葫芦岛市公安局认罪认罚从宽制度告知书》约1分钟），我看完了，理解上面的内容。"
      },
      {
        "q": "你是对否认罪认罚？",
        "a": "我认罪认罚。"
      },
      {
        "q": "你如果需要饮食或休息你可以随时提出，你现在是否需要饮食和休息？",
        "a": "我现在不需要。"
      },
      {
        "q": "你是否是人大代表或政协委员？",
        "a": "都不是。"
      },
      {
        "q": "你是否是中共党员？",
        "a": "不是。"
      },
      {
        "q": "你现在是做什么工作的？",
        "a": "我在XXX工厂当工人。"
      },
      {
        "q": "讲一下你的个人简历和家庭情况？",
        "a": "我6岁-22岁读书，22岁至今在XXX工厂当工人。我的父亲：XXX，50岁，在XXX做XX工作；母亲：XXX，50岁，在XXX做XX工作；妻子： XXX，24岁，在XXX做XX工作。"
      },
      {
        "q": "你是否受到过行政或刑事处罚？",
        "a": " "
      },
      {
        "q": "你因何事被传唤（或口头传唤等，根据实际情况写）到公安机关？",
        "a": "我因为帮人转钱被传唤到公安机关。"
      },
      {
        "q": "讲一下事情发生的时间地点？",
        "a": " "
      },
      {
        "q": "你是用哪张银行卡帮人转账？具体信息是什么？",
        "a": " "
      },
      {
        "q": "你一共用你的银行卡账号跑了多少流水？",
        "a": " "
      },
      {
        "q": "对方转给你多少钱？具体转账信息是什么？",
        "a": " "
      },
      {
        "q": "你转出多少钱？具体转账信息是什么？",
        "a": " "
      },
      {
        "q": "你一共获利多少钱？",
        "a": " "
      },
      {
        "q": "你知道上家转给你的钱是如何获得的？",
        "a": " "
      },
      {
        "q": "你是如何联系到上家的？",
        "a": " "
      },
      {
        "q": "上家是如何与你沟通的？（方式、用的工具）",
        "a": " "
      },
      {
        "q": "上家的详细信息是什么？",
        "a": " "
      },
      {
        "q": "你为什么用自己的银行卡给别人转账？",
        "a": " "
      },
      {
        "q": "你转出的账号信息是什么？谁提供给你的？",
        "a": " "
      },
      {
        "q": "你是否知道用银行卡帮别人转钱是违法行为？",
        "a": " "
      },
      {
        "q": "你获利xx元，但受害人因诈骗损失xx万元导致自杀未遂，这种交易值得吗？",
        "a": " "
      },
      {
        "q": "继续隐瞒将面临3年以上刑期，主动退赃可争取缓刑，你选择哪条路？",
        "a": " "
      },
      {
        "q": "你每转账10万元获利500元，但造成被害人平均损失率高达92%，这种比率合理吗？",
        "a": " "
      },
      {
        "q": "你有什么证据向公安机关提供吗？",
        "a": " "
      },
      {
        "q": "你还有什么要补充的吗？",
        "a": "没有。"
      },
      {
        "q": "以上所说是否属实？",
        "a": "属实。"
      },
      {
        "q": "以上笔录你看一下，和你说的是否相符？",
        "a": " "
      }
    ],
    "signature_section": {
      "person_signature": "被讯问人：",
      "date": "时    间：    年   月   日"
    }
  }

================================================================================

--- File: qingtingzhe_prototype_backend\static\css\style.css ---
/* static/css/style.css - 基础样式 */
body {
    font-family: sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f4f7f6;
    color: #333;
    line-height: 1.6;
}

.page-container {
    max-width: 1200px;
    margin: 20px auto;
    padding: 20px;
    background-color: #fff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    border-radius: 8px;
}

.login-page, .dashboard-page {
    max-width: 500px;
}

h1, h2, h3 {
    color: #0056b3;
    margin-bottom: 1em;
}

h1 { font-size: 1.8em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.2em; }

a {
    color: #007bff;
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

.btn {
    display: inline-block;
    padding: 10px 15px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1em;
    text-align: center;
    margin-top: 10px;
    transition: background-color 0.2s;
}

.btn:hover {
    background-color: #0056b3;
}

.btn-secondary {
    background-color: #6c757d;
}

.btn-secondary:hover {
    background-color: #5a6268;
}

.btn-block {
    display: block;
    width: 100%;
}

.form-group {
    margin-bottom: 15px;
}

label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}

input[type="text"],
input[type="password"],
input[type="email"],
input[type="number"],
input[type="tel"],
textarea,
select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box; /* Important */
}

textarea {
    min-height: 80px;
    resize: vertical;
}

.alert {
    padding: 15px;
    margin-bottom: 20px;
    border: 1px solid transparent;
    border-radius: 4px;
}

.alert-danger {
    color: #721c24;
    background-color: #f8d7da;
    border-color: #f5c6cb;
}

.alert-success {
    color: #155724;
    background-color: #d4edda;
    border-color: #c3e6cb;
}

.dashboard-list {
    list-style: none;
    padding: 0;
}

.dashboard-list li {
    margin-bottom: 10px;
    background-color: #e9ecef;
    padding: 15px;
    border-radius: 4px;
}

.dashboard-list a {
    display: block;
    font-weight: bold;
}

pre {
    background-color: #eee;
    padding: 15px;
    border-radius: 4px;
    white-space: pre-wrap; /* Allow wrapping */
    word-wrap: break-word; /* Break long words */
    font-family: monospace;
    max-height: 500px; /* Limit height */
    overflow-y: auto; /* Add scroll if needed */
}

.report-section, .guidance-section {
    margin-top: 20px;
    padding: 15px;
    border: 1px solid #eee;
    border-radius: 5px;
    background-color: #f9f9f9;
}

.chart-container {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 20px;
}

.chart-box {
    width: 100%;
    max-width: 400px; /* Adjust as needed */
    height: 300px; /* Ensure canvas has height */
}

.user-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.user-table th, .user-table td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}

.user-table th {
    background-color: #f2f2f2;
}

================================================================================

--- File: qingtingzhe_prototype_backend\static\js\charts.js ---
// static/js/charts.js
document.addEventListener('DOMContentLoaded', function() {
    const ageChartCtx = document.getElementById('ageChart');
    const genderChartCtx = document.getElementById('genderChart');

    if (!ageChartCtx || !genderChartCtx) {
        console.error("Chart canvas elements not found!");
        return;
    }

    // Mock data - In a real app, fetch this from an API endpoint
    const mockData = {
        ageData: {
            labels: ['<18', '18-25', '26-35', '36-45', '46-55', '56+'],
            values: [5, 25, 40, 22, 15, 8]
        },
        genderData: {
            labels: ['男', '女', '其他'],
            values: [63, 35, 2]
        }
    };

    // Age Distribution Line Chart
    new Chart(ageChartCtx, {
        type: 'line',
        data: {
            labels: mockData.ageData.labels,
            datasets: [{
                label: '年龄分布',
                data: mockData.ageData.values,
                borderColor: 'rgb(75, 192, 192)',
                tension: 0.1,
                fill: false
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    title: { display: true, text: '数量' }
                },
                x: {
                    title: { display: true, text: '年龄段' }
                }
            },
            plugins: {
                title: {
                    display: true,
                    text: '用户年龄分布'
                }
            }
        }
    });

    // Gender Distribution Pie Chart
    new Chart(genderChartCtx, {
        type: 'pie',
        data: {
            labels: mockData.genderData.labels,
            datasets: [{
                label: '性别分布',
                data: mockData.genderData.values,
                backgroundColor: [
                    'rgb(54, 162, 235)',
                    'rgb(255, 99, 132)',
                    'rgb(201, 203, 207)'
                ],
                hoverOffset: 4
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                title: {
                    display: true,
                    text: '用户性别分布'
                }
            }
        }
    });
});

================================================================================

--- File: qingtingzhe_prototype_backend\templates\base.html ---
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}倾听者后台{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block head %}{% endblock %}
</head>
<body>
    <div class="page-container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        {% block content %}{% endblock %}
    </div>
    {% block scripts %}{% endblock %}
</body>
</html>

================================================================================

--- File: qingtingzhe_prototype_backend\templates\dashboard.html ---
{% extends "base.html" %}

{% block title %}功能列表 - 倾听者后台{% endblock %}

{% block content %}
<div class="dashboard-page">
    <h2>后台功能列表</h2>
    <ul class="dashboard-list">
        <li><a href="{{ url_for('view_petitioner_guidance') }}">查询报告</a></li>
        <li><a href="{{ url_for('data_analysis') }}">数据分析</a></li>
        <li><a href="{{ url_for('interrogation_input') }}">辅助智能审讯笔录</a></li>
        <li><a href="{{ url_for('view_petitioner_guidance') }}">上访户情绪疏导</a></li>
        <li><a href="{{ url_for('view_juvenile_counseling') }}">未成年人犯罪心理辅导 </a></li>
        <li><a href="{{ url_for('view_police_report') }}">民辅警心理评估报告</a></li>
        <li><a href="{{ url_for('user_management') }}">用户管理</a></li>
    </ul>
    <hr>
     <p><a href="{{ url_for('logout') }}" class="btn btn-secondary">退出登录</a></p>
</div>
{% endblock %}

================================================================================

--- File: qingtingzhe_prototype_backend\templates\data_analysis.html ---
{% extends "base.html" %}

{% block title %}数据分析 - 倾听者后台{% endblock %}

{% block content %}
    <h2>数据分析</h2>

    <div class="chart-container">
        <div class="chart-box">
            <canvas id="ageChart"></canvas>
        </div>
        <div class="chart-box">
            <canvas id="genderChart"></canvas>
        </div>
    </div>

    <div style="text-align: center; margin-top: 30px;">
        <button class="btn btn-secondary" disabled>分析不同心理指标 </button>
    </div>
     <p><a href="{{ url_for('dashboard') }}">返回功能列表</a></p>
{% endblock %}

{% block scripts %}
    <!-- Load Chart.js from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Load your custom chart script -->
    <script src="{{ url_for('static', filename='js/charts.js') }}"></script>
{% endblock %}

================================================================================

--- File: qingtingzhe_prototype_backend\templates\interrogation_edit.html ---
{% extends "base.html" %} {# Assuming you have a base template with styles/scripts #}

{% block title %}编辑审讯笔录{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>编辑审讯笔录</h2>
    <hr>

    {# --- 表单开始，提交到保存路由 --- #}
    <form action="{{ url_for('save_interrogation_record') }}" method="POST">

        {# --- 基本信息部分 --- #}
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="record_number" class="form-label">笔录次数</label>
                <input type="text" class="form-control" id="record_number" name="record_number" value="{{ template_data.record_number }}">
            </div>
            <div class="col-md-6">
                <label for="title" class="form-label">标题</label>
                <input type="text" class="form-control" id="title" name="title" value="{{ template_data.title }}">
            </div>
        </div>
        <div class="row mb-3">
             <div class="col-md-6">
                <label for="time_start" class="form-label">开始时间</label>
                {# Consider using datetime-local input if browser support is okay #}
                <input type="text" class="form-control" id="time_start" name="time_start" value="{{ template_data.time_start }}">
            </div>
            <div class="col-md-6">
                <label for="time_end" class="form-label">结束时间</label>
                <input type="text" class="form-control" id="time_end" name="time_end" value="{{ template_data.time_end }}">
            </div>
        </div>
         <div class="mb-3">
            <label for="location" class="form-label">地点</label>
            <input type="text" class="form-control" id="location" name="location" value="{{ template_data.location }}">
        </div>
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="interrogator_unit" class="form-label">讯问人单位</label>
                <input type="text" class="form-control" id="interrogator_unit" name="interrogator_unit" value="{{ template_data.interrogator_unit }}">
            </div>
            <div class="col-md-6">
                 <label for="interrogator_signature" class="form-label">讯问人(签名占位)</label>
                <input type="text" class="form-control" id="interrogator_signature" name="interrogator_signature" value="{{ template_data.interrogator_signature }}">
            </div>
        </div>
         <div class="row mb-3">
            <div class="col-md-6">
                <label for="recorder_unit" class="form-label">记录人单位</label>
                <input type="text" class="form-control" id="recorder_unit" name="recorder_unit" value="{{ template_data.recorder_unit }}">
            </div>
            <div class="col-md-6">
                 <label for="recorder_signature" class="form-label">记录人(签名占位)</label>
                <input type="text" class="form-control" id="recorder_signature" name="recorder_signature" value="{{ template_data.recorder_signature }}">
            </div>
        </div>

        <hr>
        <h4>被讯问人信息</h4>
         <div class="row mb-3">
            <div class="col-md-4">
                <label for="person_name" class="form-label">姓名</label>
                <input type="text" class="form-control" id="person_name" name="person_name" value="{{ template_data.person_name }}">
            </div>
            <div class="col-md-2">
                <label for="person_gender" class="form-label">性别</label>
                <input type="text" class="form-control" id="person_gender" name="person_gender" value="{{ template_data.person_gender }}">
            </div>
             <div class="col-md-2">
                <label for="person_age" class="form-label">年龄</label>
                <input type="text" class="form-control" id="person_age" name="person_age" value="{{ template_data.person_age }}">
            </div>
             <div class="col-md-4">
                <label for="person_dob" class="form-label">出生日期</label>
                <input type="text" class="form-control" id="person_dob" name="person_dob" value="{{ template_data.person_dob }}">
            </div>
        </div>
        <div class="mb-3">
            <label for="person_id_type_number" class="form-label">身份证号</label>
            <input type="text" class="form-control" id="person_id_type_number" name="person_id_type_number" value="{{ template_data.person_id_type_number }}">
        </div>
        <div class="mb-3">
            <label for="person_address" class="form-label">家庭住址</label>
            <input type="text" class="form-control" id="person_address" name="person_address" value="{{ template_data.person_address }}">
        </div>
         <div class="row mb-3">
            <div class="col-md-6">
                <label for="person_contact" class="form-label">联系方式</label>
                <input type="text" class="form-control" id="person_contact" name="person_contact" value="{{ template_data.person_contact }}">
            </div>
            <div class="col-md-6">
                <label for="person_hukou" class="form-label">户籍地</label>
                <input type="text" class="form-control" id="person_hukou" name="person_hukou" value="{{ template_data.person_hukou }}">
            </div>
        </div>
        <div class="mb-3">
            <label for="arrival_departure_info" class="form-label">到案/离开信息</label>
            <textarea class="form-control" id="arrival_departure_info" name="arrival_departure_info" rows="2">{{ template_data.arrival_departure_info }}</textarea>
        </div>

        <hr>
        <h4>讯问内容</h4>
        {# --- 问答对部分 --- #}
        {% for qa in template_data.questions_answers %}
        <div class="qa-pair mb-4 p-3 border rounded">
            <div class="mb-2">
                <label for="q_{{ loop.index0 }}" class="form-label"><b>问题 {{ loop.index }}:</b></label>
                {# Make question editable too #}
                <textarea class="form-control form-control-sm" id="q_{{ loop.index0 }}" name="questions_answers[{{ loop.index0 }}][q]" rows="2">{{ qa.q }}</textarea>
            </div>
            <div>
                <label for="a_{{ loop.index0 }}" class="form-label">回答 {{ loop.index }}:</label>
                <textarea class="form-control" id="a_{{ loop.index0 }}" name="questions_answers[{{ loop.index0 }}][a]" rows="4">{{ qa.a }}</textarea>
            </div>
        </div>
        {% else %}
        <p class="text-muted">模板中没有问答内容。</p>
        {% endfor %}

        {# --- 可以添加按钮来动态增加问答对 (需要 JavaScript) --- #}
        {# <button type="button" class="btn btn-secondary btn-sm mb-3">添加问答</button> #}

        <hr>
        <h4>签名区域</h4>
         {# --- 签名部分 (占位) --- #}
         <div class="row mb-3">
            <div class="col-md-6">
                <label for="sig_person" class="form-label">被讯问人(签名占位)</label>
                {# Use name matching the save route: signature_section[key] #}
                <input type="text" class="form-control" id="sig_person" name="signature_section[person_signature]" value="{{ template_data.signature_section.person_signature }}">
            </div>
             <div class="col-md-6">
                <label for="sig_date" class="form-label">时间(签名占位)</label>
                <input type="text" class="form-control" id="sig_date" name="signature_section[date]" value="{{ template_data.signature_section.date }}">
            </div>
         </div>


        {# --- 提交按钮 --- #}
        <div class="mt-4 mb-5">
            <button type="submit" class="btn btn-primary">保存笔录</button>
            <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">取消</a>
            {# Optionally add a 'Save and Generate PDF' button #}
        </div>

    </form> {# --- 表单结束 --- #}

</div>
{% endblock %}

================================================================================

--- File: qingtingzhe_prototype_backend\templates\interrogation_input.html ---
{% extends "base.html" %}

{% block title %}智能审讯笔录 - 填写信息{% endblock %}

{% block content %}
    <h2>辅助智能审讯笔录 - 基本信息</h2>
    <form action="{{ url_for('generate_interrogation_record') }}" method="post">
        <div class="form-group">
            <label for="name">姓名:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
            <label for="gender">性别:</label>
            <select id="gender" name="gender" required>
                <option value="男">男</option>
                <option value="女">女</option>
                <option value="其他">其他</option>
            </select>
        </div>
        <div class="form-group">
            <label for="id_card">身份证号:</label>
            <input type="text" id="id_card" name="id_card">
        </div>
        <div class="form-group">
            <label for="phone">手机号:</label>
            <input type="tel" id="phone" name="phone">
        </div>
         <div class="form-group">
            <label for="address">家庭住址:</label>
            <textarea id="address" name="address"></textarea>
        </div>
        <button type="submit" class="btn btn-block">生成智能审讯笔录模板</button>
    </form>
     <p><a href="{{ url_for('dashboard') }}">返回功能列表</a></p>
{% endblock %}

================================================================================

--- File: qingtingzhe_prototype_backend\templates\interrogation_output.html ---
{% extends "base.html" %}

{% block title %}智能审讯笔录 - 模板预览{% endblock %}

{% block content %}
    <h2>智能审讯笔录 - 模板预览</h2>

    <h3>填写的基本信息:</h3>
    <ul>
        <li>姓名: {{ basic_info.get('name', 'N/A') }}</li>
        <li>性别: {{ basic_info.get('gender', 'N/A') }}</li>
        <li>身份证号: {{ basic_info.get('id_card', 'N/A') }}</li>
        <li>手机号: {{ basic_info.get('phone', 'N/A') }}</li>
        <li>家庭住址: {{ basic_info.get('address', 'N/A') }}</li>
    </ul>

    <h3>笔录模板:</h3>
    <pre><code>{{ record_template_str | safe }}</code></pre>

    <a href="{{ url_for('download_interrogation_pdf') }}" class="btn btn-secondary" disabled>生成并导出PDF</a>
    <p><a href="{{ url_for('interrogation_input') }}">返回填写信息</a></p>
    <p><a href="{{ url_for('dashboard') }}">返回功能列表</a></p>
{% endblock %}

{% block scripts %}
<script>
    // JavaScript to make the JSON pretty print (optional)
    document.addEventListener('DOMContentLoaded', (event) => {
        const codeElement = document.querySelector('pre code');
        if (codeElement) {
            try {
                const jsonData = JSON.parse(codeElement.textContent);
                // Replace basic info placeholders if needed here client-side,
                // but it's better handled server-side usually.
                // For now, just pretty print the template JSON.
                codeElement.textContent = JSON.stringify(jsonData, null, 2);
            } catch (e) {
                console.error("Error parsing/formatting JSON template:", e);
                // Keep the original text if parsing fails
            }
        }
    });
</script>
{% endblock %}

================================================================================

--- File: qingtingzhe_prototype_backend\templates\login.html ---
{% extends "base.html" %}

{% block title %}登录 - 倾听者原型后台{% endblock %}

{% block content %}
<div class="login-page">
    <h1>倾听者心理分析系统 - 后台原型</h1>
    <h2>登录</h2>
    {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
    {% endif %}
    <form method="post">
        <div class="form-group">
            <label for="username">用户名:</label>
            <input type="text" id="username" name="username" required value="admin"> <!-- 预填 admin -->
        </div>
        <div class="form-group">
            <label for="password">密码:</label>
            <input type="password" id="password" name="password" required value="password"> <!-- 预填 password -->
        </div>
        <button type="submit" class="btn btn-block">登录</button>
    </form>
</div>
{% endblock %}

================================================================================

--- File: qingtingzhe_prototype_backend\templates\report_guidance_viewer.html ---
{% extends "base.html" %}

{% block title %}{{ title }} - 倾听者原型后台{% endblock %}

{% block content %}
    <h2>{{ title }}</h2>

    {% if show_input_form %}
    <form method="post">
        <div class="form-group">
            <label for="name">姓名:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
            <label for="id_card">身份证号:</label>
            <input type="text" id="id_card" name="id_card">
        </div>
        <button type="submit" class="btn">查询报告并获取方案</button>
    </form>
    {% endif %}

    {% if report_text %}
    <div class="report-section">
        <h3>心理评估报告</h3>
        <pre>{{ report_text }}</pre>
    </div>
    {% endif %}

    {% if guidance_text %}
    <div class="guidance-section">
        <h3>{{ guidance_title }}</h3>
        <pre>{{ guidance_text }}</pre>
    </div>
    {% endif %}

    {% if not show_input_form %}
        <hr>
        <p><a href="{{ url_for('dashboard') }}" class="btn btn-secondary">返回功能列表</a></p>
        <!-- Add link back to input if needed -->
        {% if back_link %}
             <p><a href="{{ back_link }}">重新输入查询</a></p>
        {% endif %}
    {% else %}
         <p><a href="{{ url_for('dashboard') }}">返回功能列表</a></p>
    {% endif %}

{% endblock %}

================================================================================

--- File: qingtingzhe_prototype_backend\templates\user_management.html ---
{% extends "base.html" %}

{% block title %}用户管理 - 倾听者原型后台{% endblock %}

{% block content %}
    <h2>用户管理</h2>

    <table class="user-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>用户名</th>
                <th>邮箱</th>
                <th>姓名</th>
                <th>是否激活</th>
                <th>是否管理员</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.username }}</td>
                <td>{{ user.email if user.email else 'N/A' }}</td>
                <td>{{ user.full_name if user.full_name else 'N/A' }}</td>
                <td>{{ '是' if user.is_active else '否' }}</td>
                <td>{{ '是' if user.is_superuser else '否' }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="6">没有用户数据</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <p><a href="{{ url_for('dashboard') }}">返回功能列表</a></p>
{% endblock %}

================================================================================
